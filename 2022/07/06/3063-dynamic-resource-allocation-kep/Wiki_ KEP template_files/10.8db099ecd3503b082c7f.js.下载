(window["webpackJsonpknowledge-ui"]=window["webpackJsonpknowledge-ui"]||[]).push([[10],{"+2qM":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("mrSG"),o=n("fXoL"),r=n("3Pt+"),a=n("AA4e"),c=n("1Eq8"),l=(n("XUBH"),["markdownEditorElm"]),s={provide:r.i,useExisting:Object(o.forwardRef)(function(){return p}),multi:!0},d={provide:"config",useValue:{}},p=function(){function e(e){this.forRootConfig=e,this.rows=10,this.switchToRTF=new o.EventEmitter,this.focusOnEditor=new o.EventEmitter,this.saveContentEmit=new o.EventEmitter,this.onModelChange=function(){},this.onModelTouched=function(){}}return Object.defineProperty(e.prototype,"locale",{get:function(){return $.fn.markdown.messages},set:function(e){this.addLocaleSet(e)},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.initialization()},e.prototype.ngOnDestroy=function(){this.$toolbar&&this.$toolbar.remove()},e.prototype.addLocaleSet=function(e){e&&(Array.isArray(e)?e.forEach(function(e){$.fn.markdown.messages[e.language]=e.dictionary}):$.fn.markdown.messages[e.language]=e.dictionary)},e.prototype.focusHandler=function(){this.focusOnEditor.emit()},e.prototype.onShow=function(e){if(this.editorInstance=e,this.toolbarContailerSelector){var t=e.$textarea.prev();this.$toolbar=t,t.on("click",'[data-provider="bootstrap-markdown"]',$.proxy(e.__handle,e)),t.appendTo(this.toolbarContailerSelector)}this.options.autoGrowing&&e.$textarea.wrap('<div class="auto-growing"></div>')},e.prototype.setAutoGrowingContent=function(e){if(this.options.autoGrowing){var t=this.editorInstance.$textarea[0].parentNode;t&&(t.dataset.replicatedValue=e||"")}},e.prototype.initialization=function(){var e=this,t=$.fn.markdown.defaults,n=Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},t),c.a),this.forRootConfig),this.options);this.hookToEditorEvents(n);var o=n.onChange;n.onChange=function(t){var n=t&&t.getContent&&t.getContent();e.setAutoGrowingContent(n),e.onModelChange(n),"function"==typeof o&&o(t)};var r=n.onShow;n.onShow=function(t){e.onShow(t),"function"==typeof r&&r(t)};var a=n.onSaveContentEmit;n.onSaveContentEmit=function(){e.saveContentEmit.emit(),"function"==typeof a&&a()};var l=n.onSwitchToRTF;n.onSwitchToRTF=function(){e.switchToRTF.emit(),"function"==typeof l&&l()},$("#"+this.textareaId).markdown(n)},e.prototype.hookToEditorEvents=function(e){var t=this,n=function(n){if(Object.prototype.hasOwnProperty.call(e,n)&&n.startsWith("on")){var i=e[n];e[n]=function(e){t.dispatchCustomEvent(n,{eventData:e}),"function"==typeof i&&i(e)}}};for(var i in e)n(i)},e.prototype.writeValue=function(e){var t=this;this.value=e,Object(a.p)(function(){t.options.autoGrowing&&t.setAutoGrowingContent(e)}),this.value&&(this.elm.nativeElement.value=this.value)},e.prototype.registerOnChange=function(e){this.onModelChange=e},e.prototype.registerOnTouched=function(e){this.onModelTouched=e},e.prototype.dispatchCustomEvent=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0);var o={bubbles:n,cancelable:i};return t&&(o.detail=t),this.elm.nativeElement.dispatchEvent(new CustomEvent(e,o))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"]("config"))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["angular-markdown-editor"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](l,1),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.elm=n.first)},inputs:{locale:"locale",textareaId:"textareaId",placeholder:"placeholder",options:"options",customStyle:"customStyle",rows:"rows",toolbarContailerSelector:"toolbarContailerSelector"},outputs:{switchToRTF:"switchToRTF",focusOnEditor:"focusOnEditor",saveContentEmit:"saveContentEmit"},features:[o["\u0275\u0275ProvidersFeature"]([s,d])],decls:2,vars:7,consts:[["data-provide","markdown",1,"textarea",3,"id","placeholder","name","rows","mousedown"],["markdownEditorElm",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"textarea",0,1),o["\u0275\u0275listener"]("mousedown",function(){return t.focusHandler()}),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275styleMap"](t.customStyle),o["\u0275\u0275propertyInterpolate"]("id",t.textareaId),o["\u0275\u0275propertyInterpolate"]("placeholder",t.placeholder),o["\u0275\u0275propertyInterpolate"]("name",t.textareaId),o["\u0275\u0275propertyInterpolate"]("rows",t.rows))},styles:['.md-editor{word-break:break-all}.md-editor .auto-growing{display:grid}.md-editor .auto-growing:after{content:attr(data-replicated-value) " ";white-space:pre-wrap;visibility:hidden}.md-editor .auto-growing .textarea,.md-editor .auto-growing:after{grid-area:1/1/2/2}.md-editor .auto-growing .textarea{overflow:hidden}.md-editor .textarea{resize:none;border:none;outline:none;background:#fff}',".md-editor{display:block;border:1px solid #ddd}.md-editor .md-footer,.md-editor>.md-header{display:block;padding:6px 4px;background:#f5f5f5}.md-editor>.md-header{margin:0}.md-editor>.md-preview{background:#fff;border-top:1px dashed #ddd;border-bottom:1px dashed #ddd;min-height:10px;overflow:auto}.md-editor>textarea{font-family:Menlo,Monaco,Consolas,Courier New,monospace;font-size:14px;outline:0;margin:0;display:block;padding:0;width:100%;border:0;border-top:1px dashed #ddd;border-bottom:1px dashed #ddd;border-radius:0;box-shadow:none;background:#eee}.md-editor>textarea:focus{box-shadow:none;background:#fff}.md-editor.active{border-color:#66afe9;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.md-editor .md-controls{float:right;padding:3px}.md-editor .md-controls .md-control{right:5px;color:#bebebe;padding:3px 3px 3px 10px}.md-editor .md-controls .md-control:hover{color:#333}.md-editor.md-fullscreen-mode{width:100%;height:100%;position:fixed;top:0;left:0;z-index:99999;padding:60px 30px 15px;background:#fff!important;border:0!important}.md-editor.md-fullscreen-mode .md-footer{display:none}.md-editor.md-fullscreen-mode .md-input,.md-editor.md-fullscreen-mode .md-preview{margin:0 auto!important;height:100%!important;font-size:20px!important;padding:20px!important;color:#999;line-height:1.6em!important;resize:none!important;box-shadow:none!important;background:#fff!important;border:0!important}.md-editor.md-fullscreen-mode .md-preview{color:#333;overflow:auto}.md-editor.md-fullscreen-mode .md-input:focus,.md-editor.md-fullscreen-mode .md-input:hover{color:#333;background:#fff!important}.md-editor.md-fullscreen-mode .md-header{background:0 0;text-align:center;position:fixed;width:100%;top:20px}.md-editor.md-fullscreen-mode .btn-group{float:none}.md-editor.md-fullscreen-mode .btn{border:0;background:0 0;color:#b3b3b3}.md-editor.md-fullscreen-mode .btn.active,.md-editor.md-fullscreen-mode .btn:active,.md-editor.md-fullscreen-mode .btn:focus,.md-editor.md-fullscreen-mode .btn:hover{box-shadow:none;color:#333}.md-editor.md-fullscreen-mode .md-controls{display:none}.md-editor.md-fullscreen-mode .md-fullscreen-controls{position:absolute;top:20px;right:20px;text-align:right;z-index:1002;display:block}.md-editor.md-fullscreen-mode .md-fullscreen-controls a{color:#b3b3b3;clear:right;margin:10px;width:30px;height:30px;text-align:center}.md-editor.md-fullscreen-mode .md-fullscreen-controls a:hover{color:#333;text-decoration:none}.md-editor.md-fullscreen-mode .md-editor{height:100%!important;position:relative}.md-editor .md-fullscreen-controls{display:none}.md-nooverflow{overflow:hidden;position:fixed;width:100%}.f-20{font-size:20px}"],encapsulation:2}),e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()},"+jTH":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("ofXK"),o=n("sYmb"),r=n("3Pt+"),a=n("fXoL"),c=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[i.c,o.a,r.g]]}),e}()},"0qTp":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("ofXK"),o=n("3Pt+"),r=n("sYmb"),a=n("OzZK"),c=n("qAZ0"),l=n("FwiY"),s=n("PTRe"),d=n("mOC4"),p=n("fXoL"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[i.c,o.g,a.c,c.b,l.b,s.e,r.a,d.a]]}),e}()},"1Eq8":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={autofocus:!1,disabledButtons:[],dropZoneOptions:null,enableDropDataUri:!1,footer:"",height:"inherit",hiddenButtons:[],hideable:!1,iconlibrary:"glyph",initialstate:"editor",language:"fr",additionalButtons:[[{name:"groupFont",data:[{name:"cmdStrikethrough",toggle:!1,title:"Strikethrough",icon:{fa:"fa fa-strikethrough",glyph:"iconfont icon-editor-cutting-line cursor-pointer f-14"},callback:function(e){var t,n,i=e.getSelection(),o=e.getContent();t=0===i.length?e.__localize("strikethrough"):i.text,"~~"===o.substr(i.start-2,2)&&"~~"===o.substr(i.end,2)?(e.setSelection(i.start-2,i.end+2),e.replaceSelection(t),n=i.start-2):(e.replaceSelection("~~"+t+"~~"),n=i.start+2),e.setSelection(n,n+t.length)}}]},{name:"groupMisc",data:[{name:"cmdTable",toggle:!1,title:"Table",icon:{fa:"fa fa-table",glyph:"iconfont icon-editor-table cursor-pointer f-14"},callback:function(e){var t,n=e.getSelection();e.replaceSelection("\n| Tables        | Are           | Cool  | \n| ------------- |:-------------:| -----:| \n| col 3 is      | right-aligned | $1600 | \n| col 2 is      | centered      |   $12 | \n| zebra stripes | are neat      |    $1 |"),e.setSelection(t=n.start,t+"\n| Tables        | Are           | Cool  | \n| ------------- |:-------------:| -----:| \n| col 3 is      | right-aligned | $1600 | \n| col 2 is      | centered      |   $12 | \n| zebra stripes | are neat      |    $1 |".length)}}]}]]}},"1JWf":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(e){this._elementRef=e,this.clickOutside=new i.EventEmitter}return e.prototype.onMouseEnter=function(e){this._elementRef.nativeElement.contains(e)||(this.outsideRange?this.outsideRange.nativeElement.contains(e)&&this.clickOutside.emit(null):this.clickOutside.emit(null))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ElementRef))},e.\u0275dir=i["\u0275\u0275defineDirective"]({type:e,selectors:[["","clickElementOutside",""]],hostBindings:function(e,t){1&e&&i["\u0275\u0275listener"]("click",function(e){return t.onMouseEnter(e.target)},!1,i["\u0275\u0275resolveDocument"])},inputs:{outsideRange:"outsideRange"},outputs:{clickOutside:"clickOutside"}}),e}()},"1zlk":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("lJxs"),o=n("fXoL"),r=n("tk/3"),a=function(){function e(e){this.http=e}return e.prototype.queryCoeResult=function(e){return this.http.post("/devops-knowledge-management/api/coes",e).pipe(Object(i.a)(function(e){return e}))},e.prototype.articleAndViews=function(e){return this.http.get("/devops-knowledge-management/api/coe?domainId="+e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.getImproveTeam=function(e){return this.http.post("/vision-platform/api/member/uauth/actions",e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.userBonusPoint=function(e){return this.http.post("/devops-knowledge-management/api/core/rank",e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.coeClassificationTree=function(e){return this.http.post("/devops-knowledge-management/api/query/coe/type",e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.coeReleaseTree=function(e){return this.http.get("/devops-knowledge-management/api/getCoePublishTree?target_domain="+e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.getCustomAttr=function(){return this.http.get("/devops-knowledge-management/api/query/coe/customAttr").pipe(Object(i.a)(function(e){return e.data}))},e.prototype.query_members=function(e){return this.http.request("get","/vision-platform/api/domains/"+e+"/members").pipe(Object(i.a)(function(e){return e}))},e.prototype.fuzzySearchUsers=function(e){return this.http.get("/vision-platform/api/users?username="+e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.queryTopTree=function(e){var t=this;return this.http.get("/vision-platform/api/domains/"+e+"/top_tree?type=management").pipe(Object(i.a)(function(e){var n=t.convertTopTee(null,[e.data]);return t.flatTree(n)}))},e.prototype.flatTree=function(e,t){var n=this;return void 0===t&&(t=[]),e.forEach(function(e){t.push(e),e.children.length>0&&n.flatTree(e.children,t)}),t},e.prototype.convertTopTee=function(e,t,n,i){var o=this;return void 0===n&&(n=1),void 0===i&&(i=[]),t.map(function(t){return{checked:!0,id:t.id,value:t.title,level:n,parent:e?{id:e.id}:null,children:t.relations?o.convertTopTee(t,t.relations,n+1):[],margin_left:10*(n-1)+"px",collapse:1===n,hide:n>2,childrenCount:t.relations.length}})},e.prototype.hotWord=function(e){return this.http.post("/devops-knowledge-management/api/coe/hot/word",e).pipe(Object(i.a)(function(e){return e}))},e.prototype.showHotWords=function(e){return this.http.post("/devops-knowledge-management/api/coe/hot/words",e).pipe(Object(i.a)(function(e){return e.data}))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](r.c))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()},"25hl":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("fXoL"),o=n("ofXK");function r(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275listener"]("mousedown",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().draggableChange(e,"left")}),i["\u0275\u0275elementEnd"]()}}function a(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275listener"]("mousedown",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().draggableChange(e,"right")}),i["\u0275\u0275element"](1,"div",8),i["\u0275\u0275elementEnd"]()}}function c(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275listener"]("mousedown",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().draggableChange(e)}),i["\u0275\u0275elementEnd"]()}}var l,s=["*"],d=function(){function e(e,t,n){this.el=e,this.renderer2=t,this.zone=n,this.position="both",this.widthChange=new i.EventEmitter,this.heightChange=new i.EventEmitter,this.draggableSize="default",this.draggableStyle={}}return e.prototype.ngOnInit=function(){["left","right","both"].includes(this.position)?this.draggableStyle.width=(this.inputWidth||360)+"px":(this.draggableStyle.height=this.inputHeight+"px",this.draggableStyle.width="100%")},e.prototype.ngAfterViewInit=function(){this.oPanel=this.el.nativeElement.querySelector(".draggable-div-styl"),this.recyclePanel=this.el.nativeElement.querySelector(".rubbish-recycle-station")},e.prototype.draggableChange=function(e,t){var n=e.clientX,i=(l=this).oPanel.offsetWidth;if(t)document.onmousemove=function(e){var o,r;"right"==t?r=e.clientX-n+i:"left"==t&&(r=n-e.clientX+i);var a=l.minWidth;r<a&&(r=a),r>l.maxWidth&&(r=l.maxWidth),(null===(o=null==l?void 0:l.oPanel)||void 0===o?void 0:o.style)&&(l.oPanel.style.width=r+"px"),(null==l?void 0:l.recyclePanel.style)&&(l.recyclePanel.style.width=r-3+"px"),l.widthChange.emit({type:"dragge-div-width-change",data:{width:r}})};else{var o=e.clientY,r=l.oPanel.offsetHeight;document.onmousemove=function(e){var t,a;"bottom"==l.position?a=e.clientY-o+r:"top"==l.position&&(a=n-e.clientX+i),a<l.minHeight&&(a=l.minHeight),a>l.maxHeight&&(a=l.maxHeight),(null===(t=null==l?void 0:l.oPanel)||void 0===t?void 0:t.style)&&(l.oPanel.style.height=a+"px"),l.heightChange.emit({type:"dragge-div-height-change",data:{height:a}})}}document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}},e.prototype.ngOnChanges=function(e){e.inputHeight&&e.inputHeight.currentValue?this.draggableStyle.height=e.inputHeight.currentValue+"px":e.maxHeight&&e.maxHeight.currentValue?this.maxHeight=e.maxHeight.currentValue:e.minHeight&&e.minHeight.currentValue?this.minHeight=e.minHeight.currentValue:e.draggableSize&&e.draggableSize.currentValue&&(this.draggableSize=e.draggableSize.currentValue),this.initDraggableWrapper(this.draggableSize)},e.prototype.initDraggableWrapper=function(e){if(this.oPanel)switch(e){case"max":this.maxWidth&&(this.oPanel.style.width=this.maxWidth+"px"),this.maxHeight&&(this.oPanel.style.height=this.maxHeight+"px");break;case"min":this.minWidth&&(this.oPanel.style.width=this.minWidth+"px"),this.minHeight&&(this.oPanel.style.height=this.minHeight+"px");break;default:this.inputWidth&&(this.oPanel.style.width=this.inputWidth+"px"),this.inputHeight&&(this.oPanel.style.height=this.inputHeight+"px")}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](i.Renderer2),i["\u0275\u0275directiveInject"](i.NgZone))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["draggable-div"]],inputs:{maxWidth:"maxWidth",minWidth:"minWidth",position:"position",inputWidth:"inputWidth",maxHeight:"maxHeight",minHeight:"minHeight",inputHeight:"inputHeight",draggableSize:"draggableSize"},outputs:{widthChange:"widthChange",heightChange:"heightChange"},features:[i["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:s,decls:7,vars:4,consts:[[1,"draggable-div-styl","draggable-initial-styl",3,"ngStyle"],["class","draggable-left-child","id","draggLeft",3,"mousedown",4,"ngIf"],["class","draggable-right-child","id","draggRight",3,"mousedown",4,"ngIf"],["class","draggable-height-child","id","draggHeight",3,"mousedown",4,"ngIf"],[2,"height","100%"],["draggableChild",""],["id","draggLeft",1,"draggable-left-child",3,"mousedown"],["id","draggRight",1,"draggable-right-child",3,"mousedown"],[1,"drag-line"],["id","draggHeight",1,"draggable-height-child",3,"mousedown"]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,r,1,0,"div",1),i["\u0275\u0275template"](2,a,2,0,"div",2),i["\u0275\u0275template"](3,c,1,0,"div",3),i["\u0275\u0275elementStart"](4,"div",4,5),i["\u0275\u0275projection"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("ngStyle",t.draggableStyle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","left"==t.position||"both"==t.position),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","right"==t.position||"both"==t.position),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","left"!=t.position&&"right"!=t.position&&"both"!=t.position))},directives:[o.o,o.n],styles:[".draggable-div-styl[_ngcontent-%COMP%]{position:relative;float:right}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-left-child[_ngcontent-%COMP%]{left:-2px;top:0;height:100%;width:2px;position:absolute;background:#d7d7d7}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-left-child[_ngcontent-%COMP%]:hover{cursor:e-resize;background:#23c6c8;z-index:5}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-right-child[_ngcontent-%COMP%]{right:-2px;top:0;height:100%;width:2px;position:absolute;padding:0 6px;z-index:10;cursor:e-resize}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-right-child[_ngcontent-%COMP%]:hover   .drag-line[_ngcontent-%COMP%]{background:#23c6c8;width:4px;height:100%}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-height-child[_ngcontent-%COMP%]{right:0;bottom:-1px;height:3px;width:100%;position:absolute;z-index:2}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-height-child[_ngcontent-%COMP%]:hover{cursor:n-resize;background:#23c6c8;z-index:5}.draggable-initial-styl[_ngcontent-%COMP%]{height:100%}"]}),e}()},"3OLy":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("mrSG"),o=n("AA4e"),r=n("otx/"),a=n("pSv2"),c=n("aDQL"),l=n("fXoL"),s=n("tk/3"),d=function(){function e(e){this.http=e}return e.prototype.openWiki=function(e,t){void 0===t&&(t=[]),Object(c.a)().emit(r.b.wikiOpen,e,t)},e.prototype.lockWiki=function(e,t){return Object(i.b)(this,void 0,void 0,function(){var n,l,s;return Object(i.e)(this,function(i){switch(i.label){case 0:return s=(l=a.a).toUserInfo,[4,o.d];case 1:return n=s.apply(l,[i.sent()]),Object(c.a)().emit(r.b.wikiLock,e,t,n),[2]}})})},e.prototype.unlockWiki=function(e,t){Object(c.a)().emit(r.b.wikiUnlock,e,t)},e.prototype.exitCollabEdit=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,l;return Object(i.e)(this,function(i){switch(i.label){case 0:return l=(n=a.a).toUserInfo,[4,o.d];case 1:return t=l.apply(n,[i.sent()]),Object(c.a)().emit(r.b.wikiExitCollaboration,e,t.username),[2]}})})},e.prototype.reqestUnlock=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,l;return Object(i.e)(this,function(i){switch(i.label){case 0:return l=(n=a.a).toUserInfo,[4,o.d];case 1:return t=l.apply(n,[i.sent()]),Object(c.a)().emit(r.b.wikiRequestUnlock,e,t),[2]}})})},e.prototype.collaborationForceOpen=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,l;return Object(i.e)(this,function(i){switch(i.label){case 0:return l=(n=a.a).toUserInfo,[4,o.d];case 1:return t=l.apply(n,[i.sent()]),Object(c.a)().emit(r.b.wikiCollaborationForceOpen,e,t.username),[2]}})})},e.prototype.collaborationForceExit=function(e){Object(c.a)().emit(r.b.wikiCollaborationForceExit,e)},e.prototype.requestCollaboration=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,l;return Object(i.e)(this,function(i){switch(i.label){case 0:return l=(n=a.a).toUserInfo,[4,o.d];case 1:return t=l.apply(n,[i.sent()]),Object(c.a)().emit(r.b.wikiRequestCollabration,e,t),[2]}})})},e.prototype.joinCollaborationReport=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return[4,o.d];case 1:return t=n.sent(),[2,new Promise(function(n,i){Object(c.a)().emit(r.b.wikiJoinCollabration,e,t.user_name,function(e){e?i(e):n()})})]}})})},e.prototype.convertWebstrateSuccess=function(e){Object(c.a)().emit(r.b.wikiConvertCollaborationComplete,e)},e.prototype.convertWebstrateFailed=function(e,t){Object(c.a)().emit(r.b.wikiConvertCollaborationFailed,e,t)},e.prototype.createWebstrate=function(e,t){return new Promise(function(n){var i=document.createElement("iframe");i.setAttribute("src",location.origin+"/collab-ui/"+t+"/"),i.style.display="none",document.body.appendChild(i);var o=function(r){var a,c;"webstrateReady"===(null===(a=r.data)||void 0===a?void 0:a.type)&&i.contentWindow.postMessage({type:"setDoc",data:e},location.origin),"docSaved"===(null===(c=r.data)||void 0===c?void 0:c.type)&&(window.removeEventListener("message",o),n(t),document.body.removeChild(i))};window.addEventListener("message",o)})},e.prototype.queryCollaboration=function(e){return this.http.get("/devops-knowledge-management/api/wiki/collaboration",{params:{wikiSn:e,type:"collaboration"}})},e.prototype.cleanCollaboration=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return[4,o.d];case 1:return t=n.sent(),[2,this.http.put("/devops-knowledge-management/api/wiki/collaboration",{user:t.user_name,wikiSn:[e],operationType:"clean"}).toPromise()]}})})},e.prototype.joinCollaboration=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return[4,o.d];case 1:return t=n.sent(),[2,this.http.put("/devops-knowledge-management/api/wiki/collaboration",{user:t.user_name,wikiSn:[e],operationType:"join"}).toPromise()]}})})},e.prototype.leaveCollaboration=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return[4,o.d];case 1:return t=n.sent(),[2,this.http.put("/devops-knowledge-management/api/wiki/collaboration",{user:t.user_name,wikiSn:[e],operationType:"exit"}).toPromise()]}})})},e.prototype.removeLock=function(e){return this.http.delete("/devops-knowledge-management/api/wiki/lock",{params:{entity_sn:e}})},e.prototype.addLock=function(e){return this.http.post("/devops-knowledge-management/api/wiki/lock",null,{params:{entity_sn:e}})},e.prototype.queryLock=function(e){return this.http.post("/devops-knowledge-management/api/query/wiki/lock",e)},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](s.c))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"4P1S":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("fujP"),o=n("fXoL"),r=n("sYmb"),a=function(){function e(e){this.translate=e}return e.prototype.getFormatedPerson=function(e,t){return e&&e.name?"en"===t&&e.name_full?e.name_full:e.account?e.name+" "+e.account:e.name:""},e.prototype.getFormatedPeople=function(e,t){return"string"==typeof e?e:e.map(function(e){return"zh"===t?e.name+" "+e.account:e.name_full}).join("zh"===t?"\uff0c":",")},e.prototype.getFomatedLabel=function(e,t,n,i){if(!e)return"";for(t=0;t<e.length;t++)"PMS"!==(i=e[t]).title&&(n+=i.title+(t===e.length-1?"":"\uff0c"));return n},e.prototype.getFormatedAssignedPlan=function(e,t,n){n+=e.version_number;var i=e.expire_date?e.expire_date.replace(/-/g,"."):"";for(n+="("+(e.expect_start_time?e.expect_start_time.replace(/-/g,"."):"")+"~"+i+")",t=0;t<e.assigned_milestones.length;t++)n+=" \u25aa "+e.assigned_milestones[t].title;return n},e.prototype.getFormatedDomainName=function(e,t,n){return Array.isArray(e)&&(t=e.map(function(e){return"en"===n&&e.title_en||e.title}).join("/")),t},e.prototype.transform=function(e,t){var n=this,i="",o=localStorage.getItem("NG_TRANSLATE_LANG_KEY")||"zh",r=this.translate?this.translate.currentLang:o,a={person:function(){return n.getFormatedPerson(e,r)},people:function(){return n.getFormatedPeople(e,r)},labels:function(){return n.getFomatedLabel(e,0,i,void 0)},req_sources:function(){return n.formatReqSources(e,i,r)},assigned_plans:function(){return n.getFormatedAssignedPlan(e,0,i)},joinDomainName:function(){return n.getFormatedDomainName(e,i,r)},release_plans:function(){i+=e.title;var t=e.start_date?e.start_date.replace(/-/g,"."):"",n=e.end_date?e.end_date.replace(/-/g,"."):"";return i+="("+t+"~"+n+")"},assigned_domain:function(){return"en"===r?e.short_title||e.title_en||e.title:e.short_title||e.title},roadmap:function(){return"en"===r&&e.serviceEnTitle||e.serviceCNTitle},joinFeatureSetName:function(){return Array.isArray(e)&&(i=e.map(function(e){return e.title}).join("/")),i}}[t];if(a)return a()},e.prototype.formatReqSources=function(e,t,n){for(var o=0;o<e.length;o++){var r=e[o];o>0&&(t+=" "),Object(i.a)(r.cloud)||(t+="en"===n&&r.cloud.title_en||r.cloud.title),Object(i.a)(r.region)||(t+=" "+this.translate.instant("en"===n&&r.region.title_en||r.region.title)),r.customer&&!Object(i.a)(r.customer.id)&&(t+=" \u2022"+this.translate.instant("en"===n&&r.customer.title_en||r.customer.title))}return t},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](r.c))},e.\u0275pipe=o["\u0275\u0275definePipe"]({name:"workitemAttr",type:e,pure:!0}),e}()},"5UG9":function(e,t,n){"use strict";n.d(t,"a",function(){return H});var i=n("mrSG"),o=n("fXoL"),r=n("Kj3r"),a=n("/uUt"),c=n("XNiG"),l=n("AA4e"),s=n("4P1S"),d=n("0VPD"),p=n("tk/3"),u=n("lJxs"),m=function(){function e(e){this.http=e}return e.prototype.getDirs=function(e,t){var n={params:(new p.g).set("domain_id",e)};return this.http.post("/devops-knowledge-management/api/query/childrensWiki",t,n).pipe(Object(u.a)(function(e){return e.data}))},e.prototype.getWikiCategories=function(e){return this.http.get("/devops-knowledge-management/api/wiki/kanban?domain_id="+e).pipe(Object(u.a)(function(e){return e.data}))},e.prototype.getMyDomainInfo=function(){var e=localStorage.getItem("visionUserInfo");return e=JSON.parse(e),this.http.get("/vision-platform/api/domains/v2/mine_domain?user_id="+e.user_id).pipe(Object(u.a)(function(e){return e.data}))},e.prototype.getUserPermission=function(e,t){void 0===t&&(t=!1);var n=localStorage.getItem("visionUserInfo"),i="/vision-platform/api/domain/"+e+"/roles?user_id="+(n=JSON.parse(n)).user_id;return t&&(i+="&need_up_role=false"),this.http.get(i).pipe(Object(u.a)(function(e){return e.data}))},e.prototype.getLinkDomains=function(e,t){return this.http.post("/vision-platform/api/domains/query/faltung",[e],{params:t}).pipe(Object(u.a)(function(e){return e.data}))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](p.c))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),g=n("sYmb"),h=n("ofXK"),f=n("PTRe"),v=n("3Pt+"),C=n("Nqz0"),b=n("nxWG"),x=n("Q8cG"),y=["nzTreeComponent"];function w(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,n.tipInfo.title))}}function O(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",20),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().goBackCategoryList()}),o["\u0275\u0275element"](1,"i",21),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden","system"===(null==i.currentCategory?null:i.currentCategory.classify)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](3,2,i.tipInfo.detailTitle)," ")}}function _(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",22),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"i",23),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](),i=o["\u0275\u0275reference"](17);o["\u0275\u0275property"]("nzDropdownMenu",i),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.currentDomainInfo?null==n.currentDomainInfo?null:n.currentDomainInfo.title:o["\u0275\u0275pipeBind1"](2,2,"DOMAIN")," ")}}function M(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",27),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).handleCategoryClick(e)}),o["\u0275\u0275elementStart"](2,"div",28),o["\u0275\u0275element"](3,"img",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",30),o["\u0275\u0275elementStart"](5,"div",31),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",32),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](9,"i",33),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/"+i.icon+".jpg",o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.title),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.description)}}function S(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",24),o["\u0275\u0275elementStart"](1,"div",25),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,M,10,3,"div",26),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,2,"KNOWLEDGE_CATEGORY")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",n.categoriesArr)}}function P(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",27),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).handleCategoryClick(e)}),o["\u0275\u0275elementStart"](2,"div",28),o["\u0275\u0275element"](3,"img",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",30),o["\u0275\u0275elementStart"](5,"div",31),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",32),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](9,"i",33),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/"+i.icon+".jpg",o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.title),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.description)}}function E(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",34),o["\u0275\u0275elementStart"](1,"div",25),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,P,10,3,"div",26),o["\u0275\u0275elementStart"](5,"nz-tree",35,36),o["\u0275\u0275listener"]("nzClick",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().nzClickEvent(e)})("nzExpandChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getChildrenTreeNode(e.node)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](),r=o["\u0275\u0275reference"](15);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,5,"KNOWLEDGE_CATEGORY")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",i.matchCategoriesArr),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzHideUnMatched",!0)("nzData",i.selectArrMatch)("nzTreeTemplate",r)}}function I(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",34),o["\u0275\u0275elementStart"](1,"div",37),o["\u0275\u0275elementStart"](2,"div",38),o["\u0275\u0275elementStart"](3,"span",39),o["\u0275\u0275elementStart"](4,"i",20),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().rootSelectFunc()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",27),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().rootSelectFunc()}),o["\u0275\u0275elementStart"](6,"div",28),o["\u0275\u0275element"](7,"img",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",30),o["\u0275\u0275elementStart"](9,"div",31),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",32),o["\u0275\u0275text"](12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",40),o["\u0275\u0275elementStart"](14,"nz-tree",41,42),o["\u0275\u0275listener"]("nzExpandChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getChildrenTreeNode(e.node)})("nzClick",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().nzClickEvent(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](),r=o["\u0275\u0275reference"](15);o["\u0275\u0275advance"](4),o["\u0275\u0275classMap"](i.rootSelect?"select-active-styl iconfont icon-yuanquan":"fa fa-circle-thin"),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/"+i.activeCategory.icon+".jpg",o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](i.rootSelect?"active-span-styl":""),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.activeCategory.title),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.activeCategory.description),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzHideUnMatched",!0)("nzData",i.selectArr)("nzSearchValue",i.treeSearchValue)("nzTreeTemplate",r)}}function k(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",43),o["\u0275\u0275elementStart"](1,"span",44),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"span",45),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"button",46),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().confirmFunc()}),o["\u0275\u0275element"](7,"span",47),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,3,i.tipInfo.detailBottomTip)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.movePath),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](8,5,i.tipInfo.detailConfirmBtnTip))}}function T(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"i",20),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().selectNode(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275classMap"](r.activeNode&&r.activeNode.origin.sn==i.origin.sn?"select-active-styl iconfont icon-yuanquan":"fa fa-circle-thin")}}function A(e,t){1&e&&o["\u0275\u0275element"](0,"i",54),2&e&&o["\u0275\u0275classMap"]("icon-color fa fa-ban")}var D=function(e){return{width:e}};function z(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",55),o["\u0275\u0275elementStart"](1,"span",56),o["\u0275\u0275elementStart"](2,"span",57),o["\u0275\u0275element"](3,"i",58),o["\u0275\u0275elementStart"](4,"span",59),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](8,D,331-16*n.level+"px")),o["\u0275\u0275advance"](3),o["\u0275\u0275classProp"]("search-active-styl",""!=i.searchValue.trim()&&n.origin.is_search),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"]((null==i.disabledNode||null==i.disabledNode.origin?null:i.disabledNode.origin.sn)==n.origin.sn||(null==n.origin||null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)!=i.currentDomain?"diabled-span":""),o["\u0275\u0275classProp"]("search-active-styl",""!=i.searchValue.trim()&&n.origin.is_search),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.title)}}function L(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",60),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().selectNode(e)}),o["\u0275\u0275elementStart"](1,"span",56),o["\u0275\u0275elementStart"](2,"span",57),o["\u0275\u0275element"](3,"i",58),o["\u0275\u0275elementStart"](4,"span",59),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](10,D,331-16*i.level+"px")),o["\u0275\u0275advance"](3),o["\u0275\u0275classProp"]("search-active-styl",""!=r.searchValue.trim()&&i.origin.is_search),o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("search-active-styl",""!=r.searchValue.trim()&&i.origin.is_search)("diabled-span",r.disabledNode&&r.disabledNode.origin&&r.disabledNode.origin.sn==i.origin.sn)("active-span-styl",r.activeNode&&r.activeNode.origin&&r.activeNode.origin.sn==i.origin.sn),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.title)}}var V=function(e){return{left:e}};function N(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",48),o["\u0275\u0275elementStart"](1,"span",49),o["\u0275\u0275template"](2,T,1,2,"i",50),o["\u0275\u0275template"](3,A,1,2,"i",51),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,z,6,10,"span",52),o["\u0275\u0275template"](5,L,6,12,"span",53),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](5,V,n.level>0?-50-24*n.level+"px":"-50px")),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",((null==i.disabledNode||null==i.disabledNode.origin?null:i.disabledNode.origin.sn)!=n.origin.sn||!i.disabledNode)&&(null==n.origin||null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)==i.currentDomain),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(null==i.disabledNode||null==i.disabledNode.origin?null:i.disabledNode.origin.sn)==n.origin.sn||(null==n.origin||null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)!=i.currentDomain),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(null==i.disabledNode||null==i.disabledNode.origin?null:i.disabledNode.origin.sn)==n.origin.sn||(null==n.origin||null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)!=i.currentDomain),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",((null==i.disabledNode||null==i.disabledNode.origin?null:i.disabledNode.origin.sn)!=n.origin.sn||!i.disabledNode)&&(null==n.origin||null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)==i.currentDomain)}}function R(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",64),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).moveChangeDomain(e.domain)}),o["\u0275\u0275elementStart"](1,"a",65),o["\u0275\u0275element"](2,"i",66),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"workitemAttr"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](5,1,i.domain,"assigned_domain"))}}function j(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",67),o["\u0275\u0275element"](1,"span",68),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"img",69),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,1,"COMMON_INFO_NO_DATA")))}function U(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",61),o["\u0275\u0275template"](1,R,6,4,"div",62),o["\u0275\u0275template"](2,j,4,3,"div",63),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.myDomainList),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",0==n.myDomainList.length)}}function B(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",64),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).moveChangeDomain(e.domain)}),o["\u0275\u0275elementStart"](1,"a",65),o["\u0275\u0275element"](2,"i",66),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"workitemAttr"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](5,1,i.domain,"assigned_domain"))}}function F(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",67),o["\u0275\u0275element"](1,"span",68),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"img",69),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,1,"COMMON_INFO_NO_DATA")))}function W(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",61),o["\u0275\u0275template"](1,B,6,4,"div",62),o["\u0275\u0275template"](2,F,4,3,"div",63),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.matchDomainArr),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",0==n.matchDomainArr.length)}}var H=function(){function e(e,t,n){var i=this;this.knowledgeService=e,this.translate=t,this.attrPipe=n,this.searchValue="",this.modelTitle="",this.selectArr=[],this.modelShowVariableChange=new o.EventEmitter,this.modelShowCloseChange=new o.EventEmitter,this.rootSelect=!0,this.inputFlag=!0,this.userQuestionUpdate=new c.a,this.showCategoryListCtrl=!0,this.myDomainList=[],this.matchDomainArr=[],this.domainSearchValue="",this.canMoveDomainAccess=!1,this.movePath="",this.userQuestionUpdate.pipe(Object(r.a)(500),Object(a.a)()).subscribe(function(e){i.getSearchList()})}return e.prototype.closeModal=function(){this.searchValue="",this.modelShowVariable=!1,this.modelShowCloseChange.emit(this.modelShowVariable)},e.prototype.goBackCategoryList=function(){var e,t;"system"!==(null===(e=this.currentCategory)||void 0===e?void 0:e.classify)&&(this.wikiEditFunction&&["workitem"].includes(null===(t=this.wikiEditFunction)||void 0===t?void 0:t.editFrom)||(this.searchValue="",this.showCategoryListCtrl=!0,this.searchPlaceHolder=this.translate.instant(this.tipInfo.listPlaceHolder,"")))},e.prototype.nzClickEvent=function(e){},e.prototype.selectNode=function(e){this.activeNode=e,this.rootSelect=!1;var t=this.getSelectNode(e),n=this.currentDomainInfo?this.attrPipe.transform(this.currentDomainInfo,"assigned_domain"):this.translate.instant("CURRENT_DOMAIN","");this.movePath=n+" > "+this.activeCategory.title+" > "+t},e.prototype.getSelectNode=function(e){var t="";return e.parentNode&&(t+=this.getSelectNode(e.parentNode)),""==t?e.origin.title:t+" > "+e.origin.title},e.prototype.rootSelectFunc=function(){this.rootSelect=!0,this.activeNode=null;var e=this.currentDomainInfo?this.attrPipe.transform(this.currentDomainInfo,"assigned_domain"):this.translate.instant("CURRENT_DOMAIN","");this.movePath=e+" > "+this.activeCategory.title},e.prototype.confirmFunc=function(){this.searchValue="",this.modelShowVariable=!1;var e={};this.rootSelect&&(e={sn:"",id:"0",key:"0",parent_id:null,category:"directory",kanban_id:this.activeCategory.id});var t={showCtrl:this.modelShowVariable,parentObj:this.rootSelect?e:this.activeNode.origin};t.parentObj.domain_id=this.currentDomain,this.modelShowVariableChange.emit(t)},e.prototype.getSearchList=function(){var e=this;setTimeout(function(){e.inputFlag&&(""!=e.searchValue.trim()?e.showCategoryListCtrl?(e.matchCategoryList(),e.getCataLogBySearch()):e.treeSearchValue=e.searchValue:e.showCategoryListCtrl||(e.treeSearchValue=""))},0)},e.prototype.matchCategoryList=function(){var e=this;this.matchCategoriesArr=this.categoriesArr.filter(function(t){return t.title.indexOf(e.searchValue)>-1||t.description&&t.description.indexOf(e.searchValue)>-1})},e.prototype.matchMoveList=function(e){for(var t=e.length,n=0;n<t;n++)e[n].isLeaf=0===e[n].children_number,0!==e[n].children_number&&this.matchMoveList(e[n].children)},e.prototype.getDirs=function(){var e=this;this.knowledgeService.getDirs(this.currentDomain,{status:["published"],kanban_id:this.activeCategory.id}).subscribe(function(t){var n;e.selectArr=Object(i.i)([],t),e.getSuitableArr(e.selectArr,null),e.getGiveArr(e.selectArr,""!=e.disabledNode?e.disabledNode.origin.sn:""),"system"===(null===(n=e.currentCategory)||void 0===n?void 0:n.classify)&&e.matchMoveList(e.selectArr)},function(){})},e.prototype.getCataLogBySearch=function(){var e=this;this.knowledgeService.getDirs(this.currentDomain,{status:["published"],search:this.searchValue,searchTree:!0,kanban_id:this.activeCategory.id}).subscribe(function(t){var n;e.selectArrMatch=t,e.getSuitableArr(e.selectArrMatch,null),e.expandHighLightArr(e.selectArrMatch),e.getGiveArr(e.selectArrMatch,""!=e.disabledNode?e.disabledNode.origin.sn:""),"system"===(null===(n=e.currentCategory)||void 0===n?void 0:n.classify)&&e.matchMoveList(e.selectArrMatch),e.selectArrMatch=Object(i.i)([],e.selectArrMatch)},function(){})},e.prototype.getGiveArr=function(e,t){for(var n,i,o=e.length-1;o>=0;o--)e[o].sn!==t&&(null===(n=["feature","story"])||void 0===n?void 0:n.includes(null===(i=e[o])||void 0===i?void 0:i.classify))?e.splice(o,1):(e[o].key=e[o].sn,""!==t&&e[o].sn==t&&(e[o].children=[]),0!==e[o].children.length&&this.getGiveArr(e[o].children,t))},e.prototype.getSuitableArr=function(e,t){for(var n,i,o=e.length,r=0;r<o;r++)e[r].isLeaf=!e[r].children_number||e[r].sn==(null===(i=null===(n=this.disabledNode)||void 0===n?void 0:n.origin)||void 0===i?void 0:i.sn),e[r].key=e[r].sn,e[r].parent=t,1===e[r].publish_status&&e[r].assigned_domain.id!==this.currentDomain&&(e[r].assigned_domain.id=this.currentDomain),e[r].children_number&&this.getSuitableArr(e[r].children,e[r])},e.prototype.ngOnInit=function(){this.searchPlaceHolder=this.translate.instant(this.tipInfo.listPlaceHolder,""),this.movePath=this.translate.instant("CURRENT_DOMAIN",""),this.getCategories(),this.importDocument?(this.getLinkDomains(),this.canMoveDomainAccess=!0):this.getDomainAccess()},e.prototype.getCategories=function(){var e=this;this.knowledgeService.getWikiCategories(this.currentDomain).subscribe(function(t){var n;if(e.categoriesArr=t.filter(function(e){return"grey"!=e.classify}).filter(function(t){var n,i,o;return!(null===(n=e.importDocument)||void 0===n?void 0:n.filterCategory)||!((null===(i=e.importDocument)||void 0===i?void 0:i.filterCategory.id.includes(t.id))||(null===(o=e.importDocument)||void 0===o?void 0:o.filterCategory.classify.includes(t.classify)))}).map(function(e,t){return Object(i.a)({icon:"category-icon-"+(t%10+1)},e)}),e.currentCategory){var o=e.categoriesArr.find(function(t){return t.id===e.currentCategory.id});e.handleCategoryClick(o)}(null===(n=e.currentCategory)||void 0===n?void 0:n.classify)||(e.categoriesArr=e.categoriesArr.filter(function(e){return"system"!==e.classify}))},function(){})},e.prototype.handleCategoryClick=function(e){this.selectArr=[],this.showCategoryListCtrl=!1,this.activeCategory=e,this.getDirs(),this.searchPlaceHolder=this.translate.instant(this.tipInfo.detailPlaceHolder,"")+"  "+this.activeCategory.title,this.searchValue="";var t=this.currentDomainInfo?this.attrPipe.transform(this.currentDomainInfo,"assigned_domain"):this.translate.instant("CURRENT_DOMAIN","");this.movePath=t+" > "+this.activeCategory.title},e.prototype.expandHighLightArr=function(e){for(var t=e.length,n=0;n<t;n++)e[n].is_search&&this.openTargetBranch(e[n]),0!=e[n].children.length&&this.expandHighLightArr(e[n].children)},e.prototype.openTargetBranch=function(e){Object(l.o)(e)||Object(l.o)(e.parent)||(e.parent.expanded=!0,this.openTargetBranch(e.parent))},e.prototype.getChildrenTreeNode=function(e){var t=this;e.origin.isLeaf||!e.origin.children_number||e.origin.children.length||this.knowledgeService.getDirs(this.currentDomain,{status:["published"],wiki_sn:e.origin.sn}).subscribe(function(n){var i;e.origin.children_number=n.length,t.getSuitableArr(n,e.origin),"system"===(null===(i=t.currentCategory)||void 0===i?void 0:i.classify)&&t.matchMoveList(n),e.addChildren(n)},function(){})},e.prototype.getDomainAccess=function(){var e=this;this.knowledgeService.getUserPermission(this.currentDomain).subscribe(function(t){e.canMoveDomainAccess=Object(d.a)(t,["Owner","Admin"]).length>0,e.canMoveDomainAccess&&e.getMyDomainInfo()},function(){})},e.prototype.getMyDomainInfo=function(){var e=this;this.knowledgeService.getMyDomainInfo().subscribe(function(t){for(var n=t.join_domain,i=function(t){var i=n[t];e.knowledgeService.getUserPermission(i.domain.id).subscribe(function(t){Object(d.a)(t,["Owner","Admin"]).length>0&&e.myDomainList.push({domain:i.domain,id:i.domain.id,title:i.domain.title,short_title:i.domain.short_title,title_en:i.domain.title_en,logo:""})},function(){})},o=0;o<n.length;o++)i(o)},function(){})},e.prototype.moveChangeDomain=function(e){this.currentDomain=e.id,this.getCategories(),this.currentDomainInfo=e},e.prototype.matchDomainList=function(){var e=this.domainSearchValue.toLowerCase();this.matchDomainArr=this.myDomainList.filter(function(t){return t.title&&t.title.toLowerCase().indexOf(e)>-1||t.title_en&&t.title_en.toLowerCase().indexOf(e)>-1||t.short_title&&t.short_title.toLowerCase().indexOf(e)>-1})},e.prototype.getLinkDomains=function(){var e=this;this.knowledgeService.getLinkDomains(this.currentDomain,{type:1,dir:this.importDocument.domainType||"down"}).subscribe(function(t){if(t){var n=t[e.currentDomain],i={domain:n.self,id:n.self.id,title:n.self.title,short_title:n.self.short_title||n.self.title,title_en:n.self.title_en,logo:""};e.currentDomainInfo=i;var o=[i];n.down.forEach(function(e){o.push({domain:e,id:e.id,title:e.title,short_title:e.short_title||e.title,title_en:e.title_en,logo:""})}),e.myDomainList=o}},function(){})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](m),o["\u0275\u0275directiveInject"](g.c),o["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["select-category-directory"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](y,1),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.nzTreeComponent=n.first)},inputs:{disabledNode:"disabledNode",currentCategory:"currentCategory",selectArr:"selectArr",modelShowVariable:"modelShowVariable",wikiEditFunction:"wikiEditFunction",importDocument:"importDocument",currentDomain:"currentDomain",showCategoryListCtrl:"showCategoryListCtrl",tipInfo:"tipInfo"},outputs:{modelShowVariableChange:"modelShowVariableChange",modelShowCloseChange:"modelShowCloseChange"},features:[o["\u0275\u0275ProvidersFeature"]([m,s.a])],decls:25,vars:15,consts:[[1,"select-category-directory"],[1,"select-directory-header"],[4,"ngIf"],["class","pointer-cursor",3,"click",4,"ngIf"],["nz-dropdown","","nzTrigger","click","class","pointer-cursor dropdown-trigger space","nzPlacement","bottomLeft",3,"nzDropdownMenu",4,"ngIf"],[1,"icon-color","icon-font-size14","position-right-close","iconfont","icon-close","pointer-cursor",3,"click"],[1,"content-container"],[1,"input-container"],[1,"icon-color","icon-font-size14","pointer-cursor","position-absolute-styl","fa","fa-search"],["nz-input","",1,"search-input",3,"ngModel","placeholder","ngModelChange","compositionend","compositionstart"],["class","tree-wrapper show-category-list",4,"ngIf"],["class","tree-wrapper category-directory-list",4,"ngIf"],["class","bottom-button",4,"ngIf"],["nzTreeTemplate1",""],["menuspace","nzDropdownMenu"],[1,"drop-menu"],[1,"search-input-wrapper"],[1,"input-search-icon","icon-color","fa","fa-search","pointer-cursor"],[1,"search-input","overfolw-eclipis",3,"ngModel","placeholder","ngModelChange","compositionend","compositionstart"],["nz-menu","","class","space-drop-menu",4,"ngIf"],[1,"pointer-cursor",3,"click"],[1,"iconfont","icon-icon-crown","rotate-icon-back",3,"hidden"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"pointer-cursor","dropdown-trigger","space",3,"nzDropdownMenu"],[1,"fa","fa-chevron-down"],[1,"tree-wrapper","show-category-list"],[1,"common-location"],[4,"ngFor","ngForOf"],[1,"knowledge-category-item",3,"click"],[1,"category-item-img-wrapper"],[3,"src"],[1,"category-item-desc"],[1,"category-item-title"],[1,"category-item-description"],[1,"iconfont","icon-icon-crown","rotate-icon"],[1,"tree-wrapper","category-directory-list"],["nzShowIcon","","nzBlockNode","",3,"nzHideUnMatched","nzData","nzTreeTemplate","nzClick","nzExpandChange"],["nzTreeComponent",""],[1,"directory-wrapper"],[1,"directory-wrapper-left"],[1,"position-left-span-i"],[1,"margin-left-27"],["nzShowIcon","","nzBlockNode","",3,"nzHideUnMatched","nzData","nzSearchValue","nzTreeTemplate","nzExpandChange","nzClick"],["nzTreeComponent1",""],[1,"bottom-button"],[1,"bottom-button-oprate-desc"],[1,"bottom-button-directory-title","text-eclipis"],[1,"confirm-button","pointer-cursor",3,"click"],[3,"textContent"],[1,"custom-node"],[1,"position-absolute-select",3,"ngStyle"],["class","pointer-cursor",3,"class","click",4,"ngIf"],["class","i-disabled-hover",3,"class",4,"ngIf"],["class","hidden-text-operate",3,"ngStyle",4,"ngIf"],["class","hidden-text-operate pointer-cursor",3,"ngStyle","click",4,"ngIf"],[1,"i-disabled-hover"],[1,"hidden-text-operate",3,"ngStyle"],[1,"category-directory-wrapper"],[1,"hidden-text-styl","category-directory-left"],[1,"real-icon-size","icon-color","icon-font-size14","iconfont","icon-article"],[1,"margin-left-span-10","ant-tree-title"],[1,"hidden-text-operate","pointer-cursor",3,"ngStyle","click"],["nz-menu","",1,"space-drop-menu"],["nz-menu-item","","class","menu-item",3,"click",4,"ngFor","ngForOf"],["class","no-data-wrapper",4,"ngIf"],["nz-menu-item","",1,"menu-item",3,"click"],[1,"menu-name"],[1,"iconfont","icon-multi-layers"],[1,"no-data-wrapper"],[1,"box-block",3,"textContent"],["src","/knowledge-ui/assets/imgs/no_data.jpg"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275template"](2,w,3,3,"span",2),o["\u0275\u0275template"](3,O,4,4,"span",3),o["\u0275\u0275template"](4,_,4,4,"span",4),o["\u0275\u0275elementStart"](5,"i",5),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",6),o["\u0275\u0275elementStart"](7,"div",7),o["\u0275\u0275element"](8,"i",8),o["\u0275\u0275elementStart"](9,"input",9),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchValue=e})("compositionend",function(){return t.inputFlag=!0})("compositionstart",function(){return t.inputFlag=!1})("ngModelChange",function(e){return t.userQuestionUpdate.next(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,S,5,4,"div",10),o["\u0275\u0275template"](11,E,7,7,"div",11),o["\u0275\u0275template"](12,I,16,11,"div",11),o["\u0275\u0275template"](13,k,9,7,"div",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](14,N,6,7,"ng-template",null,13,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementStart"](16,"nz-dropdown-menu",null,14),o["\u0275\u0275elementStart"](18,"div",15),o["\u0275\u0275elementStart"](19,"div",16),o["\u0275\u0275element"](20,"i",17),o["\u0275\u0275elementStart"](21,"input",18),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.domainSearchValue=e})("compositionend",function(){return t.inputFlag=!0})("compositionstart",function(){return t.inputFlag=!1})("ngModelChange",function(){return t.matchDomainList()}),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](23,U,3,2,"div",19),o["\u0275\u0275template"](24,W,3,2,"div",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.showCategoryListCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.showCategoryListCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showCategoryListCtrl&&t.canMoveDomainAccess&&t.myDomainList.length),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.searchValue)("placeholder",t.searchPlaceHolder),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showCategoryListCtrl&&""==t.searchValue.trim()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showCategoryListCtrl&&""!=t.searchValue.trim()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.showCategoryListCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.showCategoryListCtrl||t.showCategoryListCtrl&&""!=t.searchValue.trim()),o["\u0275\u0275advance"](8),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](22,13,"SEARCH_MY_DOMAIN")),o["\u0275\u0275property"]("ngModel",t.domainSearchValue),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",""==t.domainSearchValue.trim()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",""!=t.domainSearchValue.trim()))},directives:[h.n,f.b,v.d,v.k,v.l,C.d,C.b,h.m,b.a,h.o,x.c,x.e],pipes:[g.b,s.a],styles:['.select-category-directory[_ngcontent-%COMP%]{width:100%;height:100%}.select-category-directory[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]{height:50px;width:100%;line-height:50px;text-align:left;padding:0 10px;position:relative;color:#676a6c;font-weight:700}.select-category-directory[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .position-right-close[_ngcontent-%COMP%]{position:absolute;right:10px;font-size:23px}.select-category-directory[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .rotate-icon-back[_ngcontent-%COMP%]{transform:rotate(90deg);display:inline-block;font-size:13px;margin-right:8px}.select-category-directory[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .space[_ngcontent-%COMP%]{margin-left:20px}.select-category-directory[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .space[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.select-category-directory[_ngcontent-%COMP%]   .directory-wrapper[_ngcontent-%COMP%]{margin-top:10px;height:50px;position:relative;display:flex;align-items:center}.select-category-directory[_ngcontent-%COMP%]   .category-directory-list[_ngcontent-%COMP%]{height:calc(100% - 50px)}.select-category-directory[_ngcontent-%COMP%]   .margin-right30[_ngcontent-%COMP%]{position:absolute;left:31px}.select-category-directory[_ngcontent-%COMP%]   .position-absolute-select[_ngcontent-%COMP%]{position:absolute;left:-52px}.select-category-directory[_ngcontent-%COMP%]   .select-active-styl[_ngcontent-%COMP%]{position:relative;left:-2px;color:#23c6c8}.select-category-directory[_ngcontent-%COMP%]   .custom-node[_ngcontent-%COMP%]{line-height:24px;margin-left:4px;display:inline-block;position:relative;overflow:visible}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]{overflow:hidden;height:24px;padding:0;line-height:24px;display:inline-block;position:relative}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]   .category-directory-right[_ngcontent-%COMP%]{width:58px;right:-60px}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]   .category-document-right[_ngcontent-%COMP%]{width:28px;right:-30px}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]   .hidden-right-operate[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;height:24px;line-height:24px;display:inline-block}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]   .hidden-right-operate[_ngcontent-%COMP%]   .operate-more-span[_ngcontent-%COMP%]{position:absolute;right:35px;top:0;bottom:0;cursor:pointer}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]   .hidden-right-operate[_ngcontent-%COMP%]   .operate-add-span[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:5px;top:0;bottom:0}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-styl[_ngcontent-%COMP%]{width:100%;display:inline-block;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.select-category-directory[_ngcontent-%COMP%]   .real-icon-size[_ngcontent-%COMP%]{width:14px!important;height:14px!important}.select-category-directory[_ngcontent-%COMP%]   .tree-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:hidden;overflow-y:scroll;padding-left:2px;-ms-overflow-style:none}.select-category-directory[_ngcontent-%COMP%]   .tree-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important}.select-category-directory[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]{margin-top:10px;height:30px;line-height:30px;position:relative;padding-top:10px}.select-category-directory[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .confirm-button[_ngcontent-%COMP%]{position:absolute;background:#23c6c8;width:65px;border-radius:4px;right:10px;text-align:center;color:#fff;outline:none;border:none}.select-category-directory[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]:before{position:absolute;height:1px;content:"";width:100%;top:-10px;background:#e5e5e5}.select-category-directory[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .bottom-button-oprate-desc[_ngcontent-%COMP%]{color:#999;margin-right:5px}.select-category-directory[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .bottom-button-directory-title[_ngcontent-%COMP%]{width:calc(100% - 145px);position:relative;top:1px}.select-category-directory[_ngcontent-%COMP%]   .search-match-styl[_ngcontent-%COMP%]{color:#23c6c8}.select-category-directory[_ngcontent-%COMP%]   .i-disabled-hover[_ngcontent-%COMP%]{cursor:no-drop}.select-category-directory[_ngcontent-%COMP%]   .diabled-span[_ngcontent-%COMP%]{color:#999;cursor:no-drop}.select-category-directory[_ngcontent-%COMP%]   .pointer-cursor[_ngcontent-%COMP%]{cursor:pointer}.select-category-directory[_ngcontent-%COMP%]   .icon-color[_ngcontent-%COMP%]{color:#999}.select-category-directory[_ngcontent-%COMP%]   .icon-font-size14[_ngcontent-%COMP%]{font-size:14px}.select-category-directory[_ngcontent-%COMP%]   .icon-font-size15[_ngcontent-%COMP%]{font-size:15px}.select-category-directory[_ngcontent-%COMP%]   .active-icon-styl-color[_ngcontent-%COMP%]{color:#23c6c8}.select-category-directory[_ngcontent-%COMP%]   .icon-font-size12[_ngcontent-%COMP%]{font-size:12px}.select-category-directory[_ngcontent-%COMP%]   .icon-font-size13[_ngcontent-%COMP%]{font-size:13px}.select-category-directory[_ngcontent-%COMP%]   .margin-left-span-10[_ngcontent-%COMP%]{margin-left:10px}.select-category-directory[_ngcontent-%COMP%]   .search-active-styl[_ngcontent-%COMP%]{color:#23c6c8}.select-category-directory[_ngcontent-%COMP%]     .ant-tree{overflow:hidden;margin:0 -5px}.select-category-directory[_ngcontent-%COMP%]     .ant-tree li{padding:6px 0 0;position:relative}.select-category-directory[_ngcontent-%COMP%]     .ant-tree ul{padding-left:16px;overflow:visible}.select-category-directory[_ngcontent-%COMP%]     .ant-tree-treenode{margin-left:23px}.select-category-directory[_ngcontent-%COMP%]     .ant-tree-node-content-wrapper{overflow:visible}.select-category-directory[_ngcontent-%COMP%]     .ant-tree-child-tree{overflow:visible}.select-category-directory[_ngcontent-%COMP%]     .ant-tree .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff}.select-category-directory[_ngcontent-%COMP%]     .ant-tree li span.ant-tree-switcher{margin-left:25px;color:#999}.select-category-directory[_ngcontent-%COMP%]   .text-eclipis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.select-category-directory[_ngcontent-%COMP%]   .active-span-styl[_ngcontent-%COMP%]{color:#23c6c8!important}.drop-menu[_ngcontent-%COMP%]{line-height:25px;z-index:10;border:1px solid #eaeaea;background-color:#fdfdfd;padding:10px 0;width:240px;border-radius:5px}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]{max-height:150px;overflow-y:auto;margin-top:3px;box-shadow:none}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{margin:3px 0;cursor:pointer;font-weight:400;padding:5px 0 5px 20px}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-name[_ngcontent-%COMP%]{display:inline-block;width:100%;height:24px;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#23c6c8;font-size:14px}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:8px}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background-color:#d6f1f1}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:#23c6c8}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{position:relative;font-size:14px;width:90%;margin:0 auto}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .input-search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#b9b7b7;top:6px;font-size:14px}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{outline:none;height:26px;font-size:14px;padding-left:33px;padding-right:10px;border-radius:13px;line-height:26px;border:1px solid #d7d7d7;display:inline-block;width:100%;font-weight:400}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus, .drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:hover{border:1px solid #23c6c8}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::-moz-placeholder{color:#d2d2d2;font-weight:400}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#d2d2d2;font-weight:400}.drop-menu[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{width:100%;padding:10px;text-align:center}.drop-menu[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:130px;margin:0 auto}.drop-menu[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.common-location-item[_ngcontent-%COMP%]{height:55px;display:flex;justify-content:space-between;padding:10px}.common-location-item[_ngcontent-%COMP%]:hover{background:#f2f2f2}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]{flex:1;display:flex}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .small-directory-icon[_ngcontent-%COMP%]{font-size:14px}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .common-location-info-desc[_ngcontent-%COMP%]{margin-left:10px}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .common-location-info-desc[_ngcontent-%COMP%]   .location-info-desc-dirctory[_ngcontent-%COMP%]{color:#676a6c;font-size:14px}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .common-location-info-desc[_ngcontent-%COMP%]   .location-info-desc-category[_ngcontent-%COMP%]{marign-top:5px}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .common-location-info-desc[_ngcontent-%COMP%]   .location-info-desc-category[_ngcontent-%COMP%]   .icon-font-size-12[_ngcontent-%COMP%]{font-size:12px;color:#bdbdbd}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .common-location-info-desc[_ngcontent-%COMP%]   .location-info-desc-category[_ngcontent-%COMP%]   .recent-view-item-category[_ngcontent-%COMP%]{color:#bdbdbd;font-weight:400;margin-left:2px;font-size:12px}.common-location-item[_ngcontent-%COMP%]   .common-location-btn[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}.common-location-item[_ngcontent-%COMP%]   .common-location-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:3px 8px;border:1px solid #23c6c8;border-radius:4px;background:#fff;color:#23c6c8;outline:none;font-size:14px}.content-container[_ngcontent-%COMP%]{height:calc(100% - 50px);padding:0 10px 10px}.content-container[_ngcontent-%COMP%]   .common-location[_ngcontent-%COMP%]{height:38px;line-height:38px;color:#999;font-size:12px}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]{padding:10px 10px 2px;display:flex;height:50px;position:relative}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]:hover{background:#f2f2f2}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:3px}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]   .category-item-desc[_ngcontent-%COMP%]{margin-left:10px}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]   .category-item-desc[_ngcontent-%COMP%]   .category-item-title[_ngcontent-%COMP%]{height:14px;line-height:14px;font-size:14px;color:#676a6c}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]   .category-item-desc[_ngcontent-%COMP%]   .category-item-description[_ngcontent-%COMP%]{margin-top:2px;font-size:12px;color:#bdbdbd}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]   .rotate-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:17px;transform:rotate(270deg);font-size:13px;color:#333}.content-container[_ngcontent-%COMP%]   .show-category-list[_ngcontent-%COMP%]{height:calc(100% - 30px)}.input-container[_ngcontent-%COMP%]{height:28px;line-height:28px;position:relative}.input-container[_ngcontent-%COMP%]   .position-absolute-styl[_ngcontent-%COMP%]{position:absolute;left:9px;top:7px}.input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{height:28px;line-height:28px;outline:none;border:1px solid #d5d5d5;border-radius:5px;padding-left:28px;width:100%}.input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#bdbdbd;font-size:13px}.input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus, .input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:hover{border-color:#23c6c8}']}),e}()},"7gQO":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("3Pt+"),o=n("ofXK"),r=n("sYmb"),a=n("mOC4"),c=n("BbD4"),l=n("fXoL"),s=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[o.c,i.g,r.a,a.a,c.a]]}),e}()},"7lu6":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("ofXK"),o=n("sYmb"),r=n("3Pt+"),a=n("0qTp"),c=n("Nqz0"),l=n("fXoL"),s=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[i.c,o.a,r.g,a.a,c.c]]}),e}()},"7xxS":function(e,t,n){"use strict";n.d(t,"a",function(){return R});var i=n("fXoL"),o=n("sYmb"),r=n("ofXK"),a=n("C2AL"),c=n("PTRe"),l=n("3Pt+"),s=n("FwiY"),d=n("OzZK"),p=n("RwU8"),u=n("qAZ0"),m=n("oMLp"),g=["option"];function h(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"i",12),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](3).searchValue=null}),i["\u0275\u0275elementEnd"]()}}function f(e,t){if(1&e&&i["\u0275\u0275template"](0,h,1,0,"i",11),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngIf",n.searchValue)}}function v(e,t){1&e&&i["\u0275\u0275element"](0,"i",19)}function C(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"i",20),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).deleteLabel(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](2,"i",21),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).updateLabel(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}}var b=function(e){return{backgroundColor:e}},x=function(e){return{color:e}};function y(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"li",13),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).handleOptionClick(e)}),i["\u0275\u0275template"](1,v,1,0,"i",14),i["\u0275\u0275elementStart"](2,"div",15),i["\u0275\u0275elementStart"](3,"div",16),i["\u0275\u0275element"](4,"i",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"span",18),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,C,3,0,"ng-container",1),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.isSelected),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](5,b,o[r.colorKey])),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](7,x,o[r.colorKey])),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](o.title),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!o.readOnly&&0!==o.domainId)}}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"li",22),i["\u0275\u0275text"](1,"There is nothing"),i["\u0275\u0275elementEnd"]())}var O=function(e){return{searchValue:e,key:"title"}};function _(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",3),i["\u0275\u0275elementStart"](2,"nz-input-group",4),i["\u0275\u0275elementStart"](3,"input",5),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().searchValue=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,f,1,1,"ng-template",null,6,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](6,"i",7),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addNewLabel()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"ul",8),i["\u0275\u0275template"](8,y,8,9,"li",9),i["\u0275\u0275pipe"](9,"filterByKey"),i["\u0275\u0275template"](10,w,2,0,"li",10),i["\u0275\u0275pipe"](11,"filterByKey"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275reference"](5),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("nzSuffix",o),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",r.searchValue)("placeholder",r.searchPlaceholder),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind2"](9,5,r.options,i["\u0275\u0275pureFunction1"](11,O,r.searchValue))),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(r.loading||r.options.length&&i["\u0275\u0275pipeBind2"](11,8,r.options,i["\u0275\u0275pureFunction1"](13,O,r.searchValue)).length))}}function M(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",31),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"ADD_LABEL")))}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",31),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"EDIT_LABEL")))}function P(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"li",32),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).selectedColor=e}),i["\u0275\u0275element"](1,"i",33),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275classProp"]("selected",r.selectedColor==o),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](3,b,o))}}function E(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",34),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).handleAddLabelCancel()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"COMMON_BUTTON_CANCLE")))}function I(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",35),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).handleAddLabelConfirm()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"ADD")))}function k(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",34),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).handleUpdateLabelCancel()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"COMMON_BUTTON_CANCLE")))}function T(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",35),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).handleUpdateLabelConfirm()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"COMMON_BUTTON_CONFIRM")))}function A(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,M,3,3,"p",23),i["\u0275\u0275template"](2,S,3,3,"p",23),i["\u0275\u0275elementStart"](3,"div",24),i["\u0275\u0275elementStart"](4,"input",25),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().inputValue=e}),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",26),i["\u0275\u0275elementStart"](7,"ul"),i["\u0275\u0275template"](8,P,2,5,"li",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",28),i["\u0275\u0275template"](10,E,3,3,"button",29),i["\u0275\u0275template"](11,I,3,3,"button",30),i["\u0275\u0275template"](12,k,3,3,"button",29),i["\u0275\u0275template"](13,T,3,3,"button",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","add"==o.mode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update"==o.mode),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",o.inputValue)("placeholder",i["\u0275\u0275pipeBind1"](5,9,"FILL_IN_LABEL_NAME")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",o.availableColors),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","add"==o.mode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","add"==o.mode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update"==o.mode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update"==o.mode)}}function D(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"p",36),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"span",15),i["\u0275\u0275elementStart"](6,"span",16),i["\u0275\u0275element"](7,"i",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"span",18),i["\u0275\u0275text"](9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"span",37),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",28),i["\u0275\u0275elementStart"](14,"button",34),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().handleDeleteLabelCancel()}),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"button",35),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().handleDeleteLabelConfirm()}),i["\u0275\u0275text"](18),i["\u0275\u0275pipe"](19,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,7,"COMFIRM_DELETE")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](15,b,o.currentEditLabel.color)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](17,x,o.currentEditLabel.color)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](o.currentEditLabel.title),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,9,"QUESTION_MARK")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](16,11,"COMMON_BUTTON_CANCLE")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](19,13,"COMMON_BUTTON_CONFIRM"))}}function z(e,t){1&e&&i["\u0275\u0275element"](0,"i",41)}function L(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",38),i["\u0275\u0275element"](1,"nz-spin",39),i["\u0275\u0275template"](2,z,1,0,"ng-template",null,40,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzIndicator",n)}}var V=function(){return["add","update"]},N=function(){return["delete"]},R=function(){function e(e){this.translate=e,this.searchPlaceholder=this.translate.instant("SEARCH_LABEL"),this.options=[],this.colorKey="color",this.modeChange=new i.EventEmitter,this.onSelect=new i.EventEmitter,this.onConfirm=new i.EventEmitter,this.searchValue="",this.inputValue="",this.availableColors=["#EC7E69","#FFB720","#76C16D","#4DD5D5","#69A5EC","#A595E5"],this.selectedColor=this.availableColors[0],this.currentEditLabel={}}return e.prototype.ngOnInit=function(){},e.prototype.handleOptionClick=function(e){e.isSelected=!e.isSelected,this.onSelect.emit(e)},e.prototype.handleConfirmClick=function(){this.resetSearchValue();var e=this.options.filter(function(e){return e.isSelected});this.onConfirm.emit(e)},e.prototype.resetSearchValue=function(){this.searchValue=""},e.prototype.modeSetter=function(e){this.mode=e,this.modeChange.emit(e)},e.prototype.addNewLabel=function(){this.modeSetter("add"),this.inputValue=this.searchValue,this.searchValue="",this.selectedColor=this.availableColors[0]},e.prototype.handleAddLabelConfirm=function(){this.inputValue&&this.onConfirm.emit({operate:"add",data:{title:this.inputValue,color:this.selectedColor}})},e.prototype.handleAddLabelCancel=function(){this.modeSetter("default")},e.prototype.updateLabel=function(e){this.modeSetter("update"),this.currentEditLabel=e,this.inputValue=e.title,this.selectedColor=e[this.colorKey]},e.prototype.deleteLabel=function(e){this.modeSetter("delete"),this.currentEditLabel=e},e.prototype.handleUpdateLabelConfirm=function(){this.inputValue==this.currentEditLabel.title&&this.selectedColor==this.currentEditLabel[this.colorKey]||this.onConfirm.emit({operate:"update",data:{id:this.currentEditLabel.id,title:this.inputValue,color:this.selectedColor}})},e.prototype.handleUpdateLabelCancel=function(){this.modeSetter("default")},e.prototype.handleDeleteLabelConfirm=function(){this.onConfirm.emit({operate:"delete",data:this.currentEditLabel})},e.prototype.handleDeleteLabelCancel=function(){this.modeSetter("default")},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.c))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["workitem-label-select-panel"]],contentQueries:function(e,t,n){var o;1&e&&i["\u0275\u0275contentQuery"](n,g,1),2&e&&i["\u0275\u0275queryRefresh"](o=i["\u0275\u0275loadQuery"]())&&(t.optionTemplateRef=o.first)},inputs:{loading:"loading",searchPlaceholder:"searchPlaceholder",options:"options",mode:"mode",colorKey:"colorKey"},outputs:{modeChange:"modeChange",onSelect:"onSelect",onConfirm:"onConfirm"},decls:5,vars:6,consts:[[1,"label-select-wrapper"],[4,"ngIf"],["class","loading-wrapper",4,"ngIf"],[1,"label-select-header"],[3,"nzSuffix"],["type","text","nz-input","",3,"ngModel","placeholder","ngModelChange"],["inputClearTpl",""],[1,"label-add-icon","iconfont","icon-close",3,"click"],[1,"label-select-body"],[3,"click",4,"ngFor","ngForOf"],["style","text-align: center;",4,"ngIf"],["nz-icon","","class","ant-input-clear-icon","nzTheme","fill","nzType","close-circle",3,"click",4,"ngIf"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],[3,"click"],["class","txt-primary","style","position: absolute;left: 15px;top: 8px;","nz-icon","","nzType","check","nzTheme","outline",4,"ngIf"],[1,"label-item"],[1,"label-bg",3,"ngStyle"],[1,"label-item-arrow"],[3,"ngStyle"],["nz-icon","","nzType","check","nzTheme","outline",1,"txt-primary",2,"position","absolute","left","15px","top","8px"],[1,"iconfont","icon-trash",3,"click"],[1,"iconfont","icon-edit",3,"click"],[2,"text-align","center"],["class","p-l-10 m-b-10",4,"ngIf"],[1,"label-add-input"],["nz-input","","type","text",3,"ngModel","placeholder","ngModelChange"],[1,"label-add-color"],[3,"selected","ngStyle","click",4,"ngFor","ngForOf"],[1,"label-add-footer"],["nz-button","","nzSize","small","nzType","danger","nzGhost","",3,"click",4,"ngIf"],["nz-button","","nzSize","small","nzType","primary","nzGhost","",3,"click",4,"ngIf"],[1,"p-l-10","m-b-10"],[3,"ngStyle","click"],[1,"iconfont","icon-check"],["nz-button","","nzSize","small","nzType","danger","nzGhost","",3,"click"],["nz-button","","nzSize","small","nzType","primary","nzGhost","",3,"click"],[1,"p-l-10","p-r-10","m-t-15","m-b-20","txt-666"],[1,"m-l-10"],[1,"loading-wrapper"],["nzSimple","",3,"nzIndicator"],["indicatorTemplate",""],["nz-icon","","nzType","loading",2,"font-size","24px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,_,12,15,"ng-container",1),i["\u0275\u0275template"](2,A,14,11,"ng-container",1),i["\u0275\u0275template"](3,D,20,19,"ng-container",1),i["\u0275\u0275template"](4,L,4,1,"div",2),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","default"==t.mode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pureFunction0"](4,V).includes(t.mode)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pureFunction0"](5,N).includes(t.mode)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.loading))},directives:[r.n,a.a,c.c,c.d,c.b,l.d,l.k,l.l,r.m,s.a,r.o,d.a,p.a,u.a],pipes:[m.a,o.b],styles:[".label-select-wrapper[_ngcontent-%COMP%]{position:relative;padding:10px 0;background-color:#fff;box-shadow:0 0 4px rgba(0,0,0,.2);border-right:4px}.label-select-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-header[_ngcontent-%COMP%]{padding:0 10px;position:relative}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-header[_ngcontent-%COMP%]   .label-add-icon[_ngcontent-%COMP%]{position:absolute;cursor:pointer;right:12px;bottom:3px;font-size:18px;transform:rotate(45deg);z-index:1}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-header[_ngcontent-%COMP%]     .ant-input-affix-wrapper{border-radius:0;outline:none;border:none;border-bottom:1px solid #d9d9d9;padding-right:30px}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%]{margin-top:10px;max-height:220px;overflow:auto}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:4px}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative;padding:5px 56px 5px 26px;cursor:pointer}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon-trash[_ngcontent-%COMP%]{font-size:18px;display:none;position:absolute;right:35px;top:3px;cursor:pointer}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon-edit[_ngcontent-%COMP%]{font-size:18px;display:none;position:absolute;right:15px;top:3px;cursor:pointer}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   .icon-edit[_ngcontent-%COMP%], .label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   .icon-trash[_ngcontent-%COMP%]{display:inline-block}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   .label-item-arrow[_ngcontent-%COMP%]{border-top:8px solid #f2f2f2!important;border-bottom:8px solid #f2f2f2!important}.label-select-wrapper[_ngcontent-%COMP%]   .loading-wrapper[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;background:hsla(0,0%,100%,.7)}.label-select-wrapper[_ngcontent-%COMP%]   .loading-wrapper[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-input[_ngcontent-%COMP%]{padding:0 10px}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-input[_ngcontent-%COMP%]     .ant-input{border:none;outline:none;background-color:#f2f2f2}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-color[_ngcontent-%COMP%]{padding:0 10px;margin-top:20px;margin-bottom:20px}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-color[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-color[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:24px;width:24px;border-radius:50%;background-color:#f2f2f2;text-align:center;line-height:25px;color:transparent;cursor:pointer}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-color[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{color:#fff}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-color[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:first-child){margin-left:10px}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-footer[_ngcontent-%COMP%]{padding:0 10px;text-align:right}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-footer[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:5px}.label-select-wrapper[_ngcontent-%COMP%]   .label-item[_ngcontent-%COMP%]{position:relative;font-size:12px;display:inline-block;margin-left:10px;height:18px;padding-left:10px;padding-right:5px}.label-select-wrapper[_ngcontent-%COMP%]   .label-item[_ngcontent-%COMP%]   .label-bg[_ngcontent-%COMP%]{opacity:.2;position:absolute;left:0;top:0;bottom:0;right:0}.label-select-wrapper[_ngcontent-%COMP%]   .label-item[_ngcontent-%COMP%]   .label-item-arrow[_ngcontent-%COMP%]{display:inline-block;position:absolute;height:100%;top:0;left:0;border:8px solid #fff;border-right-color:transparent;border-left:none}"]}),e}()},"8J34":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("+rOU"),o=n("rDax"),r=n("oEkB"),a=n("fXoL"),c=function(){function e(e){this.overlay=e}return e.prototype.show=function(e,t){void 0===t&&(t=0);var n=new o.e({scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:!0}),a=this.overlay.create(n),c=a.attach(new i.c(r.a)).instance;c.fullScreen=!0,c.urls=e,c.index=t,c.close.subscribe(function(){return a.dispose()})},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](o.d))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()},"9CzY":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("ofXK"),o=n("nJia"),r=n("9zdF"),a=n("sYmb"),c=n("fXoL"),l=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[i.c,o.b,r.a,a.a]]}),e}()},"9l1e":function(e,t,n){var i,o=n("9Z5Q");tinymce.addI18n("zh_CN",(o(i={Redo:"\u6062\u590d",Undo:"\u64a4\u9500",Cut:"\u526a\u5207",Copy:"\u590d\u5236",Paste:"\u7c98\u8d34","Select all":"\u5168\u9009","New document":"\u65b0\u5efa\u6587\u6863",Ok:"\u786e\u5b9a",Cancel:"\u53d6\u6d88","Visual aids":"\u7f51\u683c\u7ebf",Bold:"\u7c97\u4f53",Italic:"\u659c\u4f53",Underline:"\u4e0b\u5212\u7ebf",Strikethrough:"\u5220\u9664\u7ebf",Superscript:"\u4e0a\u6807",Subscript:"\u4e0b\u6807","Clear formatting":"\u6e05\u9664\u683c\u5f0f","Align left":"\u5de6\u5bf9\u9f50","Align center":"\u5c45\u4e2d","Align right":"\u53f3\u5bf9\u9f50",Justify:"\u4e24\u7aef\u5bf9\u9f50","Bullet list":"\u7b26\u53f7\u5217\u8868","Numbered list":"\u6570\u5b57\u5217\u8868","Decrease indent":"\u51cf\u5c11\u7f29\u8fdb","Increase indent":"\u589e\u52a0\u7f29\u8fdb",Close:"\u5173\u95ed",Formats:"\u683c\u5f0f","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8bbf\u95ee\u526a\u8d34\u677f\uff0c\u8bf7\u4f7f\u7528\u5feb\u6377\u952eCtrl+X/C/V\u590d\u5236\u7c98\u8d34",Headers:"\u6807\u9898","Header 1":"\u6807\u98981","Header 2":"\u6807\u98982","Header 3":"\u6807\u98983","Header 4":"\u6807\u98984","Header 5":"\u6807\u98985","Header 6":"\u6807\u98986",Headings:"\u6807\u9898","Heading 1":"\u6807\u98981","Heading 2":"\u6807\u98982","Heading 3":"\u6807\u98983","Heading 4":"\u6807\u98984","Heading 5":"\u6807\u98985","Heading 6":"\u6807\u98986",Preformatted:"\u9884\u683c\u5f0f\u5316",Div:"Div\u533a\u5757",Pre:"\u9884\u683c\u5f0f\u6587\u672c",Code:"\u4ee3\u7801",Paragraph:"\u6bb5\u843d",Blockquote:"\u5f15\u7528",Inline:"\u6587\u672c",Blocks:"\u533a\u5757","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"\u5f53\u524d\u4e3a\u7eaf\u6587\u672c\u7c98\u8d34\u6a21\u5f0f\uff0c\u518d\u6b21\u70b9\u51fb\u53ef\u4ee5\u56de\u5230\u666e\u901a\u7c98\u8d34\u6a21\u5f0f\u3002",Fonts:"\u5b57\u4f53","Font Sizes":"\u5b57\u53f7",Class:"Class","Browse for an image":"\u6d4f\u89c8\u56fe\u50cf",OR:"\u6216","Drop an image here":"\u62d6\u653e\u4e00\u5f20\u56fe\u7247\u6587\u4ef6\u81f3\u6b64",Upload:"\u4e0a\u4f20",Block:"\u5757",Align:"\u5bf9\u9f50",Default:"\u9ed8\u8ba4",Circle:"\u7a7a\u5fc3\u5706",Disc:"\u5b9e\u5fc3\u5706",Square:"\u65b9\u5757","Lower Alpha":"\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd","Lower Greek":"\u5c0f\u5199\u5e0c\u814a\u5b57\u6bcd","Lower Roman":"\u5c0f\u5199\u7f57\u9a6c\u5b57\u6bcd","Upper Alpha":"\u5927\u5199\u82f1\u6587\u5b57\u6bcd","Upper Roman":"\u5927\u5199\u7f57\u9a6c\u5b57\u6bcd","Anchor...":"\u951a\u70b9...",Name:"\u540d\u79f0",Id:"id","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"id\u5e94\u8be5\u4ee5\u5b57\u6bcd\u5f00\u5934\uff0c\u540e\u8ddf\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u6a2a\u7ebf\u3001\u70b9\u3001\u5192\u53f7\u6216\u4e0b\u5212\u7ebf\u3002","You have unsaved changes are you sure you want to navigate away?":"\u4f60\u5bf9\u6587\u6863\u7684\u4fee\u6539\u5c1a\u672a\u4fdd\u5b58\uff0c\u786e\u5b9a\u79bb\u5f00\u5417\uff1f","Restore last draft":"\u6062\u590d\u4e0a\u6b21\u7684\u8349\u7a3f","Special characters...":"\u7279\u6b8a\u5b57\u7b26...","Source code":"HTML\u6e90\u7801","Insert/Edit code sample":"\u63d2\u5165/\u7f16\u8f91\u4ee3\u7801\u793a\u4f8b",Language:"\u8bed\u8a00","Code sample...":"\u4ee3\u7801\u793a\u4f8b...","Color Picker":"\u9009\u53d6\u989c\u8272",R:"R",G:"G",B:"B","Left to right":"\u4ece\u5de6\u5230\u53f3","Right to left":"\u4ece\u53f3\u5230\u5de6","Emoticons...":"\u8868\u60c5\u7b26\u53f7...","Metadata and Document Properties":"\u5143\u6570\u636e\u548c\u6587\u6863\u5c5e\u6027",Title:"\u6807\u9898",Keywords:"\u5173\u952e\u8bcd",Description:"\u63cf\u8ff0",Robots:"\u673a\u5668\u4eba",Author:"\u4f5c\u8005",Encoding:"\u7f16\u7801",Fullscreen:"\u5168\u5c4f",Action:"\u64cd\u4f5c",Shortcut:"\u5feb\u6377\u952e",Help:"\u5e2e\u52a9",Address:"\u5730\u5740","Focus to menubar":"\u79fb\u52a8\u7126\u70b9\u5230\u83dc\u5355\u680f","Focus to toolbar":"\u79fb\u52a8\u7126\u70b9\u5230\u5de5\u5177\u680f","Focus to element path":"\u79fb\u52a8\u7126\u70b9\u5230\u5143\u7d20\u8def\u5f84","Focus to contextual toolbar":"\u79fb\u52a8\u7126\u70b9\u5230\u4e0a\u4e0b\u6587\u83dc\u5355","Insert link (if link plugin activated)":"\u63d2\u5165\u94fe\u63a5 (\u5982\u679c\u94fe\u63a5\u63d2\u4ef6\u5df2\u6fc0\u6d3b)","Save (if save plugin activated)":"\u4fdd\u5b58(\u5982\u679c\u4fdd\u5b58\u63d2\u4ef6\u5df2\u6fc0\u6d3b)","Find (if searchreplace plugin activated)":"\u67e5\u627e(\u5982\u679c\u67e5\u627e\u66ff\u6362\u63d2\u4ef6\u5df2\u6fc0\u6d3b)","Plugins installed ({0}):":"\u5df2\u5b89\u88c5\u63d2\u4ef6 ({0})\uff1a","Premium plugins:":"\u4f18\u79c0\u63d2\u4ef6\uff1a","Learn more...":"\u4e86\u89e3\u66f4\u591a...","You are using {0}":"\u4f60\u6b63\u5728\u4f7f\u7528 {0}",Plugins:"\u63d2\u4ef6","Handy Shortcuts":"\u5feb\u6377\u952e","Horizontal line":"\u6c34\u5e73\u5206\u5272\u7ebf","Insert/edit image":"\u63d2\u5165/\u7f16\u8f91\u56fe\u7247","Image description":"\u56fe\u7247\u63cf\u8ff0",Source:"\u5730\u5740",Dimensions:"\u5927\u5c0f","Constrain proportions":"\u4fdd\u6301\u5bbd\u9ad8\u6bd4",General:"\u5e38\u89c4",Advanced:"\u9ad8\u7ea7",Style:"\u6837\u5f0f","Vertical space":"\u5782\u76f4\u8fb9\u8ddd","Horizontal space":"\u6c34\u5e73\u8fb9\u8ddd",Border:"\u8fb9\u6846","Insert image":"\u63d2\u5165\u56fe\u7247","Image...":"\u56fe\u7247...","Image list":"\u56fe\u7247\u5217\u8868","Rotate counterclockwise":"\u9006\u65f6\u9488\u65cb\u8f6c","Rotate clockwise":"\u987a\u65f6\u9488\u65cb\u8f6c","Flip vertically":"\u5782\u76f4\u7ffb\u8f6c","Flip horizontally":"\u6c34\u5e73\u7ffb\u8f6c","Edit image":"\u7f16\u8f91\u56fe\u7247","Image options":"\u56fe\u7247\u9009\u9879","Zoom in":"\u653e\u5927","Zoom out":"\u7f29\u5c0f",Crop:"\u88c1\u526a",Resize:"\u8c03\u6574\u5927\u5c0f",Orientation:"\u65b9\u5411",Brightness:"\u4eae\u5ea6",Sharpen:"\u9510\u5316",Contrast:"\u5bf9\u6bd4\u5ea6","Color levels":"\u8272\u9636",Gamma:"\u4f3d\u9a6c\u503c",Invert:"\u53cd\u8f6c",Apply:"\u5e94\u7528",Back:"\u540e\u9000","Insert date/time":"\u63d2\u5165\u65e5\u671f/\u65f6\u95f4","Date/time":"\u65e5\u671f/\u65f6\u95f4","Insert/Edit Link":"\u63d2\u5165/\u7f16\u8f91\u94fe\u63a5","Insert/edit link":"\u63d2\u5165/\u7f16\u8f91\u94fe\u63a5","Text to display":"\u663e\u793a\u6587\u5b57",Url:"\u5730\u5740","Open link in...":"\u94fe\u63a5\u6253\u5f00\u65b9\u5f0f...","Current window":"\u5f53\u524d\u7a97\u53e3\u6253\u5f00",None:"\u5728\u5f53\u524d\u7a97\u53e3/\u6846\u67b6\u6253\u5f00","New window":"\u5728\u65b0\u7a97\u53e3\u6253\u5f00","Remove link":"\u5220\u9664\u94fe\u63a5",Anchors:"\u951a\u70b9","Link...":"\u94fe\u63a5...","Paste or type a link":"\u7c98\u8d34\u6216\u8f93\u5165\u94fe\u63a5","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"\u4f60\u6240\u586b\u5199\u7684URL\u5730\u5740\u4e3a\u90ae\u4ef6\u5730\u5740\uff0c\u9700\u8981\u52a0\u4e0amailto:\u524d\u7f00\u5417\uff1f","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"\u4f60\u6240\u586b\u5199\u7684URL\u5730\u5740\u5c5e\u4e8e\u5916\u90e8\u94fe\u63a5\uff0c\u9700\u8981\u52a0\u4e0ahttp://:\u524d\u7f00\u5417\uff1f","Link list":"\u94fe\u63a5\u5217\u8868","Insert video":"\u63d2\u5165\u89c6\u9891","Insert/edit video":"\u63d2\u5165/\u7f16\u8f91\u89c6\u9891","Insert/edit media":"\u63d2\u5165/\u7f16\u8f91\u5a92\u4f53","Alternative source":"\u66ff\u4ee3\u8d44\u6e90","Alternative image URL":"\u8d44\u6e90\u5907\u7528\u5730\u5740","Media poster (Image URL)":"\u5c01\u9762(\u56fe\u7247\u5730\u5740)","Paste your embed code below:":"\u5c06\u5185\u5d4c\u4ee3\u7801\u7c98\u8d34\u5728\u4e0b\u9762:",Embed:"\u5185\u5d4c","Media...":"\u591a\u5a92\u4f53...","Nonbreaking space":"\u4e0d\u95f4\u65ad\u7a7a\u683c","Page break":"\u5206\u9875\u7b26","Paste as text":"\u7c98\u8d34\u4e3a\u6587\u672c",Preview:"\u9884\u89c8","Print...":"\u6253\u5370...",Save:"\u4fdd\u5b58",Find:"\u67e5\u627e","Replace with":"\u66ff\u6362\u4e3a",Replace:"\u66ff\u6362","Replace all":"\u66ff\u6362\u5168\u90e8",Previous:"\u4e0a\u4e00\u4e2a",Next:"\u4e0b\u4e00\u4e2a","Find and replace...":"\u67e5\u627e\u5e76\u66ff\u6362...","Could not find the specified string.":"\u672a\u627e\u5230\u641c\u7d22\u5185\u5bb9\u3002","Match case":"\u533a\u5206\u5927\u5c0f\u5199","Find whole words only":"\u5168\u5355\u8bcd\u5339\u914d","Spell check":"\u62fc\u5199\u68c0\u67e5",Ignore:"\u5ffd\u7565","Ignore all":"\u5ffd\u7565\u5168\u90e8",Finish:"\u5b8c\u6210","Add to Dictionary":"\u6dfb\u52a0\u5230\u5b57\u5178","Insert table":"\u63d2\u5165\u8868\u683c","Table properties":"\u8868\u683c\u5c5e\u6027","Delete table":"\u5220\u9664\u8868\u683c","Copy table":"\u590d\u5236\u8868\u683c","Table full":"\u8868\u683c\u5168\u5c4f","Table wide":"\u5de6\u53f3\u5c55\u5f00/\u6536\u7f29",Cell:"\u5355\u5143\u683c",Row:"\u884c",Column:"\u5217","Cell properties":"\u5355\u5143\u683c\u5c5e\u6027","Merge cells":"\u5408\u5e76\u5355\u5143\u683c","Split cell":"\u62c6\u5206\u5355\u5143\u683c","Insert row before":"\u5728\u4e0a\u65b9\u63d2\u5165","Insert row after":"\u5728\u4e0b\u65b9\u63d2\u5165","Delete row":"\u5220\u9664\u884c","Row properties":"\u884c\u5c5e\u6027","Cut row":"\u526a\u5207\u884c","Copy row":"\u590d\u5236\u884c","Paste row before":"\u7c98\u8d34\u5230\u4e0a\u65b9","Paste row after":"\u7c98\u8d34\u5230\u4e0b\u65b9","Insert column before":"\u5728\u5de6\u4fa7\u63d2\u5165","Insert column after":"\u5728\u53f3\u4fa7\u63d2\u5165","Delete column":"\u5220\u9664\u5217",Cols:"\u5217",Rows:"\u884c",Width:"\u5bbd",Height:"\u9ad8","Cell spacing":"\u5355\u5143\u683c\u5916\u95f4\u8ddd","Cell padding":"\u5355\u5143\u683c\u5185\u8fb9\u8ddd","Show caption":"\u663e\u793a\u6807\u9898",Left:"\u5de6\u5bf9\u9f50",Center:"\u5c45\u4e2d",Right:"\u53f3\u5bf9\u9f50","Cell type":"\u5355\u5143\u683c\u7c7b\u578b",Scope:"\u8303\u56f4",Alignment:"\u5bf9\u9f50\u65b9\u5f0f","H Align":"\u6c34\u5e73\u5bf9\u9f50","V Align":"\u5782\u76f4\u5bf9\u9f50",Top:"\u9876\u90e8\u5bf9\u9f50",Middle:"\u5782\u76f4\u5c45\u4e2d",Bottom:"\u5e95\u90e8\u5bf9\u9f50","Header cell":"\u8868\u5934\u5355\u5143\u683c","Row group":"\u884c\u7ec4","Column group":"\u5217\u7ec4","Row type":"\u884c\u7c7b\u578b",Header:"\u8868\u5934",Body:"\u8868\u4f53",Footer:"\u8868\u5c3e","Border color":"\u8fb9\u6846\u989c\u8272","Insert template...":"\u63d2\u5165\u6a21\u677f...",Templates:"\u6a21\u677f",Template:"\u6a21\u677f","Text color":"\u6587\u5b57\u989c\u8272","Background color":"\u80cc\u666f\u8272","Cell background color":"\u80cc\u666f\u8272","Custom...":"\u81ea\u5b9a\u4e49...","Custom color":"\u81ea\u5b9a\u4e49\u989c\u8272","No color":"\u65e0","Remove color":"\u5220\u9664\u989c\u8272","Table of Contents":"\u76ee\u5f55","Show blocks":"\u663e\u793a\u533a\u5757\u8fb9\u6846","Show invisible characters":"\u663e\u793a\u4e0d\u53ef\u89c1\u5b57\u7b26","Word count":"\u5b57\u6570\u7edf\u8ba1","Words: {0}":"\u5b57\u6570\uff1a{0}","{0} words":"{0} \u4e2a\u5b57",File:"\u6587\u4ef6",Edit:"\u7f16\u8f91",Insert:"\u63d2\u5165",View:"\u67e5\u770b",Format:"\u683c\u5f0f",Table:"\u8868\u683c",Tools:"\u5de5\u5177","Powered by {0}":"Powered by {0}","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"\u5728\u7f16\u8f91\u533a\u6309ALT+F9\u6253\u5f00\u83dc\u5355\uff0c\u6309ALT+F10\u6253\u5f00\u5de5\u5177\u680f\uff0c\u6309ALT+0\u67e5\u770b\u5e2e\u52a9","Image title":"\u56fe\u7247\u6807\u9898","Border width":"\u8fb9\u6846\u5bbd\u5ea6","Border style":"\u8fb9\u6846\u6837\u5f0f",Error:"\u9519\u8bef",Warn:"\u8b66\u544a",Valid:"\u6709\u6548","To open the popup, press Shift+Enter":"\u6b64\u5feb\u6377\u4e3a\u8f6f\u56de\u8f66\uff08\u63d2\u5165<br>\uff09","Rich Text Area. Press ALT-0 for help.":"\u7f16\u8f91\u533a. \u6309Alt+0\u952e\u6253\u5f00\u5e2e\u52a9","System Font":"\u9ed8\u8ba4\u5b57\u4f53","Failed to upload image: {0}":"\u56fe\u7247\u4e0a\u4f20\u5931\u8d25: {0}","Failed to load plugin: {0} from url {1}":"\u63d2\u4ef6\u52a0\u8f7d\u5931\u8d25: {0} - {1}","Failed to load plugin url: {0}":"\u63d2\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}","Failed to initialize plugin: {0}":"\u63d2\u4ef6\u521d\u59cb\u5316\u5931\u8d25: {0}",example:"\u793a\u4f8b",Search:"\u67e5\u627e",All:"\u5168\u90e8",Currency:"\u8d27\u5e01",Text:"\u6587\u672c",Quotations:"\u5f15\u7528",Mathematical:"\u6570\u5b66\u8fd0\u7b97\u7b26","Extended Latin":"\u62c9\u4e01\u8bed\u6269\u5145",Symbols:"\u7b26\u53f7",Arrows:"\u7bad\u5934","User Defined":"\u81ea\u5b9a\u4e49","dollar sign":"\u7f8e\u5143","currency sign":"\u8d27\u5e01","euro-currency sign":"\u6b27\u5143","colon sign":"\u5192\u53f7","cruzeiro sign":"\u514b\u9c81\u8d5b\u7f57\u5e01","french franc sign":"\u6cd5\u90ce","lira sign":"\u91cc\u62c9","mill sign":"\u5bc6\u5c14","naira sign":"\u5948\u62c9","peseta sign":"\u6bd4\u585e\u5854","rupee sign":"\u5362\u6bd4","won sign":"\u97e9\u5143","new sheqel sign":"\u65b0\u8c22\u514b\u5c14","dong sign":"\u8d8a\u5357\u76fe","kip sign":"\u8001\u631d\u57fa\u666e","tugrik sign":"\u56fe\u683c\u91cc\u514b","drachma sign":"\u5fb7\u62c9\u514b\u9a6c","german penny symbol":"\u5fb7\u56fd\u4fbf\u58eb","peso sign":"\u6bd4\u7d22","guarani sign":"\u74dc\u62c9\u5c3c","austral sign":"\u6fb3\u5143","hryvnia sign":"\u683c\u91cc\u592b\u5c3c\u4e9a","cedi sign":"\u585e\u5730","livre tournois sign":"\u91cc\u5f17\u5f17\u5c14","spesmilo sign":"\u4e00\u5343spesoj\u7684\u8d27\u5e01\u7b26\u53f7\uff0c\u8be5\u8d27\u5e01\u672a\u4f7f\u7528","tenge sign":"\u575a\u6208","indian rupee sign":"\u5370\u5ea6\u5362\u6bd4","turkish lira sign":"\u571f\u8033\u5176\u91cc\u62c9","nordic mark sign":"\u5317\u6b27\u9a6c\u514b","manat sign":"\u9a6c\u7eb3\u7279","ruble sign":"\u5362\u5e03","yen character":"\u65e5\u5143","yuan character":"\u4eba\u6c11\u5e01\u5143","yuan character, in hong kong and taiwan":"\u5143\u7684\u7e41\u4f53\u5b57","yen/yuan character variant one":"\u5143\uff08\u5927\u5199\uff09","Loading emoticons...":"\u6b63\u5728\u52a0\u8f7d\u8868\u60c5\u6587\u5b57...","Could not load emoticons":"\u4e0d\u80fd\u52a0\u8f7d\u8868\u60c5\u6587\u5b57",People:"\u4eba\u7c7b","Animals and Nature":"\u52a8\u7269\u548c\u81ea\u7136","Food and Drink":"\u98df\u7269\u548c\u996e\u54c1",Activity:"\u6d3b\u52a8","Travel and Places":"\u65c5\u6e38\u548c\u5730\u70b9",Objects:"\u7269\u4ef6",Flags:"\u65d7\u5e1c",Characters:"\u5b57\u6570","Characters (no spaces)":"\u5b57\u6570\uff08\u4e0d\u542b\u7a7a\u683c\uff09","Error: Form submit field collision.":"\u9519\u8bef: \u8868\u5355\u63d0\u4ea4\u5b57\u6bb5\u51b2\u7a81.","Error: No form element found.":"\u9519\u8bef: \u672a\u627e\u5230\u53ef\u7528\u7684form.",Update:"\u66f4\u65b0","Color swatch":"\u989c\u8272\u6837\u672c",Turquoise:"\u9752\u7eff",Green:"\u7eff\u8272",Blue:"\u84dd\u8272",Purple:"\u7d2b\u8272","Navy Blue":"\u6d77\u519b\u84dd","Dark Turquoise":"\u6df1\u84dd\u7eff\u8272","Dark Green":"\u6697\u7eff","Medium Blue":"\u4e2d\u84dd","Medium Purple":"\u4e2d\u7d2b","Midnight Blue":"\u6df1\u84dd",Yellow:"\u9ec4\u8272",Orange:"\u6a59\u8272",Red:"\u7ea2\u8272","Light Gray":"\u6d45\u7070",Gray:"\u7070\u8272","Dark Yellow":"\u6697\u9ec4","Dark Orange":"\u6697\u6a59","Dark Red":"\u6697\u7ea2","Medium Gray":"\u4e2d\u7070","Dark Gray":"\u6df1\u7070",Black:"\u9ed1\u8272",White:"\u767d\u8272","Switch to or from fullscreen mode":"\u5207\u6362\u5168\u5c4f\u6a21\u5f0f","Open help dialog":"\u6253\u5f00\u5e2e\u52a9\u5bf9\u8bdd\u6846",history:"\u5386\u53f2",styles:"\u6837\u5f0f",formatting:"\u683c\u5f0f\u5316",alignment:"\u5bf9\u9f50",indentation:"\u7f29\u8fdb","permanent pen":"\u8bb0\u53f7\u7b14",comments:"\u6ce8\u91ca",Anchor:"\u951a\u70b9","Special character":"\u7279\u6b8a\u5b57\u7b26","Code sample":"\u4ee3\u7801\u793a\u4f8b",Color:"\u989c\u8272",Emoticons:"\u8868\u60c5","Document properties":"\u6587\u6863\u5c5e\u6027",Image:"\u56fe\u7247","Insert link":"\u63d2\u5165\u94fe\u63a5",Target:"\u76ee\u6807",Link:"\u94fe\u63a5",Poster:"\u5c01\u9762",Media:"\u97f3\u89c6\u9891",Print:"\u6253\u5370",Prev:"\u4e0a\u4e00\u4e2a","Find and replace":"\u67e5\u627e\u5e76\u66ff\u6362","Whole words":"\u5168\u5b57\u5339\u914d",Spellcheck:"\u62fc\u5199\u68c0\u67e5",Caption:"\u6807\u9898","Insert template":"\u63d2\u5165\u6a21\u677f","Code view":"\u4ee3\u7801\u533a\u57df","Select...":"\u9009\u62e9...","Format Painter":"\u683c\u5f0f\u5237","No templates defined.":"\u65e0\u5185\u7f6e\u6a21\u677f","Special character...":"\u7279\u6b8a\u5b57\u7b26...","Open link":"\u6253\u5f00\u94fe\u63a5"},"None","\u65e0"),o(i,"Count","\u7edf\u8ba1"),o(i,"Document","\u6574\u4e2a\u6587\u6863"),o(i,"Selection","\u9009\u53d6\u90e8\u5206"),o(i,"Words","\u5b57\u8bcd\u6570"),o(i,"{0} characters","{0} \u4e2a\u5b57\u7b26"),o(i,"Alternative source URL","\u66ff\u4ee3\u8d44\u6e90\u5730\u5740"),o(i,"Alternative description","\u66ff\u4ee3\u8bf4\u660e\u6587\u5b57"),o(i,"Accessibility","\u53ef\u8bbf\u95ee\u6027"),o(i,"Image is decorative","\u4ec5\u7528\u4e8e\u88c5\u9970"),o(i,"Version","\u7248\u672c"),o(i,"Keyboard Navigation","\u952e\u76d8\u5bfc\u822a"),o(i,"Open popup menu for split buttons","\u8be5\u7ec4\u5408\u952e\u7684\u4f5c\u7528\u662f\u8f6f\u56de\u8f66\uff08\u63d2\u5165br\uff09"),o(i,"Line height","\u884c\u9ad8"),o(i,"Cut column","\u526a\u5207\u5217"),o(i,"Copy column","\u590d\u5236\u5217"),o(i,"Paste column before","\u7c98\u8d34\u5230\u5de6\u4fa7"),o(i,"Paste column after","\u7c98\u8d34\u5230\u53f3\u4fa7"),o(i,"Horizontal align","\u6c34\u5e73\u5bf9\u9f50"),o(i,"Vertical align","\u5782\u76f4\u5bf9\u9f50"),i))},"9zdF":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("ofXK"),o=n("fXoL"),r=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[i.c]]}),e}()},AA4e:function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"h",function(){return a}),n.d(t,"o",function(){return c}),n.d(t,"q",function(){return l}),n.d(t,"u",function(){return s}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return m}),n.d(t,"f",function(){return g}),n.d(t,"s",function(){return h}),n.d(t,"p",function(){return f}),n.d(t,"j",function(){return v}),n.d(t,"g",function(){return C}),n.d(t,"t",function(){return O}),n.d(t,"m",function(){return _}),n.d(t,"i",function(){return M}),n.d(t,"r",function(){return S}),n.d(t,"l",function(){return P}),n.d(t,"k",function(){return E}),n.d(t,"n",function(){return I}),n("z4NU");var i=n("LRne"),o=n("vRWp"),r=function(e){var t=e;if(e&&"object"==typeof e){if(e instanceof Date)return new Date(e.getTime());t="[object Array]"===Object.prototype.toString.call(e)?[]:{},Object.keys(e).forEach(function(n){t[n]=r(e[n])})}return t},a=function(e,t){if(e){try{e instanceof Date||(e=new Date(e));var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,String(e.getFullYear()).substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr(String(n[i]).length)))}catch(o){console.error(o)}return t}},c=function(e){return null==e||void 0!==e.length&&0===e.length||0===Object.keys(e).length},l=function(e){return 1===e?"rich-text":"markdown"},s=function(e,t){return""===t?t:["workload_man_day","workLoad"].includes(e)?Number((22*t).toFixed(2)):"workload_man_month"===e?Number((t/22).toFixed(2)):t},d={deepCopy:r,formatDate:a,getIds:function(e){return Array.isArray(e)?e.map(function(e){return e&&e.id?e.id:null}):[]},isEmptyValue:c,calcDateRange:function(e,t){var n=new Date(e),i=new Date(t),o=Math.abs(i.getTime()-n.getTime());return Math.ceil(o/864e5)+1},saveAllCdks:function(e){var t=document.querySelectorAll(".cdk-overlay-container"),n=[];if(t.length>0)for(var i=t.length,o=0;o<i;o++)0==e.length?e.push(t.item(o)):e.length>0&&(e.includes(t.item(o))||e.push(t.item(o))),n.push(t.item(o));e.forEach(function(e){n.includes(e)||document.body.appendChild(e)})},checkIsPresent:function(e,t){if(e&&t){var n=new Date(e).getTime(),i=new Date(t).getTime(),o=(new Date).getTime();return o>=n&&o<=i}},workloadChange:s,getUtf8CharLength:function(e){var t,n,i,o=0;for(n=0,i=e.length;n<i;n++)o+=(t=e.charCodeAt(n))<=127?1:t<=2047?2:t<=65535?3:4;return o}},p=new Promise(function(e,t){window.communicationService&&window.communicationService.currentDomain$&&window.communicationService.currentDomain$.subscribe({next:function(t){t&&e(t)},error:function(e){return t(e)}})}),u=new Promise(function(e,t){window.communicationService.currentUser$||!window.communicationService.currentUser?window.communicationService.currentUser$.subscribe({next:function(t){t&&e(t)},error:function(e){return t(e)}}):e(window.communicationService.currentUser)}),m=new Promise(function(e,t){window.communicationService&&window.communicationService.currentCloudService$&&window.communicationService.currentCloudService$.subscribe({next:function(t){t&&e(t)},error:function(e){return t(e)}})}),g=function(e){return{Department:"DOMAIN_TYPE_DEPARTMENT","Product Line":"DOMAIN_TYPE_PRODUCT_LINE","Product Department":"DOMAIN_TYPE_PRODUCT_DEPARTMENT",Solution:"DOMAIN_TYPE_SOLUTION","Service Domain":"DOMAIN_TYPE_SERVICE_DOMAIN",Team:"DOMAIN_TYPE_TEAM",Product:"DOMAIN_TYPE_PRODUCT","Cloud Service":"DOMAIN_TYPE_CLOUD_SERVICE","Internal Service":"DOMAIN_TYPE_INTERNAL_SERVICE",Service:"DOMAIN_TYPE_SERVICE",Project:"DOMAIN_TYPE_PROJECT",Program:"DOMAIN_TYPE_PROGRAM"}[e]||"unknown"};function h(e,t,n){void 0===n&&(n=0);var i=t.offsetTop-e.offsetTop-n;i>0&&e.scrollTo({top:i})}function f(e,t){void 0===t&&(t=1),setTimeout(function(){e()},t)}var v=function(e){return(e=(e=(e=(e=e||"").replace(/<(?!img).*?>/g,"")).replace(/[ | ]*\n/g,"\n")).replace(/\n[\s| | ]*\r/g,"\n")).replace(/&(lt|gt|nbsp|amp|quot|emsp|ensp);/g,"").trim()};function C(e,t){void 0===t&&(t=[]);var n=document.createElement("div");return n.innerHTML=e,t.forEach(function(e){n.querySelectorAll(e).forEach(function(e){e.parentNode.removeChild(e)})}),n.innerHTML}function b(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.childNodes,e):-1}function x(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.children,e):-1}function y(e,t){if(!e.contains(t))throw new Error("root node not contain target node");for(var n=[],i=0;t!==e;)n.unshift(0===i?b(t):x(t)),i++,t=t.parentNode;return n}function w(e,t,n){return null==t?void 0:t.reduce(function(e,i,o){return e?o===t.length-1&&n===Node.TEXT_NODE?e.childNodes[i]:e.children[i]:null},e)}function O(e,t){var n=t.endNodePath,i=t.startOffset,o=t.endOffset,r=t.endNodeType,a=w(e,t.startNodePath,t.startNodeType),c=w(e,n,r);if(a&&c){var l=document.createRange();try{l.setStart(a,i)}catch(d){l.setStart(a,0)}try{l.setEnd(c,o)}catch(p){l.setEnd(c,0)}var s=getSelection();s.removeAllRanges(),s.addRange(l)}}function _(e){var t=getSelection().getRangeAt(0),n=t.startContainer,i=t.endContainer,o=t.startOffset,r=t.endOffset;if(!e.contains(n)||!e.contains(i))return!1;var a=y(e,n),c=y(e,i);return{startNodePath:a,startOffset:o,startNodeType:n.nodeType,endNodePath:c,endOffset:r,endNodeType:i.nodeType}}var M=function(e){var t="";try{t=e.replace(/<[^<>]+>/g,"").replace(/[\r\n\\n&nbsp;\s+]/gi,"")}catch(n){t=""}return t},S=function(e){var t=(new Date).getTime();console.log(e+": ",t-(null===window||void 0===window?void 0:window.startTime))},P=function(){var e=window.location.href.match(/rat\/detail\/(\d+)\/workitem/);return window.location.href.includes("/rat/detail")&&e&&e[1]?{scene:"rat",scene_id:e[1]}:{}};function E(e,t){return void 0===e&&(e=""),void 0===t&&(t=16),""+e+new Array(t).fill(0).map(function(){return(16*Object(o.a)()|0).toString(16)}).join("")}var I=function(e){return void 0===e&&(e={}),function(t){return Object(i.a)(e)}}},BT9m:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL"),o=function(e){return{"border-radius":e}},r=function(){function e(){this.account="000000",this.isAnonymous=!1,this.height=45,this.width=45,this.borderRadius="50%",this.avatarBaseLink="http://w3.huawei.com/w3lab/rest/yellowpage/face/"}return e.prototype.ngOnInit=function(){this.generateUrl()},e.prototype.ngOnChanges=function(e){this.generateUrl()},e.prototype.generateUrl=function(){this.isAnonymous&&(this.account="000000"),this.avatarLink=""+this.avatarBaseLink+this.account,this.avatarLink+=this.width<=45?"/45":"/120"},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["user-avatar"]],inputs:{account:"account",isAnonymous:"isAnonymous",height:"height",width:"width",borderRadius:"borderRadius"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:7,consts:[[1,"user-avatar-photo",3,"src","height","width"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"img",0),2&e&&(i["\u0275\u0275styleMap"](i["\u0275\u0275pureFunction1"](5,o,t.borderRadius)),i["\u0275\u0275property"]("src",t.avatarLink,i["\u0275\u0275sanitizeUrl"])("height",t.height)("width",t.width))},styles:[".user-avatar-photo[_ngcontent-%COMP%]{background-color:#69c;color:#fff;display:inline-block}"]}),e}()},BbD4:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({}),e}()},CuYH:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("z4NU"),o=n("fXoL"),r=function(){function e(){}return e.prototype.transform=function(e,t){switch(t){case"workitem_category":return i.m[e]||i.m.DEFAULT;case"workitem_status":return i.q[e]||i.q.DEFAULT;case"requirement_category":case"bug_category":return i.g[e]||i.g.DEFAULT;case"fuxi_status":return i.e[e]||i.q.DEFAULT;case"workitemBaseInfoColMenuIcon":return i.j[e]||"";case"conference_status":return i.b[e]||i.b.DEFAULT;default:return e}},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o["\u0275\u0275definePipe"]({name:"iconMap",type:e,pure:!0}),e}()},"D/6h":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return a});var i="01001001",o="2147483647",r="1",a={Task:2,Epic:3,Feature:4,Story:5,TaskGroup:6}},Ev4J:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("3Pt+"),o=n("ofXK"),r=n("sYmb"),a=n("lR5k"),c=n("nJia"),l=n("WM4a"),s=n("9zdF"),d=n("BbD4"),p=n("mOC4"),u=n("fXoL"),m=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[o.c,i.g,r.a.forRoot(),c.b,l.a,a.b.forRoot(),d.a,s.a,p.a]]}),e}()},FXAj:function(e,t,n){"use strict";n.d(t,"a",function(){return j});var i=n("ofXK"),o=n("3Pt+"),r=n("cAPe"),a=n("sYmb"),c=n("PTRe"),l=n("FwiY"),s=n("KupA"),d=n("zAKX"),p=n("dEAy"),u=n("qAZ0"),m=n("nJia"),g=n("OzZK"),h=n("D9mS"),f=n("oyxB"),v=n("bNXi"),C=n("0lU3"),b=n("TaO5"),x=n("+oEP"),y=n("EGpF"),w=n("Nqz0"),O=n("q0Us"),_=n("VXpv"),M=n("s+/Z"),S=n("Faj5"),P=n("BbD4"),E=n("7lu6"),I=n("fesf"),k=n("A/Mn"),T=n("Ev4J"),A=n("mOC4"),D=n("Z9Gr"),z=n("+jTH"),L=n("9CzY"),V=n("bWbh"),N=n("cnMA"),R=n("fXoL"),j=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=R["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=R["\u0275\u0275defineInjector"]({providers:[I.a,k.b],imports:[[i.c,r.a,o.g,a.a,S.a,c.e,l.b,s.b,d.g,v.a,P.a,p.b,u.b,m.b,g.c,h.b,T.a,f.c,M.a,A.a,C.b,b.b,x.b,y.b,w.c,O.b,_.b,E.a,D.a,z.a,L.a,V.a,N.a]]}),e}()},Faj5:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("ofXK"),o=n("3Pt+"),r=n("sYmb"),a=n("dEAy"),c=n("nxWG"),l=n("PTRe"),s=n("Nqz0"),d=n("mOC4"),p=n("fXoL"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({providers:[r.c],imports:[[i.c,o.g,a.b,r.a.forChild(),c.b,l.e,d.a,s.c]]}),e}()},Fpfz:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("tk/3"),o=n("lJxs"),r=n("fXoL"),a=function(){function e(e){var t=this;this.http=e,this.initEditPlugins=function(e,t){return"normal"==e?["\n        directionality\n        visualblocks \n        visualchars \n        link \n        template \n        code \n        codesample\n        table\n        hr \n        nonbreaking\n        anchor\n        advlist\n        lists\n        textpattern\n        autosave \n        autoresize\n        autolink\n        codesample\n        paste\n        media\n        quickbars\n      "]:"simple"==e?["\n        directionality\n        visualblocks \n        visualchars \n        template \n        code \n        hr \n        nonbreaking\n        anchor\n        advlist\n        lists\n        textpattern\n        autosave\n        autolink \n        autoresize\n        paste\n      "]:"customize"==e?t.plugins:void 0},this.initEditToolbar=function(e,t,n){var i="";return"normal"==e&&(i="saveContent |                         forecolor backcolor bold italic underline strikethrough removeformat |                         fontsizeselect formatselect |                         editImage media quickimage articleAttachment sketchpad |                         alignleft aligncenter alignright alignjustify outdent indent lineheight |                          bullist numlist |                          table structuredtable thirdpartyservice link blockquote hr codesample |                         undo redo "),"simple"==e&&(i="forecolor backcolor bold italic underline removeformat |                         fontsizeselect formatselect |                         bullist numlist |                          undo redo"),"customize"==e&&(i=t.toolbar),n||(i+="| toMD"),i},this.initEditTextPattern=function(){return[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"~~",end:"~~",format:"strikethrough"},{start:">",format:"blockquote"},{start:"---",replacement:"<hr/>"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]},this.initEditBlockFormats=function(){return"Paragraph=p; \u6807\u98981=h1; \u6807\u98982=h2; \u6807\u98983=h3; \u6807\u98984=h4; \u6807\u98985=h5; \u6807\u98986=h6"},this.initEditFontsizeFormats=function(){return"12px 13px 14px 15px 16px 18px 24px 36px"},this.initEditColor=function(){return["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#FFFFFF","\u767d\u8272","#ECECEC","#ECECEC","#CCCCCC","#CCCCCC","#AAAAAA","#AAAAAA","#7E8C8D","#7E8C8D","#676a6c","\u7cfb\u7edf\u7070\u8272","#000000","\u9ed1\u8272"]},this.initCodeLanguage=function(){return[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"JSON",value:"json"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"Go",value:"go"},{text:"Shell",value:"bash"},{text:"PL/SQL",value:"sql"},{text:"YAML",value:"yaml"}]},this.queryAvailableModelOption=function(e){return t.http.get("/vision-platform/api/cloudmodeling/type/"+e).pipe(Object(o.a)(function(e){return e.data}))},this.createDiagram=function(e,n){var r={params:(new i.g).set("sn",e)};return t.http.post("/vision-platform/api/cloudmodeling",n,r).pipe(Object(o.a)(function(e){return e.data}))},this.queryAllDiagrams=function(e){var n={params:(new i.g).set("sn",e)};return t.http.get("/vision-platform/api/cloudmodeling",n).pipe(Object(o.a)(function(e){return e.data}))},this.isFullTbale=!1,this.isTableIconIn=!1,this.isTableIn=!1}return e.prototype.upload_file_storage=function(e,t,n,o){(new i.f).append("Content-Type",void 0);var r={params:(new i.g).set("file_type",e).set("username",t)},a=new FormData;return a.append("filename",n,o),this.http.post("/vision-file-storage/api/file/upload",a,r)},e.prototype.queryArticleCache=function(e){return this.http.post("/devops-knowledge-management/api/temporary/storage",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.updateArticleCache=function(e){return this.http.put("/devops-knowledge-management/api/temporary/storage",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.getSpaceImageData=function(e,t,n){var r;return r={params:(new i.g).set("domain_id",e)},t&&!n&&(r={params:(new i.g).set("domain_id",e).set("package_uuid",t)}),n&&!t&&(r={params:(new i.g).set("domain_id",e).set("element_uuid",n)}),this.http.get("/vision-platform/api/cloudmodeling/tree",r).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.getImageInfo=function(e,t,n){var r=(new i.g).set("space_uuid",e).set("diagram_uuid",t),a={params:n?r.set("version_uuid",n):r};return this.http.get("/vision-platform/api/cloudmodeling/diagram",a).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.imageBindingRelationship=function(e,t){var n={params:(new i.g).set("sn",e).set("diagram_uuid",t)};return this.http.get("/vision-platform/api/cloudmodeling/bind/diagram",n).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.queryTableInfoBySpace=function(e,t){return this.http.get("/devops-data-struct/api/v1/structTable/tableInfo?assignedDomainId="+e+"&category="+t).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.createStructuredTable=function(e){return this.http.post("/devops-data-struct/api/v1/structTable/build/table",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.queryArticleAttachmentNumber=function(){return this.http.get("/devops-knowledge-management/api/attachment/location").pipe(Object(o.a)(function(e){return e.data}))},e.prototype.changeContentMode=function(e,t){return"view"===t?e.replace(/story-structured-table-mode="edit"/g,'story-structured-table-mode="view"').replace(/article-attachment-mode="edit"/g,'article-attachment-mode="view"').replace(/article-attachment-scene=\"create\"/g,'article-attachment-scene=""').replace(/tinydesign-mode="edit"/g,'tinydesign-mode="view"').replace(/<sketch-pad(.*?)edit-mode=\".*?\"(.*?)<\/sketch-pad>/g,"<sketch-pad$1$2</sketch-pad>"):e.replace(/story-structured-table-mode="view"/g,'story-structured-table-mode="edit"').replace(/article-attachment-mode="view"/g,'article-attachment-mode="edit"').replace(/article-attachment-scene=\"create\"/g,'article-attachment-scene=""').replace(/tinydesign-mode="view"/g,'tinydesign-mode="edit"').replace(/<sketch-pad/g,'<sketch-pad edit-mode="edit"')},e.prototype.enterScroll=function(){if(13==window.event.keyCode){var e=document.getElementById("scroll-body");if(window.getSelection().focusNode.offsetTop<420)return;e.scrollTop=(e.scrollTop||0)+30}},e.prototype.hiddenTableDragele=function(){var e=document.querySelectorAll("#article-toolbar");e&&e.length&&(e[0].onmouseover=function(e){var t=document.querySelectorAll(".ephox-snooker-resizer-bar");t&&t.length&&(t[0].parentNode.style.visibility="hidden")},e[0].onmouseout=function(e){var t=document.querySelectorAll(".ephox-snooker-resizer-bar");t&&t.length&&(t[0].parentNode.style.visibility="visible")})},e.prototype.docTableView=function(){var e=this,t=document.querySelector("#doc-app");if(t&&t.querySelectorAll(".doc-table-edit-scorll").forEach(function(e){e.hasAttribute("contentEditable")&&(e.removeAttribute("contentEditable"),null==e||e.querySelectorAll("table").forEach(function(e){e.removeAttribute("contentEditable")}))}),location.pathname.includes("/wiki")){var n=document.querySelectorAll("table");n&&n.length&&n.forEach(function(t,n){e.addTableScorll(t),t.onmouseenter=function(){var e;(e=document.querySelectorAll(".ephox-snooker-resizer-bar"))&&e.length&&e[0].parentNode.setAttribute("oncontextmenu","return false")}})}},e.prototype.tinymceTableWide=function(e){e.preventDefault(),this.setTinymceTableWide(e.detail.tableDom),document.getElementById("doc-app").removeEventListener("tinymce_table_wide",this.tinymceTableWide.bind(this))},e.prototype.setTinymceTableWide=function(e){var t,n=e;n.parentNode.className.includes("doc-table-edit-scorll")&&(t=n.parentNode),t&&(t.className.includes("width-table")?this.removeWidthMode(t):this.addWidthMode(t))},e.prototype.tinymceTableFull=function(e){e.preventDefault(),this.setTinymceTableFull(e),document.getElementById("doc-app").removeEventListener("tinymce_table_full",this.tinymceTableFull.bind(this))},e.prototype.setTinymceTableFull=function(e){var t=e.detail.tableDom;t.parentNode.className.includes("doc-table-active-full")?this.closeTableMode(t,"edit"):this.fullTableMode(t,"edit")},e.prototype.addTableScorll=function(e){var t,n;e.parentNode.className.includes("doc-table-edit-scorll")||(null===(t=e.parentNode.parentNode)||void 0===t?void 0:t.className.includes("doc-table-edit-scorll"))||((n=document.createElement("div")).className="doc-table-edit-scorll",e.parentNode.replaceChild(n,e),n.appendChild(e),n.outerHTML=n.outerHTML+"<br/>")},e.prototype.hideTableFullIcons=function(){var e=this;setTimeout(function(){if(!e.isTableIn&&!e.isTableIconIn){var t=document.getElementsByClassName("tinymce-table-full-mode");t.length&&t[0].remove()}},1500)},e.prototype.createSketchPad=function(e,t){var n={params:(new i.g).set("relaType",e).set("relaSn",t)};return this.http.post("/devops-sketchpad-backend/api/painting/createPage",{},n).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.removeFullMode=function(e,t){var n=this;window,window.document.body.onmouseover=function(t){document.querySelectorAll("#doc-app").length||e.contains(t.target)||(n.isTableIn=!1,n.hideTableFullIcons())}},e.prototype.tableAddWidthMod=function(e,t,n){var i=this,o=e,r=document.createElement("i");r.title="\u8868\u683c\u5168\u5bbd/\u6807\u5bbd",r.className="doc-table-width-icon iconfont icon-horizon-expand txt-666",r.onclick=function(e,t){var n;o.parentNode.parentNode.className.includes("doc-table-edit-scorll")?n=o.parentNode.parentNode:o.parentNode.className.includes("table-wrapper")&&(n=o.parentNode),n.className.includes("width-table")?i.removeWidthMode(n):i.addWidthMode(n)},n.childNodes[0].classList.add("table-full-btn-content-more"),n.childNodes[0].appendChild(r)},e.prototype.addFullMode=function(e,t,n){var i=this;if(!document.querySelectorAll(".tinymce-table-full-mode").length&&!this.isFullTbale){var o=e.getBoundingClientRect(),r=o.top,a=o.width,c=document.createElement("div");c.className="tinymce-table-full-mode",c.style.top=r-40+"px";var l=e.parentNode.clientWidth;a<=e.parentNode.clientWidth&&(l=a),c.style.left=e.parentNode.getBoundingClientRect().left+Math.ceil(l/2)+"px",c.innerHTML='<div class="table-full-btn-content"><i class="doc-table-back-icon iconfont icon-fullscreen-square txt-666" title="\u8868\u683c\u5168\u5c4f"></i></div>';var s=e;this.isTableIn=!0;var d=c.getElementsByClassName("doc-table-back-icon")[0];n||this.tableAddWidthMod(e,t,c),d.onclick=function(e,n){s.parentNode.className.includes("doc-table-active-full")?i.closeTableMode(s,t):i.fullTableMode(s,t),i.refreshTableFullIconLocal(s)},c.onmouseout=function(){i.isTableIconIn=!1,i.hideTableFullIcons()},c.onmouseover=function(){i.isTableIconIn=!0},window.document.body.appendChild(c)}},e.prototype.addWidthMode=function(e){e.classList.add("width-table"),window.hwa("trackStructEvent",{label:"\u8868\u683c\u5168\u5bbd"})},e.prototype.removeWidthMode=function(e){e.classList.remove("width-table")},e.prototype.fullTableMode=function(e,t){var n=this,i=document.createElement("div"),o=document.createElement("div");o.id="back-full-table",o.innerHTML='<i class="iconfont icon-icon-crown"></i><span>\u8fd4\u56de\u6587\u7ae0</span>';var r=e;o.onclick=function(e){n.closeTableMode(r,t)},i.appendChild(o),i.className="doc-table-active-full slimScrollBar",e.parentNode.className.includes("doc-table-active-full")||(i.style.top="edit"===t?"50px":"0",i.style.zIndex="edit"===t?"0":"23px",e.parentNode.replaceChild(i,e),i.appendChild(e),t&&"edit"===t&&c("hidden"),this.isFullTbale=!0),window.hwa("trackStructEvent",{label:"\u8868\u683c\u5168\u5c4f"})},e.prototype.closeTableMode=function(e,t){t&&"edit"===t&&c("show"),e.parentNode.classList.remove("doc-table-active-full"),e.parentNode.parentNode.replaceChild(e,e.parentNode),this.isFullTbale=!1},e.prototype.refreshTableFullIconLocal=function(e){var t,n=e.getBoundingClientRect(),i=n.top,o=n.width;if((t=document.querySelectorAll(".tinymce-table-full-mode")).length){t[0].style.top=i-40+"px";var r=e.parentNode.getBoundingClientRect().width;o<=e.parentNode.getBoundingClientRect().width&&(r=o),t[0].style.left=e.parentNode.getBoundingClientRect().left+Math.ceil(r/2)+"px"}},e.prototype.checkIsFullTable=function(){var e,t=document.getElementsByClassName("doc-table-active-full");if(t&&t.length){var n=null===(e=t[0])||void 0===e?void 0:e.querySelectorAll("table")[0];this.closeTableMode(n,"edit")}},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](i.c))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();function c(e){var t;(t=document.querySelectorAll(".tox-toolbar__group"))&&t.length&&(t[t.length-1].style.display="hidden"===e?"none":"flex");var n=document.getElementById("doc-app");"hidden"===e?n.classList.add("app-doc-table-full"):n.classList.remove("app-doc-table-full"),[{dom:"right",display:"block"},{dom:"collapse-all-icon",display:"block"},{dom:"create-to",display:"inline-flex"},{dom:"doc-save-btn",display:"inline-block"},{dom:"article-outline-wrap",display:"block"}].forEach(function(t){var n;(n=document.querySelectorAll("."+t.dom))&&n.length&&(n[0].style.display="hidden"===e?" none":t.display)})}},IVlV:function(e,t,n){"use strict";n.d(t,"a",function(){return oe});var i=n("fXoL"),o=n("HDdC"),r=n("ofXK"),a=n("UJq8"),c=n("A/Mn"),l=n("zAKX"),s=n("3Pt+"),d=n("QhG9"),p=n("D9mS"),u=n("sYmb");function m(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",11),2&e){var n=t.$implicit,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("nzLabel","en"===o.curLanguage?n.attrTitleEn:n.attrTitleZh)("nzValue",n)}}function g(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nz-option-group",9),i["\u0275\u0275template"](1,m,1,2,"nz-option",10),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("nzLabel","en"===o.curLanguage?null==n?null:n.attrTitleEn:null==n?null:n.attrTitleZh),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.children)}}function h(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",11),2&e){var n=t.$implicit,o=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("nzLabel","en"===o.curLanguage?n.attrTitleEn:n.attrTitleZh)("nzValue",n)}}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nz-option-group",9),i["\u0275\u0275template"](1,h,1,2,"nz-option",10),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("nzLabel","en"===o.curLanguage?null==n?null:n.attrTitleEn:null==n?null:n.attrTitleZh),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.children)}}function v(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,f,2,2,"nz-option-group",3),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.causeChild)}}function C(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",11),2&e){var n=t.$implicit,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("nzLabel","en"===o.curLanguage?null==n?null:n.attrTitleEn:null==n?null:n.attrTitleZh)("nzValue",n.id)}}function b(e,t){if(1&e&&i["\u0275\u0275template"](0,C,1,2,"nz-option",10),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngForOf",n.causeChild)}}var x=function(){return{width:"200px"}},y=function(){function e(e,t){this.translate=e,this.knowledgeManage=t,this.causeChild=[],this.causeParent=[],this.causeClassIfy=[],this.resArr=[],this.curLanguage=this.translate.currentLang||"zh"}return e.prototype.ngOnInit=function(){this.initRootCauseClassify("failure-mode"===this.type?"getCoeFailureMode":"getCoeAttribute")},e.prototype.selectCauseParent=function(e){this.resArr=[];var t=this.selectParentObj(this.causeClassIfy,e);this.resArr[0]=t.id,this.resArr[1]=e.id,this.causeChild=e.children,this.causeChildId=""},e.prototype.selectParentObj=function(e,t){return e.find(function(e){for(var n=0;n<e.children.length;n++)if(e.children[n].attrValue===t.attrValue)return!0;return!1})},e.prototype.initRootCauseClassify=function(e){var t=this;window.communicationService.currentDomain$.subscribe(function(n){var i,o={convolution:!0,domains:[],domainId:null!==(i=null==n?void 0:n.id)&&void 0!==i?i:t.domainId,type:"ROOT_CAUSE_CLASSIFY_L1",withSize:!1};t.knowledgeManage[e](o).subscribe(function(e){t.causeClassIfy=e,"create-article"!==t.model&&t.getInitAttrData()},function(){})})},e.prototype.getInitAttrData=function(){var e=this;this.knowledgeManage.getCoeTagList(this.wikiId).subscribe(function(t){"failure-mode"!==e.type&&(null==t?void 0:t.wikiCustomAttr2)?e.filteringDataInfo(t,["wikiCustomAttr1","wikiCustomAttr2","wikiCustomAttr3"]):"failure-mode"===e.type&&(null==t?void 0:t.wikiFailureMode2)&&e.filteringDataInfo(t,["wikiFailureMode1","wikiFailureMode2","wikiFailureMode3","wikiFailureMode4"])},function(){})},e.prototype.filteringDataInfo=function(e,t){var n,i=this;this.filterEndData(this.causeClassIfy,null==e?void 0:e[t[1]]),this.causeChild=this.causeParent.children,"failure-mode"===this.type?this.filterEndData(this.causeChild,null==e?void 0:e.wikiFailureMode4,"failure-mode"):this.causeChildId=null===(n=this.causeChild.filter(function(t){var n;return t.id===(null===(n=null==e?void 0:e.wikiCustomAttr3)||void 0===n?void 0:n.id)})[0])||void 0===n?void 0:n.id,t.forEach(function(t,n){var o;i.resArr[n]=null===(o=null==e?void 0:e[t])||void 0===o?void 0:o.id})},e.prototype.filterEndData=function(e,t,n){var i=this;e.forEach(function(e){for(var o,r=0;r<(null===(o=null==e?void 0:e.children)||void 0===o?void 0:o.length);r++)e.children[r].id===(null==t?void 0:t.id)&&("failure-mode"===n?i.causeChildId=e.children[r]:i.causeParent=e.children[r])})},e.prototype.updateCause=function(e){if("failure-mode"===this.type){var t=this.selectParentObj(this.causeChild,e);this.resArr[2]=t.id,this.resArr[3]=e.id}else this.resArr[2]=e},e.prototype.getCauseNumber=function(e,t,n){return e.filter(function(e){return e.id===t})[0][n]},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.c),i["\u0275\u0275directiveInject"](c.b))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-negative-root-cause"]],inputs:{type:"type",model:"model",wikiId:"wikiId",domainId:"domainId"},decls:13,vars:16,consts:[[1,"attribute-cause","flex-box",2,"line-height","44px"],[1,"rootcause-left"],["nzShowSearch","",3,"ngModel","nzPlaceHolder","nzDropdownStyle","ngModelChange"],[3,"nzLabel",4,"ngFor","ngForOf"],[1,"rootcause-center"],[1,"rootcause-right"],["nzShowSearch","",1,"m-t-10",3,"ngModel","nzDropdownStyle","nzPlaceHolder","nzDropdownMatchSelectWidth","ngModelChange"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"nzLabel"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"nz-select",2),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.causeParent=e})("ngModelChange",function(e){return t.selectCauseParent(e)}),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275template"](4,g,2,2,"nz-option-group",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275text"](6,"-"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",5),i["\u0275\u0275elementStart"](8,"nz-select",6),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.updateCause(e)})("ngModelChange",function(e){return t.causeChildId=e}),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275template"](10,v,2,1,"ng-container",7),i["\u0275\u0275template"](11,b,1,1,"ng-template",null,8,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](12);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",t.causeParent)("nzPlaceHolder",i["\u0275\u0275pipeBind1"](3,10,"UNKNOWN"))("nzDropdownStyle",i["\u0275\u0275pureFunction0"](14,x)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.causeClassIfy),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",t.causeChildId)("nzDropdownStyle",i["\u0275\u0275pureFunction0"](15,x))("nzPlaceHolder",i["\u0275\u0275pipeBind1"](9,12,"UNKNOWN"))("nzDropdownMatchSelectWidth",!1),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","failure-mode"===t.type)("ngIfElse",n)}},directives:[l.e,s.k,s.l,r.m,r.n,l.b,l.a],pipes:[u.b],styles:[".rootcause-left[_ngcontent-%COMP%]{margin-left:-13px;width:auto}.rootcause-center[_ngcontent-%COMP%]{margin-left:-2px}.rootcause-right[_ngcontent-%COMP%]{flex:1;margin-top:-2px;margin-left:10px}  .rootcause-left .ant-select:not(.ant-select-customize-input) .ant-select-selector,   .rootcause-right .ant-select:not(.ant-select-customize-input) .ant-select-selector{border:none;text-decoration:underline;padding:0 15px}  .rootcause-left .ant-select .ant-select-arrow,   .rootcause-right .ant-select .ant-select-arrow{display:none}  .cdk-virtual-scroll-viewport::-webkit-scrollbar{width:8px;height:8px}  .cdk-virtual-scroll-viewport::-webkit-scrollbar-thumb{border-radius:10px;background-color:#aaa}  .cdk-virtual-scroll-viewport::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}"]}),e}(),w=n("mrSG"),O=n("XIp8"),_=n("tk/3"),M=function(){function e(e){this.http=e,this.allTreeObj=[{title:"ALL",key:"0",isLeaf:!0}]}return e.prototype.buildTemplateAttribute=function(e){var t=this;e&&e.length&&e.forEach(function(e){t.buildAttributeItem(e)})},e.prototype.buildAttributeItem=function(e,t){switch(void 0===t&&(t=[]),e.name){case"EVENT_CATEGORY":"string"==typeof e.selectValue&&e.selectValue.length&&(e.selectValue=e.selectValue.split(",")),this.setIsLeaf(e.optionValues);break;case"ATTRIBUTION_SERVER":e.optionValues=Object(O.a)(t);break;case"APPLICABLE_SERVER":"string"==typeof e.selectValue&&e.selectValue.length&&(e.selectValue=e.selectValue.split(",")),e.optionValues=Object(O.a)(Object(w.i)(this.allTreeObj,t));break;case"APPLICABLE_SITE_TYPE":"string"==typeof e.selectValue&&e.selectValue.length&&(e.selectValue=e.selectValue.split(","))}},e.prototype.setIsLeaf=function(e){var t=this;e&&e.forEach(function(e){var n;(null===(n=null==e?void 0:e.children)||void 0===n?void 0:n.length)?t.setIsLeaf(e.children):e.isLeaf=!0})},e.prototype.buildTemplateTreeList=function(e){var t=this;e&&e.forEach(function(e){var n;e.title=e.short_title||e.title_zh,e.key=e.sn,e.disabled="PRODUCT"!==e.category,(null===(n=null==e?void 0:e.children)||void 0===n?void 0:n.length)?t.buildTemplateTreeList(e.children):e.isLeaf=!0})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](_.c))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),S=n("PTRe"),P=n("q0Us"),E=n("VXpv");function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",8),i["\u0275\u0275text"](1,"*"),i["\u0275\u0275elementEnd"]())}function k(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"input",9),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.selectValue=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",o.selectValue)}}function T(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",12),2&e){var n=t.$implicit;i["\u0275\u0275property"]("nzLabel",n.label)("nzValue",n.value)}}function A(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-select",10),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.selectValue=e}),i["\u0275\u0275template"](2,T,1,2,"nz-option",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",o.selectValue)("nzDisabled",o.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",o.optionValues)}}function D(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",12),2&e){var n=t.$implicit;i["\u0275\u0275property"]("nzLabel",n.label)("nzValue",n.value)}}function z(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-select",13),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.selectValue=e}),i["\u0275\u0275template"](2,D,1,2,"nz-option",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",o.selectValue),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",o.optionValues)}}function L(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-cascader",14),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.selectValue=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzExpandTrigger","hover")("nzOptions",o.optionValues)("ngModel",o.selectValue)}}function V(e,t){1&e&&i["\u0275\u0275text"](0),2&e&&i["\u0275\u0275textInterpolate1"]("and ",t.$implicit.length," more...")}function N(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-tree-select",15),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.selectValue=e})("ngModelChange",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).onChangeTree(e,t)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,V,1,1,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275reference"](3),r=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",r.selectValue)("nzMaxTagCount",3)("nzMaxTagPlaceholder",o)("nzNodes",r.optionValues)("nzDefaultExpandAll",!0)("nzAllowClear",!1)("nzMultiple","multiple"===r.selectModel)}}function R(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",3),i["\u0275\u0275elementStart"](2,"span",4),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,I,2,0,"span",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",6),i["\u0275\u0275template"](7,k,2,1,"ng-container",7),i["\u0275\u0275template"](8,A,3,3,"ng-container",7),i["\u0275\u0275template"](9,z,3,2,"ng-container",7),i["\u0275\u0275template"](10,L,2,3,"ng-container",7),i["\u0275\u0275template"](11,N,4,7,"ng-container",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,7,n.name)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",n.required),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","input"===n.selectType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","select"===n.selectType&&"single"===n.selectModel),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","select"===n.selectType&&"multiple"===n.selectModel),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","linkage"===n.selectType&&"multiple"===n.selectModel),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","tree"===n.selectType)}}function j(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275template"](1,R,12,9,"ng-container",2),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.attributeList)}}var U=function(){function e(e,t,n){this.translate=e,this.knowledgeService=t,this.additiveAttributeService=n,this.serverTreeList=[],this.attributeList=[]}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){e.templateAttrObj&&this.getTemplateAttribute()},e.prototype.getTemplateAttribute=function(){var e=this;if(this.templateAttrObj.number){var t=this.templateAttrObj.number;this.attributeList=[],this.knowledgeService.getTemplateAttribute(t).subscribe(function(t){t&&(e.additiveAttributeService.buildTemplateAttribute(t),e.attributeList=t,e.getAttributeServerTree())},function(){})}},e.prototype.getAttributeServerTree=function(){var e=this;this.knowledgeService.getAttributeServerTree({filters:[{key:"top_sn",value:["CL12015881"],operator:"||"}],data_type:"tree"}).subscribe(function(t){t&&t.result&&(e.serverTreeList=[],e.additiveAttributeService.buildTemplateTreeList(t.result),e.serverTreeList=t.result,e.attributeList.forEach(function(t){e.additiveAttributeService.buildAttributeItem(t,e.serverTreeList)}))},function(){})},e.prototype.onChangeTree=function(e,t){"multiple"===t.selectModel&&e.length&&e.includes("0")&&(e=["0"],t.selectValue=["0"])},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.c),i["\u0275\u0275directiveInject"](c.b),i["\u0275\u0275directiveInject"](M))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-article-template-attribute"]],inputs:{templateAttrObj:"templateAttrObj"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[["class","m-b-30 template-attribute-box",4,"ngIf"],[1,"m-b-30","template-attribute-box"],[4,"ngFor","ngForOf"],[1,"m-b-8","attribute-title"],[1,"f-bold"],["class","text-danger m-l-5",4,"ngIf"],[1,"m-b-10","attribute-box"],[4,"ngIf"],[1,"text-danger","m-l-5"],["nz-input","",3,"ngModel","ngModelChange"],["nzShowSearch","",3,"ngModel","nzDisabled","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nzMode","multiple",3,"ngModel","ngModelChange"],[3,"nzExpandTrigger","nzOptions","ngModel","ngModelChange"],["nzShowSearch","","nzVirtualHeight","300px",3,"ngModel","nzMaxTagCount","nzMaxTagPlaceholder","nzNodes","nzDefaultExpandAll","nzAllowClear","nzMultiple","ngModelChange"],["omittedPlaceHolder",""]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,j,2,1,"div",0),2&e&&i["\u0275\u0275property"]("ngIf",t.attributeList.length)},directives:[r.n,r.m,S.b,s.d,s.k,s.l,l.e,l.a,P.a,E.a],pipes:[u.b],styles:[".template-attribute-box[_ngcontent-%COMP%]   nz-cascader[_ngcontent-%COMP%], .template-attribute-box[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%], .template-attribute-box[_ngcontent-%COMP%]   nz-tree-select[_ngcontent-%COMP%]{width:100%}  .ant-cascader-menu::-webkit-scrollbar{width:0!important;display:none}"]}),e}(),B=n("FwiY"),F=n("C2AL"),W=n("TaO5"),H=n("0lU3"),$=["tagManager"],G=["rootCause"],q=["failureMode"],K=["templateAttribute"];function X(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",16),2&e){var n=t.$implicit;i["\u0275\u0275property"]("nzLabel",n.name+" "+n.username)("nzValue",n.id)}}function Y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275elementStart"](1,"span",17),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",7),i["\u0275\u0275element"](5,"app-negative-root-cause",18,19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"span",20),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",7),i["\u0275\u0275element"](11,"app-negative-root-cause",21,22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](6),o=i["\u0275\u0275nextContext"]();i["\u0275\u0275styleProp"]("margin-bottom","create-article"!=o.model||n.causeChildId?"15px":"25px"),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](3,10,"ROOT_CAUSE_CLASSIFICATION")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("wikiId",o.wikiSn)("model",o.model)("domainId",null==o.currentDomainInfo?null:o.currentDomainInfo.id),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](9,12,"FAILURE_MODE")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("wikiId",o.wikiSn)("model",o.model)("domainId",null==o.currentDomainInfo?null:o.currentDomainInfo.id)}}function Q(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"app-article-template-attribute",24,25),i["\u0275\u0275listener"]("templateAttrObjChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().templateAttrObj=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("templateAttrObj",o.templateAttrObj)}}function J(e,t){1&e&&i["\u0275\u0275element"](0,"i",31),2&e&&i["\u0275\u0275property"]("nzType","loading")}function Z(e,t){1&e&&i["\u0275\u0275element"](0,"i",32)}function ee(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",26),i["\u0275\u0275template"](2,J,1,1,"i",27),i["\u0275\u0275template"](3,Z,1,0,"i",28),i["\u0275\u0275elementStart"](4,"div",29),i["\u0275\u0275element"](5,"span",30),i["\u0275\u0275text"](6),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",n.loading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!n.loading),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](7,3,"LOCAL_UPLOAD")," ")}}function te(e,t){if(1&e&&i["\u0275\u0275element"](0,"img",33),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("src",n.avatarUrl,i["\u0275\u0275sanitizeUrl"])}}function ne(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",36),i["\u0275\u0275elementStart"](1,"nz-range-picker",37),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).dateRange=e})("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).dateRangeChange(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzFormat",o.dateFormat)("ngModel",o.dateRange)}}function ie(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275elementStart"](1,"span",2),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"label",34),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().attributeValue.join_calendar=e})("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().checkboxChange(e)}),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,ne,2,2,"div",35),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,4,"COMMUNITY_ACTIVITY")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",o.attributeValue.join_calendar),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](6,6,"IS_JOIN_COMMUNITY_CALENDAR")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",o.attributeValue.join_calendar)}}var oe=function(){function e(e,t){this.emitService=e,this.knowledgeService=t,this.updateAttributeValue=new i.EventEmitter,this.dateRange=[],this.selectedValue=null,this.currentUsername=window.communicationService.currentUser.user_name,this.isHasCoeAttr=!0,this.loading=!1,this.userOption=[],this.dateFormat="yyyy/MM/dd",this.currentDomainInfo={},this.showCalendar=!0,this.selectedTagOption=[],this.attributeValue={id:null,tag:[],wiki_id:"",wiki_sn:"",icon_image:"",join_calendar:!1,start_time:null,end_time:null},this.beforeUpload=function(e){return new o.a(function(t){var n="image/jpeg"===e.type||"image/png"===e.type;if(n){var i=e.size/1024/1024<2;i?(t.next(n&&i),t.complete()):t.complete()}else t.complete()})}}return e.prototype.ngOnInit=function(){var e=this;"update-article"==this.model?(this.attributeValue.wiki_id=this.articleDetails.id,this.attributeValue.wiki_sn=this.wikiSn,this.userOption=[this.articleDetails.created_by],this.templateAttrObj={number:this.wikiSn},this.getAttributeInfo()):this.userOption=[{name:window.communicationService.currentUser.user_name_zh,username:window.communicationService.currentUser.user_name,id:window.communicationService.currentUser.user_id}],this.selectedValue=this.userOption[0].id,this.emitService.eventEmit.subscribe(function(t){"update-article-attribute"===t.type&&(e.attributeValue.tag=e.tagManager.markedTag,e.updateAttributeValue.emit(e.attributeValue))}),this.getDomainInfo(),this.updateAttributeValue.emit(this.attributeValue)},e.prototype.getDomainInfo=function(){var e=this;this.currentDomainChanges=window.communicationService.currentDomain$.subscribe(function(t){var n,i,o;t?e.currentDomainInfo=t:e.currentDomainInfo.id=null===(i=null===(n=e.articleDetails)||void 0===n?void 0:n.assigned_domain)||void 0===i?void 0:i.id,e.categoryId||(e.categoryId=null===(o=e.articleDetails)||void 0===o?void 0:o.kanban_id),e.showCalendar=28676===e.currentDomainInfo.id,e.knowledgeService.getCoeHasAttr({resource:"knowledge:root_cause_classify",domainId:e.currentDomainInfo.id}).subscribe(function(t){e.isHasCoeAttr=t},function(){})})},e.prototype.getAttributeInfo=function(){var e=this;this.wikiSn&&this.knowledgeService.getAttributeInfo(this.wikiSn).subscribe(function(t){t&&(e.avatarUrl=t.icon_image,e.dateRange[0]=t.start_time,e.dateRange[1]=t.end_time,e.attributeValue.id=t.id,e.attributeValue.icon_image=t.icon_image,e.attributeValue.join_calendar=1===t.join_calendar,e.attributeValue.start_time=t.start_time?Object(r.z)(t.start_time,"yyyy-MM-dd","zh"):t.start_time,e.attributeValue.end_time=t.end_time?Object(r.z)(t.end_time,"yyyy-MM-dd","zh"):t.end_time,e.attributeValue.tag=t.tags,e.updateAttributeValue.emit(e.attributeValue))},function(){})},e.prototype.dateRangeChange=function(e){e.length>0?(this.attributeValue.start_time=Object(r.z)(e[0],"yyyy-MM-dd","zh"),this.attributeValue.end_time=Object(r.z)(e[1],"yyyy-MM-dd","zh")):(this.attributeValue.start_time=null,this.attributeValue.end_time=null),this.updateAttributeValue.emit(this.attributeValue)},e.prototype.checkboxChange=function(e){this.updateAttributeValue.emit(this.attributeValue)},e.prototype.getBase64Img=function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result.toString())}),n.readAsDataURL(e)},e.prototype.handleChange=function(e){var t=this;switch(e.file.status){case"uploading":this.loading=!0;break;case"done":var n=e.file.response.data;n.success.length&&(this.attributeValue.icon_image=n.success[0].attachment_url,this.updateAttributeValue.emit(this.attributeValue)),this.getBase64Img(e.file.originFileObj,function(e){t.loading=!1,t.avatarUrl=e});break;case"error":this.loading=!1}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](c.b))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-additive-attribute"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"]($,1),i["\u0275\u0275viewQuery"](G,1),i["\u0275\u0275viewQuery"](q,1),i["\u0275\u0275viewQuery"](K,1)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.tagManager=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.rootCause=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.failureMode=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.templateAttribute=n.first)}},inputs:{categoryId:"categoryId",wikiSn:"wikiSn",model:"model",articleDetails:"articleDetails",templateAttrObj:"templateAttrObj"},outputs:{updateAttributeValue:"updateAttributeValue"},decls:26,vars:21,consts:[[1,"additive-attribute","slimScrollBar"],[1,"attribute-tiem-box"],[1,"attribute-title"],[1,"auth-option"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a person",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["class","attribute-tiem-box",3,"marginBottom",4,"ngIf"],[1,"tag-box"],["isEdit","true",1,"tag-manager",3,"wikiId","isCoe","selectedTagOption"],["tagManager",""],["class","template-attribute-box",4,"ngIf"],[1,"up-file"],["nzAction","/vision-file-storage/api/upload/attachment","nzName","avatar","nzListType","picture-card",1,"avatar-uploader",3,"nzShowUploadList","nzBeforeUpload","nzChange"],[4,"ngIf"],["style","width: 100%",3,"src",4,"ngIf"],["class","attribute-tiem-box",4,"ngIf"],[3,"nzLabel","nzValue"],[1,"attribute-title",2,"margin-bottom","0"],[3,"wikiId","model","domainId"],["rootCause",""],[1,"attribute-title","m-t-10","m-b-0"],["type","failure-mode",3,"wikiId","model","domainId"],["failureMode",""],[1,"template-attribute-box"],[3,"templateAttrObj","templateAttrObjChange"],["templateAttribute",""],[1,"upload-text-content"],["class","upload-icon","nz-icon","",3,"nzType",4,"ngIf"],["class","upload-icon iconfont icon-plus",4,"ngIf"],[1,"ant-upload-text"],[1,"iconfont","icon-add"],["nz-icon","",1,"upload-icon",3,"nzType"],[1,"upload-icon","iconfont","icon-plus"],[2,"width","100%",3,"src"],["nz-checkbox","",1,"calendar-txt",3,"ngModel","ngModelChange"],["class","date-select m-t-10 m-b-10",4,"ngIf"],[1,"date-select","m-t-10","m-b-10"],[3,"nzFormat","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"span",2),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"nz-select",4),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectedValue=e}),i["\u0275\u0275template"](7,X,1,2,"nz-option",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,Y,13,14,"div",6),i["\u0275\u0275elementStart"](9,"div",1),i["\u0275\u0275elementStart"](10,"span",2),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",7),i["\u0275\u0275element"](14,"app-wiki-tag-manager",8,9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,Q,3,1,"div",10),i["\u0275\u0275elementStart"](17,"div",1),i["\u0275\u0275elementStart"](18,"span",2),i["\u0275\u0275text"](19),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",11),i["\u0275\u0275elementStart"](22,"nz-upload",12),i["\u0275\u0275listener"]("nzChange",function(e){return t.handleChange(e)}),i["\u0275\u0275template"](23,ee,8,5,"ng-container",13),i["\u0275\u0275template"](24,te,1,1,"img",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](25,ie,8,8,"div",15),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,15,"ORIGINAL_ANTHOR")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.selectedValue),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.userOption),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",6==t.categoryId&&t.isHasCoeAttr),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,17,"LABELS")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("wikiId",t.wikiSn)("isCoe",6==t.categoryId||"coe"==(null==t.articleDetails?null:t.articleDetails.classify))("selectedTagOption",t.attributeValue.tag),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.templateAttrObj),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](20,19,"THUMBNAIL")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("nzShowUploadList",!1)("nzBeforeUpload",t.beforeUpload),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.avatarUrl),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.avatarUrl),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.showCalendar))},directives:[l.e,s.k,s.l,r.m,r.n,d.a,p.a,l.a,y,U,B.a,F.a,W.a,H.a,H.c],pipes:[u.b],styles:[".additive-attribute[_ngcontent-%COMP%]{border:1px solid #dbdbdb;padding:20px 12px;border-radius:4px;height:100%;background:#fff;display:flex;flex-direction:column;overflow:auto}.additive-attribute[_ngcontent-%COMP%]   .attribute-tiem-box[_ngcontent-%COMP%]{margin-bottom:30px}.additive-attribute[_ngcontent-%COMP%]   .attribute-title[_ngcontent-%COMP%]{margin-bottom:8px;display:block;font-weight:700}.additive-attribute[_ngcontent-%COMP%]   .m-b-0[_ngcontent-%COMP%]{margin-bottom:0}.additive-attribute[_ngcontent-%COMP%]   .auth-option[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}.additive-attribute[_ngcontent-%COMP%]   .ant-upload-text[_ngcontent-%COMP%]{color:#000000d9}.additive-attribute[_ngcontent-%COMP%]   .calendar-txt[_ngcontent-%COMP%]{font-weight:400}.additive-attribute[_ngcontent-%COMP%]     .ant-upload.ant-upload-select-picture-card{background-color:#fff}"]}),e}()},JXZa:function(e,t,n){"use strict";n.d(t,"a",function(){return te});var i=n("mrSG"),o=n("fXoL"),r=n("lJxs"),a=n("nYR2"),c=n("eIep"),l=n("1G5W"),s=n("XNiG"),d=n("VRyK"),p=n("PqYM"),u=n("Cfvw"),m=n("hbEN"),g=n("AA4e"),h=n("bNXi"),f=n("Fpfz"),v=n("sYmb"),C=n("dEAy"),b=n("UJq8"),x=n("ofXK"),y=n("25hl"),w=n("nxWG"),O=n("PTRe"),_=n("3Pt+");function M(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275element"](1,"i",20),o["\u0275\u0275elementStart"](2,"span",21),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](n.isExpanded?"icon-font-size12 iconfont icon-files-open":"iconfont icon-files-close1"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",n.origin.name),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.origin.name)}}function S(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275element"](1,"i",22),o["\u0275\u0275elementStart"](2,"span",23),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("title",n.origin.name),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.origin.name)}}var P=function(e){return{width:e}};function E(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",18),o["\u0275\u0275template"](1,M,4,4,"span",19),o["\u0275\u0275template"](2,S,4,2,"span",19),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275classMap"](i.activeNode&&i.activeNode.origin&&n.origin.uuid==i.activeNode.origin.uuid&&n.parentNode==i.activeNode.parentNode?"active-span-styl":""),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](5,P,198-16*n.level+"px")),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.isLeaf),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isLeaf)}}function I(e,t){if(1&e&&o["\u0275\u0275element"](0,"img",24),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("src",n.activeImageObj.imageUrl,o["\u0275\u0275sanitizeUrl"])}}function k(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",25),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"SELECT_DIAGRAM_PREVIEW")))}function T(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",26),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"INSERT_IMG_LINK_ERROR_TIP")))}var A=function(){function e(e,t,n,i){this.editorService=e,this.modal=t,this.translate=n,this.notification=i,this.modelingImgLink="",this.imgInsertLinkIsLegill=!0}return Object.defineProperty(e.prototype,"confirmBtnDisabled",{get:function(){return!this.modelingImgLink&&(!this.activeNode||!this.activeNode.origin||!this.activeNode.origin.isDiagram)||this.modelingImgLink&&!this.activeImageObj},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.inputWidth=250,e.maxWidth=450,e.minWidth=150})},e.prototype.ngOnInit=function(){var e=this;this.editorService.getSpaceImageData(this.workitemInfo.productId).subscribe(function(t){e.setTypeFunc(t),e.imageArr=Object(i.i)([],t.packages,t.elements,t.diagrams)},function(){})},e.prototype.setTypeFunc=function(e,t){e.packages.length>0&&(e.packages.forEach(function(e){e.isLeaf=!1,e.isPackage=!0}),t&&t.addChildren(e.packages)),e.elements.length>0&&(e.elements.forEach(function(e){e.isLeaf=!1,e.isElement=!0}),t&&t.addChildren(e.elements)),e.diagrams.length>0&&(e.diagrams.forEach(function(e){e.isLeaf=!0,e.isDiagram=!0}),t&&t.addChildren(e.diagrams))},e.prototype.nzEvent=function(e){var t=this;this.imgInsertLinkIsLegill=!0,this.modelingImgLink="";var n=e.node;n&&0===n.children.length&&!n.origin.isLeaf&&this.editorService.getSpaceImageData(this.workitemInfo.productId,n.origin.isPackage?n.origin.uuid:null,n.origin.isElement?n.origin.uuid:null).subscribe(function(i){t.setTypeFunc(i,n),n.addChildren([]),"click"==e.eventName&&0==n.isExpanded&&(n.isExpanded=!0)},function(){}),n&&n.origin.isLeaf&&this.editorService.getImageInfo(n.parentNode.origin.projectSpaceUUID,n.origin.uuid).subscribe(function(e){t.activeImageObj=e},function(){}),this.activeNode=n},e.prototype.closeModal=function(e){var t=this;e?this.editorService.imageBindingRelationship(this.workitemInfo.sn,this.activeImageObj.uuid).subscribe(function(e){t.modal.destroy({requestResult:e,imageObj:t.activeImageObj})},function(){}):this.modal.destroy()},e.prototype.getImageInfoByLink=function(){var e=this,t=this.modelingImgLink.match(/https:\/\/cloudmodeling\.tools\.huawei\.com\/projectspace\/detail\/(\w+)\?[A-Za-z0-9]+=([A-Za-z0-9]+)(&[A-Za-z0-9]+=([A-Za-z0-9]+))?/);t?(this.imgInsertLinkIsLegill=!0,this.editorService.getImageInfo(t[1],t[2],t[4]).subscribe(function(t){e.activeImageObj=t},function(){})):this.imgInsertLinkIsLegill=!1},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](C.c),o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](h.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["insert-existing-pictrure"]],inputs:{workitemInfo:"workitemInfo"},decls:26,vars:24,consts:[[1,"content-wrapper"],[1,"select-directory-header"],[1,"icon-color","icon-font-size14","position-right-close","iconfont","icon-close","pointer-cursor",3,"click"],["id","insert-image-wrapper",1,"select-insert-img","draggable-wrapper"],[1,"comment-container",3,"maxWidth","minWidth","position","inputWidth"],[1,"left-tree"],["nzAsyncData","",3,"nzData","nzTreeTemplate","nzClick","nzExpandChange"],["nzTreeTemplateNode",""],[1,"right-image"],["class","right-image-styl",3,"src",4,"ngIf"],["class","right-image-styl middle-span-styl",4,"ngIf"],["class","right-image-styl middle-span-styl erro-info-color",4,"ngIf"],[1,"bottom-button"],[1,"img-url-input"],[1,"img-url-input-wrapper"],["type","text","nz-input","",3,"nzSize","placeholder","ngModel","ngModelChange","input"],[1,"confirm-button","pointer-cursor",3,"disabled","click"],[3,"textContent"],[1,"custom-node","pointer-cursor","overfolw-eclipis",3,"ngStyle"],[4,"ngIf"],[1,"icon-font-size13"],[1,"folder-name","span-m-l-10",3,"title"],[1,"iconfont","icon-img"],[1,"file-name","span-m-l-10",3,"title"],[1,"right-image-styl",3,"src"],[1,"right-image-styl","middle-span-styl"],[1,"right-image-styl","middle-span-styl","erro-info-color"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementStart"](4,"i",2),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"draggable-div",4),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"nz-tree",6),o["\u0275\u0275listener"]("nzClick",function(e){return t.nzEvent(e)})("nzExpandChange",function(e){return t.nzEvent(e)}),o["\u0275\u0275template"](9,E,3,7,"ng-template",null,7,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",8),o["\u0275\u0275template"](12,I,1,1,"img",9),o["\u0275\u0275template"](13,k,3,3,"span",10),o["\u0275\u0275template"](14,T,3,3,"span",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",12),o["\u0275\u0275elementStart"](16,"div",13),o["\u0275\u0275elementStart"](17,"div"),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"nz-input-group",14),o["\u0275\u0275elementStart"](21,"input",15),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.modelingImgLink=e})("input",function(){return t.getImageInfoByLink()}),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"button",16),o["\u0275\u0275listener"]("click",function(){return t.closeModal(!0)}),o["\u0275\u0275element"](24,"span",17),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275reference"](10);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,16,"INSERT_EXISTING_PICTURE")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("maxWidth",t.maxWidth)("minWidth",t.minWidth)("position","right")("inputWidth",t.inputWidth),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzData",t.imageArr)("nzTreeTemplate",n),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",t.activeImageObj&&t.imgInsertLinkIsLegill),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.activeImageObj&&t.imgInsertLinkIsLegill),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.imgInsertLinkIsLegill),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](19,18,"INSERT_EXISTED_IMG_LINK")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzSize","small")("placeholder",o["\u0275\u0275pipeBind1"](22,20,"INSERT_EXISTED_IMG_LINK"))("ngModel",t.modelingImgLink),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.confirmBtnDisabled),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](25,22,"COMMON_BUTTON_CONFIRM"))}},directives:[y.a,w.a,x.n,O.c,O.b,_.d,_.k,_.l,x.o],pipes:[v.b],styles:['#catalog-select-directory[_ngcontent-%COMP%]     .ant-modal-body{padding:0!important}#catalog-select-directory[_ngcontent-%COMP%]     .ant-modal-body::-webkit-scrollbar{width:0!important}.draggable-wrapper[_ngcontent-%COMP%]{display:flex}.content-wrapper[_ngcontent-%COMP%]{position:relative}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]{margin-top:10px;height:40px;padding-top:30px;line-height:30px;position:relative;right:18px;bottom:10px;padding-left:36px}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .img-url-input[_ngcontent-%COMP%]{display:flex;width:85%;height:30px;position:relative;top:-17px}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .img-url-input[_ngcontent-%COMP%]   .img-url-input-wrapper[_ngcontent-%COMP%]{width:calc(100% - 130px);margin-left:10px}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:18px;width:100%;height:1px;background:#e5e5e5}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .confirm-button[_ngcontent-%COMP%]{position:absolute;background:#23c6c8;padding:0 20px;border-radius:4px;border:none;right:0;text-align:center;color:#fff;top:12px}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .confirm-button[disabled][_ngcontent-%COMP%]{color:#666;background:#e5e5e5}.content-wrapper[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]{height:45px;width:100%;line-height:45px;text-align:left;position:relative;border-bottom:1px solid #e5e5e5;padding-left:18px;font-weight:700}.content-wrapper[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .position-right-close[_ngcontent-%COMP%]{position:absolute;font-size:23px;right:18px;bottom:0}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]{height:600px;display:flex;position:relative}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]{overflow-y:scroll;overflow-x:hidden;height:100%;padding-left:10px;padding-right:10px;border-right:1px solid #e5e5e5}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]   .overfolw-eclipis[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]   .icon-font-size13[_ngcontent-%COMP%]{font-size:13px}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]   .icon-font-size12[_ngcontent-%COMP%]{font-size:12px}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]   .span-m-l-10[_ngcontent-%COMP%]{margin-left:10px}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]   .active-span-styl[_ngcontent-%COMP%]{color:#23c6c8}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;background-color:#aaa}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .right-image[_ngcontent-%COMP%]{margin-left:3px;flex:1;position:relative}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .right-image[_ngcontent-%COMP%]   .erro-info-color[_ngcontent-%COMP%]{color:#e45f5f;word-break:break-all}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .right-image[_ngcontent-%COMP%]   .right-image-styl[_ngcontent-%COMP%]{position:absolute;max-width:80%;top:0;bottom:0;left:0;right:0;margin:auto}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .right-image[_ngcontent-%COMP%]   .middle-span-styl[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}']}),e}();function D(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275elementStart"](1,"span",11),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"span"),o["\u0275\u0275text"](5,"https://tinydesign.cloudbu.huawei.com/run/"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,1,"TINY_DESIGIN_LINK_CASE")))}var z=function(){function e(e,t,n){this.translate=e,this.modal=t,this.notification=n,this.inputValue="",this.validTinyDesignUrl=!0}return e.prototype.ngOnInit=function(){},e.prototype.closeModal=function(e){if(e)this.modal.destroy();else if(this.inputValue){var t=/^http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?$/i.test(this.inputValue),n=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/.exec(this.inputValue),i=!1;n&&n.length&&(i="tinydesign.cloudbu.huawei.com"==n[0]),this.validTinyDesignUrl=t&&i,this.validTinyDesignUrl&&this.modal.destroy({url:this.inputValue})}},e.prototype.linkToHelpFile=function(){window.open("https://clouddevops.huawei.com/domains/2/wiki/9/WIKI2022012400476","_blank")},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](C.c),o["\u0275\u0275directiveInject"](h.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["lnsert-tinydesign-link"]],decls:16,vars:12,consts:[[1,"content-wrapper"],[1,"select-directory-header"],[1,"icon-color","icon-font-size14","position-right-close","iconfont","icon-close","pointer-cursor",3,"click"],[1,"p-15","link-content"],["rows","8",1,"ant-input","textarea-url-item",3,"placeholder","ngModel","ngModelChange"],["class","error-message m-t-5",4,"ngIf"],[1,"bottom-button"],[1,"help-button","pointer-cursor",3,"click"],[3,"textContent"],[1,"confirm-button","pointer-cursor",3,"click"],[1,"error-message","m-t-5"],[1,"box-block"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"span"),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"i",2),o["\u0275\u0275listener"]("click",function(){return t.closeModal(!0)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",3),o["\u0275\u0275elementStart"](7,"textarea",4),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.inputValue=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,D,6,3,"div",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",6),o["\u0275\u0275elementStart"](10,"button",7),o["\u0275\u0275listener"]("click",function(){return t.linkToHelpFile()}),o["\u0275\u0275element"](11,"span",8),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"button",9),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275element"](14,"span",8),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,6,"ADD_TING_LINK")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("placeholder","\u7c98\u8d34Tiny Design\u94fe\u63a5\uff0c\u5982\uff1ahttps://tinydesign.cloudbu.huawei.com/...")("ngModel",t.inputValue),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.validTinyDesignUrl),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](12,8,"HELP_FILE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](15,10,"COMMON_BUTTON_CONFIRM")))},directives:[_.d,_.k,_.l,x.n],pipes:[v.b],styles:[".draggable-wrapper[_ngcontent-%COMP%]{display:flex}.content-wrapper[_ngcontent-%COMP%]{position:relative}.content-wrapper[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#ff4c4c}.content-wrapper[_ngcontent-%COMP%]   .textarea-url-item[_ngcontent-%COMP%]{width:100%;border-radius:5px;border:1px solid #aaa;border-color:#aaa!important}.content-wrapper[_ngcontent-%COMP%]   .textarea-url-item[_ngcontent-%COMP%]:active, .content-wrapper[_ngcontent-%COMP%]   .textarea-url-item[_ngcontent-%COMP%]:focus{color:#676a6c!important}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]{line-height:30px;position:relative;right:18px;bottom:10px;padding-bottom:50px}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .help-button[_ngcontent-%COMP%]{position:absolute;background:#fff;padding:0 20px;border-radius:4px;right:80px;text-align:center;color:#23c6c8;top:12px;border:1px solid #23c6c8}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .confirm-button[_ngcontent-%COMP%]{position:absolute;background:#23c6c8;padding:0 20px;border-radius:4px;border:none;right:0;text-align:center;color:#fff;top:12px}.content-wrapper[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]{height:45px;width:100%;line-height:45px;text-align:left;position:relative;padding-left:18px;font-size:15px}.content-wrapper[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .position-right-close[_ngcontent-%COMP%]{position:absolute;font-size:23px;right:18px;bottom:0}"]}),e}(),L=(n("5WJX"),n("7Cf0"),n("Rf5d"),n("DWi2"),n("CQIl"),n("0tw5"),n("L+zx"),n("cZOo"),n("/75p"),n("w9f+"),n("ZNhe"),n("LTPx"),n("9VcC"),n("hVuo"),n("Kwdf"),n("iGOs"),n("hOyB"),n("Oupb"),n("7anz"),n("z7CG"),n("66wf"),n("Cp0W"),n("kOcP"),n("aVf9"),n("VaDg"),n("AzV5"),n("NN4D"),n("eOTG"),n("7zcm"),n("DvpE"),n("Nl51"),n("Qjfq"),n("Tqh3"),n("B9f7"),n("vFQT"),n("B9FH"),n("9l1e"),n("z9gd"),n("8YmR")),V=n("AWuS"),N=n("jhN1"),R=function(){function e(e,t,n,i){this.translate=e,this.sanitizer=t,this.VisionEditorService=n,this.notification=i,this.modelShowCloseChange=new o.EventEmitter}return e.prototype.closeModal=function(){this.modelShowCloseChange.emit("create"==this.mode?this.newDiagramInfo:this.resolve.imageElement)},e.prototype.ngOnInit=function(){this.currentLang=this.translate.store.currentLang,this.mode=this.resolve.mode,"create"==this.mode?this.queryWorkitemDiagrams(this.resolve.createOptions):this.showIframe(this.resolve.projectUUID,this.resolve.diagramUUID)},e.prototype.showIframe=function(e,t){var n=window.location.origin,i="https://cloudmodeling.gamma.tools.huawei.com/";(n.includes("clouddevops.huawei.com")||n.includes("wiki.his.huawei.com"))&&(i="https://cloudmodeling.tools.huawei.com/"),this.iframeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(i+"projectspace/detail/"+e+"?projectDiagramUUID="+t+"&fromOtherSource=vision&hideDragonHead=true")},e.prototype.queryWorkitemDiagrams=function(e){var t=this,n="",i=0;this.VisionEditorService.queryAllDiagrams(e.sn).subscribe(function(o){n="en"==t.currentLang?"New Diagram":"\u65b0\u5efa\u6a21\u578b\u56fe";for(var r=0;r<o.length;r++){var a=o[r].name.match(new RegExp("^"+n+"(\\d*)"));a&&a[1]&&Number(a[1])>=i&&(i=Number(a[1]))}e.diagramName=n+(i+=1),t.createDiagram(e)},function(){})},e.prototype.createDiagram=function(e){var t=this,n=e.sn;delete e.sn,this.VisionEditorService.createDiagram(n,e).subscribe(function(n){if(n){if(t.newDiagramInfo=n,t.newDiagramInfo.isEmptyImage||t.newDiagramInfo.imageUrl&&t.newDiagramInfo.imageUrl.contains("noData")){var i=window.location.origin,o="https://cloudmodelingapi.gamma.tools.huawei.com/cloudmodelingdrawiosvr/";(i.includes("clouddevops.huawei.com")||i.includes("wiki.his.huawei.com"))&&(o="https://cloudmodelingapi.tools.huawei.com/cloudmodelingdrawiosvr/"),t.newDiagramInfo.imageUrl=o+"d?diagramUUID="+t.newDiagramInfo.uuid+"&fromSys=Vision&versionUUID=&userId="+t.newDiagramInfo.createUser}t.showIframe(e.projectSpaceUUID,t.newDiagramInfo.uuid)}else t.notification.error(t.translate.instant("CREATE_FAILED"),"")},function(){})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](N.b),o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](h.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["cloud-modeling-iframe"]],inputs:{resolve:"resolve"},outputs:{modelShowCloseChange:"modelShowCloseChange"},decls:5,vars:4,consts:[["nzClassName","cloud-modeling-modal",3,"nzVisible","nzClosable","nzFooter"],[1,"flex-box","cloud-modeling-wrapper"],["id","cloud-modeling-iframe",2,"width","100%","height","100%","z-index","1400",3,"src"],[1,"box-inline","text-white","m-l-xs","pointer-cursor","right-close-btn",3,"click"],[1,"x-style","iconfont","colse","icon-close"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nz-modal",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275element"](2,"iframe",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275element"](4,"i",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("src",t.iframeUrl,o["\u0275\u0275sanitizeResourceUrl"]))},directives:[C.a],styles:[".cloud-modeling-modal{width:97vw!important;height:calc(100vh - 3vw)!important;position:fixed;top:1.5vw;left:1.5vw}.cloud-modeling-modal .flex-box{width:100%;height:100%;display:flex}.cloud-modeling-modal .flex-box .cloud-modeling-wrapper{background-color:#fff;width:100%;height:100%}.cloud-modeling-modal .btn-img{width:17px;height:17px}.cloud-modeling-modal .right-close-btn{position:fixed;top:1.5vw;right:0}.cloud-modeling-modal .ant-modal{width:97vw!important;height:calc(100vh - 3vw)!important}.cloud-modeling-modal .ant-modal-content{width:97vw;position:relative;height:calc(100vh - 3vw)!important}.cloud-modeling-modal .ant-modal-body{padding:0!important;width:97vw;height:calc(100vh - 3vw);overflow-y:scroll;-ms-overflow-style:none}.cloud-modeling-modal .ant-modal-body::-webkit-scrollbar{width:0!important}.cloud-modeling-modal .ant-select{width:100%}.cloud-modeling-modal .x-style{font-size:1.3vw}"],encapsulation:2}),e}(),j=["docContentWrapper"];function U(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"cloud-modeling-iframe",6),o["\u0275\u0275listener"]("modelShowCloseChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getIframeCloseData(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("resolve",i.resolve)}}var B=function(){function e(e,t,n,i){var r=this;this.editorService=e,this.translate=t,this.modal=n,this.ele=i,this.height=300,this.structuredTableInfo=null,this.saveContent=!1,this.articleAttachmentInfo=null,this.tingDesignInfo=null,this.tableConfigInfo={},this.sketchPadEnable=!1,this.richTextOnChange=new o.EventEmitter,this.handoverMarkdown=new o.EventEmitter,this.focusOnEditor=new o.EventEmitter,this.initInstanceCallback=new o.EventEmitter,this.tableEventEmit=new o.EventEmitter,this.saveContentEmit=new o.EventEmitter,this.fullTableEmit=new o.EventEmitter,this.imgLoaded=new o.EventEmitter,this.readonly=!1,this.tinymceInit={},this.diagramOptions=[],this.isIframeShow=!1,this.cloudModelingHost="https://cloudmodeling.tools.huawei.com/",this.richTextEditorInit=!0,this.onDestroy$=new s.a,this.hideMDChange$=new s.a,this.cloudModelingSaveImage=function(e){e.origin===r.cloudModelingHost&&"wiki-save-img-can-close-iframe"===e.data&&r.closeIframeHandler()}}return Object.defineProperty(e.prototype,"toolbarContainer",{get:function(){return this.toolbarContailerSelector?this.toolbarContailerSelector:"."+this.richTextId+"-container .toolbar"},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.spaceUUID="",window.addEventListener("message",this.cloudModelingSaveImage,!1),window.addEventListener("sketch-pad-delete",this.removeSkecthPadHandler.bind(this)),this.listenGLobalEvents()},Object.defineProperty(e.prototype,"_isInline",{get:function(){return this.isInline||void 0===this.isInline},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(e){var t=e.hideMarkdown;t&&this.hideMDChange$.next(t.currentValue)},e.prototype.ngAfterViewInit=function(){var e;return Object(i.b)(this,void 0,void 0,function(){var t=this;return Object(i.e)(this,function(n){return tinymce.init({readonly:this.readonly,selector:"#"+this.richTextId,content_style:this._isInline?"":"body { font-size: 14px }",fixed_toolbar_container:this.toolbarContainer,menubar:!1,inline:this._isInline,statusbar:!1,contextmenu:"table",table_toolbar:"tablefull tablewide | tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol | tablecopy tablecellbackgroundcolor",tablecellvalign:"middle",table_column_resizing:"resizetable",convert_urls:!1,paste_data_images:!0,image_dimensions:!1,images_reuse_filename:!0,link_title:!1,importcss_append:!0,autosave_ask_before_unload:!1,default_link_target:"_blank",base_url:"/knowledge-ui/tinymce",language:"zh"===localStorage.getItem("NG_TRANSLATE_LANG_KEY")?"zh_CN":"en_US",extended_valid_elements:"ce-story-structured-table[structured-table-info|story-structured-table-mode|structure-table-id],ce-article-attachment[article-attachment-info|article-attachment-mode|article-attachment-id|article-attachment-scene],ce-tinydesign-page[tinydesign-src|creat-time|tinydesign-mode],sketch-pad[graph-id|page-id|edit-mode|height|history-id],ce-tooltip[data-content|style]",plugins:this.editorService.initEditPlugins(this.richTextMode,this.richTextTools),toolbar:this.editorService.initEditToolbar(this.richTextMode,this.richTextTools,this.hideMarkdown),textpattern_patterns:this.editorService.initEditTextPattern(),block_formats:this.editorService.initEditBlockFormats(),fontsize_formats:this.editorService.initEditFontsizeFormats(),color_map:this.editorService.initEditColor(),codesample_languages:this.editorService.initCodeLanguage(),toolbar_mode:"floating",icons:"vision_editor_icons",paste_postprocess:function(e,n){n.node.querySelectorAll(".annotation-bg").forEach(function(e){e.classList.remove("annotation-bg")}),n.node.querySelectorAll("[data-highlight-id]").forEach(function(e){e.removeAttribute("data-highlight-id")}),n.node.querySelectorAll("[data-highlight-uuid]").forEach(function(e){e.removeAttribute("data-highlight-uuid")}),n.node.innerHTML=n.node.innerHTML.replace(/(^(?!href=")(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$)/g,"<a href='$1' target='_blank'>$1</a>"),t.buildTableElement(n)},lineheight_formats:"1 1.5 1.6 1.75 1.8 2 3 4 5",codesample_global_prismjs:!0,smart_paste:!1,quickbars_insert_toolbar:!1,quickbars_selection_toolbar:!1,quickbars_image_toolbar:!1,formats:{h1:{block:"h1",classes:"h1-fontsize",remove:"all"},h2:{block:"h2",classes:"h2-fontsize",remove:"all"},h3:{block:"h3",classes:"h3-fontsize",remove:"all"},h4:{block:"h4",classes:"h4-fontsize",remove:"all"},h5:{block:"h5",classes:"h5-fontsize",remove:"all"},h6:{block:"h6",classes:"h6-fontsize",remove:"all"}},style_formats:[{title:"h1",format:"h1"},{title:"h2",format:"h2"},{title:"h3",format:"h3"},{title:"h4",format:"h4"},{title:"h5",format:"h5"},{title:"h6",format:"h6"}],images_upload_handler:function(e,n,o,r){return Object(i.b)(t,void 0,void 0,function(){var t,r,a,c;return Object(i.e)(this,function(i){switch(i.label){case 0:return e.blob().size/1024/1024>50?(o("\u60a8\u7684\u56fe\u7247\u592a\u5927\u4e86\uff0c\u5f53\u524d\u7cfb\u7edf\u4ec5\u652f\u630150M\u4ee5\u4e0b\u7684\u56fe\u7247\u4e0a\u4f20",{remove:!0}),[2]):[4,g.d];case 1:t=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.editorService.upload_file_storage("image",t.user_name,e.blob(),e.filename()).toPromise()];case 3:return 200===(r=i.sent()).code?n(null===(c=r.data)||void 0===c?void 0:c.image_url):o(this.translate.instant(r.message),{remove:!0}),[3,5];case 4:return a=i.sent(),Object(V.b)(a),o(a.message,{remove:!0}),[3,5];case 5:return[2]}})})},setup:function(e){t.editor=e,t.workitemInfo&&t.workitemInfo.productId&&e.ui.registry.addMenuButton("editImage",{icon:"edit-images",tooltip:"CloudModeling",fetch:function(e){t.queryDiagramOptions(e)}}),t.structuredTableInfo&&e.ui.registry.addMenuButton("structuredtable",{icon:"structured-table-icon",tooltip:"\u7ed3\u6784\u5316\u8868\u683c",fetch:function(e){t.queryTableOptions(e)}}),t.tingDesignInfo&&e.ui.registry.addMenuButton("thirdpartyservice",{icon:"tiny-design-icon",tooltip:"\u7b2c\u4e09\u65b9\u670d\u52a1",fetch:function(e){t.queryServerOptions(e)}}),t.articleAttachmentInfo&&e.ui.registry.addButton("articleAttachment",{icon:"article-attachment-icon",tooltip:"\u63d2\u5165\u9644\u4ef6",onAction:function(){for(var e=document.querySelectorAll("ce-article-attachment")||[],n=0;n<e.length;n++)if("create"===e[n].getAttribute("article-attachment-scene"))return;window.hwa("trackStructEvent",{label:"\u4e0a\u4f20\u9644\u4ef6"}),t.editorService.queryArticleAttachmentNumber().subscribe(function(e){var n=JSON.stringify(t.articleAttachmentInfo);t.editor.insertContent("<ce-article-attachment article-attachment-info="+n+' article-attachment-mode="edit" article-attachment-id="'+e+'" article-attachment-scene="create"></ce-article-attachment>&nbsp;')},function(){})}}),t.hideMarkdown||e.ui.registry.addButton("toMd",{icon:"to-md",tooltip:"\u8f6c\u6362\u4e3aMarkdown",onAction:function(){t.handoverMarkdown.emit(null)},onSetup:function(e){e.setDisabled(t.hideMarkdown);var n=t.hideMDChange$.pipe(Object(l.a)(t.onDestroy$)).subscribe(function(t){e.setDisabled(t)});return function(){n.unsubscribe()}}}),t.saveContent&&e.ui.registry.addButton("saveContent",{icon:"save-content",tooltip:t.translate.instant("SAVE"),onAction:function(){t.saveContentEmit.emit(null)}}),t.sketchPadEnable&&t.workitemInfo&&e.ui.registry.addButton("sketchpad",{icon:"sketch-pad",tooltip:"\u753b\u677f",onAction:function(){t.editorService.createSketchPad("wiki",t.workitemInfo.sn).subscribe(function(e){e&&e.pages&&e.pages.length&&t.editor.insertContent('<br><sketch-pad graph-id="'+e.id+'" page-id="'+e.pages[0].id+'" edit-mode="edit"></sketch-pad>&nbsp;')},function(){})}}),e.on("change",function(){t.richTextOnChange.emit({initChange:t.richTextEditorInit})}),e.on("keydown",function(t){9==t.keyCode&&(e.execCommand(t.shiftKey?"Outdent":"Indent"),t.preventDefault(),t.stopPropagation())}),e.on("mousedown",function(){t.focusOnEditor.emit()}),e.on("SetContent",function(){tinymce.dom.DomQuery("tr",e.getBody()).removeAttr("data-mce-style"),setTimeout(function(){t.editorService.docTableView()})}),e.on("FormatApply",function(t){var n=t.format,i=e.selection.getNode();if("p"===n||/^h[1-6]$/.test(n)){for(;i&&i.tagName&&i.tagName.toLowerCase()!==n;)i=null==i?void 0:i.parentElement;if("p"===n)return i.removeAttribute("class"),void i.removeAttribute("id");/^h[1-6]$/.test(n)&&(i.classList.length>1&&(i.className=n+"-fontsize"),i.id||i.setAttribute("id",Object(g.k)("",8)))}}),e.on("TableModified",function(n){var i,o,r,a;t.resetTableHight(n.table);for(var c=n.table.rows,l=0;l<c.length;l++)if(""==c[l].innerHTML){var s=null===(o=null===(i=c[l])||void 0===i?void 0:i.previousSibling)||void 0===o?void 0:o.cells;if(null==s?void 0:s.length)for(var d=0;d<(null==s?void 0:s.length);d++)"TD"==(null===(r=s[d])||void 0===r?void 0:r.nodeName)&&(null===(a=s[d])||void 0===a?void 0:a.rowSpan)>1&&(s[d].rowSpan-=1);return c[l].parentNode.removeChild(c[l]),void e.execCommand("mceTableToggleClass",!1,"refresh-table")}}),e.on("ObjectSelected",function(e){var n,i;"TABLE"==e.target.nodeName&&(t.tableDragDom||document.querySelectorAll('[oncontextmenu="return false"]').forEach(function(e){var n;"BODY"==(null===(n=null==e?void 0:e.parentNode)||void 0===n?void 0:n.nodeName)&&(t.tableDragDom=e)}),"hidden"==(null===(i=null===(n=t.tableDragDom)||void 0===n?void 0:n.style)||void 0===i?void 0:i.visibility)&&(t.tableDragDom.style.visibility="visible"))})},init_instance_callback:function(e){t.editor=e,t.description&&e.setContent(t.description),e.undoManager.clear(),e.save(),e.execCommand("selectAll"),t.richTextEditorInit=!1,e.selection.getRng().collapse(!1),e.focus(),t.initInstanceCallback.emit(),setTimeout(function(){if(document.getElementById(t.richTextId)){setTimeout(function(){t.addListenerToCloudModelingImages()},300);var e=function(e){e.stopPropagation(),e.stopImmediatePropagation()};t.onDestroy$.subscribe(function(){t.ele.nativeElement.removeEventListener("focusin",e),t.ele.nativeElement.removeEventListener("focus",e),t.ele.nativeElement.removeEventListener("drop",n)}),t.ele.nativeElement.addEventListener("focusin",e,{capture:!0}),t.ele.nativeElement.addEventListener("focus",e,{capture:!0});var n=function(e){setTimeout(function(){t.addListenerToCloudModelingImages.apply(t)},300)};t.ele.nativeElement.addEventListener("drop",n),t.imgAddEvent()}})}}),(null===(e=this.tableConfigInfo)||void 0===e?void 0:e.fullTable)&&(document.getElementById("doc-app").addEventListener("tinymce_table_full",this.tinymceTableFull.bind(this),!1),document.getElementById("doc-app").addEventListener("tinymce_table_wide",this.tinymceTableWide.bind(this),!1)),[2]})})},e.prototype.imgAddEvent=function(){var e=this,t=this.docContentWrapper.nativeElement.querySelectorAll("img");Array.from(t).forEach(function(t){t.hasAttribute("loading")&&"lazy"==t.loading&&(t.complete?e.emitLoaded():t.addEventListener("load",e.emitLoaded.bind(e)))})},e.prototype.emitLoaded=function(e){this.imgLoaded.emit(e)},e.prototype.tinymceTableWide=function(e){this.editorService.tinymceTableWide(e)},e.prototype.tinymceTableFull=function(e){this.editorService.tinymceTableFull(e),tinymce.activeEditor.execCommand("mceFullScreen"),this.fullTableEmit.emit(e)},e.prototype.removeSkecthPadHandler=function(e){var t=document.getElementById(this.richTextId).getElementsByTagName("sketch-pad");if(t.length)for(var n=0;n<t.length;n++){var i=t[n],o=i.getAttribute("page-id");if(o&&o==String(e.detail.pageId)&&i.parentNode){i.parentNode.removeChild(i);break}}},e.prototype.buildTableElement=function(e){e.node.querySelectorAll("table").forEach(function(e){var t=0;e.querySelectorAll("tr").forEach(function(e){t+=30}),e.style.height=t+"px"})},e.prototype.resetTableHight=function(e){e.style.height&&(e.style.height="auto",e.querySelectorAll("tr").forEach(function(e){var t=e.style.height;t&&e.querySelectorAll("td").forEach(function(e){e.rowSpan<=1&&e.style.height&&(e.style.height=t)})}))},e.prototype.queryTableOptions=function(e){var t,n=this,i=[];(null===(t=this.structuredTableInfo)||void 0===t?void 0:t.feture)&&this.editorService.queryTableInfoBySpace(this.structuredTableInfo.domainId,this.structuredTableInfo.category||"FEATURE_DECOMPOSITION").subscribe(function(t){t.length&&t.forEach(function(e){"FEATURE_DECOMPOSITION"===(null==e?void 0:e.category)&&i.push({type:"menuitem",text:"story"+n.translate.instant("TABLE_LIST",""),onAction:function(){n.createStructuredtable()}}),"COE_IMPROVEMENT_MEASURE"===(null==e?void 0:e.category)&&i.push({type:"menuitem",text:"\u6539\u8fdb\u63aa\u65bd",onAction:function(){n.createStructuredtable()}}),n.structuredTableInfo.feture.fetureTableCategory={id:e.id,category:e.category,number:e.number,valid:e.valid,title:e.title,relateObjects:e.relateObjects,assignedDomainType:e.assignedDomainType}}),e(i)},function(){})},e.prototype.queryServerOptions=function(e){var t=this;e([{type:"menuitem",text:"Tiny Design",onAction:function(){t.lnsertTinydesignLink()}}])},e.prototype.lnsertTinydesignLink=function(){var e=this;window.hwa("trackStructEvent",{label:"\u63d2\u5165Tiny Design"}),this.modal.create({nzContent:z,nzBodyStyle:{padding:"0"},nzFooter:null,nzWidth:500,nzClosable:!1}).afterClose.subscribe(function(t){e.insertTinydesign(t)})},e.prototype.insertTinydesign=function(e){var t=(new Date).getTime();this.editor.insertContent("<br><ce-tinydesign-page tinydesign-src="+e.url+" creat-time="+t+" tinydesign-mode=edit></ce-tinydesign-page>&nbsp;")},e.prototype.createStructuredtable=function(){var e,t,n,i=this;if("COE_IMPROVEMENT_MEASURE"===(null===(e=this.structuredTableInfo)||void 0===e?void 0:e.category)){var o=document.querySelectorAll("ce-story-structured-table")||[];if(o&&o.length||"\u7ea0\u6b63/\u6539\u8fdb\u63aa\u65bd"!=(null===(t=this.structuredTableInfo)||void 0===t?void 0:t.paragraphTitle))return}var r=[{title:"",assignedDomainId:this.structuredTableInfo.domainId,assignedDomainType:"DOMAIN",category:this.structuredTableInfo.feture.fetureTableCategory.category,relateObjects:[{relatedCategory:"COE_IMPROVEMENT_MEASURE"===(null===(n=this.structuredTableInfo)||void 0===n?void 0:n.category)?"COE":"FEATURE",relatedType:"CONTENT",relationType:"ENTITY_OBJECT",relatedNumber:this.structuredTableInfo.contentNumber}]}];this.editorService.createStructuredTable(r).subscribe(function(e){var t=JSON.stringify(i.structuredTableInfo);i.editor.insertContent("<br><ce-story-structured-table structured-table-info="+t+' structure-table-id="'+e[0].number+'" story-structured-table-mode="edit"></ce-story-structured-table><br>')},function(){})},e.prototype.queryDiagramOptions=function(e){var t=this,n=this.workitemInfo.productId;this.diagramOptions=[],this.editorService.queryAvailableModelOption(n).subscribe(function(n){if(n){t.spaceUUID=n.projectSpaceUUID;for(var o=n.oneLevel,r=n.twoLevel,a=[],c=0;c<o.length;c++){var l=o[c];if("UML"==(l=Object(i.a)(Object(i.a)({},l),{children:[]})).name){for(var s=0;s<r.length;s++)(d=r[s]).parentTypeUUID==l.uuid&&l.children.push(d);a.push(l)}else{for(s=0;s<r.length;s++){var d;(d=r[s]).parentTypeUUID==l.uuid&&l.children.push(d)}t.diagramOptions.push(l)}}a.length>0&&(t.diagramOptions=a.concat(t.diagramOptions));var p=[],u=t.diagramOptions.length;if(u>0){var m=function(e){var n=t.diagramOptions[e];p.push({type:"nestedmenuitem",text:n.name,getSubmenuItems:function(){return t.getSubmenuItemsFunc(n.children)}})};for(c=0;c<u;c++)m(c)}var g=[{type:"menuitem",text:t.translate.instant("INSERT_EXISTING_PICTURE",""),onAction:function(){t.openInsertPictureModal()}},{type:"nestedmenuitem",text:t.translate.instant("DRAWING",""),getSubmenuItems:function(){return p}}];e(g)}},function(){})},e.prototype.openInsertPictureModal=function(){var e=this;this.modal.create({nzContent:A,nzComponentParams:{workitemInfo:this.workitemInfo},nzBodyStyle:{padding:"0"},nzFooter:null,nzWidth:900,nzClosable:!1}).afterClose.subscribe(function(t){e.confirmFunc(t)})},e.prototype.getSubmenuItemsFunc=function(e){var t=this,n=[],i=e.length;if(i>0)for(var o=function(i){var o=e[i];n.push({type:"menuitem",text:o.name,onAction:function(){t.selectDiagramType(o)}})},r=0;r<i;r++)o(r);return n},e.prototype.selectDiagramType=function(e){this.openModelingEditPage(null,"create",{productId:this.workitemInfo.productId,sn:this.workitemInfo.sn,projectSpaceUUID:this.spaceUUID,itemName:this.workitemInfo.itemName,itemUrl:this.workitemInfo.itemUrl,description:"",diagramTypeUUID:e.uuid})},e.prototype.openModelingEditPage=function(e,t,n){this.resolve={mode:t=t||"edit",createOptions:n=n||{},imageElement:e?e.currentTarget:null,projectUUID:e?e.currentTarget.getAttribute("spaceuuid"):null,diagramUUID:e?e.currentTarget.getAttribute("diagramuuid"):null},this.isIframeShow=!0,clearTimeout(this.cloudModleingIframeCloseTimer)},e.prototype.addListenerToCloudModelingImages=function(){var e=document.getElementById(this.richTextId).getElementsByTagName("img"),t="cloudmodeling.gamma.tools.huawei.com",n=window.location.origin;(n.includes("clouddevops.huawei.com")||n.includes("wiki.his.huawei.com"))&&(t="cloudmodeling.tools.huawei.com");for(var i=0;i<e.length;i++){var o=e[i],r=o.dataset.href;r&&r.includes(t)&&this.cloudModelingImageHandler(r,o)}},e.prototype.cloudModelingImageHandler=function(e,t){var n=e.match(/projectspace\/detail\/(.*)\?/),i=e.match(/openedDiagramUUID\=(.*)\&/);n.length>0&&i.length>0&&(t.setAttribute("spaceUUID",n[1]),t.setAttribute("diagramUUID",i[1]),t.removeEventListener("click",this.openModelingEditPage.bind(this)),t.addEventListener("click",this.openModelingEditPage.bind(this)))},e.prototype.getIframeCloseData=function(e){var t=this;this.cloudModelingResultData=e,document.getElementById("cloud-modeling-iframe").contentWindow.postMessage("wiki-save-img-before-close-iframe",this.cloudModelingHost),clearTimeout(this.cloudModleingIframeCloseTimer),this.cloudModleingIframeCloseTimer=setTimeout(function(){t.isIframeShow&&t.closeIframeHandler()},2e3)},e.prototype.closeIframeHandler=function(){this.isIframeShow=!1,this.getIframeCloseDataHandler(this.cloudModelingResultData)},e.prototype.getIframeCloseDataHandler=function(e){var t=this;"create"==this.resolve.mode?this.editor.insertContent('<a href="'+e.openUrl+'" target="_blank"><img data-href="'+e.openUrl+'" src="'+e.imageUrl+'" '+(e.imageUrl?' _src="'+e.imageUrl+'" ':"")+"/></a>"):this.reloadCloudModelingImg(e),setTimeout(function(){t.addListenerToCloudModelingImages()},300)},e.prototype.reloadCloudModelingImg=function(e){var t=null==e?void 0:e.parentElement;t.innerHTML=t.innerHTML},e.prototype.refreshContent=function(e){this.editor&&this.editor.setContent(e)},e.prototype.insertContent=function(e){this.editor&&this.editor.insertContent(e)},e.prototype.insertTableRows=function(e){e&&e instanceof Array&&0!==e.length&&(this.editor.plugins.table.setClipboardRows(e),this.editor.execCommand("mceTablePasteRowAfter"))},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete(),this.richTextEditorInit=!0,window.removeEventListener("message",this.cloudModelingSaveImage,!1),window.removeEventListener("sketch-pad-delete",this.removeSkecthPadHandler),tinymce.remove(this.editor)},e.prototype.confirmFunc=function(e){var t=this;if(e){var n=e.imageObj;if(!n)return;this.editor.insertContent('<a href="'+n.openUrl+'" target="_blank"><img data-href="'+n.openUrl+'" src="'+n.imageUrl+'" '+(n.imageUrl?' _src="'+n.imageUrl+'" ':"")+"/></a>"),setTimeout(function(){t.addListenerToCloudModelingImages()},300)}},e.prototype.disableEditor=function(){this.docContentWrapper.nativeElement.setAttribute("contenteditable","false")},e.prototype.enableEditor=function(){this.docContentWrapper.nativeElement.setAttribute("contenteditable","true")},e.prototype.listenGLobalEvents=function(){var e=this,t=Object(L.a)("DisableEditorUndo",function(){e.editor.undoManager&&(e.editor.undoManager.clear(),e.editor.on("BeforeAddUndo",function(e){e.preventDefault()}))});this.onDestroy$.subscribe(function(){t.unListen()})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](C.d),o["\u0275\u0275directiveInject"](o.ElementRef))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["vision-rich-editor"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](j,1),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.docContentWrapper=n.first)},inputs:{richTextId:"richTextId",description:"description",richTextMode:"richTextMode",height:"height",isInline:"isInline",richTextTools:"richTextTools",workitemInfo:"workitemInfo",hideMarkdown:"hideMarkdown",toolbarContailerSelector:"toolbarContailerSelector",structuredTableInfo:"structuredTableInfo",saveContent:"saveContent",articleAttachmentInfo:"articleAttachmentInfo",tingDesignInfo:"tingDesignInfo",tableConfigInfo:"tableConfigInfo",sketchPadEnable:"sketchPadEnable",readonly:"readonly"},outputs:{richTextOnChange:"richTextOnChange",handoverMarkdown:"handoverMarkdown",focusOnEditor:"focusOnEditor",initInstanceCallback:"initInstanceCallback",tableEventEmit:"tableEventEmit",saveContentEmit:"saveContentEmit",fullTableEmit:"fullTableEmit",imgLoaded:"imgLoaded"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:6,vars:8,consts:[["id","doc-app"],[1,"toolbar"],[1,"box"],[1,"doc-cnt",3,"id"],["docContentWrapper",""],[3,"resolve","modelShowCloseChange",4,"ngIf"],[3,"resolve","modelShowCloseChange"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275element"](3,"div",3,4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,U,1,1,"cloud-modeling-iframe",5)),2&e&&(o["\u0275\u0275classMap"](t.richTextId+"-container"),o["\u0275\u0275advance"](3),o["\u0275\u0275classMap"](t.richTextId),o["\u0275\u0275styleProp"]("height",t.height-40+"px"),o["\u0275\u0275property"]("id",t.richTextId),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isIframeShow))},directives:[x.n,R],styles:[".tox-tinymce.tox-tinymce{border:none}.tox.tox{display:flex!important}.tox.tox .tox-toolbar__overflow{background:none}.tox.tox .tox-tbtn{width:30px;height:30px}.tox.tox .tox-tbtn.tox-tbtn--select{width:auto}.tox.tox .tox-tbtn.tox-tbtn--select .tox-tbtn__select-label{width:70px}.tox.tox .tox-tbtn.tox-split-button__chevron{width:16px}.tox.tox .tox-tbtn svg{fill:#888}.tox .tox-collection--list .tox-collection__group{min-width:130px!important}#doc-app{line-height:1.75;margin:0;font-size:16px;color:#494949;position:relative}#doc-app .toolbar{max-width:100%}#doc-app .tox .tox-toolbar{background:none}#doc-app .tox-tinymce-inline{visibility:visible!important}#doc-app .doc-cnt{overflow:auto;position:relative;padding:10px;word-break:break-word}#doc-app .doc-cnt p{text-indent:0}#doc-app .doc-cnt p img{filter:drop-shadow(rgba(0,0,0,.14) 0 0 4px);padding:6px}#doc-app .doc-cnt:focus{outline:0}#doc-app ::-webkit-scrollbar{width:8px;height:8px}#doc-app ::-webkit-scrollbar-thumb{border-radius:10px;background-color:#aaa}#doc-app ::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}#doc-app .h1-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h1-fontsize,#doc-app .h1-fontsize *{font-size:26px!important}#doc-app .h2-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h2-fontsize,#doc-app .h2-fontsize *{font-size:22px!important}#doc-app .h3-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h3-fontsize,#doc-app .h3-fontsize *{font-size:20px!important}#doc-app .h4-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h4-fontsize,#doc-app .h4-fontsize *{font-size:18px!important}#doc-app .h5-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h5-fontsize,#doc-app .h5-fontsize *,#doc-app .h6-fontsize{font-size:16px!important}#doc-app .h6-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h6-fontsize *{font-size:16px!important}#doc-app ol li,#doc-app p,#doc-app ul li{line-height:1.75;margin:0;font-size:16px;color:#494949;font-family:Huawei Sans}#doc-app li ol,#doc-app li ul{padding:0 0 0 20px}#doc-app td p{margin-bottom:0!important}#doc-app td img{max-width:100%}#doc-app td,#doc-app th{border:1px solid #ccc;padding:.4rem}#doc-app .doc-table-edit-scorll{overflow-x:auto;cursor:default;padding:3px}#doc-app .doc-table-edit-scorll>:nth-child(n){cursor:text}#doc-app .doc-table-active-full{position:fixed;width:100%;height:calc(100% - 60px);background-color:#fff;top:0;left:0;right:0;padding:0 10px 10px;display:block;overflow:scroll}#doc-app .tinymce-table-full-mode{position:fixed;z-index:99;background:#fff;cursor:pointer}#doc-app #back-full-table{cursor:pointer;padding:10px 0}#doc-app #back-full-table:hover{color:#23c6c8}#doc-app #back-full-table i{transform:rotate(90deg);display:inline-block}#doc-app #back-full-table span{margin-left:5px}#doc-app .doc-table-back-icon{padding:0 4px;font-size:20px}#doc-app img{max-width:100%}#doc-app ::-moz-selection{color:#494949}#doc-app ::selection{color:#494949}.app-doc-table-full{position:fixed!important;width:100%;top:0;left:0}"],encapsulation:2}),e}(),F=n("+2qM"),W=n("/0GP"),H=n.n(W),$=function(){function e(e,t,n){var i=this;this.emitService=e,this.translate=t,this.modal=n,this.switchToRTF=new o.EventEmitter,this.getMDContentHandler=new o.EventEmitter,this.saveContentEmit=new o.EventEmitter,this.vditorAfter=new o.EventEmitter,this.bodyCloseMenus=function(e){var t=i.filterHeadTagName(e),n=document.querySelectorAll(".vditor-hint");n.length&&n.forEach(function(n){n===e.target||t||(n.style.display="none")})},this.filterHeadTagName=function(e){var t=!1;return["BUTTON","svg","path"].includes(e.target.nodeName)&&"headings"===e.target.getAttribute("data-type")&&(t=!0),t}}return e.prototype.ngOnChanges=function(e){var t,n;"description"in e&&this.description!==(null===(t=this.vditor)||void 0===t?void 0:t.getValue())&&(null===(n=this.vditor)||void 0===n||n.setValue(this.description))},e.prototype.ngOnInit=function(){var e,t=this,n=document.body.clientWidth>1200?"sv":"ir";this.model=null===(e=document.getElementsByClassName("page")[0].classList)||void 0===e?void 0:e.contains("create-article-height"),this.vditor=new H.a("vditor",{toolbar:[{name:"save",tipPosition:"s",tip:this.translate.instant("SAVE"),icon:'<svg t="1646704022786" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11121" width="32" height="32"><path d="M1002.24 315.52L693.12 19.2c-13.44-12.16-30.72-19.2-48.64-19.2H69.76C31.36 0 0 31.36 0 69.76v884.48C0 992.64 31.36 1024 69.76 1024h884.48c38.4 0 69.76-31.36 69.76-69.76V366.08c0-19.2-7.68-37.76-21.76-50.56zM379.52 128h142.08v175.36H379.52V128z m323.84 768H314.88v-240.64h388.48V896zM896 896h-96.64V604.16c0-24.96-19.84-44.8-44.8-44.8H263.68c-24.96 0-44.8 19.84-44.8 44.8V896H128V128h90.88v232.32c0 21.76 17.92 39.68 39.68 39.68h319.36c21.76 0 39.68-17.92 39.68-39.68V128h3.84L896 390.4V896z" fill="#666666" p-id="11122"></path></svg>',click:function(){t.saveContentEmit.emit()}},"headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|",{name:"upload",tip:this.translate.instant("UPLOAD_IMG")},"table","|","undo","redo","|","edit-mode",{name:"sponsor",tipPosition:"s",tip:this.translate.instant("TOGGLE_RICH_TEXT_EDITOR"),icon:'<svg t="1646463844331" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11121" width="32" height="32"><path d="M985.6 831.36H38.4c-21.12 0-38.4 17.28-38.4 38.4v51.2c0 21.12 17.28 38.4 38.4 38.4h947.2c21.12 0 38.4-17.28 38.4-38.4v-51.2c0-21.12-17.28-38.4-38.4-38.4zM42.88 197.12h191.36v490.88c0 23.68 19.2 42.88 42.88 42.88h41.6c23.68 0 42.88-19.2 42.88-42.88V197.12h191.36c23.68 0 42.88-19.2 42.88-42.88v-41.6c0-23.68-19.2-42.88-42.88-42.88H42.88c-23.68-0.64-42.88 19.2-42.88 42.88v41.6c0 23.68 19.2 42.88 42.88 42.88zM981.12 603.52h-293.12c-23.68 0-42.88 19.2-42.88 42.88v41.6c0 23.68 19.2 42.88 42.88 42.88h293.12c23.68 0 42.88-19.2 42.88-42.88v-41.6c0-23.68-19.2-42.88-42.88-42.88zM981.12 69.12h-293.12c-23.68 0-42.88 19.2-42.88 42.88v41.6c0 23.68 19.2 42.88 42.88 42.88h293.12c23.68 0 42.88-19.2 42.88-42.88v-40.96c0-23.68-19.2-43.52-42.88-43.52zM981.12 336.64h-293.12c-23.68 0-42.88 19.2-42.88 42.88v41.6c0 23.68 19.2 42.88 42.88 42.88h293.12c23.68 0 42.88-19.2 42.88-42.88v-41.6c0-23.68-19.2-42.88-42.88-42.88z" fill="#666666" p-id="11122"></path></svg>',click:function(){var e=t.vditor.getValue();marked(e)?t.modal.warning({nzTitle:t.translate.instant("TIPS_SAMPLE"),nzContent:t.translate.instant("TOGGLE_EDITOR_TIPS"),nzOkText:null,nzCancelText:t.translate.instant("TIP_BUTTON_KNOW"),nzClosable:!1,nzClassName:"convert-markdown-tips"}):t.switchToRTF.emit({type:"new-markdown",description:""})}}],toolbarConfig:{pin:!0},cache:{enable:!1},outline:{enable:!0,position:"left"},mode:n,preview:{actions:[],mode:"both",delay:0,theme:{current:"light",path:window.location.origin+"/knowledge-ui/vditor/dist/css/content-theme"}},value:this.description,cdn:window.location.origin+"/knowledge-ui/vditor",upload:{accept:"image/*",max:52428800,url:window.location.origin+"/vision-file-storage/api/file/upload?file_type=image&username="+this.username,success:function(e,n){var i=JSON.parse(n);t.vditor.insertValue("\n![image]("+i.data.image_url+")\n\n",!0)}},input:function(e){var n=t.vditor.getCurrentMode();t.getMDContentHandler.emit({type:"new-markdown-content",description:e,currentMode:n})},after:function(){t.vditorAfter.emit(),t.fixToolbarPosition(),t.emitService.emit({type:"new-markdown",currentMode:n})},editModeCallBack:function(e){t.emitService.emit({type:"markdown-mode-"+e}),t.fixToolbarPosition()}}),document.addEventListener("click",this.bodyCloseMenus)},e.prototype.fixToolbarPosition=function(){document.getElementsByClassName("vditor-outline")[0].classList.add("hidden");var e=document.getElementsByClassName("vditor-toolbar")[0];document.getElementById("newMdToolbar").append(e);var t=document.getElementById("vditorSVScroll"),n=document.getElementById("vditorReset");t&&t.classList.add("slimScrollBar"),n&&n.classList.add("slimScrollBar")},e.prototype.ngOnDestroy=function(){document.removeEventListener("click",this.bodyCloseMenus)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](b.a),o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](C.d))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["markdown-editor"]],inputs:{description:"description",username:"username"},outputs:{switchToRTF:"switchToRTF",getMDContentHandler:"getMDContentHandler",saveContentEmit:"saveContentEmit",vditorAfter:"vditorAfter"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[["id","vditor",3,"ngClass"]],template:function(e,t){1&e&&o["\u0275\u0275element"](0,"div",0),2&e&&o["\u0275\u0275property"]("ngClass",t.model?"create-markdown-height":"update-markdown-height")},directives:[x.l],styles:[".create-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 126px)}.update-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 164px)}[_nghost-%COMP%]     .vditor-toolbar{background-color:#fff;border-bottom:0}[_nghost-%COMP%]     .vditor, [_nghost-%COMP%]     .vditor-ir pre.vditor-reset{border:none}[_nghost-%COMP%]     .vditor-sv{background-color:#fff}[_nghost-%COMP%]     .vditor-toolbar--pin{padding-left:0!important}[_nghost-%COMP%]     .vditor-toolbar__divider{position:relative;top:3px}[_nghost-%COMP%]     .vditor-toolbar__item{top:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped{width:30px;height:30px;padding:5px;border-radius:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped:hover{background:#dee0e2;color:#222f3e}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped input{width:30px;height:30px}[_nghost-%COMP%]     .vditor-hint button:not(.vditor-menu--disabled):hover{background-color:#dee0e2!important;color:#676a6c!important}[_nghost-%COMP%]     .vditor-menu--current{color:#23c6c8!important}[_nghost-%COMP%]     .vditor-reset h1, [_nghost-%COMP%]     .vditor-reset h2{border-bottom:0}[_nghost-%COMP%]     .vditor-ir .vditor-reset{padding:10px 35px!important}[_nghost-%COMP%]     .vditor-ir pre.vditor-reset:focus{background-color:#fff}"]}),e}(),G=["richTextEditor"],q=["ConvertMarkdownWarnTemplate"],K=function(e){return{date:e}};function X(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275element"](1,"span",7),o["\u0275\u0275elementStart"](2,"div",8),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"span",9),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().revertCache()}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"span"),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"span",10),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().cancelCache()}),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](5,4,"RESTORE_CACHE",o["\u0275\u0275pureFunction1"](13,K,i.wikiArticleCacheData.operate_date))),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](8,7,"REVERT")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](11,9,"QUESTION_MARK")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](14,11,"DISCARD_DRAFT"),"?")}}function Y(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",11),o["\u0275\u0275elementStart"](1,"vision-rich-editor",12,13),o["\u0275\u0275listener"]("richTextOnChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onRichTextChanged(e)})("handoverMarkdown",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().switchEditor()})("focusOnEditor",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().focusOnEditorHandler()})("initInstanceCallback",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().initInstanceCallbackHandler()})("saveContentEmit",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().saveContentEmitHandler()})("fullTableEmit",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().fullTableEmitHandler(e)})("imgLoaded",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().imgLoadedHandler()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngStyle",i.styles),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("richTextMode",i.richTextMode)("richTextTools",i.richTextTools)("richTextId",i.richTextId)("isInline",i.isInline)("readonly",i.readonly)("description",i.description)("workitemInfo",i.workitemInfo)("height",i.editorHeight)("hideMarkdown",!i.modeSwitchEnabled)("toolbarContailerSelector",i.toolbarContailerSelector)("structuredTableInfo",i.structuredTableInfo)("saveContent",i.saveContent)("articleAttachmentInfo",i.articleAttachmentInfo)("tingDesignInfo",i.tingDesignInfo)("tableConfigInfo",i.tableConfigInfo)("sketchPadEnable",i.sketchPadEnable)}}var Q=function(e){return{height:e}};function J(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",11),o["\u0275\u0275elementStart"](1,"angular-markdown-editor",14),o["\u0275\u0275listener"]("placeholderChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().placeholderContent=e})("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().description=e})("onFullscreenExit",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().hidePreview()})("switchToRTF",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().switchEditor()})("focusOnEditor",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().focusOnEditorHandler()})("saveContentEmit",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().saveContentEmitHandler()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275styleProp"]("height",i.height+"px"),o["\u0275\u0275property"]("ngStyle",i.styles),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textareaId",i.richTextId+"-markdown")("options",i.editorOptions)("customStyle",o["\u0275\u0275pureFunction1"](9,Q,i.height-45+"px"))("placeholder",i.placeholderContent)("ngModel",i.description)("toolbarContailerSelector",i.toolbarContailerSelector)}}function Z(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"markdown-editor",15),o["\u0275\u0275listener"]("descriptionChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().description=e})("switchToRTF",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().switchRichTextEditor(e)})("getMDContentHandler",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getMDContentHandler(e)})("saveContentEmit",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().saveContentEmitHandler()})("vditorAfter",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().afterMDInit()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("description",i.description)("username",i.username)}}function ee(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"ol",16),o["\u0275\u0275elementStart"](4,"li"),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"li"),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"li"),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"li"),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"li"),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div"),o["\u0275\u0275text"](20),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,7,"MARKDOWN_WARN")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](6,9,"MARKDOWN_WARN:TABLE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,11,"MARKDOWN_WARN:STRUCTURED_TABLE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](12,13,"MARKDOWN_WARN:CODE_SAMPLE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](15,15,"MARKDOWN_WARN:VIDEO")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](18,17,"MARKDOWN_WARN:COMMENT")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](21,19,"MARKDOWN_WARN:CONFIRM")))}var te=function(){function e(e,t,n,i,c,l){var d=this;this.notification=e,this.visionEditorService=t,this.translate=n,this.modal=i,this.ref=c,this.emitService=l,this.modeSwitchEnabled=!0,this.readonly=!1,this.structuredTableInfo=null,this.saveContent=!1,this.articleAttachmentInfo=null,this.showCacheTips=!0,this.tingDesignInfo=!1,this.tableConfigInfo={},this.sketchPadEnable=!1,this.visionOnEditorChanged=new o.EventEmitter,this.getEditorContent=new o.EventEmitter,this.focusOnEditor=new o.EventEmitter,this.initInstanceCallback=new o.EventEmitter,this.saveContentEmit=new o.EventEmitter,this.fullTableEmit=new o.EventEmitter,this.imgLoaded=new o.EventEmitter,this.isLocalEditing=!1,this.changeObj={cacheInfoChange:null,valueChange:null},this.titleChange$=new s.a,this.contentChange$=new s.a,this.editorTypeChange$=new s.a,this.cacheTimerClear$=new s.a,this.onDestory$=new s.a,this.markdownEditorOnShow=function(e){var t=d.description,n="";void 0!==t&&(n=t),e.setContent(n),d.bsEditorInstance=e,d.fromVision||d.afterMDInit()},this.markdownEditorOnChange=function(e){e.setContent(e.getContent()),d.cacheInfo&&d.contentChange$.next(),d.visionOnEditorChanged.emit()},this.markdownEditorOnPaste=function(e){if(!Object(g.o)(e.$textarea.originalEvent)&&0==d.pasteCount){var t=e.$textarea.originalEvent.clipboardData,n=void 0,i=void 0,o=void 0;if(t){if(!(n=t.items))return;i=n[0],o=t.types||[];for(var c=0;c<o.length;c++)if("Files"===o[c]){i=n[c];break}if(i&&"file"===i.kind&&i.type.match(/^image\//i)){var l=i.getAsFile();if(l.size/1048576>50)d.notification.error("\u8bf7\u7c98\u8d34\u5c0f\u4e8e50M\u7684\u56fe\u7247","");else{var s,p=d.username;d.pasteCount++,s=Object(g.o)(l.name)?"image.png":l.name,d.visionEditorService.upload_file_storage("image",p,l,s).pipe(Object(r.a)(function(e){return e.data}),Object(a.a)(function(){d.pasteCount=0})).subscribe(function(t){var n,i;n=0==e.getSelection().length?e.__localize("image"):"image",null!==(i=t.image_url)&&""!==i&&(e.replaceSelection("\n!["+n+"]("+i+")\n\n"),e.setContent(e.getContent()),d.description=e.getContent(),d.visionOnEditorChanged.emit())},function(){})}}}}},this.markdownEditorOnDrop=function(e){if(!Object(g.o)(e.$textarea.originalEvent)&&0===d.dragCount){var t,n,i,o=e.$textarea.originalEvent.dataTransfer;if(o&&(t=o.items)){n=t[0],i=o.types||[];for(var c=0;c<i.length;c++)if("Files"===i[c]){n=t[c];break}if(n&&"file"===n.kind)if(n.type.match(/^image\//i)){var l=n.getAsFile();if(l.size/1048576>50)d.notification.error("\u8bf7\u7c98\u8d34\u5c0f\u4e8e50M\u7684\u56fe\u7247","");else{var s,p=d.username;d.dragCount++,s=Object(g.o)(l.name)?"image.png":l.name,d.visionEditorService.upload_file_storage("image",p,l,s).pipe(Object(r.a)(function(e){return e.data}),Object(a.a)(function(){d.dragCount=0})).subscribe(function(t){var n,i;n=0==e.getSelection().length?e.__localize("image"):"image",null!==(i=t.image_url)&&""!==i&&(e.replaceSelection("\n!["+n+"]("+i+")\n\n"),e.setContent(e.getContent()),d.description=e.getContent(),d.visionOnEditorChanged.emit())},function(){})}}else d.notification.error("\u4ec5\u652f\u6301\u62d6\u62fd\u56fe\u7247\u6587\u4ef6","")}}},this.getArticleOutlineDelay=Object(m.a)(function(e){d.emitService.emit({type:"new-markdown",currentMode:e.currentMode})},600)}return Object.defineProperty(e.prototype,"editorHeight",{get:function(){return this.height-(this.isLocalEditing?30:0)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;Object(g.o)(this.structuredTableInfo)||(this.description=this.visionEditorService.changeContentMode(this.description,"edit")),this.richTextMode=this.richTextMode||"normal",this.type=this.type||"rich-text",this.editorOptions=Object(i.a)(Object(i.a)({iconlibrary:"glyph"},this.markdownOptions),{saveContent:this.saveContent,enableSwitchRTF:this.modeSwitchEnabled,onShow:this.markdownEditorOnShow,onChange:this.markdownEditorOnChange,onPaste:this.markdownEditorOnPaste,onDrop:this.markdownEditorOnDrop}),this.pasteCount=0,this.dragCount=0,this.refreshContentEvent&&(this.refreshContentEventSubscription=this.refreshContentEvent.subscribe(function(t){e.refreshContent(t.refreshContent)})),this.insertContentEvent&&(this.insertContentEventSubscription=this.insertContentEvent.subscribe(function(t){e.insertContent(t.insertContent)})),this.insertTableRowsEvent&&(this.insertTableRowsEventSubscription=this.insertTableRowsEvent.subscribe(function(t){e.insertTableRows(t.insertTableRows)})),this.getContentEvent&&(this.getContentEventSubscription=this.getContentEvent.subscribe(function(t){if(e.visionEditorService.checkIsFullTable(),t.clearCache&&e.cacheTimerClear$.next(),"rich-text"==e.type){if(!e.richTextEditor)return;e.imgLazyLoadEvent(),e.getRTFContent().then(function(n){e.getEditorContent.emit({eventType:t.eventType?t.eventType:null,description:n.replace(/<div[^<>]*class="mce-resize-backdrop"[^<>]*>.*?<\/div>/g,""),type:e.type})})}else{var n=e.bsEditorInstance?e.bsEditorInstance.getContent():e.description;e.getEditorContent.emit({eventType:t.eventType?t.eventType:null,description:e.fromVision?e.description:n,type:e.type})}})),this.cacheInfo&&(this.initCache(),this.visionEditorService.queryArticleCache({target_sn:this.cacheInfo.sn?this.cacheInfo.sn:"",type:this.cacheInfo.type}).subscribe(function(t){t&&(e.wikiArticleCacheData=t,e.isLocalEditing=!0,e.editContent=e.description)},function(){}))},e.prototype.imgLazyLoadEvent=function(){this.richEditorDom||(this.richEditorDom=document.getElementById(this.richTextId)),Object(i.i)(this.richEditorDom.querySelectorAll("img")).forEach(function(e){(e.hasAttribute("loading")&&"lazy"!=e.loading||!e.hasAttribute("loading"))&&e.setAttribute("loading","lazy")})},e.prototype.ngOnChanges=function(e){var t=this;e.cacheInfo&&e.cacheInfo.currentValue&&e.cacheInfo.previousValue&&e.cacheInfo.currentValue!=e.cacheInfo.previousValue&&e.cacheInfo.currentValue.title&&e.cacheInfo.previousValue.title&&e.cacheInfo.currentValue.title!=e.cacheInfo.previousValue.title&&this.titleChange$.next(),e.type&&this.type&&setTimeout(function(){var e=document.getElementById("markdown"===t.type?t.richTextId+"-markdown":t.richTextId);e&&e.focus()},100)},e.prototype.ngOnDestroy=function(){this.refreshContentEventSubscription&&this.refreshContentEventSubscription.unsubscribe(),this.insertContentEventSubscription&&this.insertContentEventSubscription.unsubscribe(),this.insertTableRowsEventSubscription&&this.insertTableRowsEventSubscription.unsubscribe(),this.getContentEventSubscription&&this.getContentEventSubscription.unsubscribe(),this.getTimeoutSubscription&&this.getTimeoutSubscription.unsubscribe(),this.onDestory$.next(),this.onDestory$.complete()},e.prototype.switchEditor=function(){var e=this;this.editorTypeChange$.next(),"rich-text"==this.type?this.showConvertMarkdownWarn().then(function(){return e.getRTFContent()}).then(function(t){e.description=t?html2markdown(t):"",e.type="markdown",e.fromVision||e.visionOnEditorChanged.emit({type:e.type}),e.fromVision&&e.emitService.emit({type:"markdown-mode-init"})}):this.getMDContent().then(function(t){e.description=t?marked(t):"",e.type="rich-text",e.visionOnEditorChanged.emit({type:e.type})})},e.prototype.hidePreview=function(){this.bsEditorInstance&&this.bsEditorInstance.hidePreview&&this.bsEditorInstance.hidePreview()},e.prototype.afterMDInit=function(){this.initInstanceCallback.emit({type:"markdown"})},e.prototype.switchRichTextEditor=function(e){this.editorTypeChange$.next(),this.description=e.description?marked(e.description):"",this.type="rich-text",this.emitService.emit({type:"rich-text-mode"})},e.prototype.onRichTextChanged=function(e){!e.initChange&&this.cacheInfo&&this.contentChange$.next(),this.fromVision||this.visionOnEditorChanged.emit()},e.prototype.refreshContent=function(e){var t;"rich-text"==this.type?this.richTextEditor.refreshContent(e):null===(t=this.bsEditorInstance)||void 0===t||t.setContent(e)},e.prototype.insertContent=function(e){e&&this.richTextEditor&&this.richTextEditor.insertContent(e)},e.prototype.insertTableRows=function(e){e&&this.richTextEditor&&this.richTextEditor.insertTableRows(e)},e.prototype.revertCache=function(){var e=this;this.editContent==this.description?this.revertCacheConfirm():this.modal.warning({nzTitle:this.translate.instant("REVERT_CACHE_TIP"),nzOkText:this.translate.instant("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){e.revertCacheConfirm()},nzCancelText:this.translate.instant("COMMON_BUTTON_CANCLE"),nzOnCancel:function(){}})},e.prototype.revertCacheConfirm=function(){var e=this;this.judgeEditorType()!=this.wikiArticleCacheData.ui_source&&(this.wikiArticleCacheData.description=1==this.wikiArticleCacheData.ui_source?this.wikiArticleCacheData.description?html2markdown(this.wikiArticleCacheData.description):"":this.wikiArticleCacheData.description?marked(this.wikiArticleCacheData.description):""),this.isLocalEditing=!1,this.description=this.wikiArticleCacheData.description,this.getEditorContent.emit({description:this.description,type:this.type,title:this.wikiArticleCacheData.title}),setTimeout(function(){e.refreshContent(e.description)}),this.wikiArticleCacheData=null},e.prototype.cancelCache=function(){var e=this,t={target_sn:this.cacheInfo.sn,title:this.cacheInfo.title?this.cacheInfo.title:"",description:"",valid:-1,type:this.cacheInfo.type,ui_source:this.judgeEditorType()};this.visionEditorService.updateArticleCache(t).subscribe(function(t){e.wikiArticleCacheData=null,e.isLocalEditing=!1},function(){})},e.prototype.postCacheRequest=function(e){var t={target_sn:this.cacheInfo.sn,title:this.cacheInfo.title?this.cacheInfo.title:"",description:e,type:this.cacheInfo.type,ui_source:this.judgeEditorType()};return this.visionEditorService.updateArticleCache(t)},e.prototype.judgeEditorType=function(){return"rich-text"==this.type?1:2},e.prototype.initCache=function(){var e=this,t=Object(d.a)(this.cacheTimerClear$,this.contentChange$,this.titleChange$,this.editorTypeChange$);Object(d.a)(this.titleChange$,this.contentChange$).pipe(Object(c.a)(function(){return Object(p.a)(5e3).pipe(Object(l.a)(t),Object(c.a)(function(){return Object(u.a)(e.getContent())}),Object(c.a)(function(t){return e.postCacheRequest(t)}))}),Object(l.a)(this.onDestory$)).subscribe(function(){},function(){})},e.prototype.getContent=function(){return"rich-text"===this.type?this.getRTFContent():this.getMDContent()},e.prototype.getMDContent=function(){var e=this.bsEditorInstance;return Promise.resolve(e?e.getContent():this.description)},e.prototype.getRTFContent=function(){var e=this.richTextEditor;return e?(this.richTextEditor.editor.save(),new Promise(function(t){setTimeout(function(){var n=e.editor.getContent(),i=Object(g.g)(n,['div.author-tip[contenteditable="false"]']);t(i)})})):Promise.reject(new Error("Can not get rich-text editor content!"))},e.prototype.showConvertMarkdownWarn=function(){var e=this,t="",n=this.richTextEditor;return n&&(t=n.editor.getContent()),new Promise(function(n,i){t?e.modal.warning({nzTitle:e.translate.instant("TIPS_SAMPLE"),nzContent:e.fromVision?e.translate.instant("TOGGLE_EDITOR_TIPS"):e.convertMarkdownWarnTemplate,nzOkText:e.fromVision?null:e.translate.instant("COMMON_BUTTON_CONFIRM"),nzCancelText:e.translate.instant(e.fromVision?"TIP_BUTTON_KNOW":"COMMON_BUTTON_CANCLE"),nzClosable:!1,nzClassName:"convert-markdown-tips",nzOnOk:function(){return n()},nzOnCancel:function(){return i(new Error("Switch Cancled"))}}):n()})},e.prototype.focusOnEditorHandler=function(){this.focusOnEditor.emit({toolbarContainer:this.toolbarContailerSelector,richTextId:this.richTextId})},e.prototype.initInstanceCallbackHandler=function(){this.initInstanceCallback.emit({type:"instance"})},e.prototype.getMDContentHandler=function(e){this.description=e.description||"",this.contentChange$.next(),this.getArticleOutlineDelay(e)},e.prototype.saveContentEmitHandler=function(){this.saveContentEmit.emit()},e.prototype.fullTableEmitHandler=function(e){this.fullTableEmit.emit(e)},e.prototype.disableEditor=function(){"rich-text"===this.type&&this.richTextEditor.disableEditor()},e.prototype.enableEditor=function(){"rich-text"===this.type&&this.richTextEditor.enableEditor()},e.prototype.setContent=function(e){"rich-text"===this.type&&this.richTextEditor.editor.setContent(e)},e.prototype.imgLoadedHandler=function(){this.imgLoaded.emit()},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](h.b),o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](C.d),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](b.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["vision-editor"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](G,1),o["\u0275\u0275viewQuery"](q,1)),2&e){var n=void 0;o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.richTextEditor=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.convertMarkdownWarnTemplate=n.first)}},inputs:{richTextId:"richTextId",fromVision:"fromVision",description:"description",styles:"styles",height:"height",type:"type",modeSwitchEnabled:"modeSwitchEnabled",workitemInfo:"workitemInfo",username:"username",placeholderContent:"placeholderContent",refreshContentEvent:"refreshContentEvent",insertContentEvent:"insertContentEvent",insertTableRowsEvent:"insertTableRowsEvent",getContentEvent:"getContentEvent",richTextMode:"richTextMode",richTextTools:"richTextTools",cacheInfo:"cacheInfo",isInline:"isInline",readonly:"readonly",toolbarContailerSelector:"toolbarContailerSelector",markdownOptions:"markdownOptions",structuredTableInfo:"structuredTableInfo",saveContent:"saveContent",articleAttachmentInfo:"articleAttachmentInfo",showCacheTips:"showCacheTips",tingDesignInfo:"tingDesignInfo",tableConfigInfo:"tableConfigInfo",sketchPadEnable:"sketchPadEnable"},outputs:{visionOnEditorChanged:"visionOnEditorChanged",getEditorContent:"getEditorContent",focusOnEditor:"focusOnEditor",initInstanceCallback:"initInstanceCallback",saveContentEmit:"saveContentEmit",fullTableEmit:"fullTableEmit",imgLoaded:"imgLoaded"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:7,vars:4,consts:[[1,"MD-and-richtext-editor","position-r"],["class","localhost-info",4,"ngIf"],[3,"ngStyle",4,"ngIf"],[3,"height","ngStyle",4,"ngIf"],[4,"ngIf"],["ConvertMarkdownWarnTemplate",""],[1,"localhost-info"],[1,"fa","fa-exclamation-triangle","font-import-color"],[1,"font-import","block-inline"],[1,"edit-item","f-weight6","font-import","font-import-color",3,"click"],[1,"m-l-3","pull-right","pointer-cursor","font-import","f-14","give-up-draft",3,"click"],[3,"ngStyle"],[3,"richTextMode","richTextTools","richTextId","isInline","readonly","description","workitemInfo","height","hideMarkdown","toolbarContailerSelector","structuredTableInfo","saveContent","articleAttachmentInfo","tingDesignInfo","tableConfigInfo","sketchPadEnable","richTextOnChange","handoverMarkdown","focusOnEditor","initInstanceCallback","saveContentEmit","fullTableEmit","imgLoaded"],["richTextEditor",""],["rows","12","name","markdownText",3,"textareaId","options","customStyle","placeholder","ngModel","toolbarContailerSelector","placeholderChange","ngModelChange","onFullscreenExit","switchToRTF","focusOnEditor","saveContentEmit"],[3,"description","username","descriptionChange","switchToRTF","getMDContentHandler","saveContentEmit","vditorAfter"],[1,"mardown-warn-content"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,X,15,15,"div",1),o["\u0275\u0275template"](2,Y,3,17,"div",2),o["\u0275\u0275template"](3,J,2,11,"div",3),o["\u0275\u0275template"](4,Z,2,2,"div",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,ee,22,21,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showCacheTips&&t.isLocalEditing),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","rich-text"==t.type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","markdown"==t.type&&!t.fromVision),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","markdown"==t.type&&t.fromVision))},directives:[x.n,x.o,B,F.a,_.k,_.l,$],pipes:[v.b],styles:["[_nghost-%COMP%]     .md-editor.active{border:none;outline:0;box-shadow:0 0 0 0}[_nghost-%COMP%]     .md-editor>.md-header{background:#fff;padding-left:0}[_nghost-%COMP%]     .md-editor>.md-header .btn-default{color:#777}[_nghost-%COMP%]     .md-editor>.md-header .btn-group:first-child{margin-left:0}[_nghost-%COMP%]     .md-editor>.md-header [data-handler=bootstrap-markdown-cmdPreview]{line-height:1;color:#777;border-color:transparent!important;background-color:transparent!important;font-size:14px!important;box-shadow:none}[_nghost-%COMP%]     .md-editor>.md-header [data-handler=bootstrap-markdown-cmdPreview] .glyphicon-search{font-size:12px!important}[_nghost-%COMP%]     .md-editor>.md-header [data-handler=bootstrap-markdown-cmdPreview]:hover{background-color:#e6e6e6!important;color:#777!important}[_nghost-%COMP%]     .md-editor>.md-header [data-handler=bootstrap-markdown-cmdPreview].focus{color:#777!important}[_nghost-%COMP%]     .md-editor>.md-header [data-handler=bootstrap-markdown-cmdPreview].active{color:#23c6c8!important}[_nghost-%COMP%]     .md-editor{border:none}[_nghost-%COMP%]     .btn-default{border:none}[_nghost-%COMP%]     .md-editor{height:100%}.MD-and-richtext-editor[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]{position:relative;color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc;font-size:12px;padding:5px 5px 6px}.MD-and-richtext-editor[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]   .block-inline[_ngcontent-%COMP%]{display:inline}.MD-and-richtext-editor[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]   .font-import-color[_ngcontent-%COMP%]{color:#e45f5f}.MD-and-richtext-editor[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]   .font-import[_ngcontent-%COMP%]{padding-left:5px}.MD-and-richtext-editor[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]   .give-up-draft[_ngcontent-%COMP%]{padding-left:0;margin-left:0;text-decoration:underline;color:#909399}  .ephox-dragster-blocker,   .ephox-snooker-resizer-bar{position:fixed!important;z-index:999}.mardown-warn-content[_ngcontent-%COMP%]{padding:6px 26px}  .convert-markdown-tips .ant-modal-confirm-body .anticon{margin-top:2px}  .convert-markdown-tips .ant-modal-confirm-body .ant-modal-confirm-title{font-size:17px;font-weight:700}  .convert-markdown-tips .ant-modal-confirm-body .ant-modal-confirm-content{margin-top:12px}"]}),e}()},OTR8:function(e,t,n){"use strict";n.d(t,"a",function(){return ot});var i=n("mrSG"),o=n("R0Ic"),r=n("fXoL"),a=n("XNiG"),c=n("itXk"),l=n("l5mm"),s=n("PqYM"),d=n("VRyK"),p=n("LRne"),u=n("xgIS"),m=n("1G5W"),g=n("pLZG"),h=n("IzEk"),f=n("eIep"),v=n("6eBy"),C=n("hbEN"),b=n("fujP"),x=n("AytR"),y=n("JXZa"),w=n("AA4e"),O=n("fxjG"),_=n("otx/"),M=n("d/Su"),S=n("y7eE"),P=n("AWuS"),E=n("3OLy"),I=n("bNXi"),k=n("tyNb"),T=n("A/Mn"),A=n("sYmb"),D=n("UJq8"),z=n("dEAy"),L=n("/Kk4"),V=n("Fpfz"),N=n("ofXK"),R=n("vTH2"),j=n("cbLU"),U=n("nJia"),B=n("3Pt+"),F=n("oyxB"),W=n("fesf"),H=n("PTRe"),$=n("C2AL"),G=n("FwiY"),q=n("KupA");function K(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",8),r["\u0275\u0275element"](1,"span",9),r["\u0275\u0275elementEnd"]())}function X(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",10),r["\u0275\u0275element"](1,"img",11),r["\u0275\u0275elementEnd"]())}function Y(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275elementStart"](1,"span",13),r["\u0275\u0275listener"]("click",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().emitEvent("editItem",e)}),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"span",14),r["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("nzOnConfirm",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().emitEvent("deleteItem",e)})("nzOnCancel",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().cancel()}),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275pipe"](5,"translate"),r["\u0275\u0275element"](6,"span",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"span",16),r["\u0275\u0275listener"]("click",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().setReommendationFunc(e,!1)}),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"span",17),r["\u0275\u0275listener"]("click",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().setReommendationFunc(e,!0)}),r["\u0275\u0275pipe"](10,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hidden",!(i.authSuccessVal&&i.hoverStatus))("title",r["\u0275\u0275pipeBind1"](2,10,"UPDATE_TEMPLATE")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("hidden",!(i.authSuccessVal&&i.hoverStatus))("nzOkType","danger")("nzPopconfirmTitle",r["\u0275\u0275pipeBind1"](4,12,"ARE_YOU_SURE_DELETE"))("title",r["\u0275\u0275pipeBind1"](5,14,"COMMON_BUTTON_DELETE")),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("hidden",!(1==i.item.recommendation))("title",r["\u0275\u0275pipeBind1"](8,16,"CANCEL_RECOMMENDEDATION")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("hidden",!(1!=i.item.recommendation&&i.hoverStatus))("title",r["\u0275\u0275pipeBind1"](10,18,"RECOMMENDED"))}}var Q=function(){function e(e,t,n){this.knowledgeService=e,this.translate=t,this.notification=n,this.type="wiki",this.eventHandler=new r.EventEmitter,this.hoverStatus=!1,this.authSuccessVal=!1}return e.prototype.ngOnInit=function(){var e=this;window.communicationService.currentDomain$.pipe().subscribe(function(t){var n,i,o,r,a;t&&(e.currentDomainInfo=t,e.authSuccessVal="trustworthy_design"===(null===(n=e.item)||void 0===n?void 0:n.type)?(null===(i=e.currentDomainInfo)||void 0===i?void 0:i.id)===(null===(o=e.item)||void 0===o?void 0:o.assigned_domain)&&(null===(r=e.authSuccess)||void 0===r?void 0:r.canCreateCategory):null===(a=e.authSuccess)||void 0===a?void 0:a.templateAccess)})},e.prototype.emitEvent=function(e,t){t&&t.stopPropagation(),this.eventHandler.emit({type:e,item:this.item})},e.prototype.setReommendationFunc=function(e,t){var n=this;if(e.stopPropagation(),this.authSuccess||!this.showUpdate){if(this.authSuccess&&this.showUpdate){var i={number:this.item.number};i.recommendation=t?1:-1,this.knowledgeService.updateWikiTemplate(i).subscribe(function(e){n.emitEvent("wiki:template-item-reommendation-change"),n.notification.success(n.translate.instant("UPDATE_SUCCESS"),"")},function(){})}}else this.notification.error(this.translate.instant("NO_PERMISSION"),"")},e.prototype.cancel=function(){},e.prototype.mouseEventhandle=function(e,t){this.showUpdate&&(e.stopPropagation(),this.hoverStatus=t)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](T.b),r["\u0275\u0275directiveInject"](A.c),r["\u0275\u0275directiveInject"](I.b))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-article-template-item"]],inputs:{item:["templateItem","item"],type:"type",authSuccess:"authSuccess",showUpdate:"showUpdate"},outputs:{eventHandler:"eventHandler"},decls:9,vars:5,consts:[[1,"flex","flex-j-sb","template",3,"mouseover","mouseout"],[1,"inline-flex"],[1,"icon","m-l-12","m-r-12"],["class","template-icon team-text",4,"ngIf"],["class","template-icon-wrapper",4,"ngIf"],[1,"template-name","overfolw-eclipis",3,"title"],[1,"operation"],["class","flex-item-template-header",4,"ngIf"],[1,"template-icon","team-text"],[1,"fa","fa-file-text-o"],[1,"template-icon-wrapper"],["src","/knowledge-ui/assets/imgs/template-icon.png"],[1,"flex-item-template-header"],[1,"iconfont","icon-edit-simple","margin-right-8","icon-small","edit-margin-top-2",3,"hidden","title","click"],["nz-popconfirm","","nzPopconfirmPlacement","top",1,"f-18",3,"hidden","nzOkType","nzPopconfirmTitle","title","click","nzOnConfirm","nzOnCancel"],[1,"fa","fa-trash-o","margin-right-8","icon-big","trash-margin-top-5"],[1,"iconfont","icon-xing1","reommend-color","margin-right-8",3,"hidden","title","click"],[1,"iconfont","icon-xing","margin-right-8",3,"hidden","title","click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275listener"]("mouseover",function(e){return t.mouseEventhandle(e,!0)})("mouseout",function(e){return t.mouseEventhandle(e,!1)}),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275template"](3,K,2,0,"span",3),r["\u0275\u0275template"](4,X,2,0,"div",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",5),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",6),r["\u0275\u0275template"](8,Y,11,20,"div",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",null==t.item?null:t.item.blanking),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!(null!=t.item&&t.item.blanking)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("title",null==t.item?null:t.item.title),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",null==t.item?null:t.item.title," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!(null!=t.item&&t.item.blanking)))},directives:[N.n,q.a],pipes:[A.b],styles:[".template[_ngcontent-%COMP%]{height:56px;line-height:56px;cursor:pointer}.template[_ngcontent-%COMP%]:hover{background:#f5f5f5}.template-icon-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:4px 4px 4px 0;box-shadow:2px 2px rgba(0,0,0,.08)}.template-name[_ngcontent-%COMP%]{max-width:104px}.overfolw-eclipis[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.flex-item-template-header[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.flex-item-template-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 4px}.reommend-color[_ngcontent-%COMP%]{color:#eead0e}"]}),e}(),J=n("ZXE5"),Z=n("mXSW");function ee(e,t){1&e&&r["\u0275\u0275element"](0,"i",12)}var te=function(){return{position:"relative",top:"8px"}};function ne(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",14),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).createTemplate()}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275text"](2,"+"),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("nzTooltipTitle",r["\u0275\u0275pipeBind1"](1,2,"CREATE_NEW_TEMPLATE"))("nzTooltipOverlayStyle",r["\u0275\u0275pureFunction0"](4,te))}function ie(e,t){if(1&e&&r["\u0275\u0275template"](0,ne,3,5,"span",13),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngIf",null==n.authAccess?null:n.authAccess.templateAccess)}}function oe(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"app-article-template-item",17),r["\u0275\u0275listener"]("eventHandler",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).handlerEvent(e)})("click",function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"](2).clickTemplate(e)})("mouseenter",function(e){r["\u0275\u0275restoreView"](n);var i=t.$implicit;return r["\u0275\u0275nextContext"](2).mouseenterItem(e,i)})("mouseleave",function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"](2).mouseleaveItem(e)}),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("authSuccess",o.authAccess)("showUpdate",!0)("templateItem",i)("type","wiki")}}function re(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",15),r["\u0275\u0275template"](1,oe,1,4,"app-article-template-item",16),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",n.templateList)}}function ae(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",18),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"EMPTY_TIP")," "))}function ce(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"app-create-template",19),r["\u0275\u0275listener"]("templateEmitter",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().handlerEvent(e)}),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("model",i.templateObj.model)("articleTitle",i.templateObj.articleTitle)("articleUiSource",i.templateObj.articleUiSource)("articleDescription",i.templateObj.articleDescription)("number",i.templateObj.number)("currentDomain",i.currentDomain)}}function le(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",20,21),r["\u0275\u0275listener"]("mouseenter",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().mouseenterView()})("mouseleave",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().mouseleaveView()}),r["\u0275\u0275elementStart"](2,"div",22),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",23),r["\u0275\u0275element"](5,"html-render",24),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275reference"](1),o=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngStyle",o.templateViewStyle),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](null==o.selectedTemplate?null:o.selectedTemplate.title),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("docContent",null==o.selectedTemplate?null:o.selectedTemplate.description)("docType",1===(null==o.selectedTemplate?null:o.selectedTemplate.ui_source)?"rich-text":"markdown")("scrollInEL",i)}}var se=null,de=function(){function e(e,t,n,i,o){this.knowledgeService=e,this.authService=t,this.emitService=n,this.translate=i,this.notification=o,this.selectTemplate=new r.EventEmitter,this.templateCreateShow=new r.EventEmitter,this.templateList=[],this.authAccess={userEditPermission:!0,templateAccess:!1},this.allTemplates=[],this.searchKeywords="",this.templateObj={},this.templateViewStyle={}}return e.prototype.ngOnInit=function(){var e=this;this.emitServiceSub=this.emitService.eventEmit.subscribe(function(t){t&&"wiki:create-wiki-cancel"===t.type?e.getTemplate():!t||"delete-template-success"!==t.type&&"update-template-success"!==t.type&&"create-template-success"!==t.type?t&&"close-create-template"===t.type&&(e.templateObj.show=!1,e.templateCreateShow.emit(!1)):(e.templateObj.show=!1,e.templateCreateShow.emit(!1),e.getTemplate())}),this.getTemplate(),this.getAccess()},e.prototype.getTemplate=function(){var e=this;this.knowledgeService.getTemplate(this.currentDomain).subscribe(function(t){t&&(e.allTemplates=[],t.sort(function(e,t){return t.recommendation-e.recommendation}),t.forEach(function(t){e.allTemplates.push(t)}),e.search())})},e.prototype.getAccess=function(){var e=this;this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&e.authService.buildOperateAuth({currentDomain:e.currentDomain,currentUserId:t.user_id}).then(function(t){e.authAccess=t})})},e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe(),this.emitServiceSub.unsubscribe()},e.prototype.createTemplate=function(){this.templateCreateShow.emit(!0),this.templateObj={model:"create-template",articleTitle:"\u7a7a\u767d\u6a21\u677f",articleUiSource:"rich-text",articleDescription:"",show:!0}},e.prototype.handlerEvent=function(e){var t=e.type,n=e.item;switch(t){case"wiki:template-item-reommendation-change":this.templateObj.show=!1,this.templateCreateShow.emit(!1),this.getTemplate(),this.emitService.emit({type:t});break;case"editItem":this.templateObj={model:"update-template",articleTitle:n.title,articleUiSource:1===n.ui_source?"rich-text":"markdown",articleDescription:n.description,show:!0,number:n.number},this.templateCreateShow.emit(!0);break;case"deleteItem":var i=this.templateList.findIndex(function(e){return e.id===n.id});this.dangerConfirmFunc(n,i)}},e.prototype.clickTemplate=function(e){this.selectTemplate.emit(e)},e.prototype.dangerConfirmFunc=function(e,t){var n=this;this.knowledgeService.updateWikiTemplate({number:e.number,assigned_domain:this.currentDomain?this.currentDomain:"",valid:-1}).subscribe(function(e){n.getTemplate(),n.emitService.emit({type:"delete-template-success"}),n.notification.success(n.translate.instant("UPDATE_SUCCESS"),"")})},e.prototype.search=function(){var e=this;this.templateList=this.allTemplates.filter(function(t){return t.title.indexOf(e.searchKeywords)>-1})},e.prototype.mouseenterItem=function(e,t){t!==this.selectedTemplate&&se&&clearTimeout(se),this.selectedTemplate=t;var n=e.target.getBoundingClientRect(),i=n.left,o=document.body.offsetHeight-n.y;this.templateViewStyle=o-20<600?{left:i-400+"px",bottom:"20px"}:{left:i-400+"px",top:n.top+"px"}},e.prototype.mouseleaveItem=function(e){var t=this;e===this.selectedTemplate&&(se=setTimeout(function(){t.selectedTemplate=null},500))},e.prototype.mouseenterView=function(){se&&clearTimeout(se),se=null},e.prototype.mouseleaveView=function(){this.selectedTemplate=null},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](T.b),r["\u0275\u0275directiveInject"](W.a),r["\u0275\u0275directiveInject"](D.a),r["\u0275\u0275directiveInject"](A.c),r["\u0275\u0275directiveInject"](I.b))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-template-list"]],inputs:{currentDomain:"currentDomain"},outputs:{selectTemplate:"selectTemplate",templateCreateShow:"templateCreateShow"},decls:14,vars:7,consts:[[1,"template","full-height"],[1,"list","full-height"],[1,"search"],[1,"search-input"],[3,"nzPrefix","nzSuffix"],["type","text","nz-input","","placeholder","\u8bf7\u8f93\u5165\u60a8\u8981\u641c\u7d22\u7684\u5185\u5bb9",1,"my-search",3,"ngModel","ngModelChange"],["prefixIconSearch",""],["suffixIconSearch",""],["class","template-list m-t-10 slimScrollBar",4,"ngIf"],["class","empty t-a-c m-t-20",4,"ngIf"],[3,"model","articleTitle","articleUiSource","articleDescription","number","currentDomain","templateEmitter",4,"ngIf"],["class","template-view slimScrollBar p-20 position-r",3,"ngStyle","mouseenter","mouseleave",4,"ngIf"],["nz-icon","","nzType","search"],["class","add","nzTooltipPlacement","top","nz-button","","nz-tooltip","",3,"nzTooltipTitle","nzTooltipOverlayStyle","click",4,"ngIf"],["nzTooltipPlacement","top","nz-button","","nz-tooltip","",1,"add",3,"nzTooltipTitle","nzTooltipOverlayStyle","click"],[1,"template-list","m-t-10","slimScrollBar"],[3,"authSuccess","showUpdate","templateItem","type","eventHandler","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[3,"authSuccess","showUpdate","templateItem","type","eventHandler","click","mouseenter","mouseleave"],[1,"empty","t-a-c","m-t-20"],[3,"model","articleTitle","articleUiSource","articleDescription","number","currentDomain","templateEmitter"],[1,"template-view","slimScrollBar","p-20","position-r",3,"ngStyle","mouseenter","mouseleave"],["previewWrapper",""],[1,"title","text-ellipsis","m-b-8"],[1,"show-preview","flex-1"],[3,"docContent","docType","scrollInEL"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"nz-input-group",4),r["\u0275\u0275elementStart"](5,"input",5),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchKeywords=e})("ngModelChange",function(){return t.search()}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,ee,1,0,"ng-template",null,6,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](8,ie,1,1,"ng-template",null,7,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](10,re,2,1,"div",8),r["\u0275\u0275template"](11,ae,3,3,"div",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](12,ce,1,6,"app-create-template",10),r["\u0275\u0275template"](13,le,6,5,"div",11)),2&e){var n=r["\u0275\u0275reference"](7),i=r["\u0275\u0275reference"](9);r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("nzPrefix",n)("nzSuffix",i),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.searchKeywords),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.templateList.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0===t.templateList.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.templateObj.show),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.selectedTemplate)}},directives:[H.c,$.a,H.d,H.b,B.d,B.k,B.l,N.n,G.a,U.d,N.m,Q,J.a,N.o,Z.a],pipes:[A.b],styles:[".list[_ngcontent-%COMP%]{border:1px solid #dbdbdb;padding:20px 16px;border-radius:4px;height:100%;background:#fff;display:flex;flex-direction:column}.list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{flex:0 0 auto}.list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .my-search[_ngcontent-%COMP%]{height:24px;line-height:24px;margin-left:10px}.list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .clear-search[_ngcontent-%COMP%]{cursor:pointer}.list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:30px;color:#23c6c8;position:relative;top:-2px;cursor:pointer}.list[_ngcontent-%COMP%]   .template-list[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto}.list[_ngcontent-%COMP%]   .template-list[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]     .ant-input-affix-wrapper{border-radius:50px;height:30px;display:flex;align-items:center}[_nghost-%COMP%]     .template-list .part-flex-item{width:100%}.template-view[_ngcontent-%COMP%]{position:fixed;z-index:10;width:400px;height:600px;border:1px solid #ddd;overflow-y:auto;background:#fff;box-shadow:0 0 8px rgba(0,0,0,.02);border-radius:4px}.template-view[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;max-width:560px}.text-ellipsis[_ngcontent-%COMP%]{word-break:break-all;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),e}(),pe=n("p10+"),ue=n("+oEP"),me=n("xGaz"),ge=n("IVlV"),he=n("qAZ0"),fe=n("OzZK"),ve=n("RwU8"),Ce=["tagManager"],be=["categorySelector"],xe=["createArticleWrapper"],ye=["richTextRemoterScroll"],we=["wikiUnlockTips"],Oe=["additiveAttr"];function _e(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.title)}}function Me(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",55),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().closeFullTable()}),r["\u0275\u0275element"](1,"i",56),r["\u0275\u0275elementStart"](2,"span"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4,1,"BACK_ARTICLE")))}function Se(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",57),r["\u0275\u0275element"](1,"app-collab-users",58),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("collabUsers",null==n.collaboration?null:n.collaboration.collabUsers)}}var Pe=function(e){return{"padding-left":e}};function Ee(e,t){if(1&e&&r["\u0275\u0275element"](0,"div",61),2&e){var n=t.$implicit,i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275classProp"]("active-li-styl",n.titleId==i.scrollTitleId),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](3,Pe,3*n.indentationLevel+"px"))}}function Ie(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",59),r["\u0275\u0275template"](1,Ee,1,5,"div",60),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",n.articleOutlineArr)}}function ke(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",66),r["\u0275\u0275text"](1,"/"),r["\u0275\u0275elementEnd"]())}function Te(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",62),r["\u0275\u0275elementStart"](1,"div",63),r["\u0275\u0275elementStart"](2,"span",64),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](4,ke,2,0,"div",65),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.last,o=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("hidden",o.fullScreenCtrl),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("title",null==n?null:n.title),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",(null==n?null:n.title)||""," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!i)}}function Ae(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",67),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().articleTitle=e}),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275classProp"]("input-color",i.isSvMode),r["\u0275\u0275property"]("ngModel",i.articleTitle)("readonly",!0)}}function De(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",68),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onFullWidthToggle()}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"i",69),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](1,2,i.allCollapse?"FULL_SCREEN_EXIT":"FULL_SCREEN")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass",i.allCollapse?"icon-horizon-collapse":"icon-horizon-expand")}}function ze(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",70),r["\u0275\u0275elementStart"](1,"div",71),r["\u0275\u0275element"](2,"div",72),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){r["\u0275\u0275nextContext"]();var n=r["\u0275\u0275reference"](58);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("nzPopoverContent",n)}}function Le(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"vision-editor",73,74),r["\u0275\u0275listener"]("initInstanceCallback",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().afterEditorInit(e)})("visionOnEditorChanged",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().getArticleOutlineDelay()})("getEditorContent",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().descriptionChange(e)})("saveContentEmit",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().saveAutomatic()})("fullTableEmit",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().fullTableEmit(e)})("imgLoaded",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().imgLoadedHanlder(e)}),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("hidden",i.showPreview)("showCacheTips",!i.isCollaboration)("modeSwitchEnabled",!i.isCollaboration)("toolbarContailerSelector","#"+i.editorToolbarId)("richTextId",i.richTextEditorId)("type",i.articleUiSource)("insertContentEvent",i.insertContentEventSubject.asObservable())("insertTableRowsEvent",i.insertTableRowsEventSubject.asObservable())("description",i.changeStoryTableMode(i.articleDescription,"edit"))("cacheInfo",i.cacheInfo)("getContentEvent",i.getContentEventSubject.asObservable())("workitemInfo",i.workitemInfo)("username",i.currentUsername)("markdownOptions",i.mdOptions)("structuredTableInfo",i.structuredTableInfo&&i.structuredTableInfo.contentNumber?i.structuredTableInfo:null)("articleAttachmentInfo",i.articleAttachmentInfo)("tingDesignInfo",i.tingDesignInfo)("sketchPadEnable",i.isSketchPadEnable)("saveContent",!0)("tableConfigInfo",i.tableConfigInfo)("fromVision",!0)}}function Ve(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",75),r["\u0275\u0275element"](1,"html-render",76),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](),i=r["\u0275\u0275reference"](13);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("scrollInEL",i)("docContent",n.articleDescription)("docType",n.articleUiSource)}}function Ne(e,t){if(1&e&&r["\u0275\u0275element"](0,"article-wiki-comment",79),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("isCoe",!1)("creatorId",n.creatorId)("articleId",n.id)("onlyShowAnnotation",!0)}}function Re(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nz-tab",77),r["\u0275\u0275template"](1,Ne,1,4,"article-wiki-comment",78),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("nzTitle","\u6279\u6ce8"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","update-article"===n.model)}}function je(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nz-tab",41),r["\u0275\u0275elementStart"](1,"app-additive-attribute",80,81),r["\u0275\u0275listener"]("templateAttrObjChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().templateAttrObj=e})("updateAttributeValue",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().setAttributeValue(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("nzTitle","\u9644\u52a0\u5c5e\u6027"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("categoryId",i.categoryId)("wikiSn",i.sn||i.createArticleSn)("model",i.model)("articleDetails",i.articleDetails)("templateAttrObj",i.templateAttrObj)}}function Ue(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",82),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().handleTemplate(0)}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"i",83),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](1,1,"ANNOTATION"))}function Be(e,t){1&e&&r["\u0275\u0275element"](0,"i",87)}function Fe(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",84),r["\u0275\u0275element"](1,"nz-spin",85),r["\u0275\u0275template"](2,Be,1,0,"ng-template",null,86,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("nzIndicator",n)}}function We(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",88),r["\u0275\u0275elementStart"](1,"div",89),r["\u0275\u0275elementStart"](2,"div",90),r["\u0275\u0275element"](3,"i",91),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",92),r["\u0275\u0275elementStart"](5,"div",93),r["\u0275\u0275text"](6),r["\u0275\u0275pipe"](7,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",94),r["\u0275\u0275text"](9),r["\u0275\u0275pipe"](10,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](7,2,"COMMON_TIPS")),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](10,4,"COLLABORATION_ENTERING")))}function He(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",95),r["\u0275\u0275elementStart"](1,"div",96),r["\u0275\u0275element"](2,"i",97),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",98),r["\u0275\u0275elementStart"](4,"div",99),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",100),r["\u0275\u0275text"](8),r["\u0275\u0275pipe"](9,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",101),r["\u0275\u0275elementStart"](11,"button",102),r["\u0275\u0275listener"]("click",function(){return t.$implicit.close()}),r["\u0275\u0275text"](12),r["\u0275\u0275pipe"](13,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"button",103),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"]().unlockTipsOnCancle(e)}),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"button",104),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"]().unlockTipsOnSave(e)}),r["\u0275\u0275text"](18),r["\u0275\u0275pipe"](19,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.data;r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate3"](" ",null==i?null:i.name," ",null==i?null:i.username," ",r["\u0275\u0275pipeBind1"](6,7,"WIKI_REQUEST_UNLOCK")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](9,9,"WIKI_UNLOCK_TIPS")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](13,11,"WIKI_UNLOCK_REFUSE")),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](16,13,"WIKI_UNLOCK_NO_SAVE")),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](19,15,"WIKI_UNLOCK_SAVE"))}}function $e(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",105),r["\u0275\u0275elementStart"](1,"div",106),r["\u0275\u0275elementStart"](2,"div",107),r["\u0275\u0275text"](3,"\u77e5\u8bc6\u5e93\u6807\u7b7e\u5df2\u52a0\u81f3\u3010\u9644\u52a0\u5c5e\u6027\u3011\uff0c\u5728\u8fd9\u91cc\u60a8\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u6587\u7ae0\u7684\u5176\u4ed6\u9644\u52a0\u5c5e\u6027\u4fe1\u606f\u3002"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"button",108),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().additiveAttributeTip()}),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](6,1,"TIP_BUTTON_KNOW")))}var Ge,qe,Ke,Xe,Ye,Qe=function(e){return{zoom:e}},Je=function(e){return{visibility:e}},Ze=function(){return{padding:"0"}},et=function(){return{"margin-bottom":"10px"}},tt=function(e){return{width:e}},nt=x.a.GRAY_SKETCH_PAD_DOMAIN_IDS,it={"create-article":"\u521b\u5efa\u6587\u7ae0","update-article":"\u7f16\u8f91\u6587\u7ae0"},ot=function(e){function t(t,n,o,c,l,s,d,p,u,m,g,h){var f=e.call(this)||this;return f.wikiLockService=t,f.notification=n,f.router=o,f.knowledgeService=c,f.translate=l,f.emitService=s,f.modal=d,f.resizeObserver=p,f.cdr=u,f.ngZone=m,f.visionEditorService=g,f.activeRoute=h,f.model="create-article",f.articleTitle="\u7a7a\u767d\u6587\u6863",f.articleUiSource="rich-text",f.articleDescription="",f.sn="",f.id="",f.reopen=new r.EventEmitter,f.mdOptions=M.c,f.articleOutlineArr=[],f.num=1,f.editContentScroll=!0,f.editorStyle={opacity:1},f.editMarPaddHeight=20,f.editScrollMarPadd=10,f.scrollMarginPaddingVal=30,f.marginPaddingVal=50,f.articleMarginTop=100,f.articlePaddingVal=80,f.insertContentEventSubject=new a.a,f.insertTableRowsEventSubject=new a.a,f.getContentEventSubject=new a.a,f.hoverShowTip=!1,f.hiddenPreviewBtn=!1,f.showOutlineOverCtrl=!1,f.visibilityParams={},f.attributeValueObj={id:null,tag:[],wiki_id:"",wiki_sn:"",icon_image:"",join_calendar:!0,start_time:null,end_time:null},f.isFullTable=!1,f.fullTableDom=null,f.tableConfigInfo={fullTable:!0},f.outlineCollapse=!1,f.showTemplate=!0,f.activeTabIndex=2,f.showLoading=!1,f.showPreview=!1,f.getArticleInfo=!1,f.navigatioList=[],f.origin="article",f.templateCreateShow=!1,f.onDestroy$=new a.a,f.bindMarkdownEvent=!1,f.getArticleOutlineDelay=Object(C.a)(function(){f.getArticleOutline("article",f.articleTitle)},2e4),f.richTextEditorId="article",f.richTextRemoterShow=!1,f.richTextRemoterInnerWidth=100,f.isSketchPadEnable=!1,f.articleAttachmentInfo={sourceId:"",sourceType:"wiki_location"},f.tingDesignInfo=!0,f.isSvMode=!1,f.isMarkdownMode=!1,f.quickSaveCtrl=!1,f.saveBool=!1,f.additiveAttributeTipShow=!1,f.padSaveRecords=[],f.editWideModeSwitch=!0,f.isImgLazyLoaded=!1,f.templateAttrObj=null,f.descriptionChange$=new a.a,f.beforeConvert=function(){return Object(i.b)(f,void 0,void 0,function(){return Object(i.e)(this,function(e){switch(e.label){case 0:return this.visionEditor.disableEditor(),[4,this.saveBeforeConvert()];case 1:return[2,e.sent()]}})})},f.afterConvert=function(){return Object(i.b)(f,void 0,void 0,function(){return Object(i.e)(this,function(e){return this.enterCollaboration(),this.visionEditor.enableEditor(),[2]})})},f.imgLoadedHanlder=Object(C.a)(function(e){f.isImgLazyLoaded=!0,f.getArticleOutline("markdown"===f.articleUiSource?"vditorScrollParent":"article",f.articleTitle)},2e3),System.import("/shared-ui/knowledge-ui.ce.js"),f}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"isContentChanged",{get:function(){return Ge&&Ge!==this.articleTitle||qe&&qe!==this.articleUiSource||Ke&&Ke!==this.articleDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editorToolbarId",{get:function(){return this.richTextEditorId+"-toolbar"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allCollapse",{get:function(){return this.outlineCollapse&&!this.showTemplate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCollaboration",{get:function(){var e;return(null===(e=this.collaboration)||void 0===e?void 0:e.collaborationMode)===_.a.collaboration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reserveTitle",{get:function(){return this.translate.instant(this.outlineCollapse?"PIN_OUTLINE":"COLLAPSE_OUTLINE")},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e,t,n,i,o,r=this;null!==localStorage.getItem("normalWikiOutlineCollapse")&&(this.outlineCollapse="true"===localStorage.getItem("normalWikiOutlineCollapse")),null!==localStorage.getItem("normalWikiShowTemplate")&&(this.showTemplate="true"===localStorage.getItem("normalWikiShowTemplate"));var a=localStorage.getItem("wikiWideModeSwitch");a&&(this.editWideModeSwitch=JSON.parse(a)),this.additiveAttributeTipShow=!localStorage.getItem("additiveAttributeTip"),this.structuredTableInfo={domainId:this.currentDomain,feture:{},contentNumber:(null===(t=null===(e=this.articleDetails)||void 0===e?void 0:e.paragraphs)||void 0===t?void 0:t.length)?this.articleDetails.paragraphs[0].contentNumber:void 0},this.currentDomain&&nt.includes(this.currentDomain.toString())&&(this.isSketchPadEnable=!0),this.articleTitleChange(),this.title=it[this.model],this.cdr.detectChanges(),this.setTemplate(),this.currentUsername=window.communicationService.currentUser.user_name,"update-article"===this.model&&this.initNavigation(),this.emitService.eventEmit.subscribe(function(e){var t,n,i=document.getElementById("vditor");if(e.origin===r.origin)if("outline-position"===e.type)r.scrollTitleId=e.data.titleId,r.handlePositionActiveElement(i,e),r.router.navigate([],{relativeTo:r.activeRoute,queryParams:{title:"wikiArticleTitleId"===e.data.titleId?null:e.data.titleId},queryParamsHandling:"merge"});else if(e&&"after-component-change-description"===e.type){if(r.isImgLazyLoaded){for(var o=null===(t=null==r?void 0:r.articleOutlineArr)||void 0===t?void 0:t.length,a=0;a<o;a++){var c=r.articleOutlineArr[a],l=null==e?void 0:e.arr[a];c.startTop=null==l?void 0:l.startTop,c.endTop=null==l?void 0:l.endTop}r.isImgLazyLoaded=!1}else r.articleOutlineArr=e.arr;r.scrollTitleId=null===(n=e.arr[0])||void 0===n?void 0:n.titleId,i&&r.DepthTraversalCallback("vditorSVScroll"),setTimeout(function(){return r.cdr.detectChanges()})}r.updateOutline(e)}),(null===(n=this.articleDetails)||void 0===n?void 0:n.sn)&&(this.workitemInfo={productId:null===(i=this.articleDetails.assigned_domain)||void 0===i?void 0:i.id,sn:null===(o=this.articleDetails)||void 0===o?void 0:o.sn,itemName:"wiki-"+this.articleDetails.title,itemUrl:location.origin+"/domains/"+this.articleDetails.assigned_domain.id+"/wiki/"+this.articleDetails.sn},this.articleAttachmentInfo.sourceId=this.articleDetails.sn),this.getArticleInfo=!0,this.publicInsertContentListener=this.handleMessage.bind(this),window.parent!==window&&window.parent.postMessage("enterEditor",document.referrer),window.addEventListener("message",this.publicInsertContentListener,!1),"update-article"===this.model&&this.initSocketListen(),window.addEventListener("sketch-pad-save-callback",this.getPadSaveSuccess.bind(this)),this.requestArticleSn(),this.listenerContentWide()},t.prototype.initSocketListen=function(){Object(M.b)()?this.initCollaboration():this.initLockSocketListen()},t.prototype.initCollaboration=function(){var e=this;this.collaboration.disconnectInEdit$.pipe(Object(m.a)(this.onDestroy$)).subscribe(function(){e.visionEditor.disableEditor()})},t.prototype.enterCollaboration=function(){this.articleDescription="",this.collaboration.enterCollaboration(this.richTextEditorId,this.onDestroy$)},t.prototype.initLockSocketListen=function(){e.prototype.initSocketListen.call(this)},t.prototype.handlePositionActiveElement=function(e,t){if(e)this.positionMDActiveElement(t.data.titleId);else if("wikiArticleTitleId"===t.data.titleId){var n=document.getElementById("scroll-body");n&&(n.scrollTop=0)}else this.positionActiveElement(t.data.titleId)},t.prototype.requestArticleSn=function(){var e=this;"create-article"===this.model&&this.knowledgeService.requestArticleSn().subscribe(function(t){e.createArticleSn=t,e.workitemInfo={productId:e.currentDomain,sn:e.createArticleSn,itemName:"wiki-"+e.articleTitle,itemUrl:location.origin+"/domains/"+e.currentDomain+"/wiki/"+e.createArticleSn},e.articleAttachmentInfo.sourceId=e.createArticleSn},function(){})},t.prototype.updateOutline=function(e){var t=this;e&&"rich-text-mode"==e.type&&(this.isSvMode=!1,this.isMarkdownMode=!1,this.hiddenPreviewBtn=!1,document.getElementById("newMdToolbar").innerHTML=""),e&&"new-markdown"==e.type&&(this.isSvMode="sv"===e.currentMode,this.hiddenPreviewBtn=!0,this.outlineCollapse=!0,this.isMarkdownMode=!0,Object(S.c)("normalWikiOutlineCollapse",String(this.outlineCollapse)),this.setShowTemplate(!1),this.getArticleOutline("sv"===e.currentMode?"vditorScrollParent":"vditorReset",this.articleTitle)),e&&"markdown-mode-ir"==e.type&&(this.isSvMode=!1,this.DepthTraversalCallback("vditorReset")),e&&"markdown-mode-sv"==e.type&&(this.isSvMode=!0,this.DepthTraversalCallback("vditorSVScroll"),setTimeout(function(){t.DepthTraversalCallback("vditorScrollParent")},1e3)),e&&"wiki:doc-table-wide-edit"==e.type&&(this.editWideModeSwitch=e.obj,this.listenerContentWide())},t.prototype.listenerContentWide=function(){var e=document.getElementById("edit-content-box");e&&(e.clientWidth>760&&!this.editWideModeSwitch?e.classList.add("edit-artical-wide"):e.classList.remove("edit-artical-wide"))},t.prototype.DepthTraversalCallback=function(e){var t;this.num=1;var n=document.getElementById(e);(null===(t=null==n?void 0:n.childNodes)||void 0===t?void 0:t.length)&&this.DepthTraversal(n,e)},t.prototype.DepthTraversal=function(e,t){var n,i,o;if(e){if("vditorSVScroll"===t&&["h1","h2","h3","h4","h5","h6"].includes(e.className)&&""!=e.innerText.trim()&&(e.setAttribute("id","sv_"+(null===(n=this.articleOutlineArr[this.num])||void 0===n?void 0:n.titleId)),this.num+=1),["vditorReset","vditorScrollParent"].includes(t)&&["H1","H2","H3","H4","H5","H6"].includes(e.tagName)&&""!=e.innerText.trim()){var r="vditorReset"===t?"ir_"+(null===(i=this.articleOutlineArr[this.num])||void 0===i?void 0:i.titleId):null===(o=this.articleOutlineArr[this.num])||void 0===o?void 0:o.titleId;e.setAttribute("id",r),this.num+=1}if(e.childNodes&&e.childNodes.length)for(var a=0,c=e.childNodes.length;a<c;a++)this.DepthTraversal(e.childNodes[a],t)}},t.prototype.cancleEdit=function(){this.categorySelector.cancelCreate()},t.prototype.saveEdit=function(){this.categorySelector.save()},t.prototype.handleMessage=function(e){var t,n,i,o,r;if("rich-text"===this.articleUiSource&&e&&e.data){var a=e.data;if("insertContentToWiki"===a.event&&a.data instanceof Array)if((null===(r=null===(o=null===(i=null===(n=null===(t=this.visionEditor)||void 0===t?void 0:t.richTextEditor)||void 0===n?void 0:n.editor)||void 0===i?void 0:i.selection)||void 0===o?void 0:o.getNode())||void 0===r?void 0:r.nodeName)&&"TD"===this.visionEditor.richTextEditor.editor.selection.getNode().nodeName){var c=this.assembleTrs(a.data);this.insertTableRowsEventSubject.next({insertTableRows:c})}else{var l=this.assembleInsertHtml(a.data);this.insertContentEventSubject.next({insertContent:l})}}},t.prototype.assembleTrs=function(e){var t,n,o=this,r=[];try{for(var a=Object(i.j)(e),c=a.next();!c.done;c=a.next()){var l=c.value;if(l.data&&"table"===l.type){var s=l.data.body;s instanceof Array&&s.length>0&&s.forEach(function(e){var t=o.visionEditor.richTextEditor.editor.dom.create("tr");e.forEach(function(e){t.appendChild(o.visionEditor.richTextEditor.editor.dom.create("td",null,e||"&nbsp;"))}),r.push(t)})}}}catch(d){t={error:d}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r},t.prototype.assembleInsertHtml=function(e){var t,n,o="";try{for(var r=Object(i.j)(e),a=r.next();!a.done;a=r.next()){var c=a.value;if(!c.data)return;"text"===c.type?o+=this.assembleTextHtml(c):"table"===c.type&&(o+=this.assembleTableHtml(c.data))}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return o},t.prototype.assembleTableHtml=function(e){var t=this,n=e.head,i=e.body,o=0,r="";return n instanceof Array&&n.length>0&&(r=this.assembleTr(r,n,o=100/n.length)),i instanceof Array&&i.length>0&&(o=100/i[0].length,i.forEach(function(e){r=t.assembleTr(r,e,o)})),'<table style="border-collapse: collapse; width: 100%;" border="1">\n<tbody id="tbody">\n'+r+"</tbody>\n</table>"},t.prototype.assembleTr=function(e,t,n){return t instanceof Array&&0!==t.length?(e+="<tr>\n",t.forEach(function(t){e+='<td style="width: '+n+'%;">'+t+"</td>\n"}),e+="</tr>\n"):e},t.prototype.assembleTextHtml=function(e){var t="";return e.data&&e.data.content instanceof Array&&e.data.content.length>0&&e.data.content.forEach(function(e){t+="<p>"+e+"</p>"}),t},t.prototype.ngAfterViewInit=function(){var e,t=this;this.initEditor(),this.saveInitData(),Object(M.d)(this,this.createArticleWrapper,!1),setTimeout(function(){if(document.getElementById("scroll-body")&&document.getElementById("scroll-body").addEventListener("keydown",function(){t.ngZone.run(function(){return Object(M.a)(t.saveAutomatic.bind(t))}),t.visionEditorService.enterScroll()}),t.additiveAttributeTip){var e=document.getElementById("additiveAttributeTip");e&&e.click()}},1e3),(null===(e=this.collaboration)||void 0===e?void 0:e.collaborationMode)===_.a.collaboration&&this.enterCollaboration(),this.visionEditorService.hiddenTableDragele()},t.prototype.saveAutomatic=function(){this.isFullTable||(this.quickSaveCtrl=!0,this.buildTemplateAttribute()&&("update-article"==this.model?this.getContentEventSubject.next({clearCache:!1,eventType:"save-data"}):"create-article"==this.model&&(this.isCreatedOnce?this.getContentEventSubject.next({clearCache:!1,eventType:"save-data"}):this.categorySelector.showSelectCategoryDirectory=!0)))},t.prototype.fullTableEmit=function(e){this.fullTableDom=e.detail.tableDom,this.isFullTable=!this.isFullTable,document.getElementById("back-full-table").style.display="none"},t.prototype.closeFullTable=function(){this.visionEditorService.closeTableMode(this.fullTableDom,"edit"),this.isFullTable=!1},t.prototype.ngOnDestroy=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.e)(this,function(e){return this.onDestroy$.next(),this.onDestroy$.complete(),window.removeEventListener("message",this.publicInsertContentListener,!1),window.removeEventListener("sketch-pad-save-callback",this.getPadSaveSuccess),window.parent!==window&&window.parent.postMessage("leaveEditor",document.referrer),this.removeUnlockRequestTips(),[2]})})},t.prototype.setTemplate=function(){var e=this.selectedTemplate;e&&"select-template"===e.operateType&&(this.templateDetails=e,this.articleUiSource=Object(w.q)(e.ui_source),this.articleDescription=e.description,this.articleTitle=e.title,this.templateAttrObj=e)},t.prototype.saveInitData=function(){Ge=this.articleTitle,qe=this.articleUiSource,Ke=this.changeStoryTableMode(this.articleDescription,"edit"),Xe=this.categoryId,Ye=this.dictionaryId},t.prototype.initNavigation=function(){var e=this;Object(c.a)(this.knowledgeService.getArticleNavigation(this.currentDomain,this.sn),this.knowledgeService.getWikiCategories(this.currentDomain)).subscribe(function(t){var n=Object(i.g)(t,2),o=n[0],r=n[1].find(function(t){return t.id===Number(e.categoryId)});try{var a=JSON.parse(localStorage.getItem("currentDomain"));e.navigatioList=[{title:a.domainTitle}]}catch(c){}finally{e.navigatioList=Object(i.i)(e.navigatioList,[r],o)}},function(){})},t.prototype.saveArticleOrTemplate=function(e){var t=e.dictionaryId,n=e.parentSn;this.categoryId=this.categoryId||e.categoryId,this.dictionaryId=this.dictionaryId||t,this.parentSn=this.parentSn||n,this.visibilityParams=e.visibilityParams,this.buildTemplateAttribute()&&this.getContentEventSubject.next({clearCache:!0,eventType:"save-data"})},t.prototype.buildTemplateAttribute=function(){var e,t;if(!(null===(t=null===(e=this.additiveAttr.templateAttribute)||void 0===e?void 0:e.attributeList)||void 0===t?void 0:t.length))return!0;var n=this.additiveAttr.templateAttribute.attributeList||[];this.templateAttrParam={};for(var i=0;i<n.length;i++){var o=n[i];if(this.isEmptyTemplateAttribute(o))return this.notification.error(this.translate.instant(o.name),this.translate.instant("-16158")),!1;this.templateAttrParam[o.name]=Array.isArray(o.selectValue)?o.selectValue.join(","):o.selectValue}return!0},t.prototype.isEmptyTemplateAttribute=function(e){var t=e.selectValue;return"string"==typeof t&&(t=t.trim()),"number"==typeof t&&(t=String(t)),e.required&&Object(b.a)(t)},t.prototype.descriptionChange=function(e){this.articleDescription=e.description,this.articleUiSource=e.type,this.setRemoter(e),this.articleTitle=e.title?e.title:this.articleTitle;var t=e.eventType;if(this.descriptionChange$.next(t),"save-data"===t)switch(this.model){case"create-article":this.createArticle();break;case"update-article":this.updateArticle();break;default:return}else"all-pad-saved-update"===t?this.updateArticleAfterSaveSketchPad():"all-pad-saved-create"===t&&this.createArticleAfterPadSaved()},t.prototype.createFaildHandler=function(){this.quickSaveCtrl=!1,this.dictionaryId=null},t.prototype.createArticle=function(){if(!this.articleTitle)return this.notification.error(this.translate.instant("EMPTY_ARTICLE_TITLE"),""),void(this.quickSaveCtrl&&this.createFaildHandler());window.hwa("trackStructEvent",{label:"\u65b0\u5efa\u6587\u7ae0"}),this.showLoading=!0,this.padSaveRecords=[];for(var e=document.getElementById("article"),t=e&&e.getElementsByTagName("sketch-pad")||[],n=0;n<t.length;n++){var i=t[n];i.getAttribute("page-id")&&this.padSaveRecords.push(i.getAttribute("page-id"))}if(t.length){var o=new CustomEvent("sketch-pad-save",{detail:{scenario:"create",needSaveCallBack:!0}});window.dispatchEvent(o)}else this.createArticleAfterPadSaved()},t.prototype.createArticleAfterPadSaved=function(){var e,t=this,n=[Object(i.a)(Object(i.a)({title:this.articleTitle,description:this.changeStoryTableMode(this.articleDescription,"view"),category:"document",parent_id:Number(this.dictionaryId),kanban_id:this.categoryId,ui_source:"rich-text"===this.articleUiSource?1:2,assigned_domain_id:Number(this.currentDomain),sn:this.createArticleSn},this.visibilityParams),{classify:(null===(e=this.templateAttrObj)||void 0===e?void 0:e.type)||null})];this.knowledgeService.createArticleFloder(n).subscribe(function(e){var n=e.data,i=n.success,o=n.failed;if(200===e.code){if(i.length>0){var r=i[0],a=r.sn,c=r.id;t.sn=a,t.id=c,t.updateAttributeValue(t.quickSaveCtrl),t.quickSaveCtrl?(Ge=t.articleTitle,qe=t.articleUiSource,Ke=t.articleDescription,t.isCreatedOnce={type:"add-document",sn:a,parentSn:t.parentSn},t.notification.success(t.translate.instant("UPDATE_SUCCESS"),""),t.quickSaveCtrl=!1,t.model="update-article"):t.emitService.emit({type:"add-document",sn:a,parentSn:t.parentSn})}o.length>0&&(t.notification.error(t.translate.instant(String(o[0].code)),""),t.quickSaveCtrl?(t.quickSaveCtrl=!1,t.dictionaryId=null):(t.categoryId=Xe,t.dictionaryId=Ye))}},function(e){t.showLoading=!1})},Object.defineProperty(t.prototype,"articleBase",{get:function(){return{id:this.id,ui_source:"markdown"===this.articleUiSource?"2":"1",title:this.articleTitle}},enumerable:!1,configurable:!0}),t.prototype.saveBeforeConvert=function(){var e=this;return new Promise(function(t,n){var o="saveBeforeCollaboration";e.descriptionChange$.pipe(Object(m.a)(e.onDestroy$),Object(g.a)(function(e){return e===o}),Object(h.a)(1),Object(g.a)(function(){var t="rich-text"===e.articleUiSource;return t||n(new Error("COLLABORATION_FAILED:MARKDOWN_MODE")),t}),Object(f.a)(function(){var t=Object(i.a)(Object(i.a)({},e.articleBase),{description:e.changeStoryTableMode(e.articleDescription,"view")});try{return e.knowledgeService.saveArticle([t]).toPromise()}catch(o){Object(P.b)(o),n(new Error("SAVE_ARTICLE_FAILED"))}})).subscribe(function(i){var o=i.failed.find(function(e){return"description"===e.field});o?n(new Error(o.message||"\u534f\u540c\u524d\u4fdd\u5b58\u6587\u7ae0\u5185\u5bb9\u5931\u8d25")):t(e.articleDescription)},function(){}),e.getContentEventSubject.next({eventType:o})})},t.prototype.getPadSaveSuccess=function(e){var t=e.detail,n=t.scenario,i=t.pageId,o=t.height,r=t.historyId,a=document.getElementById("article"),c=a&&a.getElementsByTagName("sketch-pad")||[],l=Array.from(c).filter(function(e){return e.getAttribute("page-id")===String(i)});l.length&&(this.padSaveRecords=this.padSaveRecords.filter(function(e){return e!==String(i)}),l[0].setAttribute("height",o),l[0].setAttribute("history-id",r)),0===this.padSaveRecords.length&&this.getContentEventSubject.next({clearCache:!1,eventType:"all-pad-saved-"+n})},t.prototype.updateArticle=function(){this.showLoading=!0,this.padSaveRecords=[];for(var e=document.getElementById("article"),t=e&&e.getElementsByTagName("sketch-pad")||[],n=0;n<t.length;n++){var i=t[n];i.getAttribute("page-id")&&this.padSaveRecords.push(i.getAttribute("page-id"))}if(t.length){var o=new CustomEvent("sketch-pad-save",{detail:{scenario:"update",needSaveCallBack:!0}});window.dispatchEvent(o)}else this.updateArticleAfterSaveSketchPad()},t.prototype.updateArticleAfterSaveSketchPad=function(){var e,t,n,o,r,a,c,l,s,d,p,u,m=this,g=Object(i.a)(Object(i.a)({},this.articleBase),{description:this.changeStoryTableMode(this.articleDescription,"view"),classify:(null===(e=this.templateAttrObj)||void 0===e?void 0:e.type)||(null===(t=this.articleDetails)||void 0===t?void 0:t.classify)}),h=this.categorySelector.versionDetail;if(h){g.revision_record=h;var f=this.categorySelector.relatedWorkitem;f.length>0&&(h.relations=f.map(function(e){return{relation_id:null==e?void 0:e.id,relation_sn:null==e?void 0:e.number,relation_type:null==e?void 0:e.category}}))}this.emitService.emit({type:"update-article-attribute"});var v=this.attributeValueObj.tag,C=Object(i.a)({},this.attributeValueObj),b={wikiAdditionalAttribute:{id:C.id||null,wiki_id:null===(n=this.articleDetails)||void 0===n?void 0:n.id,wiki_sn:this.sn,icon_image:C.icon_image,join_calendar:C.join_calendar?1:0,start_time:C.start_time,end_time:C.end_time},tag:{wikiSn:this.sn,tagIds:v.map(function(e){return null==e?void 0:e.id})},wikiAttribute:{wikiId:null===(o=this.articleDetails)||void 0===o?void 0:o.id,wikiSn:(null===(r=this.articleDetails)||void 0===r?void 0:r.sn)||this.createArticleSn,attrId:null!==(l=null===(c=null===(a=this.additiveAttr)||void 0===a?void 0:a.rootCause)||void 0===c?void 0:c.resArr)&&void 0!==l?l:[]}};(null===(d=null===(s=this.additiveAttr.templateAttribute)||void 0===s?void 0:s.attributeList)||void 0===d?void 0:d.length)&&(b.templateAttribute=Object(i.a)({wiki_sn:this.sn,wiki_id:this.id,type:(null===(p=this.templateAttrObj)||void 0===p?void 0:p.type)||(null===(u=this.articleDetails)||void 0===u?void 0:u.classify)},this.templateAttrParam)),this.knowledgeService.updateWikiAttribute(b).subscribe(function(e){},function(){}),this.initWikiFailureMode(),this.knowledgeService.saveArticle([g]).subscribe(function(e){var t=e.success,n=e.unmodify;m.showLoading=!1,(null==t?void 0:t.length)||(null==n?void 0:n.length)?(m.quickSaveCtrl?(Ge=m.articleTitle,qe=m.articleUiSource,Ke=m.articleDescription,m.saveBool=!0,m.quickSaveCtrl=!1):m.emitService.emit({type:"article-update-finished",title:m.articleTitle,sn:m.sn}),m.notification.success(m.translate.instant("UPDATE_SUCCESS"),""),h&&m.emitService.emit({type:"wiki::baseline-version-create"})):(m.quickSaveCtrl&&(m.quickSaveCtrl=!1),m.notification.error(m.translate.instant("SAVEED_FAILED"),""))},function(e){m.showLoading=!1})},t.prototype.articleTitleChange=function(){this.cacheInfo="create-article"===this.model?{sn:"",title:this.articleTitle,type:"create-wiki"}:{sn:this.sn,title:this.articleTitle,type:"wiki"}},t.prototype.updateAttributeValue=function(e){var t,n,o,r,a,c,l,s=this;this.emitService.emit({type:"update-article-attribute"});var d=this.attributeValueObj.tag,p=Object(i.a)({},this.attributeValueObj),u={wikiAdditionalAttribute:{id:p.id||null,wiki_id:this.id,wiki_sn:this.sn,icon_image:p.icon_image,join_calendar:p.join_calendar?1:0,start_time:p.start_time,end_time:p.end_time},tag:{wikiSn:this.sn,tagIds:d.map(function(e){return e.id})},wikiAttribute:{wikiId:this.id,wikiSn:(null===(t=this.articleDetails)||void 0===t?void 0:t.sn)||this.createArticleSn,attrId:null!==(r=null===(o=null===(n=this.additiveAttr)||void 0===n?void 0:n.rootCause)||void 0===o?void 0:o.resArr)&&void 0!==r?r:[]}};(null===(c=null===(a=this.additiveAttr.templateAttribute)||void 0===a?void 0:a.attributeList)||void 0===c?void 0:c.length)&&(u.templateAttribute=Object(i.a)({wiki_sn:this.sn,wiki_id:this.id,type:(null===(l=this.templateAttrObj)||void 0===l?void 0:l.type)||""},this.templateAttrParam)),this.knowledgeService.updateWikiAttribute(u).subscribe(function(){return Object(i.b)(s,void 0,void 0,function(){return Object(i.e)(this,function(t){switch(t.label){case 0:return[4,this.initWikiFailureMode()];case 1:return t.sent(),this.showLoading=!1,e||(this.router.navigateByUrl("/domains/"+this.currentDomain+"/wiki/"+this.categoryId+"/"+this.sn),this.emitService.emit({type:"article-add-finished"})),[2]}})})},function(){s.showLoading=!1})},t.prototype.afterEditorInit=function(e){var t="markdown"===(null==e?void 0:e.type)?"vditorScrollParent":"article";this.collaboration&&this.collaboration.afterEditorInit(this.beforeConvert,this.afterConvert),this.getArticleOutline(t,this.articleTitle)},t.prototype.getArticleOutline=function(e,t){this.isMarkdownMode||this.isImgLazyLoaded||(this.articleOutlineArr=[]),this.emitService.emit({type:"article-outline-get-outline-arr",data:{id:e,articleRealTitle:t,firstChildDom:document.getElementById("edit-wrapper-first-child")},origin:this.origin,isImgLazyLoaded:this.isImgLazyLoaded})},t.prototype.initEditor=function(){var e=this;if("markdown"===this.articleUiSource&&this.getContentEventSubject.next({}),"rich-text"===this.articleUiSource){var t,n=0,i=1;if("update-article"===this.model){var o=document.getElementById("scrollParentArticle"),r=document.getElementById("wikiArticleTitleId");if(o){this.editorStyle={opacity:0};var a=r&&r.getBoundingClientRect().height;i=o.scrollHeight-a-this.marginPaddingVal,(n=o.scrollTop-a-this.scrollMarginPaddingVal)<0&&(n=0)}}var c=Object(l.a)(100).pipe(Object(v.a)(function(e){return Object(s.a)(2*e)})).subscribe(function(o){(t=document.getElementById("scroll-body"))&&(t.removeEventListener("scroll",null),t.addEventListener("scroll",e.articleEditScrollFunc.bind(e)),setTimeout(function(){var o=t.scrollHeight;t.scrollTop=n*o*o/(i*i),setTimeout(function(){e.editorStyle={opacity:1}})}),c.unsubscribe())})}},t.prototype.articleEditScrollFunc=function(){this.editContentScroll&&this.articleScroll()},t.prototype.articleScroll=function(){var e=this.articleOutlineArr.length;this.articleOutlineArr&&e>0&&document.getElementById("article")&&this.findFinishedDom(this.articleOutlineArr[e-1].titleId)},t.prototype.positionActiveElement=function(e){var t=this;this.editContentScroll=!1,this.parent||(this.parent=document.getElementById("scroll-body")),this.top||(this.top=document.getElementById("edit-wrapper-first-child")),this.element||(this.element=document.getElementById("edit-wrapper-last-child"));var n=this.top&&this.top.getBoundingClientRect(),i=this.element&&this.element.getBoundingClientRect(),o=document.getElementById(e).getBoundingClientRect(),r=this.parent.getBoundingClientRect(),a=Math.abs(o.top-n.top),c=i.bottom-n.top-r.height;a>c&&(a=c),this.parent.scrollTop=a+this.articleMarginTop,setTimeout(function(){t.editContentScroll=!0})},t.prototype.positionMDActiveElement=function(e){var t,n,i,o=document.getElementById("vditorSVScroll"),r=null===(t=document.getElementById("sv_"+e))||void 0===t?void 0:t.offsetTop;o.scrollTop=r;var a=document.getElementById("vditorScroll"),c=null===(n=document.getElementById(e))||void 0===n?void 0:n.offsetTop;setTimeout(function(){a.scrollTop=c});var l=document.getElementById("vditorReset"),s=null===(i=document.getElementById("ir_"+e))||void 0===i?void 0:i.offsetTop;l.scrollTop=s},t.prototype.findFinishedDom=function(e){if(document.getElementById(e)){this.articleScrollDom||(this.articleScrollDom=document.getElementById("article")),this.parentScrollTopDom||(this.parentScrollTopDom=document.getElementById("scroll-body"));for(var t=this.parentScrollTopDom.scrollTop,n=JSON.parse(localStorage.getItem("outlineActiveTitle")),i=t-this.articlePaddingVal,o=0;o<this.articleOutlineArr.length;o++){var r=this.articleOutlineArr[o];if(r.startTop<i&&i<r.endTop){if(n&&n.titleId!==r.titleId||!n){Object(S.c)("outlineActiveTitle",JSON.stringify(r));var a={type:"scroll-active-outline-title",data:r};this.scrollTitleId=a.data.titleId,this.emitService.emit(a)}return}}}},t.prototype.showOutlineOver=function(e){this.showOutlineOverCtrl=!0,"showTip"===e&&(this.hoverShowTip=!0)},t.prototype.showOutlineOut=function(e){this.showOutlineOverCtrl=!1,"showTip"===e&&(this.hoverShowTip=!1)},t.prototype.getChangedEditorType=function(e){(null==e?void 0:e.type)&&(this.articleUiSource=e.type,"rich-text"===this.articleUiSource&&this.initEditor())},t.prototype.outlineToggle=function(){this.outlineCollapse=!this.outlineCollapse,Object(S.c)("normalWikiOutlineCollapse",String(this.outlineCollapse))},t.prototype.selectTemplate=function(e){var t={"rich-text":1,markdown:2}[this.articleUiSource];if("\u7a7a\u767d\u6587\u6863"!==this.articleTitle||this.articleDescription)var n=this.setEditorContent.bind(this),o=this.setTemplateAttribute.bind(this),r=this.translate.instant.bind(this.translate),a=this.articleDescription,c=this.modal.create({nzTitle:"\u653e\u5f03\u5f53\u524d\u5185\u5bb9\u5417?",nzContent:null,nzWidth:500,nzClosable:!1,nzClassName:"confirm-cancel-modal",nzFooter:[{label:"\u8986\u76d6",onClick:function(){this.templateDetails=e,n(e.description,e,!0),o(e),c.close()}},{label:"\u8ffd\u52a0",onClick:function(){this.templateDetails=e;var r=a;r+=t===e.ui_source?e.description:(1===t?marked:html2markdown)(e.description),n(r,Object(i.a)(Object(i.a)({},e),{ui_source:t}),!1),o(e),c.close()}},{label:r("COMMON_BUTTON_CANCLE"),onClick:function(){c.close()}}]});else this.setEditorContent(e.description,e,!0),this.setTemplateAttribute(e)},t.prototype.setEditorContent=function(e,t,n){var i=this;n&&(this.articleTitle=t.title),this.articleDescription=e,this.articleUiSource=Object(w.q)(t.ui_source),Object(w.p)(function(){i.visionEditor.refreshContent(e),i.getContentEventSubject.next({})}),"update-article"===this.model&&this.articleTitleChange()},t.prototype.setShowTemplate=function(e){this.showTemplate=e,Object(S.c)("normalWikiShowTemplate",String(this.showTemplate))},t.prototype.preview=function(e){this.getContentEventSubject.next({eventType:"getContentForPreview"}),this.showPreview=e},t.prototype.onRemoterScroll=function(){var e=this.richTextRemoterScroll.nativeElement,t=this.richTextWrapper;t.scrollLeft=e.scrollLeft/(e.scrollWidth-e.clientWidth)*(t.scrollWidth-t.clientWidth)},t.prototype.setRemoter=function(e){var t=this;if("rich-text"===e.type){var n=document.querySelector("#"+this.richTextEditorId+".doc-cnt"),i=n.scrollWidth>n.clientWidth;this.richTextRemoterShow=i,this.richTextWrapper=n,i&&(this.wrapperScrollSubscription&&this.wrapperScrollSubscription.unsubscribe(),this.wrapperScrollSubscription=Object(d.a)(Object(p.a)(),this.resizeObserver.observe(n),Object(u.a)(window,"resize")).subscribe(function(){t.richTextRemoterInnerWidth=n.scrollWidth;var e=t.richTextRemoterScroll.nativeElement,i=n.getBoundingClientRect(),o=i.width;e.style.left=i.left+"px",e.style.width=o+"px",e.scrollLeft=n.scrollLeft}))}else this.richTextRemoterShow=!1},t.prototype.setTemplateAttribute=function(e){this.templateAttrObj=e,this.activeTabIndex=2},t.prototype.onFullWidthToggle=function(){this.allCollapse?(this.outlineCollapse=!1,this.showTemplate=!0,Object(S.c)("normalWikiOutlineCollapse",String(this.outlineCollapse)),Object(S.c)("normalWikiShowTemplate",String(this.showTemplate))):(this.outlineCollapse=!0,this.showTemplate=!1,Object(S.c)("normalWikiOutlineCollapse",String(this.outlineCollapse)),Object(S.c)("normalWikiShowTemplate",String(this.showTemplate)))},t.prototype.changeStoryTableMode=function(e,t){return e?this.visionEditorService.changeContentMode(e,t):e},t.prototype.handleTemplate=function(e){this.showTemplate=!0,this.activeTabIndex=e,Object(S.c)("normalWikiShowTemplate",String(this.showTemplate))},t.prototype.setAttributeValue=function(e){this.attributeValueObj=e},t.prototype.additiveAttributeTip=function(){this.additiveAttributeTipShow=!1,Object(S.c)("additiveAttributeTip",String(!0))},t.prototype.initWikiFailureMode=function(){var e,t,n,i,o,r;if(null===(t=null===(e=this.additiveAttr)||void 0===e?void 0:e.failureMode)||void 0===t?void 0:t.resArr){var a={wikiId:this.id,wikiSn:(null===(n=this.articleDetails)||void 0===n?void 0:n.sn)||this.createArticleSn,attrId:null!==(r=null===(o=null===(i=this.additiveAttr)||void 0===i?void 0:i.failureMode)||void 0===o?void 0:o.resArr)&&void 0!==r?r:[]};this.knowledgeService.updateWikiFailureMode(a).subscribe(function(e){},function(){})}},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](E.a),r["\u0275\u0275directiveInject"](I.b),r["\u0275\u0275directiveInject"](k.f),r["\u0275\u0275directiveInject"](T.b),r["\u0275\u0275directiveInject"](A.c),r["\u0275\u0275directiveInject"](D.a),r["\u0275\u0275directiveInject"](z.d),r["\u0275\u0275directiveInject"](L.a),r["\u0275\u0275directiveInject"](r.ChangeDetectorRef),r["\u0275\u0275directiveInject"](r.NgZone),r["\u0275\u0275directiveInject"](V.a),r["\u0275\u0275directiveInject"](k.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-article-create"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](Ce,1),r["\u0275\u0275viewQuery"](be,1),r["\u0275\u0275viewQuery"](xe,1),r["\u0275\u0275viewQuery"](ye,1),r["\u0275\u0275viewQuery"](y.a,1),r["\u0275\u0275viewQuery"](we,1),r["\u0275\u0275viewQuery"](Oe,1)),2&e){var n=void 0;r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.tagManager=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.categorySelector=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.createArticleWrapper=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.richTextRemoterScroll=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.visionEditor=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.wikiUnlockTipsTemplateRef=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.additiveAttr=n.first)}},inputs:{model:"model",articleTitle:"articleTitle",articleUiSource:"articleUiSource",articleDescription:"articleDescription",categoryId:"categoryId",parentSn:"parentSn",dictionaryId:"dictionaryId",currentDomain:"currentDomain",sn:"sn",id:"id",creatorId:"creatorId",selectedTemplate:"selectedTemplate",articleDetails:"articleDetails",collaboration:"collaboration",fullScreenCtrl:"fullScreenCtrl",fullScreenZoomSize:"fullScreenZoomSize",visibilityEditModel:"visibilityEditModel",categoryDetails:"categoryDetails",createFrom:"createFrom",showVisibilityEdit:"showVisibilityEdit"},outputs:{reopen:"reopen"},features:[r["\u0275\u0275ProvidersFeature"]([]),r["\u0275\u0275InheritDefinitionFeature"]],decls:59,vars:97,consts:[[1,"create-article-wrapper"],["createArticleWrapper",""],[1,"header-shadow",3,"ngStyle"],[1,"title","m-l-12"],[4,"ngIf"],["class","doc-full-table",3,"click",4,"ngIf"],["class","collab-users",4,"ngIf"],[1,"toolbar",3,"id","hidden"],["id","newMdToolbar",1,"vditor","md-toolbar"],[1,"buttons","m-r-12",3,"hidden"],[3,"model","categoryId","dictionaryId","currentDomain","contentChanged","showPreview","saveBool","isCreatedOnce","fullScreenCtrl","hiddenPreviewBtn","articleDetails","categoryDetails","createFrom","visibilityEditModel","showVisibilityEdit","selected","preview"],["categorySelector",""],["id","scroll-body",1,"doc-content","flex","slimScrollBar"],["scrollBody",""],[1,"left","m-l-12","position-r",3,"hidden","ngStyle","mouseover","mouseout"],[1,"article-outline-wrap","slimScrollBar"],["id","scrollParentOutline",1,"article-outline-show"],["id","topPositionOutline",1,"top-position-styl"],[3,"origin","needBorder","isEdit"],["id","bottomPositionOutline",1,"top-position-styl"],["nz-tooltip","",1,"outline-toggle-icon","cursor-pointer","reserve-span-show",3,"nzTooltipPlacement","nzTooltipTitle","click"],[1,"iconfont","icon","f-16","txt-999"],["class","article-hidden-wrapper",4,"ngIf"],[1,"center",3,"ngStyle"],[1,"knowledge-nav","text-omit",3,"ngStyle"],["class","knowledge-nav-item",3,"hidden",4,"ngFor","ngForOf"],["id","edit-content-box",1,"page",3,"ngClass"],[1,"title-input"],["type","text","placeholder","\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898...","maxlength","1000",1,"article-title","p-l-20","p-r-20","t-a-l",3,"ngModel","readonly","ngModelChange"],["type","text","maxlength","1000","class","article-title p-l-20 p-r-20 t-a-l",3,"ngModel","readonly","input-color","ngModelChange",4,"ngIf"],["class","collapse-all-icon cursor-pointer",3,"title","click",4,"ngIf"],["class","tag-pop-box",4,"ngIf"],["id","edit-wrapper-first-child",1,"position-child-div"],["class","create-article-container",3,"hidden","showCacheTips","modeSwitchEnabled","toolbarContailerSelector","richTextId","type","insertContentEvent","insertTableRowsEvent","description","cacheInfo","getContentEvent","workitemInfo","username","markdownOptions","structuredTableInfo","articleAttachmentInfo","tingDesignInfo","sketchPadEnable","saveContent","tableConfigInfo","fromVision","initInstanceCallback","visionOnEditorChanged","getEditorContent","saveContentEmit","fullTableEmit","imgLoaded",4,"ngIf"],["id","edit-wrapper-last-child",1,"position-child-div"],["class","show-preview p-20",4,"ngIf"],[1,"right","m-r-12",3,"hidden","ngStyle"],[1,"template-list","position-r"],[1,"iconfont","icon-to-right","position-a",3,"click"],[3,"nzSelectedIndex","nzSelectedIndexChange"],["class","comment-wrapper",3,"nzTitle",4,"ngIf"],[3,"nzTitle"],[3,"currentDomain","selectTemplate","templateCreateShow"],[3,"nzTitle",4,"ngIf"],[1,"small-btn-warp",3,"hidden","ngStyle"],[1,"small-btn","annotation-btn",3,"title","click"],[1,"iconfont","icon-template","f-14"],["class","small-btn template-btn",3,"title","click",4,"ngIf"],["class","loading-wrapper",4,"ngIf"],["class","converting-mask",4,"ngIf"],[1,"remote-scroll","slimScrollBar",3,"hidden","scroll"],["richTextRemoterScroll",""],[1,"remote-scroll-inner",3,"ngStyle"],["wikiUnlockTips",""],["popoverList",""],[1,"doc-full-table",3,"click"],[1,"iconfont","icon-icon-crown"],[1,"collab-users"],[3,"collabUsers"],[1,"article-hidden-wrapper"],["class","outline-style",3,"active-li-styl","ngStyle",4,"ngFor","ngForOf"],[1,"outline-style",3,"ngStyle"],[1,"knowledge-nav-item",3,"hidden"],[1,"nav-item-width","text-omit"],[3,"title"],["class","split-line-top",4,"ngIf"],[1,"split-line-top"],["type","text","maxlength","1000",1,"article-title","p-l-20","p-r-20","t-a-l",3,"ngModel","readonly","ngModelChange"],[1,"collapse-all-icon","cursor-pointer",3,"title","click"],[1,"iconfont","icon",3,"ngClass"],[1,"tag-pop-box"],[1,"popover-item"],["id","additiveAttributeTip","nz-popover","","nzPopoverTrigger","click","nzPopoverPlacement","left",1,"popover-item1",3,"nzPopoverContent"],[1,"create-article-container",3,"hidden","showCacheTips","modeSwitchEnabled","toolbarContailerSelector","richTextId","type","insertContentEvent","insertTableRowsEvent","description","cacheInfo","getContentEvent","workitemInfo","username","markdownOptions","structuredTableInfo","articleAttachmentInfo","tingDesignInfo","sketchPadEnable","saveContent","tableConfigInfo","fromVision","initInstanceCallback","visionOnEditorChanged","getEditorContent","saveContentEmit","fullTableEmit","imgLoaded"],["visionEditor",""],[1,"show-preview","p-20"],[3,"scrollInEL","docContent","docType"],[1,"comment-wrapper",3,"nzTitle"],[3,"isCoe","creatorId","articleId","onlyShowAnnotation",4,"ngIf"],[3,"isCoe","creatorId","articleId","onlyShowAnnotation"],[3,"categoryId","wikiSn","model","articleDetails","templateAttrObj","templateAttrObjChange","updateAttributeValue"],["additiveAttr",""],[1,"small-btn","template-btn",3,"title","click"],[1,"iconfont","icon-comment-left-tail","f-12"],[1,"loading-wrapper"],["nzSimple","",3,"nzIndicator"],["indicatorTemplate",""],["nz-icon","","nzType","loading",2,"font-size","24px"],[1,"converting-mask"],[1,"tips"],[1,"left"],[1,"iconfont","icon-info","info-icon"],[1,"right"],[1,"title"],[1,"detail"],[1,"unlock-tips"],[1,"tip-left"],[1,"iconfont","icon-warning","icon"],[1,"tip-right"],[1,"tip-title"],[1,"tip-content"],[1,"tip-buttons"],["nz-button","",1,"refuse",3,"click"],["nz-button","",1,"cancle",3,"click"],["nz-button","",1,"save-quit",3,"click"],[1,"menu-popover-list"],[1,"menu-popover-content"],[1,"menu-popover-div"],["nz-button","","nzType","primary",1,"menu-popover-submit",3,"click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0,1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275template"](4,_e,2,1,"div",4),r["\u0275\u0275template"](5,Me,5,3,"div",5),r["\u0275\u0275template"](6,Se,2,1,"div",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",7),r["\u0275\u0275element"](8,"div",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",9),r["\u0275\u0275elementStart"](10,"app-category-selector",10,11),r["\u0275\u0275listener"]("selected",function(e){return t.saveArticleOrTemplate(e)})("preview",function(e){return t.preview(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",12,13),r["\u0275\u0275elementStart"](14,"div",14),r["\u0275\u0275listener"]("mouseover",function(){return t.showOutlineOver("showTip")})("mouseout",function(){return t.showOutlineOut("showTip")}),r["\u0275\u0275elementStart"](15,"div",15),r["\u0275\u0275elementStart"](16,"div",16),r["\u0275\u0275element"](17,"div",17),r["\u0275\u0275element"](18,"article-outline",18),r["\u0275\u0275element"](19,"div",19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"span",20),r["\u0275\u0275listener"]("click",function(){return t.outlineToggle()}),r["\u0275\u0275element"](21,"i",21),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](22,Ie,2,1,"div",22),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",23),r["\u0275\u0275elementStart"](24,"div",24),r["\u0275\u0275template"](25,Te,5,4,"div",25),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",26),r["\u0275\u0275elementStart"](27,"div",27),r["\u0275\u0275elementStart"](28,"input",28),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.articleTitle=e})("ngModelChange",function(){return t.articleTitleChange()}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"div"),r["\u0275\u0275template"](30,Ae,1,4,"input",29),r["\u0275\u0275template"](31,De,3,4,"div",30),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](32,ze,3,1,"div",31),r["\u0275\u0275element"](33,"div",32),r["\u0275\u0275template"](34,Le,2,21,"vision-editor",33),r["\u0275\u0275element"](35,"div",34),r["\u0275\u0275template"](36,Ve,2,3,"div",35),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"div",36),r["\u0275\u0275elementStart"](38,"div",37),r["\u0275\u0275elementStart"](39,"span",38),r["\u0275\u0275listener"]("click",function(){return t.setShowTemplate(!1)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](40,"nz-tabset",39),r["\u0275\u0275listener"]("nzSelectedIndexChange",function(e){return t.activeTabIndex=e}),r["\u0275\u0275template"](41,Re,2,2,"nz-tab",40),r["\u0275\u0275elementStart"](42,"nz-tab",41),r["\u0275\u0275elementStart"](43,"app-template-list",42),r["\u0275\u0275listener"]("selectTemplate",function(e){return t.selectTemplate(e)})("templateCreateShow",function(e){return t.templateCreateShow=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](44,je,3,6,"nz-tab",43),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"div",44),r["\u0275\u0275elementStart"](46,"div",45),r["\u0275\u0275listener"]("click",function(){return t.handleTemplate(1)}),r["\u0275\u0275pipe"](47,"translate"),r["\u0275\u0275element"](48,"i",46),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](49,Ue,3,3,"div",47),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](50,Fe,4,1,"div",48),r["\u0275\u0275template"](51,We,11,6,"div",49),r["\u0275\u0275elementStart"](52,"div",50,51),r["\u0275\u0275listener"]("scroll",function(){return t.onRemoterScroll()}),r["\u0275\u0275element"](54,"div",52),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](55,He,20,17,"ng-template",null,53,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](57,$e,7,3,"ng-template",null,54,r["\u0275\u0275templateRefExtractor"])),2&e&&(r["\u0275\u0275styleProp"]("visibility",t.templateCreateShow?"hidden":"visible"),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](85,Qe,t.fullScreenCtrl?1/t.fullScreenZoomSize:null)),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("markdown-title",t.hiddenPreviewBtn),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.fullScreenCtrl&&!t.isFullTable),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.isFullTable),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",(null==t.collaboration?null:t.collaboration.collabUsers.length)>0),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("id",t.editorToolbarId)("hidden",t.showPreview),r["\u0275\u0275advance"](2),r["\u0275\u0275classProp"]("markdown-buttons",t.hiddenPreviewBtn),r["\u0275\u0275property"]("hidden",t.isFullTable),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("model",t.model)("categoryId",t.categoryId)("dictionaryId",t.dictionaryId)("currentDomain",t.currentDomain)("contentChanged",t.isContentChanged)("showPreview",t.showPreview)("saveBool",t.saveBool)("isCreatedOnce",t.isCreatedOnce)("fullScreenCtrl",t.fullScreenCtrl)("hiddenPreviewBtn",t.hiddenPreviewBtn)("articleDetails",t.articleDetails)("categoryDetails",t.categoryDetails)("createFrom",t.createFrom)("visibilityEditModel",t.visibilityEditModel)("showVisibilityEdit",t.showVisibilityEdit),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("hidden",t.fullScreenCtrl)("@outlineToggle",t.outlineCollapse?"closed":"open")("ngStyle",r["\u0275\u0275pureFunction1"](87,Je,t.showPreview?"hidden":"visible")),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("article-outline-index",t.outlineCollapse),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("reserve-span-show",t.outlineCollapse)("article-outline-show-wrapper",!t.outlineCollapse),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("origin",t.origin)("needBorder",!0)("isEdit",!0),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("nzTooltipTitle",t.reserveTitle),r["\u0275\u0275property"]("nzTooltipPlacement","top"),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](t.outlineCollapse?"icon-pin-down-left":"icon-pin-down"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.outlineCollapse),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngStyle",t.fullScreenCtrl?r["\u0275\u0275pureFunction0"](89,Ze):null),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("hidden",t.showPreview),r["\u0275\u0275property"]("ngStyle",t.fullScreenCtrl?r["\u0275\u0275pureFunction0"](90,et):null),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.navigatioList),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("page-style",t.isSvMode),r["\u0275\u0275property"]("ngClass","create-article"===t.model?"create-article-height":"update-article-height"),r["\u0275\u0275advance"](2),r["\u0275\u0275classProp"]("input-style",t.isSvMode),r["\u0275\u0275property"]("ngModel",t.articleTitle)("readonly",t.showPreview),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("sv-markdown-title",t.isSvMode),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.isSvMode),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.fullScreenCtrl),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.additiveAttributeTipShow),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.getArticleInfo&&t.workitemInfo),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.showPreview),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("hidden",!t.showTemplate),r["\u0275\u0275property"]("hidden",t.fullScreenCtrl)("ngStyle",r["\u0275\u0275pureFunction1"](91,Je,t.showPreview?"hidden":"visible")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("nzSelectedIndex",t.activeTabIndex),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","update-article"===t.model),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("nzTitle","\u6a21\u677f"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("currentDomain",t.currentDomain),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","create-article"===t.model||"update-article"===t.model),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("hidden",t.showTemplate),r["\u0275\u0275property"]("hidden",t.fullScreenCtrl)("ngStyle",r["\u0275\u0275pureFunction1"](93,Je,t.showPreview?"hidden":"visible")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](47,83,"TEMPLATE")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf","update-article"===t.model),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.showLoading),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==t.collaboration?null:t.collaboration.collaborationConverting),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hidden",!t.richTextRemoterShow),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](95,tt,t.richTextRemoterInnerWidth+"px")))},directives:[N.o,N.n,R.a,j.a,U.d,N.m,N.l,B.d,B.h,B.k,B.l,F.b,F.a,de,pe.a,ue.a,y.a,Z.a,me.a,ge.a,he.a,G.a,$.a,fe.a,ve.a],pipes:[A.b],styles:['.locking-tip-box[_ngcontent-%COMP%]{width:280px;background-color:#fff;padding:16px;display:flex;flex-direction:column;justify-content:space-between;border-radius:4px;box-shadow:0 0 6px rgba(0,0,0,.14);position:relative}.locking-tip-box[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%]{color:#5f5f5f;font-size:16px;margin-right:8px}.locking-tip-box[_ngcontent-%COMP%]   .tip-button[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:row-reverse}.locking-tip-box[_ngcontent-%COMP%]   .tip-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;font-size:14px;color:#fff;background-color:#23c6c8;border:none;padding:0 9px;height:28px}.locking-tip-box[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;color:rgba(0,0,0,.45);padding:8px;top:0;right:0}  .locking-tooltip .ant-tooltip-arrow .ant-tooltip-arrow-content{background-color:#fff}  .locking-tooltip .ant-tooltip-inner{padding:0;background-color:#fff;box-shadow:none}.reload-tips[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]{display:flex;padding:16px}.reload-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]{margin-right:12px;flex:0 0 auto}.reload-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:20px;color:#fa0}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]{flex:1 1 auto}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%]{font-size:16px;color:#333}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-content[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-content[_ngcontent-%COMP%]{color:#5f5f5f;font-size:14px;margin:8px 0}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:28px;line-height:28px;border-radius:4px;padding:0 11px;margin-right:12px}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.cancle[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.cancle[_ngcontent-%COMP%]{color:#23c6c8;border-color:#23c6c8}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.reload[_ngcontent-%COMP%], .reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.save-quit[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.reload[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.save-quit[_ngcontent-%COMP%]{color:#fff;border:none;background-color:#23c6c8}.wait-collab-tips[_ngcontent-%COMP%]{color:#5f5f5f;padding:18px 16px;background-color:#fff;font-size:12px;box-shadow:0 0 6px rgba(0,0,0,.14);border-radius:4px}  .notification-box.ant-notification-notice{padding:0}.create-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 126px)}.update-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 164px)}[_nghost-%COMP%]     .vditor-toolbar{background-color:#fff;border-bottom:0}[_nghost-%COMP%]     .vditor, [_nghost-%COMP%]     .vditor-ir pre.vditor-reset{border:none}[_nghost-%COMP%]     .vditor-sv{background-color:#fff}[_nghost-%COMP%]     .vditor-toolbar--pin{padding-left:0!important}[_nghost-%COMP%]     .vditor-toolbar__divider{position:relative;top:3px}[_nghost-%COMP%]     .vditor-toolbar__item{top:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped{width:30px;height:30px;padding:5px;border-radius:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped:hover{background:#dee0e2;color:#222f3e}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped input{width:30px;height:30px}[_nghost-%COMP%]     .vditor-hint button:not(.vditor-menu--disabled):hover{background-color:#dee0e2!important;color:#676a6c!important}[_nghost-%COMP%]     .vditor-menu--current{color:#23c6c8!important}[_nghost-%COMP%]     .vditor-reset h1, [_nghost-%COMP%]     .vditor-reset h2{border-bottom:0}[_nghost-%COMP%]     .vditor-ir .vditor-reset{padding:10px 35px!important}[_nghost-%COMP%]     .vditor-ir pre.vditor-reset:focus{background-color:#fff}[_nghost-%COMP%]     .ant-tabs-tab+.ant-tabs-tab{margin:0}[_nghost-%COMP%]     .toolbar .tox-editor-header{border:none}[_nghost-%COMP%]     .doc-cnt, [_nghost-%COMP%]     .md-editor textarea{min-height:900px}[_nghost-%COMP%]     .doc-cnt::-webkit-scrollbar{display:none}[_nghost-%COMP%]     .create-article-container .toolbar{position:fixed;top:10px;display:flex;justify-content:center;z-index:1}[_nghost-%COMP%]     .create-article-container .tox-toolbar__overflow{max-width:50px}[_nghost-%COMP%]     .create-article-container .box{height:100%}[_nghost-%COMP%]     .vditor-toolbar--pin{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info{position:fixed!important;top:50px;left:50%;transform:translateX(-50%);display:flex!important;justify-content:center;align-items:center;z-index:1;color:#8a6d3b;padding:2px 0;background-color:#fcf8e3;border-color:#faebcc;font-size:12px;height:36px}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info .fa-exclamation-triangle{margin-top:2px}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info .icon-cancel{margin-top:2px;padding-left:20px}.create-article-wrapper[_ngcontent-%COMP%]{overflow-y:hidden;z-index:99;position:fixed;left:0;right:0;top:0;bottom:0;overflow:hidden;background:#f9f9f9}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]{position:absolute;z-index:1;left:0;right:0;width:100%;height:50px;background:#fff;box-shadow:0 4px 6px rgba(0,0,0,.04)}.create-article-wrapper[_ngcontent-%COMP%]   .md-toolbar[_ngcontent-%COMP%]{position:relative;top:-5px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:50px;bottom:0;display:flex;overflow:auto;padding-bottom:10px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{align-self:flex-start;top:0;position:-webkit-sticky;position:sticky;flex:2 1 100px;max-width:340px;min-width:300px;overflow:hidden;height:100%}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]{height:100%;position:-webkit-sticky;position:sticky;top:0;flex:0 0 0px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{top:36px;right:16px;font-size:18px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .reserve-span-show[_ngcontent-%COMP%]{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]{min-width:24px;max-width:340px;max-height:calc(100vh - 100px);position:fixed;overflow-y:auto;margin-top:24px;padding:12px;border-radius:4px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-index[_ngcontent-%COMP%]{z-index:100}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-show[_ngcontent-%COMP%]{min-width:300px;min-height:160px;background:#fff;padding:12px;box-shadow:0 0 6px rgba(0,0,0,.08)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-show-wrapper[_ngcontent-%COMP%]{background:#f9f9f9;box-shadow:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]:hover   .reserve-span-show[_ngcontent-%COMP%]{display:block}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]:hover   .article-hidden-wrapper[_ngcontent-%COMP%]{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-hidden-wrapper[_ngcontent-%COMP%]{transform:rotateY(180deg);display:block;position:fixed;top:70px;left:15px;width:24px;max-height:calc(100vh - 280px);padding:12px 0;color:#e5e5e5;overflow:hidden;z-index:1;cursor:pointer}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-style[_ngcontent-%COMP%]{display:flex;height:20px;width:100%;margin-bottom:8px;line-height:20px;font-size:12px;font-weight:400}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-style[_ngcontent-%COMP%]:before{content:"";flex:0 0 auto;margin:auto 7px auto 0;height:2px;width:24px;padding-left:1px;background:currentColor}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]{color:#23c6c8!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon[_ngcontent-%COMP%]{position:absolute;top:25px;right:30px;z-index:10}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon.collapsed[_ngcontent-%COMP%]{transform:rotate(0deg)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]{position:absolute;top:55px;left:-40px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]{background:#23c6c8!important;height:4px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-content-styl[_ngcontent-%COMP%]{width:100%}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]{list-style:none;height:26px;line-height:26px;color:#999;font-size:12px;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%]   .li-word-styl[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]   .li-word-styl[_ngcontent-%COMP%]{position:absolute;min-width:8px;top:12px;height:2px;left:0;background:#676a6c6e;max-width:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1 1 900px;overflow-x:hidden;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:0 12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]{color:#aaa;font-size:14px;margin-left:20px;line-height:36px;display:flex}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]{display:flex}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   .nav-item-width[_ngcontent-%COMP%]{max-width:140px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   .nav-item-width[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 6px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .page[_ngcontent-%COMP%]{padding-top:12px;background-color:#fff;border:1px solid #e8e8e8;box-shadow:0 2px 8px #73737314}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .page-style[_ngcontent-%COMP%]{padding-top:0}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .create-article-height[_ngcontent-%COMP%]{min-height:calc(100vh - 62px)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .update-article-height[_ngcontent-%COMP%]{min-height:calc(100vh - 100px)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .sv-markdown-title[_ngcontent-%COMP%]{display:flex;background:#fafbfc;margin-bottom:-2px;flex:1;padding-top:12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .input-color[_ngcontent-%COMP%]{background:#fafbfc;max-width:800px;margin:0 auto;color:#434343!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1 1 auto;border:none;outline:none;font-weight:700;font-style:normal;font-size:32px;color:#23c6c8;margin-bottom:0;margin-top:0}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .input-style[_ngcontent-%COMP%]{flex:1;padding-right:0;padding-top:12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]{margin-right:18px;text-align:center;line-height:30px;flex:0 0 30px;height:30px;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:24px;vertical-align:top;transition:all .2s}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .position-child-div[_ngcontent-%COMP%]{height:1px;width:100%;background:#fff}.header-shadow[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-shadow[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%], .header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:0 0 280px}.header-shadow[_ngcontent-%COMP%]   .markdown-title[_ngcontent-%COMP%]{flex:0 0 120px}.header-shadow[_ngcontent-%COMP%]   .markdown-buttons[_ngcontent-%COMP%]{flex:0 0 280px}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{flex:1 1 auto}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .tox-toolbar__primary{display:flex;justify-content:center}.header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;font-weight:700;font-style:normal;font-size:16px;color:#676a6c}.header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .collab-users[_ngcontent-%COMP%]{margin-left:22px}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header{display:flex;align-items:center;justify-content:center}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header .md-controls{width:30px;text-align:center}.template-list[_ngcontent-%COMP%]{margin-top:20px;height:calc(100% - 40px)}.template-list[_ngcontent-%COMP%]   .icon-to-right[_ngcontent-%COMP%]{cursor:pointer;top:16px;z-index:1}.create-article-wrapper[_ngcontent-%COMP%]   .active-full-screen[_ngcontent-%COMP%]{width:100%!important;height:100%;top:0;margin-top:0!important;overflow:hidden}.create-article-wrapper[_ngcontent-%COMP%]   .content.flex-j-c[_ngcontent-%COMP%]{justify-content:center!important}.create-article-wrapper[_ngcontent-%COMP%]   .right.non-width[_ngcontent-%COMP%]{flex:0}.tag-list[_ngcontent-%COMP%]{background:#fff}.tag-manager[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;display:inline-block;width:100%;padding-bottom:12px}.small-btn-warp[_ngcontent-%COMP%]{top:0;padding-top:36px;height:100%;position:-webkit-sticky;position:sticky}.small-btn-warp[_ngcontent-%COMP%]   .small-btn[_ngcontent-%COMP%]{margin-bottom:8px;width:26px;height:22px;line-height:22px;display:flex;justify-content:center;background:#eee;color:#676a6c;cursor:pointer;border-radius:11px;position:relative;left:-4px}[_nghost-%COMP%]     .tag-list .ant-dropdown-link{margin-left:0!important}[_nghost-%COMP%]     .template-list .ant-tabs{height:100%}[_nghost-%COMP%]     .template-list .ant-tabs-content{height:100%}[_nghost-%COMP%]     .template-list #scrollParentWikiComment{height:100%;padding:0}[_nghost-%COMP%]     .template-list .comment-input{display:none}[_nghost-%COMP%]     .template-list .select-wrapper{display:none!important}[_nghost-%COMP%]     .template-list .ant-tabs-tab-active .ant-tabs-tab-btn{color:#23c6c8!important}[_nghost-%COMP%]     .template-list .ant-tabs-ink-bar{background-color:#23c6c8!important}[_nghost-%COMP%]     .template-list .ant-tabs-nav{position:relative;left:40px}[_nghost-%COMP%]     .template-list .comment-wrapper #bottomPositionWikiComment, [_nghost-%COMP%]     .template-list .comment-wrapper #topPositionWikiComment{background:transparent}[_nghost-%COMP%]     .template-list .comment-wrapper .annotation-item{background:#fff}[_nghost-%COMP%]     #previewWrapper, [_nghost-%COMP%]     .doc-cnt, [_nghost-%COMP%]     .md-editor .auto-growing:after, [_nghost-%COMP%]     .md-input{padding:20px!important}  .confirm-cancel-modal .ant-modal-content{border-radius:4px;height:160px;position:relative;box-shadow:0 0 8px rgba(0,0,0,.2)}  .confirm-cancel-modal .ant-modal-header{padding:20px 0 16px 20px;border-bottom:none}  .confirm-cancel-modal .ant-modal-header .ant-modal-title{font-size:20px;color:#333}  .confirm-cancel-modal .ant-modal-body{padding-left:20px;font-size:14px;color:#676a6c}  .confirm-cancel-modal .ant-modal-footer{position:absolute;bottom:32px;right:32px;padding:0;border-top:none}  .confirm-cancel-modal .ant-modal-footer button{margin-right:12px;margin-left:0}  .confirm-cancel-modal .ant-modal-footer button:first-child{background:#23c6c8;color:#fff}  .confirm-cancel-modal .ant-modal-footer button:last-child{margin-right:0}.loading-wrapper[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;background:hsla(0,0%,100%,.7)}.loading-wrapper[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.remote-scroll[_ngcontent-%COMP%]{position:fixed;left:0;right:0;z-index:100;bottom:0;overflow:scroll hidden}.remote-scroll[_ngcontent-%COMP%]   .remote-scroll-inner[_ngcontent-%COMP%]{width:150%;height:1px}.converting-mask[_ngcontent-%COMP%]{z-index:5000;position:fixed;left:0;right:0;top:0;bottom:0;background-color:hsla(0,0%,100%,.7)}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin-top:20px;margin-right:20px;width:330px;height:78px;display:flex;background-color:#fff;border:1px solid #eaeaea;filter:drop-shadow(rgba(0,0,0,.1) 0 2px 12px);border-radius:5px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{flex:50px 0 0;text-align:center;line-height:52px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:20px;color:#aaa}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:auto 1 1}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;color:#333;font-size:16px;line-height:50px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{color:#5f5f5f;font-size:12px;line-height:1}.tag-pop-box[_ngcontent-%COMP%]{position:relative}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#afe8e9;position:absolute;right:-11px;top:90px}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item1[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;background-color:#23c6c8;margin:3px;position:relative}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item1[_ngcontent-%COMP%]:after{content:"";display:block;width:12px;height:12px;border-radius:50%;background-color:#fff;position:absolute;top:2px;left:2px}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item2[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background-color:#fff;position:absolute;top:3px;left:3px;cursor:pointer}.menu-popover-list[_ngcontent-%COMP%]{width:260px;overflow:hidden}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-content[_ngcontent-%COMP%]{width:100%;overflow:hidden;margin-bottom:10px}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-content[_ngcontent-%COMP%]   .menu-popover-div[_ngcontent-%COMP%]{line-height:26px;margin:0;font-size:14px;cursor:pointer;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{position:relative;background:transparent;text-shadow:none;border-radius:4px}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:focus, .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:hover{outline:none}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{color:#23c6c8;border:1px solid #23c6c8}.doc-full-table[_ngcontent-%COMP%]{cursor:pointer;padding:10px 0;font-weight:400}.doc-full-table[_ngcontent-%COMP%]:hover{color:#23c6c8}.doc-full-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:rotate(90deg);display:inline-block}.doc-full-table[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}  .edit-artical-wide .mce-content-body>*{max-width:760px;margin:auto!important}  .edit-artical-wide input.article-title{max-width:736px;margin:auto;padding:5px}  .edit-artical-wide .width-table{max-width:100%!important}'],data:{animation:[Object(o.l)("outlineToggle",[Object(o.i)("open",Object(o.j)({flex:"2 1 100px","min-width":"300px"})),Object(o.i)("closed",Object(o.j)({flex:"0 0 20px","min-width":"0px"})),Object(o.k)("open => closed",[Object(o.e)("0.2s ease-out")]),Object(o.k)("closed => open",[Object(o.e)("0.2s ease-out")])]),Object(o.l)("enterAnimation2",[Object(o.i)("open",Object(o.j)({opacity:1})),Object(o.i)("closed",Object(o.j)({opacity:0})),Object(o.k)("open => closed",[Object(o.e)("0s")]),Object(o.k)("closed => open",[Object(o.e)("1s ease-in")])])]}}),t}(O.a)},QWGN:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n("A/Mn"),o=n("4P1S"),r=n("fXoL"),a=n("sYmb"),c=n("UJq8"),l=n("bNXi"),s=n("dEAy"),d=n("ofXK"),p=n("BT9m"),u=n("lR5k"),m=n("3Pt+"),g=function(){function e(e){this.translate=e}return e.prototype.transform=function(e){if(e){var t,n,i,o,r,a=function(e){return Date.parse(e.replace(/-/gi,"/"))}(e)/1e3;return r=parseInt(String((new Date).getTime()/1e3))-a,o=parseInt(String(r/86400)),i=parseInt(String(r/3600)),n=parseInt(String(r/60)),t=parseInt(r),o>0&&o<30?o+this.translate.instant("DAY_AGO"):o<=0&&i>0?i+this.translate.instant("HOURS_AGO"):i<=0&&n>0?n+this.translate.instant("MIN_AGO"):t<60?t<=0?this.translate.instant("MOMENT_AGO"):t+this.translate.instant("SECONDS_AGO"):o>=30?Math.floor(o/30)+this.translate.instant("MONTH_AGO"):void 0}},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.c))},e.\u0275pipe=r["\u0275\u0275definePipe"]({name:"dateHowLongAgo",type:e,pure:!0}),e}();function h(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate4"](""," ","",r["\u0275\u0275pipeBind1"](2,4,"REPLYING"),""," "+n.realItem.replayUserName,""," "+n.realItem.replayUserAccount,"")}}function f(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span",17),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.passedResComment," ")}}function v(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span",18),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.failedResComment," ")}}function C(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275template"](1,f,2,1,"span",15),r["\u0275\u0275template"](2,v,2,1,"span",16),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==n.realItem.status),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",-1==n.realItem.status)}}function b(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"i",22),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.deleteAnnotationComment(e.realItem)}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](1,1,"COMMON_BUTTON_DELETE"))}function x(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"i",23),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.replyAnnotationComment(e.realItem)}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](1,1,"REPLYING"))}function y(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",19),r["\u0275\u0275template"](1,b,2,3,"i",20),r["\u0275\u0275template"](2,x,2,3,"i",21),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",(null==n.currentUser?null:n.currentUser.user_id)==n.realItem.submitted_by.id),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","anonymize"!==n.realItem.commentType)}}function w(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"i",24),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.editComment(e.realItem)}),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"i",25),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.shareComment(e.realItem,e.index)}),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"i",22),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.deleteComment(e.realItem.id)}),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()}2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](2,3,"EDIT")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](4,5,"PUSH")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](6,7,"COMMON_BUTTON_DELETE")))}var O=function(){return[0,2]};function _(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",19),r["\u0275\u0275template"](1,w,7,9,"ng-container",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==n.realItem.system_add&&r["\u0275\u0275pureFunction0"](1,O).includes(n.realItem.status)&&n.realItem.submitted_by.id==n.current_user_id)}}function M(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"div",26),r["\u0275\u0275text"](2),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](null!=n.realItem&&null!=n.realItem.parentObj&&n.realItem.parentObj.content?n.realItem.parentObj.content:r["\u0275\u0275pipeBind1"](3,1,"COMMENT_IS_DELETED"))}}function S(e,t){if(1&e&&r["\u0275\u0275element"](0,"markdown",27),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",n.realItem.content)}}function P(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",28),r["\u0275\u0275elementStart"](1,"textarea",29),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).updateComment.content=e}),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",30),r["\u0275\u0275elementStart"](4,"button",31),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](2);return e.cancelEditComment(e.realItem)}),r["\u0275\u0275pipe"](5,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"button",32),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](2);return e.updateCommentContent(e.realItem)}),r["\u0275\u0275pipe"](7,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](2,4,"KNOWLEDGE_BASE_COMMENT_PLACEHOLDER")),r["\u0275\u0275property"]("ngModel",i.updateComment.content),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("textContent",r["\u0275\u0275pipeBind1"](5,6,"COMMON_BUTTON_CANCLE")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("textContent",r["\u0275\u0275pipeBind1"](7,8,"COMMON_BTN_SAVE"))}}function E(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",33),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementStart"](3,"i",34),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).showShareTip=!1}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate3"](" ",i.sharedUserInfo.name,"",i.sharedUserInfo.username,"",r["\u0275\u0275pipeBind1"](2,3,"SHARE_COMMENT_USER"),"")}}function I(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",1),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275element"](2,"user-avatar",3),r["\u0275\u0275elementStart"](3,"div",4),r["\u0275\u0275elementStart"](4,"div",5),r["\u0275\u0275element"](5,"span",6),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275template"](7,h,3,6,"span",7),r["\u0275\u0275template"](8,C,3,2,"span",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",8),r["\u0275\u0275elementStart"](10,"span",9),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"dateHowLongAgo"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"span"),r["\u0275\u0275text"](14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](15,y,3,2,"div",10),r["\u0275\u0275template"](16,_,2,2,"div",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",11),r["\u0275\u0275template"](18,M,4,3,"ng-container",7),r["\u0275\u0275template"](19,S,1,1,"markdown",12),r["\u0275\u0275template"](20,P,8,10,"div",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",11),r["\u0275\u0275template"](22,E,4,5,"div",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275attribute"]("id",n.realItem.id),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("account",n.realItem.submitted_by.account)("isAnonymous",n.realItem.anonymous)("width",25)("height",25),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("textContent",n.realItem.anonymous?r["\u0275\u0275pipeBind1"](6,16,"ANONYMOUS_POST"):n.realItem.person),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",n.realItem.replayUserName),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.isShowResComment),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](12,18,n.realItem.create_time)),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](n.realItem.create_time),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.realItem.id!=n.current_item_id&&"annotation"==n.realItem.category&&"-1"!=n.status&&n.realItem.content),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.showOpreation&&(!n.isEditingComment||n.realItem.id!=n.current_item_id)&&"wiki"==n.realItem.category),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",null==n.realItem?null:n.realItem.parent_id),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!n.isEditingComment||n.realItem.id!=n.current_item_id),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.isEditingComment&&n.realItem.id==n.current_item_id),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",n.item.id==n.comment_id&&n.showShareTip)}}var k=function(){function e(e,t,n,i,o,r){var a=this;this.translate=e,this.knowledgeService=t,this.emitService=n,this.attrPipe=i,this.notification=o,this.modal=r,this.title="knowledge-ui",this.showShareTip=!1,this.showOpreation=!0,this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(e){e&&(a.currentUser=e,a.current_user_id=e.user_id)})}return Object.defineProperty(e.prototype,"isShowResComment",{get:function(){var e;return["countersign","review","verified"].includes(null===(e=this.realItem)||void 0===e?void 0:e.commentType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"passedResComment",{get:function(){var e,t="";switch(null===(e=this.realItem)||void 0===e?void 0:e.commentType){case"countersign":t=this.translate.instant("COUNTERSIGN_RESULT_SUCCESS");break;case"review":t=this.translate.instant("REVIEW_RESULT_SUCCESS");break;case"verified":t=this.translate.instant("VERIFICATION_RESULT_SUCCESS")}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedResComment",{get:function(){var e,t="";switch(null===(e=this.realItem)||void 0===e?void 0:e.commentType){case"countersign":t=this.translate.instant("COUNTERSIGN_RESULT_FAILED");break;case"review":t=this.translate.instant("REVIEW_RESULT_FAILED");break;case"verified":t=this.translate.instant("VERIFICATION_RESULT_FAILED")}return t},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.realItem=this.showOpreation?this.item.comments[0]:this.item,this.realItem.person=this.attrPipe.transform(this.realItem.submitted_by,"person")},e.prototype.editComment=function(e){this.emitService.emit({type:"wiki-comment::editComment",comment_item:e}),this.current_item_id=e.id},e.prototype.shareComment=function(e,t){this.emitService.emit({type:"wiki-comment::shareComment",item:e,index:t})},e.prototype.deleteComment=function(e){this.emitService.emit({type:"wiki-comment::deleteComment",comment_id:e})},e.prototype.cancelEditComment=function(e){this.current_item_id=void 0,this.emitService.emit({type:"wiki-comment::cancelEditComment",item:e})},e.prototype.updateCommentContent=function(e){this.current_item_id=void 0,this.emitService.emit({type:"wiki-comment::updateCommentContent",item:e})},e.prototype.replyAnnotationComment=function(e){this.current_item_id=void 0,this.emitService.emit({type:"wiki-comment::replyAnnotationComment",item:e,commentGuid:this.commentGuid})},e.prototype.deleteAnnotationComment=function(e){var t=this;this.modal.error({nzTitle:this.translate.instant("COMMENT_DELETE_CONFIRM"),nzContent:"",nzOkText:this.translate.instant("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){t.confirmDelete(e)},nzCancelText:this.translate.instant("COMMON_BUTTON_CANCLE")})},e.prototype.confirmDelete=function(e){var t=this;this.knowledgeService.deleteAnnotationComment({comment_id:e.id,comment_guid:this.commentGuid}).subscribe(function(n){t.notification.success(t.translate.instant("DELETE_SUCCESS"),""),t.current_item_id=void 0,t.emitService.emit({type:"wiki-comment::deleteAnnotationComment",item:e,commentGuid:t.commentGuid})},function(){})},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.c),r["\u0275\u0275directiveInject"](i.b),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](l.b),r["\u0275\u0275directiveInject"](s.d))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["comment-item"]],inputs:{item:"item",index:"index",isEditingComment:"isEditingComment",updateComment:"updateComment",showOpreation:"showOpreation",status:"status",commentGuid:"commentGuid"},features:[r["\u0275\u0275ProvidersFeature"]([i.b,o.a])],decls:1,vars:1,consts:[["class","comment-item",4,"ngIf"],[1,"comment-item"],[1,"comment-top"],[1,"avatar",3,"account","isAnonymous","width","height"],[1,"name-time"],[1,"comment-user"],[3,"textContent"],[4,"ngIf"],[1,"comment-time"],[1,"m-r-5"],["class","comment-operations",4,"ngIf"],[1,"comment-content",2,"max-width","100%"],[3,"data",4,"ngIf"],["class","is-editing-comment-styl",4,"ngIf"],["class","comment-push",4,"ngIf"],["class","countersign-status countersign-status-success",4,"ngIf"],["class","countersign-status countersign-status-failed",4,"ngIf"],[1,"countersign-status","countersign-status-success"],[1,"countersign-status","countersign-status-failed"],[1,"comment-operations"],["class","operation-item iconfont icon-delete",3,"title","click",4,"ngIf"],["class","operation-item iconfont icon-comment-left-tail operation-item-f-13",3,"title","click",4,"ngIf"],[1,"operation-item","iconfont","icon-delete",3,"title","click"],[1,"operation-item","iconfont","icon-comment-left-tail","operation-item-f-13",3,"title","click"],[1,"operation-item","iconfont","icon-edit-simple",3,"title","click"],[1,"operation-item","iconfont","icon-share",3,"title","click"],[1,"more-text-hidden"],[3,"data"],[1,"is-editing-comment-styl"],[1,"textarea-comment-style",3,"ngModel","placeholder","ngModelChange"],[1,"comment-edit-btns"],[1,"btn","btn-white","btn-sm","m-r-10",3,"textContent","click"],[1,"btn","btn-info","btn-sm",3,"textContent","click"],[1,"comment-push"],[1,"user-tip-close","iconfont","icon-close",3,"click"]],template:function(e,t){1&e&&r["\u0275\u0275template"](0,I,23,20,"div",0),2&e&&r["\u0275\u0275property"]("ngIf",t.realItem&&t.realItem.content)},directives:[d.n,p.a,u.a,m.d,m.k,m.l],pipes:[a.b,g],styles:[".comment-item[_ngcontent-%COMP%]{padding:10px 10px 0}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]{display:flex;padding-bottom:10px;position:relative}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-right:10px}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]{flex:1}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]{color:#999}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]   .countersign-status[_ngcontent-%COMP%]{margin-left:10px;display:inline-block;padding:0 2px;font-size:12px;border-radius:4px}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]   .countersign-status-success[_ngcontent-%COMP%]{color:#23c6c8;background:rgba(35,198,200,.2)}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]   .countersign-status-failed[_ngcontent-%COMP%]{background:rgba(226,50,55,.2);color:#e23237}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-time[_ngcontent-%COMP%]{font-size:12px;line-height:10px;color:#999}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]{float:right;position:absolute;right:0}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-left:9px;font-size:14px}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item.active[_ngcontent-%COMP%]{display:inline-block;color:#23c6c8}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item-f-13[_ngcontent-%COMP%]{font-size:13px}.comment-item[_ngcontent-%COMP%]:hover   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]{display:inline-block}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{padding-left:35px}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .more-text-hidden[_ngcontent-%COMP%]{color:#999;font-size:12px;overflow-x:hidden;width:100%;text-overflow:ellipsis;white-space:nowrap;word-break:break-all;padding-bottom:1px;padding-left:5px;background:#f5f5f5;border-radius:3px}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .is-editing-comment-styl[_ngcontent-%COMP%]{max-width:100%;margin-bottom:3px}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .is-editing-comment-styl[_ngcontent-%COMP%]   .textarea-comment-style[_ngcontent-%COMP%]{width:100%;height:197px}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-update-textarea[_ngcontent-%COMP%]{height:150px;min-height:80px;width:100%;max-width:100%;border-radius:3px;display:inline-block;border-color:#d7d7d7}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-edit-btns[_ngcontent-%COMP%]{text-align:right;margin-bottom:10px;position:relative}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .user-tip-close[_ngcontent-%COMP%]{font-size:15px;color:#666;position:absolute;top:0;bottom:0;right:5px}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-push[_ngcontent-%COMP%]{background:#ffffe0;font-size:10px;position:relative}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}"]}),e}()},QhG9:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("mrSG"),o=n("itXk"),r=n("IzEk"),a=n("fXoL"),c=n("A/Mn"),l=n("bNXi"),s=n("sYmb"),d=n("ofXK"),p=n("Nqz0"),u=n("7xxS");function m(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span",9),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().removeTag(e)}),a["\u0275\u0275text"](1,"x"),a["\u0275\u0275elementEnd"]()}}var g=function(e){return{backgroundColor:e}},h=function(e){return{color:e}};function f(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",4),a["\u0275\u0275elementStart"](1,"div",5),a["\u0275\u0275element"](2,"i",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"span",7),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,m,2,0,"span",8),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](4,g,n.color)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](6,h,n.color)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.title),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.isEdit)}}function v(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span",13),a["\u0275\u0275text"](1,"\u6dfb\u52a0\u6807\u7b7e"),a["\u0275\u0275elementEnd"]())}function C(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"a",10),a["\u0275\u0275listener"]("nzVisibleChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().dropDownVisible=e}),a["\u0275\u0275element"](1,"i",11),a["\u0275\u0275template"](2,v,2,0,"span",12),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](),o=a["\u0275\u0275reference"](4);a["\u0275\u0275property"]("nzVisible",i.dropDownVisible)("nzDropdownMenu",o),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!i.markedTag.length)}}function b(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"workitem-label-select-panel",14),a["\u0275\u0275listener"]("modeChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().labelModalMode=e})("onSelect",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().handleConfirm()})("onConfirm",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().handleLabelConfirmClick(e)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("options",i.tagList)("loading",i.selectLoading)("mode",i.labelModalMode)}}var x=function(){function e(e,t,n){this.knowledgeManageService=e,this.notification=t,this.translate=n,this.isCoe=!1,this.wikiId="",this.isEdit=!1,this.selectedTagOption=[],this.curLanguage=this.translate.currentLang||"zh",this.tagList=[],this.markedTag=[],this.selectLoading=!1,this.dropDownVisible=!1,this.labelModalMode="default"}return e.prototype.ngOnInit=function(){var e=this;if(this.isEdit){var t=[this.knowledgeManageService.getAllWikiTags()];this.wikiId&&this.isCoe&&t.push(this.knowledgeManageService.getCoeTagList(this.wikiId)),Object(o.a)(t).subscribe(function(t){var n=Object(i.g)(t,2),o=n[1];e.tagList=n[0].map(function(e){var t;return Object(i.a)(Object(i.a)({},e),{isSelected:null===(t=null==o?void 0:o.tags)||void 0===t?void 0:t.some(function(t){return t.id===e.id}),readOnly:!!e.readOnly||!1})}),e.selectedTagOption.length?(e.markedTag=e.selectedTagOption,e.tagList.forEach(function(t){e.markedTag.some(function(e){return e.id===t.id})&&(t.isSelected=!0)})):e.markedTag=e.tagList.filter(function(e){return e.isSelected})},function(){})}else this.wikiId&&this.knowledgeManageService.getCoeTagList(this.wikiId).subscribe(function(t){e.markedTag=t.tags,e.setCoeAttr(null==t?void 0:t.wikiCustomAttr1),e.setCoeAttr(null==t?void 0:t.wikiCustomAttr2),e.setCoeAttr(null==t?void 0:t.wikiCustomAttr3);var n=(null==t?void 0:t.wikiFailureMode4)||(null==t?void 0:t.wikiFailureMode2);n&&e.markedTag.push({color:"#719df5",title:"en"==e.curLanguage?n.attrTitleEn:n.attrTitleZh})},function(){})},e.prototype.setCoeAttr=function(e){e&&this.markedTag.push({color:"#EC7E69",title:"en"==this.curLanguage?e.attrTitleEn:e.attrTitleZh})},e.prototype.addTag=function(e){var t=this;this.selectLoading=!0,this.knowledgeManageService.addWikiTag(e).pipe(Object(r.a)(1)).subscribe(function(e){t.labelModalMode="default",t.selectLoading=!1,"string"!=typeof e?(t.notification.success(t.translate.instant("ADD_TAG_SUCCESS"),"",{nzDuration:1e3}),t.ngOnInit()):t.notification.error(t.translate.instant(e),"")},function(){})},e.prototype.modifyTag=function(e){var t=this;this.selectLoading=!0,this.knowledgeManageService.modifyTag(e).subscribe(function(n){if(t.labelModalMode="default",t.selectLoading=!1,"string"!=typeof n){var o=t.tagList.findIndex(function(t){return t.id===e.id}),r=t.tagList[o];t.tagList[o]=Object(i.a)(Object(i.a)({},r),e),t.notification.success(t.translate.instant("MODIFY_TAG_SUCCESS"),"",{nzDuration:1e3}),t.handleConfirm()}else t.notification.error(t.translate.instant(n),"")},function(){})},e.prototype.deleteTag=function(e){var t=this;this.knowledgeManageService.deleteTag(e.id).subscribe(function(n){t.labelModalMode="default",t.notification.success(t.translate.instant("DELETE_TAG_SUCCESS"),"",{nzDuration:1e3});var i=t.tagList.findIndex(function(t){return t.id===e.id});t.tagList.splice(i,1),t.handleConfirm()},function(){})},e.prototype.handleConfirm=function(){this.markedTag=this.tagList.filter(function(e){return e.isSelected})},e.prototype.removeTag=function(e){this.tagList.find(function(t){return t.id===e.id}).isSelected=!1,this.handleConfirm()},e.prototype.handleLabelConfirmClick=function(e){var t=e.data;switch(e.operate){case"add":this.addTag(t);break;case"update":this.modifyTag(t);break;case"delete":this.deleteTag(t)}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.b),a["\u0275\u0275directiveInject"](l.b),a["\u0275\u0275directiveInject"](s.c))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-wiki-tag-manager"]],inputs:{isCoe:"isCoe",wikiId:"wikiId",isEdit:"isEdit",selectedTagOption:"selectedTagOption"},decls:6,vars:3,consts:[["class","label-item",4,"ngFor","ngForOf"],["class","txt-999 m-l-10","nz-dropdown","","nzTrigger","click","nzPlacement","bottomCenter",3,"nzVisible","nzDropdownMenu","nzVisibleChange",4,"ngIf"],["addLabel","nzDropdownMenu"],["searchPlaceholder","\u641c\u7d22\u6807\u7b7e",3,"options","loading","mode","modeChange","onSelect","onConfirm",4,"ngIf"],[1,"label-item"],[1,"label-bg",3,"ngStyle"],[1,"label-item-arrow"],[3,"ngStyle"],["class","label-item-delete",3,"click",4,"ngIf"],[1,"label-item-delete",3,"click"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomCenter",1,"txt-999","m-l-10",3,"nzVisible","nzDropdownMenu","nzVisibleChange"],[1,"iconfont","icon-addmember","f-14"],["class","m-l-5 f-12",4,"ngIf"],[1,"m-l-5","f-12"],["searchPlaceholder","\u641c\u7d22\u6807\u7b7e",3,"options","loading","mode","modeChange","onSelect","onConfirm"]],template:function(e,t){1&e&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275template"](1,f,6,8,"div",0),a["\u0275\u0275template"](2,C,3,3,"a",1),a["\u0275\u0275elementStart"](3,"nz-dropdown-menu",null,2),a["\u0275\u0275template"](5,b,1,3,"workitem-label-select-panel",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementContainerEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.markedTag),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.isEdit),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.dropDownVisible))},directives:[d.m,d.n,p.d,d.o,p.a,p.b,u.a],styles:[".label-item[_ngcontent-%COMP%]{position:relative;font-size:12px;display:inline-block;height:18px;padding-left:10px;padding-right:13px;margin-bottom:10px;margin-left:10px}.label-item[_ngcontent-%COMP%]   .label-bg[_ngcontent-%COMP%]{opacity:.2;position:absolute;left:0;top:0;bottom:0;right:0}.label-item[_ngcontent-%COMP%]   .label-item-arrow[_ngcontent-%COMP%]{display:inline-block;position:absolute;height:100%;top:0;left:0;border:8px solid #fff;border-right-color:transparent;border-left:none}.label-item[_ngcontent-%COMP%]   .label-item-delete[_ngcontent-%COMP%]{display:none;position:absolute;right:4px;top:-3px;font-size:14px;color:#999;cursor:pointer}.label-item[_ngcontent-%COMP%]:hover   .label-item-delete[_ngcontent-%COMP%]{display:inline-block}"]}),e}()},THGc:function(e,t,n){"use strict";n.d(t,"a",function(){return W});var i=n("mrSG"),o=n("fXoL"),r=n("AA4e"),a=n("fxjG"),c=n("XNiG"),l=n("VRyK"),s=n("PqYM"),d={lang:localStorage.getItem("NG_TRANSLATE_LANG_KEY")||"zh",showinfobar:!1,defaultRowHeight:25,defaultColWidth:90,showstatisticBarConfig:{count:!0,view:!1,zoom:!0}},p={allowEdit:!1,allowCopy:!1,showtoolbar:!1,enableAddRow:!1,showtoolbarConfig:{textWrapMode:!0,frozenMode:!0,sortAndFilter:!0,findAndReplace:!0},sheetFormulaBar:!1,showsheetbarConfig:{add:!1,menu:!0,sheet:!0},cellRightClickConfig:{copy:!1,copyAs:!1,paste:!1,insertRow:!1,insertColumn:!1,deleteRow:!1,deleteColumn:!1,deleteCell:!1,hideRow:!1,hideColumn:!1,rowHeight:!1,columnWidth:!1,clear:!1,matrix:!1,sort:!1,filter:!1,chart:!1,image:!1,link:!1,data:!1,cellFormat:!1},sheetRightClickConfig:{delete:!1,copy:!1,rename:!1,color:!1,hide:!1,move:!1}},u={showtoolbarConfig:{chart:!1,pivotTable:!1,protection:!1,print:!1},cellRightClickConfig:{copy:!0,copyAs:!0,paste:!1,insertRow:!0,insertColumn:!0,deleteRow:!0,deleteColumn:!0,deleteCell:!0,hideRow:!0,hideColumn:!0,rowHeight:!0,columnWidth:!0,clear:!0,matrix:!0,sort:!0,filter:!0,chart:!1,image:!0,link:!0,data:!1,cellFormat:!1}},m=n("eIep"),g=n("1G5W"),h=n("d/Su"),f=n("hbEN"),v=n("XIp8"),C=n("UJq8"),b=n("A/Mn"),x=n("bNXi"),y=n("sYmb"),w=n("Fpfz"),O=n("dEAy"),_=n("ofXK"),M=n("3Pt+"),S=n("vTH2"),P=n("OzZK"),E=n("RwU8"),I=n("C2AL"),k=["wikiUnlockTips"],T=["categorySelector"],A=function(e){return{date:e}};function D(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",5),o["\u0275\u0275element"](1,"span",6),o["\u0275\u0275elementStart"](2,"div",7),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"span",8),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().revertCache()}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"span"),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"span",9),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().cancelCache()}),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](5,4,"RESTORE_CACHE",o["\u0275\u0275pureFunction1"](13,A,i.wikiArticleCacheData.operate_date))),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](8,7,"REVERT")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](11,9,"QUESTION_MARK")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](14,11,"DISCARD_DRAFT"),"?")}}function z(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275elementStart"](1,"div",11),o["\u0275\u0275elementStart"](2,"span",12),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().exitFullScreen()}),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,1,"FULL_SCREEN_EXIT")))}function L(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275elementStart"](1,"div",14),o["\u0275\u0275elementStart"](2,"input",15),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().excelTitle=e})("change",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().titleChange$.next()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",11),o["\u0275\u0275elementStart"](4,"app-category-selector",16,17),o["\u0275\u0275listener"]("selected",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().selectorEmit(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",i.excelTitle)("title",i.excelTitle),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("model",i.model)("categoryId",i.categoryId)("dictionaryId",i.dictionaryId)("currentDomain",i.currentDomain)}}function V(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",18),o["\u0275\u0275elementStart"](1,"div",19),o["\u0275\u0275element"](2,"i",20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",21),o["\u0275\u0275elementStart"](4,"div",22),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",23),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",24),o["\u0275\u0275elementStart"](11,"button",25),o["\u0275\u0275listener"]("click",function(){return t.$implicit.close()}),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"button",26),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"]().unlockTipsOnCancle(e)}),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"button",27),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"]().unlockTipsOnSave(e)}),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.data;o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate3"](" ",null==i?null:i.name," ",null==i?null:i.username," ",o["\u0275\u0275pipeBind1"](6,7,"WIKI_REQUEST_UNLOCK")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,9,"WIKI_UNLOCK_TIPS")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](13,11,"WIKI_UNLOCK_REFUSE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](16,13,"WIKI_UNLOCK_NO_SAVE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](19,15,"WIKI_UNLOCK_SAVE"))}}var N,R,j=function(e,t,n){return{"check-excel":e,"not-check-excel":t,"full-check-excel":n}},U=["*"],B=window.$,F=window.luckysheet,W=function(e){function t(t,n,i,r,a,l,s){var d=e.call(this)||this;return d.emitService=t,d.knowledgeService=n,d.notification=i,d.translate=r,d.visionEditorService=a,d.modal=l,d.ngZone=s,d.quickSaveCtrl=!1,d.titleChange$=new c.a,d.contentChange$=new c.a,d.cancleExit$=new c.a,d.contentSaveExit$=new c.a,d.onDestroy$=new c.a,d.container="luckysheet",d.model="create-excel",d.fullScreenCtrl=!1,d.eventEmitter=new o.EventEmitter,d.isLocalEditing=!1,d.articleAttachmentInfo={sourceId:"",sourceType:"wiki_location"},d.excelTitle="\u65b0\u5efa\u8868\u683c\u6587\u6863",d.currentLang=d.translate.currentLang||"zh",d.selectorEmit=Object(f.a)(function(e){var t=e.type;if("save"===t){var n=e.dictionaryId,i=e.parentSn;d.categoryId=d.categoryId||e.categoryId,d.dictionaryId=d.dictionaryId||n,d.parentSn=d.parentSn||i,d.save()}else if("cancelCreate"===t){var o=void 0,r=void 0;"update-excel"===d.model&&(d.newContent=d.getAllSheets(),o=Object(v.a)(d.oldContent),r=Object(v.a)(d.newContent),o.forEach(function(e){delete e.luckysheet_select_save,delete e.scrollLeft,delete e.scrollTop}),r.forEach(function(e){delete e.luckysheet_select_save,delete e.scrollLeft,delete e.scrollTop})),JSON.stringify(o)!==JSON.stringify(r)?d.modal.confirm({nzTitle:d.translate.instant("CANCLE_CONFIRM_TITLE"),nzOkText:d.translate.instant("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){d.cancelCreate()},nzCancelText:d.translate.instant("COMMON_BUTTON_CANCLE"),nzOnCancel:function(){}}):d.cancelCreate()}},1e3,{leading:!0,trailing:!1}),d}return Object(i.d)(t,e),t.prototype.cancleEdit=function(){this.cancelCreate()},t.prototype.saveEdit=function(){this.save()},Object.defineProperty(t.prototype,"articleBase",{get:function(){var e;return{id:null===(e=this.articleInfo)||void 0===e?void 0:e.id,ui_source:"1",title:this.excelTitle,category:"table"}},enumerable:!1,configurable:!0}),t.prototype.ngOnChanges=function(e){var t;!1===(null===(t=e.fullScreenCtrl)||void 0===t?void 0:t.firstChange)?Object(r.p)(F.resize):e.sn&&!e.sn.firstChange||this.addScripts()},t.prototype.ngOnInit=function(){var e=this;this.requestExcelSn(),this.emitService.eventEmit.subscribe(function(t){"dragge-div-width-change"===t.type&&requestAnimationFrame(function(){F.resize()}),"re-initExcel"!==t.type||"check-excel"!==e.model||e.checkType||e.initExcel()})},t.prototype.ngAfterViewInit=function(){this.saveInitData()},t.prototype.initSocketListen=function(){e.prototype.initSocketListen.call(this)},t.prototype.addScripts=function(){var e=this,t=window.location.origin+"/knowledge-ui/luckysheet/dist";if(document.getElementById("pluginJs")&&document.getElementById("luckysheetJs"))this.initExcel();else{var n=new Promise(function(e){var n=document.createElement("script");n.id="pluginJs",n.src=t+"/plugins/js/plugin.js",n.onload=function(){e()},document.head.appendChild(n)}),i=new Promise(function(e){var n=document.createElement("script");n.id="luckysheetJs",n.src=t+"/luckysheet.umd.js",n.onload=function(){e()},document.head.appendChild(n)});Promise.all([n,i]).then(function(){!F&&(F=window.luckysheet),e.initExcel()})}[t+"/plugins/css/pluginsCss.css",t+"/plugins/plugins.css",t+"/css/luckysheet.css",t+"/assets/iconfont/iconfont.css"].forEach(function(e){if(!document.querySelector('head link[href="'+e+'"]')){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.head.appendChild(t)}})},t.prototype.initExcel=function(){this.renderExcel(),this.initCache()},t.prototype.renderExcel=function(){var e,t,n,o,r=this,a=JSON.parse(null!==(o=null===(n=null===(t=null===(e=this.articleInfo)||void 0===e?void 0:e.paragraphs)||void 0===t?void 0:t[0])||void 0===n?void 0:n.content)&&void 0!==o?o:"[]");"check-excel"===this.model?F.create(Object(i.a)(Object(i.a)(Object(i.a)({container:this.container},d),p),{hook:{workbookCreateAfter:function(e){},rangePasteBefore:function(e,t){return!1}},data:a})):"create-excel"===this.model?F.create(Object(i.a)(Object(i.a)(Object(i.a)({container:this.container,title:this.excelTitle},d),u),{hook:{updated:function(e){r.contentChange$.next()},workbookCreateAfter:function(e){r.initQuickSave()}},data:[{name:"Sheet1",color:"",index:F.sheetmanage.generateRandomSheetIndex(),status:1,order:1,celldata:[],config:{}}]})):"update-excel"===this.model&&(this.initSocketListen(),this.sn&&(this.excelTitle=this.articleInfo.title,F.create(Object(i.a)(Object(i.a)(Object(i.a)({container:this.container},d),u),{gridKey:{sn:this.sn},loadUrl:"/devops-knowledge-management/api/wiki",hook:{updated:function(e){r.contentChange$.next()},workbookCreateAfter:function(e){r.oldContent=r.getAllSheets(),r.initQuickSave()}}}))))},t.prototype.requestExcelSn=function(){var e=this;"create-excel"===this.model&&this.knowledgeService.requestKnowledgeSn({numberType:"Knowledge_table"}).subscribe(function(t){e.createArticleSn=t[0],e.articleAttachmentInfo.sourceId=e.createArticleSn},function(){})},t.prototype.exitFullScreen=function(){this.eventEmitter.emit({type:"full-screen-exit"})},t.prototype.saveInitData=function(){N=this.categoryId,R=this.dictionaryId},t.prototype.save=function(){var e=this.getAllSheets();"create-excel"===this.model&&this.createSave(e),"update-excel"===this.model&&this.updateSave(e)},t.prototype.getAllSheets=function(){var e=F.getAllSheets();return e.forEach(function(e){e.chart&&e.chart.forEach(function(e){e.chartOptions=Object(i.a)({},window.chartmix.default.getChartJson(e.chart_id));var t=document.getElementById(e.chart_id+"_c");t.style&&(e.left=parseInt(t.style.left),e.top=parseInt(t.style.top),e.width=parseInt(t.style.width),e.height=parseInt(t.style.height))}),e.luckysheet_selection_range=[],delete e.data}),e},t.prototype.initQuickSave=function(){var e,t=this;if("create-excel"===this.model&&(null===(e=this.categorySelector)||void 0===e?void 0:e.isNullOrUndefined(this.dictionaryId))&&B("#luckysheet-input-box, #"+this.container).on("keydown",function(){t.ngZone.run(function(){return Object(h.a)(function(){t.categorySelector.showSelectCategoryDirectory=!0})})}),"update-excel"===this.model){var n=Object(f.a)(function(){t.quickSaveCtrl=!0,t.save()},1e3,{leading:!0,trailing:!1});B("#luckysheet-input-box, #"+this.container).on("keydown",function(){t.ngZone.run(function(){return Object(h.a)(n)})})}},t.prototype.initCache=function(){var e=this;this.createCacheCondition={target_sn:"",type:"create-table"},this.updateCacheCondition={target_sn:this.sn,type:"update-table"};var t=Object(l.a)(this.contentSaveExit$,this.cancleExit$),n=Object(l.a)(this.titleChange$,this.contentChange$);if("update-excel"===this.model||"create-excel"===this.model){this.queryCache();var i=n.pipe(Object(m.a)(function(){return Object(s.a)(5e3).pipe(Object(g.a)(Object(l.a)(t,n)),Object(m.a)(function(){return e.cacheRequest()}))})).subscribe();t.subscribe(function(){i.unsubscribe()})}},t.prototype.queryCache=function(){var e=this;this.visionEditorService.queryArticleCache("create-excel"===this.model?this.createCacheCondition:this.updateCacheCondition).subscribe(function(t){(null==t?void 0:t.description)&&(e.wikiArticleCacheData=t,e.isLocalEditing=!0)},function(){})},t.prototype.cacheRequest=function(){var e=this.getAllSheets(),t={title:this.excelTitle,description:JSON.stringify(e),ui_source:1};return t="create-excel"===this.model?Object(i.a)(Object(i.a)({},t),this.createCacheCondition):Object(i.a)(Object(i.a)({},t),this.updateCacheCondition),this.visionEditorService.updateArticleCache(t)},t.prototype.revertCache=function(){var e=this;this.modal.warning({nzTitle:this.translate.instant("REVERT_CACHE_TIP"),nzOkText:this.translate.instant("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){e.revertCacheConfirm()},nzCancelText:this.translate.instant("COMMON_BUTTON_CANCLE"),nzOnCancel:function(){}})},t.prototype.cancelCache=function(){var e=this,t={title:this.excelTitle,description:"",ui_source:1};t="create-excel"===this.model?Object(i.a)(Object(i.a)({},t),this.createCacheCondition):Object(i.a)(Object(i.a)({},t),this.updateCacheCondition),this.visionEditorService.updateArticleCache(t).subscribe(function(t){e.wikiArticleCacheData=null,e.isLocalEditing=!1},function(){e.isLocalEditing=!1})},t.prototype.revertCacheConfirm=function(){var e=F.getAllSheets().map(function(e){return e.index});JSON.parse(this.wikiArticleCacheData.description).forEach(function(e){e.index=F.sheetmanage.generateRandomSheetIndex(),F.sheetmanage.createSheetbydata(e,!0,!1)}),this.excelTitle=this.wikiArticleCacheData.title,e.forEach(function(e){F.sheetmanage.deleteSheet(e)}),this.isLocalEditing=!1},t.prototype.createSave=function(e){var t=this,n=[{title:this.excelTitle,description:JSON.stringify(e),category:"table",parent_id:Number(this.dictionaryId),kanban_id:this.categoryId,ui_source:1,assigned_domain_id:Number(this.currentDomain),sn:this.createArticleSn}];this.knowledgeService.createArticleFloder(n).subscribe(function(e){var n=e.data,i=n.success,o=n.failed;if(200===e.code){if(i.length>0){var r=i[0];t.emitService.emit({type:"add-document",sn:r.sn,parentSn:t.parentSn,categoryId:r.kanban_id}),t.contentSaveExit$.next()}o.length>0&&(t.notification.error(t.translate.instant(String(o[0].code)),""),t.categoryId=N,t.dictionaryId=R)}},function(){})},t.prototype.updateSave=function(e){var t=this,n=Object(i.a)(Object(i.a)({},this.articleBase),{description:JSON.stringify(e)}),o=this.categorySelector.versionDetail;o&&!this.quickSaveCtrl&&(n.revision_record=o),this.knowledgeService.saveArticle([n]).subscribe(function(n){t.quickSaveCtrl||(t.categorySelector.versionDetail=null);var i=n.success,o=n.failed,r=n.unmodify;((null==i?void 0:i.length)||(null==r?void 0:r.length))&&(t.quickSaveCtrl?(t.quickSaveCtrl=!1,t.notification.success(t.translate.instant("UPDATE_SUCCESS"),"",{nzDuration:1500})):(t.emitService.emit({type:"excel-update-finished",title:t.excelTitle,sn:t.sn}),t.onDestroy$.next(),t.contentSaveExit$.next()),t.oldContent=e),(null==o?void 0:o.length)&&t.notification.error(t.translate.instant("SAVEED_FAILED"),"")},function(){})},t.prototype.cancelCreate=function(){this.cancleExit$.next(),this.emitService.emit({type:"excel::wiki-closeModel"}),"update-excel"===this.model&&this.onDestroy$.next()},t.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete(),this.cancleExit$.next()},t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](C.a),o["\u0275\u0275directiveInject"](b.b),o["\u0275\u0275directiveInject"](x.b),o["\u0275\u0275directiveInject"](y.c),o["\u0275\u0275directiveInject"](w.a),o["\u0275\u0275directiveInject"](O.d),o["\u0275\u0275directiveInject"](o.NgZone))},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["app-excel-create"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](k,1),o["\u0275\u0275viewQuery"](T,1)),2&e){var n=void 0;o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.wikiUnlockTipsTemplateRef=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.categorySelector=n.first)}},inputs:{container:"container",checkType:"checkType",model:"model",fullScreenCtrl:"fullScreenCtrl",sn:"sn",articleInfo:"articleInfo",categoryId:"categoryId",dictionaryId:"dictionaryId",currentDomain:"currentDomain",parentSn:"parentSn"},outputs:{eventEmitter:"eventEmitter"},features:[o["\u0275\u0275InheritDefinitionFeature"],o["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:U,decls:7,vars:9,consts:[[1,"excel-component-style"],["class","localhost-info",4,"ngIf"],["class","full-buttons",4,"ngIf"],["class","header-shadow",4,"ngIf"],["wikiUnlockTips",""],[1,"localhost-info"],[1,"fa","fa-exclamation-triangle","font-import-color"],[1,"font-import","block-inline"],[1,"edit-item","f-weight6","font-import","font-import-color",3,"click"],[1,"m-l-3","pull-right","pointer-cursor","font-import","f-14","give-up-draft",3,"click"],[1,"full-buttons"],[1,"buttons","m-r-12"],[1,"cursor-pointer","cancel","position-r",3,"click"],[1,"header-shadow"],[1,"header-input"],["type","text",3,"ngModel","title","ngModelChange","change"],["isTable","true",3,"model","categoryId","dictionaryId","currentDomain","selected"],["categorySelector",""],[1,"unlock-tips"],[1,"tip-left"],[1,"iconfont","icon-warning","icon"],[1,"tip-right"],[1,"tip-title"],[1,"tip-content"],[1,"tip-buttons"],["nz-button","",1,"refuse",3,"click"],["nz-button","",1,"cancle",3,"click"],["nz-button","",1,"save-quit",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275projectionDef"](),o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,D,15,15,"div",1),o["\u0275\u0275template"](2,z,6,3,"div",2),o["\u0275\u0275template"](3,L,6,6,"div",3),o["\u0275\u0275projection"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,V,20,17,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275classMap"](o["\u0275\u0275pureFunction3"](5,j,"check-excel"===t.model&&!t.fullScreenCtrl,"check-excel"!==t.model,t.fullScreenCtrl)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isLocalEditing),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","check-excel"===t.model&&t.fullScreenCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","check-excel"!==t.model))},directives:[_.n,M.d,M.k,M.l,S.a,P.a,E.a,I.a],pipes:[y.b],styles:[".locking-tip-box{width:280px;background-color:#fff;padding:16px;display:flex;flex-direction:column;justify-content:space-between;border-radius:4px;box-shadow:0 0 6px rgba(0,0,0,.14);position:relative}.locking-tip-box .tip-title{color:#5f5f5f;font-size:16px;margin-right:8px}.locking-tip-box .tip-button{margin-top:20px;display:flex;flex-direction:row-reverse}.locking-tip-box .tip-button button{border-radius:4px;font-size:14px;color:#fff;background-color:#23c6c8;border:none;padding:0 9px;height:28px}.locking-tip-box .close-icon{cursor:pointer;position:absolute;color:rgba(0,0,0,.45);padding:8px;top:0;right:0}::ng-deep .locking-tooltip .ant-tooltip-arrow .ant-tooltip-arrow-content{background-color:#fff}::ng-deep .locking-tooltip .ant-tooltip-inner{padding:0;background-color:#fff;box-shadow:none}.reload-tips,.unlock-tips{display:flex;padding:16px}.reload-tips .tip-left,.unlock-tips .tip-left{margin-right:12px;flex:0 0 auto}.reload-tips .tip-left .icon,.unlock-tips .tip-left .icon{font-size:20px;color:#fa0}.reload-tips .tip-right,.unlock-tips .tip-right{flex:1 1 auto}.reload-tips .tip-right .tip-title,.unlock-tips .tip-right .tip-title{font-size:16px;color:#333}.reload-tips .tip-right .tip-content,.unlock-tips .tip-right .tip-content{color:#5f5f5f;font-size:14px;margin:8px 0}.reload-tips .tip-right .tip-buttons,.unlock-tips .tip-right .tip-buttons{display:flex;justify-content:flex-end}.reload-tips .tip-right .tip-buttons button,.unlock-tips .tip-right .tip-buttons button{height:28px;line-height:28px;border-radius:4px;padding:0 11px;margin-right:12px}.reload-tips .tip-right .tip-buttons button.cancle,.unlock-tips .tip-right .tip-buttons button.cancle{color:#23c6c8;border-color:#23c6c8}.reload-tips .tip-right .tip-buttons button.reload,.reload-tips .tip-right .tip-buttons button.save-quit,.unlock-tips .tip-right .tip-buttons button.reload,.unlock-tips .tip-right .tip-buttons button.save-quit{color:#fff;border:none;background-color:#23c6c8}.wait-collab-tips{color:#5f5f5f;padding:18px 16px;background-color:#fff;font-size:12px;box-shadow:0 0 6px rgba(0,0,0,.14);border-radius:4px}::ng-deep .notification-box.ant-notification-notice{padding:0}.excel-component-style.full-check-excel,.excel-component-style.not-check-excel{z-index:99;position:fixed;left:0;right:0;top:0;bottom:0;overflow:hidden;background:#f9f9f9}.excel-component-style.check-excel{position:absolute;z-index:1;left:0;right:0;top:0;bottom:0;overflow:hidden;background:#f9f9f9}.excel-component-style .localhost-info{position:fixed;top:7px;left:50%;transform:translateX(-50%);height:36px;display:flex;align-items:center;justify-content:center;z-index:2;color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc;font-size:12px;padding:5px 5px 6px}.excel-component-style .localhost-info .block-inline{display:inline}.excel-component-style .localhost-info .font-import-color{color:#e45f5f}.excel-component-style .localhost-info .font-import{padding-left:5px}.excel-component-style .localhost-info .give-up-draft{padding-left:0;margin-left:0;text-decoration:underline;color:#909399}.excel-component-style .full-buttons{position:absolute;right:0;top:6px;z-index:1}.excel-component-style .header-shadow{position:absolute;width:100%;height:50px;padding:0 15px 0 20px;display:flex;justify-content:space-between;align-items:center}.excel-component-style .header-shadow .header-input input{outline:none;max-width:200px;border:none;font-size:20px;font-weight:700;background:#f9f9f9}.excel-component-style .header-shadow .title{left:0;font-weight:700;font-style:normal;font-size:16px;color:#676a6c}.excel-component-style .header-shadow+.luckysheet-container{height:calc(100% - 50px);margin-top:50px}.excel-component-style .buttons .cancel{padding:0 12px;border-radius:3px;display:inline-block;height:30px;line-height:30px;background:#eee;color:#676a6c}.excel-component-style .luckysheet-container{width:100%;height:100%}.excel-component-style .luckysheet-container td,.excel-component-style .luckysheet-container th{border:none;padding:0}div#luckysheet-input-box{z-index:101}"],encapsulation:2}),t}(a.a)},UJq8:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){this.eventEmit=new i.EventEmitter}return e.prototype.emit=function(e,t){this.eventEmit.emit(e,t)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}()},WM4a:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("ofXK"),o=n("BbD4"),r=n("3Pt+"),a=n("sYmb"),c=n("dEAy"),l=n("Nqz0"),s=n("PTRe"),d=n("rMZv"),p=n("fXoL"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[o.a,i.c,r.g,a.a.forRoot(),l.c,c.b,s.e,d.d]]}),e}()},XUBH:function(e,t){!function(e){"use strict";var t=function(t,n){e.each(["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"],function(i,o){void 0!==e(t).data(o)&&((n="object"==typeof n?n:{})[o]=e(t).data(o))}),this.$ns="bootstrap-markdown",this.$element=e(t),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=e.extend(!0,{},e.fn.markdown.defaults,n,this.$element.data("options")),this.$oldContent=null,this.$isPreview=!1,this.$isFullscreen=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()};t.prototype={constructor:t,__alterButtons:function(t,n){var i="all"==t,o=this;e.each(this.$handler,function(e,r){0==(!i&&r.indexOf(t)<0)&&n(o.$editor.find('button[data-handler="'+r+'"]'))})},__buildButtons:function(t,n){var i,o=this.$ns,r=this.$handler,a=this.$callback;for(i=0;i<t.length;i++){var c,l=t[i];for(c=0;c<l.length;c++){var s,d=l[c].data,p=e("<div/>",{class:"btn-group"});for(s=0;s<d.length;s++){var u,m,g=d[s],h=o+"-"+g.name,f=this.__getIcon(g.icon),v=g.btnText?g.btnText:"",C=g.btnClass?g.btnClass:"btn",b=g.tabIndex?g.tabIndex:"-1",x=void 0!==g.hotkey?g.hotkey:"",y=void 0!==jQuery.hotkeys&&""!==x?" ("+x+")":"";(u=e("<button></button>")).text(" "+this.__localize(v)).addClass("btn-default btn-sm").addClass(C),C.match(/btn\-(primary|success|info|warning|danger|link)/)&&u.removeClass("btn-default"),u.attr({type:"button",title:this.__localize(g.title)+y,tabindex:b,"data-provider":o,"data-handler":h,"data-hotkey":x}),!0===g.toggle&&u.attr("data-toggle","button"),(m=e("<span/>")).addClass(f),m.prependTo(u),p.append(u),r.push(h),a.push(g.callback)}n.append(p)}}return n},__setListener:function(){var t=void 0!==this.$textarea.attr("rows"),n=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",i=t?this.$textarea.attr("rows"):n;this.$textarea.attr("rows",i),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on({focus:e.proxy(this.focus,this),keyup:e.proxy(this.keyup,this),change:e.proxy(this.change,this),select:e.proxy(this.select,this),drop:e.proxy(this.drop,this),paste:e.proxy(this.paste,this)}),this.eventSupported("keydown")&&this.$textarea.on("keydown",e.proxy(this.keydown,this)),this.eventSupported("keypress")&&this.$textarea.on("keypress",e.proxy(this.keypress,this)),this.$textarea.data("markdown",this)},__handle:function(t){var n=e(t.currentTarget),i=this.$handler,o=this.$callback,r=n.attr("data-handler"),a=o[i.indexOf(r)];e(t.currentTarget).focus(),a(this),this.change(this),this.paste(this),this.drop(this),r.indexOf("cmdSave")<0&&this.$textarea.focus(),t.preventDefault()},__localize:function(t){var n=e.fn.markdown.messages,i=this.$options.language;return void 0!==n&&void 0!==n[i]&&void 0!==n[i][t]?n[i][t]:t},__getIcon:function(e){return"object"==typeof e?e[this.$options.iconlibrary]:e},setFullscreen:function(t){var n=this.$editor,i=this.$textarea;!0===t?(n.addClass("md-fullscreen-mode"),e("body").addClass("md-nooverflow"),this.$options.onFullscreen(this)):(n.removeClass("md-fullscreen-mode"),e("body").removeClass("md-nooverflow"),this.$options.onFullscreenExit(this),!0===this.$isPreview&&this.hidePreview().showPreview()),this.$isFullscreen=t,i.focus()},showEditor:function(){var t,n=this,i=this.$ns,o=this.$element,r=(o.css("height"),o.css("width"),this.$editable),a=this.$handler,c=this.$callback,l=this.$options,s=e("<div/>",{class:"md-editor",click:function(){n.focus()}});if(null===this.$editor){var d=e("<div/>",{class:"md-header btn-toolbar"}),p=[];if(l.buttons.length>0&&(p=p.concat(l.buttons[0])),l.additionalButtons.length>0&&e.each(l.additionalButtons[0],function(t,n){var i=e.grep(p,function(e,t){return e.name===n.name});i.length>0?i[0].data=i[0].data.concat(n.data):p.push(l.additionalButtons[0][t])}),l.reorderButtonGroups.length>0&&(p=p.filter(function(e){return l.reorderButtonGroups.indexOf(e.name)>-1}).sort(function(e,t){return l.reorderButtonGroups.indexOf(e.name)<l.reorderButtonGroups.indexOf(t.name)?-1:l.reorderButtonGroups.indexOf(e.name)>l.reorderButtonGroups.indexOf(t.name)?1:0})),p.length>0&&(d=this.__buildButtons([p],d)),l.fullscreen.enable&&d.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",function(e){e.preventDefault(),n.setFullscreen(!0)}),l.guidance.enables&&d.append('<div class="md-controls"><a class="md-control guidance" title="Guidance" href="#"><i class="iconfont icon-editor-question cursor-pointer"></i></a></div>').on("click",".guidance",function(e){e.preventDefault(),window.open("http://www.jianshu.com/p/q81RER")}),l.saveContent&&d.prepend('<div class="md-controls"><i class="iconfont icon-editor-save cursor-pointer f-14" title="\u4fdd\u5b58"></i></div>').on("click",".icon-editor-save",function(){l.onSaveContentEmit()}),l.enableSwitchRTF&&d.append('<div class="md-controls" style="margin-top: 2px"><i class="iconfont icon-editor-rich-text cursor-pointer" title="\u5207\u6362\u5bcc\u6587\u672c\u7f16\u8f91\u5668"></i></div>').on("click",".icon-editor-rich-text",function(){l.onSwitchToRTF()}),s.append(d),o.is("textarea"))o.before(s),(t=o).addClass("md-input"),s.append(t);else{var u="function"==typeof toMarkdown?toMarkdown(o.html()):o.html(),m=e.trim(u);t=e("<textarea/>",{class:"md-input",val:m}),s.append(t),r.el=o,r.type=o.prop("tagName").toLowerCase(),r.content=o.html(),e(o[0].attributes).each(function(){r.attrKeys.push(this.nodeName),r.attrValues.push(this.nodeValue)}),o.replaceWith(s)}var g,h=e("<div/>",{class:"md-footer"}),f=!1;if(l.savable&&(f=!0,a.push("cmdSave"),c.push(l.onSave),h.append('<button class="btn btn-success" data-provider="'+i+'" data-handler="cmdSave"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")),g="function"==typeof l.footer?l.footer(this):l.footer,""!==e.trim(g)&&(f=!0,h.append(g)),f&&s.append(h),l.width&&"inherit"!==l.width&&(jQuery.isNumeric(l.width)?(s.css("display","table"),t.css("width",l.width+"px")):s.addClass(l.width)),l.height&&"inherit"!==l.height)if(jQuery.isNumeric(l.height)){var v=l.height;d&&(v=Math.max(0,v-d.outerHeight())),h&&(v=Math.max(0,v-h.outerHeight())),t.css("height",v+"px")}else l.height&&"markdownHeightAdaptive"===l.height?t.addClass(l.height):s.addClass(l.height);this.$editor=s,this.$textarea=t,this.$editable=r,this.$oldContent=this.getContent(),this.__setListener(),this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',e.proxy(this.__handle,this)),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this.eventSupported("keydown")&&"object"==typeof jQuery.hotkeys&&d.find('[data-provider="bootstrap-markdown"]').each(function(){var n=e(this),i=n.attr("data-hotkey");""!==i.toLowerCase()&&t.bind("keydown",i,function(){return n.trigger("click"),!1})}),"preview"===l.initialstate?this.showPreview():"fullscreen"===l.initialstate&&l.fullscreen.enable&&this.setFullscreen(!0)}else this.$editor.show();return l.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),l.fullscreen.enable&&!1!==l.fullscreen&&(this.$editor.append('<div class="md-fullscreen-controls"><a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOff)+'"></span></a></div>'),this.$editor.on("click",".exit-fullscreen",function(e){e.preventDefault(),n.setFullscreen(!1)}),this.$editor.append('<div class="md-fullscreen-controls" style="right: 50px;"><a class="md-control guidance" target="_blank" title="Guidance" href="http://www.jianshu.com/p/q81RER"><i class="iconfont icon-editor-question cursor-pointer"></i></a></div>')),this.hideButtons(l.hiddenButtons),this.disableButtons(l.disabledButtons),l.dropZoneOptions&&(this.$editor.dropzone?(l.dropZoneOptions.init||(l.dropZoneOptions.init=function(){var e=0;this.on("drop",function(n){e=t.prop("selectionStart")}),this.on("success",function(n,i){var o=t.val();t.val(o.substring(0,e)+"\n![description]("+i+")\n"+o.substring(e))}),this.on("error",function(e,t,n){console.log("Error:",t)})}),this.$textarea.addClass("dropzone"),this.$editor.dropzone(l.dropZoneOptions)):console.log("dropZoneOptions was configured, but DropZone was not detected.")),l.onShow(this),this},parseContent:function(e){return e=e||this.$textarea.val(),this.$options.parser?this.$options.parser(e):"object"==typeof markdown?markdown.toHTML(e):"function"==typeof markedImg?markedImg(e):e},showPreview:function(){var t,n,i=this.$options,o=this.$textarea,r=o.next(),a=e("<div/>",{class:"md-preview","data-provider":"markdown-preview"});return!0===this.$isPreview||(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview").enableButtons("cmdSave"),t="string"==typeof(n=i.onPreview(this))?n:this.parseContent(),a.html(filterXSS(t)),r&&"md-footer"==r.attr("class")?a.insertBefore(r):o.parent().append(a),a.css({width:o.outerWidth()+"px",height:o.outerHeight()+"px"}),this.$options.resize&&a.css("resize",this.$options.resize),o.hide(),a.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all"))),this},hidePreview:function(){return this.$isPreview=!1,this.$editor.find('div[data-provider="markdown-preview"]').remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(e){return this.$textarea.val(e),this},findSelection:function(e){var t;if((t=this.getContent().indexOf(e))>=0&&e.length>0){var n,i=this.getSelection();return this.setSelection(t,t+e.length),n=this.getSelection(),this.setSelection(i.start,i.end),n}return null},getSelection:function(){var e=this.$textarea[0];return("selectionStart"in e&&function(){var t=e.selectionEnd-e.selectionStart;return{start:e.selectionStart,end:e.selectionEnd,length:t,text:e.value.substr(e.selectionStart,t)}}||function(){return null})()},setSelection:function(e,t){var n=this.$textarea[0];return("selectionStart"in n&&function(){n.selectionStart=e,n.selectionEnd=t}||function(){return null})()},replaceSelection:function(e){var t=this.$textarea[0];return("selectionStart"in t&&function(){return t.value=t.value.substr(0,t.selectionStart)+e+t.value.substr(t.selectionEnd,t.value.length),t.selectionStart=t.value.length,this}||function(){return t.value+=e,jQuery(t)})()},getNextTab:function(){if(0===this.$nextTab.length)return null;var e,t=this.$nextTab.shift();return"function"==typeof t?e=t():"object"==typeof t&&t.length>0&&(e=t),e},setNextTab:function(e,t){if("string"==typeof e){var n=this;this.$nextTab.push(function(){return n.findSelection(e)})}else if("number"==typeof e&&"number"==typeof t){var i=this.getSelection();this.setSelection(e,t),this.$nextTab.push(this.getSelection()),this.setSelection(i.start,i.end)}},__parseButtonNameParam:function(e){return"string"==typeof e?e.split(" "):e},enableButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.removeAttr("disabled")})}),this},disableButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.attr("disabled","disabled")})}),this},hideButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.addClass("hidden")})}),this},showButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.removeClass("hidden")})}),this},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},keyup:function(e){var t=!1;switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var n;if(null!==(n=this.getNextTab())){var i=this;setTimeout(function(){i.setSelection(n.start,n.end)},500),t=!0}else{var o=this.getSelection();o.start==o.end&&o.end==this.getContent().length?t=!1:(this.setSelection(this.getContent().length,this.getContent().length),t=!0)}break;case 13:t=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1),t=!1;break;default:t=!1}t&&(e.stopPropagation(),e.preventDefault()),this.$options.onChange(this)},change:function(e){return this.$options.onChange(this),this},select:function(e){return this.$options.onSelect(this),this},focus:function(t){var n=this.$options,i=this.$editor;return i.addClass("active"),e(document).find(".md-editor").each(function(){var t;e(this).attr("id")!==i.attr("id")&&(null===(t=e(this).find("textarea").data("markdown"))&&(t=e(this).find('div[data-provider="markdown-preview"]').data("markdown")),t&&t.blur())}),n.onFocus(this),this},blur:function(t){var n=this.$options,i=n.hideable,o=this.$editor,r=this.$editable;if(o.hasClass("active")||0===this.$element.parent().length){if(o.removeClass("active"),i)if(null!==r.el){var a=e("<"+r.type+"/>"),c=this.getContent(),l=this.parseContent(c);e(r.attrKeys).each(function(e,t){a.attr(r.attrKeys[e],r.attrValues[e])}),a.html(l),o.replaceWith(a)}else o.hide();n.onBlur(this)}return this},drop:function(e){if(!e.$ns)return e.stopPropagation(),e.preventDefault(),this.$textarea.originalEvent=e.originalEvent,this.$options.onDrop(this),this},paste:function(e){return this.$textarea.originalEvent=e.originalEvent,this.$options.onPaste(this),this}};var n=e.fn.markdown,i="iconfont cursor-pointer f-14";e.fn.markdown=function(n){return this.each(function(){var i=e(this),o=i.data("markdown");o||i.data("markdown",o=new t(this,"object"==typeof n&&n))})},e.fn.markdown.messages={},e.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",parser:null,dropZoneOptions:null,enableDropDataUri:!1,buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:i+" icon-editor-bold",fa:"fa fa-bold","fa-3":"icon-bold",octicons:"octicon octicon-bold"},callback:function(e){var t,n,i=e.getSelection(),o=e.getContent();t=0===i.length?e.__localize("strong text"):i.text,"**"===o.substr(i.start-2,2)&&"**"===o.substr(i.end,2)?(e.setSelection(i.start-2,i.end+2),e.replaceSelection(t),n=i.start-2):(e.replaceSelection("**"+t+"**"),n=i.start+2),e.setSelection(n,n+t.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:i+" icon-editor-italic",fa:"fa fa-italic","fa-3":"icon-italic",octicons:"octicon octicon-italic"},callback:function(e){var t,n,i=e.getSelection(),o=e.getContent();t=0===i.length?e.__localize("emphasized text"):i.text,"_"===o.substr(i.start-1,1)&&"_"===o.substr(i.end,1)?(e.setSelection(i.start-1,i.end+1),e.replaceSelection(t),n=i.start-1):(e.replaceSelection("_"+t+"_"),n=i.start+1),e.setSelection(n,n+t.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:i+" icon-editor-heading",fa:"fa fa-header","fa-3":"icon-font",octicons:"octicon octicon-text-size"},callback:function(e){var t,n,i,o,r=e.getSelection(),a=e.getContent();t=0===r.length?e.__localize("heading text"):r.text+"\n","### "===a.substr(r.start-(i=4),i)||"###"===a.substr(r.start-(i=3),i)?(e.setSelection(r.start-i,r.end),e.replaceSelection(t),n=r.start-i):r.start>0&&(o=a.substr(r.start-1,1))&&"\n"!=o?(e.replaceSelection("\n\n### "+t),n=r.start+6):(e.replaceSelection("### "+t),n=r.start+4),e.setSelection(n,n+t.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:i+" icon-editor-link",fa:"fa fa-link","fa-3":"icon-link",octicons:"octicon octicon-link"},callback:function(t){var n,i,o,r=t.getSelection();t.getContent(),n=0===r.length?t.__localize("enter link description here"):r.text,o=prompt(t.__localize("Insert Hyperlink"),"http://");var a=new RegExp("^((http|https)://|(mailto:)|(//))[a-z0-9]","i");if(null!==o&&""!==o&&"http://"!==o&&a.test(o)){var c=e("<div>"+o+"</div>").text();t.replaceSelection("["+n+"]("+c+")"),t.setSelection(i=r.start+1,i+n.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:i+" icon-editor-list",fa:"fa fa-list","fa-3":"icon-list-ul",octicons:"octicon octicon-list-unordered"},callback:function(t){var n,i,o=t.getSelection();if(t.getContent(),0===o.length)n=t.__localize("list text here"),t.replaceSelection("- "+n),i=o.start+2;else if(o.text.indexOf("\n")<0)t.replaceSelection("- "+(n=o.text)),i=o.start+2;else{var r=[];n=(r=o.text.split("\n"))[0],e.each(r,function(e,t){r[e]="- "+t}),t.replaceSelection("\n\n"+r.join("\n")),i=o.start+4}t.setSelection(i,i+n.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:i+" icon-editor-order-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol",octicons:"octicon octicon-list-ordered"},callback:function(t){var n,i,o=t.getSelection();if(t.getContent(),0===o.length)n=t.__localize("list text here"),t.replaceSelection("1. "+n),i=o.start+3;else if(o.text.indexOf("\n")<0)t.replaceSelection("1. "+(n=o.text)),i=o.start+3;else{var r=1,a=[];n=(a=o.text.split("\n"))[0],e.each(a,function(e,t){a[e]=r+". "+t,r++}),t.replaceSelection("\n\n"+a.join("\n")),i=o.start+5}t.setSelection(i,i+n.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:i+" icon-editor-code",fa:"fa fa-code","fa-3":"icon-code",octicons:"octicon octicon-code"},callback:function(e){var t,n,i=e.getSelection(),o=e.getContent();t=0===i.length?e.__localize("code text here"):i.text,"```\n"===o.substr(i.start-4,4)&&"\n```"===o.substr(i.end,4)?(e.setSelection(i.start-4,i.end+4),e.replaceSelection(t),n=i.start-4):"`"===o.substr(i.start-1,1)&&"`"===o.substr(i.end,1)?(e.setSelection(i.start-1,i.end+1),e.replaceSelection(t),n=i.start-1):o.indexOf("\n")>-1?(e.replaceSelection("```\n"+t+"\n```"),n=i.start+4):(e.replaceSelection("`"+t+"`"),n=i.start+1),e.setSelection(n,n+t.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:i+" icon-editor-quotation",fa:"fa fa-quote-left","fa-3":"icon-quote-left",octicons:"octicon octicon-quote"},callback:function(t){var n,i,o=t.getSelection();if(t.getContent(),0===o.length)n=t.__localize("quote here"),t.replaceSelection("> "+n),i=o.start+2;else if(o.text.indexOf("\n")<0)t.replaceSelection("> "+(n=o.text)),i=o.start+2;else{var r=[];n=(r=o.text.split("\n"))[0],e.each(r,function(e,t){r[e]="> "+t}),t.replaceSelection("\n\n"+r.join("\n")),i=o.start+4}t.setSelection(i,i+n.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search",octicons:"octicon octicon-search"},callback:function(e){!1===e.$isPreview?e.showPreview():e.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full",octicons:"octicon octicon-link-external"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small",octicons:"octicon octicon-browser"}}},guidance:{enables:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"fa fa-question","fa-3":"icon-resize-full",octicons:"octicon octicon-link-external"},fullscreenOff:{fa:"fa fa-compress",glyph:"fa fa-question","fa-3":"icon-resize-small",octicons:"octicon octicon-browser"}}},onShow:function(e){},onPreview:function(e){},onSave:function(e){},onBlur:function(e){},onFocus:function(e){},onChange:function(e){},onPaste:function(e){},onDrop:function(e){},onFullscreen:function(e){},onFullscreenExit:function(e){},onSelect:function(e){}},e.fn.markdown.Constructor=t,e.fn.markdown.noConflict=function(){return e.fn.markdown=n,this};var o=function(e){var t=e;t.data("markdown")?t.data("markdown").showEditor():t.markdown()};e(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(t){o(e(this)),t.preventDefault()}).on("click focusin",function(t){var n;n=e(document.activeElement),e(document).find(".md-editor").each(function(){var t=e(this),i=n.closest(".md-editor")[0]===this,o=t.find("textarea").data("markdown")||t.find('div[data-provider="markdown-preview"]').data("markdown");o&&!i&&o.blur()})}).ready(function(){e('textarea[data-provide="markdown"]').each(function(){o(e(this))})})}(jQuery)},Z9Gr:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("ofXK"),o=n("sYmb"),r=n("3Pt+"),a=n("cAPe"),c=n("+jTH"),l=n("fXoL"),s=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[i.c,o.a,r.g,a.a,c.a]]}),e}()},ZV1T:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL"),o=n("jhN1"),r=function(){function e(e){this.sanitizer=e}return e.prototype.transform=function(e){return this.sanitizer.bypassSecurityTrustHtml(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.b))},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"to_trusted",type:e,pure:!0}),e}()},ZXE5:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("fXoL"),o=n("6eBy"),r=n("hbEN"),a=n("XNiG"),c=n("l5mm"),l=n("PqYM"),s=n("VRyK"),d=n("LRne"),p=n("xgIS"),u=n("y7eE"),m=n("A/Mn"),g=n("sYmb"),h=n("bNXi"),f=n("UJq8"),v=n("/Kk4"),C=n("cbLU"),b=n("3Pt+"),x=n("JXZa"),y=n("ofXK"),w=["richTextRemoterScroll"],O=function(e){return{width:e}},_=function(){function e(e,t,n,o,c){var l=this;this.knowledgeService=e,this.translate=t,this.notification=n,this.emitService=o,this.resizeObserver=c,this.model="create-template",this.articleTitle="",this.articleUiSource="rich-text",this.articleDescription="",this.templateEmitter=new i.EventEmitter,this.origin="template",this.getContentEventSubject=new a.a,this.articleOutlineArr=[],this.editContentScroll=!0,this.editScrollMarPadd=10,this.articlePaddingVal=90,this.mdOptions={hiddenButtons:["cmdPreview"],fullscreen:{enable:!1,icons:{}},autoGrowing:!0},this.getArticleOutlineDelay=Object(r.a)(function(){l.getArticleOutline("create-template",l.articleTitle)},1e4),this.richTextEditorId="create-template",this.richTextRemoterShow=!1,this.richTextRemoterInnerWidth=100,this.isImgLazyLoaded=!1,this.imgLoadedHanlder=Object(r.a)(function(e){l.isImgLazyLoaded=!0,l.getArticleOutline("create-template",l.articleTitle)},2e3),System.import("/shared-ui/knowledge-ui.ce.js")}return Object.defineProperty(e.prototype,"editorToolbarId",{get:function(){return this.richTextEditorId+"-toolbar"},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.emitService.eventEmit.subscribe(function(t){var n;if(t.origin===e.origin)if("outline-position"===t.type)e.positionActiveElement(t.data.titleId);else if(t&&"after-component-change-description"===t.type)if(e.isImgLazyLoaded){for(var i=null===(n=null==e?void 0:e.articleOutlineArr)||void 0===n?void 0:n.length,o=0;o<i;o++){var r=e.articleOutlineArr[o],a=null==t?void 0:t.arr[o];r.startTop=null==a?void 0:a.startTop,r.endTop=null==a?void 0:a.endTop}e.isImgLazyLoaded=!1}else e.articleOutlineArr=t.arr})},e.prototype.ngAfterViewInit=function(){this.initEditor()},e.prototype.beforeUpdateTemplate=function(){this.getContentEventSubject.next({clearCache:!0,eventType:"save-data"})},e.prototype.closeModal=function(){this.emitService.emit({type:"close-create-template"})},e.prototype.descriptionChange=function(e){if(this.setRemoter(e),"save-data"===e.eventType){if(this.articleDescription=e.description,this.articleUiSource=e.type,this.articleTitle=e.title?e.title:this.articleTitle,!this.articleDescription)return void this.notification.error(this.translate.instant("EMPTY_TEMPLATE_TITLE"),"");if(!this.articleTitle)return void this.notification.success(this.translate.instant("EMPTY_TEMPLATE_CONTENT"),"");"update-template"===this.model?this.updateTemplate():"create-template"===this.model&&this.createTemplate()}},e.prototype.getChangedEditorType=function(e){(null==e?void 0:e.type)&&(this.articleUiSource=e.type,"rich-text"===this.articleUiSource&&this.initEditor())},e.prototype.emitEvent=function(e){this.templateEmitter.emit(e)},e.prototype.createTemplate=function(){var e=this;this.knowledgeService.createWikiTemplate([{title:this.articleTitle,description:this.articleDescription,ui_source:"rich-text"===this.articleUiSource?1:2,assigned_domain:this.currentDomain?this.currentDomain:"",type:"team"}]).subscribe(function(t){0===t.success.length&&0!==t.failed.length?e.notification.success(e.translate.instant("CREATE_FAILED"),""):0!==t.success.length&&(e.notification.success(e.translate.instant("CREATE_SUCCESS"),""),e.emitService.emit({type:"create-template-success"}))},function(){})},e.prototype.updateTemplate=function(){var e=this;this.knowledgeService.updateWikiTemplate({number:this.number,title:this.articleTitle,description:this.articleDescription,ui_source:"rich-text"===this.articleUiSource?1:2}).subscribe(function(t){e.notification.success(e.translate.instant("UPDATE_SUCCESS"),""),e.emitService.emit({type:"update-template-success"})},function(){})},e.prototype.getArticleOutline=function(e,t){this.isImgLazyLoaded||(this.articleOutlineArr=[]),this.emitService.emit({type:"article-outline-get-outline-arr",data:{id:e,articleRealTitle:t,firstChildDom:document.getElementById("create-template").firstChild},origin:this.origin,isImgLazyLoaded:this.isImgLazyLoaded})},e.prototype.initEditor=function(){var e=this;if("rich-text"===this.articleUiSource)var t=Object(c.a)(100).pipe(Object(o.a)(function(e){return Object(l.a)(2*e)})).subscribe(function(n){var i=document.getElementById("template-scroll-body");i&&(i.removeEventListener("scroll",null),i.addEventListener("scroll",e.articleEditScrollFunc.bind(e)),t.unsubscribe())})},e.prototype.articleEditScrollFunc=function(){this.editContentScroll&&this.articleScroll()},e.prototype.articleScroll=function(){var e=this.articleOutlineArr.length;this.articleOutlineArr&&e>0&&document.getElementById("create-template")&&this.findFinishedDom(this.articleOutlineArr[e-1].titleId)},e.prototype.positionActiveElement=function(e){var t=this;this.editContentScroll=!1;var n=document.getElementById("template-scroll-body"),i=document.getElementById("create-template"),o=i.firstChild.getBoundingClientRect(),r=i.lastChild,a=r&&r.getBoundingClientRect(),c=document.getElementById(e).getBoundingClientRect(),l=n.getBoundingClientRect(),s=Math.abs(c.top-o.top)+10,d=a.bottom-o.top-l.height+20;s>d&&(s=d),n.scrollTop=s+this.articlePaddingVal,setTimeout(function(){t.editContentScroll=!0})},e.prototype.findFinishedDom=function(e){if(document.getElementById(e))for(var t=document.getElementById("template-scroll-body").scrollTop-this.articlePaddingVal,n=JSON.parse(localStorage.getItem("outlineActiveTitle")),i=0;i<this.articleOutlineArr.length;i++){var o=this.articleOutlineArr[i];if(o.startTop<t&&t<o.endTop){if(n&&n.titleId!==o.titleId||!n){Object(u.c)("outlineActiveTitle",JSON.stringify(o));var r={type:"scroll-active-outline-title",data:o};this.scrollTitleId=r.data.titleId,this.emitService.emit(r)}return}}},e.prototype.getElementTopVal=function(e,t){var n,i=document.getElementById(e),o=i&&i.getBoundingClientRect();return o&&t&&(n=Math.abs(o.top-t.top)),n},e.prototype.ngOnDestroy=function(){document.getElementById("template-scroll-body").removeEventListener("scroll",null)},e.prototype.onRemoterScroll=function(){var e=this.richTextRemoterScroll.nativeElement,t=this.richTextWrapper;t.scrollLeft=e.scrollLeft/(e.scrollWidth-e.clientWidth)*(t.scrollWidth-t.clientWidth)},e.prototype.setRemoter=function(e){var t=this;if("rich-text"===e.type){var n=document.querySelector("#"+this.richTextEditorId+".doc-cnt"),i=n.scrollWidth>n.clientWidth;this.richTextRemoterShow=i,this.richTextWrapper=n,i&&(this.wrapperScrollSubscription&&this.wrapperScrollSubscription.unsubscribe(),this.wrapperScrollSubscription=Object(s.a)(Object(d.a)(),this.resizeObserver.observe(n),Object(p.a)(window,"resize")).subscribe(function(){t.richTextRemoterInnerWidth=n.scrollWidth,t.richTextRemoterScroll.nativeElement.scrollLeft=n.scrollLeft}))}else this.richTextRemoterShow=!1},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](m.b),i["\u0275\u0275directiveInject"](g.c),i["\u0275\u0275directiveInject"](h.b),i["\u0275\u0275directiveInject"](f.a),i["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-create-template"]],viewQuery:function(e,t){var n;1&e&&i["\u0275\u0275viewQuery"](w,1),2&e&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.richTextRemoterScroll=n.first)},inputs:{model:"model",articleTitle:"articleTitle",articleUiSource:"articleUiSource",articleDescription:"articleDescription",number:"number",currentDomain:"currentDomain"},outputs:{templateEmitter:"templateEmitter"},decls:29,vars:19,consts:[[1,"create-article-wrapper"],[1,"header-shadow"],[1,"toolbar",3,"id"],[1,"article-wrapper","active-full-screen"],[1,"create-article-header","flex-j-sb"],[1,"title","position-r",3,"textContent"],[1,"other-span-container"],[1,"cursor-pointer","create-to",3,"click"],[1,"iconfont","icon-save","cursor-pointer",2,"margin-right","0"],[3,"textContent"],[1,"iconfont","icon-close","cursor-pointer","f-20",3,"click"],[1,"content","flex","flex-j-sb","m-t-20"],[1,"left"],["id","scrollParentOutline",1,"article-outline-wrap","slimScrollBar"],["id","topPositionOutline",1,"top-position-styl"],[3,"origin"],["id","bottomPositionOutline",1,"top-position-styl"],[1,"center"],[1,"create-template-box","full-height"],[1,"create-article-body","full-height","position-r"],["id","template-scroll-body",1,"slimScrollBar","scroll-body","full-width","full-height"],["type","text","placeholder","\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898...",1,"article-title","p-l-20","p-r-20","t-a-l",3,"ngModel","ngModelChange"],[1,"create-template-container",3,"toolbarContailerSelector","richTextId","type","description","getContentEvent","markdownOptions","visionOnEditorChanged","getEditorContent","imgLoaded"],[1,"remote-scroll","slimScrollBar",3,"hidden","scroll"],["richTextRemoterScroll",""],[1,"remote-scroll-inner",3,"ngStyle"],[1,"right"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275element"](2,"div",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275element"](5,"div",5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275elementStart"](8,"span",7),i["\u0275\u0275listener"]("click",function(){return t.beforeUpdateTemplate()}),i["\u0275\u0275element"](9,"span",8),i["\u0275\u0275element"](10,"span",9),i["\u0275\u0275pipe"](11,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"span",10),i["\u0275\u0275listener"]("click",function(){return t.closeModal()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",11),i["\u0275\u0275elementStart"](14,"div",12),i["\u0275\u0275elementStart"](15,"div",13),i["\u0275\u0275element"](16,"div",14),i["\u0275\u0275element"](17,"article-outline",15),i["\u0275\u0275element"](18,"div",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"div",17),i["\u0275\u0275elementStart"](20,"div",18),i["\u0275\u0275elementStart"](21,"div",19),i["\u0275\u0275elementStart"](22,"div",20),i["\u0275\u0275elementStart"](23,"input",21),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.articleTitle=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"vision-editor",22),i["\u0275\u0275listener"]("visionOnEditorChanged",function(e){return t.getArticleOutlineDelay(),t.getChangedEditorType(e)})("getEditorContent",function(e){return t.descriptionChange(e)})("imgLoaded",function(e){return t.imgLoadedHanlder(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"div",23,24),i["\u0275\u0275listener"]("scroll",function(){return t.onRemoterScroll()}),i["\u0275\u0275element"](27,"div",25),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](28,"div",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("id",t.editorToolbarId),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](6,13,"update-template"==t.model?"UPDATE_TEMPLATE":"CREATE_NEW_TEMPLATE")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](11,15,"COMMON_BTN_SAVE")),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("origin",t.origin),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",t.articleTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("toolbarContailerSelector","#"+t.editorToolbarId)("richTextId",t.richTextEditorId)("type",t.articleUiSource)("description",t.articleDescription)("getContentEvent",t.getContentEventSubject.asObservable())("markdownOptions",t.mdOptions),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hidden",!t.richTextRemoterShow),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](17,O,t.richTextRemoterInnerWidth+"px")))},directives:[C.a,b.d,b.k,b.l,x.a,y.o],pipes:[g.b],styles:[".create-article-wrapper[_ngcontent-%COMP%]{z-index:99;position:fixed;top:0;right:0;bottom:0;width:100%;background:#f9f9f9;overflow:auto}.create-article-wrapper[_ngcontent-%COMP%]   .active-full-screen[_ngcontent-%COMP%]{width:100%!important;height:100%;top:0;margin-top:0!important}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]{position:absolute;height:50px;background:#fff;width:100%;box-shadow:0 4px 6px rgba(0,0,0,.04);display:flex;justify-content:center;align-items:center}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]    {z-index:1;flex:0 1 60%}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header{display:flex;align-items:center}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header .md-controls{width:30px;text-align:center}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]{width:1150px;background:#f9f9f9;padding:0 15px;margin:50px auto auto}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]{color:#676a6c;display:flex;align-items:center;height:50px}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-style:normal;font-size:16px;color:#676a6c}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]   .header-new[_ngcontent-%COMP%]{flex:1}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]   .other-span-container[_ngcontent-%COMP%]{position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]   .other-span-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px;vertical-align:middle}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]   .other-span-container[_ngcontent-%COMP%]   .create-to[_ngcontent-%COMP%]{padding:4px;background-color:#23c6c8f8;color:#fff;border-radius:4px;display:inline-flex;align-items:center}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]{margin:auto}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;margin:10px 0 0;height:70px;outline:none;font-weight:700;font-style:normal;font-size:26px;color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   .scroll-body[_ngcontent-%COMP%]{margin:auto;height:100%;overflow-y:auto;box-shadow:0 0 8px rgba(0,0,0,.02);background:#fff}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   .input-shadow[_ngcontent-%COMP%]{background:#fff;box-shadow:0 -2px 4px 0 rgba(0,0,0,.04)}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc;font-size:12px;margin:5px 0}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]   .pull-right[_ngcontent-%COMP%]{float:right}.content[_ngcontent-%COMP%]{height:calc(100% - 70px)}.content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{flex:1;overflow:hidden}.content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{width:60%}.content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]     .create-template-box .MD-and-richtext-editor{border-top:1px solid #ddd}[_nghost-%COMP%]     .create-template-box .box{background:#fff;box-shadow:0 0 6px rgba(0,0,0,.04)}[_nghost-%COMP%]     .create-template-box .tag-list .ant-dropdown-link{margin-left:0!important}.create-template-box[_ngcontent-%COMP%]   .remote-scroll[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;overflow:scroll hidden}.create-template-box[_ngcontent-%COMP%]   .remote-scroll[_ngcontent-%COMP%]   .remote-scroll-inner[_ngcontent-%COMP%]{width:150%;height:1px}"]}),e}()},aDQL:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var i=n("jifJ"),o=n("AytR");function r(){var e;return window.communicationService.socket||(e=Object(i.io)(o.a.socketUIHost,{path:"/socket-ui",transports:["websocket"],reconnectionAttempts:10,reconnectionDelayMax:1e4}),window.communicationService.socket=e),window.communicationService.socket}function a(e,t){return r().on(e,t),{off:function(){r().off(e,t)}}}},bBxm:function(e,t,n){"use strict";function i(e){var t=localStorage.getItem("NG_TRANSLATE_LANG_KEY")||"zh";e.use(t);var i=n("nOq7")("./"+t+".json");e.setTranslation(t,i,!0)}n.d(t,"a",function(){return i})},bWbh:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("ofXK"),o=n("nJia"),r=n("sYmb"),a=n("fXoL"),c=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[i.c,o.b,r.a]]}),e}()},cAPe:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("ofXK"),o=n("3Pt+"),r=n("dEAy"),a=n("nxWG"),c=n("PTRe"),l=n("FwiY"),s=(n("1Eq8"),n("+2qM"),n("fXoL")),d=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[{provide:"config",useValue:t}]}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[i.c]]}),e}(),p=n("sYmb"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[i.c,p.a]]}),e}(),m=n("Fpfz"),g=n("iw3d"),h=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[i.c,p.a,o.g,p.a]]}),e}(),f=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({providers:[m.a,p.c],imports:[[i.c,o.g,d.forRoot({iconlibrary:"glyph"}),u,r.b,p.a.forChild(),a.b,c.e,l.b,g.a,h]]}),e}()},cbLU:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("mrSG"),o=n("vRWp"),r=n("y7eE"),a=n("fXoL"),c=n("UJq8"),l=n("tyNb"),s=n("e49q"),d=n("ofXK"),p=function(e){return{"padding-left":e}};function u(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"li",3),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"](2).positionTitle(e)}),a["\u0275\u0275elementStart"](1,"div",4),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=a["\u0275\u0275nextContext"](2);a["\u0275\u0275classProp"]("active-li-styl",i.titleId==o.scrollTitleId)("title-no-li-dot","wikiArticleTitleId"==i.titleId)("active-li-border",!o.needBorder),a["\u0275\u0275property"]("id",i.outlineTitleId)("ngStyle",a["\u0275\u0275pureFunction1"](12,p,12*i.indentationLevel+"px"))("title",i.realTitle),a["\u0275\u0275advance"](1),a["\u0275\u0275classProp"]("outline-li-title-styl",!i.indentationLevel),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](i.realTitle)}}function m(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"ul",1),a["\u0275\u0275template"](2,u,3,14,"li",2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275classProp"]("article-wrapper",n.needBorder),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.isEdit?n.articleOutlineList:n.articleOutlineArr)}}var g=function(){function e(e,t,n){this.emitService=e,this.activeRoute=t,this.globalVariablesService=n,this.desLevel=0,this.origin="",this.needBorder=!1,this.isEdit=!1,this.articleOutlineArr=[],this.articleIdArr=[],this.scrollTitleId="wikiArticleTitleId",this.tagList=["H1","H2","H3","H4","H5","H6"],this.articleOutlineList=[]}return e.prototype.ngOnInit=function(){var e=this,t=this.activeRoute.snapshot.queryParamMap.get("title");t&&(this.scrollTitleId=t),this.emitServiceSub=this.emitService.eventEmit.subscribe(function(t){var n,i;t&&"scroll-active-outline-title"==t.type?e.scrollTitleId=t.data.titleId:t&&"article-outline-get-outline-arr"==t.type&&t.origin===e.origin&&(e.awaitToChangeDesc=t.data,e.isImgLazyLoaded=t.isImgLazyLoaded,e.isImgLazyLoaded?e.imgLoadedPositionVal():e.replaceStrCreateObj()),t&&(null===(n=t.type)||void 0===n?void 0:n.includes("markdown-mode"))&&(e.scrollTitleId=null===(i=e.articleOutlineArr[0])||void 0===i?void 0:i.titleId)})},e.prototype.imgLoadedPositionVal=function(){var e=this;this.articleOutlineArr.forEach(function(t,n){var i=document.getElementById(t.titleId),o=e.getElementTopVal(i);n&&(e.articleOutlineArr[n-1].endTop=o),e.articleOutlineArr[n].startTop=o}),this.emitService.emit({arr:this.articleOutlineArr,type:"after-component-change-description",origin:this.origin})},e.prototype.positionTitle=function(e){this.scrollTitleId=e.titleId,this.emitService.emit({type:"outline-position",data:e,origin:this.origin})},e.prototype.positionActiveElement=function(e){this.parent||(this.parent=document.getElementById("scrollParentOutline")),this.topElementDom||(this.topElementDom=document.getElementById("topPositionOutline"));var t=this.topElementDom&&this.topElementDom.getBoundingClientRect();this.element||(this.element=document.getElementById("bottomPositionOutline"));var n=this.element&&this.element.getBoundingClientRect(),i=document.getElementById(e),o=i&&i.getBoundingClientRect(),r=(this.parent&&this.parent.getBoundingClientRect()).height,a=n.top-t.top-r+30,c=Math.abs(o.top-t.top)-r/2;Math.abs(o.top-t.top)<=r/2&&(c=0),Math.abs(o.top-n.top)<=r/2&&(c=a),c>a&&(c=a),this.parent.scrollTop=c},e.prototype.DepthTraversalCallback=function(e,t){var n=this;setTimeout(function(){var o;if(e&&t){var r=document.getElementById(t);(null===(o=null==r?void 0:r.childNodes)||void 0===o?void 0:o.length)&&n.DepthTraversal(r,t),n.articleOutlineList=Object(i.i)(n.articleOutlineArr),n.emitService.emit({arr:n.articleOutlineArr,type:"after-component-change-description",origin:n.origin})}},100)},e.prototype.DepthTraversal=function(e,t){if(e){if(this.tagList.includes(e.tagName)&&""!=e.innerText.trim()){var n={realTitle:"",labelTitle:"",indentationLevel:0,titleId:"",outlineTitleId:"",tagLabel:"",startTop:0,endTop:0};if(e.getAttribute("id"))n.realTitle="vditorReset"===t?e.innerText.replace(/#/g,""):e.innerText,n.tagLabel=e.tagName.substring(1,2),e.className.includes("max-level")||(n.tagLabel=String(Number(n.tagLabel)+this.desLevel)),n.titleId=e.getAttribute("id"),(this.articleIdArr.includes(n.titleId)||["vditorScrollParent","vditorReset","previewNewMD"].includes(t))&&(i=this.createUUID(),n.titleId=String(i),e.setAttribute("id","vditorReset"===t?"ir_"+i:i)),n.labelTitle=e.innerHTML,n.outlineTitleId="outline"+n.titleId,o=this.getElementTopVal(e),(a=this.articleOutlineArr.length)&&(this.articleOutlineArr[a-1].endTop=o),n.startTop=o,this.articleOutlineArr.push(n),this.articleIdArr.push(n.titleId),n.indentationLevel=Number(n.tagLabel)+1;else{var i=this.createUUID();e.setAttribute("id",i),n.realTitle=e.innerText,n.labelTitle=e.innerHTML,n.tagLabel=e.tagName.substring(1,2),e.className.includes("max-level")||(n.tagLabel=String(Number(n.tagLabel)+this.desLevel)),n.titleId=String(i),n.outlineTitleId="outline"+i;var o=this.getElementTopVal(e);(a=this.articleOutlineArr.length)&&(this.articleOutlineArr[a-1].endTop=o),n.startTop=o,this.articleOutlineArr.push(n),this.articleIdArr.push(n.titleId),n.indentationLevel=Number(n.tagLabel)+1}}if(e.childNodes&&e.childNodes.length)for(var r=0,a=e.childNodes.length;r<a;r++)this.DepthTraversal(e.childNodes[r],t)}},e.prototype.getElementTopVal=function(e){var t,n=this.awaitToChangeDesc.firstChildDom,i=n&&n.getBoundingClientRect(),o=e&&e.getBoundingClientRect();return o&&i&&(t=Math.abs(o.top-i.top)),t},e.prototype.replaceStrCreateObj=function(){this.articleRealTitle=this.awaitToChangeDesc.articleRealTitle,this.articleOutlineArr=[],this.articleIdArr=[],this.articleOutlineArr.unshift({realTitle:this.articleRealTitle,labelTitle:"",indentationLevel:0,titleId:"wikiArticleTitleId",outlineTitleId:"outlinewikiArticleTitleId",tagLabel:"0",startTop:0,endTop:0}),this.queryDomObservable&&this.queryDomObservable.unsubscribe(),this.queryDomObservable=Object(r.b)(this.awaitToChangeDesc.id,this.DepthTraversalCallback.bind(this))},e.prototype.getRandomNum=function(){return(65536*(1+Object(o.a)())|0).toString(16).substring(1)},e.prototype.createUUID=function(){return this.getRandomNum()+this.getRandomNum()+"-"+this.getRandomNum()+"-"+this.getRandomNum()+"-"+this.getRandomNum()+"-"+this.getRandomNum()+this.getRandomNum()+this.getRandomNum()},e.prototype.ngOnDestroy=function(){this.emitServiceSub.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["article-outline"]],inputs:{desLevel:"desLevel",origin:"origin",needBorder:"needBorder",isEdit:"isEdit"},decls:1,vars:1,consts:[[3,"article-wrapper",4,"ngIf"],[1,"outline-ul-styl"],["class","outline-li-styl",3,"id","ngStyle","active-li-styl","title-no-li-dot","active-li-border","title","click",4,"ngFor","ngForOf"],[1,"outline-li-styl",3,"id","ngStyle","title","click"],[1,"overfolw-eclipis","outline-li-content-styl"]],template:function(e,t){1&e&&a["\u0275\u0275template"](0,m,3,3,"div",0),2&e&&a["\u0275\u0275property"]("ngIf",t.isEdit?t.articleOutlineList.length:t.articleOutlineArr.length)},directives:[d.n,d.m,d.o],styles:['.outline-ul-styl[_ngcontent-%COMP%]{padding:0}.outline-ul-styl[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]{font-weight:700;border-left:2px solid #23c6c8;margin-left:-2px!important;position:relative;z-index:2}.outline-ul-styl[_ngcontent-%COMP%]   .active-li-border[_ngcontent-%COMP%]{border:0}.outline-ul-styl[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]:before{background:#23c6c8!important}.outline-ul-styl[_ngcontent-%COMP%]   .outline-li-content-styl[_ngcontent-%COMP%]{width:100%;padding-left:10px}.outline-ul-styl[_ngcontent-%COMP%]   .outline-li-title-styl[_ngcontent-%COMP%]{width:82%}.outline-ul-styl[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%], .outline-ul-styl[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]{list-style:none;cursor:pointer;height:26px;color:#686868;font-size:14px;position:relative}.outline-ul-styl[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%]:before{width:4px;height:4px;border-radius:50%;position:absolute;background:#999;content:"";top:10px}.outline-ul-styl[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%]:hover{font-weight:700}.outline-ul-styl[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]:before{background:#fff!important}.overfolw-eclipis[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.article-wrapper[_ngcontent-%COMP%]{border-left:2px solid #ddd}']}),e}()},cnMA:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("ofXK"),o=n("zAKX"),r=n("eHCX"),a=n("5vDB"),c=n("TaO5"),l=n("sYmb"),s=n("3Pt+"),d=n("bE2y"),p=n("fXoL"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[i.c,o.g,l.a,s.g,c.b,r.b,a.b,d.d]]}),e}()},"d/Su":function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return d});var i=n("VRyK"),o=n("xgIS"),r=n("1G5W"),a=n("AytR").a.GRAY_WIKI_COLLAB_DOMAIN_IDS,c={hiddenButtons:["cmdPreview"],fullscreen:{enable:!1,icons:{}},autoGrowing:!0};function l(e,t,n){var a=t.nativeElement;Object(i.a)(e.resizeObserver.observe(a),Object(o.a)(window,"resize")).pipe(Object(r.a)(e.onDestroy$)).subscribe(function(){var t=a.clientWidth;(!n&&null===localStorage.getItem("normalWikiOutlineCollapse")||n&&null===localStorage.getItem("workitemWikiOutlineCollapse"))&&(e.outlineCollapse=t<1600),(!n&&null===localStorage.getItem("normalWikiShowTemplate")||n&&null===localStorage.getItem("workitemWikiShowTemplate"))&&(e.showTemplate=t>=1e3)})}function s(e){83==window.event.keyCode&&event.ctrlKey&&(event.preventDefault(),e())}function d(){if("OPEN_ALL"===a)return!0;var e=location.href.match(/domains\/(\d+)\/wiki/);if(!e)return!1;var t=e[1];return a.split(",").includes(t)}},ebHz:function(e,t,n){"use strict";n.d(t,"a",function(){return K});var i=n("mrSG"),o=n("fXoL"),r=n("itXk"),a=n("hbEN"),c=n("XIp8"),l=n("CpTu"),s=n("lE2N"),d=n("A/Mn"),p=n("bNXi"),u=n("sYmb"),m=n("UJq8"),g=n("ofXK"),h=n("eHCX"),f=n("zAKX"),v=n("3Pt+");function C(e,t){if(1&e&&o["\u0275\u0275element"](0,"input",23),2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("checked","default"==n.selectedAccessType)}}function b(e,t){1&e&&o["\u0275\u0275element"](0,"img",24),2&e&&o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/arrow.svg",o["\u0275\u0275sanitizeUrl"])}function x(e,t){1&e&&o["\u0275\u0275element"](0,"img",25),2&e&&o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/arrow.svg",o["\u0275\u0275sanitizeUrl"])}function y(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"SPACE_VISIBILE")))}function w(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"PUBLIC_VISIBILE")))}function O(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"PRIVACY_VISIBILE")))}function _(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",30),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("nzEllipsisRows",1),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.visibleContent," ")}}function M(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",30),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("nzEllipsisRows",1),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.editContent," ")}}function S(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",26),o["\u0275\u0275elementStart"](1,"div",27),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275template"](4,y,3,3,"span",5),o["\u0275\u0275template"](5,w,3,3,"span",5),o["\u0275\u0275template"](6,O,3,3,"span",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div"),o["\u0275\u0275elementStart"](8,"div",28),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,_,2,2,"p",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div"),o["\u0275\u0275elementStart"](13,"div",28),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](16,M,2,2,"p",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,8,"CURRENT_PERMISSION")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",0==n.defaultParentVal),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",4==n.defaultParentVal||1==n.defaultParentVal),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1==n.defaultParentVal),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](10,10,"AVAILABLE_MEMBERS")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.visibleContent.length),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](15,12,"EDITABLE_MEMBERS")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.editContent.length)}}function P(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"label",20),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).setAccessType("default")}),o["\u0275\u0275elementStart"](2,"div",7),o["\u0275\u0275template"](3,C,1,1,"input",21),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275template"](6,b,1,1,"img",14),o["\u0275\u0275template"](7,x,1,1,"img",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",9),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,S,17,14,"div",22),o["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,6,"DEFAULT_VISIBILE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf","default"!=i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","default"==i.selectedAccessType),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](10,8,"ARTICLES_DEFAULT_DESE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf","default"==i.selectedAccessType)}}function E(e,t){1&e&&o["\u0275\u0275element"](0,"img",24),2&e&&o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/arrow.svg",o["\u0275\u0275sanitizeUrl"])}function I(e,t){1&e&&o["\u0275\u0275element"](0,"img",25),2&e&&o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/arrow.svg",o["\u0275\u0275sanitizeUrl"])}function k(e,t){1&e&&o["\u0275\u0275element"](0,"i",42)}function T(e,t){1&e&&o["\u0275\u0275element"](0,"i",43)}function A(e,t){1&e&&o["\u0275\u0275element"](0,"i",42)}function D(e,t){1&e&&o["\u0275\u0275element"](0,"i",43)}function z(e,t){1&e&&o["\u0275\u0275element"](0,"i",42)}function L(e,t){1&e&&o["\u0275\u0275element"](0,"i",43)}function V(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nz-option",34),o["\u0275\u0275elementStart"](1,"div",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](3).selectDomainIdFunc(e)}),o["\u0275\u0275template"](2,z,1,0,"i",36),o["\u0275\u0275template"](3,L,1,0,"i",37),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("nzValue",i)("nzLabel",i.name)("nzCustomContent",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",r.selectDomainId==i.id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.selectDomainId!=i.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",i.name," ")}}function N(e,t){1&e&&o["\u0275\u0275element"](0,"i",48)}function R(e,t){1&e&&o["\u0275\u0275element"](0,"i",49)}function j(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nz-option",34),o["\u0275\u0275elementStart"](1,"div",44),o["\u0275\u0275template"](2,N,1,0,"i",45),o["\u0275\u0275template"](3,R,1,0,"i",46),o["\u0275\u0275text"](4),o["\u0275\u0275elementStart"](5,"span",47),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzValue",n)("nzLabel",(null==n?null:n.name)+" "+(null==n?null:n.account))("nzCustomContent",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.isSelected),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isSelected),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](null==n?null:n.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](null==n?null:n.account)}}function U(e,t){1&e&&o["\u0275\u0275element"](0,"i",50)}function B(e,t){1&e&&o["\u0275\u0275element"](0,"i",42)}function F(e,t){1&e&&o["\u0275\u0275element"](0,"i",43)}function W(e,t){1&e&&o["\u0275\u0275element"](0,"i",48)}function H(e,t){1&e&&o["\u0275\u0275element"](0,"i",49)}function $(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nz-option",34),o["\u0275\u0275elementStart"](1,"div",44),o["\u0275\u0275template"](2,W,1,0,"i",45),o["\u0275\u0275template"](3,H,1,0,"i",46),o["\u0275\u0275text"](4),o["\u0275\u0275elementStart"](5,"span",47),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzValue",n)("nzLabel",(null==n?null:n.name)+" "+(null==n?null:n.account))("nzCustomContent",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.isSelected),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isSelected),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](null==n?null:n.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](null==n?null:n.account)}}function G(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",31),o["\u0275\u0275elementStart"](2,"div",32),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"nz-select",33),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).visiableSelectedUserList=e})("nzOnSearch",function(e){o["\u0275\u0275restoreView"](n);var t=o["\u0275\u0275nextContext"](2);return t.searchIcon="visiable",t.onSearch(e)})("ngModelChange",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).handlerSelectedUser("visiable")}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementStart"](7,"nz-option",34),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementStart"](9,"div",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](2);return e.selectDomainIdFunc(e.allDomainObj)}),o["\u0275\u0275template"](10,k,1,0,"i",36),o["\u0275\u0275template"](11,T,1,0,"i",37),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"nz-option",34),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementStart"](16,"div",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](2);return e.selectDomainIdFunc(e.currentDomainInfo)}),o["\u0275\u0275template"](17,A,1,0,"i",36),o["\u0275\u0275template"](18,D,1,0,"i",37),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"nz-option-group",38),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275template"](23,V,5,6,"nz-option",39),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"nz-option-group",38),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275template"](26,j,7,7,"nz-option",39),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](27,U,1,0,"ng-template",null,40,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",31),o["\u0275\u0275elementStart"](30,"div",32),o["\u0275\u0275text"](31),o["\u0275\u0275pipe"](32,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](33,"nz-select",41),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).editableSelectedUserList=e})("nzOnSearch",function(e){o["\u0275\u0275restoreView"](n);var t=o["\u0275\u0275nextContext"](2);return t.searchIcon="edit",t.onSearch(e)})("ngModelChange",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).handlerSelectedUser("editable")}),o["\u0275\u0275pipe"](34,"translate"),o["\u0275\u0275elementStart"](35,"nz-option",34),o["\u0275\u0275pipe"](36,"translate"),o["\u0275\u0275elementStart"](37,"div",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](2);return e.selectEditDomainIdFunc(e.currentDomainInfo)}),o["\u0275\u0275template"](38,B,1,0,"i",36),o["\u0275\u0275template"](39,F,1,0,"i",37),o["\u0275\u0275text"](40),o["\u0275\u0275pipe"](41,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](42,"nz-option-group",38),o["\u0275\u0275pipe"](43,"translate"),o["\u0275\u0275template"](44,$,7,7,"nz-option",39),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=o["\u0275\u0275reference"](28),r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,42,"PARTIALLY_AVAILABLE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzPlaceHolder",o["\u0275\u0275pipeBind1"](6,44,"ACCESS_SEARTCH_PLACEHOLDER"))("nzShowArrow",!0)("nzSuffixIcon",i)("ngModel",r.visiableSelectedUserList)("nzDropdownClassName","select-dropdown")("compareWith",r.compareFn)("nzServerSearch",!0)("nzFilterOption",r.nzFilterOption),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzValue",r.allDomainObj)("nzLabel",o["\u0275\u0275pipeBind1"](8,46,"ALL_SYSTEM_MEMBERS"))("nzCustomContent",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",r.selectDomainId==r.allDomainObj.id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.selectDomainId!=r.allDomainObj.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](13,48,"ALL_SYSTEM_MEMBERS")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzValue",r.currentDomainInfo)("nzLabel",o["\u0275\u0275pipeBind1"](15,50,"CURRENT_SPACE_MEMBER"))("nzCustomContent",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",r.selectDomainId==r.currentDomainInfo.id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.selectDomainId!=r.currentDomainInfo.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](20,52,"CURRENT_SPACE_MEMBER")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzLabel",o["\u0275\u0275pipeBind1"](22,54,"OTHER_SPACE_MEMBERS")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",r.domainArr),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzLabel",o["\u0275\u0275pipeBind1"](25,56,"PERSONAL_USER")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",r.optionListVisible),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](32,58,"PARTIALLY_EDITABLE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzPlaceHolder",o["\u0275\u0275pipeBind1"](34,60,"ACCESS_SEARTCH_PLACEHOLDER"))("nzShowArrow",!0)("nzSuffixIcon",i)("ngModel",r.editableSelectedUserList)("nzFilterOption",r.nzFilterOption)("nzServerSearch",!0)("nzDropdownClassName","select-dropdown-two")("compareWith",r.compareFn),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzValue",r.currentDomainInfo)("nzLabel",o["\u0275\u0275pipeBind1"](36,62,"CURRENT_SPACE_MEMBER"))("nzCustomContent",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",r.selectEditDomainId==r.currentDomainInfo.id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.selectEditDomainId!=r.currentDomainInfo.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](41,64,"CURRENT_SPACE_MEMBER")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzLabel",o["\u0275\u0275pipeBind1"](43,66,"PERSONAL_USER")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",r.optionListEdit)}}function q(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",3),o["\u0275\u0275elementStart"](1,"div",4),o["\u0275\u0275template"](2,P,12,10,"ng-container",5),o["\u0275\u0275elementStart"](3,"label",6),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().setAccessType("public")}),o["\u0275\u0275elementStart"](4,"div",7),o["\u0275\u0275element"](5,"input",8),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",9),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"label",10),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().setAccessType("domain")}),o["\u0275\u0275elementStart"](12,"div",7),o["\u0275\u0275element"](13,"input",11),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",9),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"label",12),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().setAccessType("privacy")}),o["\u0275\u0275elementStart"](20,"div",7),o["\u0275\u0275element"](21,"input",13),o["\u0275\u0275text"](22),o["\u0275\u0275pipe"](23,"translate"),o["\u0275\u0275template"](24,E,1,1,"img",14),o["\u0275\u0275template"](25,I,1,1,"img",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"div",9),o["\u0275\u0275text"](27),o["\u0275\u0275pipe"](28,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",16),o["\u0275\u0275template"](30,G,45,68,"ng-container",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"div",17),o["\u0275\u0275elementStart"](32,"button",18),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().closeModal()}),o["\u0275\u0275pipe"](33,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](34,"button",19),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().accessControlSet()}),o["\u0275\u0275pipe"](35,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.articleDetails),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("checked","public"==i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,15,"PUBLIC_VISIBILE")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](10,17,"PUBLIC_OPTION_DESC")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("checked","domain"==i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,19,"SPACE_VISIBILE")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](18,21,"SPACE_DESC")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("checked","privacy"==i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](23,23,"PRIVACY_VISIBILE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf","privacy"!=i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","privacy"==i.selectedAccessType),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](28,25,"PRIVACY_DESC")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf","privacy"==i.selectedAccessType),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](33,27,"COMMON_BUTTON_CANCLE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](35,29,"COMMON_BUTTON_CONFIRM"))}}var K=function(){function e(e,t,n,i){var r=this;this.knowledgeService=e,this.notificationService=t,this.translate=n,this.emitService=i,this.visibleContent="",this.editContent="",this.defaultVisibleList=[],this.defaultEditList=[],this.optionListVisible=[],this.optionListEdit=[],this.visiableSelectedUser=[],this.visiableSelectedUserList=[],this.editableSelectedUser=[],this.editableSelectedUserList=[],this.searchIcon="",this.closeCallback=new o.EventEmitter,this.allDomainObj={id:"all",isSigle:!0,isEditSigle:!0},this.domainArr=[],this.userArr=[],this.successTip=Object(a.a)(function(){r.notificationService.success(r.translate.instant("SUCCESSFUL_OPERATION"),"")},2e3),this.onSearch=Object(a.a)(function(e){r.queryMembers(e)},1e3),this.compareFn=function(e,t){return e&&t?e.id===t.id:e===t},this.nzFilterOption=function(){return!0}}return e.prototype.queryDomainMembers=function(){var e,t,n=this;Object(r.a)(this.knowledgeService.query_members(null===(e=this.currentDomainInfo)||void 0===e?void 0:e.id),this.knowledgeService.query_spaces(null===(t=this.currentDomainInfo)||void 0===t?void 0:t.id)).subscribe(function(e){var t,o,r,a,l,s=Object(i.g)(e,2),d=s[0],p=s[1];(null===(o=null===(t=null==d?void 0:d.data)||void 0===t?void 0:t.self_members)||void 0===o?void 0:o.members)&&(n.userArr=d.data.self_members.members.map(function(e){return e.user}),n.optionListVisible=Object(c.a)(n.userArr),n.optionListEdit=Object(c.a)(n.userArr)),n.domainArr=null===(l=null===(a=p[null===(r=n.currentDomainInfo)||void 0===r?void 0:r.id])||void 0===a?void 0:a.up)||void 0===l?void 0:l.map(function(e){return{id:e.id,name:"en"==n.currentLang?e.title_en:e.title,isSigle:!0,isEditSigle:!0}}),n.getAccessDefault()},function(){})},e.prototype.setAccessType=function(e){var t,n=this;this.selectedAccessType=e,"default"!=e||this.categoryDetails||this.knowledgeService.getWikiParentAccess(null===(t=this.articleDetails)||void 0===t?void 0:t.sn).subscribe(function(e){n.handlerParentAccess(e)},function(){})},e.prototype.handlerParentAccess=function(e){var t,n,i,o,r,a,c,l,s,d,p,u,m,g,h=this;if(this.defaultParentVal=e.visibility,null===(n=null===(t=null==e?void 0:e.user_map)||void 0===t?void 0:t.query)||void 0===n||n.forEach(function(e){h.defaultVisibleList.push(e.name+" "+e.account)}),null===(o=null===(i=null==e?void 0:e.user_map)||void 0===i?void 0:i.update)||void 0===o||o.forEach(function(e){h.defaultEditList.push(e.name+" "+e.account)}),4==this.defaultParentVal||1==this.defaultParentVal)this.defaultVisibleList.unshift(this.translate.instant("PUBLIC_AVAILABLE")+" "),this.defaultEditList.unshift(this.translate.instant("SPACE_EDITABLE")+" ");else if(0==this.defaultParentVal)this.defaultVisibleList.unshift(this.translate.instant("SPACE_AVAILABLE")+" "),this.defaultEditList.unshift(this.translate.instant("SPACE_EDITABLE")+" ");else if(-1==this.defaultParentVal){var f=(null===(a=null===(r=null==e?void 0:e.domain_map)||void 0===r?void 0:r.query)||void 0===a?void 0:a.id)?null===(l=null===(c=null==e?void 0:e.domain_map)||void 0===c?void 0:c.query)||void 0===l?void 0:l.id:null===(s=null==e?void 0:e.domain_map)||void 0===s?void 0:s.query,v=(null===(p=null===(d=null==e?void 0:e.domain_map)||void 0===d?void 0:d.update)||void 0===p?void 0:p.id)?null===(m=null===(u=null==e?void 0:e.domain_map)||void 0===u?void 0:u.update)||void 0===m?void 0:m.id:null===(g=null==e?void 0:e.domain_map)||void 0===g?void 0:g.update;"all"==f?this.defaultVisibleList.unshift(this.translate.instant("PUBLIC_AVAILABLE")+" "):"current"==f?this.defaultVisibleList.unshift(this.translate.instant("SPACE_AVAILABLE")+" "):this.domainArr.forEach(function(e){e.id==f&&h.defaultVisibleList.unshift(e.name+h.translate.instant("SPACE_AVAILABLE")+" ")}),"current"==v&&this.defaultEditList.unshift(this.translate.instant("SPACE_EDITABLE")+" ")}this.visibleContent=this.defaultVisibleList.join(","),this.editContent=this.defaultEditList.join(",")},e.prototype.accessControlSet=function(){var e,t,n,i,o,r=this;switch(this.selectedAccessType){case"default":this.currentVisibilityVal=1;break;case"public":this.currentVisibilityVal=4;break;case"domain":this.currentVisibilityVal=0;break;case"privacy":this.currentVisibilityVal=-1}var a={visibility:this.currentVisibilityVal,domain_map:{query:null!==(e=this.selectDomainId==this.currentDomainInfo.id?"current":this.selectDomainId)&&void 0!==e?e:"",update:this.selectEditDomainId?"current":""},user_map:{query:null!==(n=null===(t=this.visiableSelectedUserList)||void 0===t?void 0:t.filter(function(e){return null==e?void 0:e.username}).map(function(e){return e.id}))&&void 0!==n?n:[],update:null!==(o=null===(i=this.editableSelectedUserList)||void 0===i?void 0:i.filter(function(e){return null==e?void 0:e.username}).map(function(e){return e.id}))&&void 0!==o?o:[]}};if("create-article"===this.visibilityEditModel)return this.closeCallback.emit(a);this.categoryDetails?this.knowledgeService.setCategoryAccess({kanban_id:this.categoryDetails.id,domain_id:this.currentDomainInfo.id,visibility:a.visibility,domain_map:a.domain_map,user_map:a.user_map,sn:this.categoryDetails.sn,id:this.categoryDetails.id}).subscribe(function(e){e.success.length?(r.categoryDetails.visibility=e.success[0].content_new,r.emitService.emit({type:"wiki:category-control-set-success"}),r.successTip(),r.closeModal({visibility:r.categoryDetails.visibility})):r.notificationService.error(r.translate.instant(String(e.failed[0].code)),"")},function(){}):(a.sn=this.articleDetails.sn,a.id=this.articleDetails.id,this.knowledgeService.saveArticleAccess(a).subscribe(function(e){var t,n,i;e?(r.articleDetails.visibility=e.success[0].content_new,r.emitService.emit({type:"wiki:access-control-set-success",data:e.success[0].content_new,sn:null===(t=r.articleDetails)||void 0===t?void 0:t.sn,id:null===(n=r.articleDetails)||void 0===n?void 0:n.id}),r.successTip(),r.closeModal({visibility:r.articleDetails.visibility})):(null===(i=null==e?void 0:e.failed)||void 0===i?void 0:i.length)&&r.notificationService.error(r.translate.instant(String(e.failed[0].code)),"")},function(){}))},e.prototype.closeModal=function(e){this.closeCallback.emit(e)},e.prototype.ngOnInit=function(){var e,t;this.currentLang=this.translate.currentLang,this.categoryDetails&&this.getDomainInfo(),(null===(e=this.articleDetails)||void 0===e?void 0:e.assigned_domain)&&(this.currentDomainInfo=null===(t=this.articleDetails)||void 0===t?void 0:t.assigned_domain,this.currentDomainInfo.isSigle=!0,this.currentDomainInfo.isEditSigle=!0,this.queryDomainMembers())},e.prototype.ngAfterViewInit=function(){var e=this;this.selectedAccessType&&setTimeout(function(){document.getElementById(e.selectedAccessType).parentElement.click()},1e3)},e.prototype.getDomainInfo=function(){var e=this;this.currentDomainChanges=window.communicationService.currentDomain$.subscribe(function(t){t&&(e.currentDomainInfo=t,e.currentDomainInfo.isSigle=!0,e.currentDomainInfo.isEditSigle=!0,e.queryDomainMembers())})},e.prototype.getAccessDefault=function(){var e,t,n,i,o,r,a=this;switch("create-article"===this.visibilityEditModel?Number.isInteger(null===(e=this.visibilityParams)||void 0===e?void 0:e.visibility)?this.visibilityParams.visibility:1:this.articleDetails?this.articleDetails.visibility:this.categoryDetails.visibility){case 0:this.selectedAccessType="domain";break;case 4:this.selectedAccessType="public";break;case 1:this.selectedAccessType="default","create-article"===this.visibilityEditModel?"category"===this.createFrom?1===this.categoryDetails.visibility?this.knowledgeService.getCategoryParentAccess(this.currentDomainInfo.id,this.categoryDetails.id).subscribe(function(e){a.handlerParentAccess(e)},function(){}):this.knowledgeService.getCategoryAccess(this.categoryDetails.id,this.currentDomainInfo.id).subscribe(function(e){a.handlerParentAccess(e)},function(){}):1===this.articleDetails.visibility?this.knowledgeService.getWikiParentAccess(null===(t=this.articleDetails)||void 0===t?void 0:t.sn).subscribe(function(e){a.setInitalData(e),a.handlerParentAccess(e)},function(){}):this.knowledgeService.getWikiAccess(this.articleDetails.id).subscribe(function(e){a.handlerParentAccess(e)},function(){}):this.articleDetails?this.knowledgeService.getWikiParentAccess(this.articleDetails.sn).subscribe(function(e){a.setInitalData(e),a.handlerParentAccess(e)},function(){}):this.categoryDetails&&(this.selectedAccessType="public");break;default:if(this.selectedAccessType="privacy","create-article"===this.visibilityEditModel){var c=JSON.parse(JSON.stringify(this.visibilityParams)),l=[],s=[];null===(i=null===(n=null==c?void 0:c.user_map)||void 0===n?void 0:n.query)||void 0===i||i.forEach(function(e){l.push(a.optionListVisible.find(function(t){return t.id===e}))}),null===(r=null===(o=null==c?void 0:c.user_map)||void 0===o?void 0:o.update)||void 0===r||r.forEach(function(e){s.push(a.optionListEdit.find(function(t){return t.id===e}))}),c.user_map.query=l,c.user_map.update=s,this.setInitalData(c)}else this.articleDetails?this.knowledgeService.getWikiAccess(this.articleDetails.id).subscribe(function(e){a.setInitalData(e)},function(){}):this.categoryDetails&&this.knowledgeService.getCategoryAccess(this.categoryDetails.id,this.currentDomainInfo.id).subscribe(function(e){a.setInitalData(e)},function(){})}},e.prototype.setInitalData=function(e){var t,n,i,o,r,a,c,l,s,d,p,u,m,g,h,f,v=this;this.visiableSelectedUserList=[],this.editableSelectedUserList=[],this.selectDomainId=(null===(n=null===(t=null==e?void 0:e.domain_map)||void 0===t?void 0:t.query)||void 0===n?void 0:n.id)?null===(o=null===(i=null==e?void 0:e.domain_map)||void 0===i?void 0:i.query)||void 0===o?void 0:o.id:null===(r=null==e?void 0:e.domain_map)||void 0===r?void 0:r.query,this.selectEditDomainId=(null===(c=null===(a=null==e?void 0:e.domain_map)||void 0===a?void 0:a.update)||void 0===c?void 0:c.id)?null===(s=null===(l=null==e?void 0:e.domain_map)||void 0===l?void 0:l.update)||void 0===s?void 0:s.id:null===(d=null==e?void 0:e.domain_map)||void 0===d?void 0:d.update,"all"==this.selectDomainId?this.visiableSelectedUserList.push(this.allDomainObj):"current"==this.selectDomainId?(this.selectDomainId=null===(p=this.currentDomainInfo)||void 0===p?void 0:p.id,this.visiableSelectedUserList.push(this.currentDomainInfo)):this.domainArr.forEach(function(e){e.id==v.selectDomainId&&v.visiableSelectedUserList.push(e)}),"current"==this.selectEditDomainId&&(this.selectEditDomainId=null===(u=this.currentDomainInfo)||void 0===u?void 0:u.id,this.editableSelectedUserList.push(this.currentDomainInfo)),this.optionListVisible.forEach(function(t){var n,i;(null===(i=null===(n=null==e?void 0:e.user_map)||void 0===n?void 0:n.query)||void 0===i?void 0:i.some(function(e){return e.id===t.id}))?(t.isSelected=!0,v.visiableSelectedUserList.push(t)):t.isSelected=!1}),this.optionListEdit.forEach(function(t){var n,i;(null===(i=null===(n=null==e?void 0:e.user_map)||void 0===n?void 0:n.update)||void 0===i?void 0:i.some(function(e){return e.id===t.id}))?(t.isSelected=!0,v.editableSelectedUserList.push(t)):t.isSelected=!1}),null===(g=null===(m=null==e?void 0:e.user_map)||void 0===m?void 0:m.query)||void 0===g||g.forEach(function(e){var t;(null===(t=v.visiableSelectedUserList)||void 0===t?void 0:t.some(function(t){return t.id===e.id}))||(v.visiableSelectedUserList.push(e),e.isSelected=!0,v.optionListVisible.push(e))}),null===(f=null===(h=null==e?void 0:e.user_map)||void 0===h?void 0:h.update)||void 0===f||f.forEach(function(e){var t;(null===(t=v.editableSelectedUserList)||void 0===t?void 0:t.some(function(t){return t.id===e.id}))||(v.editableSelectedUserList.push(e),e.isSelected=!0,v.optionListEdit.push(e))})},e.prototype.handlerSelectedUser=function(e){var t,n,o=this,r="visiable"===e?null===(t=this.visiableSelectedUserList)||void 0===t?void 0:t.filter(function(e){return e.isSigle}):null,a="editable"===e?null===(n=this.editableSelectedUserList)||void 0===n?void 0:n.filter(function(e){return e.isEditSigle}):null;switch(e){case"visiable":r.length<1&&(this.selectDomainId=null),this.visiableSelectedUser=Object(i.i)(this.visiableSelectedUserList),this.visiableSelectedUserList.length>0&&this.visiableSelectedUserList.forEach(function(e,t){"publicAvailable"==e.id&&o.visiableSelectedUser.splice(t,1),"spaceAvailable"==e.id&&o.visiableSelectedUser.splice(t,1)}),this.optionListVisible.forEach(function(e){e.isSelected=o.visiableSelectedUser.some(function(t){return t.id===e.id})});break;case"editable":this.selectEditDomainId=a.length>=1?a[0].id:null,this.editableSelectedUser=Object(i.i)(this.editableSelectedUserList),this.editableSelectedUserList.length>0&&this.editableSelectedUserList.forEach(function(e,t){"spaceEditable"==e.id&&o.editableSelectedUser.splice(t,1)}),this.optionListEdit.forEach(function(e){e.isSelected=o.editableSelectedUser.some(function(t){return t.id===e.id})})}},e.prototype.selectEditDomainIdFunc=function(e){this.selectEditDomainId=this.selectEditDomainId==e.id?null:e.id},e.prototype.selectDomainIdFunc=function(e){var t;this.selectDomainId===e.id?this.selectDomainId=null:(this.selectDomainId=e.id,(null===(t=this.visiableSelectedUserList)||void 0===t?void 0:t.filter(function(e){return e.isSigle})).length>=1&&this.visiableSelectedUserList.splice(this.visiableSelectedUserList.findIndex(function(e){return e.isSigle}),1))},e.prototype.queryMembers=function(e){var t=this;""!=e&&this.queryAvailiableMembers(e).subscribe(function(e){if(e){var n=null==e?void 0:e.map(function(e){return e.isSelected=!!Object(l.a)(t.getSearchArr(),{id:e.id}),e});t.resetSearchArr(Object(s.a)(n,"id"));var i=document.querySelector(".select-dropdown cdk-virtual-scroll-viewport");i&&setTimeout(function(){i.scrollTop=i.scrollHeight})}},function(){})},e.prototype.resetSearchArr=function(e){"visiable"==this.searchIcon?this.optionListVisible=Object(i.i)(e):this.optionListEdit=Object(i.i)(e)},e.prototype.getSearchArr=function(){return"visiable"==this.searchIcon?this.visiableSelectedUserList:this.editableSelectedUserList},e.prototype.queryAvailiableMembers=function(e){return this.knowledgeService.queryUsers(e)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](d.b),o["\u0275\u0275directiveInject"](p.b),o["\u0275\u0275directiveInject"](u.c),o["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["access-control"]],inputs:{articleDetails:"articleDetails",categoryDetails:"categoryDetails",visibilityEditModel:"visibilityEditModel",createFrom:"createFrom",visibilityParams:"visibilityParams"},outputs:{closeCallback:"closeCallback"},decls:5,vars:4,consts:[[1,"select-directory-header"],[1,"icon-color","icon-font-size14","position-right-close","iconfont","icon-close","pointer-cursor",3,"click"],["class","content-container",4,"ngIf"],[1,"content-container"],[1,"input-container"],[4,"ngIf"],["for","public",1,"status-check-wrapper","margin-bottom-25",3,"click"],[1,"status-check-title"],["type","radio","id","public","name","selectRadio",1,"input-radio",3,"checked"],[1,"status-check-desc","m-l-20"],["for","domain",1,"status-check-wrapper","margin-bottom-25",3,"click"],["type","radio","id","domain","name","selectRadio",1,"input-radio",3,"checked"],["for","privacy",1,"status-check-wrapper","privacy-check",3,"click"],["type","radio","id","privacy","name","selectRadio",1,"input-radio",3,"checked"],["class","checked-icon ",3,"src",4,"ngIf"],["class","checked-icon checked-icon-up",3,"src",4,"ngIf"],[1,"directory-wrapper","slimScrollBar"],[1,"share-content-footer"],["type","button",1,"f-16","confirm-btn-styl","cancel-btn-color","m-r-30",3,"textContent","click"],["type","button",1,"f-16","confirm-btn-styl",3,"textContent","click"],["for","default",1,"status-check-wrapper",3,"click"],["type","radio","id","default","name","selectRadio","class","input-radio",3,"checked",4,"ngIf"],["class","dafault-container",4,"ngIf"],["type","radio","id","default","name","selectRadio",1,"input-radio",3,"checked"],[1,"checked-icon",3,"src"],[1,"checked-icon","checked-icon-up",3,"src"],[1,"dafault-container"],[1,"current-top-title"],[1,"current-title"],["class","current-content","nz-typography","","nzEllipsis","","nzExpandable","",3,"nzEllipsisRows",4,"ngIf"],["nz-typography","","nzEllipsis","","nzExpandable","",1,"current-content",3,"nzEllipsisRows"],[1,"access-users-select-wrapper"],[1,"access-title-desc"],["nzMode","multiple",1,"select-input",3,"nzPlaceHolder","nzShowArrow","nzSuffixIcon","ngModel","nzDropdownClassName","compareWith","nzServerSearch","nzFilterOption","ngModelChange","nzOnSearch"],[3,"nzValue","nzLabel","nzCustomContent"],[1,"full-width","full-height","padding-default",3,"click"],["class","iconfont icon-yuanquan m-r-5 align-center-i",4,"ngIf"],["class","iconfont icon-nochoice m-r-5 align-center-i",4,"ngIf"],[3,"nzLabel"],[3,"nzValue","nzLabel","nzCustomContent",4,"ngFor","ngForOf"],["seartchTemplateRef",""],["nzMode","multiple","nzServerSearch","",1,"select-input",3,"nzPlaceHolder","nzShowArrow","nzSuffixIcon","ngModel","nzFilterOption","nzServerSearch","nzDropdownClassName","compareWith","ngModelChange","nzOnSearch"],[1,"iconfont","icon-yuanquan","m-r-5","align-center-i"],[1,"iconfont","icon-nochoice","m-r-5","align-center-i"],[1,"full-width","full-height","padding-default"],["class","iconfont icon-check-blank m-r-10 align-center-i",4,"ngIf"],["class","iconfont icon-checkbox m-r-10 align-center-i",4,"ngIf"],[1,"m-l-8"],[1,"iconfont","icon-check-blank","m-r-10","align-center-i"],[1,"iconfont","icon-checkbox","m-r-10","align-center-i"],[1,"iconfont","icon-search"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"i",1),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,q,36,31,"div",2)),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"PERMISSION_CONFIG")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.articleDetails||t.categoryDetails))},directives:[g.n,h.a,f.e,v.k,v.l,f.a,f.b,g.m],pipes:[u.b],styles:['.select-directory-header[_ngcontent-%COMP%]{height:70px;width:100%;line-height:70px;text-align:left;padding-left:30px;position:relative;border-bottom:1px solid #dbdbdb;font-family:Arial Normal,Arial,sans-serif;font-weight:400;font-style:normal;font-size:20px;color:#000}.select-directory-header[_ngcontent-%COMP%]   .position-right-close[_ngcontent-%COMP%]{position:absolute;right:30px;font-size:20px}label[_ngcontent-%COMP%]{font-weight:400}.content-container[_ngcontent-%COMP%]{height:calc(100% - 115px);padding:0 10px 110px}[_nghost-%COMP%]     .ant-modal-body{padding:0}.input-container[_ngcontent-%COMP%]{margin-top:15px;padding:0 15px}.input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;width:100%}.input-container[_ngcontent-%COMP%]   .privacy-check[_ngcontent-%COMP%]{border-top:1px solid #dbdbdb;margin-bottom:-10px}.input-container[_ngcontent-%COMP%]   .status-check-wrapper[_ngcontent-%COMP%]{padding:8px 0;cursor:pointer}.input-container[_ngcontent-%COMP%]   .status-check-wrapper[_ngcontent-%COMP%]   .status-check-title[_ngcontent-%COMP%]{position:relative;height:32px;line-height:32px;font-family:Arial Normal,Arial,sans-serif;font-weight:400;font-size:20px;color:#000}.input-container[_ngcontent-%COMP%]   .status-check-wrapper[_ngcontent-%COMP%]   .icon-check-active[_ngcontent-%COMP%]{position:absolute;right:0;font-size:22px;color:#23c6c8;bottom:-13px}.input-container[_ngcontent-%COMP%]   .status-check-wrapper[_ngcontent-%COMP%]   .status-check-desc[_ngcontent-%COMP%]{font-size:14px;height:25px;line-height:25px;color:#999;position:relative;top:-5px}.input-container[_ngcontent-%COMP%]   .margin-bottom-25[_ngcontent-%COMP%]{margin-bottom:12px}.input-container[_ngcontent-%COMP%]   .input-radio[_ngcontent-%COMP%]{width:15px;height:15px}.input-container[_ngcontent-%COMP%]   .input-radio[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]   .input-radio[_ngcontent-%COMP%]:checked{outline:none;-webkit-appearance:auto;-moz-appearance:auto;appearance:auto}.input-container[_ngcontent-%COMP%]   .input-radio[_ngcontent-%COMP%]:checked{background:#fff}.dafault-container[_ngcontent-%COMP%]{width:540px;height:135px;background-color:#f7f7f7;overflow:auto;padding:5px 5px 5px 20px;position:relative;top:-15px}.dafault-container[_ngcontent-%COMP%]   .current-top-title[_ngcontent-%COMP%]{font-size:14px;color:#7f7f7f;padding-bottom:10px}.dafault-container[_ngcontent-%COMP%]   .current-title[_ngcontent-%COMP%]{font-size:14px;color:#3b3b3b;font-weight:700}.dafault-container[_ngcontent-%COMP%]   .current-content[_ngcontent-%COMP%]{font-size:14px;color:#7f7f7f;line-height:26px;width:100%}.ant-typography[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]  a.ant-typography{color:#242222!important}[_nghost-%COMP%]  .dafault-container::-webkit-scrollbar{color:#7f7f7f}.checked-icon[_ngcontent-%COMP%]{right:5px;position:absolute;top:5px;width:18px;height:18px}.checked-icon-up[_ngcontent-%COMP%]{transform:rotate(180deg)}.real-icon-size[_ngcontent-%COMP%]{width:14px!important;height:14px!important}.directory-wrapper[_ngcontent-%COMP%]{padding:0 18px 10px;height:calc(100% - 260px);width:100%;overflow-x:hidden;overflow-y:scroll;-ms-overflow-style:none}.directory-wrapper[_ngcontent-%COMP%]   .divider-line[_ngcontent-%COMP%]{width:100%;height:2px;background-color:#dbdbdb}.directory-wrapper[_ngcontent-%COMP%]   .icon-styl[_ngcontent-%COMP%]{color:#aaa;font-weight:600;font-size:16px;position:relative;top:-3px;left:0}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]{margin-top:20px}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .access-title-desc[_ngcontent-%COMP%]{height:30px;line-height:20px;font-weight:700;font-size:14px;padding:5px 5px 5px 20px;color:#444;background-color:#f7f7f7}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .access-title-desc[_ngcontent-%COMP%]   .text-999[_ngcontent-%COMP%]{color:#999}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .team-checkbox[_ngcontent-%COMP%]{margin:15px 0 10px;height:20px;line-height:20px;font-size:14px;color:#5f5f5f}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .team-checkbox[_ngcontent-%COMP%]   .team-members[_ngcontent-%COMP%]{color:#5f5f5f;font-size:14px}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .team-checkbox[_ngcontent-%COMP%]     .ant-checkbox-disabled+span{color:#5f5f5f}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .team-checkbox[_ngcontent-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background-color:#23c6c8;border-color:#23c6c8!important}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .team-checkbox[_ngcontent-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:#f5f5f5!important}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .select-input[_ngcontent-%COMP%]{width:100%;padding:10px 0 0}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .select-input[_ngcontent-%COMP%]     .ant-select-selector{padding-left:34px;padding-right:0;border:1px solid #dbdbdb}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .select-input[_ngcontent-%COMP%]     .ant-select-arrow{left:11px}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .select-input[_ngcontent-%COMP%]     .ant-select-selection-placeholder{left:44px}.emptyImg-div[_ngcontent-%COMP%]{height:133px;width:100%}.share-content-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;padding:30px 35px;text-align:right;width:100%}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]{height:37px;width:80px;line-height:37px;padding:0 12px;border-radius:4px;outline:none;border:1px solid #23c6c8;background:#23c6c8;color:#fff;opacity:.9}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]:hover{opacity:1}.share-content-footer[_ngcontent-%COMP%]   .cancel-btn-color[_ngcontent-%COMP%]{margin-right:30px;border:1px solid #dbdbdb;color:#5f5f5f;background:#fff}  .select-dropdown .ant-select-item-option-state,   .select-dropdown-two .ant-select-item-option-state{display:none;width:0}  .select-dropdown .ant-select-item-group:after,   .select-dropdown-two .ant-select-item-group:after{content:"";width:calc(100% - 20px);position:absolute;left:10px;bottom:0;height:1px;background:#dbdbdb}  .select-dropdown .ant-select-item-option-grouped,   .select-dropdown-two .ant-select-item-option-grouped{padding-left:12px}  .select-dropdown .ant-select-item-option-selected:not(.ant-select-item-option-disabled),   .select-dropdown-two .ant-select-item-option-selected:not(.ant-select-item-option-disabled){font-weight:400;background:#fff}  .select-dropdown .ant-select-item,   .select-dropdown-two .ant-select-item{padding:0 12px}  .select-dropdown cdk-virtual-scroll-viewport::-webkit-scrollbar,   .select-dropdown-two cdk-virtual-scroll-viewport::-webkit-scrollbar{width:8px;height:8px}  .select-dropdown cdk-virtual-scroll-viewport::-webkit-scrollbar-thumb,   .select-dropdown-two cdk-virtual-scroll-viewport::-webkit-scrollbar-thumb{border-radius:10px;background-color:#aaa}  .select-dropdown cdk-virtual-scroll-viewport::-webkit-scrollbar-track-piece,   .select-dropdown-two cdk-virtual-scroll-viewport::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}.icon-yuanquan[_ngcontent-%COMP%]{margin-left:-2px;font-size:19px;color:#23c6c8}.icon-checkbox[_ngcontent-%COMP%]{color:#23c6c8}.icon-check-blank[_ngcontent-%COMP%], .icon-nochoice[_ngcontent-%COMP%]{color:#dbdbdb}.align-center-i[_ngcontent-%COMP%]{position:relative;top:1px}.padding-default[_ngcontent-%COMP%]{padding:5px 0}']}),e}()},fxjG:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("otx/"),o=n("aDQL"),r=function(){function e(){}return e.prototype.unlockTipsOnCancle=function(e){e.close(),this.cancleEdit()},e.prototype.unlockTipsOnSave=function(e){e.close(),this.saveEdit()},e.prototype.initSocketListen=function(){var e=this,t=Object(o.b)(i.b.wikiRequestUnlock,function(t,n){var i,o,r,a=function(){return e.showUnlockRequestTips(t)};e.sn!==n?(((null===(i=e.articleDetails)||void 0===i?void 0:i.paragraphs)||[]).map(function(e){return e.contentNumber}).includes(n)&&a(),(null===(o=e.activeDoc)||void 0===o?void 0:o.number)!==n?(null===(r=e.activeDoc)||void 0===r?void 0:r.wiki_sn)===n&&a():a()):a()});this.onDestroy$.subscribe(function(){t.off()})},e.prototype.removeUnlockRequestTips=function(){this.unlockTipsRef&&this.notification.remove(this.unlockTipsRef.messageId)},e.prototype.showUnlockRequestTips=function(e){var t=this;this.removeUnlockRequestTips(),this.unlockTipsRef=this.notification.template(this.wikiUnlockTipsTemplateRef,{nzDuration:0,nzData:e,nzClass:"notification-box"}),this.unlockTipsRef.onClose.subscribe(function(){t.unlockTipsRef=null})},e}()},hK9q:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("mrSG"),o=n("fXoL"),r=n("hbEN"),a=n("A/Mn"),c=n("sYmb"),l=n("3Pt+"),s=n("zAKX"),d=n("ofXK"),p=n("CuYH"),u=n("rXOI"),m=function(e){return{color:e}};function g(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nz-option",19),o["\u0275\u0275elementStart"](1,"div",20),o["\u0275\u0275elementStart"](2,"div",21),o["\u0275\u0275elementStart"](3,"div",22),o["\u0275\u0275elementStart"](4,"span",23),o["\u0275\u0275pipe"](5,"iconMap"),o["\u0275\u0275pipe"](6,"colorMap"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"span",24),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",25),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div"),o["\u0275\u0275text"](12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzValue",n)("nzLabel",n.title),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",n.title),o["\u0275\u0275advance"](3),o["\u0275\u0275classMap"](o["\u0275\u0275pipeBind2"](5,11,n.category,"workitem_category")),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](17,m,o["\u0275\u0275pipeBind2"](6,14,n.category,"workitem_category")))("title",n.category),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("title",n.title),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.title),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" (",(null==n||null==n.simple_domain?null:n.simple_domain.short_title)||(null==n||null==n.assigned_domain?null:n.assigned_domain.short_title)||(null==n||null==n.simple_domain?null:n.simple_domain.title)||(null==n||null==n.assigned_domain?null:n.assigned_domain.title),") "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("#",n.number,"")}}function h(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,g,13,19,"nz-option",16),o["\u0275\u0275elementStart"](2,"nz-option",17),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementStart"](5,"span",18),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.searchWorkitemList),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzValue",o["\u0275\u0275pipeBind1"](3,4,"TRY_TO_SEARCH_TITLE_OR_NUMBER"))("nzLabel",o["\u0275\u0275pipeBind1"](4,6,"TRY_TO_SEARCH_TITLE_OR_NUMBER")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](7,8,"TRY_TO_SEARCH_TITLE_OR_NUMBER"))}}var f=function(){return{width:"150%",left:"-50%"}},v=function(){function e(e,t,n){var a=this;this.knowledgeService=e,this.translate=t,this.cdr=n,this.relatedWorkitem=[],this.searchWorkitemList=[],this.isLoading={workitem:!1},this.saveRevision=new o.EventEmitter,this.onSearchWorkitem=Object(r.a)(function(e){if(!((null==e?void 0:e.length)<2)){a.searchContent=e,a.searchWorkitemList=[],a.isLoading.workitem=!0;var t=a.getRequirementConditions(a.searchContent);a.knowledgeService.query_requirement_result(t).subscribe(function(e){var t;a.isLoading.workitem=!1,(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.result)&&(a.searchWorkitemList=Object(i.i)(e.data.result),setTimeout(function(){a.cdr.detectChanges(),a.searchWorkitemList=Object(i.i)(a.searchWorkitemList)}))})}},200),this.compareFn=function(e,t){return e&&t?e.id===t.id:e===t},this.getRequirementConditions=function(e){return{sort:{key:"created_time",value:"desc"},pagination:{current_page:1,page_size:100},first_filters:[{key:"title",value:[e.trim()],operator:"||",convolution:!1}]}}}return e.prototype.ngOnInit=function(){this.versionTitle=(new Date).toLocaleString()+"  "+this.translate.instant("VERSION")},e.prototype.saveArticleAndRevision=function(e){switch(e){case"save":var t={revision_record_title:this.versionTitle,remark:this.versionRemark,relations:this.getRequireInfo()};this.saveRevision.emit(t);break;case"close":this.saveRevision.emit()}},e.prototype.getRequireInfo=function(){return this.relatedWorkitem.map(function(e){return{relation_id:e.id,relation_sn:e.number,relation_type:e.category}})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.b),o["\u0275\u0275directiveInject"](c.c),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["reversion-history-model"]],inputs:{currentDomain:"currentDomain",baselineCtrl:"baselineCtrl"},outputs:{saveRevision:"saveRevision"},decls:29,vars:29,consts:[[1,"m-t-md"],[1,"form-group","m-b-md","flex-box","flex-center"],[1,"box-inline","tip-info"],[1,"required-item",3,"textContent"],[1,"text-danger"],[1,"select-item"],["type","text",1,"subject-inp",3,"ngModel","ngModelChange"],[3,"textContent"],[1,"select-item",2,"width","380px"],["nzMode","multiple","nzShowSearch","",1,"full-width","t-a-l",3,"compareWith","nzPlaceHolder","nzDropdownStyle","nzServerSearch","ngModel","ngModelChange","nzOnSearch"],[4,"ngIf"],[1,"form-group","m-b-md","flex-box"],["rows","3",1,"version-message",3,"ngModel","ngModelChange"],[1,"txt-r"],[1,"btn","btn-xs","btn-primary","m-r-5",3,"disabled","textContent","click"],[1,"btn","btn-xs","btn-white",3,"textContent","click"],["nzCustomContent","",3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzDisabled","","nzCustomContent","",3,"nzValue","nzLabel"],[1,"text-center"],["nzCustomContent","",3,"nzValue","nzLabel"],[1,"flex-box","flex-between","cur-pointer",3,"title"],[1,"flex-box","ov-h"],[1,"text-omit"],[3,"ngStyle","title"],[1,"m-l-5",3,"title"],[1,"p-x-4"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275element"](3,"span",3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementStart"](6,"span",4),o["\u0275\u0275text"](7,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",5),o["\u0275\u0275elementStart"](9,"input",6),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.versionTitle=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",1),o["\u0275\u0275elementStart"](11,"div",2),o["\u0275\u0275element"](12,"span",7),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",8),o["\u0275\u0275elementStart"](15,"nz-select",9),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.relatedWorkitem=e})("nzOnSearch",function(e){return t.onSearchWorkitem(e)}),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275template"](17,h,8,10,"ng-container",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",11),o["\u0275\u0275elementStart"](19,"div",2),o["\u0275\u0275element"](20,"span",7),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",5),o["\u0275\u0275elementStart"](23,"textarea",12),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.versionRemark=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"div",13),o["\u0275\u0275elementStart"](25,"button",14),o["\u0275\u0275listener"]("click",function(){return t.saveArticleAndRevision("save")}),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"button",15),o["\u0275\u0275listener"]("click",function(){return t.saveArticleAndRevision("close")}),o["\u0275\u0275pipe"](28,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",t.baselineCtrl?o["\u0275\u0275pipeBind1"](4,14,"BASELINE_VERSION"):o["\u0275\u0275pipeBind1"](5,16,"REVISIONVERSION")),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngModel",t.versionTitle),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](13,18,"RELATED_WORKITEM")),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",o["\u0275\u0275pipeBind1"](16,20,"SEARCH_TITLE_NUMBER")),o["\u0275\u0275property"]("compareWith",t.compareFn)("nzDropdownStyle",o["\u0275\u0275pureFunction0"](28,f))("nzServerSearch",!0)("ngModel",t.relatedWorkitem),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.searchWorkitemList.length),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](21,22,"REMARK")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",t.versionRemark),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.versionTitle)("textContent",o["\u0275\u0275pipeBind1"](26,24,"COMMON_BTN_SAVE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](28,26,"COMMON_BUTTON_CANCLE")))},directives:[l.d,l.k,l.l,s.e,d.n,d.m,s.a,d.o],pipes:[c.b,p.a,u.a],styles:[".tip-info[_ngcontent-%COMP%]{width:110px}.subject-inp[_ngcontent-%COMP%]{padding:0 5px;min-height:32px;width:100%;outline:none;border:1px solid #e5e6e7;font-size:14px}.select-item[_ngcontent-%COMP%]{min-height:32px;width:390px;display:flex;align-items:center}.select-item[_ngcontent-%COMP%]     .ant-select-selection-search{width:98%!important}.select-item[_ngcontent-%COMP%]   .version-message[_ngcontent-%COMP%]{width:100%;border:1px solid #e5e6e7;outline:none;resize:none;padding:0 5px;font-size:15px}.text-center[_ngcontent-%COMP%]{display:inline-block;text-align:center;color:#aaa;width:100%}"]}),e}()},hkqz:function(e,t,n){"use strict";n.r(t),n.d(t,"KnowledgeCategoriesModule",function(){return Ve});var i=n("ofXK"),o=n("tyNb"),r=n("3Pt+"),a=n("sYmb"),c=n("bBxm"),l=n("mrSG"),s=n("to4i"),d=n("AytR"),p=n("AA4e"),u=n("y7eE"),m=n("fXoL"),g=n("UJq8"),h=n("A/Mn"),f=n("fesf"),v=n("bNXi");n("uT1x"),n("fujP"),n("D/6h"),"function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder&&new TextEncoder;var C,b=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),x=(C={},b.forEach(function(e,t){return C[e]=t}),String.fromCharCode.bind(String),"function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),n("4P1S"));function y(e){switch(e.category||e.type){case"CustomerGroup":case"Customer":return"Customer";case"Group":case"Product":case"Domain":case"Project":return"Domain";default:return e.category||e.type}}function w(e,t,n,i){e.forEach(function(e){var o=function(e,t,n){var i=new x.a(null);return{level:n,id:e.id,name:i.transform(e,"assigned_domain"),category:y(e),margin_left:{"margin-left":1===n?"0px":10*n+"px"},children:[],disabled:!1,collapse:!0,hide:!p.a.isEmptyValue(t),childrenCount:e.relations?e.relations.length:e.children_count||0}}(e,t,n+1);i.push(o),p.a.isEmptyValue(t)||t.children.push(o),p.a.isEmptyValue(e.relations)||w(e.relations,o,n+1,i)})}n("AWuS");var O=n("Nqz0"),_=function(e){return{"selected-domain":e}},M=function(e,t){return{"direction-down":e,"icon-transparent":t}};function S(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275elementStart"](1,"div",14),m["\u0275\u0275listener"]("click",function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"](2).selectedItem(e)}),m["\u0275\u0275elementStart"](2,"span",15),m["\u0275\u0275listener"]("click",function(e){m["\u0275\u0275restoreView"](n);var t=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"](2).showChildren(e,t)}),m["\u0275\u0275element"](3,"i",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",17),m["\u0275\u0275elementStart"](5,"span",3),m["\u0275\u0275element"](6,"i",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]().$implicit,o=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275propertyInterpolate"]("title",i.name||i.title),m["\u0275\u0275property"]("ngStyle",i.margin_left)("ngClass",m["\u0275\u0275pureFunction1"](5,_,i.name===o.currentDomainTitle)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction2"](7,M,!i.collapse,!i.childrenCount)),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate1"](" ",i.name||i.title," ")}}function P(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,S,8,10,"ng-container",13),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!n.hide)}}function E(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",1),m["\u0275\u0275elementStart"](1,"div",2),m["\u0275\u0275listener"]("nzVisibleChange",function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().initList(e)}),m["\u0275\u0275elementStart"](2,"span",3),m["\u0275\u0275element"](3,"i",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"span",5),m["\u0275\u0275text"](5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](6,"i",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"nz-dropdown-menu",null,7),m["\u0275\u0275elementStart"](9,"div",8),m["\u0275\u0275elementStart"](10,"div",9),m["\u0275\u0275text"](11," \u5207\u6362\u56e2\u961f "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",10),m["\u0275\u0275listener"]("click",function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]();return e.selectedItem(e.parentDomain)}),m["\u0275\u0275elementStart"](13,"span",3),m["\u0275\u0275element"](14,"i",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](15," \u6240\u6709\u56e2\u961f "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",11),m["\u0275\u0275template"](17,P,2,1,"ng-container",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275reference"](8),o=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("nzOverlayClassName","domains-list-wrap")("nzDropdownMenu",i)("nzPlacement","bottomLeft"),m["\u0275\u0275advance"](3),m["\u0275\u0275propertyInterpolate"]("title",o.currentDomainTitle),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](o.currentDomainTitle),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](7,_,"\u6240\u6709\u56e2\u961f"===o.currentDomainTitle)),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngForOf",o.subDomainList)}}var I=function(){function e(){var e=this;this.subDomainList=[],this.currentDomainTitle="\u6240\u6709\u56e2\u961f",this.handleCustomEventData=function(t){e.parentDomain=t.detail.parentDomain||{};var n=t.detail.currentDomainId;if(e.subDomainList=[],e.parentDomain.relations){w(e.parentDomain.relations,{},0,e.subDomainList);var i=e.subDomainList.find(function(e){return e.id===n})||{};e.currentDomainTitle=n===e.parentDomain.id?"\u6240\u6709\u56e2\u961f":i.name}else e.subDomainList=[]}}return e.prototype.ngOnInit=function(){var e=this;document.addEventListener("custom-event:subdomain-data",this.handleCustomEventData),this.domainSub=window.communicationService.currentDomain$.subscribe(function(t){t&&(e.currentDomainInfo=t,Object(p.o)(e.parentDomain)||(e.currentDomainTitle=t.id===e.parentDomain.id?"\u6240\u6709\u56e2\u961f":t.title))})},e.prototype.ngOnChanges=function(e){e.parentDomain&&!Object(p.o)(this.parentDomain)&&(Object(p.o)(this.currentDomainInfo)||(this.currentDomainTitle=this.currentDomainInfo.id===this.parentDomain.id?"\u6240\u6709\u56e2\u961f":this.currentDomainInfo.title),this.subDomainList=[],w(this.parentDomain.relations,{},0,this.subDomainList))},e.prototype.ngOnDestroy=function(){document.removeEventListener("custom-event:subdomain-data",this.handleCustomEventData),this.domainSub.unsubscribe()},e.prototype.selectedItem=function(e){e.id&&(/domains\/\d+\/iteration/.test(window.location.pathname)?window.location.href=location.origin+"/domains/"+e.id+"/iteration/list":/domains\/\d+\/release_plan/.test(window.location.pathname)?window.location.href=location.origin+"/domains/"+e.id+"/release_plan/list":window.location.href=location.href.replace(/domains\/\d+/,"domains/"+e.id))},e.prototype.ChangeChildrenStatus=function(e,t){var n=this;Object(p.o)(e.children)||e.children.forEach(function(e){e.hide=t,t&&(e.collapse=t,n.ChangeChildrenStatus(e,t))})},e.prototype.showChildren=function(e,t){e.stopPropagation(),t.childrenCount&&(t.collapse=!t.collapse,this.ChangeChildrenStatus(t,t.collapse))},e.prototype.initList=function(e){var t=this;e||setTimeout(function(){t.subDomainList.forEach(function(e){e.collapse||(e.collapse=!0,t.ChangeChildrenStatus(e,e.collapse))})},500)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["domain-change"]],inputs:{parentDomain:"parentDomain"},features:[m["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[["class","domain-change",4,"ngIf"],[1,"domain-change"],["nz-dropdown","","nzTrigger","click",1,"trigger-btn","cur-pointer",3,"nzOverlayClassName","nzDropdownMenu","nzPlacement","nzVisibleChange"],[1,"icon-wrap"],[1,"iconfont","icon-friend"],[1,"seleccted-domain-title",3,"title"],[1,"iconfont","f-12","txt-ccc","icon-triangle-bottom","m-l-10"],["subDomainsRef","nzDropdownMenu"],[1,"change-domain-wrap"],[1,"title","f-w-600","list-item"],[1,"head","list-item",3,"ngClass","click"],[1,"domain-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"list-item","flex-box",3,"ngStyle","ngClass","title","click"],[1,"pointer-cursor","txt-ccc","m-r-10",3,"click"],[1,"iconfont","icon-triangle-bottom","direction-right","f-12",3,"ngClass"],[1,"text-omit"]],template:function(e,t){1&e&&m["\u0275\u0275template"](0,E,18,9,"div",0),2&e&&m["\u0275\u0275property"]("ngIf",t.subDomainList&&t.subDomainList.length>0)},directives:[i.n,O.b,O.d,i.l,i.m,i.o],styles:[".trigger-btn[_ngcontent-%COMP%]{padding:5px 10px;margin-right:10px;border-radius:3px;background-color:#f8f8f8;display:flex;flex-direction:row;align-items:baseline}.icon-wrap[_ngcontent-%COMP%]{background-color:#23c6c8;color:#fff;display:inline-block;width:20px;line-height:20px;text-align:center;border-radius:3px;margin-right:5px}.seleccted-domain-title[_ngcontent-%COMP%]{max-width:100px;min-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left}  .domains-list-wrap{width:250px!important;height:300px;background-color:#fff;box-shadow:0 2px 8px #00000026}  .domains-list-wrap .list-item{align-items:center;padding:9px 10px;cursor:pointer;font-size:14px;max-width:350px}  .domains-list-wrap .list-item:hover{background-color:#f5f5f5}  .domains-list-wrap .change-domain-wrap{height:100%}  .domains-list-wrap .change-domain-wrap .title{color:#676a6c;padding-left:30px}  .domains-list-wrap .change-domain-wrap .head{padding-left:30px}  .domains-list-wrap .change-domain-wrap .selected-domain{background-color:rgba(35,198,200,.08);color:#23c6c8}  .domains-list-wrap .change-domain-wrap .domain-list{height:calc(100% - 80px);overflow-y:auto}  .domains-list-wrap ::-webkit-scrollbar{width:3px;height:3px}  .domains-list-wrap .direction-down{transform:rotate(0deg)!important}  .domains-list-wrap .direction-right{display:inline-block;transform:rotate(270deg)}  .domains-list-wrap .icon-transparent{visibility:hidden}"]}),e}(),k=n("oFdG"),T=n("dEAy"),A=n("KupA");function D(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span",8),m["\u0275\u0275element"](1,"span",9),m["\u0275\u0275elementEnd"]())}function z(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",10),m["\u0275\u0275element"](1,"img",11),m["\u0275\u0275elementEnd"]())}function L(e,t){1&e&&m["\u0275\u0275element"](0,"div",12)}function V(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275elementStart"](1,"span",15),m["\u0275\u0275listener"]("click",function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](3).emitEvent("editItem",e)}),m["\u0275\u0275pipe"](2,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"span",16),m["\u0275\u0275listener"]("nzOnConfirm",function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](3).emitEvent("deleteItem",e)})("nzOnCancel",function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](3).cancel()})("click",function(e){return e.stopPropagation()}),m["\u0275\u0275pipe"](4,"translate"),m["\u0275\u0275pipe"](5,"translate"),m["\u0275\u0275element"](6,"span",17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"span",18),m["\u0275\u0275listener"]("click",function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](3).setReommendationFunc(e,!1)}),m["\u0275\u0275pipe"](8,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"span",19),m["\u0275\u0275listener"]("click",function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](3).setReommendationFunc(e,!0)}),m["\u0275\u0275pipe"](10,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("hidden",!(i.authSuccessVal&&i.hoverStatus))("title",m["\u0275\u0275pipeBind1"](2,10,"UPDATE_TEMPLATE")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("title",m["\u0275\u0275pipeBind1"](4,12,"COMMON_BUTTON_DELETE"))("hidden",!(i.authSuccessVal&&i.hoverStatus))("nzOkType","danger")("nzPopconfirmTitle",m["\u0275\u0275pipeBind1"](5,14,"ARE_YOU_SURE_DELETE")),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("hidden",!(1==i.item.recommendation))("title",m["\u0275\u0275pipeBind1"](8,16,"CANCEL_RECOMMENDEDATION")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("hidden",!(1!=i.item.recommendation&&i.hoverStatus))("title",m["\u0275\u0275pipeBind1"](10,18,"RECOMMENDED"))}}function N(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",13),m["\u0275\u0275template"](1,V,11,20,"span",14),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","empty-template"!=n.item.type)}}function R(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",1),m["\u0275\u0275listener"]("click",function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().createArticle()})("mouseover",function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().mouseEventhandle(e,!0)})("mouseout",function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().mouseEventhandle(e,!1)}),m["\u0275\u0275template"](1,D,2,0,"span",2),m["\u0275\u0275template"](2,z,2,0,"div",3),m["\u0275\u0275template"](3,L,1,0,"div",4),m["\u0275\u0275template"](4,N,2,1,"div",5),m["\u0275\u0275elementStart"](5,"div",6),m["\u0275\u0275elementStart"](6,"div",7),m["\u0275\u0275text"](7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==i.item?null:i.item.blanking),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!(null!=i.item&&i.item.blanking)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!(null!=i.item&&i.item.blanking)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!(null!=i.item&&i.item.blanking)),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](null==i.item?null:i.item.title)}}var j=function(){function e(e,t,n,i,o){this.activeRoute=e,this.knowledgeService=t,this.translate=n,this.modal=i,this.notification=o,this.type="wiki",this.eventHandler=new m.EventEmitter,this.hoverStatus=!1,this.authSuccessVal=!1}return e.prototype.ngOnInit=function(){var e,t,n,i,o=this;this.activeRoute.paramMap.subscribe(function(e){o.currentDomain=e.get("domain_id")}),this.authSuccessVal="trustworthy_design"===(null===(e=this.item)||void 0===e?void 0:e.type)?this.currentDomain===(null===(t=this.item)||void 0===t?void 0:t.assigned_domain)&&(null===(n=this.authSuccess)||void 0===n?void 0:n.canCreateCategory):null===(i=this.authSuccess)||void 0===i?void 0:i.templateAccess},e.prototype.emitEvent=function(e,t){t&&t.stopPropagation(),this.eventHandler.emit({type:e,item:this.item})},e.prototype.setReommendationFunc=function(e,t){var n=this;if(e.stopPropagation(),this.authSuccess||!this.showUpdate)if(this.authSuccess&&this.showUpdate){var i={number:this.item.number};i.recommendation=t?1:-1,this.knowledgeService.updateWikiTemplate(i).subscribe(function(e){n.emitEvent("wiki:template-item-reommendation-change"),n.notification.success(n.translate.instant("UPDATE_SUCCESS"),"")},function(){})}else this.createArticle();else this.notification.error(this.translate.instant("NO_PERMISSION"),"")},e.prototype.createArticle=function(){this.emitEvent("wiki:template-item-click")},e.prototype.cancel=function(){},e.prototype.mouseEventhandle=function(e,t){this.showUpdate&&(e.stopPropagation(),this.hoverStatus=t)},e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](o.a),m["\u0275\u0275directiveInject"](h.b),m["\u0275\u0275directiveInject"](a.c),m["\u0275\u0275directiveInject"](T.d),m["\u0275\u0275directiveInject"](v.b))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-template-item"]],inputs:{item:["templateItem","item"],type:"type",authSuccess:"authSuccess",showUpdate:"showUpdate"},outputs:{eventHandler:"eventHandler"},decls:1,vars:1,consts:[["class","part-flex-item part-flex-item-template card-active",3,"click","mouseover","mouseout",4,"ngIf"],[1,"part-flex-item","part-flex-item-template","card-active",3,"click","mouseover","mouseout"],["class","template-icon team-text template-icon-wrapper",4,"ngIf"],["class","template-icon-wrapper",4,"ngIf"],["class","template-icon-title text-eclipis active-template-width",4,"ngIf"],["class","flex-item-template-header",4,"ngIf"],[1,"flex-item-template-title","text-eclipis"],[1,"flex-item-desc-title","text-eclipis"],[1,"template-icon","team-text","template-icon-wrapper"],[1,"fa","fa-file-text-o"],[1,"template-icon-wrapper"],["src","/knowledge-ui/assets/imgs/template-icon.png"],[1,"template-icon-title","text-eclipis","active-template-width"],[1,"flex-item-template-header"],[4,"ngIf"],[1,"iconfont","icon-edit-simple","margin-right-8","icon-small","edit-margin-top-2",3,"hidden","title","click"],["nz-popconfirm","","nzPopconfirmPlacement","top",1,"f-18",3,"title","hidden","nzOkType","nzPopconfirmTitle","nzOnConfirm","nzOnCancel","click"],[1,"fa","fa-trash-o","margin-right-8","icon-big","trash-margin-top-5"],[1,"iconfont","icon-xing1","reommend-color","margin-right-8",3,"hidden","title","click"],[1,"iconfont","icon-xing","margin-right-8",3,"hidden","title","click"]],template:function(e,t){1&e&&m["\u0275\u0275template"](0,R,8,5,"div",0),2&e&&m["\u0275\u0275property"]("ngIf","MORE"!=(null==t.item?null:t.item.title))},directives:[i.n,A.a],pipes:[a.b],styles:[".part-flex-item[_ngcontent-%COMP%]{width:11.98vw;margin-top:1.04vw;margin-right:1.04vw;box-shadow:1px 1px 3px #e5e5e5;border:1px solid #e5e5e5;border-radius:4px}.part-flex-item-template[_ngcontent-%COMP%]{height:7.03vw;position:relative;cursor:pointer}.part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]{height:30.77%;background:#f5f6f8;display:flex;align-items:center;justify-content:flex-end}.part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .margin-right-8[_ngcontent-%COMP%]{margin-right:8px}.part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .icon-small[_ngcontent-%COMP%]{font-size:15px}.part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .edit-margin-top-2[_ngcontent-%COMP%]{margin-top:2px}.part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .icon-big[_ngcontent-%COMP%]{font-size:18px}.part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .trash-margin-top-5[_ngcontent-%COMP%]{margin-top:5px}.part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .reommend-color[_ngcontent-%COMP%]{color:#eead0e}.part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-title[_ngcontent-%COMP%]{height:69.23%;padding:14.35% 18px 18px}.part-flex-item-template[_ngcontent-%COMP%]   .template-icon-wrapper[_ngcontent-%COMP%]{position:absolute;left:18px;top:14.81%;width:40px;height:40px;border-radius:3px;box-shadow:2px 2px 4px #e5e5e5;display:flex;justify-content:center;align-items:center;background:#fff}.part-flex-item-template[_ngcontent-%COMP%]   .template-icon-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.part-flex-item-template[_ngcontent-%COMP%]   .template-icon-title[_ngcontent-%COMP%]{position:absolute;left:64px;top:14.81%;width:calc(100% - 84px);height:20px;color:#bdbdbd;font-size:12px}.part-flex-item-template[_ngcontent-%COMP%]   .active-template-width[_ngcontent-%COMP%]{width:calc(100% - 140px)}.text-eclipis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}"]}),e}();function U(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"app-template-item",7),m["\u0275\u0275listener"]("eventHandler",function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](3).handlerEvent(e)}),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]().$implicit,o=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("type","category")("authSuccess",o.authAccess)("templateItem",i)("showUpdate",!0)}}function B(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",8),m["\u0275\u0275listener"]("click",function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"](2).moreTemplateHandle(e)}),m["\u0275\u0275elementStart"](1,"div"),m["\u0275\u0275elementStart"](2,"div",9),m["\u0275\u0275element"](3,"img",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div"),m["\u0275\u0275elementStart"](5,"span",11),m["\u0275\u0275text"](6,"MORE"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](7,"i",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function F(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div"),m["\u0275\u0275template"](2,U,1,4,"app-template-item",5),m["\u0275\u0275template"](3,B,8,0,"div",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf","MORE"!=n.title),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","MORE"==n.title)}}function W(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",1),m["\u0275\u0275elementStart"](1,"div",2),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",3),m["\u0275\u0275template"](5,F,4,2,"div",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](3,2,"RECOMMENDATION_TEMPLATE")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngForOf",n.templateList)}}var H=function(){function e(e,t,n,i,o,r,a,c){this.emitService=e,this.translate=t,this.router=n,this.activeRoute=i,this.knowledgeService=o,this.authService=r,this.modal=a,this.notification=c,this.authAccess={userEditPermission:!0,templateAccess:!1}}return e.prototype.ngOnInit=function(){var e=this;this.activeRoute.paramMap.subscribe(function(t){e.currentDomain=t.get("domain_id"),e.getTemplateList(),e.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&e.authService.buildOperateAuth({currentDomain:e.currentDomain,currentUserId:t.user_id}).then(function(t){e.authAccess=t})})}),this.emitServiceSub=this.emitService.eventEmit.subscribe(function(t){t&&"wiki:create-wiki-cancel"==t.event&&e.getTemplateList(),!t.type||"wiki:template-item-reommendation-change"!==t.type&&"create-template-success"!==t.type&&"update-template-success"!==t.type&&"delete-template-success"!==t.type||e.getTemplateList()})},e.prototype.ngOnDestory=function(){this.currentUserChanges.unsubscribe(),this.emitServiceSub.unsubscribe()},e.prototype.getTemplateList=function(){var e=this;this.knowledgeService.getTemplate(this.currentDomain).subscribe(function(t){e.templateList=t.filter(function(e){return 1==e.recommendation}),e.templateList.length>4&&(e.templateList=e.templateList.slice(0,4),e.templateList.push({title:"MORE",type:"MORE"}))},function(){})},e.prototype.goDetailPage=function(e,t){this.router.navigate(["../wiki"],{relativeTo:this.activeRoute})},e.prototype.emitFuncHandle=function(e,t){this.emitService.emit({eventType:t,obj:e})},e.prototype.dangerConfirmFunc=function(e,t){var n=this;this.knowledgeService.updateWikiTemplate({number:e.number,assigned_domain:this.currentDomain?this.currentDomain:"",valid:-1}).subscribe(function(e){n.getTemplateList(),n.notification.success(n.translate.instant("UPDATE_SUCCESS"),"")},function(){})},e.prototype.moreTemplateHandle=function(e){this.emitFuncHandle(e,"category::recommendation-template-click")},e.prototype.handlerEvent=function(e){var t=e.item;switch(e.type){case"wiki:template-item-click":this.emitFuncHandle(t,"category::recommendation-template-click");break;case"wiki:template-item-reommendation-change":this.getTemplateList();break;case"editItem":this.emitFuncHandle(t,"category::recommendation-edit-template");break;case"deleteItem":var n=this.templateList.findIndex(function(e){return e.id===t.id});this.dangerConfirmFunc(t,n)}},e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](g.a),m["\u0275\u0275directiveInject"](a.c),m["\u0275\u0275directiveInject"](o.f),m["\u0275\u0275directiveInject"](o.a),m["\u0275\u0275directiveInject"](h.b),m["\u0275\u0275directiveInject"](f.a),m["\u0275\u0275directiveInject"](T.d),m["\u0275\u0275directiveInject"](v.b))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["template-list"]],decls:1,vars:1,consts:[["class","part-wrapper",4,"ngIf"],[1,"part-wrapper"],[1,"part-header"],[1,"part-flex-wrapper"],[4,"ngFor","ngForOf"],[3,"type","authSuccess","templateItem","showUpdate","eventHandler",4,"ngIf"],["class","part-flex-item part-flex-item-template flex-item-center cursor-pointer card-active",3,"click",4,"ngIf"],[3,"type","authSuccess","templateItem","showUpdate","eventHandler"],[1,"part-flex-item","part-flex-item-template","flex-item-center","cursor-pointer","card-active",3,"click"],[1,"template-icon-more-wrapper"],["src","/knowledge-ui/assets/imgs/template-icon.png"],[1,"MORE-desc-styl"],[1,"iconfont","icon-triangle-bottom","icon-rotate-styl"]],template:function(e,t){1&e&&m["\u0275\u0275template"](0,W,6,4,"div",0),2&e&&m["\u0275\u0275property"]("ngIf",t.templateList&&t.templateList.length>0)},directives:[i.n,i.m,j],pipes:[a.b],styles:[".part-wrapper[_ngcontent-%COMP%]{margin-top:25px}.part-wrapper[_ngcontent-%COMP%]   .part-header[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item[_ngcontent-%COMP%]{width:11.98vw;margin-top:1.04vw;margin-right:1.04vw;box-shadow:1px 1px 3px #e5e5e5;border:1px solid #e5e5e5;border-radius:4px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-category[_ngcontent-%COMP%]{height:8.07vw}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-category.gray[_ngcontent-%COMP%]{background:#ddd}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-category.not-allow[_ngcontent-%COMP%]{cursor:not-allowed}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]{height:7.03vw;position:relative}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]{height:30.77%;background:#f5f6f8;display:flex;align-items:center;justify-content:flex-end}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .margin-right-8[_ngcontent-%COMP%]{margin-right:8px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .icon-small[_ngcontent-%COMP%]{font-size:15px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .icon-big[_ngcontent-%COMP%]{font-size:18px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-title[_ngcontent-%COMP%]{height:69.23%;padding:14.35% 18px 18px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .template-icon-wrapper[_ngcontent-%COMP%]{position:absolute;left:18px;top:14.81%;width:40px;height:40px;border-radius:3px;box-shadow:2px 2px 4px #e5e5e5;display:flex;justify-content:center;align-items:center;background:#fff}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .template-icon-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .template-icon-title[_ngcontent-%COMP%]{position:absolute;left:64px;top:14.81%;width:calc(100% - 84px);height:20px;color:#bdbdbd;font-size:12px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .active-template-width[_ngcontent-%COMP%]{width:calc(100% - 140px)}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#f5f6f8}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]   .template-icon-more-wrapper[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:3px;box-shadow:2px 2px 4px #e5e5e5;display:flex;justify-content:center;align-items:center;background:#fff;opacity:.6;margin:0 auto}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]   .icon-rotate-styl[_ngcontent-%COMP%]{transform:rotate(270deg);display:inline-block;color:#999;font-size:14px;position:relative;top:-1px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]   .MORE-desc-styl[_ngcontent-%COMP%]{color:#999;font-size:18px;font-weight:600;margin-right:5px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .hover-createable[_ngcontent-%COMP%]:hover{color:#23c6c8}.part-wrapper[_ngcontent-%COMP%]   .add-new-category-btn[_ngcontent-%COMP%]{color:#ccc;display:flex;align-items:center;justify-content:center}.part-wrapper[_ngcontent-%COMP%]   .add-new-category-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:30px;font-weight:700}.part-flex-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item[_ngcontent-%COMP%]{width:11.98vw;margin-top:1.04vw;margin-right:1.04vw;box-shadow:1px 1px 3px #e5e5e5;border:1px solid #e5e5e5;border-radius:4px}.part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]{height:7.03vw;position:relative}.part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]{height:30.77%;background:#f5f6f8;display:flex;align-items:center;justify-content:flex-end}.part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .margin-right-8[_ngcontent-%COMP%]{margin-right:8px}.part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .icon-small[_ngcontent-%COMP%]{font-size:15px}.part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .icon-big[_ngcontent-%COMP%]{font-size:18px}.part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-title[_ngcontent-%COMP%]{height:69.23%;padding:14.35% 18px 18px}.part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .template-icon-wrapper[_ngcontent-%COMP%]{position:absolute;left:18px;top:14.81%;width:40px;height:40px;border-radius:3px;box-shadow:2px 2px 4px #e5e5e5;display:flex;justify-content:center;align-items:center;background:#fff}.part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .template-icon-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .template-icon-title[_ngcontent-%COMP%]{position:absolute;left:64px;top:14.81%;width:calc(100% - 84px);height:20px;color:#bdbdbd;font-size:12px}.part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .active-template-width[_ngcontent-%COMP%]{width:calc(100% - 140px)}.part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#f5f6f8}.part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]   .template-icon-more-wrapper[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:3px;box-shadow:2px 2px 4px #e5e5e5;display:flex;justify-content:center;align-items:center;background:#fff;opacity:.6;margin:0 auto}.part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]   .icon-rotate-styl[_ngcontent-%COMP%]{transform:rotate(270deg);display:inline-block;color:#999;font-size:14px;position:relative;top:-1px}.part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]   .MORE-desc-styl[_ngcontent-%COMP%]{color:#999;font-size:18px;font-weight:600;margin-right:5px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.text-eclipis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}"]}),e}(),$=n("qAZ0"),G=n("FwiY");function q(e,t){1&e&&m["\u0275\u0275element"](0,"i",7)}function K(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",4),m["\u0275\u0275template"](1,q,1,0,"ng-template",null,5,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275element"](3,"nz-spin",6),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275reference"](2);m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("nzIndicator",n)}}function X(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",9),m["\u0275\u0275elementStart"](1,"div",10),m["\u0275\u0275listener"]("click",function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).goDetailPage(e,"recent-view")}),m["\u0275\u0275elementStart"](2,"div",11),m["\u0275\u0275element"](3,"img",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",9),m["\u0275\u0275elementStart"](5,"div",13),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div"),m["\u0275\u0275element"](8,"i",14),m["\u0275\u0275elementStart"](9,"span",15),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=t.index;m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0==o?"item-no-border":""),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](i.title),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](i.kanban_title)}}function Y(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,X,11,4,"div",8),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",n.recentViewList)}}var Q=function(){function e(e,t,n,i,o){this.emitService=e,this.translate=t,this.router=n,this.activeRoute=i,this.knowledgeService=o,this.dataBack=!0}return e.prototype.ngOnInit=function(){var e=this;this.activeRoute.paramMap.subscribe(function(t){e.currentDomain=t.get("domain_id"),e.getRencentView()})},e.prototype.getRencentView=function(){var e=this;this.dataBack=!1,this.knowledgeService.getRencentView(this.currentDomain).subscribe(function(t){e.dataBack=!0,e.recentViewList=t.data},function(){})},e.prototype.goDetailPage=function(e,t){this.router.navigate(["../wiki/"+e.kanban_id+"/"+e.sn],{relativeTo:this.activeRoute})},e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](g.a),m["\u0275\u0275directiveInject"](a.c),m["\u0275\u0275directiveInject"](o.f),m["\u0275\u0275directiveInject"](o.a),m["\u0275\u0275directiveInject"](h.b))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["recent-view"]],decls:6,vars:5,consts:[[1,"rencent-view"],[1,"rencent-view-title"],["class","loading-style loading-height",4,"ngIf"],[4,"ngIf"],[1,"loading-style","loading-height"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading",1,"icon-style"],["class","overflow-hidden",4,"ngFor","ngForOf"],[1,"overflow-hidden"],[1,"recent-view-item","cursor-pointer",3,"click"],[1,"recent-view-item-img"],["src","/knowledge-ui/assets/imgs/knowledge-referral.png"],[1,"recent-view-item-title","text-eclipis"],[1,"iconfont","icon-four-square","icon-font-size-12"],[1,"recent-view-item-category"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](4,K,4,1,"div",2),m["\u0275\u0275template"](5,Y,2,1,"div",3),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](3,3,"RECENT_VIEW")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",!t.dataBack),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.dataBack))},directives:[i.n,$.a,G.a,i.m],pipes:[a.b],styles:[".rencent-view[_ngcontent-%COMP%]{padding:18px 18px 0;position:relative;height:100%}.rencent-view[_ngcontent-%COMP%]   .rencent-view-title[_ngcontent-%COMP%]{margin-bottom:20px;height:20px;line-height:20px;color:#676a6c;font-size:16px;font-weight:600}.rencent-view[_ngcontent-%COMP%]   .recent-view-item[_ngcontent-%COMP%]{height:56px;display:flex;padding:10px;align-items:center;border-top:1px solid #ededed;overflow:hidden}.rencent-view[_ngcontent-%COMP%]   .recent-view-item[_ngcontent-%COMP%]:hover{background:#f2f2f2}.rencent-view[_ngcontent-%COMP%]   .recent-view-item[_ngcontent-%COMP%]   .recent-view-item-img[_ngcontent-%COMP%]{margin-right:8px}.rencent-view[_ngcontent-%COMP%]   .recent-view-item[_ngcontent-%COMP%]   .recent-view-item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:25px}.rencent-view[_ngcontent-%COMP%]   .recent-view-item[_ngcontent-%COMP%]   .recent-view-item-title[_ngcontent-%COMP%]{height:16px;line-height:16px;color:#676a6c;font-weight:400;font-size:14px}.rencent-view[_ngcontent-%COMP%]   .recent-view-item[_ngcontent-%COMP%]   .recent-view-item-category[_ngcontent-%COMP%]{color:#bdbdbd;font-weight:400;margin-left:2px;font-size:12px}.rencent-view[_ngcontent-%COMP%]   .recent-view-item[_ngcontent-%COMP%]   .icon-font-size-12[_ngcontent-%COMP%]{font-size:12px;color:#bdbdbd}.rencent-view[_ngcontent-%COMP%]   .item-no-border[_ngcontent-%COMP%]{border:none}.rencent-view[_ngcontent-%COMP%]   .text-eclipis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.rencent-view[_ngcontent-%COMP%]   .cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rencent-view[_ngcontent-%COMP%]   .overflow-hidden[_ngcontent-%COMP%]{overflow:hidden}.rencent-view[_ngcontent-%COMP%]   .loading-height[_ngcontent-%COMP%]{height:70%}"]}),e}(),J=n("lPmA"),Z=n("Q8cG"),ee=n("j5vU"),te=n("nJia"),ne=n("OTR8"),ie=n("THGc"),oe=n("ZXE5"),re=n("PTRe"),ae=function(){function e(){this.model="create-category",this.modelShowCloseChange=new m.EventEmitter,this.categoryTitle="",this.categoryDesc="",this.modelTitleInfo={"create-category":"NEW_CATEGORY","update-category":"EDIT_CATEGORY"}}return Object.defineProperty(e.prototype,"modelTitle",{get:function(){return this.modelTitleInfo[this.model]},enumerable:!1,configurable:!0}),e.prototype.closeModal=function(){this.modelShowCloseChange.emit()},e.prototype.createPush=function(){this.modelShowCloseChange.emit({model:this.model,categoryTitle:this.categoryTitle,categoryDesc:this.categoryDesc})},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["add-new-category-modal"]],inputs:{model:"model",categoryTitle:"categoryTitle",categoryDesc:"categoryDesc"},outputs:{modelShowCloseChange:"modelShowCloseChange"},decls:24,vars:28,consts:[[3,"nzVisible","nzClosable","nzFooter","nzWidth"],[1,"share-content"],[1,"share-content-header"],[1,"category-title","f-18",3,"textContent"],[1,"iconfont","icon-close","cursor-pointer","position-a","user-tip-close",3,"click"],[1,"share-content-body","offset-top-styl"],[1,"input-label-desc"],[1,"red-label-tip"],["nz-input","",3,"placeholder","ngModel","ngModelChange"],["rows","4","nz-input","",3,"placeholder","ngModel","ngModelChange"],[1,"share-content-footer"],["type","button",1,"f-14","confirm-btn-styl","cancel-btn-color","m-r-10",3,"textContent","click"],["type","button",1,"f-14","confirm-btn-styl",3,"disabled","textContent","click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nz-modal",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275element"](3,"span",3),m["\u0275\u0275pipe"](4,"translate"),m["\u0275\u0275elementStart"](5,"i",4),m["\u0275\u0275listener"]("click",function(){return t.closeModal()}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",5),m["\u0275\u0275elementStart"](7,"div",6),m["\u0275\u0275text"](8),m["\u0275\u0275pipe"](9,"translate"),m["\u0275\u0275elementStart"](10,"i",7),m["\u0275\u0275text"](11," *"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"input",8),m["\u0275\u0275listener"]("ngModelChange",function(e){return t.categoryTitle=e}),m["\u0275\u0275pipe"](13,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",6),m["\u0275\u0275text"](15),m["\u0275\u0275pipe"](16,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"textarea",9),m["\u0275\u0275listener"]("ngModelChange",function(e){return t.categoryDesc=e}),m["\u0275\u0275pipe"](18,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"div",10),m["\u0275\u0275elementStart"](20,"button",11),m["\u0275\u0275listener"]("click",function(){return t.closeModal()}),m["\u0275\u0275pipe"](21,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"button",12),m["\u0275\u0275listener"]("click",function(){return t.createPush()}),m["\u0275\u0275pipe"](23,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",500),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("textContent",m["\u0275\u0275pipeBind1"](4,14,t.modelTitle)),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](9,16,"CATEGORY_TITLE"),""),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("placeholder",m["\u0275\u0275pipeBind1"](13,18,"CATEGORY_TITLE_PLACEHOLDER"))("ngModel",t.categoryTitle),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](16,20,"CATEGORY_DESC")," "),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("placeholder",m["\u0275\u0275pipeBind1"](18,22,"CATEGORY_DESC_PLACEHOLDER"))("ngModel",t.categoryDesc),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("textContent",m["\u0275\u0275pipeBind1"](21,24,"COMMON_BUTTON_CANCLE")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("disabled",!t.categoryTitle)("textContent",m["\u0275\u0275pipeBind1"](23,26,"COMMON_BUTTON_CONFIRM")))},directives:[T.a,re.b,r.d,r.k,r.l],pipes:[a.b],styles:[".ant-modal-body{padding:0}  .ant-input{box-shadow:none}  .ant-input:focus,   .ant-input:hover{border-color:#23c6c8;box-shadow:none}.share-content[_ngcontent-%COMP%]{position:relative;background-color:#fff;background-clip:padding-box;border:0;border-radius:5px;box-shadow:0 4px 12px rgba(0,0,0,.15);pointer-events:auto;height:380px;width:552px}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]{padding:16px 24px;color:rgba(0,0,0,.65);background:#fff;border-radius:4px 4px 0 0;position:relative}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{color:#333}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]{padding:0 24px;font-size:14px;line-height:1.5;word-wrap:break-word}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .input-label-desc[_ngcontent-%COMP%]{margin:20px 0 10px;font-size:14px;color:#999}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .input-label-desc[_ngcontent-%COMP%]   .red-label-tip[_ngcontent-%COMP%]{color:crimson}.share-content[_ngcontent-%COMP%]   .offset-top-styl[_ngcontent-%COMP%]{position:relative;top:-24px}.user-tip-close[_ngcontent-%COMP%]{font-size:16px;right:24px;top:18px;line-height:1.5}.share-content-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;padding:0 24px 20px;text-align:right}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]{height:28px;padding:1px 12px;border-radius:4px;outline:none;border:1px solid #23c6c8;background:#23c6c8;color:#fff}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.share-content-footer[_ngcontent-%COMP%]   .cancel-btn-color[_ngcontent-%COMP%]{border:1px solid #dbdbdb;color:#5f5f5f;background:#fff}"]}),e}(),ce=n("ebHz"),le=function(){return["position-relative"]};function se(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",34),m["\u0275\u0275listener"]("nzVisibleChange",function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().tablePopoverShow.menu4=e}),m["\u0275\u0275element"](1,"i",35),m["\u0275\u0275elementStart"](2,"span"),m["\u0275\u0275text"](3),m["\u0275\u0275pipe"](4,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"](),o=m["\u0275\u0275reference"](35);m["\u0275\u0275classMap"](i.authAccess&&(i.authAccess.userEditPermission||i.authAccess.templateAccess)?"cursor-pointer":"cursor-disabled"),m["\u0275\u0275property"]("nzDropdownMenu",o)("nzVisible",i.tablePopoverShow.menu4)("nzDisabled",!(i.authAccess&&(i.authAccess.userEditPermission||i.authAccess.templateAccess)))("redCircleVisible",i.isShowTable)("className",m["\u0275\u0275pureFunction0"](10,le)),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](4,8,"NEW"))}}function de(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1),m["\u0275\u0275pipe"](2,"translate"),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate3"]("",n.currentDomainInfo.domainTitle,"",n.currentDomainInfo.domainType,"",m["\u0275\u0275pipeBind1"](2,3,"KNOWLEDGE_BASE")," ")}}function pe(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"]("",n.currentDomainInfo.domainTitle," ")}}function ue(e,t){1&e&&m["\u0275\u0275element"](0,"i",39)}function me(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",36),m["\u0275\u0275template"](1,ue,1,0,"ng-template",null,37,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275element"](3,"nz-spin",38),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275reference"](2);m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("nzIndicator",n)}}function ge(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275elementStart"](1,"span",56),m["\u0275\u0275listener"]("click",function(e){m["\u0275\u0275restoreView"](n);var t=m["\u0275\u0275nextContext"](3).$implicit;return m["\u0275\u0275nextContext"](2).showUpdateModal(e,t)}),m["\u0275\u0275pipe"](2,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"span",57),m["\u0275\u0275listener"]("nzOnConfirm",function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](3).$implicit;return m["\u0275\u0275nextContext"](2).deleteCategory(e)})("click",function(e){return e.stopPropagation()}),m["\u0275\u0275pipe"](4,"translate"),m["\u0275\u0275pipe"](5,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementContainerEnd"]()}2&e&&(m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("title",m["\u0275\u0275pipeBind1"](2,4,"EDIT_CATEGORY")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("nzOkType","danger")("nzPopconfirmTitle",m["\u0275\u0275pipeBind1"](4,6,"ARE_YOU_SURE_DELETE"))("title",m["\u0275\u0275pipeBind1"](5,8,"COMMON_BUTTON_DELETE")))}function he(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"span",55),m["\u0275\u0275listener"]("mouseover",function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2).$implicit;return m["\u0275\u0275nextContext"](2).hoverHandler(e)})("mouseout",function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](4).hoverHandler()}),m["\u0275\u0275template"](1,ge,6,10,"ng-container",14),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"](2).$implicit,o=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("hidden",(null==o.hoverCategory?null:o.hoverCategory.id)!==i.id),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0!=i.domain_id)}}function fe(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",45),m["\u0275\u0275listener"]("mouseover",function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"](2).hoverHandler(e)})("mouseout",function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](3).hoverHandler()})("click",function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"](2).goDetailPage(e,"category")}),m["\u0275\u0275elementStart"](1,"div",46),m["\u0275\u0275element"](2,"img",47),m["\u0275\u0275elementStart"](3,"div",48),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"div",49),m["\u0275\u0275elementStart"](6,"span",50),m["\u0275\u0275listener"]("click",function(e){m["\u0275\u0275restoreView"](n);var t=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"](2).accessControlClick(e,t)}),m["\u0275\u0275pipe"](7,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](8,he,2,2,"span",51),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"div",52),m["\u0275\u0275elementStart"](10,"div",53),m["\u0275\u0275text"](11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",54),m["\u0275\u0275text"](13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]().$implicit,o=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/"+i.icon+".jpg",m["\u0275\u0275sanitizeUrl"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](i.wiki_total+"\u7bc7\u6587\u7ae0"),m["\u0275\u0275advance"](2),m["\u0275\u0275classMap"](1===i.visibility||4===i.visibility?"icon-unlock":"icon-lock"),m["\u0275\u0275property"]("hidden",(null==o.hoverCategory?null:o.hoverCategory.id)!==i.id)("title",m["\u0275\u0275pipeBind1"](7,11,"PRIVACY")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",o.authAccess.canCreateCategory),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("title",i.title),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",i.title," "),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("title",i.description),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",i.description,"")}}function ve(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,fe,14,13,"div",44),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","grey"!==n.classify)}}function Ce(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",40),m["\u0275\u0275template"](1,ve,2,1,"div",41),m["\u0275\u0275elementStart"](2,"div",42),m["\u0275\u0275listener"]("click",function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().openCreateCategoryModal()}),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275element"](4,"span",43),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",i.categoriesArr),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("nzTooltipTitle",m["\u0275\u0275pipeBind1"](3,4,i.authAccess.canCreateCategory?"":"NO_CATEGORY_ACCESS_TIP")),m["\u0275\u0275advance"](2),m["\u0275\u0275classProp"]("hover-createable",i.authAccess.canCreateCategory)}}function be(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",68),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]().index;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"]("Top"+(n+1))}}function xe(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div",58),m["\u0275\u0275listener"]("click",function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).goDetailPage(e,"hot")}),m["\u0275\u0275elementStart"](2,"div",59),m["\u0275\u0275template"](3,be,2,1,"div",60),m["\u0275\u0275elementStart"](4,"div",61),m["\u0275\u0275elementStart"](5,"div",62),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](7,"div",63),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",64),m["\u0275\u0275elementStart"](9,"div",65),m["\u0275\u0275elementStart"](10,"div"),m["\u0275\u0275element"](11,"img",66),m["\u0275\u0275elementStart"](12,"span"),m["\u0275\u0275text"](13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div"),m["\u0275\u0275element"](15,"span",67),m["\u0275\u0275elementStart"](16,"span"),m["\u0275\u0275text"](17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=t.index;m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",o<=2),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](i.title),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("innerHTML",i.description,m["\u0275\u0275sanitizeHtml"]),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("src","http://w3.huawei.com/w3lab/rest/yellowpage/face/"+i.created_by.account+"/45",m["\u0275\u0275sanitizeUrl"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](i.created_by.name),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](i.views)}}function ye(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",12),m["\u0275\u0275elementStart"](1,"div",13),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",40),m["\u0275\u0275template"](5,xe,18,6,"div",41),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](3,2,"HOTS")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngForOf",n.hostList)}}function we(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"app-article-create",69),m["\u0275\u0275listener"]("cancelEvent",function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().modelShowClose()}),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("model","create-article")("articleTitle",null==i.templateObj?null:i.templateObj.articleTitle)("currentDomain",i.currentDomainInfo.id)("selectedTemplate",i.selectedTemplate)}}function Oe(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"app-excel-create",70),m["\u0275\u0275element"](1,"div",71),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("container","new-luckysheet")("model","create-excel")("currentDomain",n.currentDomainInfo.id)}}function _e(e,t){if(1&e&&m["\u0275\u0275element"](0,"app-create-template",72),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("model",null==n.templateObj?null:n.templateObj.model)("articleTitle",null==n.templateObj?null:n.templateObj.articleTitle)("articleUiSource",null==n.templateObj?null:n.templateObj.articleUiSource)("articleDescription",null==n.templateObj?null:n.templateObj.articleDescription)("number",null==n.templateObj?null:n.templateObj.number)("currentDomain",n.currentDomainInfo.id)}}function Me(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"add-new-category-modal",73),m["\u0275\u0275listener"]("modelShowCloseChange",function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().closeModalHandler(e)}),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("model",i.model)("categoryTitle",null==i.activeCategory?null:i.activeCategory.title)("categoryDesc",null==i.activeCategory?null:i.activeCategory.description)}}function Se(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",74),m["\u0275\u0275elementStart"](1,"nz-modal",75),m["\u0275\u0275listener"]("nzVisibleChange",function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().accessControlShow=e}),m["\u0275\u0275elementStart"](2,"div",76),m["\u0275\u0275elementStart"](3,"access-control",77),m["\u0275\u0275listener"]("closeCallback",function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().closeCallbackFunc()}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("nzVisible",i.accessControlShow)("nzClosable",!1)("nzFooter",null)("nzWidth",600),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("categoryDetails",i.categoryDetails)}}function Pe(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"li",78),m["\u0275\u0275listener"]("click",function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().titleCreateExcel()}),m["\u0275\u0275element"](1,"i",79),m["\u0275\u0275element"](2,"span",32),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("magazineVisible",i.tablePopoverShow.menu4&&i.isShowTable),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("textContent",m["\u0275\u0275pipeBind1"](3,2,"NEW_TABLE"))}}var Ee=function(){function e(e,t,n,i,o,r,a,c){this.emitService=e,this.router=t,this.activeRoute=n,this.knowledgeService=i,this.searchService=o,this.authService=r,this.notification=a,this.translate=c,this.showLoading=!1,this.hoverTemplateNum=-1,this.createArticleCtrl=!1,this.newExcelMod=!1,this.editModelInfo=void 0,this.showHistory=!1,this.isFocus=!1,this.templateObj={articleTitle:"\u7a7a\u767d\u6587\u6863"},this.isShowCreateCategory=!1,this.authAccess={canCreateCategory:!1,userEditPermission:!0,canCreateArticle:!1},this.parentDomain=[],this.accessControlShow=!1,this.isShowTable=!1,this.tablePopoverShow={menu4:!1}}return e.prototype.ngOnInit=function(){var e=this;this.customStyle={top:"27px",left:"0px",width:"451px"},this.inputStyle={width:"250px"},this.isStandaloneWiki=d.a.isStandaloneWiki,p.b.then(function(t){t&&t.id?e.knowledgeService.queryDomainTree(t.id).subscribe(function(t){e.parentDomain=t},function(){}):e.parentDomain=[]}),this.emitServiceSub=this.emitService.eventEmit.subscribe(function(t){if("category::recommendation-template-click"===(null==t?void 0:t.eventType)&&("MORE"!==t.obj.title&&(e.selectedTemplate=Object(l.a)(Object(l.a)({},t.obj),{operateType:"select-template"}),e.editModelInfo={id:e.currentDomainInfo.id,res:t.obj,model:"create-article"}),e.createArticleCtrl=!0),"category::recommendation-edit-template"===(null==t?void 0:t.eventType)){var n=t.obj;e.templateObj={model:"update-template",articleTitle:n.title,articleUiSource:1===n.ui_source?"rich-text":"markdown",articleDescription:n.description,show:!0,number:n.number},e.selectedTemplate=Object(l.a)(Object(l.a)({},t.obj),{operateType:"update-template"}),e.editModelInfo={id:e.currentDomainInfo.id,res:t.obj,model:"update-template"},e.createArticleCtrl=!0}"category::wiki-number-change"===(null==t?void 0:t.eventType)&&setTimeout(function(){e.currentDomainInfo.id&&e.getCategoriesList()}),"article::wiki-closeModel"===(null==t?void 0:t.type)&&e.modelShowClose(),!t.type||"wiki:template-item-reommendation-change"!==t.type&&"delete-template-success"!==t.type&&"update-template-success"!==t.type&&"create-template-success"!==t.type||(e.templateObj.show=!1),"close-create-template"===(null==t?void 0:t.type)&&(e.templateObj.show=!1),"wiki:category-control-set-success"===(null==t?void 0:t.type)&&e.getCategoriesList(),"excel::wiki-closeModel"===(null==t?void 0:t.type)&&(e.newExcelMod=!1),"add-document"===(null==t?void 0:t.type)&&(e.newExcelMod=!1,e.router.navigateByUrl("/domains/"+e.currentDomainInfo.id+"/wiki/"+t.categoryId+"/"+t.sn))}),this.routerSub=this.activeRoute.paramMap.subscribe(function(t){t.get("domain_id")&&(e.currentDomainInfo={id:t.get("domain_id")}),e.knowledgeService.getTableGray({resource:"knowledge:table",domainId:e.currentDomainInfo.id}).subscribe(function(t){e.isShowTable=t},function(){}),e.buildAuth(),e.getDomainInfo(),e.getCategoriesList()})},e.prototype.formatHotList=function(e){var t=this;e.forEach(function(e){var n="";e.paragraphs.sort(function(e,t){return e.content_sort<t.content_sort?-1:1}),e.paragraphs.forEach(function(e){n+=1===e.ui_source?e.content:filterXSS(marked(e.content))}),e.description=t.getClearContent(n)}),this.hostList=e},e.prototype.getDomainInfo=function(){var e=this;this.currentDomainChanges=window.communicationService.currentDomain$.subscribe(function(t){t&&(e.currentDomainInfo=t)})},e.prototype.goSearchPage=function(){""!=this.searchVal.trim()&&(Object(u.c)("wiki-search-from",window.location.href),this.searchService.goSearchPage(this))},e.prototype.getCategoriesList=function(){var e=this;this.showLoading=!0,this.knowledgeService.getWikiCategories(this.currentDomainInfo.id).subscribe(function(t){e.showLoading=!1,e.categoriesArr=t.map(function(e,t){return Object(l.a)({icon:"category-icon-"+((t+1)%10==0?10:(t+1)%10)},e)})},function(){e.showLoading=!1})},e.prototype.ngOnDestroy=function(){this.emitServiceSub.unsubscribe(),this.routerSub.unsubscribe(),this.currentDomainChanges.unsubscribe(),this.currentUserChanges.unsubscribe()},e.prototype.getClearContent=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent},e.prototype.modelShowClose=function(e){this.createArticleCtrl=!1,e&&e.type&&"jump-router"==e.type&&this.router.navigate(["../wiki/"+e.obj.sn],{relativeTo:this.activeRoute})},e.prototype.hoverTemplateHandle=function(e,t){this.hoverTemplateNum=t?e:-1},e.prototype.goDetailPage=function(e,t){if("grey"!==e.classify)switch(t){case"hot":this.router.navigate(["../wiki/"+e.kanban_id+"/"+e.sn],{relativeTo:this.activeRoute});break;default:this.router.navigate(["../wiki/"+e.id],{relativeTo:this.activeRoute,queryParams:{from:"category"}})}},e.prototype.createArticle=function(){(this.authAccess.userEditPermission||this.authAccess.templateAccess)&&(this.createArticleCtrl=!0)},e.prototype.titleCreateExcel=function(){(this.authAccess.userEditPermission||this.authAccess.templateAccess)&&(this.newExcelMod=!0)},e.prototype.openCreateCategoryModal=function(){this.authAccess.canCreateCategory&&(this.isShowCreateCategory=!0,this.model="create-category",this.activeCategory=void 0)},e.prototype.buildAuth=function(){var e=this;this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&setTimeout(function(){e.authService.buildOperateAuth({currentDomain:e.currentDomainInfo.id,currentUserId:t.user_id}).then(function(t){e.authAccess=t})})})},e.prototype.closeModalHandler=function(e){this.isShowCreateCategory=!1,"create-category"===(null==e?void 0:e.model)?this.createCategory(e):this.updateCategory(e)},e.prototype.createCategory=function(e){var t=this;this.knowledgeService.createCategory({domainId:this.currentDomainInfo.id,title:e.categoryTitle,description:e.categoryDesc,type:"team"}).subscribe(function(e){e?(t.getCategoriesList(),t.notification.success(t.translate.instant("UPDATE_SUCCESS"),"")):t.notification.error(t.translate.instant("UPDATE_FAILED"),"")},function(){})},e.prototype.updateCategory=function(e){var t=this;this.knowledgeService.updateCategory({id:this.activeCategory.id,title:e.categoryTitle,description:e.categoryDesc,domainId:this.currentDomainInfo.id,classify:this.activeCategory.classify}).subscribe(function(e){200===e.code?(t.getCategoriesList(),t.notification.success(t.translate.instant("UPDATE_SUCCESS"),"")):t.notification.error(t.translate.instant("UPDATE_FAILED"),"")},function(){})},e.prototype.deleteCategory=function(e){var t=this;this.knowledgeService.deleteCategory(e.id,this.currentDomainInfo.id).subscribe(function(e){e?(t.getCategoriesList(),t.notification.success(t.translate.instant("UPDATE_SUCCESS"),"")):t.notification.error(t.translate.instant("UPDATE_FAILED"),"")},function(){})},e.prototype.hoverHandler=function(e){this.hoverCategory=e||void 0},e.prototype.showUpdateModal=function(e,t){e.stopPropagation(),this.activeCategory=t,this.isShowCreateCategory=!0,this.model="update-category"},e.prototype.closeCallbackFunc=function(){this.accessControlShow=!1},e.prototype.accessControlClick=function(e,t){e.stopPropagation(),this.authAccess.canCreateCategory?(this.categoryDetails=t,this.accessControlShow=!0):this.notification.warning(this.translate.instant("NO_CATEGORY_ACCESS_TIP"),"")},e.prototype.goNoteRouter=function(){var e=window.location.origin;Object(u.c)("beforeNote",window.location.href),window.location.assign(e+="/notes")},e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](g.a),m["\u0275\u0275directiveInject"](o.f),m["\u0275\u0275directiveInject"](o.a),m["\u0275\u0275directiveInject"](h.b),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](f.a),m["\u0275\u0275directiveInject"](v.b),m["\u0275\u0275directiveInject"](a.c))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["knowledge-categories"]],features:[m["\u0275\u0275ProvidersFeature"]([s.a])],decls:42,vars:23,consts:[[1,"categories-wrapper"],[1,"main-area-wrapper"],[1,"categories-header"],[1,"flex-box","flex-a-c"],[1,"f-14"],[3,"parentDomain"],[1,"trigger-btn","f-14","cursor-pointer",3,"click"],[1,"icon-wrap"],[1,"iconfont","icon-notebook-mark"],[1,"search-padding"],[3,"customStyle","inputStyle","pageForm"],["class","create-article-btn","nz-dropdown","","nzTrigger","click","redCircle","","storageItemName","readTableGuide",3,"class","nzDropdownMenu","nzVisible","nzDisabled","redCircleVisible","className","nzVisibleChange",4,"ngIf"],[1,"part-wrapper"],[1,"part-header"],[4,"ngIf"],["class","loading-style loading-height",4,"ngIf"],["class","part-flex-wrapper",4,"ngIf"],["class","part-wrapper",4,"ngIf"],[1,"main-right-view-wrapper"],[1,"recent-view-wrapper"],[1,"update-view-wrapper"],[3,"scene"],[1,"favorite-view-wrapper"],[3,"model","articleTitle","currentDomain","selectedTemplate","cancelEvent",4,"ngIf"],[3,"container","model","currentDomain",4,"ngIf"],[3,"model","articleTitle","articleUiSource","articleDescription","number","currentDomain",4,"ngIf"],[3,"model","categoryTitle","categoryDesc","modelShowCloseChange",4,"ngIf"],["class","modal-wrapper",4,"ngIf"],["menu4","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",1,"title-menu-item",3,"click"],[1,"m-r-10","icon-color","f-14","fa","fa-file-text-o"],[3,"textContent"],["nz-menu-item","","class","title-menu-item","magazineTips","","storageItemName","readTableGuide","nzPopoverPlacement","left",3,"magazineVisible","click",4,"ngIf"],["nz-dropdown","","nzTrigger","click","redCircle","","storageItemName","readTableGuide",1,"create-article-btn",3,"nzDropdownMenu","nzVisible","nzDisabled","redCircleVisible","className","nzVisibleChange"],[1,"add-word-styl","iconfont","icon-plus","f-14"],[1,"loading-style","loading-height"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading",1,"icon-style"],[1,"part-flex-wrapper"],[4,"ngFor","ngForOf"],["nz-tooltip","",1,"part-flex-item","part-flex-item-category","cursor-pointer","add-new-category-btn",3,"nzTooltipTitle","click"],[1,"iconfont","icon-add"],["class","part-flex-item part-flex-item-category cursor-pointer card-active",3,"mouseover","mouseout","click",4,"ngIf"],[1,"part-flex-item","part-flex-item-category","cursor-pointer","card-active",3,"mouseover","mouseout","click"],[1,"flex-item-img-bg"],[1,"item-img-bg-styl",3,"src"],[1,"article-num-wrapper"],[1,"operate-wrapper"],[1,"iconfont","icon-big","m-r-8",3,"hidden","title","click"],[3,"hidden","mouseover","mouseout",4,"ngIf"],[1,"flex-item-desc"],[1,"flex-item-desc-title","text-eclipis",3,"title"],[1,"flex-item-desc-content","text-eclipis",3,"title"],[3,"hidden","mouseover","mouseout"],[1,"iconfont","icon-edit-simple","icon-small",3,"title","click"],["nz-popconfirm","","nzPopconfirmPlacement","top",1,"fa","fa-trash-o","icon-big",3,"nzOkType","nzPopconfirmTitle","title","nzOnConfirm","click"],[1,"part-flex-item","part-flex-item-category","cursor-pointer","card-active",3,"click"],[1,"flex-item-hot-desc"],["class","top-three",4,"ngIf"],[1,"item-hot-desc-wrapper"],[1,"text-eclipis","item-hot-desc-wrapper-title"],[1,"item-hot-desc-wrapper-desc",3,"innerHTML"],[1,"flex-item-hot-user"],[1,"flex-item-user-info"],[1,"flex-item-user-avater",3,"src"],[1,"iconfont","icon-eye","view-styl"],[1,"top-three"],[3,"model","articleTitle","currentDomain","selectedTemplate","cancelEvent"],[3,"container","model","currentDomain"],["id","new-luckysheet",1,"luckysheet-container"],[3,"model","articleTitle","articleUiSource","articleDescription","number","currentDomain"],[3,"model","categoryTitle","categoryDesc","modelShowCloseChange"],[1,"modal-wrapper"],["nzWrapClassName","access-control-modal",3,"nzVisible","nzClosable","nzFooter","nzWidth","nzVisibleChange"],[2,"width","600px","height","680px"],[3,"categoryDetails","closeCallback"],["nz-menu-item","","magazineTips","","storageItemName","readTableGuide","nzPopoverPlacement","left",1,"title-menu-item",3,"magazineVisible","click"],[1,"m-r-10","iconfont","icon-table","f-14"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"div",4),m["\u0275\u0275element"](5,"domain-change",5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",6),m["\u0275\u0275listener"]("click",function(){return t.goNoteRouter()}),m["\u0275\u0275elementStart"](7,"span",7),m["\u0275\u0275element"](8,"i",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](9),m["\u0275\u0275pipe"](10,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"span",9),m["\u0275\u0275element"](12,"wiki-search-input",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](13,se,5,11,"button",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",12),m["\u0275\u0275elementStart"](15,"div",13),m["\u0275\u0275template"](16,de,3,5,"span",14),m["\u0275\u0275template"](17,pe,2,1,"span",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](18,me,4,1,"div",15),m["\u0275\u0275template"](19,Ce,5,6,"div",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](20,ye,6,4,"div",17),m["\u0275\u0275element"](21,"template-list"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"div",18),m["\u0275\u0275elementStart"](23,"div",19),m["\u0275\u0275element"](24,"recent-view"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"div",20),m["\u0275\u0275element"](26,"favorite-view",21),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"div",22),m["\u0275\u0275element"](28,"favorite-view"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](29,we,1,4,"app-article-create",23),m["\u0275\u0275template"](30,Oe,2,3,"app-excel-create",24),m["\u0275\u0275template"](31,_e,1,6,"app-create-template",25),m["\u0275\u0275template"](32,Me,1,3,"add-new-category-modal",26),m["\u0275\u0275template"](33,Se,4,5,"div",27),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](34,"nz-dropdown-menu",null,28),m["\u0275\u0275elementStart"](36,"ul",29),m["\u0275\u0275elementStart"](37,"li",30),m["\u0275\u0275listener"]("click",function(){return t.createArticle()}),m["\u0275\u0275element"](38,"i",31),m["\u0275\u0275element"](39,"span",32),m["\u0275\u0275pipe"](40,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](41,Pe,4,4,"li",33),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("parentDomain",t.parentDomain),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](10,19,"MY_NOTE")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("customStyle",t.customStyle)("inputStyle",t.inputStyle)("pageForm","category"),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.authAccess.canCreateArticle),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",t.currentDomainInfo&&!t.isStandaloneWiki),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.currentDomainInfo&&t.isStandaloneWiki),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.showLoading),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!t.showLoading),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!1),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("scene","update"),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",t.createArticleCtrl),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.newExcelMod),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==t.templateObj?null:t.templateObj.show),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.isShowCreateCategory),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.accessControlShow),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("textContent",m["\u0275\u0275pipeBind1"](40,21,"NEW_ARTICLE")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.isShowTable))},directives:[I,k.a,i.n,H,Q,J.a,O.d,Z.c,Z.e,O.b,ee.b,$.a,G.a,i.m,te.d,A.a,ne.a,ie.a,oe.a,ae,T.a,ce.a,ee.a],pipes:[a.b],styles:[".categories-wrapper[_ngcontent-%COMP%]{height:100%;display:flex}.categories-wrapper[_ngcontent-%COMP%]   .main-area-wrapper[_ngcontent-%COMP%]{height:100%;flex:3.12;border-right:1px solid #e5e5e5;overflow-y:auto;padding:18px 18px 22px}.categories-wrapper[_ngcontent-%COMP%]   .main-area-wrapper[_ngcontent-%COMP%]   .categories-header[_ngcontent-%COMP%]{height:30px;font-size:20px;display:flex;align-items:center;justify-content:space-between}.categories-wrapper[_ngcontent-%COMP%]   .main-area-wrapper[_ngcontent-%COMP%]   .trigger-btn[_ngcontent-%COMP%]{padding:5px 10px;margin-right:10px;border-radius:3px;background-color:#f8f8f8;display:flex;flex-direction:row;align-items:center}.categories-wrapper[_ngcontent-%COMP%]   .main-area-wrapper[_ngcontent-%COMP%]   .icon-wrap[_ngcontent-%COMP%]{background-color:#23c6c8;color:#fff;display:inline-block;width:20px;line-height:20px;text-align:center;border-radius:3px;margin-right:5px}.categories-wrapper[_ngcontent-%COMP%]   .main-area-wrapper[_ngcontent-%COMP%]   .icon-wrap[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.categories-wrapper[_ngcontent-%COMP%]   .main-area-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.categories-wrapper[_ngcontent-%COMP%]   .main-area-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .categories-wrapper[_ngcontent-%COMP%]   .main-area-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{border-radius:10px;background:transparent}.categories-wrapper[_ngcontent-%COMP%]   .main-area-wrapper[_ngcontent-%COMP%]:hover::-webkit-scrollbar{width:8px;height:8px}.categories-wrapper[_ngcontent-%COMP%]   .main-area-wrapper[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{border-radius:10px;background-color:#ccc}.categories-wrapper[_ngcontent-%COMP%]   .main-area-wrapper[_ngcontent-%COMP%]:hover::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}.categories-wrapper[_ngcontent-%COMP%]   .main-right-view-wrapper[_ngcontent-%COMP%]{height:100%;flex:1;overflow:auto}.categories-wrapper[_ngcontent-%COMP%]   .main-right-view-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.categories-wrapper[_ngcontent-%COMP%]   .main-right-view-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .categories-wrapper[_ngcontent-%COMP%]   .main-right-view-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{border-radius:10px;background:transparent}.categories-wrapper[_ngcontent-%COMP%]   .main-right-view-wrapper[_ngcontent-%COMP%]:hover::-webkit-scrollbar{width:8px;height:8px}.categories-wrapper[_ngcontent-%COMP%]   .main-right-view-wrapper[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{border-radius:10px;background-color:#ccc}.categories-wrapper[_ngcontent-%COMP%]   .main-right-view-wrapper[_ngcontent-%COMP%]:hover::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}.categories-wrapper[_ngcontent-%COMP%]   .cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.categories-wrapper[_ngcontent-%COMP%]   .text-eclipis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.header-title-search[_ngcontent-%COMP%]{display:inline-block;position:relative}.header-title-search[_ngcontent-%COMP%]   .search-padding[_ngcontent-%COMP%]{padding-left:16px;display:inline-block}.loading-height[_ngcontent-%COMP%]{height:300px}.part-wrapper[_ngcontent-%COMP%]{margin-top:25px}.part-wrapper[_ngcontent-%COMP%]   .part-header[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item[_ngcontent-%COMP%]{width:11.98vw;margin-top:1.04vw;margin-right:1.04vw;box-shadow:1px 1px 3px #e5e5e5;border:1px solid #e5e5e5;border-radius:4px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-category[_ngcontent-%COMP%]{height:8.07vw}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-category.gray[_ngcontent-%COMP%]{background:#ddd}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-category.not-allow[_ngcontent-%COMP%]{cursor:not-allowed}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]{height:7.03vw;position:relative}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]{height:30.77%;background:#f5f6f8;display:flex;align-items:center;justify-content:flex-end}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .margin-right-8[_ngcontent-%COMP%]{margin-right:8px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .icon-small[_ngcontent-%COMP%]{font-size:15px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-header[_ngcontent-%COMP%]   .icon-big[_ngcontent-%COMP%]{font-size:18px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .flex-item-template-title[_ngcontent-%COMP%]{height:69.23%;padding:14.35% 18px 18px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .template-icon-wrapper[_ngcontent-%COMP%]{position:absolute;left:18px;top:14.81%;width:40px;height:40px;border-radius:3px;box-shadow:2px 2px 4px #e5e5e5;display:flex;justify-content:center;align-items:center;background:#fff}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .template-icon-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .template-icon-title[_ngcontent-%COMP%]{position:absolute;left:64px;top:14.81%;width:calc(100% - 84px);height:20px;color:#bdbdbd;font-size:12px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .part-flex-item-template[_ngcontent-%COMP%]   .active-template-width[_ngcontent-%COMP%]{width:calc(100% - 140px)}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#f5f6f8}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]   .template-icon-more-wrapper[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:3px;box-shadow:2px 2px 4px #e5e5e5;display:flex;justify-content:center;align-items:center;background:#fff;opacity:.6;margin:0 auto}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]   .icon-rotate-styl[_ngcontent-%COMP%]{transform:rotate(270deg);display:inline-block;color:#999;font-size:14px;position:relative;top:-1px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .flex-item-center[_ngcontent-%COMP%]   .MORE-desc-styl[_ngcontent-%COMP%]{color:#999;font-size:18px;font-weight:600;margin-right:5px}.part-wrapper[_ngcontent-%COMP%]   .part-flex-wrapper[_ngcontent-%COMP%]   .hover-createable[_ngcontent-%COMP%]:hover{color:#23c6c8}.part-wrapper[_ngcontent-%COMP%]   .add-new-category-btn[_ngcontent-%COMP%]{color:#ccc;display:flex;align-items:center;justify-content:center}.part-wrapper[_ngcontent-%COMP%]   .add-new-category-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:30px;font-weight:700}.create-article-btn[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;outline:none;border-radius:4px;background:#23c6c8;color:#fff;border:none;font-size:14px;line-height:100%}.create-article-btn[_ngcontent-%COMP%]   .add-word-styl[_ngcontent-%COMP%]{margin-right:5px}.flex-item-img-bg[_ngcontent-%COMP%]{height:61.3%;position:relative}.flex-item-img-bg[_ngcontent-%COMP%]   .item-img-bg-styl[_ngcontent-%COMP%]{height:100%;width:100%}.flex-item-img-bg[_ngcontent-%COMP%]   .absolute-icon-lock[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;font-size:14px;color:#676a6c}.flex-item-img-bg[_ngcontent-%COMP%]   .article-num-wrapper[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;height:20px;line-height:20px;padding-left:8px;padding-right:8px;color:#fff;background:#888;font-size:12px;border-radius:2px}.flex-item-img-bg[_ngcontent-%COMP%]   .operate-wrapper[_ngcontent-%COMP%]{position:absolute;top:5px;right:8px}.flex-item-img-bg[_ngcontent-%COMP%]   .operate-wrapper[_ngcontent-%COMP%]   .icon-small[_ngcontent-%COMP%]{font-size:15px;margin-right:8px}.flex-item-img-bg[_ngcontent-%COMP%]   .operate-wrapper[_ngcontent-%COMP%]   .icon-big[_ngcontent-%COMP%]{font-size:18px}.flex-item-desc[_ngcontent-%COMP%]{height:38.7%;padding:.4167vw .52083vw}.flex-item-desc[_ngcontent-%COMP%]   .flex-item-desc-title[_ngcontent-%COMP%]{font-size:.83vw}.flex-item-desc[_ngcontent-%COMP%]   .flex-item-desc-content[_ngcontent-%COMP%]{font-size:.625vw;color:#bdbdbd}.flex-item-hot-desc[_ngcontent-%COMP%]{height:79%;position:relative}.flex-item-hot-desc[_ngcontent-%COMP%]   .top-three[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:54px;height:18px;border-bottom-left-radius:36px;background:rgba(35,198,200,.8);font-size:12px;color:#fff;text-align:center}.flex-item-hot-desc[_ngcontent-%COMP%]   .item-hot-desc-wrapper[_ngcontent-%COMP%]{padding:8px 8px 0;overflow-y:hidden;height:100%;font-size:14px}.flex-item-hot-desc[_ngcontent-%COMP%]   .item-hot-desc-wrapper[_ngcontent-%COMP%]   .item-hot-desc-wrapper-title[_ngcontent-%COMP%]{width:calc(100% - 54px)}.flex-item-hot-desc[_ngcontent-%COMP%]   .item-hot-desc-wrapper[_ngcontent-%COMP%]   .item-hot-desc-wrapper-desc[_ngcontent-%COMP%]{margin-top:5px;height:calc(100% - 35px);font-size:12px;color:#999;overflow:hidden;position:relative;-webkit-mask-image:-webkit-linear-gradient(top,#fff 82%,hsla(0,0%,100%,0))}.flex-item-hot-desc[_ngcontent-%COMP%]   .item-hot-desc-wrapper[_ngcontent-%COMP%]   .item-hot-desc-wrapper-desc[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .flex-item-hot-desc[_ngcontent-%COMP%]   .item-hot-desc-wrapper[_ngcontent-%COMP%]   .item-hot-desc-wrapper-desc[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .flex-item-hot-desc[_ngcontent-%COMP%]   .item-hot-desc-wrapper[_ngcontent-%COMP%]   .item-hot-desc-wrapper-desc[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .flex-item-hot-desc[_ngcontent-%COMP%]   .item-hot-desc-wrapper[_ngcontent-%COMP%]   .item-hot-desc-wrapper-desc[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .flex-item-hot-desc[_ngcontent-%COMP%]   .item-hot-desc-wrapper[_ngcontent-%COMP%]   .item-hot-desc-wrapper-desc[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .flex-item-hot-desc[_ngcontent-%COMP%]   .item-hot-desc-wrapper[_ngcontent-%COMP%]   .item-hot-desc-wrapper-desc[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:14px!important}.flex-item-hot-user[_ngcontent-%COMP%]{height:21%;position:relative}.flex-item-hot-user[_ngcontent-%COMP%]   .flex-item-user-info[_ngcontent-%COMP%]{color:#bdbdbd;height:20px;position:absolute;bottom:10px;left:8px;width:calc(100% - 21px);display:flex;justify-content:space-between;line-height:20px;font-size:13px}.flex-item-hot-user[_ngcontent-%COMP%]   .flex-item-user-info[_ngcontent-%COMP%]   .flex-item-user-avater[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;margin-right:3px;position:relative;top:-2px}.flex-item-hot-user[_ngcontent-%COMP%]   .flex-item-user-info[_ngcontent-%COMP%]   .view-styl[_ngcontent-%COMP%]{margin-right:4px;font-size:9px}  .access-control-modal .ant-modal-body{padding:0!important}  .access-control-modal .ant-modal-body::-webkit-scrollbar{width:0!important}.title-menu-item[_ngcontent-%COMP%]{clear:both;margin:0;padding:5px 12px;color:rgba(0,0,0,.65);font-weight:400;font-size:14px;line-height:22px;white-space:nowrap;cursor:pointer;transition:all .3s;margin-bottom:0!important}"]}),e}(),Ie=n("kVCb"),ke=n("7gQO"),Te=n("FXAj"),Ae=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[i.c,r.g,O.c]]}),e}(),De=n("cnMA"),ze=n("Z9Gr"),Le=n("nraT"),Ve=function(){function e(e){Object(c.a)(e)}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275inject"](a.c))},e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[i.c,r.g,a.a,ke.a,Te.a,T.b,re.e,A.b,$.b,G.b,Ae,te.b,O.c,Ie.a,De.a,ze.a,Le.a,o.i.forChild([{path:"",component:Ee}])]]}),e}()},j5vU:function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return f});var i=n("mrSG"),o=n("+oEP"),r=n("XNiG"),a=n("fXoL"),c=n("sYmb"),l=["popoverTemplate"];function s(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",1),a["\u0275\u0275elementStart"](1,"div",2),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"button",3),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().popoverSubmit("lookHelp")}),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",4),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().popoverSubmit("complete")}),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,3,"TABLE_POPOVER_CONTENT")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](6,5,"GROUP_LOOK_HELP")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](9,7,"TIP_BUTTON_KNOW")))}var d={readTableGuide:{storageItemName:"readTableGuide",content:"TABLE_POPOVER_CONTENT",link:"https://clouddevops.huawei.com/domains/2/wiki/9/WIKI2022051900022"}},p=function(){function e(){}return e.prototype.getStorageItemName=function(e){this.storageItemName=e},e.prototype.getCommitment=function(e){this.commitment$=e},e.prototype.popoverSubmit=function(e){"lookHelp"===e&&window.open(d[this.storageItemName].link,"_blank");try{localStorage.setItem(d[this.storageItemName].storageItemName,"true"),this.commitment$.next({storageStatus:!0})}catch(t){console.info(t)}},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275viewQuery"](l,1),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.popoverTemplate=n.first)},decls:2,vars:0,consts:[["popoverTemplate",""],[1,"menu-popover-list"],[1,"menu-popover-content"],["nz-button","","nzType","primary",1,"menu-popover-help",3,"click"],["nz-button","","nzType","primary",1,"menu-popover-submit",3,"click"]],template:function(e,t){1&e&&a["\u0275\u0275template"](0,s,10,9,"ng-template",null,0,a["\u0275\u0275templateRefExtractor"])},pipes:[c.b],styles:[".menu-popover-list[_ngcontent-%COMP%] {\n        width: 200px;\n        overflow: hidden;\n      }\n      .menu-popover-content[_ngcontent-%COMP%]{\n        width: 100%;\n        overflow: hidden;\n        margin-bottom: 10px;\n        line-height: 26px;\n        font-size: 14px;\n        cursor: pointer;\n        display: -webkit-box;\n        -webkit-line-clamp: 3;\n        -webkit-box-orient: vertical;\n      }\n      .menu-popover-submit[_ngcontent-%COMP%], .menu-popover-help[_ngcontent-%COMP%]{\n        position: relative;\n        right: -50px;\n        background: transparent;\n        text-shadow: none;\n        border-radius: 4px;\n        &:hover,\n        &:focus {\n          outline: none;\n        }\n      }\n      .menu-popover-submit[_ngcontent-%COMP%] {\n        margin-left: 10px;\n        color: #23c6c8;\n        border: 1px solid #23c6c8;\n      }\n      .menu-popover-help[_ngcontent-%COMP%] {\n        color: #5F5F5F;\n        border: 1px solid #DBDBDB;\n      }"]}),e}(),u=n("YF2q"),m=n("2Suw"),g=new r.a,h=function(e){function t(t,n,i,o,a,c,l){var s=e.call(this,n,i,o,a,c,l)||this;return s.componentFactoryResolver=t,s.trigger=null,s.commitment$=new r.a,s.magazineTipsComponent=s.hostView.createComponent(s.componentFactoryResolver.resolveComponentFactory(p)),s}return Object(i.d)(t,e),t.prototype.ngAfterViewInit=function(){var t=this;this.magazineTipsComponent.instance.getStorageItemName(this.storageItemName),this.magazineTipsComponent.instance.getCommitment(this.commitment$);var n=this.commitment$.subscribe(function(n){n.storageStatus&&(t.setVisible(),e.prototype.ngOnChanges.call(t,{visible:null}),g.next({storageItemName:t.storageItemName}))});this.destroy$.subscribe(function(){n.unsubscribe()}),this.content=this.magazineTipsComponent.instance.popoverTemplate,e.prototype.ngAfterViewInit.call(this)},t.prototype.ngOnChanges=function(t){var n=t.magazineVisible;n&&(this.setVisible(n.currentValue),t.visible=null),e.prototype.ngOnChanges.call(this,t)},t.prototype.setVisible=function(e){this.visible=void 0!==e?e&&"true"!==localStorage.getItem(this.storageItemName):this.magazineVisible&&"true"!==localStorage.getItem(this.storageItemName)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.Renderer2),a["\u0275\u0275directiveInject"](u.a,9),a["\u0275\u0275directiveInject"](m.a))},t.\u0275dir=a["\u0275\u0275defineDirective"]({type:t,selectors:[["","magazineTips",""]],inputs:{trigger:["nzPopoverTrigger","trigger"],storageItemName:"storageItemName",magazineVisible:"magazineVisible"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]]}),t}(o.a),f=function(){function e(e){var t=this;this.elementRef=e,this.redCircleVisible=!0,this.className=[],g.subscribe(function(e){t.storageItemName===e.storageItemName&&t.guideVisible()})}return e.prototype.ngOnChanges=function(e){this.guideVisible()},e.prototype.guideVisible=function(){var e,t;this.redCircleVisible&&!localStorage.getItem(this.storageItemName)?(e=this.elementRef.nativeElement.classList).add.apply(e,Object(i.i)(["red-circle"],this.className)):(t=this.elementRef.nativeElement.classList).remove.apply(t,Object(i.i)(["red-circle"],this.className))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](a.ElementRef))},e.\u0275dir=a["\u0275\u0275defineDirective"]({type:e,selectors:[["","redCircle",""]],inputs:{storageItemName:"storageItemName",redCircleVisible:"redCircleVisible",className:"className"},features:[a["\u0275\u0275NgOnChangesFeature"]]}),e}()},kVCb:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("ofXK"),o=n("3Pt+"),r=n("sYmb"),a=n("bBxm"),c=n("7gQO"),l=n("rMZv"),s=n("qAZ0"),d=n("3/1E"),p=n("fXoL"),u=function(){function e(e){Object(a.a)(e)}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275inject"](r.c))},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[i.c,o.g,r.a,l.d,c.a,s.b,d.b]]}),e}()},lOo3:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("fXoL"),o=n("A/Mn"),r=n("4P1S"),a=n("sYmb"),c=n("UJq8"),l=n("bNXi"),s=n("ofXK"),d=n("BT9m"),p=n("3Pt+");function u(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"i",4),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().confirmFunc()}),i["\u0275\u0275elementEnd"]()}}var m=function(){function e(e,t,n,o,r){this.translate=e,this.emitService=t,this.attrPipe=n,this.notification=o,this.knowledgeService=r,this.readOnly=!1,this.needSendIcon=!0,this.confirmClick=new i.EventEmitter,this.inputVal=""}return Object.defineProperty(e.prototype,"inputPlaceholder",{get:function(){return this.replayAnnotationObj?this.translate.instant("REPLYING","")+" "+this.attrPipe.transform(this.replayAnnotationObj.submitted_by,"person"):this.translate.instant("KNOWLEDGE_BASE_COMMENT_PLACEHOLDER","")},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&(e.currentUser=t)}),this.emitService.eventEmit.subscribe(function(t){if(t&&t.type)switch(t.type){case"wiki-comment::replyAnnotationComment":t.commentGuid==e.commentGuid&&e.replyAnnotationCommentClickHandler(t)}})},e.prototype.replyAnnotationCommentClickHandler=function(e){this.replayAnnotationObj=e.item,this.replayAnnotationObj.commentGuid=e.commentGuid,document.querySelector("[data-highlight-comment-uuid="+this.commentGuid+"]").querySelector(".annotation-input-styl").focus()},e.prototype.confirmFunc=function(){if("-1"==this.status)return this.notification.info(this.translate.instant("ENDED_DISCUSSION_TIP"),""),void(this.inputVal="");this.inputVal&&(this.replayAnnotationObj?this.postComment():this.confirmClick.emit({value:this.inputVal}),this.inputVal="")},e.prototype.postComment=function(){this.postCommentHandler(this.replayAnnotationObj)},e.prototype.postCommentHandler=function(e){var t,n=this;if(e){var i={anonymous:null!==(t=this.isAnonymous)&&void 0!==t&&t,category:"annotation",content:this.inputVal,entity_id:e.entity_id,parent_id:e.id,receiver:this.creatorId,sendCOE:!1,sendEspace:!1,submitted_by:this.currentUser.user_id,system_add:0};this.knowledgeService.postComment(i).subscribe(function(e){n.emitService.emit({type:"wiki-comment::replyAnnotationCommentPostSuccess",value:n.inputVal,replayAnnotationObj:n.replayAnnotationObj,commentGuid:n.replayAnnotationObj.commentGuid}),n.notification.success(n.translate.instant("ADD_POST_SUCCESS"),""),n.replayAnnotationObj=void 0},function(){}),window.hwa("trackStructEvent",{label:"\u8bc4\u8bba"})}},e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.c),i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](l.b),i["\u0275\u0275directiveInject"](o.b))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["comment-input"]],inputs:{readOnly:"readOnly",needSendIcon:"needSendIcon",commentGuid:"commentGuid",status:"status",isAnonymous:"isAnonymous",creatorId:"creatorId",articleId:"articleId"},outputs:{confirmClick:"confirmClick"},features:[i["\u0275\u0275ProvidersFeature"]([o.b,r.a])],decls:4,vars:6,consts:[[1,"annotation-input"],["class","input-search-icon iconfont icon-to-right",3,"click",4,"ngIf"],[3,"height","width","account"],[1,"annotation-input-styl",3,"ngModel","placeholder","ngModelChange"],[1,"input-search-icon","iconfont","icon-to-right",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",0),i["\u0275\u0275template"](1,u,1,0,"i",1),i["\u0275\u0275element"](2,"user-avatar",2),i["\u0275\u0275elementStart"](3,"input",3),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.inputVal=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.needSendIcon),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("height",25)("width",25)("account",t.currentUser.huawei_id),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",t.inputVal)("placeholder",t.inputPlaceholder))},directives:[s.n,d.a,p.d,p.k,p.l],styles:[".annotation-input[_ngcontent-%COMP%]{display:inline-block;position:relative;width:100%;height:100%}.annotation-input[_ngcontent-%COMP%]   user-avatar[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 13px);left:10px}.annotation-input[_ngcontent-%COMP%]   .input-search-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:calc(50% - 12px);cursor:pointer;color:#23c6c8}.annotation-input[_ngcontent-%COMP%]   .annotation-input-styl[_ngcontent-%COMP%]{width:100%;height:100%;outline:none;border:none;background:#fff;padding:10px 40px 10px 50px;border-radius:5px}"]}),e}()},lPmA:function(e,t,n){"use strict";n.d(t,"a",function(){return H});var i=n("fXoL"),o=n("XNiG"),r=n("1G5W"),a=n("XIp8"),c=n("1zlk"),l=n("UJq8"),s=n("sYmb"),d=n("tyNb"),p=n("A/Mn"),u=n("dEAy"),m=n("bNXi"),g=n("ofXK"),h=n("qAZ0"),f=n("rMZv"),v=n("3/1E"),C=n("oFdG");function b(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",11),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"span",12),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).changeModel("full")}),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](o.modelTitle),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](5,2,"SHOW_MORE"))}}function x(e,t){1&e&&i["\u0275\u0275element"](0,"i",16)}function y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275template"](1,x,1,0,"ng-template",null,14,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275element"](3,"nz-spin",15),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](2);i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("nzIndicator",n)}}function w(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",27),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](3).$implicit;return i["\u0275\u0275nextContext"](3).setWikiFavorite(e)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275element"](2,"i",28),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](3).$implicit;i["\u0275\u0275property"]("title",i["\u0275\u0275pipeBind1"](1,3,o.isFavorite?"UNFAVORITE":"ADD_TO_FAVORITES")),i["\u0275\u0275advance"](2),i["\u0275\u0275classMap"](o.isFavorite?"icon-xing1":"icon-star-outline")}}function O(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",29),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](3),t=e.$implicit,o=e.index;return i["\u0275\u0275nextContext"](3).thoroughDeletedArticle(t,o)}),i["\u0275\u0275element"](1,"i",30),i["\u0275\u0275elementEnd"]()}}var _=function(){return["favoriteList","favorite"]};function M(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,w,3,5,"span",25),i["\u0275\u0275template"](2,O,2,0,"span",26),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](5);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","recycleBin"!==n.scene),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](2,_).includes(n.scene))}}var S=function(){return["update","view","case","excellentCasesMore"]};function P(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",20),i["\u0275\u0275elementStart"](2,"div",21),i["\u0275\u0275element"](3,"img",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",23),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](3).goDetailPage(e)}),i["\u0275\u0275elementStart"](5,"div",24),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,M,3,3,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](),r=o.index,a=o.$implicit,c=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275classMap"](0==r?"item-no-border":""),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](a.title),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](4,S).includes(c.scene))}}function E(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275template"](1,P,8,5,"ng-container",9),i["\u0275\u0275elementEnd"]()),2&e){var n=t.index;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n<5)}}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",31),i["\u0275\u0275element"](1,"img",32),i["\u0275\u0275element"](2,"span",33),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](3,1,"COMMON_INFO_NO_DATA")))}function k(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,E,2,1,"div",17),i["\u0275\u0275template"](2,I,4,3,"div",18),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.favoriteViewList),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!n.favoriteViewList.length)}}function T(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",34),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).showMoreFvorite()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"SHOW_MORE")))}function A(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275elementStart"](1,"div",5),i["\u0275\u0275template"](2,b,6,4,"ng-container",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",7),i["\u0275\u0275template"](4,y,4,1,"div",8),i["\u0275\u0275template"](5,k,3,2,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,T,3,3,"span",10),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](),o=i["\u0275\u0275reference"](4);i["\u0275\u0275property"]("ngClass","detailPage"!==n.pageFrom?"scene-view-padding":""),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","detailPage"!==n.pageFrom)("ngIfElse",o),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!n.dataBack),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.dataBack),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","detailPage"===n.pageFrom&&n.favoriteViewList.length)}}function D(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function z(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,D,1,0,"ng-container",50),i["\u0275\u0275elementEnd"]()),2&e){i["\u0275\u0275nextContext"](2);var n=i["\u0275\u0275reference"](4);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n)}}function L(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"CUSTOM_OPERATE")))}function V(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",27),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](2).$implicit;return i["\u0275\u0275nextContext"](2).setWikiFavorite(e)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275element"](2,"i",28),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](2).$implicit;i["\u0275\u0275property"]("title",i["\u0275\u0275pipeBind1"](1,3,o.isFavorite?"UNFAVORITE":"ADD_TO_FAVORITES")),i["\u0275\u0275advance"](2),i["\u0275\u0275classMap"](o.isFavorite?"icon-xing1":"icon-star-outline")}}function N(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",29),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](2),t=e.$implicit,o=e.index;return i["\u0275\u0275nextContext"](2).thoroughDeletedArticle(t,o)}),i["\u0275\u0275element"](1,"i",30),i["\u0275\u0275elementEnd"]()}}function R(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td"),i["\u0275\u0275template"](1,V,3,5,"span",25),i["\u0275\u0275template"](2,N,2,0,"span",55),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","recycleBin"!==n.scene),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](2,_).includes(n.scene))}}function j(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275elementStart"](2,"div",51),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).goDetailPage(e)}),i["\u0275\u0275elementStart"](3,"div",21),i["\u0275\u0275element"](4,"img",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",19),i["\u0275\u0275elementStart"](6,"div",24),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"td"),i["\u0275\u0275elementStart"](9,"div",52),i["\u0275\u0275element"](10,"img",53),i["\u0275\u0275elementStart"](11,"span"),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"td",52),i["\u0275\u0275element"](14,"i",54),i["\u0275\u0275elementStart"](15,"span",41),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,R,3,3,"td",9),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](null==o?null:o.title),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("src","http://w3.huawei.com/w3lab/rest/yellowpage/face/"+(null==o.created_by?null:o.created_by.account)+"/45",i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"]((null==o.created_by?null:o.created_by.name)+" "+(null==o.created_by?null:o.created_by.account)),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",null==o?null:o.last_update_time," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](5,S).includes(r.scene))}}var U=function(e){return{total:e}};function B(e,t){if(1&e&&(i["\u0275\u0275text"](0),i["\u0275\u0275pipe"](1,"translate")),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](1,1,"COE_TOTAL",i["\u0275\u0275pureFunction1"](4,U,null==n.paginateOption?null:n.paginateOption.total))," ")}}function F(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",35),i["\u0275\u0275elementStart"](1,"div",36),i["\u0275\u0275elementStart"](2,"div",37),i["\u0275\u0275elementStart"](3,"div",38),i["\u0275\u0275elementStart"](4,"span",39),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().changeModel("small")}),i["\u0275\u0275element"](5,"i",40),i["\u0275\u0275elementStart"](6,"span",41),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"span",42),i["\u0275\u0275text"](10,"/"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"span",43),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,z,2,1,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",44),i["\u0275\u0275elementStart"](15,"nz-table",45,46),i["\u0275\u0275elementStart"](17,"thead"),i["\u0275\u0275elementStart"](18,"tr"),i["\u0275\u0275elementStart"](19,"th"),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"th"),i["\u0275\u0275text"](23),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"th"),i["\u0275\u0275text"](26),i["\u0275\u0275pipe"](27,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](28,L,3,3,"th",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"tbody"),i["\u0275\u0275template"](30,j,18,6,"tr",47),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"div"),i["\u0275\u0275elementStart"](32,"nz-pagination",48),i["\u0275\u0275listener"]("nzPageIndexChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().paginateOption.currentPage=e})("nzPageSizeChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().paginateOption.pageSize=e})("nzPageIndexChange",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().paginationChange()})("nzPageSizeChange",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().paginationChange()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](33,B,2,6,"ng-template",null,49,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275reference"](16),r=i["\u0275\u0275reference"](34),a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,21,"COMMON_BTN_RETURN")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](a.modelTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update"!==a.scene),i["\u0275\u0275advance"](1),i["\u0275\u0275classMap"]("update"!==a.scene&&"favorite"!==a.scene?"m-b-10":"full-view-list-height"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzData",a.favoriteViewList)("nzShowPagination",!1)("nzFrontPagination",!1),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](21,23,"TITLE")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](24,25,"CREATOR")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](27,27,"UPDATE_TIME")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](29,S).includes(a.scene)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",o.data),i["\u0275\u0275advance"](1),i["\u0275\u0275classMap"]("update"!==a.scene&&"favorite"!==a.scene?"panigation":"hidden"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzPageIndex",a.paginateOption.currentPage)("nzPageSize",a.paginateOption.pageSize)("nzTotal",a.paginateOption.total)("nzPageSizeOptions",a.paginateOption.PageSizeOptions)("nzSize","small")("nzShowTotal",r)}}function W(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"wiki-search-input",56),i["\u0275\u0275listener"]("emitSearchVal",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().getSearchVal(e)}),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("customStyle",o.customStyle)("inputStyle",o.inputStyle)("pageForm","my-favorite")}}var H=function(){function e(e,t,n,r,a,c,l,s){this.emitService=e,this.translate=t,this.router=n,this.activeRoute=r,this.knowledgeService=a,this.modal=c,this.notification=l,this.coeService=s,this.onDestory$=new o.a,this.model="small",this.scene="favorite",this.closeFavoriteModel=new i.EventEmitter,this.favoriteViewListInit=[],this.favoriteViewList=[],this.dataBack=!0,this.searchVal="",this.sceneVal="",this.customStyle={top:"26px",right:"100px",width:"100%",left:"0"},this.inputStyle={borderRadius:"0px",height:"30px"},this.modelTitle="",this.sceneTitle={view:this.translate.instant("MY_BROWSE"),case:this.translate.instant("MY_CASE"),favoriteList:this.translate.instant("STARRED"),recycleBin:this.translate.instant("BIN"),excellentCasesMore:this.translate.instant("WIKI_RECOMMEND"),update:this.translate.instant("RECENTLY_UPDATED"),favorite:this.translate.instant("STARRED")},this.paginateOption={total:0,currentPage:1,pageSize:10,PageSizeOptions:[10,20,30]}}return e.prototype.ngOnInit=function(){var e=this;this.modelTitle=this.sceneTitle[this.scene],this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&(e.currentUserId=t.user_id)}),this.activeRoute.paramMap.pipe(Object(r.a)(this.onDestory$)).subscribe(function(t){e.currentDomain=t.get("domain_id"),e.selectCategory=Number(t.get("categoryId")),e.sceneVal=e.scene,"update"===e.scene?e.getUpdateView():e.getDifferentView(e.sceneVal,e.searchVal)})},e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe()},e.prototype.showMoreFvorite=function(){this.emitService.emit({type:"show-more-fvorite"})},e.prototype.paginationChange=function(){this.getDifferentView(this.sceneVal,this.searchVal)},e.prototype.getUpdateView=function(){var e=this;this.dataBack=!1,this.knowledgeService.getUpdateView(this.currentDomain).subscribe(function(t){e.dataBack=!0,e.favoriteViewList=t||[]},function(){})},e.prototype.getDifferentView=function(e,t){var n=this;this.dataBack=!1,this.currentSceneType=e,"favorite"===e?this.knowledgeService.getFavoritetView(t).subscribe(function(e){n.coeTypeCommonLogic(e)},function(){}):this.getCoeInterfaceList(e,t)},e.prototype.getCoeInterfaceList=function(e,t){"excellentCasesMore"===e?this.getExcellentCasesList(t):this.getCoePersonList(e,t)},e.prototype.getCoePersonList=function(e,t){var n=this,i={pagination:{current_page:this.paginateOption.currentPage,page_size:this.paginateOption.pageSize},countType:"coe",listType:e,search:t,domainId:Number(this.currentDomain)};this.knowledgeService.getPersonalList(i).subscribe(function(e){n.paginateOption.total=e.total_records,n.paginateOption.currentPage=e.current_page,n.coeTypeCommonLogic(null==e?void 0:e.result)},function(){})},e.prototype.coeTypeCommonLogic=function(e){if(this.dataBack=!0,!e)return this.favoriteViewList=[],void(this.favoriteViewListInit=[]);"favorite"===this.sceneVal?(this.favoriteViewList=e,this.favoriteViewListInit=Object(a.a)(e)):this.favoriteViewList=e},e.prototype.changeModel=function(e){this.model=e,this.closeFavoriteModel.emit({type:"close",model:this.model}),this.getPersonalCount()},e.prototype.setWikiFavorite=function(e){var t=this;this.knowledgeService.setWikiFavorite({wikiId:e.id,wikiSn:e.sn,createdBy:this.currentUserId},!e.isFavorite).subscribe(function(e){t.getDifferentView(t.currentSceneType,"")},function(){}),window.hwa("trackStructEvent",{label:e.isFavorite?"\u53d6\u6d88\u6536\u85cf":"\u6dfb\u52a0\u6536\u85cf"})},e.prototype.getSearchVal=function(e){this.searchVal=e,this.getDifferentView(this.sceneVal,this.searchVal)},e.prototype.goDetailPage=function(e){if(this.closeFavoriteModel.emit({type:"close",model:this.model}),["view","case","recycleBin","favoriteList","excellentCasesMore"].includes(this.scene)){var t=window.location.origin+"/wiki/"+e.sn;window.open(t,"_blank")}else"favorite"!==this.scene?window.location.href.includes("/wiki/")?-1!==window.location.href.split("/wiki/")[1].search("WIKI")?this.router.navigate(["../"+e.kanban_id+"/"+e.sn],{relativeTo:this.activeRoute}):this.router.navigateByUrl("/domains"+window.location.href.split("domains")[1].split("/wiki/")[0]+"/wiki/"+e.kanban_id+"/"+e.sn):this.router.navigate(["../wiki/"+e.kanban_id+"/"+e.sn],{relativeTo:this.activeRoute}):(t=window.location.origin+"/domains/"+e.assigned_domain.id+"/wiki/"+e.kanban_id+"/"+e.sn,window.open(t,"_blank"))},e.prototype.thoroughDeletedArticle=function(e,t){var n=this.translate.instant.bind(this.translate),i=this.deletedArticle.bind(this);this.modal.error({nzTitle:n("COMPLETELY_DELETE_CONFIRMATION"),nzContent:"",nzOkText:n("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){i(e,t)},nzCancelText:n("COMMON_BUTTON_CANCLE"),nzOnCancel:function(){}})},e.prototype.deletedArticle=function(e,t){var n=this;this.knowledgeService.saveArticle([{id:e.id,status:"clear",kanban_id:this.selectCategory}]).subscribe(function(e){e.success&&e.success.length&&(n.notification.success(n.translate.instant("DELETE_SUCCESS"),""),n.getDifferentView("recycleBin",n.searchVal))},function(){})},e.prototype.getPersonalCount=function(){var e=this;["favoriteList","recycleBin"].includes(this.sceneVal)&&this.knowledgeService.getCoepersonalCount({type:"coe",domainId:this.currentDomain}).subscribe(function(t){t&&e.emitService.emit("favoriteList"===e.sceneVal?{type:"person-favoriteList-count",data:t.favoritesCount}:{type:"person-recycle-count",data:t.recycleBinCount})},function(){})},e.prototype.getExcellentCasesList=function(e){var t=this;this.coeService.queryCoeResult({domainId:this.currentDomain,pageCode:this.paginateOption.currentPage,pageSize:this.paginateOption.pageSize,search:e,isExcellent:!0}).subscribe(function(e){if(e.data){var n={result:[],current_page:e.data.pageCode,total_records:e.data.totalCount},i=e.data.coeContinueImproveVOS.map(function(e){return{created_by:e.author,title:e.title,last_update_time:e.lastUpdateTime}});n.result=i,t.paginateOption.total=n.total_records,t.paginateOption.currentPage=n.current_page,t.coeTypeCommonLogic(null==n?void 0:n.result)}},function(){})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.a),i["\u0275\u0275directiveInject"](s.c),i["\u0275\u0275directiveInject"](d.f),i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](p.b),i["\u0275\u0275directiveInject"](u.d),i["\u0275\u0275directiveInject"](m.b),i["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["favorite-view"]],inputs:{model:"model",scene:"scene",pageFrom:"pageFrom"},outputs:{closeFavoriteModel:"closeFavoriteModel"},features:[i["\u0275\u0275ProvidersFeature"]([c.a])],decls:5,vars:2,consts:[[1,"favorite-view-page"],["class","favorite-view",3,"ngClass",4,"ngIf"],["class","favorite-full-view",4,"ngIf"],["wikiSearch",""],[1,"favorite-view",3,"ngClass"],[1,"favorite-head","flex-box"],[4,"ngIf","ngIfElse"],[1,"favorite-small-view"],["class","loading-style loading-height",4,"ngIf"],[4,"ngIf"],["class","cursor-pointer f-14 text-999999 m-l-5",3,"click",4,"ngIf"],[1,"favorite-view-title","flex-1"],[1,"cursor-pointer",3,"click"],[1,"loading-style","loading-height"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading",1,"icon-style"],["class","overflow-hidden",4,"ngFor","ngForOf"],["class","no-data-wrapper",4,"ngIf"],[1,"overflow-hidden"],[1,"favorite-view-item"],[1,"favorite-view-item-img"],["src","/knowledge-ui/assets/imgs/knowledge-referral.png"],[1,"overflow-hidden","flex-1","m-r-8","cursor-pointer",3,"click"],[1,"favorite-view-item-title","text-eclipis"],["class","cursor-pointer favorite-icon-box",3,"title","click",4,"ngIf"],["class","cursor-pointer favorite-icon-box delete-icon-box",3,"click",4,"ngIf"],[1,"cursor-pointer","favorite-icon-box",3,"title","click"],[1,"iconfont","f-14","icon-star-favorite"],[1,"cursor-pointer","favorite-icon-box","delete-icon-box",3,"click"],[1,"icon-delete-sty","icon-color","fa","fa-trash-o"],[1,"no-data-wrapper"],["src","/knowledge-ui/assets/imgs/empty.svg"],[1,"box-block","text-999999",3,"textContent"],[1,"cursor-pointer","f-14","text-999999","m-l-5",3,"click"],[1,"favorite-full-view"],[1,"full-view-box"],[1,"full-view-head"],[1,"flex-1"],[1,"cursor-pointer","f-16",3,"click"],[1,"iconfont","icon-back"],[1,"m-l-5"],[1,"m-l-15","f-16"],[1,"m-l-15","f-16","f-bold"],[1,"full-view-list","m-t-20","slimScrollBar"],[3,"nzData","nzShowPagination","nzFrontPagination"],["basicTable",""],[4,"ngFor","ngForOf"],["nzShowSizeChanger","",3,"nzPageIndex","nzPageSize","nzTotal","nzPageSizeOptions","nzSize","nzShowTotal","nzPageIndexChange","nzPageSizeChange"],["totalTemplate",""],[4,"ngTemplateOutlet"],[1,"flex-box","cursor-pointer",3,"click"],[1,"text-color"],[1,"flex-item-user-avater","m-l-5",3,"src"],[1,"iconfont","icon-clock"],["class","cursor-pointer favorite-icon-box  delete-icon-box",3,"click",4,"ngIf"],[3,"customStyle","inputStyle","pageForm","emitSearchVal"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,A,7,6,"div",1),i["\u0275\u0275template"](2,F,35,30,"div",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,W,1,3,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"])),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","small"===t.model),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","full"===t.model))},directives:[g.n,g.l,h.a,g.m,f.c,f.h,f.i,f.b,f.g,f.e,v.a,g.s,C.a],pipes:[s.b],styles:[".favorite-view-page[_ngcontent-%COMP%]{position:relative}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-title[_ngcontent-%COMP%]{margin-bottom:20px;height:20px;line-height:20px;color:#676a6c;font-size:16px;font-weight:600}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item[_ngcontent-%COMP%]{height:56px;display:flex;padding:10px;align-items:center;border-top:1px solid #ededed;overflow:hidden}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item[_ngcontent-%COMP%]:hover{background:#f2f2f2}.favorite-view-page[_ngcontent-%COMP%]   .item-no-border[_ngcontent-%COMP%]{border:none}.favorite-view-page[_ngcontent-%COMP%]   .text-eclipis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.favorite-view-page[_ngcontent-%COMP%]   .cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.favorite-view-page[_ngcontent-%COMP%]   .overflow-hidden[_ngcontent-%COMP%]{overflow:hidden}.favorite-view-page[_ngcontent-%COMP%]   .loading-height[_ngcontent-%COMP%]{height:70%}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item-img[_ngcontent-%COMP%]{margin-right:8px}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:25px}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item-title[_ngcontent-%COMP%]{height:16px;line-height:16px;color:#676a6c;font-weight:400;font-size:14px}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item-category[_ngcontent-%COMP%]{color:#bdbdbd;font-weight:400;margin-left:2px;font-size:12px}.favorite-view-page[_ngcontent-%COMP%]   .icon-font-size-12[_ngcontent-%COMP%]{font-size:12px;color:#bdbdbd}.favorite-view-page[_ngcontent-%COMP%]   .icon-xing1[_ngcontent-%COMP%]{color:#eead0e}.favorite-full-view[_ngcontent-%COMP%]{width:100%;height:calc(100% - 50px);background:#fff;position:fixed;top:50px;left:0;z-index:10}.favorite-full-view[_ngcontent-%COMP%]   .full-view-box[_ngcontent-%COMP%]{padding:10px 10px 10px 10%;position:relative;height:100%;display:flex;flex-direction:column}.favorite-full-view[_ngcontent-%COMP%]   .full-view-head[_ngcontent-%COMP%]{display:flex}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]{color:#676a6c;overflow:auto}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .delete-icon-box[_ngcontent-%COMP%], .favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .favorite-icon-box[_ngcontent-%COMP%]{width:28px;height:28px;background:#fff;border:1px solid #dbdbdb;border-radius:4.5px;display:inline-block;padding:4px;text-align:center}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .favorite-icon-box[_ngcontent-%COMP%]:hover{border-color:#23c6c8}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .favorite-icon-box[_ngcontent-%COMP%]:hover   .icon-star-favorite[_ngcontent-%COMP%]{color:#23c6c8}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .delete-icon-box[_ngcontent-%COMP%]   .icon-delete-sty[_ngcontent-%COMP%]{font-size:18px}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .delete-icon-box[_ngcontent-%COMP%]:hover{border-color:#e65a6b}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .delete-icon-box[_ngcontent-%COMP%]:hover   .icon-delete-sty[_ngcontent-%COMP%]{color:#e65a6b}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list-height[_ngcontent-%COMP%]{height:calc(100% - 60px)}.favorite-full-view[_ngcontent-%COMP%]   .flex-item-user-avater[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;margin-right:3px;position:relative;top:-2px}.favorite-full-view[_ngcontent-%COMP%]   .panigation[_ngcontent-%COMP%]{height:30px;text-align:right;display:block}.favorite-full-view[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}.scene-view-padding[_ngcontent-%COMP%]{padding:18px 18px 0}.text-color[_ngcontent-%COMP%]{color:#999}.no-data-wrapper[_ngcontent-%COMP%]{width:100%;padding:20px;text-align:center}.no-data-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;margin:0 auto}  .full-view-list .ant-table-thead th{background:#fff;font-weight:700}"]}),e}()},mLQb:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("A/Mn"),o=n("fXoL"),r=n("sYmb"),a=n("bNXi"),c=n("UJq8"),l=n("ofXK"),s=n("nJia"),d=n("QWGN"),p=n("lOo3"),u=function(e,t){return{time:e,name:t}};function m(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](2,1,"ENDED_BY",o["\u0275\u0275pureFunction2"](4,u,n.item.lastUpdateTime,n.item.lastUpdatedBy.name)))}}function g(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",9),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).closeDiscussion()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"CLOSE_DISCUSSION")," "))}function h(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"span",12),o["\u0275\u0275elementStart"](2,"span",13),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).setAcceptStatus(1)}),o["\u0275\u0275element"](3,"i",14),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"span",15),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).setAcceptStatus(2)}),o["\u0275\u0275element"](7,"i",16),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,2,"04009001")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,4,"IGNORE")))}function f(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"RAT_ENDED")))}function v(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"ACCEPTED_TIP")))}function C(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"IGNORED_TIP")))}function b(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"button",17),o["\u0275\u0275template"](1,f,3,3,"ng-container",7),o["\u0275\u0275template"](2,v,3,3,"ng-container",7),o["\u0275\u0275template"](3,C,3,3,"ng-container",7),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.item.acceptStatus),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",1===n.item.acceptStatus),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",2===n.item.acceptStatus)}}function x(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,h,10,6,"ng-container",10),o["\u0275\u0275template"](2,b,4,3,"ng-template",null,11,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275reference"](3),i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.currentUserInfo.user_id===i.creatorId&&!i.item.acceptStatus)("ngIfElse",n)}}function y(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275template"](1,m,3,7,"span",7),o["\u0275\u0275template"](2,g,3,3,"button",8),o["\u0275\u0275template"](3,x,4,2,"ng-container",7),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1==n.item.status),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1!=n.item.status&&n.userOperateAccess),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1==n.item.status)}}function w(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275element"](1,"comment-item",18),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.index,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("showOpreation",!1)("item",n)("index",i)("status",r.item.status)("commentGuid",r.item.commentGuid)}}function O(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",19),o["\u0275\u0275elementStart"](1,"comment-input",20),o["\u0275\u0275listener"]("confirmClick",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().addAnnotation(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("commentGuid",i.item.commentGuid)("status",i.item.status)("isAnonymous",i.isAnonymous)("creatorId",i.creatorId)("articleId",i.articleId)}}var _=function(){function e(e,t,n,i){this.translate=e,this.knowledgeService=t,this.notification=n,this.emitService=i,this.title="knowledge-ui",this.userOperateAccess=!1}return e.prototype.ngOnInit=function(){var e=this;this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&(e.userOperateAccess=t.user_id==e.creatorId||t.user_id==e.item.createdBy.id,e.currentUserInfo=t)}),this.item.comments.forEach(function(t){t.commentType=e.item.commentType})},e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe()},e.prototype.addAnnotation=function(e){var t=this,n=this.buildCondition(e);this.knowledgeService.createAnnotation(n).subscribe(function(e){t.notification.success(t.translate.instant("UPDATE_SUCCESS"),""),t.emitService.eventEmit.emit({type:"article-comment::add-annotation-after"})},function(){})},e.prototype.buildCondition=function(e){return{target_content:this.item.targetContent,wiki_sn:this.item.wikiSn,comment:e.value,comment_guid:this.item.commentGuid}},e.prototype.closeDiscussion=function(){var e=this;this.knowledgeService.closeAnnotationComment([{comment_guid:this.item.commentGuid,status:"-1"}]).subscribe(function(t){e.notification.success(e.translate.instant("UPDATE_SUCCESS"),""),e.emitService.emit({type:"wiki::close-annotation",commentGuid:e.item.commentGuid})},function(){})},e.prototype.setAcceptStatus=function(e){var t=this;this.knowledgeService.closeAnnotationComment([{comment_guid:this.item.commentGuid,accept_status:e}]).subscribe(function(n){t.notification.success(t.translate.instant("UPDATE_SUCCESS"),""),t.item.acceptStatus=e},function(){})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](r.c),o["\u0275\u0275directiveInject"](i.b),o["\u0275\u0275directiveInject"](a.b),o["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["annotation-item"]],inputs:{item:"item",creatorId:"creatorId",index:"index",isAnonymous:"isAnonymous",articleId:"articleId"},features:[o["\u0275\u0275ProvidersFeature"]([i.b])],decls:7,vars:9,consts:[[1,"annotation-item"],["class","close-discussion f-12 position-r",4,"ngIf"],[1,"annotation-content"],["nz-tooltip","",3,"nzTooltipTitle","nzTooltipPlacement"],[4,"ngFor","ngForOf"],["class","comment-input-wrapper",4,"ngIf"],[1,"close-discussion","f-12","position-r"],[4,"ngIf"],["class","close-discussion-btn close-discussion-clickable position-a f-14 cursor-pointer",3,"click",4,"ngIf"],[1,"close-discussion-btn","close-discussion-clickable","position-a","f-14","cursor-pointer",3,"click"],[4,"ngIf","ngIfElse"],["template",""],[1,"auth-operate-btns","position-a","f-14"],[1,"m-r-10","cursor-pointer",3,"click"],[1,"iconfont","icon-right","m-r-5"],[1,"cursor-pointer",3,"click"],[1,"iconfont","icon-hide","m-r-5"],["disabled","",1,"close-discussion-btn","btn-disabled","position-a","f-14"],[3,"showOpreation","item","index","status","commentGuid"],[1,"comment-input-wrapper"],[3,"commentGuid","status","isAnonymous","creatorId","articleId","confirmClick"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,y,4,3,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"span",3),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,w,2,5,"div",4),o["\u0275\u0275template"](6,O,2,5,"div",5),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275attribute"]("data-highlight-comment-uuid",t.item.commentGuid),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1==t.item.status||-1!=t.item.status&&t.userOperateAccess&&"anonymize"!=t.item.commentType),o["\u0275\u0275advance"](2),o["\u0275\u0275classMap"](-1==t.item.status?"annotation-content-disabled-bg":""),o["\u0275\u0275property"]("nzTooltipTitle",t.item.targetContent)("nzTooltipPlacement","top"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](t.item.targetContent),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.item.comments),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1!=t.item.status&&"anonymize"!=t.item.commentType))},directives:[l.n,s.d,l.m,d.a,p.a],pipes:[r.b],styles:[".annotation-item[_ngcontent-%COMP%]{padding-top:10px}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]{height:25px;line-height:25px;color:#aaa;padding:0 10px}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .close-discussion-btn[_ngcontent-%COMP%]{top:0;right:10px;height:25px;line-height:22px;border:1px solid #dbdbdb;border-radius:3px;outline:none}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .close-discussion-clickable[_ngcontent-%COMP%]{background:#fff;color:#666}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .close-discussion-clickable[_ngcontent-%COMP%]:hover{border-color:#23c6c8;color:#23c6c8}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .btn-disabled[_ngcontent-%COMP%]{color:#999;border-color:#dbdbdb;background-color:#f5f5f5}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .auth-operate-btns[_ngcontent-%COMP%]{top:0;right:10px;height:25px;line-height:22px}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .auth-operate-btns[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#23c6c8}.annotation-item[_ngcontent-%COMP%]   .annotation-content[_ngcontent-%COMP%]{max-height:47px;padding:10px 20px 0 10px;margin-bottom:10px;overflow:hidden}.annotation-item[_ngcontent-%COMP%]   .annotation-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:rgba(35,198,200,.204);display:inline-block;max-height:37px}.annotation-item[_ngcontent-%COMP%]   .annotation-content[_ngcontent-%COMP%]   .annotation-content-disabled-bg[_ngcontent-%COMP%]{background:#e4e4e4}.annotation-item[_ngcontent-%COMP%]   .comment-input-wrapper[_ngcontent-%COMP%]{border-top:1px solid #dbdbdb;height:45px}"]}),e}()},mOC4:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("ofXK"),o=n("rXOI"),r=n("r+jA"),a=n("CuYH"),c=n("4P1S"),l=n("fXoL"),s=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({providers:[a.a,o.a,r.a,c.a],imports:[[i.c]]}),e}()},mXSW:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var i=n("fXoL"),o=n("lR5k"),r=n("XNiG"),a=n("jtHE"),c=n("VRyK"),l=n("xgIS"),s=n("1G5W"),d=n("pLZG"),p=n("vkgz"),u=n("lJxs"),m=n("eIep"),g=n("wZee"),h=n("/0GP"),f=n.n(h),v=(n("z9gd"),n("AA4e")),C=n("8J34"),b=n("/Kk4"),x=n("Fpfz"),y=n("UJq8"),w=n("ofXK"),O=n("oEkB"),_=n("ZV1T"),M=["wrapperEl"],S=["remoterOuter"],P=["remoterInner"];function E(e,t){if(1&e&&(i["\u0275\u0275element"](0,"div",7,8),i["\u0275\u0275pipe"](2,"to_trusted")),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](2,1,n.docStringHandled),i["\u0275\u0275sanitizeHtml"])}}function I(e,t){1&e&&i["\u0275\u0275element"](0,"div",9,8)}function k(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"img-viewer",10),i["\u0275\u0275listener"]("indexChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().imgIndex=e})("close",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onImgClose()}),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("fullScreen",!0)("urls",o.allImages)("index",o.imgIndex)}}var T=function(){function e(e,t,n,o,c,l){this.elRef=e,this.markdownService=t,this.resizeObserver=n,this.imgViewerService=o,this.visionEditorService=c,this.emitService=l,this.docType="rich-text",this.useImgViewer=!1,this.forceTableCal=new r.a,this.configInfo={},this.imgShow=new i.EventEmitter,this.imgClose=new i.EventEmitter,this.imgLoaded=new i.EventEmitter,this.showRemoter=!1,this.forceScroll$=new r.a,this.showImgViewer=!1,this.imgIndex=0,this.allImages=[],this.isShowNewMD=!1,this.wideTableMode=!1,this.scrollInElChange$=new a.a(1),this.tableElInfo=[],this.onDestory$=new r.a}return Object.defineProperty(e.prototype,"allImageUrls",{get:function(){var e=this.wrapperEl.nativeElement.querySelectorAll("img");return Array.from(e).map(function(e){var t=e.getAttribute("src");return{imgSrc:t,linkHref:e.parentElement instanceof HTMLAnchorElement?e.parentElement.getAttribute("href"):t}})},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(e){var t=e.docContent,n=e.scrollInEL;t&&!this.isShowNewMD&&this.onDocStringChange(t.currentValue),n&&this.scrollInElChange$.next(n.currentValue)},e.prototype.ngOnInit=function(){var e=this;this.isShowNewMD=this.fromVision&&"markdown"===this.docType&&this.classify&&"normal"===this.classify,this.watchWrapperScroll(),Object(c.a)(this.resizeObserver.observe(this.elRef.nativeElement),Object(l.a)(window,"resize"),this.forceTableCal).pipe(Object(s.a)(this.onDestory$)).subscribe(function(){e.calculationTablePos()}),Object(l.a)(this.elRef.nativeElement,"click").pipe(Object(s.a)(this.onDestory$),Object(d.a)(function(e){return e.target instanceof HTMLImageElement}),Object(p.a)(function(e){return e.preventDefault()}),Object(u.a)(function(e){return e.target.getAttribute("src")}),Object(d.a)(function(e){return Boolean(e)})).subscribe(function(t){var n=e.allImageUrls.findIndex(function(e){return e.imgSrc===t});e.useImgViewer?e.imgViewerService.show(e.allImageUrls,n):(e.imgIndex=n,e.showImgViewer=!0,e.imgShow.next(),e.allImages=e.allImageUrls)}),this.emitService.eventEmit.subscribe(function(t){"wiki:doc-table-wide-view"==(null==t?void 0:t.type)&&(e.wideTableMode=t.obj)})},e.prototype.emitLoaded=function(e){this.imgLoaded.emit(e)},e.prototype.ngOnDestroy=function(){this.onDestory$.next(),this.onDestory$.complete()},e.prototype.ngAfterViewInit=function(){var e=this;if(this.configInfo&&this.configInfo.fullTable&&this.tableElemMaximize(),this.isShowNewMD){var t=document.getElementById("previewNewMD");f.a.preview(t,this.docContent,{mode:"light",cdn:window.location.origin+"/knowledge-ui/vditor",after:function(){e.emitService.emit({type:"preview-new-markdown"})},theme:{current:"light",path:window.location.origin+"/knowledge-ui/vditor/dist/css/content-theme"}})}},e.prototype.imgAddEvent=function(){var e=this,t=this.wrapperEl.nativeElement.querySelectorAll("img");Array.from(t).forEach(function(t){t.hasAttribute("loading")&&"lazy"==t.loading&&(t.complete?e.emitLoaded():t.addEventListener("load",e.emitLoaded.bind(e)))})},e.prototype.tableElemMaximize=function(){var e=this,t=document.getElementsByClassName("create-article-wrapper");t&&t.length||setTimeout(function(){document.querySelector("#contentWrapper").querySelectorAll("table").forEach(function(t,n){t.hasAttribute("contentEditable")&&t.removeAttribute("contentEditable"),t.onmouseover=function(){e.visionEditorService.addFullMode(t,"view",e.wideTableMode)},t.onmouseout=function(){e.visionEditorService.removeFullMode(t,"view")}})})},e.prototype.onImgClose=function(){this.showImgViewer=!1,this.imgClose.next()},e.prototype.onRemoterScroll=function(e){this.elControlByRemoter.scrollTo({left:e.scrollLeft})},e.prototype.calculationTablePos=function(){var e=this;Object(v.p)(function(){e.tableElInfo=e.getTables(),e.forceScroll$.next()})},e.prototype.onDocStringChange=function(e){var t=this,n=e;"markdown"===this.docType&&(n=this.markdownService.compile(e)),Object(v.p)(function(){t.highlight()}),this.docStringHandled=function(e){var t;return null===(t=null==e?void 0:e.replace(/\<table/g,'<div class="'+A+' slimScrollBar"><table'))||void 0===t?void 0:t.replace(/\<\/table\>/g,"</table></div>")}(n),setTimeout(function(){t.imgAddEvent()}),this.calculationTablePos()},e.prototype.watchWrapperScroll=function(){var e=this;this.scrollInElChange$.pipe(Object(m.a)(function(){return Object(c.a)(Object(l.a)(e.scrollInEL,"scroll"),e.forceScroll$)}),Object(s.a)(this.onDestory$)).subscribe(function(){var t=e.scrollInEL,n=e.remoterOuterEl.nativeElement,i=e.remoterInnerEl.nativeElement,o=t.clientHeight+t.scrollTop,r=e.tableElInfo.find(function(e){return e.top<o&&e.bottom>o});if(!r||!r.overWidth)return e.showRemoter=!1,void(e.elControlByRemoter=void 0);e.setRemoterPosition(),Object(v.p)(function(){e.setRemoterPosition()}),i.style.width=r.tableWidth+"px",n.style.width=r.wrapperWidth+"px",n.scrollTo({left:r.wrapperEl.scrollLeft}),e.elControlByRemoter=r.wrapperEl,e.showRemoter=!0})},e.prototype.setRemoterPosition=function(){var e=this.scrollInEL,t=this.remoterOuterEl.nativeElement,n=D(this.wrapperEl.nativeElement.offsetParent)-D(e);t.style.top=e.scrollTop+e.clientHeight-n+"px"},e.prototype.getTables=function(){var e=this.wrapperEl.nativeElement.querySelectorAll("."+A),t=[],n=D(this.scrollInEL);return e.forEach(function(e){var i=e.firstElementChild;if(i){var o=i.getBoundingClientRect(),r=e.getBoundingClientRect(),a=D(i);t.push({top:a-n,bottom:a+i.clientHeight-n,wrapperEl:e,tableWidth:o.width,wrapperWidth:e.clientWidth,overWidth:o.width>r.width})}}),t},e.prototype.highlight=function(){var e=this.elRef.nativeElement.getElementsByTagName("pre");if(e&&e.length>0)for(var t=0;t<e.length;t++){var n=e[t].getElementsByTagName("code");n&&n.length>0&&g.highlightElement(n[0])}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](o.c),i["\u0275\u0275directiveInject"](b.a),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](x.a),i["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["html-render"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](M,1),i["\u0275\u0275viewQuery"](S,1),i["\u0275\u0275viewQuery"](P,1)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.wrapperEl=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.remoterOuterEl=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.remoterInnerEl=n.first)}},inputs:{docType:"docType",docContent:"docContent",scrollInEL:"scrollInEL",useImgViewer:"useImgViewer",forceTableCal:"forceTableCal",configInfo:"configInfo",fromVision:"fromVision",classify:"classify"},outputs:{imgShow:"imgShow",imgClose:"imgClose",imgLoaded:"imgLoaded"},features:[i["\u0275\u0275ProvidersFeature"]([o.c,C.a]),i["\u0275\u0275NgOnChangesFeature"]],decls:7,vars:4,consts:[["class","render-wrapper",3,"innerHTML",4,"ngIf"],["class","render-wrapper","id","previewNewMD",4,"ngIf"],[1,"remote-scroll","slimScrollBar",3,"hidden","scroll"],["remoterOuter",""],[1,"remote-scroll-inner"],["remoterInner",""],[3,"fullScreen","urls","index","indexChange","close",4,"ngIf"],[1,"render-wrapper",3,"innerHTML"],["wrapperEl",""],["id","previewNewMD",1,"render-wrapper"],[3,"fullScreen","urls","index","indexChange","close"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,E,3,3,"div",0),i["\u0275\u0275template"](1,I,2,0,"div",1),i["\u0275\u0275elementStart"](2,"div",2,3),i["\u0275\u0275listener"]("scroll",function(e){return t.onRemoterScroll(e.target)}),i["\u0275\u0275element"](4,"div",4,5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,k,1,3,"img-viewer",6)),2&e&&(i["\u0275\u0275property"]("ngIf",!t.isShowNewMD),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isShowNewMD),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hidden",!t.showRemoter),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",t.showImgViewer))},directives:[w.n,O.a],pipes:[_.a],styles:['[_nghost-%COMP%]{display:block;padding-bottom:10px}.render-wrapper[_ngcontent-%COMP%]    {overflow-wrap:break-word;word-break:normal}.render-wrapper[_ngcontent-%COMP%]     .table-wrapper{overflow-x:auto}.render-wrapper[_ngcontent-%COMP%]     .doc-table-view-max:before{content:"\\e685";cursor:pointer;position:absolute;top:-3px;padding:0;background:#fff}.render-wrapper[_ngcontent-%COMP%]     table{word-break:break-word}.render-wrapper[_ngcontent-%COMP%]     table td{border:1px solid #ccc;padding:.4rem}.render-wrapper[_ngcontent-%COMP%]     img{max-width:100%;height:auto;cursor:zoom-in;filter:drop-shadow(rgba(0,0,0,.14) 0 0 4px);padding:6px}.render-wrapper[_ngcontent-%COMP%]     video{max-width:100%;height:auto!important}.render-wrapper[_ngcontent-%COMP%]     .h1-fontsize{font-size:26px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h1-fontsize *{font-size:26px!important}.render-wrapper[_ngcontent-%COMP%]     .h2-fontsize{font-size:22px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h2-fontsize *{font-size:22px!important}.render-wrapper[_ngcontent-%COMP%]     .h3-fontsize{font-size:20px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h3-fontsize *{font-size:20px!important}.render-wrapper[_ngcontent-%COMP%]     .h4-fontsize{font-size:18px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h4-fontsize *{font-size:18px!important}.render-wrapper[_ngcontent-%COMP%]     .h5-fontsize{font-size:16px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h5-fontsize *{font-size:16px!important}.render-wrapper[_ngcontent-%COMP%]     .h6-fontsize{font-size:16px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h6-fontsize *{font-size:16px!important}.render-wrapper[_ngcontent-%COMP%]     td p{margin-bottom:0!important}.render-wrapper[_ngcontent-%COMP%]     .artical-area .artical{width:100%}.remote-scroll[_ngcontent-%COMP%]{position:absolute;z-index:60;overflow:scroll hidden;transform:translateY(-100%)}.remote-scroll[_ngcontent-%COMP%]   .remote-scroll-inner[_ngcontent-%COMP%]{height:1px}  .tinymce-table-full-mode{position:fixed;z-index:99;background-color:transparent;cursor:pointer;filter:drop-shadow(rgba(0,0,0,.14) 0 0 6px)}  .doc-table-back-icon{padding:0 4px;cursor:pointer}  .doc-table-width-icon{cursor:pointer;padding:0 4px;font-weight:600}  .doc-table-active-full{position:fixed;width:100%;height:100%;background-color:#fff;top:0;left:0;right:0;padding:0 10px 10px;z-index:23;display:block;overflow:scroll}  .table-full-btn-content{border-radius:4.5px;border:1px solid #dbdbdb;height:30px;padding:2px;background-color:#fff;position:relative}  .table-full-btn-content:before{box-sizing:content-box;position:absolute;border-color:#fff transparent transparent;border-style:solid;border-width:9px 6px;display:block;content:"";z-index:2;top:28px;left:8px}  .table-full-btn-content:after{box-sizing:content-box;position:absolute;border-color:#dbdbdb transparent transparent;border-style:solid;border-width:10px 7px;display:block;content:"";z-index:1;left:7px;top:28px}  .table-full-btn-content-more:before{left:21px}  .table-full-btn-content-more:after{left:20px}  .table-full-btn-san{height:10px;position:relative}  .table-full-btn-san i{position:absolute;top:-7px;left:7px;color:#dbdbdb}  #back-full-table{cursor:pointer;padding:10px 0}  #back-full-table:hover{color:#23c6c8}  #back-full-table i{transform:rotate(90deg);display:inline-block}  #back-full-table span{margin-left:5px}']}),e}(),A="table-wrapper";function D(e){for(var t=e.offsetTop,n=e.offsetParent;null!==n;)t+=n.offsetTop,n=n.offsetParent;return t}},nraT:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("ofXK"),o=n("sYmb"),r=n("fXoL"),a=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[i.c,o.a.forRoot()]]}),e}()},oEkB:function(e,t,n){"use strict";n.d(t,"a",function(){return P});var i=n("ofXK"),o=n("fXoL"),r=n("XNiG"),a=n("xgIS"),c=n("VRyK"),l=n("1G5W"),s=n("eIep"),d=n("vkgz"),p=n("AA4e"),u=n("/Kk4"),m=n("qAZ0"),g=n("FwiY"),h=n("sYmb"),f=["maxArea"],v=["imgEl"],C=["imgWrapper"];function b(e,t){if(1&e&&o["\u0275\u0275element"](0,"nz-spin",11),2&e){o["\u0275\u0275nextContext"]();var n=o["\u0275\u0275reference"](4);o["\u0275\u0275property"]("nzIndicator",n)}}function x(e,t){1&e&&o["\u0275\u0275element"](0,"i",12)}function y(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onPrev()}),o["\u0275\u0275element"](1,"i",14),o["\u0275\u0275elementEnd"]()}}function w(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onNext()}),o["\u0275\u0275element"](1,"i",14),o["\u0275\u0275elementEnd"]()}}function O(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"a",23),o["\u0275\u0275element"](1,"i",24),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("href",n.url.linkHref,o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](2,2,"OPEN_CLOUDMODELING_LINK"))}}function _(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275elementStart"](1,"i",17),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onZoomOut()}),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",18),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().setImgToPrecent(100)}),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"i",19),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onZoomIn()}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"i",20),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().fitWidth()}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,O,3,4,"a",21),o["\u0275\u0275elementStart"](10,"i",22),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().close.next()}),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](2,7,"COMMON_ZOOM_OUT")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("title",100===i.precent?"":"100%"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",i.precent,"%"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](6,9,"COMMON_ZOOM_IN")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](8,11,"COMMON_FIT_SCREEN")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.showLink),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](11,13,"CLOSE"))}}var M=function(e){return{dragging:e}},S=function(e,t,n,i){return{width:e,height:t,marginTop:n,marginLeft:i}},P=function(){function e(e,t,n,i){this.elRef=e,this.appRef=t,this.resizeObserver=n,this.document=i,this.fullScreen=!1,this.zIndex=100,this.index=0,this.close=new o.EventEmitter,this.indexChange=new o.EventEmitter,this.precent=0,this.imgWidth=0,this.imgHeight=0,this.imgMarginTop=0,this.imgMarginLeft=0,this.loading=!0,this.dragging=!1,this.onDestory$=new r.a}return Object.defineProperty(e.prototype,"url",{get:function(){return this.urls[this.index]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showPrev",{get:function(){return this.index>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showNext",{get:function(){return this.index<this.urls.length-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showLink",{get:function(){return/cloudmodeling.*openedDiagramUUID/.test(this.url.linkHref)},enumerable:!1,configurable:!0}),e.prototype.onNext=function(){this.index+=1,this.indexChange.next(this.index)},e.prototype.onPrev=function(){this.index-=1,this.indexChange.next(this.index)},e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.watchDrag(),this.watchResize(),this.watchKeyDown()},e.prototype.ngOnDestroy=function(){this.onDestory$.next(),this.onDestory$.complete()},e.prototype.ngOnChanges=function(e){e.url&&(this.loading=!0)},e.prototype.onImgLoad=function(){this.fitWidth(),this.loading=!1},e.prototype.onImgClick=function(e){e.stopPropagation(),this.dragging||this.onZoomIn()},e.prototype.onImgWrapperClick=function(){this.dragging||this.close.next()},e.prototype.fitWidth=function(){var e=this.imgEl.nativeElement,t=this.maxAreaEl.nativeElement.getBoundingClientRect(),n=Math.floor(100*Math.min(.9*t.width/e.naturalWidth,.9*t.height/e.naturalHeight,1));this.setImgToPrecent(n)},e.prototype.onZoomIn=function(){this.setImgToPrecent(this.precent+10)},e.prototype.onZoomOut=function(){this.setImgToPrecent(this.precent-10)},e.prototype.setImgToPrecent=function(e){var t=Math.min(Math.max(e,10),300);this.precent=t;var n=this.imgEl.nativeElement,i=t*n.naturalWidth/100,o=t*n.naturalHeight/100;this.imgWidth=i,this.imgHeight=o,this.setImgMargin(i,o)},e.prototype.watchKeyDown=function(){var e=this;Object(a.a)(this.document,"keydown").pipe(Object(l.a)(this.onDestory$)).subscribe(function(t){"ArrowRight"===t.code&&e.showNext&&e.onNext(),"ArrowLeft"===t.code&&e.showPrev&&e.onPrev(),"Escape"===t.code&&e.close.next()})},e.prototype.watchResize=function(){var e=this;Object(c.a)(Object(a.a)(window,"resize"),this.resizeObserver.observe(this.elRef.nativeElement)).pipe(Object(l.a)(this.onDestory$)).subscribe(function(){Object(p.p)(function(){e.setImgMargin(e.imgWidth,e.imgHeight),e.appRef.tick()})})},e.prototype.watchDrag=function(){var e=this,t=this.document,n=this.imgWrapperEL.nativeElement,i=this.imgEl.nativeElement,o=Object(a.a)(i,"mousedown"),r=Object(a.a)(t,"mouseup"),c=Object(a.a)(t,"mousemove");o.pipe(Object(s.a)(function(){return c.pipe(Object(d.a)(function(){e.dragging=!0}),Object(l.a)(r.pipe(Object(d.a)(function(){Object(p.p)(function(){e.dragging=!1})}))))}),Object(l.a)(this.onDestory$)).subscribe(function(e){n.scrollTo({left:n.scrollLeft-=e.movementX,top:n.scrollTop-=e.movementY})})},e.prototype.setImgMargin=function(e,t){var n=this.maxAreaEl.nativeElement.getBoundingClientRect(),i=n.height;this.imgMarginLeft=Math.max((n.width-e)/2,0),this.imgMarginTop=Math.max((i-t)/2,0)},e.prototype.scrollToCenter=function(){var e=this;Object(p.p)(function(){var t=e.imgWrapperEL.nativeElement;t.scrollTo({left:(t.scrollWidth-t.clientWidth)/2,top:(t.scrollHeight-t.clientHeight)/2})})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](o.ElementRef),o["\u0275\u0275directiveInject"](o.ApplicationRef),o["\u0275\u0275directiveInject"](u.a),o["\u0275\u0275directiveInject"](i.d))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["img-viewer"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](f,1),o["\u0275\u0275viewQuery"](v,1),o["\u0275\u0275viewQuery"](C,1)),2&e){var n=void 0;o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.maxAreaEl=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.imgEl=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.imgWrapperEL=n.first)}},hostVars:4,hostBindings:function(e,t){2&e&&(o["\u0275\u0275styleProp"]("z-index",t.zIndex),o["\u0275\u0275classProp"]("full-screen",t.fullScreen))},inputs:{fullScreen:"fullScreen",zIndex:"zIndex",index:"index",urls:"urls"},outputs:{close:"close",indexChange:"indexChange"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:12,vars:18,consts:[[1,"img-wrapper","full-width","full-height","position-r","ov-a","slimScrollBar",3,"ngClass","click"],["imgWrapper",""],["nzSimple","","class","loading-tips",3,"nzIndicator",4,"ngIf"],["indicatorTemplate",""],["draggable","false","alt","image-viewer",3,"src","hidden","ngStyle","ngClass","load","error","click"],["imgEl",""],[1,"max-area"],["maxArea",""],["class","prev",3,"click",4,"ngIf"],["class","next",3,"click",4,"ngIf"],["class","control-area position-a border-ra-3",4,"ngIf"],["nzSimple","",1,"loading-tips",3,"nzIndicator"],["nz-icon","","nzType","loading",1,"loading-icon"],[1,"prev",3,"click"],[1,"iconfont","icon-icon-crown"],[1,"next",3,"click"],[1,"control-area","position-a","border-ra-3"],[1,"iconfont","icon-suoxiao1",3,"title","click"],[1,"precent",3,"title","click"],[1,"iconfont","icon-fangda",3,"title","click"],[1,"iconfont","icon-width",3,"title","click"],["target","_blank",3,"href",4,"ngIf"],[1,"iconfont","icon-delete-member",3,"title","click"],["target","_blank",3,"href"],[1,"iconfont","icon-relation",3,"title"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0,1),o["\u0275\u0275listener"]("click",function(){return t.onImgWrapperClick()}),o["\u0275\u0275template"](2,b,1,1,"nz-spin",2),o["\u0275\u0275template"](3,x,1,0,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementStart"](5,"img",4,5),o["\u0275\u0275listener"]("load",function(){return t.onImgLoad()})("error",function(){return t.onImgLoad()})("click",function(e){return t.onImgClick(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](7,"div",6,7),o["\u0275\u0275template"](9,y,2,0,"div",8),o["\u0275\u0275template"](10,w,2,0,"div",9),o["\u0275\u0275template"](11,_,12,15,"div",10)),2&e&&(o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](9,M,t.dragging)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.loading),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("src",t.url.imgSrc,o["\u0275\u0275sanitizeUrl"])("hidden",t.loading)("ngStyle",o["\u0275\u0275pureFunction4"](11,S,t.imgWidth+"px",t.imgHeight+"px",t.imgMarginTop+"px",t.imgMarginLeft+"px"))("ngClass",o["\u0275\u0275pureFunction1"](16,M,t.dragging)),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",t.showPrev),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showNext),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.loading))},directives:[i.l,i.n,i.o,m.a,g.a],pipes:[h.b],styles:["[_nghost-%COMP%]{display:block;position:relative;width:100%;height:100%;overflow:hidden}.full-screen[_nghost-%COMP%]{position:fixed;top:0;bottom:0;left:0;right:0}.img-wrapper[_ngcontent-%COMP%]{padding:0 70px 70px;background-color:rgba(0,0,0,.6)}.img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{pointer-events:auto;cursor:zoom-in;background-color:#fff}.img-wrapper[_ngcontent-%COMP%]   .dragging[_ngcontent-%COMP%], .img-wrapper.dragging[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}.max-area[_ngcontent-%COMP%]{position:absolute;top:0;left:70px;right:70px;bottom:64px;z-index:-10}.next[_ngcontent-%COMP%], .prev[_ngcontent-%COMP%]{position:absolute;z-index:5;top:50%;transform-origin:center center;width:50px;height:50px;border-radius:50%;background-color:#f0f0f0;text-align:center;line-height:50px;font-weight:700;box-shadow:0 0 6px rgba(0,0,0,.2);cursor:pointer}.next[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%], .prev[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{color:#676a6c}.next[_ngcontent-%COMP%]:hover, .prev[_ngcontent-%COMP%]:hover{background-color:#e9f9fa}.next[_ngcontent-%COMP%]:hover   .iconfont[_ngcontent-%COMP%], .prev[_ngcontent-%COMP%]:hover   .iconfont[_ngcontent-%COMP%]{color:#23c6c8}.prev[_ngcontent-%COMP%]{left:18px;transform:rotate(90deg) translateX(-50%)}.next[_ngcontent-%COMP%]{right:18px;transform:rotate(270deg) translateX(50%)}.control-area[_ngcontent-%COMP%]{z-index:5;-webkit-user-select:none;-moz-user-select:none;user-select:none;height:36px;bottom:18px;left:50%;transform:translateX(-50%);line-height:36px;background-color:#fafafa}.control-area[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%], .control-area[_ngcontent-%COMP%]   .precent[_ngcontent-%COMP%]{font-size:18px;margin:0 8px;cursor:pointer}.control-area[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]:hover, .control-area[_ngcontent-%COMP%]   .precent[_ngcontent-%COMP%]:hover{color:#23c6c8}.loading-tips[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.loading-icon[_ngcontent-%COMP%]{font-size:48px;color:#23c6c8}"]}),e}()},oFdG:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n("fXoL"),o=n("XNiG"),r=n("Kj3r"),a=n("/uUt"),c=n("y7eE"),l=n("to4i"),s=n("tyNb"),d=n("ofXK"),p=n("3Pt+"),u=n("1JWf"),m=n("sYmb"),g=n("ZV1T");function h(e,t){1&e&&(i["\u0275\u0275element"](0,"div",11),i["\u0275\u0275pipe"](1,"translate")),2&e&&i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](1,1,"EMPTY_HISTORY_SEARCH"))}function f(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275elementStart"](1,"div",13),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().searchHistory(e.orignalStr)}),i["\u0275\u0275pipe"](2,"to_trusted"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](2,1,o.highLightStr),i["\u0275\u0275sanitizeHtml"])}}var v=function(){function e(e){var t=this;this.ref=e,this.searchVal="",this.wikiSearchHistoryAction=new i.EventEmitter,this.clickOutsideFunc=new i.EventEmitter,this.getSearchHistory=function(){localStorage.getItem("devops-wiki-search-history")?(t.searchHistoryList=JSON.parse(localStorage.getItem("devops-wiki-search-history")),t.searchHistoryList.length>15&&(t.searchHistoryList=t.searchHistoryList.splice(0,15))):t.searchHistoryList=[],t.showSearchHistoryList=t.searchHistoryList.map(function(e){return{orignalStr:e,highLightStr:e}})},this.searchHistory=function(e){t.wikiSearchHistoryAction.emit(e)}}return e.prototype.ngOnInit=function(){var e=this;this.searchHistoryList=[],this.showSearchHistoryList=[],this.loading=!1,this.getSearchHistory(),this.refreshData&&(this.refreshDataSubscription=this.refreshData.subscribe(function(t){e.getSearchHistory()},function(){}))},e.prototype.ngOnDestory=function(){this.refreshDataSubscription&&this.refreshDataSubscription.unsubscribe()},e.prototype.closeFloatedFullStructure=function(){this.clickOutsideFunc.emit()},e.prototype.ngOnChanges=function(e){var t=this;if(e.searchVal){if(this.searchVal&&this.searchHistoryList&&this.searchHistoryList.length>0){var n=this.searchHistoryList.filter(function(e){return e.indexOf(t.searchVal)>-1});this.showSearchHistoryList=n.map(function(e){return{orignalStr:e,highLightStr:e.replace(t.searchVal,'<span style="color:#23c6c8;">'+t.searchVal+"</span>")}})}else this.getSearchHistory();this.ref.detectChanges()}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["wiki-search-history"]],inputs:{customStyleObj:"customStyleObj",searchVal:"searchVal",refreshData:"refreshData"},outputs:{wikiSearchHistoryAction:"wikiSearchHistoryAction",clickOutsideFunc:"clickOutsideFunc"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:12,vars:8,consts:[["clickElementOutside","",1,"search-history",3,"ngStyle","clickOutside"],[1,"tool-box"],[1,"info-box"],[1,"iconfont","icon-history"],[3,"textContent"],[1,"main-box"],[1,"overlay",3,"hidden"],[1,"iconfont","icon-loading","fa-spin"],["class","empty-box",3,"textContent",4,"ngIf"],[1,"content-box",3,"hidden"],["class","content-item",4,"ngFor","ngForOf"],[1,"empty-box",3,"textContent"],[1,"content-item"],[1,"content-text","text-ellipsis",3,"innerHTML","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275listener"]("clickOutside",function(){return t.closeFloatedFullStructure()}),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275element"](3,"i",3),i["\u0275\u0275element"](4,"span",4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275element"](8,"i",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,h,2,3,"div",8),i["\u0275\u0275elementStart"](10,"div",9),i["\u0275\u0275template"](11,f,3,3,"div",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("ngStyle",t.customStyleObj),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](5,6,"HISTORY_SEARCH")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("hidden",!t.loading),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.loading&&0==t.showSearchHistoryList.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hidden",!(!t.loading&&t.showSearchHistoryList.length>0)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.showSearchHistoryList))},directives:[u.a,d.o,d.n,d.m],pipes:[m.b,g.a],styles:[".search-history[_ngcontent-%COMP%]{position:absolute;left:-451px;top:20px;z-index:3;border:1px solid #f7f7f7;background-color:#fff;padding:15px;box-shadow:0 12px 32px 0 rgba(38,38,38,.16)}.search-history[_ngcontent-%COMP%]   .text-ellipsis[_ngcontent-%COMP%]{display:-webkit-box;display:-moz-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]{display:flex;align-items:center;color:#aaa}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{flex:1;text-align:left;color:#23c6c8;font-size:14px}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .icon-history[_ngcontent-%COMP%]{color:#23c6c8}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-left:5px}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]{display:inline-block;font-size:12px;padding-left:10px}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-view[_ngcontent-%COMP%]{cursor:pointer}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-view[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-left:5px}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-edit[_ngcontent-%COMP%]   .delete-all[_ngcontent-%COMP%]{cursor:pointer;display:inline-block}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-edit[_ngcontent-%COMP%]   .delete-all[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-left:5px}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-edit[_ngcontent-%COMP%]   .delete-done[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-edit[_ngcontent-%COMP%]   .divding-line[_ngcontent-%COMP%]{display:inline-block;margin:0 10px}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .empty-box[_ngcontent-%COMP%]{text-align:center;font-size:12px;color:#aaa;margin-top:40px}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]{margin-top:5px;display:flex;flex-direction:row;flex-wrap:wrap}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]{width:50%;display:flex;margin:0;padding:5px 10px;border-right:1px solid #ededed}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]   .content-text[_ngcontent-%COMP%]{flex:1;cursor:pointer}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]   .content-text[_ngcontent-%COMP%]:hover{color:#23c6c8}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]   .content-item-delete-box[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;cursor:pointer}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]:nth-child(2n){border-color:transparent}"]}),e}();function C(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"i",5),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.searchKeywords="",t.userQuestionUpdate.next(e)}),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngStyle",o.inputStyle&&o.inputStyle.height?o.searchInputIconClass:o.searchInputIconEmpty)}}var b=function(){function e(e,t,n,c){var l=this;this.eleRef=e,this.router=t,this.activeRoute=n,this.searchService=c,this.searchKeywords="",this.pageForm="search-result",this.searchAction=new i.EventEmitter,this.emitSearchVal=new i.EventEmitter,this.clickHistory=new i.EventEmitter,this.refreshDataEventSubject=new o.a,this.showHistory=!1,this.isFocus=!1,this.inputFlag=!0,this.userQuestionUpdate=new o.a,this.clickOutsideFunc=function(){setTimeout(function(){l.isFocus||(l.showHistory=!1)})},this.searchKeywordsChanged=function(e){l.showHistory=!1,l.searchKeywords=e,"search-result"!=l.pageForm?l.searchService.goSearchPage(l):l.clickHistory.emit({searchKeywords:l.searchKeywords})},this.userQuestionUpdate.pipe(Object(r.a)(500),Object(a.a)()).subscribe(function(e){l.emitSearchVal.emit(l.searchKeywords)})}return e.prototype.ngOnInit=function(){var e=this;this.routerSub=this.activeRoute.paramMap.subscribe(function(t){e.currentDomain=t.get("domain_id")}),this.inputStyle&&this.inputStyle.height&&(this.searchInputIconClass={fontSize:"16px",top:Number(this.inputStyle.height.substring(0,this.inputStyle.height.length-2))/2-8+"px"})},e.prototype.ngAfterViewInit=function(){},e.prototype.goSearchPage=function(){""!=this.searchKeywords.trim()&&"my-favorite"!==this.pageForm&&("search-result"!=this.pageForm?Object(c.c)("wiki-search-from",window.location.href):this.refreshDataEventSubject.next(),this.searchService.goSearchPage(this))},e.prototype.searchInputFocus=function(){this.showHistory="my-favorite"!==this.pageForm,this.isFocus=!0},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](s.f),i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["wiki-search-input"]],inputs:{searchKeywords:"searchKeywords",customStyle:"customStyle",inputStyle:"inputStyle",pageForm:"pageForm",kanbanId:"kanbanId"},outputs:{searchAction:"searchAction",emitSearchVal:"emitSearchVal",clickHistory:"clickHistory"},features:[i["\u0275\u0275ProvidersFeature"]([l.a])],decls:6,vars:12,consts:[[1,"search-input-wrapper"],[1,"input-search-icon","icon-color","fa","fa-search","pointer-cursor",3,"ngStyle"],["autocomplete","off",1,"search-input","overfolw-eclipis",3,"id","ngModel","placeholder","ngStyle","ngModelChange","keyup.enter","focus","blur","compositionend","compositionstart"],["class","input-clear-icon icon-color iconfont close icon-close",3,"ngStyle","click",4,"ngIf"],[3,"customStyleObj","hidden","searchVal","refreshData","clickOutsideFunc","wikiSearchHistoryAction"],[1,"input-clear-icon","icon-color","iconfont","close","icon-close",3,"ngStyle","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",0),i["\u0275\u0275element"](1,"i",1),i["\u0275\u0275elementStart"](2,"input",2),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchKeywords=e})("keyup.enter",function(){return t.goSearchPage(),t.showHistory=!1})("focus",function(){return t.searchInputFocus()})("blur",function(){return t.isFocus=!1})("compositionend",function(){return t.inputFlag=!0})("compositionstart",function(){return t.inputFlag=!1})("ngModelChange",function(e){return t.userQuestionUpdate.next(e)}),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,C,1,1,"i",3),i["\u0275\u0275elementStart"](5,"wiki-search-history",4),i["\u0275\u0275listener"]("clickOutsideFunc",function(){return t.clickOutsideFunc()})("wikiSearchHistoryAction",function(e){return t.searchKeywordsChanged(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngStyle",t.inputStyle&&t.inputStyle.height?t.searchInputIconClass:t.searchInputIconEmpty),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("id","catalog-search-input-"+t.pageForm)("ngModel",t.searchKeywords)("placeholder",i["\u0275\u0275pipeBind1"](3,10,"SEARCH_TEXT"))("ngStyle",t.inputStyle),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",""!=t.searchKeywords),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("customStyleObj",t.customStyle)("hidden",!t.showHistory)("searchVal",t.searchKeywords)("refreshData",t.refreshDataEventSubject.asObservable()))},directives:[d.o,p.d,p.k,p.l,d.n,v],pipes:[m.b],styles:[".search-input-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;font-size:14px;width:100%}.search-input-wrapper[_ngcontent-%COMP%]   .input-search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#999;top:6px;font-size:14px}.search-input-wrapper[_ngcontent-%COMP%]   .input-clear-icon[_ngcontent-%COMP%]{position:absolute;right:8px;font-size:18px;color:#333;top:5px}.search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{outline:none;height:26px;font-size:14px;padding-left:33px;padding-right:30px;border-radius:13px;line-height:26px;border:1px solid #d7d7d7;display:inline-block;width:100%}.search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus, .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:hover{border:1px solid #23c6c8}.search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::-moz-placeholder{color:#999}.search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#999}"]}),e}()},oMLp:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){}return e.filter=function(e,t,n){var i=t.toLowerCase();return e.filter(function(e){return function(e,t,n){if(e[n].toString().toLowerCase().includes(i))return!0}(e,0,n)})},e.prototype.transform=function(t,n){return t&&n&&n.searchValue&&n.key?e.filter(t,n.searchValue,n.key):t},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"filterByKey",type:e,pure:!0}),e}()},"otx/":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var i={wikiOpen:"WIKI_OPEN",wikiClose:"WIKI_CLOSE",wikiLock:"WIKI_LOCK",wikiUnlock:"WIKI_UNLOCK",wikiLockedBy:"WIKI_LOCKED_BY",wikiRequestUnlock:"WIKI_REQUEST_UNLOCK",wikiLockReconnect:"WIKI_LOCK_RECONNECT",wikiJoinCollabration:"WIKI_JOIN_COLLABRATION",wikiExitCollaboration:"WIKI_EXIT_COLLABORATION",wikiRequestCollabration:"WIKI_REQUEST_COLLABRATION",wikiCollaborationForceOpen:"WIKI_COLLABORATION_FORCE_OPEN",wikiCollaborationForceExit:"WIKI_COLLABORATION_FORCE_EXIT",wikiConvertCollaborationComplete:"WIKI_CONVERT_COLLABORATION_COMPLETE",wikiConvertCollaborationFailed:"WIKI_CONVERT_COLLABORATION_FAILED"},o=function(e){return e[e.none=0]="none",e[e.single=1]="single",e[e.collaboration=2]="collaboration",e}({})},"p10+":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("fXoL"),o=n("ofXK"),r=n("nJia"),a=n("BT9m"),c=n("sYmb");function l(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275element"](1,"user-avatar",5),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("nzTooltipTitle",n.name+" "+n.username)("nzTooltipPlacement","bottom"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("account",n.account)("height",24)("width",24)}}function s(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](),o=i["\u0275\u0275reference"](4);i["\u0275\u0275property"]("nzTooltipTitle",o)("nzTooltipPlacement","bottom")("nzTooltipOverlayClassName","other-users-tooltip-overlay"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.collabUsers.length)}}function d(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.name+" "+n.username)}}var p=function(e){return{count:e}};function u(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",8),i["\u0275\u0275template"](5,d,2,1,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](3,2,"COLLABORATION_USER_COUNT",i["\u0275\u0275pureFunction1"](5,p,n.collabUsers.length))),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",n.collabUsers)}}var m=function(){function e(){this.collabUsers=[]}return Object.defineProperty(e.prototype,"isShowCollabUsers",{get:function(){return this.collabUsers.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showCollabUsers",{get:function(){return this.collabUsers.slice(0,3)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showOtherCollabUsers",{get:function(){return this.collabUsers.length>3},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-collab-users"]],inputs:{collabUsers:"collabUsers"},decls:5,vars:2,consts:[[1,"collab-users"],["class","collab-user","nz-tooltip","",3,"nzTooltipTitle","nzTooltipPlacement",4,"ngFor","ngForOf"],["class","collab-user other-users","nz-tooltip","",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipOverlayClassName",4,"ngIf"],["otherCollabUserToolTip",""],["nz-tooltip","",1,"collab-user",3,"nzTooltipTitle","nzTooltipPlacement"],[3,"account","height","width"],["nz-tooltip","",1,"collab-user","other-users",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipOverlayClassName"],[1,"other-collab-user-tooltip"],[1,"users-info"],["class","user-item text-omit",4,"ngFor","ngForOf"],[1,"user-item","text-omit"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,l,2,5,"div",1),i["\u0275\u0275template"](2,s,2,4,"div",2),i["\u0275\u0275template"](3,u,6,7,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.showCollabUsers),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.showOtherCollabUsers))},directives:[o.m,o.n,r.d,a.a],pipes:[c.b],styles:[".collab-users[_ngcontent-%COMP%]{display:flex}.collab-users[_ngcontent-%COMP%]   .collab-user[_ngcontent-%COMP%]{border-radius:50%;margin-left:-2px}.collab-users[_ngcontent-%COMP%]   .collab-user.other-users[_ngcontent-%COMP%]{font-weight:400;width:26px;height:26px;background-color:#f0f0f0;text-align:center;line-height:26px;font-size:13px}.other-collab-user-tooltip[_ngcontent-%COMP%]   .users-info[_ngcontent-%COMP%]{-moz-column-count:2;column-count:2}.other-collab-user-tooltip[_ngcontent-%COMP%]   .users-info[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]{white-space:nowrap}  .other-users-tooltip-overlay{max-width:500px}"]}),e}()},pSv2:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return e.toUserInfo=function(e){return{email:e.email,account:e.huawei_id,id:e.user_id,username:e.user_name,name_full:e.user_name_full,name:e.user_name_zh,user_type:e.user_type,office_name:"",address:""}},e}()},"r+jA":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){}return e.prototype.transform=function(e,t){var n;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3==(n=e.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),"rgba("+[(n="0x"+n.join(""))>>16&255,n>>8&255,255&n].join(",")+","+(t||"1")+")";throw new Error("Bad Hex")},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"hex2rgba",type:e,pure:!0}),e}()},rXOI:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("z4NU"),o=n("fXoL"),r=function(){function e(){}return e.prototype.transform=function(e,t){var n={workitem_status:function(){return i.p[e]||i.p.DEFAULT},workitem_category:function(){return i.l[e]||i.l.DEFAULT},requirement_category:function(){return i.h[e]||i.p.DEFAULT},requirement_status:function(){return i.p[e]||i.p.DEFAULT},priority:function(){return i.i[e]||i.p.DEFAULT},fuxi_status:function(){return i.d[e]||i.p.DEFAULT},traditional_category_color:function(){return i.h[e]||i.h.DEFAULT},traditional_category_txt:function(){return i.g[e]||i.g.DEFAULT},conference_status:function(){return i.a[e]||i.a.DEFAULT},regions_status:function(){return i.f[e]||i.f.DEFAULT},api_type:function(){return i.o[e]}},o=n[t];return o?("string"==typeof o&&(o=n[o]),o()):e},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o["\u0275\u0275definePipe"]({name:"colorMap",type:e,pure:!0}),e}()},"s+/Z":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("FwiY"),o=n("qAZ0"),r=n("sYmb"),a=n("ofXK"),c=n("lR5k"),l=n("mOC4"),s=n("8J34"),d=n("fXoL"),p=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[{provide:s.a,useClass:s.a}]}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({imports:[[a.c,o.b,i.b,r.a,l.a,c.b.forRoot()]]}),e}()},tSLD:function(e,t,n){"use strict";n.d(t,"a",function(){return X});var i=n("mrSG"),o=n("fXoL"),r=n("Kj3r"),a=n("/uUt"),c=n("XNiG"),l=n("tk/3"),s=n("lJxs"),d=n("AA4e"),p=function(){function e(e){var t=this;this.http=e,this.getAllSpace=function(e){return t.http.get("/devops-knowledge-management/api/query/note/save_load?save_type="+e).pipe(Object(s.a)(function(e){return e.data}))}}return e.prototype.query_users=function(e){var t={params:(new l.g).set("domainId",e.domainId).set("username",e.username)};return this.http.get("/vision-auth/api/users/all",t).pipe(Object(s.a)(function(e){return e.data}))},e.prototype.query_members=function(e){return this.http.request("get","/vision-platform/api/domains/"+e+"/members").pipe(Object(s.a)(function(e){return e}))},e.prototype.query_group=function(e){var t=e?{params:(new l.g).set("key",e)}:{};return this.http.request("get","/vision-message-center/api/v2/espace/query/group",t).pipe(Object(s.a)(function(e){return e.data}))},e.prototype.share_by_espace=function(e,t){var n={params:(new l.g).set("message_way",t.message_way).set("entity_type",t.entity_type).set("entity_id",t.entity_id)};return this.http.post("/vision-common/api/share/content/espace",e,n).pipe(Object(s.a)(function(e){return e.data}))},e.prototype.queryUsers=function(e){var t=this,n={username:e},i={params:(new l.g).set("username",n.username)};return this.http.get("/vision-platform/api/users",i).pipe(Object(s.a)(function(e){var i=e.data;if(Object(d.o)(i)){var o={params:(new l.g).set("username",n.username)};return t.http.get("/devops-user/api/v1/users/ldap",o).pipe(Object(s.a)(function(e){return e.data}))}return i}))},e.prototype.getAccessUsers=function(e){return this.http.get("/devops-knowledge-management/api/note/editors?id="+e).pipe(Object(s.a)(function(e){return e.data}))},e.prototype.addAccessUsers=function(e,t){return void 0===t&&(t=!0),this.http.post("devops-knowledge-management/api/note/editors?isShared="+t,e).pipe(Object(s.a)(function(e){return e.data}))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](l.c))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),u=n("AytR"),m=n("XIp8"),g=n("b6Qw"),h=n("sYmb"),f=n("bNXi"),v=n("dEAy"),C=n("ofXK"),b=n("1JWf"),x=n("3Pt+"),y=n("PTRe"),w=n("rMZv");function O(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",38),o["\u0275\u0275element"](1,"img",39),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("src","http://w3.huawei.com/w3lab/rest/yellowpage/face/"+n.account+"/45",o["\u0275\u0275sanitizeUrl"])}}function _(e,t){1&e&&o["\u0275\u0275element"](0,"img",40)}function M(e,t){1&e&&o["\u0275\u0275element"](0,"img",41)}function S(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",42),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.workItemAttr(n))}}function P(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",42),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.group_name)}}function E(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",32),o["\u0275\u0275elementStart"](1,"i",33),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=t.index;return o["\u0275\u0275nextContext"](2).removeItem(e,i)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](2,O,2,1,"div",34),o["\u0275\u0275template"](3,_,1,0,"img",35),o["\u0275\u0275template"](4,M,1,0,"img",36),o["\u0275\u0275template"](5,S,2,1,"span",37),o["\u0275\u0275template"](6,P,2,1,"span",37),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.account),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","0"==i.group_type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","1"==i.group_type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.name),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.group_name)}}function I(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",30),o["\u0275\u0275template"](1,E,7,5,"div",31),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.update_owners)}}function k(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",43),o["\u0275\u0275elementStart"](1,"input",44),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().editAccessShare()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](2,"label",45),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("checked",i.isEditAccessShare),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](3,2,"ALLOW_EDITING"))}}function T(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"input",44),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().useInitiateDiscussion()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](2,"label",45),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("checked",i.isInitiateDiscussion),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](3,2,"INITIATE_DISCUSSION_GROUP"))}}function A(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",51),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).backAllList("user")}),o["\u0275\u0275element"](1,"i",52),o["\u0275\u0275elementEnd"]()}}function D(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",53),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=t.index;return o["\u0275\u0275nextContext"](2).selectItem("user",e,i)}),o["\u0275\u0275element"](1,"img",39),o["\u0275\u0275elementStart"](2,"span",54),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"span",55),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate1"]("src","http://w3.huawei.com/w3lab/rest/yellowpage/face/",i.account,"/45",o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",r.workItemAttr(i)," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",i.office_name),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.office_name)}}function z(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",56),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).showMore("user")}),o["\u0275\u0275element"](1,"span",8),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"i",57),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,1,"MORE_CONTACTS")))}function L(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",46),o["\u0275\u0275elementStart"](1,"span",47),o["\u0275\u0275template"](2,A,2,0,"span",48),o["\u0275\u0275element"](3,"span",8),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"ul"),o["\u0275\u0275template"](6,D,6,4,"li",49),o["\u0275\u0275pipe"](7,"slice"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,z,4,3,"div",50),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.showGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,4,"ESPACE_USER_NUMBER")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind3"](7,6,n.availableMembers,0,n.userLimit)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.availableMembers.length>n.userLimit)}}function V(e,t){1&e&&o["\u0275\u0275element"](0,"div",58)}function N(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",51),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).backAllList("group")}),o["\u0275\u0275element"](1,"i",52),o["\u0275\u0275elementEnd"]()}}function R(e,t){1&e&&o["\u0275\u0275element"](0,"img",40)}function j(e,t){1&e&&o["\u0275\u0275element"](0,"img",41)}function U(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",51),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=t.index;return o["\u0275\u0275nextContext"](2).selectItem("group",e,i)}),o["\u0275\u0275template"](1,R,1,0,"img",61),o["\u0275\u0275template"](2,j,1,0,"img",62),o["\u0275\u0275elementStart"](3,"span",54),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","0"==i.group_type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","1"==i.group_type),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.group_name)}}function B(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",56),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).showMore("group")}),o["\u0275\u0275element"](1,"span",8),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"i",57),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,1,"MORE_GROUPS")))}function F(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",59),o["\u0275\u0275elementStart"](1,"span",47),o["\u0275\u0275template"](2,N,2,0,"span",48),o["\u0275\u0275element"](3,"span",8),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"ul"),o["\u0275\u0275template"](6,U,5,3,"li",60),o["\u0275\u0275pipe"](7,"slice"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,B,4,3,"div",50),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.showUser),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,4,"ESPACE_GROUP")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind3"](7,6,n.espaceGroupData,0,n.groupLimit)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.espaceGroupData.length>n.groupLimit)}}function W(e,t){1&e&&o["\u0275\u0275element"](0,"span",73)}function H(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"]("",n.name," ",n.account,"")}}var $=function(){return{x:"100%",y:"215px"}};function G(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",63),o["\u0275\u0275elementStart"](1,"div",64),o["\u0275\u0275elementStart"](2,"span",65),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().showShareList=!1}),o["\u0275\u0275elementStart"](3,"span",66),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,W,1,0,"span",67),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"input",68),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().userListSearch=e})("keyup",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().filterList()}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](9,"i",69),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"nz-table",70,71),o["\u0275\u0275elementStart"](12,"thead"),o["\u0275\u0275elementStart"](13,"tr"),o["\u0275\u0275elementStart"](14,"th"),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"tbody"),o["\u0275\u0275template"](18,H,3,2,"tr",72),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275reference"](11),r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate2"]("",o["\u0275\u0275pipeBind1"](5,10,"SHARED_MEMBER"),"(",r.sharedUserList.length,")"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",r.showShareList),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](8,12,"PLACEHOLDER_SEARCH_BY_NAME"))("ngModel",r.userListSearch),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzData",r.sharedUserListDisplay)("nzShowPagination",!1)("nzScroll",o["\u0275\u0275pureFunction0"](16,$)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,14,"RAT_MEMBER_INFORMATION")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",i.data)}}function q(e,t){1&e&&o["\u0275\u0275element"](0,"i",76)}function K(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",74),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().showUserListFunc()}),o["\u0275\u0275elementStart"](1,"span",66),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,q,1,0,"i",75),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"]("",o["\u0275\u0275pipeBind1"](3,3,"SHARED_MEMBER"),"(",i.sharedUserList.length,")"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!i.showShareList&&i.sharedUserList.length)}}var X=function(){function e(e,t,n,i){var l=this;this.cookieService=e,this.knowledgeService=t,this.translate=n,this.notificationService=i,this.titleDesc=this.translate.instant("SHARE"),this.modelShowCloseChange=new o.EventEmitter,this.update_owners=[],this.result_show=!1,this.availableMembers=[],this.availableMembersInit=[],this.espaceGroupData=[],this.espaceGroupDataInit=[],this.showGroup=!0,this.userLimit=5,this.showUser=!0,this.groupLimit=3,this.userQuestionUpdate=new c.a,this.sendShareFunc=new c.a,this.inputFlag=!0,this.canCreateGroup=!1,this.isInitiateDiscussion=!1,this.isEditAccessShare=!1,this.showShareList=!1,this.userListSearch="",this.sharedUserListDisplay=[],this.sharedUserList=[],this.valueChange=function(e){this.inputFlag&&(this.isEmptyValue(e)?(this.availableMembers=this.availableMembersInit,this.espaceGroupData=this.espaceGroupDataInit,this.showGroup?this.showUser||(this.groupLimit=this.espaceGroupData.length):this.userLimit=this.availableMembers.length):this.getUsers(e))},this.userQuestionUpdate.pipe(Object(r.a)(500),Object(a.a)()).subscribe(function(e){l.valueChange(l.selectValue)})}return e.prototype.closeModal=function(){this.searchValue="",this.modelShowCloseChange.emit(!1)},e.prototype.searchInputFocus=function(){this.result_show=!0},e.prototype.clickOutsideFunc=function(){this.result_show=!1,this.selectValue=""},e.prototype.isEmptyValue=function(e){return null==e||void 0!==e.length&&0===e.length||0===Object.keys(e).length},e.prototype.membersToUsers=function(e){var t=this;e.forEach(function(e){e.user&&(e.user.office_name=null),t.availableMembers.push(e.user),t.availableMembersInit.push(e.user)})},e.prototype.ngOnInit=function(){var e=this;this.currentDomain?this.queryMembers():this.getAllDomains(),this.knowledgeService.query_group(null).subscribe(function(t){e.espaceGroupData=t,e.espaceGroupDataInit=Object(m.a)(t)},function(){}),this.espaceShareContent=void 0,this.queryNoteAccessUsers(),this.espaceShareContent=this.shareTipContent||""},e.prototype.queryNoteAccessUsers=function(){var e=this;"note"===this.shareDetail.category&&this.knowledgeService.getAccessUsers(this.shareDetail.id).subscribe(function(t){var n;e.noteAccessInfo=t,e.sharedUserList=null===(n=null==t?void 0:t.queryAll)||void 0===n?void 0:n.map(function(e){return e.user}),e.sharedUserListDisplay=e.sharedUserList,e.noteAccessInfo.editorsSingle=e.noteAccessInfo.editorsSingle.map(function(e){return e.user.id}),e.noteAccessInfo.groups=e.noteAccessInfo.groups.map(function(e){return e.id})},function(){})},e.prototype.getAllDomains=function(){var e=this;this.knowledgeService.getAllSpace("generate_workitem").subscribe(function(t){t.default_domain&&t.default_domain.id?(e.currentDomain=t.default_domain.id,e.queryMembers()):t.my_related_domains.length>0&&(e.currentDomain=t.my_related_domains[0].id,e.queryMembers())},function(){})},e.prototype.queryMembers=function(){var e=this;this.knowledgeService.query_members(this.currentDomain).subscribe(function(t){e.membersToUsers(t.data.self_members.members)},function(){})},e.prototype.getUsers=function(e){var t=this,n={domainId:this.currentDomain,username:e};this.availableMembers=[],this.knowledgeService.query_users(n).subscribe(function(e){for(var n=function(n){var i=e[n];t.availableMembers.some(function(e){return e.id==i.id})||t.availableMembers.push(i)},i=0;i<e.length;i++)n(i);t.showGroup||(t.userLimit=t.availableMembers.length)},function(){}),this.espaceGroupData=[],this.knowledgeService.query_group(e).subscribe(function(e){for(var n=0;n<e.length;n++){for(var i=e[n],o=!0,r=t.espaceGroupData.length,a=0;a<r;a++)if(i.id==t.espaceGroupData[a].id){o=!1;break}o&&t.espaceGroupData.push(i)}t.showUser||(t.groupLimit=t.espaceGroupData.length)},function(){})},e.prototype.backAllList=function(e){this.showGroup=!0,this.showUser=!0,"user"==e?this.userLimit=5:this.groupLimit=3,this.resetResultShow()},e.prototype.resetResultShow=function(){var e=this;setTimeout(function(){e.result_show=!0},0)},e.prototype.selectItem=function(e,t,n){this.update_owners.some(function(e){return e.id==t.id})||("user"==e?(this.update_owners.unshift(t),this.availableMembers.splice(n,1)):(this.update_owners.push(t),this.espaceGroupData.splice(n,1))),this.selectValue=null,this.canCreateGroup=(!u.a||!u.a.isStandaloneWiki)&&this.checkOnlyContacts()},e.prototype.checkOnlyContacts=function(){if(0==this.update_owners.length)return this.isInitiateDiscussion=!1,!1;for(var e=this.update_owners.length-1;e>=0;e--)if(this.update_owners[e].group_name)return this.isInitiateDiscussion=!1,!1;return!0},e.prototype.workItemAttr=function(e){return this.isEmptyValue(e)?null:"en"==this.translate.currentLang&&e.name_full?e.name_full:e.name+" "+e.account},e.prototype.getIt=function(e){},e.prototype.showMore=function(e){"user"==e?(this.userLimit=this.availableMembers.length,this.showGroup=!1):(this.groupLimit=this.espaceGroupData.length,this.showUser=!1),this.resetResultShow()},e.prototype.removeItem=function(e,t){this.update_owners.splice(t,1),this.canCreateGroup=(!u.a||!u.a.isStandaloneWiki)&&this.checkOnlyContacts(),e.group_name?this.espaceGroupData.unshift(e):this.availableMembers.unshift(e)},e.prototype.useInitiateDiscussion=function(){this.isInitiateDiscussion=!this.isInitiateDiscussion},e.prototype.editAccessShare=function(){this.isEditAccessShare=!this.isEditAccessShare},e.prototype.createPush=function(){var e,t,n,o,r=this,a={id:this.shareDetail.id,type:this.shareDetail.type,category:this.shareDetail.category,number:this.shareDetail.number||"",entity_type:this.shareDetail.entity_type||this.shareDetail.type},c={remark:this.espaceShareContent,receivers:[],group_ids:[],url:this.getUrl(a,this.espaceParams)};this.update_owners.forEach(function(e){e.group_name?c.group_ids.push(e.id):c.receivers.push({id:e.id,username:e.username})});var l={message_way:this.isInitiateDiscussion?"create_group":"single",entity_type:"",entity_id:""};if(a&&(l.entity_type=a.entity_type,l.entity_id=a.id),this.espaceParams&&(c=Object(i.a)(Object(i.a)({},c),this.espaceParams)),this.knowledgeService.share_by_espace(c,l).subscribe(function(e){r.closeModal(),e?r.notificationService.success(r.translate.instant("SUCCESS_TO_SAND"),""):r.notificationService.error(r.translate.instant("FAILED_TO_SAND"),"")},function(){}),"note"===this.shareDetail.category){var s={id:this.shareDetail.id,editors:(null!==(t=null===(e=this.noteAccessInfo)||void 0===e?void 0:e.editorsSingle)&&void 0!==t?t:[]).concat(this.update_owners.filter(function(e){return!e.group_name}).map(function(e){return e.id})),groupIds:(null!==(o=null===(n=this.noteAccessInfo)||void 0===n?void 0:n.groups)&&void 0!==o?o:[]).concat(this.update_owners.filter(function(e){return e.group_name}).map(function(e){return e.id}))};this.isEditAccessShare||(s.authority="query"),this.knowledgeService.addAccessUsers(s).subscribe(function(e){},function(){})}},e.prototype.getUrl=function(e,t){void 0===t&&(t={comment_id:0,content_id:0});var n=e.id,i=e.number,o=t.comment_id,r=t.content_id,a=this.sn;return{Feature:this.isDocDesignReview?location.origin+"/workitem/"+i+"?docDesignReview=true":location.origin+"/workitem/"+i,Story:location.origin+"/workitem/"+i,Epic:location.origin+"/workitem/"+i,Task:location.origin+"/workitem/"+i,TaskGroup:location.origin+"/workitem/"+i,doc:location.origin+"/wiki/"+a+"?shared_by="+this.currentUserId,document:location.origin+"/wiki/"+a+"?shared_by="+this.currentUserId,table:location.origin+"/wiki/"+a+"?shared_by="+this.currentUserId,"doc-comment":location.origin+"/wiki/"+a+"?comment="+o+"_"+this.currentUserId,note:location.origin+"/noteShare/"+a,"01001001-des":location.origin+"/#/raw/"+n,"02001001-des":location.origin+"/#/dev/"+n,"02001003-des":location.origin+"/#/dev/"+n,"04000001-des":location.origin+"/#/bug/"+n,"04000002-des":location.origin+"/#/bug/"+n,"02001001-doc":location.origin+"/#/dev/"+n+"?content_id="+r,"02001003-doc":location.origin+"/#/dev/"+n+"?content_id="+r,"01001001-doc":location.origin+"/#/raw/"+n+"?content_id="+r,"01001001-comment":location.origin+"/#/raw/"+n+"?comment_id="+o,"02001001-comment":location.origin+"/#/dev/"+n+"?comment_id="+o,"02001003-comment":location.origin+"/#/dev/"+n+"?comment_id="+o,"04000002-comment":location.origin+"/#/bug/"+n+"?comment_id="+o,"04000001-comment":location.origin+"/#/bug/"+n+"?comment_id="+o,"workitem-review":location.origin+"/workitem/"+i+"?docDesignReview=true"}[e.category]},e.prototype.ngAfterViewInit=function(){setTimeout(function(){document.getElementById("focusMove").blur()},100)},e.prototype.showUserListFunc=function(){this.sharedUserList.length&&(this.showShareList=!0)},e.prototype.filterList=function(){var e=this;this.sharedUserListDisplay=this.sharedUserList.filter(function(t){return t.name.includes(e.userListSearch)||t.account.includes(e.userListSearch)})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](p),o["\u0275\u0275directiveInject"](h.c),o["\u0275\u0275directiveInject"](f.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["espace-share"]],inputs:{shareDetail:"shareDetail",espaceParams:"espaceParams",shareTipContent:"shareTipContent",isDocDesignReview:"isDocDesignReview",titleDesc:"titleDesc",currentDomain:"currentDomain",sn:"sn",currentUserId:"currentUserId"},outputs:{modelShowCloseChange:"modelShowCloseChange"},features:[o["\u0275\u0275ProvidersFeature"]([p])],decls:37,vars:32,consts:[["nzCalssName","modal-styl","id","share-content-wrapper",3,"nzVisible","nzClosable","nzFooter","nzWidth"],[1,"share-content"],[1,"share-content-header"],[1,"f-18",3,"textContent"],[1,"iconfont","icon-close","cursor-pointer","position-a","user-tip-close",3,"click"],[1,"share-content-body"],[1,"send-user"],[1,"p-b-5"],[3,"textContent"],["class","espace-list",4,"ngIf"],[1,"p-t-0","p-b-15","checkbox",2,"padding-left","20px"],["class","more-right-checkbox",4,"ngIf"],[4,"ngIf"],["clickElementOutside","",1,"espace-search-box","position-r",3,"clickOutside"],[1,"espace-search-input"],[1,"fa","fa-search","fa-fw","cursor-pointer"],["id","focusMove","type","search","autocomplete","off","autocorrect","off","autocapitalize","off","autofocus","false",3,"placeholder","ngModel","ngModelChange","focus","compositionend","compositionstart"],[1,"position-a","f-12",2,"width","100%","z-index","1",3,"hidden"],[1,"espace-search-result"],["class","p-10 ","style","padding-bottom: 0;",4,"ngIf"],["style","height: 10px;background-color:#f0f0f0;",4,"ngIf"],["class","p-10",4,"ngIf"],[1,"m-t-20",2,"margin-bottom","30px"],[1,"req-key","p-b-5",3,"textContent"],[1,"txt-l","p-l-n"],["rows","6",1,"ant-input-styl",3,"placeholder","ngModel","ngModelChange"],["class","share-user-list",4,"ngIf"],[1,"share-content-footer"],["class","left-span",3,"click",4,"ngIf"],["type","button","ng-disabled","!update_owners.length",1,"btn","btn-primary",2,"padding","1px 6px",3,"textContent","click"],[1,"espace-list"],["class","m-r-10 position-r",4,"ngFor","ngForOf"],[1,"m-r-10","position-r"],[1,"user-tip-close","iconfont","icon-close","cursor-pointer","position-a","remov-item",3,"click"],["class","session-profile display-inline",4,"ngIf"],["width","24","height","24","class","session-profile display-inline","src","/knowledge-ui/assets/imgs/espace_group.png",4,"ngIf"],["width","24","height","24","class","session-profile display-inline","src","/knowledge-ui/assets/imgs/espace_message.png",4,"ngIf"],["class","m-l-10 box-inline text-omit",4,"ngIf"],[1,"session-profile","display-inline"],["alt","",1,"concat-img",3,"src"],["width","24","height","24","src","/knowledge-ui/assets/imgs/espace_group.png",1,"session-profile","display-inline"],["width","24","height","24","src","/knowledge-ui/assets/imgs/espace_message.png",1,"session-profile","display-inline"],[1,"m-l-10","box-inline","text-omit"],[1,"more-right-checkbox"],["type","checkbox",1,"pointer-cursor",3,"checked","click"],[1,"env-option-label","f-13",3,"textContent"],[1,"p-10",2,"padding-bottom","0"],[1,"p-b-5",2,"display","block","color","#b3b2b2"],["class","cursor-pointer ",3,"click",4,"ngIf"],["class","cursor-pointer flex-box",3,"click",4,"ngFor","ngForOf"],["class","cursor-pointer f-14 ","style","padding: 8px 0;",3,"click",4,"ngIf"],[1,"cursor-pointer",3,"click"],[1,"fa","fa-reply"],[1,"cursor-pointer","flex-box",3,"click"],[1,"m-l-10"],[1,"pull-right","office_name","m-l-10","flex-1",3,"title"],[1,"cursor-pointer","f-14",2,"padding","8px 0",3,"click"],[1,"fa","m-r-3","fa-angle-right","pull-right","f-20"],[2,"height","10px","background-color","#f0f0f0"],[1,"p-10"],["class","cursor-pointer ",3,"click",4,"ngFor","ngForOf"],["width","24","height","24","class","session-profile display-inline ","src","/knowledge-ui/assets/imgs/espace_group.png",4,"ngIf"],["width","24","height","24","class","session-profile display-inline ","src","/knowledge-ui/assets/imgs/espace_message.png",4,"ngIf"],[1,"share-user-list"],[1,"share-list-header"],[1,"flex-2",3,"click"],[1,"m-r-5"],["class","iconfont icon-arrow-up",4,"ngIf"],["nz-input","",1,"flex-1",3,"placeholder","ngModel","ngModelChange","keyup"],[1,"iconfont","icon-search","input-search-styl"],[3,"nzData","nzShowPagination","nzScroll"],["userTable",""],[4,"ngFor","ngForOf"],[1,"iconfont","icon-arrow-up"],[1,"left-span",3,"click"],["class","iconfont icon-icon-crown",4,"ngIf"],[1,"iconfont","icon-icon-crown"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nz-modal",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275element"](3,"span",3),o["\u0275\u0275elementStart"](4,"i",4),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",5),o["\u0275\u0275elementStart"](6,"div",6),o["\u0275\u0275elementStart"](7,"div",7),o["\u0275\u0275element"](8,"span",8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementStart"](10,"span"),o["\u0275\u0275text"](11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,I,2,1,"div",9),o["\u0275\u0275elementStart"](13,"div",10),o["\u0275\u0275template"](14,k,4,4,"div",11),o["\u0275\u0275template"](15,T,4,4,"div",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",13),o["\u0275\u0275listener"]("clickOutside",function(){return t.clickOutsideFunc()}),o["\u0275\u0275elementStart"](17,"div",14),o["\u0275\u0275element"](18,"i",15),o["\u0275\u0275elementStart"](19,"input",16),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectValue=e})("focus",function(){return t.searchInputFocus()})("compositionend",function(){return t.inputFlag=!0})("compositionstart",function(){return t.inputFlag=!1})("ngModelChange",function(e){return t.userQuestionUpdate.next(e)}),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",17),o["\u0275\u0275elementStart"](22,"div",18),o["\u0275\u0275template"](23,L,9,10,"div",19),o["\u0275\u0275template"](24,V,1,0,"div",20),o["\u0275\u0275template"](25,F,9,10,"div",21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"div",22),o["\u0275\u0275element"](27,"div",23),o["\u0275\u0275pipe"](28,"translate"),o["\u0275\u0275elementStart"](29,"div",24),o["\u0275\u0275elementStart"](30,"textarea",25),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.espaceShareContent=e}),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](32,G,19,17,"div",26),o["\u0275\u0275elementStart"](33,"div",27),o["\u0275\u0275template"](34,K,5,5,"span",28),o["\u0275\u0275elementStart"](35,"button",29),o["\u0275\u0275listener"]("click",function(){return t.createPush()}),o["\u0275\u0275pipe"](36,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",552),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",t.titleDesc),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](9,22,"SHARE_WITH")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"]("("+t.update_owners.length+")"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.update_owners.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.update_owners.length&&"note"===t.shareDetail.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.canCreateGroup),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](20,24,"SHARE_SEARCH_PLACEHOLDER"))("ngModel",t.selectValue),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",!t.result_show),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.showUser&&t.availableMembers.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showUser&&t.availableMembers.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showGroup&&t.espaceGroupData.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](28,26,"ESPACE_MESSAGE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](31,28,"KNOWLEDGE_BASE_COMMENT_PLACEHOLDER"))("ngModel",t.espaceShareContent),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.showShareList&&(null==t.sn?null:t.sn.startsWith("NOTE"))),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.showShareList&&(null==t.sn?null:t.sn.startsWith("NOTE"))),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](36,30,"ESPACE_SEND")))},directives:[v.a,C.n,b.a,x.d,x.k,x.l,C.m,y.b,w.c,w.h,w.i,w.b,w.g,w.e],pipes:[h.b,C.v],styles:['.ant-modal-body{padding:0}.share-content[_ngcontent-%COMP%]{position:relative;background-color:#fff;background-clip:padding-box;border:0;border-radius:4px;box-shadow:0 4px 12px rgba(0,0,0,.15);pointer-events:auto;min-height:400px;width:552px}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]{padding:16px 24px;color:rgba(0,0,0,.65);background:#fff;border-bottom:1px solid #e5e5e5;border-radius:4px 4px 0 0;position:relative}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]   .f-18[_ngcontent-%COMP%]{font-size:18px}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]   .user-tip-close[_ngcontent-%COMP%]{font-size:16px;right:20px;top:16px}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]{padding:24px 24px 0;font-size:14px;line-height:1.5;word-wrap:break-word}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .p-b-5[_ngcontent-%COMP%]{padding-bottom:5px}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-input[_ngcontent-%COMP%]{border:1px solid #d9d9d9;width:100%;display:flex;padding:3px;border-radius:3px}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-input[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:30px;height:25px;line-height:25px;color:#d9d9d9}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;outline:none;border:none}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result[_ngcontent-%COMP%]{width:100%;border:1px solid #d9d9d9;border-top:none;background-color:#fff;z-index:1;max-height:410px;height:100%;overflow-y:scroll}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{height:30px;background:#999;width:16px;border-radius:8px}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result[_ngcontent-%COMP%]::-webkit-scrollbar-track{display:none}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{display:flex}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   .more-right-checkbox[_ngcontent-%COMP%]{margin-right:40px}.user-photo[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%}.office_name[_ngcontent-%COMP%], .user-photo[_ngcontent-%COMP%]{display:inline-block;overflow:hidden}.office_name[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;max-width:370px;text-align:right;color:#b3b2b2}textarea.ant-input-styl[_ngcontent-%COMP%]{max-width:100%;height:auto;min-height:128px;line-height:1.5;vertical-align:bottom;transition:all .3s,height 0s;resize:none;outline:none;border-color:#d9d9d9!important}textarea.ant-input-styl[_ngcontent-%COMP%]:focus, textarea.ant-input-styl[_ngcontent-%COMP%]:hover{border-color:#23c6c8!important}.ant-input-styl[_ngcontent-%COMP%]{padding:0 5px;box-sizing:border-box;margin:0;font-variant:tabular-nums;list-style:none;font-feature-settings:"tnum";position:relative;display:inline-block;width:100%;height:32px;color:rgba(0,0,0,.65);font-size:14px;line-height:1.5;background-color:#fff;background-image:none;border:1px solid #d9d9d9;border-radius:4px;transition:all .3s}.espace-list[_ngcontent-%COMP%]{padding:10px 0;max-height:125px;overflow:auto;margin-bottom:15px}.espace-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;align-items:center;display:flex;float:left;height:34px}.espace-list[_ngcontent-%COMP%]:after{content:"";display:block;clear:both}.espace-list[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;display:inline-block;width:13px;height:13px;background-color:#e35263;border-radius:50%;text-align:center;line-height:13px;top:1px;left:20px;padding:0 1px;font-size:12px!important}.text-omit[_ngcontent-%COMP%]{word-break:break-all;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.concat-img[_ngcontent-%COMP%]{height:24px;width:24px;border-radius:50%}.espace-search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:4px 0;line-height:30px;border-bottom:1px solid #e5e5e5}.espace-search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#f2f2f2;cursor:pointer}li[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{padding:0;margin:0;list-style-type:none}.share-content-footer[_ngcontent-%COMP%]{padding:0 24px 20px;text-align:right;position:relative}.share-content-footer[_ngcontent-%COMP%]   .left-span[_ngcontent-%COMP%]{position:absolute;left:24px}.share-content-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px!important}.btn-primary.btn-outline.c-btn-line[_ngcontent-%COMP%]:after{background-color:#1ab394}.btn-primary.btn-outline.c-btn-border-line.success[_ngcontent-%COMP%]:before{border-bottom-color:#1ab394;border-left-color:#1ab394}.btn-primary.btn-outline.c-btn-border-line.success[_ngcontent-%COMP%]:after{border-top-color:#1ab394;border-right-color:#1ab394}.share-user-list[_ngcontent-%COMP%]{padding:0 24px 24px;width:100%}.share-list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:relative}.share-list-header[_ngcontent-%COMP%]   .flex-2[_ngcontent-%COMP%]{flex:2}.share-list-header[_ngcontent-%COMP%]   .flex-1[_ngcontent-%COMP%]{flex:1}.input-search-styl[_ngcontent-%COMP%]{font-size:16px;position:absolute;right:8px;top:calc(50% - 11px)}  .share-user-list .ant-input{height:24px}  .share-user-list .ant-table tfoot>tr>td,   .share-user-list .ant-table tfoot>tr>th,   .share-user-list .ant-table-tbody>tr>td,   .share-user-list .ant-table-thead>tr>th{padding:8px 16px}']}),e}()},to4i:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("lJxs"),o=n("y7eE"),r=n("fXoL"),a=n("tk/3"),c=function(){function e(e){this.http=e}return e.prototype.getCategoryLinkNum=function(e,t){return this.http.post("/devops-knowledge-management/api/global/aggregation/wiki?domain_id="+t,e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.getWikiSearchResult=function(e,t){return this.http.post("/devops-knowledge-management/api/global/search/wiki?domain_id="+t,e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.goSearchPage=function(e){var t=[],n=localStorage.getItem("devops-wiki-search-history");n&&(t=JSON.parse(n));var i=t.indexOf(e.searchKeywords.trim());i>-1&&t.splice(i,1),t.splice(0,0,e.searchKeywords.trim()),t.length>15&&(t=t.splice(0,15)),Object(o.c)("devops-wiki-search-history",JSON.stringify(t));var r={value:e.searchKeywords.trim()};e.kanbanId&&(r.kanbanId=e.kanbanId),e.router.navigate(["domains/"+e.currentDomain+"/wiki/search"],{queryParams:r})},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](a.c))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()},vRWp:function(e,t,n){"use strict";function i(){return crypto.getRandomValues(new Uint32Array(1))[0]/4294967296}n.d(t,"a",function(){return i})},vTH2:function(e,t,n){"use strict";n.d(t,"a",function(){return U});var i=n("fXoL"),o=n("y7eE"),r=n("UJq8"),a=n("A/Mn"),c=n("sYmb"),l=n("dEAy"),s=n("ofXK"),d=n("Nqz0"),p=n("C2AL"),u=n("Q8cG"),m=n("EGpF"),g=n("3Pt+"),h=n("1JWf"),f=n("hK9q"),v=n("5UG9"),C=n("ebHz");function b(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"SPACE_VISIBILE")))}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"PUBLIC_VISIBILE")))}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"PRIVACY_VISIBILE")))}var w=function(){return[0,4]};function O(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",24),i["\u0275\u0275template"](1,b,3,3,"span",21),i["\u0275\u0275template"](2,x,3,3,"span",21),i["\u0275\u0275template"](3,y,3,3,"span",21),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",0===n.showVisibility),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",4===n.showVisibility),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](3,w).includes(n.showVisibility))}}function _(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",22),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().accessControlShowFunc()}),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,O,4,4,"div",23),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,"CURRENT_VISIBILITY")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",void 0!==o.showVisibility)}}function M(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",25),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().showSelectCategoryDirectory=!0}),i["\u0275\u0275element"](1,"span",10),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("hidden",o.showPreview),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](2,3,"NEW_ARTICLE_TO"))}}function S(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",32),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).isShowSaveAndReviosionBtn=!0}),i["\u0275\u0275element"](1,"span",33),i["\u0275\u0275elementEnd"]()}}function P(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",34),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).ShowRevisionDetaillModal()}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](1,1,"SAVE_AND_REVISED"))}function E(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",35),i["\u0275\u0275elementStart"](1,"reversion-history-model",36),i["\u0275\u0275listener"]("saveRevision",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).saveArticleAndRevision(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("currentDomain",o.currentDomain)}}function I(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",26),i["\u0275\u0275listener"]("clickOutside",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clickOutsideFunc()}),i["\u0275\u0275elementStart"](1,"button",27),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().save()}),i["\u0275\u0275element"](2,"span",28),i["\u0275\u0275element"](3,"span",10),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,S,2,0,"button",29),i["\u0275\u0275template"](6,P,2,3,"div",30),i["\u0275\u0275template"](7,E,2,1,"div",31),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("hidden",o.showPreview),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](4,6,"COMMON_BTN_SAVE")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!o.workitemArticle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.isShowSaveAndReviosionBtn),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.isShowRevisionDetailModal)}}function k(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",25),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().save()}),i["\u0275\u0275element"](1,"span",37),i["\u0275\u0275element"](2,"span",10),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("hidden",o.showPreview),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](3,3,"COMMON_BTN_SAVE"))}}function T(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",38),i["\u0275\u0275elementStart"](1,"button",8),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().showPreviewFunc(!0)}),i["\u0275\u0275element"](2,"span",39),i["\u0275\u0275element"](3,"span",10),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("hidden",o.showPreview||o.hiddenPreviewBtn),i["\u0275\u0275property"]("hidden",o.fullScreenCtrl),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](4,4,"PREVIEW"))}}function A(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",40),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().cancelCreate()}),i["\u0275\u0275element"](1,"span",10),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("hidden",o.showPreview),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](2,3,"COMMON_BUTTON_CANCLE"))}}function D(e,t){if(1&e&&i["\u0275\u0275element"](0,"span",41),2&e){i["\u0275\u0275nextContext"]();var n=i["\u0275\u0275reference"](17);i["\u0275\u0275property"]("nzDropdownMenu",n)}}var z=function(e,t){return{id:e,classify:t}};function L(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",42),i["\u0275\u0275elementStart"](1,"select-category-directory",43),i["\u0275\u0275listener"]("modelShowCloseChange",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().showSelectCategoryDirectory=!1})("modelShowVariableChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().getConfirmFunc(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabledNode","")("currentCategory",o.categoryId?i["\u0275\u0275pureFunction2"](5,z,o.categoryId,o.workitemArticle?"system":""):null)("currentDomain",o.currentDomain)("tipInfo",o.tipInfo)("wikiEditFunction",o.wikiEditFunction)}}function V(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-modal",44),i["\u0275\u0275elementStart"](2,"div",45),i["\u0275\u0275elementStart"](3,"access-control",46),i["\u0275\u0275listener"]("closeCallback",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().closeCallbackFunc(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",600),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("articleDetails",o.articleDetails)("visibilityEditModel",o.visibilityEditModel)("createFrom",o.createFrom)("categoryDetails",o.categoryDetails)("visibilityParams",o.visibilityParams)}}var N=function(){return["create-article","create-excel"]},R=function(){return["update-design-template","create-design-template"]},j=function(){return["update-design-template","create-design-template","create-excel","update-excel"]},U=function(){function e(e,t,n,o){this.emitService=e,this.knowledgeService=t,this.translate=n,this.modal=o,this.dictionaryId=null,this.workitemArticle=!1,this.selected=new i.EventEmitter,this.preview=new i.EventEmitter,this.saveBool=!1,this.showSelectCategoryDirectory=!1,this.isShowSaveAndReviosionBtn=!1,this.saveVersionDisabled=!1,this.isShowRevisionDetailModal=!1,this.relatedWorkitem=[],this.searchWorkitemList=[],this.isLoading={workitem:!1},this.wideModeSwitch=!1,this.canSwitchWide=!0,this.accessControlShow=!1,this.visibilityParams={}}return e.prototype.ngOnInit=function(){var e=this;this.tipInfo={title:"NEW_ARTICLE_TO",listPlaceHolder:"SEARCH_CATEGORY_DIRECTORY",listDirectoryTip:"CREATE",detailTitle:"SELECT_CREATE_LOCATION",detailPlaceHolder:"SEARCH",detailBottomTip:"NEW_ARTICLE_TO",detailConfirmBtnTip:"COMMON_BTN_SAVE"},this.emitService.eventEmit.subscribe(function(t){t&&"rich-text-mode"==t.type&&(e.canSwitchWide=!0),t&&"new-markdown"==t.type&&(e.wideModeSwitch||e.handleSwitchChange(!0),e.canSwitchWide=!1)});var t=localStorage.getItem("wikiWideModeSwitch");t&&(this.wideModeSwitch=JSON.parse(t)),this.getAccessDefault()},e.prototype.save=function(){this.selected.emit({type:"save",model:this.model,categoryId:this.categoryId,dictionaryId:this.dictionaryId,parentSn:this.parentSn,visibilityParams:"create-article"===this.model?this.visibilityParams:null}),this.showSelectCategoryDirectory=!1},e.prototype.cancelCreate=function(){if(this.isTable)this.selected.emit({type:"cancelCreate"});else{var e=this.translate.instant.bind(this.translate),t=this.save.bind(this),n=this.emitCloseEvent.bind(this);if(this.wikiEditFunction&&["workitem","coe"].includes(this.wikiEditFunction.editFrom)){var i=new CustomEvent("knowledge_event_listener",{detail:{operation:"knowledge_cancel_create"}});window.dispatchEvent(i)}if(this.contentChanged&&["update-article","update-design-template","create-design-template"].includes(this.model))var o=this.modal.create({nzTitle:this.translate.instant({"update-article":"IS_SAVE_CURRENT_DOC","update-design-template":"IS_SAVE_CURRENT_TEMPLATE","create-design-template":"IS_SAVE_CURRENT_TEMPLATE"}[this.model]),nzContent:null,nzWidth:500,nzClosable:!1,nzClassName:"confirm-cancel-modal",nzFooter:[{label:e("COMMON_BTN_SAVE"),onClick:function(){t(),o.close()}},{label:e("COMMON_BTN_NOT_SAVE"),onClick:function(){n(),o.close()}},{label:e("COMMON_BUTTON_CANCLE"),onClick:function(){o.close()}}]});else n();this.isCreatedOnce&&this.emitService.emit(this.isCreatedOnce),this.emitService.emit({type:"new-coe-cancel",coeContent:!1})}},e.prototype.emitCloseEvent=function(){if(this.emitService.emit({type:"article::wiki-closeModel",saveBool:this.saveBool}),["update-design-template","create-design-template"].includes(this.model)){var e=new CustomEvent("knowledge_event_listener",{detail:{operation:"knowledge_cancel_create"}});window.dispatchEvent(e)}},e.prototype.getConfirmFunc=function(e){var t=e.parentObj,n=t.id,i=t.sn;this.categoryId=t.kanban_id,this.dictionaryId=n,this.parentSn=i,this.save()},e.prototype.clickOutsideFunc=function(){this.isShowSaveAndReviosionBtn=!1},e.prototype.ShowRevisionDetaillModal=function(){this.saveVersionDisabled=!1,this.isShowRevisionDetailModal=!0,this.versionRemark=null,this.isShowSaveAndReviosionBtn=!1,this.versionTitle=(new Date).toLocaleString()+"  "+this.translate.instant("VERSION")},e.prototype.onSearchWorkitem=function(e){var t=this;e.length<=2||(this.isLoading.workitem=!0,this.knowledgeService.searchWorkitem({view:"to_self",data_type:"tree",sort:{key:"created_time",value:"desc"},first_filters:[{key:"title",operator:"like",value:[e]},{key:"valid",operator:"||",value:[1,-2,-3]},{key:"with_children",operator:"||",value:[!0]},{key:"assigned_domain",operator:"||",value:[this.currentDomain]}]}).subscribe(function(e){t.isLoading.workitem=!1,e&&(t.searchWorkitemList=e.result)},function(){}))},e.prototype.saveArticleAndRevision=function(e){e&&(this.versionDetail={revision_record_title:e.revision_record_title,remark:e.remark,relation:e.relations},this.save()),this.isShowRevisionDetailModal=!1},e.prototype.isNullOrUndefined=function(e){return null==e},e.prototype.showPreviewFunc=function(e){this.showPreview=e,this.preview.emit(e)},e.prototype.handleSwitchChange=function(e){this.wideModeSwitch=e,Object(o.c)("wikiWideModeSwitch",JSON.stringify(this.wideModeSwitch)),this.emitService.emit({type:"wiki:doc-table-wide-edit",obj:this.wideModeSwitch})},e.prototype.accessControlShowFunc=function(){this.accessControlShow=!0},e.prototype.closeCallbackFunc=function(e){var t,n=this;this.accessControlShow=!1,Number.isSafeInteger(null==e?void 0:e.visibility)&&(this.visibilityParams=e,this.showVisibility=e.visibility,1===e.visibility&&("category"===this.createFrom?this.showVisibility=this.categoryDetails.visibility:this.knowledgeService.getWikiParentAccess(null===(t=this.articleDetails)||void 0===t?void 0:t.sn).subscribe(function(e){n.showVisibility=e.visibility},function(){})))},e.prototype.getAccessDefault=function(){var e,t,n,i=this;"create-article"===this.visibilityEditModel?(this.visibilityParams.visibility=1,"category"===this.createFrom?1===this.categoryDetails.visibility?this.knowledgeService.getCategoryParentAccess(this.currentDomain,this.categoryDetails.id).subscribe(function(e){i.showVisibility=e.visibility},function(){}):this.knowledgeService.getCategoryAccess(this.categoryDetails.id,this.currentDomain).subscribe(function(e){i.showVisibility=e.visibility},function(){}):(null===(e=this.articleDetails)||void 0===e?void 0:e.sn)&&(1===this.articleDetails.visibility?this.knowledgeService.getWikiParentAccess(null===(t=this.articleDetails)||void 0===t?void 0:t.sn).subscribe(function(e){i.showVisibility=e.visibility},function(){}):this.showVisibility=this.articleDetails.visibility)):this.articleDetails&&(1===this.articleDetails.visibility?this.knowledgeService.getWikiParentAccess(null===(n=this.articleDetails)||void 0===n?void 0:n.sn).subscribe(function(e){i.showVisibility=e.visibility},function(){}):this.showVisibility=this.articleDetails.visibility)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](a.b),i["\u0275\u0275directiveInject"](c.c),i["\u0275\u0275directiveInject"](l.d))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-category-selector"]],inputs:{model:"model",categoryId:"categoryId",dictionaryId:"dictionaryId",workitemArticle:"workitemArticle",currentDomain:"currentDomain",contentChanged:"contentChanged",showPreview:"showPreview",wikiEditFunction:"wikiEditFunction",saveBool:"saveBool",isCreatedOnce:"isCreatedOnce",fullScreenCtrl:"fullScreenCtrl",hiddenPreviewBtn:"hiddenPreviewBtn",isTable:"isTable",articleDetails:"articleDetails",categoryDetails:"categoryDetails",visibilityEditModel:"visibilityEditModel",createFrom:"createFrom",showVisibilityEdit:"showVisibilityEdit"},outputs:{selected:"selected",preview:"preview"},decls:27,vars:27,consts:[[1,"t-a-r","warp"],["class","m-r-8 cursor-pointer visibility-per",3,"click",4,"ngIf"],[1,"line-sm"],["class","cursor-pointer create-to m-r-8 position-r",3,"hidden","click",4,"ngIf"],["class","btn-group m-r-8 position-r doc-save-btn","clickElementOutside","",3,"hidden","clickOutside",4,"ngIf"],["class","btn-group m-r-8",3,"hidden",4,"ngIf"],[1,"edit-box-save","m-r-12"],[1,"btn-group","m-l-10"],[1,"m-l-xs","btn","btn-xs","btn-info","wiki-edit-btn",3,"click"],[1,"iconfont","icon-close","p-r-5",2,"font-weight","bold"],[3,"textContent"],["class","cursor-pointer cancel position-r",3,"hidden","click",4,"ngIf"],["class","iconfont icon-more icon-more-btn icon-color m-l-8 cursor-pointer","nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu",4,"ngIf"],["class","move-to t-a-l position-r","style","position: absolute; height: 500px","id","create-select-directory",4,"ngIf"],["moreMenu","nzDropdownMenu"],[1,"edit-more-menu"],[1,"edit-operate-item","switch-item"],[1,"operate-text","m-r-10",3,"textContent"],["nz-menu-item","",1,"switch-style"],["nzSize","small",3,"ngModel","ngModelChange"],[1,"edit-operate-item","wide-mode-tips",3,"textContent"],[4,"ngIf"],[1,"m-r-8","cursor-pointer","visibility-per",3,"click"],["class","visibiliby-detail",4,"ngIf"],[1,"visibiliby-detail"],[1,"cursor-pointer","create-to","m-r-8","position-r",3,"click"],["clickElementOutside","",1,"btn-group","m-r-8","position-r","doc-save-btn",3,"clickOutside"],[1,"m-l-xs","btn","btn-xs","btn-info",3,"click"],[1,"iconfont","icon-check","p-r-5"],["class","btn btn-xs btn-info revise-edit",3,"click",4,"ngIf"],["class","save-and-revision","style","position: absolute",3,"textContent","click",4,"ngIf"],["class","revision-detail-wrapper",4,"ngIf"],[1,"btn","btn-xs","btn-info","revise-edit",3,"click"],[1,"caret"],[1,"save-and-revision",2,"position","absolute",3,"textContent","click"],[1,"revision-detail-wrapper"],[3,"currentDomain","saveRevision"],[1,"iconfont","icon-save","cursor-pointer",2,"margin-right","0"],[1,"btn-group","m-r-8",3,"hidden"],[1,"fa","fa-eye","p-r-5"],[1,"cursor-pointer","cancel","position-r",3,"click"],["nz-dropdown","","nzTrigger","click",1,"iconfont","icon-more","icon-more-btn","icon-color","m-l-8","cursor-pointer",3,"nzDropdownMenu"],["id","create-select-directory",1,"move-to","t-a-l","position-r",2,"position","absolute","height","500px"],[3,"disabledNode","currentCategory","currentDomain","tipInfo","wikiEditFunction","modelShowCloseChange","modelShowVariableChange"],["nzWrapClassName","access-control-modal",3,"nzVisible","nzClosable","nzFooter","nzWidth"],[2,"width","600px","height","100%"],[3,"articleDetails","visibilityEditModel","createFrom","categoryDetails","visibilityParams","closeCallback"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,_,5,4,"div",1),i["\u0275\u0275element"](2,"div",2),i["\u0275\u0275template"](3,M,3,5,"span",3),i["\u0275\u0275template"](4,I,8,8,"div",4),i["\u0275\u0275template"](5,k,4,5,"span",3),i["\u0275\u0275template"](6,T,5,6,"div",5),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275elementStart"](8,"div",7),i["\u0275\u0275elementStart"](9,"button",8),i["\u0275\u0275listener"]("click",function(){return t.showPreviewFunc(!1)}),i["\u0275\u0275element"](10,"span",9),i["\u0275\u0275element"](11,"span",10),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,A,3,5,"span",11),i["\u0275\u0275template"](14,D,1,1,"span",12),i["\u0275\u0275template"](15,L,2,8,"div",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"nz-dropdown-menu",null,14),i["\u0275\u0275elementStart"](18,"div",15),i["\u0275\u0275elementStart"](19,"div",16),i["\u0275\u0275element"](20,"span",17),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementStart"](22,"div",18),i["\u0275\u0275elementStart"](23,"nz-switch",19),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.wideModeSwitch=e})("ngModelChange",function(e){return t.handleSwitchChange(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](24,"div",20),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](26,V,4,9,"ng-container",21)),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!(i["\u0275\u0275pureFunction0"](21,N).includes(t.model)&&t.isNullOrUndefined(t.dictionaryId))&&(t.showVisibilityEdit||"create-article"==t.visibilityEditModel)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pureFunction0"](22,N).includes(t.model)&&t.isNullOrUndefined(t.dictionaryId)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update-article"===t.model||"update-excel"===t.model),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update-event-report"===t.model||"update-template"===t.model||"create-template"===t.model||"create-design-template"===t.model||"update-design-template"===t.model||i["\u0275\u0275pureFunction0"](23,N).includes(t.model)&&!t.isNullOrUndefined(t.dictionaryId)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pureFunction0"](24,R).includes(t.model)),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("hidden",!t.showPreview),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](12,15,"COMMON_BTN_RETURN")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","update-event-report"!==t.model),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](25,j).includes(t.model)&&t.canSwitchWide),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.showSelectCategoryDirectory&&i["\u0275\u0275pureFunction0"](26,N).includes(t.model)&&t.isNullOrUndefined(t.dictionaryId)),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](21,17,"WIDE_MODE")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.wideModeSwitch),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](25,19,"WIDE_MODE_DESCRIBE")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.accessControlShow))},directives:[s.n,d.d,p.a,u.e,m.a,g.k,g.l,h.a,f.a,d.b,v.a,l.a,C.a],pipes:[c.b],styles:[".warp[_ngcontent-%COMP%]{justify-content:flex-end;height:50px}.visibility-per[_ngcontent-%COMP%], .warp[_ngcontent-%COMP%]{display:flex;align-items:center}.visibility-per[_ngcontent-%COMP%]{text-align:left;line-height:1.5;flex-direction:column;color:#5f5f5f;font-size:12px}.visibility-per[_ngcontent-%COMP%]   .visibiliby-detail[_ngcontent-%COMP%]{font-weight:700}.visibility-per[_ngcontent-%COMP%]   .visibiliby-detail[_ngcontent-%COMP%]:hover{text-decoration:underline}.visibility-per[_ngcontent-%COMP%] + .line-sm[_ngcontent-%COMP%]{display:block}.line-sm[_ngcontent-%COMP%]{height:25px;margin:0 8px;width:1px;background-color:#ccc;display:none}  .access-control-modal .ant-modal-body{padding:0!important}.create-to[_ngcontent-%COMP%]{padding:4px;background-color:#23c6c8f8;color:#fff;border-radius:4px;display:inline-flex;align-items:center;width:80px;height:30px;justify-content:center}.move-to[_ngcontent-%COMP%]{position:absolute;z-index:1000;right:62px;top:30px;background:#fff;border:1px solid #d7d7d7;width:300px}.cancel[_ngcontent-%COMP%]{padding:0 12px;border-radius:3px;display:inline-block;height:30px;line-height:30px;background:#eee;color:#676a6c}.btn-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.btn-group[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{color:#23c6c8;background-color:#fff;border-color:#23c6c8;padding:0 15px;height:30px;line-height:25px}.btn-group[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{vertical-align:middle}.btn-group[_ngcontent-%COMP%]   .revise-edit[_ngcontent-%COMP%]{margin:0;background-color:#fff;color:#23c6c8;border-left:none;padding-left:5px;padding-right:5px}.btn-group[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%], .btn-group[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%]:active, .btn-group[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%]:focus{color:#676a6c!important;border-color:#e4e4e4!important;background-color:#fff!important}.save-and-revision[_ngcontent-%COMP%]{background-color:#fff;right:0;top:33px;cursor:pointer;z-index:1001;text-align:center;padding:8px 4px;width:128px}.revision-detail-wrapper[_ngcontent-%COMP%], .save-and-revision[_ngcontent-%COMP%]{border:1px solid #bbb;box-shadow:3px 3px 3px #bbb}.revision-detail-wrapper[_ngcontent-%COMP%]{position:fixed;width:510px;background:#fff;z-index:1000;padding:10px;top:100px;right:17px;font-size:15px}.revision-detail-wrapper[_ngcontent-%COMP%]   .tip-info[_ngcontent-%COMP%]{width:110px}.revision-detail-wrapper[_ngcontent-%COMP%]   .subject-inp[_ngcontent-%COMP%]{padding:0 5px;min-height:32px;width:100%;outline:none;border:1px solid #e5e6e7;font-size:14px}.revision-detail-wrapper[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]{min-height:32px;width:390px;display:flex;align-items:center}.revision-detail-wrapper[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   .version-message[_ngcontent-%COMP%]{width:100%;border:1px solid #e5e6e7;outline:none;resize:none;padding:0 5px;font-size:15px}.edit-box-save[_ngcontent-%COMP%]{right:0}  .confirm-cancel-modal .ant-modal-content{border-radius:4px;height:160px;position:relative;box-shadow:0 0 8px rgba(0,0,0,.2)}  .confirm-cancel-modal .ant-modal-header{padding:20px 0 16px 20px;border-bottom:none}  .confirm-cancel-modal .ant-modal-header .ant-modal-title{font-size:20px;color:#333}  .confirm-cancel-modal .ant-modal-body{padding-left:20px;font-size:14px;color:#676a6c}  .confirm-cancel-modal .ant-modal-footer{position:absolute;bottom:32px;right:32px;padding:0;border-top:none}  .confirm-cancel-modal .ant-modal-footer button{margin-right:12px;margin-left:0}  .confirm-cancel-modal .ant-modal-footer button:first-child{background:#23c6c8;color:#fff}  .confirm-cancel-modal .ant-modal-footer button:last-child{margin-right:0}.icon-more-btn[_ngcontent-%COMP%]{display:inline-block;height:30px;line-height:30px}.edit-more-menu[_ngcontent-%COMP%]{width:180px;background:#fff}.edit-more-menu[_ngcontent-%COMP%]   .edit-operate-item[_ngcontent-%COMP%]{padding:8px 12px 8px 15px;display:flex;align-items:center}.edit-more-menu[_ngcontent-%COMP%]   .wide-mode-tips[_ngcontent-%COMP%]{color:#999;padding:0 12px 8px 15px;border-bottom:1px solid #e8e8e8;font-size:12px}.edit-more-menu[_ngcontent-%COMP%]   .switch-item[_ngcontent-%COMP%]{justify-content:space-between}[_nghost-%COMP%]     #create-select-directory .category-item-desc{margin-top:5px}"]}),e}()},xGaz:function(e,t,n){"use strict";n.d(t,"a",function(){return L});var i=n("mrSG"),o=n("fXoL"),r=n("y7eE"),a=n("nYR2"),c=n("XNiG"),l=n("l5mm"),s=n("PqYM"),d=n("6eBy"),p=n("A/Mn"),u=n("bNXi"),m=n("sYmb"),g=n("dEAy"),h=n("tyNb"),f=n("UJq8"),v=n("ofXK"),C=n("1JWf"),b=n("QWGN"),x=n("mLQb"),y=n("tSLD"),w=n("lOo3"),O=n("3Pt+"),_=["isAnonymousComment"];function M(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",15),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.CommentsList.length)}}function S(e,t){if(1&e&&o["\u0275\u0275element"](0,"comment-item",20),2&e){var n=o["\u0275\u0275nextContext"](),i=n.$implicit,r=n.index,a=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("item",i)("index",r)("updateComment",a.updateComment)("isEditingComment",a.isEditingComment&&"wiki"===(null==i||null==i.comments[0]?null:i.comments[0].category))}}function P(e,t){if(1&e&&o["\u0275\u0275element"](0,"annotation-item",21),2&e){var n=o["\u0275\u0275nextContext"](),i=n.$implicit,r=n.index,a=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("item",i)("index",r)("creatorId",a.creatorId)("articleId",a.articleId)("isAnonymous",a.isAnonymous)}}function E(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",17),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).toggeleActiveClass(e)}),o["\u0275\u0275template"](2,S,1,4,"comment-item",18),o["\u0275\u0275template"](3,P,1,5,"annotation-item",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](i.commentGuid&&i.commentGuid==r.activeCommentGuid?"active-annotation-styl":""),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.commentGuid&&i.comments&&i.comments[0]),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.commentGuid)}}function I(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275template"](1,E,4,4,"div",16),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.CommentsList)}}function k(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",22),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"EMPTY_TIP")," "))}function T(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"espace-share",23),o["\u0275\u0275listener"]("modelShowCloseChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getModelShowCtrl(e)})("shareDetailChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().shareData=e})("espaceParamsChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().espaceParams=e}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("currentUserId",i.current_user_id)("currentDomain",i.currentDomain)("sn",i.sn)("shareDetail",i.shareData)("espaceParams",i.espaceParams)}}function A(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",24),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().showTextarea()}),o["\u0275\u0275element"](1,"comment-input",25),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("readOnly",!1)("needSendIcon",!1))}function D(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",26),o["\u0275\u0275elementStart"](1,"div",27),o["\u0275\u0275elementStart"](2,"div",28),o["\u0275\u0275elementStart"](3,"textarea",29),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().newCommentText=e}),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",30),o["\u0275\u0275elementStart"](6,"span",31),o["\u0275\u0275elementStart"](7,"input",32),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().isNotify=e})("change",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().handlerNotifyChange()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"span"),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"span",31),o["\u0275\u0275elementStart"](12,"input",33,34),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().isAnonymous=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"span"),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"button",35),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().postComment()}),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](4,8,"KNOWLEDGE_BASE_COMMENT_PLACEHOLDER")),o["\u0275\u0275property"]("ngModel",i.newCommentText),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",i.isNotify),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](10,10,i.isCoe?"NOTIFY_AUTHOR_AND_COE":"NOTIFY_AUTHOR")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",i.isAnonymous),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](16,12,"ANONYMOUS_POST")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!i.newCommentText.length),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](19,14,"COMMENT"))}}var z=function(e){return{height:e}},L=function(){function e(e,t,n,i,r,a){this.knowledgeService=e,this.notification=t,this.translate=n,this.modal=i,this.activeRoute=r,this.emitService=a,this.isCoe=!1,this.creatorId="",this.onlyShowAnnotation=!1,this.isEventReport=!1,this.close=new o.EventEmitter,this.updateComment={content:""},this.current_item_id=null,this.showShareTip=!1,this.refreshContentEventSubject=new c.a,this.getContentEventSubject=new c.a,this.isNotify=!1,this.showTextareaCtrl=!1,this.firstClick=!0,this.cancelEditComment=function(e){this.updateComment.content=e.content,this.isEditingComment=!1},this.decodeHtml=function(e){return e?e.replace(/&lt;/g,"<").replace(/&gt;/g,">"):""}}return e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe(),this.eventSubscriber.unsubscribe()},e.prototype.ngOnInit=function(){var e,t,n=this;this.activeRoute.paramMap.subscribe(function(e){n.currentDomain=n.currentDomain||Number(n.activeRoute.snapshot.parent.params.domain_id),n.sn=n.sn||e.get("sn")}),this.CommentsList=[],this.newCommentText="",this.isAnonymous=!1,this.isEditingComment=!1,this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(e){e&&(n.current_user_id=e.user_id,n.current_user_account=e.huawei_id,n.currentUsername=e.user_name)}),this.articleId&&((null===(e=this.reversionCtrl)||void 0===e?void 0:e.isOnlyShowCountersign)||(null===(t=this.reversionCtrl)||void 0===t?void 0:t.isOnlyShowAnnotation)?this.getReversionComments():this.getComments(this.articleId)),this.commentParam&&(this.shared_by=this.commentParam.indexOf("_")>-1?this.commentParam.split("_")[1]:this.commentParam,this.comment_id=this.commentParam.indexOf("_")>-1?this.commentParam.split("_")[0]:"",this.knowledgeService.getUserInfo(this.shared_by).subscribe(function(e){n.sharedUserInfo=e},function(){}),this.showShareTip=!0),this.eventSubscriber=this.emitService.eventEmit.subscribe(function(e){if(e&&e.type)switch(e.type){case"wiki-comment::topComment":n.topComment(e.comment_item,e.index);break;case"wiki-comment::likeComment":n.likeComment(e.comment_item);break;case"wiki-comment::getVotersIdArray":n.getVotersIdArray(e.voters);break;case"wiki-comment::editComment":n.editComment(e.comment_item);break;case"wiki-comment::shareComment":n.shareComment(e.item);break;case"wiki-comment::deleteComment":n.deleteComment(e.comment_id);break;case"wiki-comment::cancelEditComment":n.cancelEditComment(e.item);break;case"wiki-comment::updateCommentContent":n.updateCommentContent(e.item);break;case"article-comment::add-annotation-after":n.getCommentsPosition();break;case"article-comment::addAnnotation":case"wiki::close-annotation-discussion":n.getComments(n.articleId),n.findFinishedDom(e.commentGuid,"","annotation"),n.activeCommentGuid=e.commentGuid;break;case"article-comment::clickAnnotationSpan":n.findFinishedDom(e.commentGuid,"","annotation"),n.activeCommentGuid=e.commentGuid;break;case"review-countersign-refresh-comment":n.getComments(n.articleId);break;case"wiki-comment::replyAnnotationCommentPostSuccess":n.refreshDataAfterAnnotationReply();break;case"wiki-comment::deleteAnnotationComment":n.judgeAnnotationDelete(e),n.getCommentsPosition()}})},e.prototype.ngOnChanges=function(e){var t,n,i,o,r=this;(null===(t=null==e?void 0:e.articleId)||void 0===t?void 0:t.currentValue)&&(null===(n=null==e?void 0:e.articleId)||void 0===n?void 0:n.previousValue)&&(null===(i=null==e?void 0:e.articleId)||void 0===i?void 0:i.currentValue)!=(null===(o=null==e?void 0:e.articleId)||void 0===o?void 0:o.previousValue)&&(e.articleId.currentValue&&(this.isNotify=!1,this.isAnonymous=!1,this.newCommentText="",setTimeout(function(){r.refreshContentEventSubject.next({refreshContent:r.newCommentText})})),this.getComments(this.articleId)),e.reversionCtrl&&this.getReversionComments()},e.prototype.getCommentsPosition=function(){var e=this,t=document.querySelector("#scrollParentWikiComment"),n=t.scrollTop;this.knowledgeService.searchComments({entity_id:this.articleId}).subscribe(function(i){i&&i.data?(e.CommentsList=e.filterArrData(i),e.emitService.emit({type:"comment:refresh-num"})):e.CommentsList=[],setTimeout(function(){t.scrollTop=n},300)},function(){})},e.prototype.toggeleActiveClass=function(e){e.commentGuid&&(this.activeCommentGuid=e.commentGuid,this.emitService.emit({type:"article-comment::annotation-item-click",commentGuid:this.activeCommentGuid}))},e.prototype.commentImgAddLink=function(){for(var e=document.getElementById("scrollParentWikiComment").getElementsByTagName("img"),t=0;t<e.length;t++)e[t].addEventListener("click",this.imgAddLink)},e.prototype.imgAddLink=function(e){var t=window.location.origin+e.currentTarget.getAttribute("src");window.open(t,"_blank")},e.prototype.findFinishedDom=function(e,t,n){var i=this,o=Object(l.a)(100).pipe(Object(d.a)(function(e){return Object(s.a)(3*e)})).subscribe(function(r){n&&"annotation"==n?document.querySelector("[data-highlight-comment-uuid="+e+"]")&&(setTimeout(function(){i.positionActiveElement(e,"scrollParentArticle",n)}),o.unsubscribe()):n&&"comment"==n&&document.querySelector('[id="'+e+']"')&&(setTimeout(function(){t&&"img"==t?i.commentImgAddLink():i.positionActiveElement(e,"scrollParentArticle",n)}),o.unsubscribe())})},e.prototype.positionActiveElement=function(e,t,n){var i,o,r,a,c,l,s=document.getElementById("scrollParentWikiComment"),d=document.getElementById("topPositionWikiComment").getBoundingClientRect(),p=document.getElementById("bottomPositionWikiComment"),u=p&&p.getBoundingClientRect(),m=s.getBoundingClientRect();if("annotation"==n)o=(i=document.querySelector("#"+t))&&i.scrollTop,a=(r=document.querySelector("[data-highlight-uuid="+e+"]"))&&r.offsetTop,c=document.querySelector("[data-highlight-comment-uuid="+e+"]").getBoundingClientRect(),l=Math.abs(c.top-d.top)-(a-o);else if("comment"==n){var g=document.getElementById(e).getBoundingClientRect();Math.abs(g.top-d.top)}var h=u.top-d.top-m.height+20;l>h&&(l=h),s.scrollTop=l},e.prototype.getUserDisplayName=function(e){return Object(r.a)(e)?null:"en"==this.translate.currentLang&&e.name_full?e.name_full:e.name+" "+e.account},e.prototype.shareComment=function(e){this.espaceCommentShareCtrl=!0,this.shareData={id:this.articleId,type:e.type,category:e.category+"-comment",entity_type:"wiki"},this.espaceParams={comment_id:e.id}},e.prototype.getModelShowCtrl=function(e){this.espaceCommentShareCtrl=!1},e.prototype.getComments=function(e){var t=this;this.loading=!0;var n={entity_id:this.articleId};this.isEventReport&&(n.type="anonymize"),this.knowledgeService.searchComments(n).subscribe(function(e){e&&e.data&&(t.sortValue(t.filterArrData(e)),t.commentParam&&setTimeout(function(){t.findFinishedDom(t.comment_id,"","comment")}))},function(){})},e.prototype.getReversionComments=function(){var e=this;this.knowledgeService.queryBaseLineComments({entity_id:this.articleId,baseline_id:this.baselineId}).subscribe(function(t){e.CommentsList=(null==t?void 0:t.data)?e.filterArrData(t):[]},function(){})},e.prototype.filterArrData=function(e){var t,n,o=this,r=e.data;return(null===(t=this.reversionCtrl)||void 0===t?void 0:t.isOnlyShowAnnotation)&&(r=r.filter(function(e){return"annotation"===e.commentType})),(null===(n=this.reversionCtrl)||void 0===n?void 0:n.isOnlyShowCountersign)&&(r=r.filter(function(e){return"countersign"===e.commentType})),r.forEach(function(e){var t;if(e.commentGuid){var n=[];e.comments.forEach(function(e){o.flatAnnotationChildren(e,n)}),n.reduce(function(e,t){return e.includes(t.parent_id)||e.push(t.parent_id),e},[]).map(function(e){return n.filter(function(t){return t.parent_id===e})}).forEach(function(t){var n,o=e.comments.findIndex(function(e){return e.id===t[0].parent_id});(n=e.comments).splice.apply(n,Object(i.i)([o+1,0],t))})}e.comments&&(null===(t=e.comments)||void 0===t||t.forEach(function(t){t.commentType=e.commentType}))}),r},e.prototype.flatAnnotationChildren=function(e,t){var n,i=this;(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.forEach(function(n){n.parentObj=e,n.replayUserName=e.submitted_by.name,n.replayUserAccount=e.submitted_by.account,t.push(n),i.flatAnnotationChildren(n,t)})},e.prototype.sortValue=function(e){this.CommentsList=e;var t=this.CommentsList&&this.CommentsList.length;if(this.emitService.emit({event:"comment:refresh-num"}),this.loading=!1,t>0){var n=this.CommentsList[t-1];n.commentGuid?this.findFinishedDom(n.commentGuid,"","annotation"):this.findFinishedDom(n.comments[0].id,"img","comment")}},e.prototype.showTextarea=function(){var e=this;this.showTextareaCtrl=!0,this.firstClick=!0,setTimeout(function(){e.firstClick=!1,document.querySelector("#comment-input-textarea").focus()},500)},e.prototype.refreshDataAfterAnnotationReply=function(){this.newCommentText="",this.emitService.emit({type:"comment:refresh-num"}),this.getComments(this.articleId),this.showTextareaCtrl=!1},e.prototype.postComment=function(){var e=this;if(!Object(r.a)(this.newCommentText)){this.loading=!0;var t,n=filterXSS(this.newCommentText),o={entity_id:this.articleId,category:"wiki",submitted_by:this.current_user_id,content:n,system_add:0,anonymous:this.isAnonymous,sendEspace:this.isNotify,sendCOE:this.isCoe,url:location.href,receiver:this.creatorId};if(this.commentParam){var c={shared_by:this.commentParam.indexOf("_")>-1?this.commentParam.split("_")[1]:this.commentParam};t=Object(i.a)(Object(i.a)({},o),c)}else t=o;this.knowledgeService.postComment(t).pipe(Object(a.a)(function(){e.newCommentText="",setTimeout(function(){e.refreshContentEventSubject.next({refreshContent:e.newCommentText})})})).subscribe(function(t){e.emitService.emit({type:"comment:refresh-num"}),e.getComments(e.articleId),e.notification.success(e.translate.instant("ADD_POST_SUCCESS"),""),e.showTextareaCtrl=!1},function(){}),window.hwa("trackStructEvent",{label:"\u8bc4\u8bba"})}},e.prototype.hiddenFunc=function(){this.firstClick||(this.showTextareaCtrl=!1)},e.prototype.refreshCommentList=function(e,t,n,i){for(var o=0;o<t.length;o++)t[o].comments[0].id==e&&(i&&"delete"==i?t.splice(o,1):t[o].comments[0]=n);var r=t.length;if(this.emitService.emit({event:"comment:refresh-num"}),r>0){var a=this.CommentsList[r-1];a.commentGuid?this.findFinishedDom(a.commentGuid,"","annotation"):this.findFinishedDom(a.comments[0].id,"img","comment")}},e.prototype.deleteComment=function(e){var t=this;this.modal.error({nzTitle:this.translate.instant("COMMENT_DELETE_CONFIRM"),nzContent:"",nzOkText:this.translate.instant("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){t.confirmDelete(e)},nzCancelText:this.translate.instant("COMMON_BUTTON_CANCLE")})},e.prototype.confirmDelete=function(e){var t=this;this.knowledgeService.deleteComment(e).subscribe(function(n){t.notification.success(t.translate.instant("DELETE_SUCCESS"),""),t.refreshCommentList(e,t.CommentsList,null,"delete")},function(){})},e.prototype.topComment=function(e,t){var n,i=this;switch(e.status){case 0:n=2;break;case 2:n=0}var o={content:filterXSS(e.content),user_id:this.current_user_id,id:e.id,status:n};this.knowledgeService.updateComment(e.id,o).subscribe(function(e){2==e.status&&i.notification.success(i.translate.instant("SUCCESSFUL_OPERATION"),""),i.getComments(i.articleId)},function(){})},e.prototype.likeComment=function(e){var t=this,n={voter:Number(this.current_user_id)};this.knowledgeService.updateComment(e.id,n).subscribe(function(n){t.refreshCommentList(e.id,t.CommentsList,n,null)},function(){})},e.prototype.editComment=function(e){this.current_item_id=e.id,e.content=this.decodeHtml(e.content),this.updateComment.content=e.content,this.isEditingComment=!0},e.prototype.updateCommentContent=function(e){var t=this;if(Object(r.a)(e)||!e.id||e.content==this.updateComment.content)return e.content=filterXSS(e.content),void(this.isEditingComment=!1);var n={content:filterXSS(this.updateComment.content),user_id:this.current_user_id,id:e.id,status:e.status};this.knowledgeService.updateComment(e.id,n).subscribe(function(e){t.getCommentsPosition(),t.notification.success(t.translate.instant("SAVEED_SUCCESS"),""),t.isEditingComment=!1},function(){t.isEditingComment=!1})},e.prototype.getVotersIdArray=function(e){return Object(r.a)(e)?[]:e.map(function(e){return e.id})},e.prototype.closePanel=function(){var e=this;setTimeout(function(){e.close.emit()})},e.prototype.handlerNotifyChange=function(){this.isNotify?(this.isAnonymousComment.nativeElement.setAttribute("disabled",""),this.isAnonymous=!1):this.isAnonymousComment.nativeElement.removeAttribute("disabled","")},e.prototype.judgeAnnotationDelete=function(e){1===this.CommentsList.find(function(t){return t.commentGuid===e.commentGuid}).comments.filter(function(e){return e.content}).length&&(this.emitService.emit({type:"wiki::close-annotation",commentGuid:e.commentGuid}),this.emitService.emit({type:"comment:refresh-num"}))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](p.b),o["\u0275\u0275directiveInject"](u.b),o["\u0275\u0275directiveInject"](m.c),o["\u0275\u0275directiveInject"](g.d),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](f.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["article-wiki-comment"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](_,1),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.isAnonymousComment=n.first)},inputs:{articleId:"articleId",commentParam:"commentParam",isCoe:"isCoe",creatorId:"creatorId",onlyShowAnnotation:"onlyShowAnnotation",baselineId:"baselineId",reversionCtrl:"reversionCtrl",currentDomain:"currentDomain",sn:"sn",isEventReport:"isEventReport"},outputs:{close:"close"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:17,vars:13,consts:[[1,"wiki-comment"],[1,"select-wrapper"],[1,"iconfont","icon-to-right","margin-more-span",3,"click"],[1,"m-l-10"],["class","m-l-10 comment-num",4,"ngIf"],["id","scrollParentWikiComment",1,"comment-list",3,"ngStyle"],["id","topPositionWikiComment",1,"position-div-styl"],[4,"ngIf"],["class","text-center",4,"ngIf"],["id","bottomPositionWikiComment",1,"position-div-styl"],[3,"currentUserId","currentDomain","sn","shareDetail","espaceParams","modelShowCloseChange","shareDetailChange","espaceParamsChange",4,"ngIf"],["clickElementOutside","",1,"comment-input",3,"hidden","clickOutside"],[1,"comment-input-wrapper"],["class","comment-input-styl",3,"click",4,"ngIf"],["class","comment-input-styl",4,"ngIf"],[1,"m-l-10","comment-num"],[4,"ngFor","ngForOf"],[1,"comment-annotation-styl",3,"click"],[3,"item","index","updateComment","isEditingComment",4,"ngIf"],[3,"item","index","creatorId","articleId","isAnonymous",4,"ngIf"],[3,"item","index","updateComment","isEditingComment"],[3,"item","index","creatorId","articleId","isAnonymous"],[1,"text-center"],[3,"currentUserId","currentDomain","sn","shareDetail","espaceParams","modelShowCloseChange","shareDetailChange","espaceParamsChange"],[1,"comment-input-styl",3,"click"],[3,"readOnly","needSendIcon"],[1,"comment-input-styl"],[1,"comment-post"],[1,"flex-box","full-width"],["id","comment-input-textarea",1,"textarea-comment-style",3,"ngModel","placeholder","ngModelChange"],[1,"txt-r","p-h-5","comment-post-btns"],[1,"vertical-middle","comment-button-container"],["type","checkbox",1,"vertical-top","input-middle-margin",3,"ngModel","ngModelChange","change"],["type","checkbox",1,"vertical-top","input-middle-margin",3,"ngModel","ngModelChange"],["isAnonymousComment",""],[1,"btn","btn-info","btn-sm","f-12","save-btn","m-r-10",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"span",2),o["\u0275\u0275listener"]("click",function(){return t.closePanel()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",3),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,M,2,1,"span",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275element"](8,"div",6),o["\u0275\u0275template"](9,I,2,1,"div",7),o["\u0275\u0275template"](10,k,3,3,"div",8),o["\u0275\u0275element"](11,"div",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,T,1,5,"espace-share",10),o["\u0275\u0275elementStart"](13,"div",11),o["\u0275\u0275listener"]("clickOutside",function(){return t.hiddenFunc()}),o["\u0275\u0275elementStart"](14,"div",12),o["\u0275\u0275template"](15,A,2,2,"div",13),o["\u0275\u0275template"](16,D,20,16,"div",14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,9,"ALL_COMMENTS")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.CommentsList&&t.CommentsList.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](11,z,t.reversionCtrl?"calc(100% - 105px)":"")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.CommentsList&&t.CommentsList.length>0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.CommentsList||t.CommentsList&&0==t.CommentsList.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.espaceCommentShareCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden",(null==t.reversionCtrl?null:t.reversionCtrl.isOnlyShowCountersign)||(null==t.reversionCtrl?null:t.reversionCtrl.isOnlyShowAnnotation)||t.isEventReport),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.showTextareaCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showTextareaCtrl))},directives:[v.n,v.o,C.a,v.m,b.a,x.a,y.a,w.a,O.d,O.k,O.l,O.c],pipes:[m.b],styles:[".wiki-comment[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}.wiki-comment[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]{height:55px;display:flex;align-items:center;top:0;left:0}.wiki-comment[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .margin-more-span[_ngcontent-%COMP%]{margin-left:20px;font-size:16px;cursor:pointer}.wiki-comment[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .comment-num[_ngcontent-%COMP%]{color:#999}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]{height:calc(100% - 145px);position:relative;left:0;overflow-y:scroll;padding:0 20px 4px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .active-annotation-styl[_ngcontent-%COMP%]{border:1px solid #23c6c8!important}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .position-div-styl[_ngcontent-%COMP%]{height:1px;width:100%;background:transparent}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dbdbdb;border-radius:5px;box-shadow:none;margin-bottom:16px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]{padding:10px 10px 0}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]{display:flex;padding-bottom:10px;position:relative}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-right:10px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]{flex:1}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]{color:#999}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-time[_ngcontent-%COMP%]{font-size:12px;line-height:10px;color:#999}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]{float:right;position:absolute;right:0}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-left:9px;font-size:14px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item.active[_ngcontent-%COMP%]{display:inline-block;color:#23c6c8}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]:hover   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]{display:inline-block}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{padding-left:35px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .is-editing-comment-styl[_ngcontent-%COMP%]{max-width:100%;margin-bottom:3px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .is-editing-comment-styl[_ngcontent-%COMP%]   .textarea-comment-style[_ngcontent-%COMP%]{width:100%;height:197px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-update-textarea[_ngcontent-%COMP%]{height:150px;min-height:80px;width:100%;max-width:100%;border-radius:3px;display:inline-block;border-color:#d7d7d7}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-edit-btns[_ngcontent-%COMP%]{text-align:right;margin-bottom:10px;position:relative}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .user-tip-close[_ngcontent-%COMP%]{font-size:15px;color:#666;position:absolute;top:0;bottom:0;right:5px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-push[_ngcontent-%COMP%]{background:#ffffe0;font-size:10px;position:relative}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.wiki-comment[_ngcontent-%COMP%]   .comment-input[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:0;right:0;background:#fff;box-shadow:4px -2px 4px #e5e5e5}.wiki-comment[_ngcontent-%COMP%]   .comment-input[_ngcontent-%COMP%]   .comment-input-wrapper[_ngcontent-%COMP%]{padding:17px 20px;border-top:1px solid #dbdbdb}.wiki-comment[_ngcontent-%COMP%]   .comment-button-container[_ngcontent-%COMP%]{padding:3px 10px}.wiki-comment[_ngcontent-%COMP%]   .comment-post[_ngcontent-%COMP%]{height:200px;overflow:auto;margin-bottom:10px}.wiki-comment[_ngcontent-%COMP%]   .comment-post[_ngcontent-%COMP%]   .comment-post-input[_ngcontent-%COMP%]{resize:none;flex:1;border-radius:3px;display:inline-block;min-height:80px;border-color:#d7d7d7}.wiki-comment[_ngcontent-%COMP%]   .comment-post[_ngcontent-%COMP%]   .input-middle-margin[_ngcontent-%COMP%]{margin:7px 5px 0 0;cursor:pointer}.wiki-comment[_ngcontent-%COMP%]   .comment-post[_ngcontent-%COMP%]   .flex-box[_ngcontent-%COMP%]   .textarea-comment-style[_ngcontent-%COMP%]{width:100%;height:197px;border:none;outline:none}.wiki-comment[_ngcontent-%COMP%]   .comment-input-styl[_ngcontent-%COMP%]{border:1px solid #dbdbdb;border-radius:5px}"]}),e}()},z4NU:function(e,t,n){"use strict";n.d(t,"m",function(){return i}),n.d(t,"l",function(){return o}),n.d(t,"k",function(){return r}),n.d(t,"o",function(){return a}),n.d(t,"j",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return s}),n.d(t,"q",function(){return d}),n.d(t,"p",function(){return p}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return m}),n.d(t,"i",function(){return g}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return f}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return C}),n.d(t,"n",function(){return b});var i={DEFAULT:"iconfont icon-task-list",Epic:"iconfont icon-crown",Feature:"iconfont icon-cup",Task:"iconfont icon-task",TaskGroup:"iconfont icon-taskGroup",Issue:"iconfont icon-issue",Story:"iconfont icon-story",US:"iconfont icon-story",DistributeRR:"iconfont icon-bulb",OriginalFE:"iconfont icon-cup","04000002":"iconfont icon-bug","04000001":"iconfont icon-bug","02001003":"iconfont icon-task-list",ServiceFeature:"iconfont icon-bulb"},o={DEFAULT:"#333333",Disabled:"#CCCCCC",Story:"#23C6C8",US:"#23C6C8",TaskGroup:"#61B930",Issue:"#FF9191",Task:"#4FB5EE",Epic:"#E79E56",Feature:"#8D71C6",ISSUE:"#FF9191",VULNERABILITY:"#f07d72",VUL:"#f07d72",RR:"#3478ff",IR:"#3fd0b3",BUG:"#ad0202",coe:"#ad0202",COE:"#ad0202",DistributeRR:"#3478ff",OriginalFE:"#8D71C6","01001001":"#3478ff","02001001":"#3fd0b3","02001003":"#2cd5f4","04000001":"#ad0202","04000002":"#ad0202","04000003":"#ad0202","04000004":"#ad0202",ServiceFeature:"#beb616"},r={DEFAULT:"DEFAULT",Story:"Story",RR:"RR",BUG:"BUG",US:"US",TaskGroup:"TG",Issue:"Issue",Task:"Task",Epic:"Epic",Feature:"FE","04000002":"BUG","04000001":"BUG","02001003":"US","04000004":"COE",ServiceFeature:"SF",DistributeRR:"RR",VULNERABILITY:"VUL"},a={POST:"#49cc90",PUT:"#fca130",GET:"#61affe",DELETE:"#f93e3e",HEAD:"#7560c6",OPTIONS:"#5588cc",TRACE:"#f087ba",PATCH:"#23c6c8"},c={DELETE_WORK:"iconfont icon-trash f-17",ADD_UPPER_LEVEL:"iconfont icon-plus f-13",TRANSFER_ITERATION:"iconfont icon-map-pin f-14",LINK_EXISTS_WORK:"iconfont icon-relation f-13",BREAK_DOWN_LEVEL_WORK:"iconfont icon-plus f-13",BREAK_DOWN_LEVEL_TASK:"iconfont icon-multi-layers f-13",DISASSOCIATE_UPPER_LEVEL_ASSOCIATION:"iconfont icon-cancel-association f-13",ACTIVENESS_SHIFTS_JOB:"iconfont icon-circle-clock f-13",BACKLOG_SHIFTS_JOB:"iconfont icon-circle-hourglass f-13"},l={DEFAULT:"RR","01001001":"RR","02001001":"IR","02001002":"SvR","02001003":"US","02001004":"NA","03001001":"EP","03001002":"FE","04001001":"DE","04001002":"DE","04000001":"BUG","04000002":"BUG","04000003":"BUG","05001001":"TX",document:"Wiki",coe:"COE",BUG:"BUG"},s={DEFAULT:"RR-outline","01001001":"RR-outline","02001001":"IR-outline","02001002":"SVR-outline","02001003":"story-outline","02001004":"undefined-outline","03001001":"epic-outline","03001002":"feature-outline","04001001":"bug-outline","04001002":"bug-outline","04000001":"bug-outline","04000002":"bug-outline","04000003":"bug-outline","05001001":"TX-outline"},d={DEFAULT:"iconfont icon-clock",TODO:"iconfont icon-Untreated",DOING:"iconfont icon-processing",DONE:"iconfont icon-completed","\u5f85\u5904\u7406":"iconfont icon-Untreated","\u5904\u7406\u4e2d":"iconfont icon-processing","\u5df2\u5b8c\u6210":"iconfont icon-completed","\u8bbe\u8ba1":"iconfont icon-design","\u5f00\u53d1":"iconfont icon-develop","\u6d4b\u8bd5":"iconfont icon-test","\u53d1\u5e03":"iconfont icon-publish","\u5df2\u4e0a\u7ebf":"iconfont icon-online","\u95ed\u73af":"iconfont icon-completed",TRANSFER:"fa fa-line-chart",SUBMITTED:"iconfont icon-Untreated",ACCEPTED:"iconfont icon-completed",REJECTED:"iconfont icon-del",CANCEL:"iconfont icon-del",VULN_INIT:"iconfont icon-Untreated",VULN_CHANGED:"iconfont icon-completed",VULN_PUBLISHED:"iconfont icon-publish",VULN_UNINVOLVED:"iconfont icon-silence",VULN_HOLD:"iconfont icon-circle-pause",VULN_CLOSE:"iconfont icon-completed",VULN_BLOCK:"iconfont icon-circle-pause",SF_STATUS_DESIGN:"iconfont icon-assembly-line",SF_STATUS_DEVELOPING:"iconfont icon-code-development",SF_STATUS_TESTING:"iconfont icon-bottle",SF_STATUS_RELEASED:"iconfont icon-commercial-mark",SF_STATUS_CLOSE:"iconfont icon-banned"},p={DEFAULT:"#23C6C8",TODO:"#F9B37D",DOING:"#F9B37D",DONE:"#AAAAAA","\u5f85\u5904\u7406":"#F9B37D","\u5904\u7406\u4e2d":"#23C6C8","\u5df2\u5b8c\u6210":"#AAAAAA","\u8bbe\u8ba1":"#4FB5EE","\u5f00\u53d1":"#528DE6","\u6d4b\u8bd5":"#FF7E86","\u53d1\u5e03":"#23C6C8","\u5df2\u4e0a\u7ebf":"#1AB394","\u95ed\u73af":"#AAAAAA",TRANSFER:"#23C6C8",SUBMITTED:"#F9B37D",ACCEPTED:"#23C6C8",REJECTED:"#FF7E86",CANCEL:"#999999",REQ_STATUS_SUBMIT:"#ffd40c",REQ_STATUS_ANALYSIS:"#ff9b0c",REQ_STATUS_UNDETERMINED:"#ba80d5",REQ_STATUS_PLAN:"#0cd4ff",REQ_STATUS_DEVELOPING:"#0cacff",REQ_STATUS_ONLINE:"#337adb",REQ_STATUS_DONE:"#1ab394",REQ_STATUS_RETURNED:"#ec4758",REQ_STATUS_RELEASE:"#23c6c8",ISSUE_STATUS_SUBMIT:"#ffd40c",ISSUE_STATUS_ANALYSIS:"#ff9b0c",ISSUE_STATUS_FIXING:"#0cacff",WORKITEM_STATUS_PENDING:"#F9B37D",WORKITEM_STATUS_DESIGN:"#4FB5EE",WORKITEM_STATUS_IN_PROGRESS:"#23C6C8",WORKITEM_STATUS_DEVELOPING:"#528DE6",WORKITEM_STATUS_TESTING:"#FF7E86",WORKITEM_STATUS_RELEASED:"#23C6C8",WORKITEM_STATUS_ONLINE:"#1AB394",WORKITEM_STATUS_CLOSED:"#adadad",ISSUE_STATUS_FIXING_PLANNING:"#0cacff66",ISSUE_STATUS_FIXING_CODE:"#0cacff99",ISSUE_STATUS_FIXING_TEST:"#0cacffcc",ISSUE_STATUS_FIXING_DONE:"#0cacff",ISSUE_STATUS_REGRESSION_TEST:"#337adb",ISSUE_STATUS_VERIFYING:"#337adb",ISSUE_STATUS_DONE:"#1ab394",ISSUE_STATUS_RETURNED:"#ec4758",NEGATIVE_STATUS_DISTRIBUTION:"#ffaa00",NEGATIVE_STATUS_ANALYSIS:"#5588cc",NEGATIVE_STATUS_IMPROVE:"#1ab394",NEGATIVE_STATUS_APPLYING_CLOSE:"#ff7e86",NEGATIVE_STATUS_CLOSED:"#aaaaaa",NEGATIVE_STATUS_SUSPEND:"#ff7d63",VULN_INIT:"#F9B37D",VULN_CHANGED:"#1AB394",VULN_PUBLISHED:"#23C6C8",VULN_UNINVOLVED:"#ff7d63",VULN_HOLD:"#AAA",VULN_CLOSE:"#999",VULN_BLOCK:"#AAA",COE_STATUS_DISTRIBUTION:"#ffaa00",COE_STATUS_ANALYSIS:"#5588cc",COE_STATUS_IMPROVE:"#1ab394",COE_STATUS_APPLYING_CLOSE:"#ff7e86",COE_STATUS_CLOSED:"#aaaaaa",COE_STATUS_SUSPEND:"#ff7d63",NORMAL:"#000000A6",TO_BE_EXPIRED:"#F9B37D",EXPIRED:"#f07d72",COE_IMPROVE_DOING:"#23C6C8",COE_IMPROVE_DONE:"#AAAAAA",SF_STATUS_DESIGN:"#ffaa00",SF_STATUS_DEVELOPING:"#23C6C8",SF_STATUS_TESTING:"#4fb5ee",SF_STATUS_RELEASED:"#a595e5",SF_STATUS_CLOSE:"#aaaaaa"},u={DEFAULT:"iconfont icon-clock",RAT_IN_PROGRESS:"iconfont icon-processing",RAT_ENDED:"iconfont icon-completed"},m={DEFAULT:"#676A6C",RAT_IN_PROGRESS:"#F9B37D",RAT_ENDED:"#AAAAAA"},g={"02003001":"text-danger","02003002":"text-warning","02003003":"text-info","02003004":"text-aaaaaa","04008004":"text-danger","04008003":"text-warning","04008002":"text-info","04008001":"text-aaaaaa"},h={DEFAULT:"workitem",Epic:"workitem",Feature:"workitem",ServiceFeature:"workitem",US:"workitem",TaskGroup:"workitem",Task:"workitem",Story:"workitem",Issue:"workitem",RR:"requirement",BUG:"bug","01001001":"requirement","02001001":"requirement","02001002":"requirement","02001003":"requirement","04000001":"bug","04000002":"bug","04000003":"bug",document:"wiki",directory:"wiki"},f={waiting:"#F8AC59",running:"#1BB394",success:"#23c6c8",pause:"#FF7D63",aborted:"#999",unknown:"#EA5F70",failed:"#EA5F70",DEVELOPING:"#4FB5EE",PENDING:"#F8AC59",PUBLISHING:"#1BB394",PUBLISHED:"#23c6c8",CLOSED:"#999"},v={waiting:"fa-clock-o",running:"fa-play-circle",success:"fa-check-circle",pause:"fa-pause-circle",aborted:"fa-minus-circle",unknown:"fa-exclamation-circle",failed:"fa-times-circle"},C={FS_ALL_ONLINE:"#23C6C8",FS_PART_ONLINE:"#5588CC",FS_UN_ONLINE:"#DD5555",WORKITEM_ONLINE:"#23C6C8",WORKITEM_UN_ONLINE:"#DD5555",DEFAULT:"#676A6C"},b={labels:"labels",iterations:"iteration",classify:"classify",release_plans:"releasePlans",owner:"currentOwners",deadline:"deadline",priority:"sysPriority",task_type:"taskType",status:"status",subtasks:"children",discovered_environment:"discoveredEnvironment"}},z9gd:function(e,t,n){"use strict";n("wZee"),n("ki2X"),n("sTAn"),n("PSGn"),n("85O/"),n("huE1"),n("lSgE"),n("kfgK"),n("GYl3"),n("gAkk"),n("r4oG"),n("Yhcd"),n("jpss"),n("RX2a")}}]);