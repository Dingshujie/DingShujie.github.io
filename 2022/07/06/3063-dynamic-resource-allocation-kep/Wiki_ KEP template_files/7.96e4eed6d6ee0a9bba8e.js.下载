(window["webpackJsonpknowledge-ui"]=window["webpackJsonpknowledge-ui"]||[]).push([[7],{"+2qM":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("mrSG"),o=n("fXoL"),r=n("3Pt+"),a=n("AA4e"),c=n("1Eq8"),l=(n("XUBH"),["markdownEditorElm"]),s={provide:r.i,useExisting:Object(o.forwardRef)(function(){return p}),multi:!0},d={provide:"config",useValue:{}},p=function(){function e(e){this.forRootConfig=e,this.rows=10,this.switchToRTF=new o.EventEmitter,this.focusOnEditor=new o.EventEmitter,this.saveContentEmit=new o.EventEmitter,this.onModelChange=function(){},this.onModelTouched=function(){}}return Object.defineProperty(e.prototype,"locale",{get:function(){return $.fn.markdown.messages},set:function(e){this.addLocaleSet(e)},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.initialization()},e.prototype.ngOnDestroy=function(){this.$toolbar&&this.$toolbar.remove()},e.prototype.addLocaleSet=function(e){e&&(Array.isArray(e)?e.forEach(function(e){$.fn.markdown.messages[e.language]=e.dictionary}):$.fn.markdown.messages[e.language]=e.dictionary)},e.prototype.focusHandler=function(){this.focusOnEditor.emit()},e.prototype.onShow=function(e){if(this.editorInstance=e,this.toolbarContailerSelector){var t=e.$textarea.prev();this.$toolbar=t,t.on("click",'[data-provider="bootstrap-markdown"]',$.proxy(e.__handle,e)),t.appendTo(this.toolbarContailerSelector)}this.options.autoGrowing&&e.$textarea.wrap('<div class="auto-growing"></div>')},e.prototype.setAutoGrowingContent=function(e){if(this.options.autoGrowing){var t=this.editorInstance.$textarea[0].parentNode;t&&(t.dataset.replicatedValue=e||"")}},e.prototype.initialization=function(){var e=this,t=$.fn.markdown.defaults,n=Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},t),c.a),this.forRootConfig),this.options);this.hookToEditorEvents(n);var o=n.onChange;n.onChange=function(t){var n=t&&t.getContent&&t.getContent();e.setAutoGrowingContent(n),e.onModelChange(n),"function"==typeof o&&o(t)};var r=n.onShow;n.onShow=function(t){e.onShow(t),"function"==typeof r&&r(t)};var a=n.onSaveContentEmit;n.onSaveContentEmit=function(){e.saveContentEmit.emit(),"function"==typeof a&&a()};var l=n.onSwitchToRTF;n.onSwitchToRTF=function(){e.switchToRTF.emit(),"function"==typeof l&&l()},$("#"+this.textareaId).markdown(n)},e.prototype.hookToEditorEvents=function(e){var t=this,n=function(n){if(Object.prototype.hasOwnProperty.call(e,n)&&n.startsWith("on")){var i=e[n];e[n]=function(e){t.dispatchCustomEvent(n,{eventData:e}),"function"==typeof i&&i(e)}}};for(var i in e)n(i)},e.prototype.writeValue=function(e){var t=this;this.value=e,Object(a.p)(function(){t.options.autoGrowing&&t.setAutoGrowingContent(e)}),this.value&&(this.elm.nativeElement.value=this.value)},e.prototype.registerOnChange=function(e){this.onModelChange=e},e.prototype.registerOnTouched=function(e){this.onModelTouched=e},e.prototype.dispatchCustomEvent=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0);var o={bubbles:n,cancelable:i};return t&&(o.detail=t),this.elm.nativeElement.dispatchEvent(new CustomEvent(e,o))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"]("config"))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["angular-markdown-editor"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](l,1),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.elm=n.first)},inputs:{locale:"locale",textareaId:"textareaId",placeholder:"placeholder",options:"options",customStyle:"customStyle",rows:"rows",toolbarContailerSelector:"toolbarContailerSelector"},outputs:{switchToRTF:"switchToRTF",focusOnEditor:"focusOnEditor",saveContentEmit:"saveContentEmit"},features:[o["\u0275\u0275ProvidersFeature"]([s,d])],decls:2,vars:7,consts:[["data-provide","markdown",1,"textarea",3,"id","placeholder","name","rows","mousedown"],["markdownEditorElm",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"textarea",0,1),o["\u0275\u0275listener"]("mousedown",function(){return t.focusHandler()}),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275styleMap"](t.customStyle),o["\u0275\u0275propertyInterpolate"]("id",t.textareaId),o["\u0275\u0275propertyInterpolate"]("placeholder",t.placeholder),o["\u0275\u0275propertyInterpolate"]("name",t.textareaId),o["\u0275\u0275propertyInterpolate"]("rows",t.rows))},styles:['.md-editor{word-break:break-all}.md-editor .auto-growing{display:grid}.md-editor .auto-growing:after{content:attr(data-replicated-value) " ";white-space:pre-wrap;visibility:hidden}.md-editor .auto-growing .textarea,.md-editor .auto-growing:after{grid-area:1/1/2/2}.md-editor .auto-growing .textarea{overflow:hidden}.md-editor .textarea{resize:none;border:none;outline:none;background:#fff}',".md-editor{display:block;border:1px solid #ddd}.md-editor .md-footer,.md-editor>.md-header{display:block;padding:6px 4px;background:#f5f5f5}.md-editor>.md-header{margin:0}.md-editor>.md-preview{background:#fff;border-top:1px dashed #ddd;border-bottom:1px dashed #ddd;min-height:10px;overflow:auto}.md-editor>textarea{font-family:Menlo,Monaco,Consolas,Courier New,monospace;font-size:14px;outline:0;margin:0;display:block;padding:0;width:100%;border:0;border-top:1px dashed #ddd;border-bottom:1px dashed #ddd;border-radius:0;box-shadow:none;background:#eee}.md-editor>textarea:focus{box-shadow:none;background:#fff}.md-editor.active{border-color:#66afe9;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.md-editor .md-controls{float:right;padding:3px}.md-editor .md-controls .md-control{right:5px;color:#bebebe;padding:3px 3px 3px 10px}.md-editor .md-controls .md-control:hover{color:#333}.md-editor.md-fullscreen-mode{width:100%;height:100%;position:fixed;top:0;left:0;z-index:99999;padding:60px 30px 15px;background:#fff!important;border:0!important}.md-editor.md-fullscreen-mode .md-footer{display:none}.md-editor.md-fullscreen-mode .md-input,.md-editor.md-fullscreen-mode .md-preview{margin:0 auto!important;height:100%!important;font-size:20px!important;padding:20px!important;color:#999;line-height:1.6em!important;resize:none!important;box-shadow:none!important;background:#fff!important;border:0!important}.md-editor.md-fullscreen-mode .md-preview{color:#333;overflow:auto}.md-editor.md-fullscreen-mode .md-input:focus,.md-editor.md-fullscreen-mode .md-input:hover{color:#333;background:#fff!important}.md-editor.md-fullscreen-mode .md-header{background:0 0;text-align:center;position:fixed;width:100%;top:20px}.md-editor.md-fullscreen-mode .btn-group{float:none}.md-editor.md-fullscreen-mode .btn{border:0;background:0 0;color:#b3b3b3}.md-editor.md-fullscreen-mode .btn.active,.md-editor.md-fullscreen-mode .btn:active,.md-editor.md-fullscreen-mode .btn:focus,.md-editor.md-fullscreen-mode .btn:hover{box-shadow:none;color:#333}.md-editor.md-fullscreen-mode .md-controls{display:none}.md-editor.md-fullscreen-mode .md-fullscreen-controls{position:absolute;top:20px;right:20px;text-align:right;z-index:1002;display:block}.md-editor.md-fullscreen-mode .md-fullscreen-controls a{color:#b3b3b3;clear:right;margin:10px;width:30px;height:30px;text-align:center}.md-editor.md-fullscreen-mode .md-fullscreen-controls a:hover{color:#333;text-decoration:none}.md-editor.md-fullscreen-mode .md-editor{height:100%!important;position:relative}.md-editor .md-fullscreen-controls{display:none}.md-nooverflow{overflow:hidden;position:fixed;width:100%}.f-20{font-size:20px}"],encapsulation:2}),e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()},"+jTH":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("ofXK"),o=n("sYmb"),r=n("3Pt+"),a=n("fXoL"),c=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[i.c,o.a,r.g]]}),e}()},"0qTp":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("ofXK"),o=n("3Pt+"),r=n("sYmb"),a=n("OzZK"),c=n("qAZ0"),l=n("FwiY"),s=n("PTRe"),d=n("mOC4"),p=n("fXoL"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[i.c,o.g,a.c,c.b,l.b,s.e,r.a,d.a]]}),e}()},"1Eq8":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={autofocus:!1,disabledButtons:[],dropZoneOptions:null,enableDropDataUri:!1,footer:"",height:"inherit",hiddenButtons:[],hideable:!1,iconlibrary:"glyph",initialstate:"editor",language:"fr",additionalButtons:[[{name:"groupFont",data:[{name:"cmdStrikethrough",toggle:!1,title:"Strikethrough",icon:{fa:"fa fa-strikethrough",glyph:"iconfont icon-editor-cutting-line cursor-pointer f-14"},callback:function(e){var t,n,i=e.getSelection(),o=e.getContent();t=0===i.length?e.__localize("strikethrough"):i.text,"~~"===o.substr(i.start-2,2)&&"~~"===o.substr(i.end,2)?(e.setSelection(i.start-2,i.end+2),e.replaceSelection(t),n=i.start-2):(e.replaceSelection("~~"+t+"~~"),n=i.start+2),e.setSelection(n,n+t.length)}}]},{name:"groupMisc",data:[{name:"cmdTable",toggle:!1,title:"Table",icon:{fa:"fa fa-table",glyph:"iconfont icon-editor-table cursor-pointer f-14"},callback:function(e){var t,n=e.getSelection();e.replaceSelection("\n| Tables        | Are           | Cool  | \n| ------------- |:-------------:| -----:| \n| col 3 is      | right-aligned | $1600 | \n| col 2 is      | centered      |   $12 | \n| zebra stripes | are neat      |    $1 |"),e.setSelection(t=n.start,t+"\n| Tables        | Are           | Cool  | \n| ------------- |:-------------:| -----:| \n| col 3 is      | right-aligned | $1600 | \n| col 2 is      | centered      |   $12 | \n| zebra stripes | are neat      |    $1 |".length)}}]}]]}},"1JWf":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(e){this._elementRef=e,this.clickOutside=new i.EventEmitter}return e.prototype.onMouseEnter=function(e){this._elementRef.nativeElement.contains(e)||(this.outsideRange?this.outsideRange.nativeElement.contains(e)&&this.clickOutside.emit(null):this.clickOutside.emit(null))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ElementRef))},e.\u0275dir=i["\u0275\u0275defineDirective"]({type:e,selectors:[["","clickElementOutside",""]],hostBindings:function(e,t){1&e&&i["\u0275\u0275listener"]("click",function(e){return t.onMouseEnter(e.target)},!1,i["\u0275\u0275resolveDocument"])},inputs:{outsideRange:"outsideRange"},outputs:{clickOutside:"clickOutside"}}),e}()},"1egt":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("fXoL"),o=n("bNXi"),r=n("sYmb"),a=n("UJq8"),c=n("A/Mn"),l=n("dEAy"),s=n("D9mS"),d=function(){return{showRemoveIcon:!1}},p=function(){function e(e,t,n,o){var r=this;this.notificationService=e,this.translate=t,this.emitService=n,this.knowledgeManageService=o,this.closeCallback=new i.EventEmitter,this.isFeWordImport=!1,this.filesSizeLargeTip=!1,this.haveLargeFile=!1,this.haveSuccessFileUpload=!1,this.tempAttachmentNum=0,this.handleChange=function(e){var t=e.file,n=e.fileList,i=t.status;"done"===i?r.haveSuccessFileUpload=!0:"error"===i&&r.notificationService.error(t.name+" "+r.translate.instant("UPLOAD_FAILED"),""),r.getLastFileStatus(t,n[n.length-1],i)&&r.haveSuccessFileUpload&&(r.haveSuccessFileUpload=!1)},this.checkFileList=function(e,t){r.filesSizeLargeTip=!1,r.haveLargeFile=!1;for(var n=0,i=t.length,o=0;o<i;o++){if(t[o].size>52428800)return r.haveLargeFile=!0,r.warmTip(e,t),!1;if((n+=t[o].size)>314572800)return r.filesSizeLargeTip=!0,r.warmTip(e,t),!1}},this.handleUpload=function(e){r.isFeWordImport?r.feWordImport(e):r.knowledgeManageService.importWordWithDrag(r.parentNode,r.currentDomain,r.kanBanId,e.file).subscribe(function(t){if(t.failed.length>0?e.onError(null,e.file):t.success.length>0&&(e.onSuccess(e.file),setTimeout(function(){var e,n={type:"add-document",parentSn:r.sn,sn:null===(e=null==t?void 0:t.success[0])||void 0===e?void 0:e.sn};r.emitService.emit(n)})),null==t?void 0:t.attachmentInfos){r.tempAttachmentNum=null==t?void 0:t.attachmentInfos[e.file.name];var n=r.tempAttachmentNum?r.translate.instant("ATTACHMENT_IMPORT_FAILED_TIP",{num:r.tempAttachmentNum}):"";r.notificationService.success(e.file.name+r.translate.instant("UPLOAD_SUCCESS")+n,""),r.tempAttachmentNum=0}},function(t){e.onError(null,e.file)})}}return e.prototype.ngOnInit=function(){},e.prototype.getLastFileStatus=function(e,t,n){return e.lastModified==t.lastModified&&e.name==t.name&&e.size==t.size&&("done"===n||"error"===n)},e.prototype.closeModal=function(){this.closeCallback.emit()},e.prototype.getLastFileBefore=function(e,t){return e.lastModified==t.lastModified&&e.name==t.name&&e.size==t.size},e.prototype.warmTip=function(e,t){this.getLastFileBefore(e,t[t.length-1])&&(this.haveLargeFile&&this.notificationService.error(this.translate.instant("LARGE_FILE_TIP"),""),this.filesSizeLargeTip&&this.notificationService.error(this.translate.instant("LARGE_FILES_TIP"),""))},e.prototype.feWordImport=function(e){var t=this;this.knowledgeManageService.feWordImport(this.currentDomain,e.file).subscribe(function(n){var i,o;if(n.failed.length>0)e.onError(null,e.file);else if(n.success.length>0){e.onSuccess(e.file),t.tempAttachmentNum=null===(i=null==n?void 0:n.success[0])||void 0===i?void 0:i.attachmentInfoCount;var r=t.tempAttachmentNum?t.translate.instant("ATTACHMENT_IMPORT_FAILED_TIP",{num:t.tempAttachmentNum}):"";t.notificationService.success(e.file.name+t.translate.instant("UPLOAD_SUCCESS")+r,""),t.closeCallback.emit({description:null===(o=null==n?void 0:n.success[0])||void 0===o?void 0:o.description,import:"feImport"})}},function(t){e.onError(null,e.file)})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.b),i["\u0275\u0275directiveInject"](r.c),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](c.b))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["import-word-drag"]],inputs:{parentNode:"parentNode",parentSn:"parentSn",currentDomain:"currentDomain",kanBanId:"kanBanId",sn:"sn",isFeWordImport:"isFeWordImport"},outputs:{closeCallback:"closeCallback"},decls:17,vars:21,consts:[["nzWrapClassName","modal-iport-word","nzCalssName","modal-styl",3,"nzVisible","nzClosable","nzFooter","nzWidth"],[1,"import-word-scroll-styl"],[1,"select-directory-header"],[1,"title-styl"],[1,"title-tip"],[1,"icon-color","icon-font-size14","position-right-close","iconfont","icon-close","pointer-cursor",3,"click"],[1,"content-container"],["nzType","drag",3,"nzAccept","nzMultiple","nzShowButton","nzShowUploadList","nzBeforeUpload","nzListType","nzCustomRequest","nzChange"],[1,"iconfont","icon-word","icon-word-styl"],[1,"ant-upload-text"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nz-modal",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"span",3),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"span",4),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"i",5),i["\u0275\u0275listener"]("click",function(){return t.closeModal()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",6),i["\u0275\u0275elementStart"](11,"nz-upload",7),i["\u0275\u0275listener"]("nzChange",function(e){return t.handleChange(e)}),i["\u0275\u0275elementStart"](12,"p"),i["\u0275\u0275element"](13,"i",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"p",9),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",600),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](5,14,"IMPORT_WORD")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,16,"IMPORT_WORD_TIP")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("nzAccept",".docx")("nzMultiple",!0)("nzShowButton",!0)("nzShowUploadList",i["\u0275\u0275pureFunction0"](20,d))("nzBeforeUpload",t.checkFileList)("nzListType","text")("nzCustomRequest",t.handleUpload),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](16,18,"UPLODE_WORD_FILE")))},directives:[l.a,s.a],pipes:[r.b],styles:[".modal-iport-word .ant-modal-body::-webkit-scrollbar{width:0!important}  .modal-iport-word .ant-upload-drag{height:172px}  .modal-iport-word .ant-upload-list{overflow-y:scroll;display:block;height:148px}  .modal-iport-word .ant-upload-list::-webkit-scrollbar{width:4px;height:25%}  .modal-iport-word .ant-upload-list::-webkit-scrollbar-thumb{border-radius:4px;background-color:#aaa}  .modal-iport-word .ant-upload-list::-webkit-scrollbar-track-piece{background:#fff;border-radius:4px}  .modal-iport-word .import-word-scroll-styl{width:600px;height:400px;position:relative;top:-24px;left:-24px}  .modal-iport-word .select-directory-header{height:45px;width:100%;line-height:45px;text-align:left;padding-left:15px;position:relative;border-bottom:1px solid #e5e5e5}  .modal-iport-word .select-directory-header .position-right-close{position:absolute;right:15px;font-size:23px}  .modal-iport-word .select-directory-header .title-tip{color:red;padding-left:3px}  .modal-iport-word .select-directory-header .title-styl{font-weight:700}  .modal-iport-word .content-container{height:calc(100% - 45px);padding:10px 18px 0}  .modal-iport-word .content-container .icon-word-styl{font-size:30px;color:#999}"]}),e}()},"1zlk":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("lJxs"),o=n("fXoL"),r=n("tk/3"),a=function(){function e(e){this.http=e}return e.prototype.queryCoeResult=function(e){return this.http.post("/devops-knowledge-management/api/coes",e).pipe(Object(i.a)(function(e){return e}))},e.prototype.articleAndViews=function(e){return this.http.get("/devops-knowledge-management/api/coe?domainId="+e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.getImproveTeam=function(e){return this.http.post("/vision-platform/api/member/uauth/actions",e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.userBonusPoint=function(e){return this.http.post("/devops-knowledge-management/api/core/rank",e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.coeClassificationTree=function(e){return this.http.post("/devops-knowledge-management/api/query/coe/type",e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.coeReleaseTree=function(e){return this.http.get("/devops-knowledge-management/api/getCoePublishTree?target_domain="+e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.getCustomAttr=function(){return this.http.get("/devops-knowledge-management/api/query/coe/customAttr").pipe(Object(i.a)(function(e){return e.data}))},e.prototype.query_members=function(e){return this.http.request("get","/vision-platform/api/domains/"+e+"/members").pipe(Object(i.a)(function(e){return e}))},e.prototype.fuzzySearchUsers=function(e){return this.http.get("/vision-platform/api/users?username="+e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.queryTopTree=function(e){var t=this;return this.http.get("/vision-platform/api/domains/"+e+"/top_tree?type=management").pipe(Object(i.a)(function(e){var n=t.convertTopTee(null,[e.data]);return t.flatTree(n)}))},e.prototype.flatTree=function(e,t){var n=this;return void 0===t&&(t=[]),e.forEach(function(e){t.push(e),e.children.length>0&&n.flatTree(e.children,t)}),t},e.prototype.convertTopTee=function(e,t,n,i){var o=this;return void 0===n&&(n=1),void 0===i&&(i=[]),t.map(function(t){return{checked:!0,id:t.id,value:t.title,level:n,parent:e?{id:e.id}:null,children:t.relations?o.convertTopTee(t,t.relations,n+1):[],margin_left:10*(n-1)+"px",collapse:1===n,hide:n>2,childrenCount:t.relations.length}})},e.prototype.hotWord=function(e){return this.http.post("/devops-knowledge-management/api/coe/hot/word",e).pipe(Object(i.a)(function(e){return e}))},e.prototype.showHotWords=function(e){return this.http.post("/devops-knowledge-management/api/coe/hot/words",e).pipe(Object(i.a)(function(e){return e.data}))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](r.c))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()},"25hl":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("fXoL"),o=n("ofXK");function r(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275listener"]("mousedown",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().draggableChange(e,"left")}),i["\u0275\u0275elementEnd"]()}}function a(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275listener"]("mousedown",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().draggableChange(e,"right")}),i["\u0275\u0275element"](1,"div",8),i["\u0275\u0275elementEnd"]()}}function c(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275listener"]("mousedown",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().draggableChange(e)}),i["\u0275\u0275elementEnd"]()}}var l,s=["*"],d=function(){function e(e,t,n){this.el=e,this.renderer2=t,this.zone=n,this.position="both",this.widthChange=new i.EventEmitter,this.heightChange=new i.EventEmitter,this.draggableSize="default",this.draggableStyle={}}return e.prototype.ngOnInit=function(){["left","right","both"].includes(this.position)?this.draggableStyle.width=(this.inputWidth||360)+"px":(this.draggableStyle.height=this.inputHeight+"px",this.draggableStyle.width="100%")},e.prototype.ngAfterViewInit=function(){this.oPanel=this.el.nativeElement.querySelector(".draggable-div-styl"),this.recyclePanel=this.el.nativeElement.querySelector(".rubbish-recycle-station")},e.prototype.draggableChange=function(e,t){var n=e.clientX,i=(l=this).oPanel.offsetWidth;if(t)document.onmousemove=function(e){var o,r;"right"==t?r=e.clientX-n+i:"left"==t&&(r=n-e.clientX+i);var a=l.minWidth;r<a&&(r=a),r>l.maxWidth&&(r=l.maxWidth),(null===(o=null==l?void 0:l.oPanel)||void 0===o?void 0:o.style)&&(l.oPanel.style.width=r+"px"),(null==l?void 0:l.recyclePanel.style)&&(l.recyclePanel.style.width=r-3+"px"),l.widthChange.emit({type:"dragge-div-width-change",data:{width:r}})};else{var o=e.clientY,r=l.oPanel.offsetHeight;document.onmousemove=function(e){var t,a;"bottom"==l.position?a=e.clientY-o+r:"top"==l.position&&(a=n-e.clientX+i),a<l.minHeight&&(a=l.minHeight),a>l.maxHeight&&(a=l.maxHeight),(null===(t=null==l?void 0:l.oPanel)||void 0===t?void 0:t.style)&&(l.oPanel.style.height=a+"px"),l.heightChange.emit({type:"dragge-div-height-change",data:{height:a}})}}document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}},e.prototype.ngOnChanges=function(e){e.inputHeight&&e.inputHeight.currentValue?this.draggableStyle.height=e.inputHeight.currentValue+"px":e.maxHeight&&e.maxHeight.currentValue?this.maxHeight=e.maxHeight.currentValue:e.minHeight&&e.minHeight.currentValue?this.minHeight=e.minHeight.currentValue:e.draggableSize&&e.draggableSize.currentValue&&(this.draggableSize=e.draggableSize.currentValue),this.initDraggableWrapper(this.draggableSize)},e.prototype.initDraggableWrapper=function(e){if(this.oPanel)switch(e){case"max":this.maxWidth&&(this.oPanel.style.width=this.maxWidth+"px"),this.maxHeight&&(this.oPanel.style.height=this.maxHeight+"px");break;case"min":this.minWidth&&(this.oPanel.style.width=this.minWidth+"px"),this.minHeight&&(this.oPanel.style.height=this.minHeight+"px");break;default:this.inputWidth&&(this.oPanel.style.width=this.inputWidth+"px"),this.inputHeight&&(this.oPanel.style.height=this.inputHeight+"px")}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](i.Renderer2),i["\u0275\u0275directiveInject"](i.NgZone))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["draggable-div"]],inputs:{maxWidth:"maxWidth",minWidth:"minWidth",position:"position",inputWidth:"inputWidth",maxHeight:"maxHeight",minHeight:"minHeight",inputHeight:"inputHeight",draggableSize:"draggableSize"},outputs:{widthChange:"widthChange",heightChange:"heightChange"},features:[i["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:s,decls:7,vars:4,consts:[[1,"draggable-div-styl","draggable-initial-styl",3,"ngStyle"],["class","draggable-left-child","id","draggLeft",3,"mousedown",4,"ngIf"],["class","draggable-right-child","id","draggRight",3,"mousedown",4,"ngIf"],["class","draggable-height-child","id","draggHeight",3,"mousedown",4,"ngIf"],[2,"height","100%"],["draggableChild",""],["id","draggLeft",1,"draggable-left-child",3,"mousedown"],["id","draggRight",1,"draggable-right-child",3,"mousedown"],[1,"drag-line"],["id","draggHeight",1,"draggable-height-child",3,"mousedown"]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,r,1,0,"div",1),i["\u0275\u0275template"](2,a,2,0,"div",2),i["\u0275\u0275template"](3,c,1,0,"div",3),i["\u0275\u0275elementStart"](4,"div",4,5),i["\u0275\u0275projection"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("ngStyle",t.draggableStyle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","left"==t.position||"both"==t.position),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","right"==t.position||"both"==t.position),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","left"!=t.position&&"right"!=t.position&&"both"!=t.position))},directives:[o.o,o.n],styles:[".draggable-div-styl[_ngcontent-%COMP%]{position:relative;float:right}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-left-child[_ngcontent-%COMP%]{left:-2px;top:0;height:100%;width:2px;position:absolute;background:#d7d7d7}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-left-child[_ngcontent-%COMP%]:hover{cursor:e-resize;background:#23c6c8;z-index:5}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-right-child[_ngcontent-%COMP%]{right:-2px;top:0;height:100%;width:2px;position:absolute;padding:0 6px;z-index:10;cursor:e-resize}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-right-child[_ngcontent-%COMP%]:hover   .drag-line[_ngcontent-%COMP%]{background:#23c6c8;width:4px;height:100%}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-height-child[_ngcontent-%COMP%]{right:0;bottom:-1px;height:3px;width:100%;position:absolute;z-index:2}.draggable-div-styl[_ngcontent-%COMP%]   .draggable-height-child[_ngcontent-%COMP%]:hover{cursor:n-resize;background:#23c6c8;z-index:5}.draggable-initial-styl[_ngcontent-%COMP%]{height:100%}"]}),e}()},"3MDf":function(e,t,n){"use strict";n.d(t,"a",function(){return se});var i=n("mrSG"),o=n("hbEN"),r=n("XIp8"),a=n("6eBy"),c=n("XNiG"),l=n("l5mm"),s=n("PqYM"),d=n("VRyK"),p=n("LRne"),u=n("xgIS"),m=n("R0Ic"),h=n("fxjG"),g=n("d/Su"),f=n("A/Mn"),v=n("y7eE"),b=n("fXoL"),C=n("3OLy"),y=n("bNXi"),x=n("sYmb"),w=n("UJq8"),_=n("/Kk4"),O=n("Fpfz"),S=n("ofXK"),E=n("vTH2"),M=n("cbLU"),P=n("nJia"),I=n("JXZa"),k=n("r6kV"),T=n("KupA"),D=n("3Pt+"),A=n("FwiY"),z=n("C2AL"),R=n("mXSW"),L=n("qAZ0"),N=["createWorkitemArticleWrapper"],j=["richTextRemoterScroll"],V=["wikiUnlockTips"],F=["categorySelector"];function B(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",33),b["\u0275\u0275text"](1),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"]();b["\u0275\u0275advance"](1),b["\u0275\u0275textInterpolate"](n.title)}}function U(e,t){if(1&e&&b["\u0275\u0275element"](0,"div",34),2&e){var n=t.$implicit,i=b["\u0275\u0275nextContext"]();b["\u0275\u0275classMap"](null==n?null:n.uuid),b["\u0275\u0275property"]("id",null==n?null:n.uuid)("hidden",i.showPreview||i.currentToolbarId!=(null==n?null:n.uuid))}}var W=function(e){return{"padding-left":e}};function H(e,t){if(1&e&&b["\u0275\u0275element"](0,"div",37),2&e){var n=t.$implicit,i=b["\u0275\u0275nextContext"](2);b["\u0275\u0275classProp"]("active-li-styl",n.titleId==i.scrollTitleId),b["\u0275\u0275property"]("ngStyle",b["\u0275\u0275pureFunction1"](3,W,3*n.indentationLevel+"px"))}}function G(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",35),b["\u0275\u0275template"](1,H,1,5,"div",36),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"]();b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngForOf",n.articleOutlineArr)}}function q(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"div",38),b["\u0275\u0275listener"]("click",function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().onFullWidthToggle()}),b["\u0275\u0275pipe"](1,"translate"),b["\u0275\u0275element"](2,"i",39),b["\u0275\u0275elementEnd"]()}if(2&e){var i=b["\u0275\u0275nextContext"]();b["\u0275\u0275property"]("title",b["\u0275\u0275pipeBind1"](1,3,i.allCollapse?"FULL_SCREEN_EXIT":"FULL_SCREEN")),b["\u0275\u0275advance"](2),b["\u0275\u0275classMap"](i.allCollapse?"icon-horizon-collapse":"icon-horizon-expand")}}function $(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"div",46),b["\u0275\u0275elementStart"](1,"input",47),b["\u0275\u0275listener"]("ngModelChange",function(e){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().$implicit.title=e}),b["\u0275\u0275pipe"](2,"translate"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](3,"h1",48),b["\u0275\u0275text"](4),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()}if(2&e){var i=b["\u0275\u0275nextContext"]().$implicit;b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("placeholder",b["\u0275\u0275pipeBind1"](2,5,"UNNAMED_PARAGRAPH"))("ngModel",i.title)("id",(null==i?null:i.uuid)+"-input")("hidden",i.isDeleted),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate"](i.title)}}function K(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"div",49),b["\u0275\u0275listener"]("dblclick",function(){b["\u0275\u0275restoreView"](n);var e=b["\u0275\u0275nextContext"]().$implicit;return b["\u0275\u0275nextContext"]().resetTab(e)}),b["\u0275\u0275elementStart"](1,"div",50),b["\u0275\u0275elementStart"](2,"span"),b["\u0275\u0275text"](3),b["\u0275\u0275pipe"](4,"translate"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](5,"span",51),b["\u0275\u0275text"](6),b["\u0275\u0275pipe"](7,"translate"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](8,"div",52),b["\u0275\u0275text"](9),b["\u0275\u0275pipe"](10,"translate"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()}if(2&e){var i=b["\u0275\u0275nextContext"]().$implicit;b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate"](i.title?i.title:b["\u0275\u0275pipeBind1"](4,3,"UNNAMED_PARAGRAPH")),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate"](b["\u0275\u0275pipeBind1"](7,5,"TAB_DELETED_TIP")),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate1"](" ",b["\u0275\u0275pipeBind1"](10,7,"DOUBLE_CLICK_RESET")," ")}}function X(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"div",53),b["\u0275\u0275elementStart"](1,"div",54),b["\u0275\u0275element"](2,"i",55),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](3,"div",56),b["\u0275\u0275elementStart"](4,"div",57),b["\u0275\u0275text"](5),b["\u0275\u0275pipe"](6,"translate"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](7,"div",58),b["\u0275\u0275text"](8),b["\u0275\u0275pipe"](9,"translate"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e&&(b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("nzTheme","fill"),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate"](b["\u0275\u0275pipeBind1"](6,3,"TAB_DELETE_CONFIRM_TITLE")),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate"](b["\u0275\u0275pipeBind1"](9,5,"TAB_DELETE_CONFIRM_CONTENT")))}function Y(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"div",40),b["\u0275\u0275listener"]("mouseover",function(){return t.$implicit.showDelete=!0})("mouseout",function(){return t.$implicit.showDelete=!1}),b["\u0275\u0275template"](1,$,5,7,"div",41),b["\u0275\u0275elementStart"](2,"vision-editor",42),b["\u0275\u0275listener"]("editorInit",function(e){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().editorInitHandler(e)})("initInstanceCallback",function(){b["\u0275\u0275restoreView"](n);var e=t.$implicit;return b["\u0275\u0275nextContext"]().initInstanceCallbackHandler(e)})("visionOnEditorChanged",function(e){b["\u0275\u0275restoreView"](n);var i=t.$implicit,o=b["\u0275\u0275nextContext"]();return o.getArticleOutlineDelay(),o.descriptionChange(e,i)})("getEditorContent",function(e){b["\u0275\u0275restoreView"](n);var i=t.$implicit;return b["\u0275\u0275nextContext"]().descriptionChange(e,i)})("focusOnEditor",function(e){b["\u0275\u0275restoreView"](n);var i=t.$implicit;return b["\u0275\u0275nextContext"]().focusOnEditorHandler(e,i)})("saveContentEmit",function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().saveAutomatic()})("imgLoaded",function(e){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().imgLoadedHanlder(e)}),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](3,K,11,9,"div",43),b["\u0275\u0275elementStart"](4,"span",44),b["\u0275\u0275listener"]("nzOnConfirm",function(){b["\u0275\u0275restoreView"](n);var e=t.$implicit;return b["\u0275\u0275nextContext"]().deleteTab(e)}),b["\u0275\u0275pipe"](5,"translate"),b["\u0275\u0275pipe"](6,"translate"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](7,X,10,7,"ng-template",null,45,b["\u0275\u0275templateRefExtractor"]),b["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=b["\u0275\u0275reference"](8),r=b["\u0275\u0275nextContext"]();b["\u0275\u0275property"]("hidden",r.showPreview),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf","document"===r.categoryType),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("tab",i)("description",r.changeContentMode(i.description,"edit"))("hidden",i.isDeleted)("toolbarContailerSelector","#"+(null==i?null:i.uuid))("richTextId",null==i?null:i.editorID)("type","1"==(null==i?null:i.ui_source)?"rich-text":"markdown")("insertContentEvent",r.insertContentEventSubject.asObservable())("getContentEvent",i.getContentEventSubject.asObservable())("refreshContentEvent",i.refreshContentEventSubject.asObservable())("username",r.currentUsername)("structuredTableInfo",null)("markdownOptions",r.mdOptions)("saveContent",!0)("readonly",null==i?null:i.readonly),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",i.isDeleted&&!i.isCreated),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("hidden",!i.showDelete||i.isDeleted)("nzPopconfirmTitle",o)("nzOkText",b["\u0275\u0275pipeBind1"](5,21,"COMMON_BUTTON_CONFIRM"))("nzCancelText",b["\u0275\u0275pipeBind1"](6,23,"COMMON_BUTTON_CANCLE"))}}function Q(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"div",59),b["\u0275\u0275listener"]("click",function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().createNewParagraph()}),b["\u0275\u0275element"](1,"span",60),b["\u0275\u0275elementStart"](2,"span"),b["\u0275\u0275text"](3),b["\u0275\u0275pipe"](4,"translate"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()}2&e&&(b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate"](b["\u0275\u0275pipeBind1"](4,1,"CREATE_NEW_PARAGRAPH")))}function J(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",61),b["\u0275\u0275element"](1,"html-render",62),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](),i=b["\u0275\u0275reference"](10);b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("scrollInEL",i)("docContent",n.articleDescription)("docType","rich-text")}}function Z(e,t){1&e&&b["\u0275\u0275element"](0,"i",66)}function ee(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",63),b["\u0275\u0275element"](1,"nz-spin",64),b["\u0275\u0275template"](2,Z,1,0,"ng-template",null,65,b["\u0275\u0275templateRefExtractor"]),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275reference"](3);b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("nzIndicator",n)}}var te,ne=function(e){return{zoom:e}},ie=function(e){return{display:e}},oe=function(){return{padding:"0"}},re=function(e){return{visibility:e}},ae=function(e){return{width:e}},ce={"create-design-template":"CREATE_NEW_TEMPLATE","update-design-template":"UPDATE_TEMPLATE"},le=[],se=function(e){function t(t,n,i,r,a,l,s,d){var p=e.call(this)||this;return p.wikiLockService=t,p.notification=n,p.knowledgeService=i,p.translate=r,p.emitService=a,p.resizeObserver=l,p.ngZone=s,p.visionEditorService=d,p.model="update-design-template",p.mdOptions=g.c,p.articleTitle="",p.articleDescription="",p.articleOutlineArr=[],p.editContentScroll=!0,p.editorStyle={opacity:1},p.scrollMarginPaddingVal=30,p.marginPaddingVal=50,p.articleMarginTop=10,p.insertContentEventSubject=new c.a,p.hoverShowTip=!1,p.showOutlineOverCtrl=!1,p.outlineCollapse=!1,p.showTemplate=!0,p.showLoading=!1,p.showPreview=!1,p.origin="workitem-article",p.tabArr=[],p.onDestroy$=new c.a,p.editorInit=!1,p.saveBool=!0,p.categoryType="document",p.clickSaveClose=!1,p.isImgLazyLoaded=!1,p.onDestory$=new c.a,p.getArticleOutlineDelay=Object(o.a)(function(){p.getArticleOutline("scroll-body",p.articleTitle)},1e4),p.richTextRemoterShow=!1,p.richTextRemoterInnerWidth=100,p.imgLoadedHanlder=Object(o.a)(function(e){p.isImgLazyLoaded=!0,p.getArticleOutline("scroll-body",p.articleTitle)},2e3),p}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"isContentChanged",{get:function(){return te&&te.judgeTabArrChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reserveTitle",{get:function(){return this.translate.instant(this.outlineCollapse?"PIN_OUTLINE":"COLLAPSE_OUTLINE")},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;null!==localStorage.getItem("workitemWikiOutlineCollapse")&&(this.outlineCollapse="true"===localStorage.getItem("workitemWikiOutlineCollapse")),null!==localStorage.getItem("workitemWikiShowTemplate")&&(this.showTemplate="true"===localStorage.getItem("workitemWikiShowTemplate")),this.title=this.translate.instant(ce[this.model]),this.emitService.eventEmit.subscribe(function(t){var n;if(t.origin===e.origin)if("outline-position"===t.type)e.positionActiveElement(t.data.titleId);else if(t&&"after-component-change-description"===t.type)if(e.isImgLazyLoaded){for(var i=null===(n=null==e?void 0:e.articleOutlineArr)||void 0===n?void 0:n.length,o=0;o<i;o++){var r=e.articleOutlineArr[o],a=null==t?void 0:t.arr[o];r.startTop=null==a?void 0:a.startTop,r.endTop=null==a?void 0:a.endTop}e.isImgLazyLoaded=!1}else e.articleOutlineArr=t.arr}),this.buildTabArrByUpdate(),te=this,this.currentUsername=window.communicationService.currentUser.user_name,this.currentUserId=window.communicationService.currentUser.user_id,"update-design-template"===this.model&&this.initSocketListen()},t.prototype.buildTabArrByUpdate=function(){var e,t=this.articleDetails.paragraphs.map(function(e,t){return{uuid:"tab"+t,editorID:"workitemTab"+t,title:e.content_category,id:e.content_id,description:e.content,isShowToolbar:!1,isCreated:!1,showDelete:!1,isDeleted:!1,ui_source:e.ui_source,getContentEndValue:!1,documentClassify:e.documentClassify,readonly:!1,get getContentEnd(){return this.getContentEndValue},set getContentEnd(e){this.getContentEndValue=e,te.judgeGetEditorContent()},getContentPreview:!1,get getContentPreviewEnd(){return this.getContentPreview},set getContentPreviewEnd(e){this.getContentPreview=e,te.judgePreviewEditorContent()},getContentEventSubject:new c.a,refreshContentEventSubject:new c.a}});this.tabArr=Object(i.i)(t),this.tabArr.length&&(this.currentToolbarId=null===(e=this.tabArr[this.tabArr.length-1])||void 0===e?void 0:e.uuid)},t.prototype.judgeTabArrChange=function(){var e=this;return(null==le?void 0:le.length)!=this.tabArr.length||le.some(function(t,n){return t.title!==e.tabArr[n].title||e.changeContentMode(t.description,"edit")!==e.tabArr[n].description||t.isDeleted!==e.tabArr[n].isDeleted||t.ui_source!==e.tabArr[n].ui_source})},t.prototype.ngAfterViewInit=function(){var e=this;this.saveInitData(),Object(g.d)(this,this.createWorkitemArticleWrapper,!0),this.initEditor(),this.isShowEditPage(!1),setTimeout(function(){document.getElementById("scroll-body").addEventListener("keydown",function(){e.ngZone.run(function(){return Object(g.a)(e.saveAutomatic.bind(e))})})},1e3)},t.prototype.activeEditScrollTo=function(){var e=this,t=JSON.parse(window.sessionStorage.getItem("active-edit-coe"));t&&setTimeout(function(){var n=e.tabArr.find(function(e){return e.title==t.category});if(null==n?void 0:n.editorID){var i=document.getElementById(null==n?void 0:n.editorID).getBoundingClientRect().top||0;document.getElementById("scroll-body").scrollTop=i}},2e3)},t.prototype.isShowEditPage=function(e){var t=document.querySelector(".page");t&&(t.style.opacity=e?"1":"0")},t.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},t.prototype.saveInitData=function(){le=Object(r.a)(this.tabArr)},t.prototype.saveArticleOrTemplateHandler=function(e){this.saveArticleOrTemplate(),this.clickSaveClose=!0},t.prototype.saveArticleOrTemplate=function(){this.tabArr.forEach(function(e){e.getContentEnd=!1,e.getContentEventSubject.next({clearCache:!0,eventType:"save-data"})})},t.prototype.descriptionChange=function(e,t){var n=e.description,i=e.type,o=e.eventType;n&&(t.description=n),i&&(t.ui_source="rich-text"===i?"1":"2"),"save-data"===o&&(t.getContentEnd=!0),"preview-click"===o&&(t.getContentPreviewEnd=!0),this.setRemoter(t)},t.prototype.getArticleOutline=function(e,t){this.isImgLazyLoaded||(this.articleOutlineArr=[]),this.emitService.emit({type:"article-outline-get-outline-arr",data:{id:e,articleRealTitle:t,firstChildDom:document.getElementById("topWorkitemPositionArticle")},origin:this.origin,isImgLazyLoaded:this.isImgLazyLoaded})},t.prototype.initEditor=function(){var e,t=this,n=0,i=1;if("update-design-template"===this.model){var o=document.getElementById("scrollParentArticle"),r=document.getElementById("wikiArticleTitleId");if(o){this.editorStyle={opacity:0};var c=r&&r.getBoundingClientRect().height;i=o.scrollHeight-c-this.marginPaddingVal,(n=o.scrollTop-c-this.scrollMarginPaddingVal)<0&&(n=0)}}var d=Object(l.a)(100).pipe(Object(a.a)(function(e){return Object(s.a)(2*e)})).subscribe(function(o){(e=document.getElementById("scroll-body"))&&(e.removeEventListener("scroll",null),e.addEventListener("scroll",t.articleEditScrollFunc.bind(t)),setTimeout(function(){var o=e.scrollHeight;e.scrollTop=n*o*o/(i*i),setTimeout(function(){t.editorStyle={opacity:1}})}),d.unsubscribe())})},t.prototype.articleEditScrollFunc=function(){this.editContentScroll&&this.articleScroll()},t.prototype.articleScroll=function(){var e=this.articleOutlineArr.length;this.articleOutlineArr&&e>0&&document.getElementById("scroll-body")&&this.findFinishedDom(this.articleOutlineArr[e-1].titleId)},t.prototype.positionActiveElement=function(e){var t=this;this.editContentScroll=!1;var n=document.getElementById("scroll-body"),i=document.getElementById("topWorkitemPositionArticle").getBoundingClientRect(),o=document.getElementById("bottomWorkitemPositionArticle"),r=o&&o.getBoundingClientRect(),a=document.getElementById(e).getBoundingClientRect(),c=n.getBoundingClientRect(),l=Math.abs(a.top-i.top)-this.articleMarginTop,s=r.bottom-i.top-c.height;l>s&&(l=s),n.scrollTop=l,setTimeout(function(){t.editContentScroll=!0})},t.prototype.findFinishedDom=function(e){if(document.getElementById(e))for(var t=document.getElementById("scroll-body").scrollTop,n=JSON.parse(localStorage.getItem("outlineActiveTitle")),i=0;i<this.articleOutlineArr.length;i++){var o=this.articleOutlineArr[i];if(o.startTop<t&&t<o.endTop){if(n&&n.titleId!==o.titleId||!n){Object(v.c)("outlineActiveTitle",JSON.stringify(o));var r={type:"scroll-active-outline-title",data:o};this.scrollTitleId=r.data.titleId,this.emitService.emit(r)}return}}},t.prototype.showOutlineOver=function(e){this.showOutlineOverCtrl=!0,"showTip"===e&&(this.hoverShowTip=!0)},t.prototype.showOutlineOut=function(e){this.showOutlineOverCtrl=!1,"showTip"===e&&(this.hoverShowTip=!1)},t.prototype.outlineToggle=function(){this.outlineCollapse=!this.outlineCollapse,Object(v.c)("workitemWikiOutlineCollapse",String(this.outlineCollapse))},t.prototype.preview=function(e){e&&this.tabArr.forEach(function(e){e.getContentPreviewEnd=!1,e.getContentEventSubject.next({clearCache:!0,eventType:"preview-click"})}),this.showPreview=e},t.prototype.onRemoterScroll=function(){var e=this.richTextRemoterScroll.nativeElement,t=this.richTextWrapper;t.scrollLeft=e.scrollLeft/(e.scrollWidth-e.clientWidth)*(t.scrollWidth-t.clientWidth)},t.prototype.setRemoter=function(e){var t=this;if(1==(null==e?void 0:e.ui_source)){var n=document.querySelector("#"+e.editorID),i=(null==n?void 0:n.scrollWidth)>(null==n?void 0:n.clientWidth);this.richTextRemoterShow=i,this.richTextWrapper=n,i&&(this.wrapperScrollSubscription&&this.wrapperScrollSubscription.unsubscribe(),this.wrapperScrollSubscription=Object(d.a)(Object(p.a)(),this.resizeObserver.observe(n),Object(u.a)(window,"resize")).subscribe(function(){t.richTextRemoterInnerWidth=null==n?void 0:n.scrollWidth;var e=t.richTextRemoterScroll.nativeElement,i=null==n?void 0:n.getBoundingClientRect(),o=i.width;e.style.left=i.left+"px",e.style.width=o+"px",e.scrollLeft=null==n?void 0:n.scrollLeft}))}else this.richTextRemoterShow=!1},Object.defineProperty(t.prototype,"allCollapse",{get:function(){return this.outlineCollapse&&!this.showTemplate},enumerable:!1,configurable:!0}),t.prototype.onFullWidthToggle=function(){this.allCollapse?(this.outlineCollapse=!1,this.showTemplate=!0,Object(v.c)("workitemWikiOutlineCollapse",String(this.outlineCollapse)),Object(v.c)("workitemWikiShowTemplate",String(this.showTemplate))):(this.outlineCollapse=!0,this.showTemplate=!1,Object(v.c)("workitemWikiOutlineCollapse",String(this.outlineCollapse)),Object(v.c)("workitemWikiShowTemplate",String(this.showTemplate)))},t.prototype.focusOnEditorHandler=function(e,t){var n;this.currentToolbarId=null===(n=null==e?void 0:e.toolbarContainer)||void 0===n?void 0:n.substring(1),this.setRemoter(t)},t.prototype.createNewParagraph=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n=this;return Object(i.e)(this,function(i){return this.tabArr.forEach(function(e){e.getContentEnd=!1,e.getContentEventSubject.next({eventType:"create-new-paragraph"})}),e={uuid:"tab"+this.tabArr.length,editorID:"workitemTab"+this.tabArr.length,title:"",description:"",id:"",isShowToolbar:!1,isCreated:!0,showDelete:!1,isDeleted:!1,ui_source:"1",getContentEndValue:!1,get getContentEnd(){return this.getContentEndValue},set getContentEnd(e){this.getContentEndValue=e,te.judgeGetEditorContent()},getContentPreview:!1,get getContentPreviewEnd(){return this.getContentPreview},set getContentPreviewEnd(e){this.getContentPreview=e,te.judgePreviewEditorContent()},getContentEventSubject:new c.a,refreshContentEventSubject:new c.a},t=document.getElementById("toolbarWrapper"),new MutationObserver(function(){document.getElementById(e.uuid)&&setTimeout(function(){e.isShowToolbar=!0},100)}).observe(t,{childList:!0,subtree:!0}),setTimeout(function(){n.tabArr.push(e),1==n.tabArr.length&&(n.currentToolbarId=n.tabArr[0].uuid)}),[2]})})},t.prototype.initInstanceCallbackHandler=function(e){var t=this;e.isCreated&&setTimeout(function(){document.querySelector("[id*="+e.uuid+"-input]").focus()},100),setTimeout(function(){t.editorInit&&t.tabArr.forEach(function(e){e.refreshContentEventSubject.next({refreshContent:t.changeContentMode(e.description,"edit")})}),t.editorInit=!1,t.isShowEditPage(!0)},200),this.getArticleOutline("scroll-body",this.articleTitle)},t.prototype.editorInitHandler=function(e){this.editorInit=!0},t.prototype.deleteTab=function(e){e.isDeleted=!0,e.description=""},t.prototype.resetTab=function(e){e.isDeleted=!1},t.prototype.judgeGetEditorContent=function(){if(this.tabArr.every(function(e){return e.getContentEnd})){var e=this.tabArr.map(function(e){return e.title}),t=new Set(e);if(e.length!==t.size)return void this.notification.warning(this.translate.instant("DUPLICATE_DOC_NAME"),"");var n,i="create-design-template"==this.model?"post":"put";n="create-design-template"==this.model?this.buildSaveTemplateCondition():this.buildSaveTemplateCondition(this.articleDetails.id),this.updateTemplateArticle(n,i)}},t.prototype.judgePreviewEditorContent=function(){var e=this;this.articleDescription="",this.tabArr.every(function(e){return e.getContentPreview})&&this.tabArr.filter(function(e){return!e.isDeleted}).forEach(function(t){var n="1"==t.ui_source?t.description:marked(t.description);e.articleDescription+="<h1>"+t.title+"</h1><br> "+n})},t.prototype.buildSaveTemplateCondition=function(e){var t,n=this,i={assignedDomainId:this.currentDomainInfo.id,assignedDomainSn:this.currentDomainInfo.sn,type:(null===(t=this.articleDetails)||void 0===t?void 0:t.classify)&&this.articleDetails.classify.toUpperCase()||"FEATURE",operator:this.currentUserId,detailInfo:this.tabArr.filter(function(e){return!e.isDeleted&&e.title}).map(function(e){var t={templateValue:n.changeContentMode(e.description,"view"),documentName:e.title};return"update-design-template"===n.model&&e.id&&(t.relatedValue=e.id),e.documentClassify&&(t.documentClassify=e.documentClassify),t})};return e&&(i.number=e),i},t.prototype.updateTemplateArticle=function(e,t){var n=this;this.showLoading=!0,this.knowledgeService.updateDesignTemplate(e,t).subscribe(function(t){var i=t.failed;if(n.showLoading=!1,null==i?void 0:i.length)n.notification.error(n.translate.instant("SAVEED_FAILED"),"",{nzDuration:1e3});else{n.emitService.emit({type:"template::closeWorkitemTemplateModel"}),n.notification.success(n.translate.instant("UPDATE_SUCCESS"),"",{nzDuration:1e3});var o=new CustomEvent("knowledge_event_listener",{detail:{operation:"template_update_finished",content:e}});window.dispatchEvent(o)}})},t.prototype.changeContentMode=function(e,t){return e?this.visionEditorService.changeContentMode(e,t):""},t.prototype.cancleEdit=function(){this.categorySelector.cancelCreate()},t.prototype.saveEdit=function(){this.categorySelector.save()},t.prototype.saveAutomatic=function(){"update-design-template"==this.model?this.updateWorkitemArticleHandler():"create-design-template"==this.model&&this.saveArticleOrTemplate()},t.prototype.updateWorkitemArticleHandler=function(){this.tabArr.forEach(function(e){e.getContentEnd=!1,e.getContentEventSubject.next({clearCache:!1,eventType:"save-data"})})},t.\u0275fac=function(e){return new(e||t)(b["\u0275\u0275directiveInject"](C.a),b["\u0275\u0275directiveInject"](y.b),b["\u0275\u0275directiveInject"](f.b),b["\u0275\u0275directiveInject"](x.c),b["\u0275\u0275directiveInject"](w.a),b["\u0275\u0275directiveInject"](_.a),b["\u0275\u0275directiveInject"](b.NgZone),b["\u0275\u0275directiveInject"](O.a))},t.\u0275cmp=b["\u0275\u0275defineComponent"]({type:t,selectors:[["workitem-article-template"]],viewQuery:function(e,t){if(1&e&&(b["\u0275\u0275viewQuery"](N,1),b["\u0275\u0275viewQuery"](j,1),b["\u0275\u0275viewQuery"](V,1),b["\u0275\u0275viewQuery"](F,1)),2&e){var n=void 0;b["\u0275\u0275queryRefresh"](n=b["\u0275\u0275loadQuery"]())&&(t.createWorkitemArticleWrapper=n.first),b["\u0275\u0275queryRefresh"](n=b["\u0275\u0275loadQuery"]())&&(t.richTextRemoterScroll=n.first),b["\u0275\u0275queryRefresh"](n=b["\u0275\u0275loadQuery"]())&&(t.wikiUnlockTipsTemplateRef=n.first),b["\u0275\u0275queryRefresh"](n=b["\u0275\u0275loadQuery"]())&&(t.categorySelector=n.first)}},inputs:{model:"model",currentDomain:"currentDomain",articleDetails:"articleDetails",currentDomainInfo:"currentDomainInfo",wikiEditFunction:"wikiEditFunction",fullScreenCtrl:"fullScreenCtrl",fullScreenZoomSize:"fullScreenZoomSize"},features:[b["\u0275\u0275ProvidersFeature"]([f.b,f.a]),b["\u0275\u0275InheritDefinitionFeature"]],decls:33,vars:49,consts:[[1,"create-article-wrapper"],["createWorkitemArticleWrapper",""],[1,"header-shadow",3,"ngStyle"],["class","title m-l-12",4,"ngIf"],["id","toolbarWrapper",1,"toolbar"],[3,"id","class","hidden",4,"ngFor","ngForOf"],[1,"buttons","m-r-12"],[3,"model","currentDomain","contentChanged","showPreview","wikiEditFunction","saveBool","isCreatedOnce","selected","preview"],["categorySelector",""],["id","scroll-body",1,"doc-content","flex","slimScrollBar"],["scrollBody",""],[1,"left","m-l-12","position-r",3,"hidden","ngStyle","mouseover","mouseout"],[1,"article-outline-wrap","slimScrollBar"],["id","scrollParentOutline",1,"article-outline-show"],[3,"origin","needBorder"],["nz-tooltip","",1,"outline-toggle-icon","cursor-pointer","reserve-span-show",3,"nzTooltipPlacement","nzTooltipTitle","click"],[1,"iconfont","icon","f-16","txt-999"],["class","article-hidden-wrapper",4,"ngIf"],["id","center-wrapper",1,"center",3,"ngStyle"],["id","topWorkitemPositionArticle",1,"top-position-styl"],[1,"page"],[1,"title-input"],["class","collapse-all-icon cursor-pointer",3,"title","click",4,"ngIf"],["class","position-r",3,"hidden","mouseover","mouseout",4,"ngFor","ngForOf"],["class","create-paragraph cursor-pointer p-b-20",3,"click",4,"ngIf"],["class","show-preview p-20",4,"ngIf"],["id","bottomWorkitemPositionArticle",1,"top-position-styl"],[1,"right","m-r-12",3,"ngStyle"],[1,"small-btn-warp",3,"ngStyle"],["class","loading-wrapper",4,"ngIf"],[1,"remote-scroll","slimScrollBar",3,"hidden","scroll"],["richTextRemoterScroll",""],[1,"remote-scroll-inner",3,"ngStyle"],[1,"title","m-l-12"],[3,"id","hidden"],[1,"article-hidden-wrapper"],["class","outline-style",3,"active-li-styl","ngStyle",4,"ngFor","ngForOf"],[1,"outline-style",3,"ngStyle"],[1,"collapse-all-icon","cursor-pointer",3,"title","click"],[1,"iconfont","icon"],[1,"position-r",3,"hidden","mouseover","mouseout"],["class","iconfont icon-plus icon-items ml-16 pr-top1-style",4,"ngIf"],["initEditor","",1,"create-article-container",3,"tab","description","hidden","toolbarContailerSelector","richTextId","type","insertContentEvent","getContentEvent","refreshContentEvent","username","structuredTableInfo","markdownOptions","saveContent","readonly","editorInit","initInstanceCallback","visionOnEditorChanged","getEditorContent","focusOnEditor","saveContentEmit","imgLoaded"],["class","txt-999 p-l-20 p-b-20",3,"dblclick",4,"ngIf"],["nz-popconfirm","","nzPopconfirmPlacement","bottom","nzPopconfirmPlacement","leftTop",1,"delete-btn","iconfont","icon-delete","cursor-pointer","f-20",3,"hidden","nzPopconfirmTitle","nzOkText","nzCancelText","nzOnConfirm"],["deleteConfirmTemp",""],[1,"iconfont","icon-plus","icon-items","ml-16","pr-top1-style"],["type","text","autocomplete","off",1,"article-title","p-l-20","p-r-20","t-a-l",3,"placeholder","ngModel","id","hidden","ngModelChange"],[1,"hidden-h1","position-a"],[1,"txt-999","p-l-20","p-b-20",3,"dblclick"],[1,"tab-deleted-tip"],[1,"tab-deleted-tip-span","m-l-5","f-16"],[1,"double-click-reset","f-18"],[1,"flex-box"],[2,"flex","1"],["nz-icon","","nzType","exclamation-circle",2,"color","#faad14",3,"nzTheme"],[2,"flex","9"],[1,"txt-333","m-b-5"],[1,"txt-999"],[1,"create-paragraph","cursor-pointer","p-b-20",3,"click"],[1,"iconfont","icon-add","m-r-5","m-l-20"],[1,"show-preview","p-20"],[3,"scrollInEL","docContent","docType"],[1,"loading-wrapper"],["nzSimple","",3,"nzIndicator"],["indicatorTemplate",""],["nz-icon","","nzType","loading",2,"font-size","24px"]],template:function(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"div",0,1),b["\u0275\u0275elementStart"](2,"div",2),b["\u0275\u0275template"](3,B,2,1,"div",3),b["\u0275\u0275elementStart"](4,"div",4),b["\u0275\u0275template"](5,U,1,4,"div",5),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](6,"div",6),b["\u0275\u0275elementStart"](7,"app-category-selector",7,8),b["\u0275\u0275listener"]("selected",function(e){return t.saveArticleOrTemplateHandler(e)})("preview",function(e){return t.preview(e)}),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](9,"div",9,10),b["\u0275\u0275elementStart"](11,"div",11),b["\u0275\u0275listener"]("mouseover",function(){return t.showOutlineOver("showTip")})("mouseout",function(){return t.showOutlineOut("showTip")}),b["\u0275\u0275elementStart"](12,"div",12),b["\u0275\u0275elementStart"](13,"div",13),b["\u0275\u0275element"](14,"article-outline",14),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](15,"span",15),b["\u0275\u0275listener"]("click",function(){return t.outlineToggle()}),b["\u0275\u0275element"](16,"i",16),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](17,G,2,1,"div",17),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](18,"div",18),b["\u0275\u0275element"](19,"div",19),b["\u0275\u0275elementStart"](20,"div",20),b["\u0275\u0275elementStart"](21,"div",21),b["\u0275\u0275template"](22,q,3,5,"div",22),b["\u0275\u0275template"](23,Y,9,25,"div",23),b["\u0275\u0275template"](24,Q,5,3,"div",24),b["\u0275\u0275template"](25,J,2,3,"div",25),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](26,"div",26),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](27,"div",27),b["\u0275\u0275element"](28,"div",28),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](29,ee,4,1,"div",29),b["\u0275\u0275elementStart"](30,"div",30,31),b["\u0275\u0275listener"]("scroll",function(){return t.onRemoterScroll()}),b["\u0275\u0275element"](32,"div",32),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e&&(b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngStyle",b["\u0275\u0275pureFunction1"](38,ne,t.fullScreenCtrl?1/t.fullScreenZoomSize:null)),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!t.fullScreenCtrl),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngForOf",t.tabArr),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("model",t.model)("currentDomain",t.currentDomain)("contentChanged",t.isContentChanged)("showPreview",t.showPreview)("wikiEditFunction",t.wikiEditFunction)("saveBool",t.saveBool)("isCreatedOnce",t.isCreatedOnce),b["\u0275\u0275advance"](4),b["\u0275\u0275property"]("hidden",t.fullScreenCtrl)("@outlineToggle",t.outlineCollapse?"closed":"open")("ngStyle",b["\u0275\u0275pureFunction1"](40,ie,t.showPreview?"none":"block")),b["\u0275\u0275advance"](2),b["\u0275\u0275classProp"]("reserve-span-show",t.outlineCollapse)("article-outline-show-wrapper",!t.outlineCollapse),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("origin",t.origin)("needBorder",!0),b["\u0275\u0275advance"](1),b["\u0275\u0275propertyInterpolate"]("nzTooltipTitle",t.reserveTitle),b["\u0275\u0275property"]("nzTooltipPlacement","top"),b["\u0275\u0275advance"](1),b["\u0275\u0275classMap"](t.outlineCollapse?"icon-pin-down-left":"icon-pin-down"),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",t.outlineCollapse),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngStyle",t.fullScreenCtrl?b["\u0275\u0275pureFunction0"](42,oe):null),b["\u0275\u0275advance"](4),b["\u0275\u0275property"]("ngIf",!t.showPreview&&!t.fullScreenCtrl),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngForOf",t.tabArr),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!t.showPreview&&"document"===t.categoryType),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",t.showPreview),b["\u0275\u0275advance"](2),b["\u0275\u0275classProp"]("hidden",!t.showTemplate),b["\u0275\u0275property"]("ngStyle",b["\u0275\u0275pureFunction1"](43,re,t.showPreview?"hidden":"visible")),b["\u0275\u0275advance"](1),b["\u0275\u0275classProp"]("hidden",t.showTemplate),b["\u0275\u0275property"]("ngStyle",b["\u0275\u0275pureFunction1"](45,re,t.showPreview?"hidden":"visible")),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",t.showLoading),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("hidden",!t.richTextRemoterShow),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngStyle",b["\u0275\u0275pureFunction1"](47,ae,t.richTextRemoterInnerWidth+"px")))},directives:[S.o,S.n,S.m,E.a,M.a,P.d,I.a,k.a,T.a,D.d,D.k,D.l,A.a,z.a,R.a,L.a],pipes:[x.b],styles:['.locking-tip-box[_ngcontent-%COMP%]{width:280px;background-color:#fff;padding:16px;display:flex;flex-direction:column;justify-content:space-between;border-radius:4px;box-shadow:0 0 6px rgba(0,0,0,.14);position:relative}.locking-tip-box[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%]{color:#5f5f5f;font-size:16px;margin-right:8px}.locking-tip-box[_ngcontent-%COMP%]   .tip-button[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:row-reverse}.locking-tip-box[_ngcontent-%COMP%]   .tip-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;font-size:14px;color:#fff;background-color:#23c6c8;border:none;padding:0 9px;height:28px}.locking-tip-box[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;color:rgba(0,0,0,.45);padding:8px;top:0;right:0}  .locking-tooltip .ant-tooltip-arrow .ant-tooltip-arrow-content{background-color:#fff}  .locking-tooltip .ant-tooltip-inner{padding:0;background-color:#fff;box-shadow:none}.reload-tips[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]{display:flex;padding:16px}.reload-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]{margin-right:12px;flex:0 0 auto}.reload-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:20px;color:#fa0}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]{flex:1 1 auto}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%]{font-size:16px;color:#333}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-content[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-content[_ngcontent-%COMP%]{color:#5f5f5f;font-size:14px;margin:8px 0}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:28px;line-height:28px;border-radius:4px;padding:0 11px;margin-right:12px}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.cancle[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.cancle[_ngcontent-%COMP%]{color:#23c6c8;border-color:#23c6c8}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.reload[_ngcontent-%COMP%], .reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.save-quit[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.reload[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.save-quit[_ngcontent-%COMP%]{color:#fff;border:none;background-color:#23c6c8}.wait-collab-tips[_ngcontent-%COMP%]{color:#5f5f5f;padding:18px 16px;background-color:#fff;font-size:12px;box-shadow:0 0 6px rgba(0,0,0,.14);border-radius:4px}  .notification-box.ant-notification-notice{padding:0}.create-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 126px)}.update-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 164px)}[_nghost-%COMP%]     .vditor-toolbar{background-color:#fff;border-bottom:0}[_nghost-%COMP%]     .vditor, [_nghost-%COMP%]     .vditor-ir pre.vditor-reset{border:none}[_nghost-%COMP%]     .vditor-sv{background-color:#fff}[_nghost-%COMP%]     .vditor-toolbar--pin{padding-left:0!important}[_nghost-%COMP%]     .vditor-toolbar__divider{position:relative;top:3px}[_nghost-%COMP%]     .vditor-toolbar__item{top:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped{width:30px;height:30px;padding:5px;border-radius:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped:hover{background:#dee0e2;color:#222f3e}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped input{width:30px;height:30px}[_nghost-%COMP%]     .vditor-hint button:not(.vditor-menu--disabled):hover{background-color:#dee0e2!important;color:#676a6c!important}[_nghost-%COMP%]     .vditor-menu--current{color:#23c6c8!important}[_nghost-%COMP%]     .vditor-reset h1, [_nghost-%COMP%]     .vditor-reset h2{border-bottom:0}[_nghost-%COMP%]     .vditor-ir .vditor-reset{padding:10px 35px!important}[_nghost-%COMP%]     .vditor-ir pre.vditor-reset:focus{background-color:#fff}[_nghost-%COMP%]     .ant-tabs-tab+.ant-tabs-tab{margin:0}[_nghost-%COMP%]     .toolbar .tox-editor-header{border:none}[_nghost-%COMP%]     .doc-cnt, [_nghost-%COMP%]     .md-editor textarea{min-height:900px}[_nghost-%COMP%]     .doc-cnt::-webkit-scrollbar{display:none}[_nghost-%COMP%]     .create-article-container .toolbar{position:fixed;top:10px;display:flex;justify-content:center;z-index:1}[_nghost-%COMP%]     .create-article-container .tox-toolbar__overflow{max-width:50px}[_nghost-%COMP%]     .create-article-container .box{height:100%}[_nghost-%COMP%]     .vditor-toolbar--pin{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info{position:fixed!important;top:50px;left:50%;transform:translateX(-50%);display:flex!important;justify-content:center;align-items:center;z-index:1;color:#8a6d3b;padding:2px 0;background-color:#fcf8e3;border-color:#faebcc;font-size:12px;height:36px}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info .fa-exclamation-triangle{margin-top:2px}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info .icon-cancel{margin-top:2px;padding-left:20px}.create-article-wrapper[_ngcontent-%COMP%]   .md-toolbar[_ngcontent-%COMP%]{position:relative;top:-5px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .reserve-span-show[_ngcontent-%COMP%]{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]{min-width:24px;max-width:340px;max-height:calc(100vh - 100px);position:fixed;overflow-y:auto;margin-top:24px;padding:12px;border-radius:4px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-index[_ngcontent-%COMP%]{z-index:100}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-show[_ngcontent-%COMP%]{min-width:300px;min-height:160px;background:#fff;padding:12px;box-shadow:0 0 6px rgba(0,0,0,.08)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-show-wrapper[_ngcontent-%COMP%]{background:#f9f9f9;box-shadow:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]:hover   .reserve-span-show[_ngcontent-%COMP%]{display:block}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]:hover   .article-hidden-wrapper[_ngcontent-%COMP%]{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-hidden-wrapper[_ngcontent-%COMP%]{transform:rotateY(180deg);display:block;position:fixed;top:70px;left:15px;width:24px;max-height:calc(100vh - 280px);padding:12px 0;color:#e5e5e5;overflow:hidden;z-index:1;cursor:pointer}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-style[_ngcontent-%COMP%]{display:flex;height:20px;width:100%;margin-bottom:8px;line-height:20px;font-size:12px;font-weight:400}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-style[_ngcontent-%COMP%]:before{content:"";flex:0 0 auto;margin:auto 7px auto 0;height:2px;width:24px;padding-left:1px;background:currentColor}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]{color:#23c6c8!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon[_ngcontent-%COMP%]{position:absolute;top:25px;right:30px;z-index:10}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon.collapsed[_ngcontent-%COMP%]{transform:rotate(0deg)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]{position:absolute;top:55px;left:-40px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]{background:#23c6c8!important;height:4px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-content-styl[_ngcontent-%COMP%]{width:100%}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]{list-style:none;height:26px;line-height:26px;color:#999;font-size:12px;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%]   .li-word-styl[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]   .li-word-styl[_ngcontent-%COMP%]{position:absolute;min-width:8px;top:12px;height:2px;left:0;background:#676a6c6e;max-width:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]{color:#aaa;font-size:14px;margin-left:20px;line-height:36px;display:flex}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]{display:flex}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   .nav-item-width[_ngcontent-%COMP%]{max-width:140px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   .nav-item-width[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 6px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .page[_ngcontent-%COMP%]{padding-top:12px;background-color:#fff;border:1px solid #e8e8e8;box-shadow:0 2px 8px #73737314}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .page-style[_ngcontent-%COMP%]{padding-top:0}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .create-article-height[_ngcontent-%COMP%]{min-height:calc(100vh - 62px)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .update-article-height[_ngcontent-%COMP%]{min-height:calc(100vh - 100px)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .sv-markdown-title[_ngcontent-%COMP%]{display:flex;background:#fafbfc;margin-bottom:-2px;flex:1;padding-top:12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .input-color[_ngcontent-%COMP%]{background:#fafbfc;max-width:800px;margin:0 auto;color:#434343!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1 1 auto;border:none;outline:none;font-weight:700;font-style:normal;font-size:32px;color:#23c6c8;margin-bottom:0;margin-top:0}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .input-style[_ngcontent-%COMP%]{flex:1;padding-right:0;padding-top:12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]{margin-right:18px;text-align:center;line-height:30px;flex:0 0 30px;height:30px;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:24px;vertical-align:top;transition:all .2s}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .position-child-div[_ngcontent-%COMP%]{height:1px;width:100%;background:#fff}.header-shadow[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-shadow[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%], .header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:0 0 280px}.header-shadow[_ngcontent-%COMP%]   .markdown-title[_ngcontent-%COMP%]{flex:0 0 120px}.header-shadow[_ngcontent-%COMP%]   .markdown-buttons[_ngcontent-%COMP%]{flex:0 0 280px}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{flex:1 1 auto}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .tox-toolbar__primary{display:flex;justify-content:center}.header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;font-weight:700;font-style:normal;font-size:16px;color:#676a6c}.header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .collab-users[_ngcontent-%COMP%]{margin-left:22px}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header{display:flex;align-items:center;justify-content:center}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header .md-controls{width:30px;text-align:center}.template-list[_ngcontent-%COMP%]{margin-top:20px;height:calc(100% - 40px)}.template-list[_ngcontent-%COMP%]   .icon-to-right[_ngcontent-%COMP%]{cursor:pointer;top:16px;z-index:1}.create-article-wrapper[_ngcontent-%COMP%]   .active-full-screen[_ngcontent-%COMP%]{width:100%!important;height:100%;top:0;margin-top:0!important;overflow:hidden}.create-article-wrapper[_ngcontent-%COMP%]   .content.flex-j-c[_ngcontent-%COMP%]{justify-content:center!important}.create-article-wrapper[_ngcontent-%COMP%]   .right.non-width[_ngcontent-%COMP%]{flex:0}.tag-list[_ngcontent-%COMP%]{background:#fff}.tag-manager[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;display:inline-block;width:100%;padding-bottom:12px}.small-btn-warp[_ngcontent-%COMP%]{top:0;padding-top:36px;height:100%;position:-webkit-sticky;position:sticky}.small-btn-warp[_ngcontent-%COMP%]   .small-btn[_ngcontent-%COMP%]{margin-bottom:8px;width:26px;height:22px;line-height:22px;display:flex;justify-content:center;background:#eee;color:#676a6c;cursor:pointer;border-radius:11px;position:relative;left:-4px}[_nghost-%COMP%]     .tag-list .ant-dropdown-link{margin-left:0!important}[_nghost-%COMP%]     .template-list .ant-tabs{height:100%}[_nghost-%COMP%]     .template-list .ant-tabs-content{height:100%}[_nghost-%COMP%]     .template-list #scrollParentWikiComment{height:100%;padding:0}[_nghost-%COMP%]     .template-list .comment-input{display:none}[_nghost-%COMP%]     .template-list .select-wrapper{display:none!important}[_nghost-%COMP%]     .template-list .ant-tabs-tab-active .ant-tabs-tab-btn{color:#23c6c8!important}[_nghost-%COMP%]     .template-list .ant-tabs-ink-bar{background-color:#23c6c8!important}[_nghost-%COMP%]     .template-list .ant-tabs-nav{position:relative;left:40px}[_nghost-%COMP%]     .template-list .comment-wrapper #bottomPositionWikiComment, [_nghost-%COMP%]     .template-list .comment-wrapper #topPositionWikiComment{background:transparent}[_nghost-%COMP%]     .template-list .comment-wrapper .annotation-item{background:#fff}[_nghost-%COMP%]     #previewWrapper, [_nghost-%COMP%]     .doc-cnt, [_nghost-%COMP%]     .md-editor .auto-growing:after, [_nghost-%COMP%]     .md-input{padding:20px!important}  .confirm-cancel-modal .ant-modal-content{border-radius:4px;height:160px;position:relative;box-shadow:0 0 8px rgba(0,0,0,.2)}  .confirm-cancel-modal .ant-modal-header{padding:20px 0 16px 20px;border-bottom:none}  .confirm-cancel-modal .ant-modal-header .ant-modal-title{font-size:20px;color:#333}  .confirm-cancel-modal .ant-modal-body{padding-left:20px;font-size:14px;color:#676a6c}  .confirm-cancel-modal .ant-modal-footer{position:absolute;bottom:32px;right:32px;padding:0;border-top:none}  .confirm-cancel-modal .ant-modal-footer button{margin-right:12px;margin-left:0}  .confirm-cancel-modal .ant-modal-footer button:first-child{background:#23c6c8;color:#fff}  .confirm-cancel-modal .ant-modal-footer button:last-child{margin-right:0}.loading-wrapper[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;background:hsla(0,0%,100%,.7)}.loading-wrapper[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.remote-scroll[_ngcontent-%COMP%]{position:fixed;left:0;right:0;z-index:100;bottom:0;overflow:scroll hidden}.remote-scroll[_ngcontent-%COMP%]   .remote-scroll-inner[_ngcontent-%COMP%]{width:150%;height:1px}.converting-mask[_ngcontent-%COMP%]{z-index:5000;position:fixed;left:0;right:0;top:0;bottom:0;background-color:hsla(0,0%,100%,.7)}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin-top:20px;margin-right:20px;width:330px;height:78px;display:flex;background-color:#fff;border:1px solid #eaeaea;filter:drop-shadow(rgba(0,0,0,.1) 0 2px 12px);border-radius:5px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{flex:50px 0 0;text-align:center;line-height:52px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:20px;color:#aaa}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:auto 1 1}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;color:#333;font-size:16px;line-height:50px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{color:#5f5f5f;font-size:12px;line-height:1}.tag-pop-box[_ngcontent-%COMP%]{position:relative}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#afe8e9;position:absolute;right:-11px;top:90px}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item1[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;background-color:#23c6c8;margin:3px;position:relative}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item1[_ngcontent-%COMP%]:after{content:"";display:block;width:12px;height:12px;border-radius:50%;background-color:#fff;position:absolute;top:2px;left:2px}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item2[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background-color:#fff;position:absolute;top:3px;left:3px;cursor:pointer}.menu-popover-list[_ngcontent-%COMP%]{width:260px;overflow:hidden}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-content[_ngcontent-%COMP%]{width:100%;overflow:hidden;margin-bottom:10px}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-content[_ngcontent-%COMP%]   .menu-popover-div[_ngcontent-%COMP%]{line-height:26px;margin:0;font-size:14px;cursor:pointer;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{position:relative;background:transparent;text-shadow:none;border-radius:4px}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:focus, .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:hover{outline:none}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{color:#23c6c8;border:1px solid #23c6c8}.doc-full-table[_ngcontent-%COMP%]{cursor:pointer;padding:10px 0;font-weight:400}.doc-full-table[_ngcontent-%COMP%]:hover{color:#23c6c8}.doc-full-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:rotate(90deg);display:inline-block}.doc-full-table[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}  .edit-artical-wide .mce-content-body>*{max-width:760px;margin:auto!important}  .edit-artical-wide input.article-title{max-width:736px;margin:auto;padding:5px}  .edit-artical-wide .width-table{max-width:100%!important}[_nghost-%COMP%]     .doc-cnt, [_nghost-%COMP%]     .md-editor textarea{min-height:200px}.create-article-wrapper[_ngcontent-%COMP%]{overflow-y:hidden;z-index:99;position:fixed;left:0;right:0;top:0;bottom:0;overflow:hidden;background:#f9f9f9}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]{position:absolute;z-index:1;left:0;right:0;width:100%;height:50px;background:#fff;box-shadow:0 4px 6px rgba(0,0,0,.04)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:50px;bottom:0;display:flex;overflow:auto;padding-bottom:10px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{align-self:flex-start;top:0;position:-webkit-sticky;position:sticky;flex:2 1 100px;max-width:340px;min-width:300px;overflow:hidden;height:100%}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .position-r[_ngcontent-%COMP%]{position:relative!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]{height:100%;position:-webkit-sticky;position:sticky;top:0;flex:0 0 0px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{top:36px;right:16px;font-size:18px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1 1 900px;overflow-x:hidden;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:0 12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .create-paragraph[_ngcontent-%COMP%]{color:#23c6c8;font-weight:700}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{display:block}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-weight:700;font-style:normal;font-size:32px;color:#999}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .article-title[_ngcontent-%COMP%]{color:#999!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]{text-align:end}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{position:absolute;right:20px;top:6px;font-size:18px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .tab-deleted-tip[_ngcontent-%COMP%]{height:42px;line-height:42px;font-size:26px}.hidden-h1[_ngcontent-%COMP%]{opacity:0;right:-100%;top:0;z-index:0}.img-wrapper-styl[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#8d71c6}.flex-item-left[_ngcontent-%COMP%]{display:inline-block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.flex-item-right[_ngcontent-%COMP%]{color:#999;margin-top:-5px;margin-left:20px}.feture-list-wrapper[_ngcontent-%COMP%]{background:#fff;height:100%;padding:10px}.hover-cursor-pointer[_ngcontent-%COMP%]{border-radius:3px}.hover-cursor-pointer[_ngcontent-%COMP%]:hover{cursor:pointer;background:#f5f5f5}li[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{padding:5px;margin:0 0 5px;list-style-type:none}'],data:{animation:[Object(m.l)("outlineToggle",[Object(m.i)("open",Object(m.j)({flex:"2 1 100px","min-width":"300px"})),Object(m.i)("closed",Object(m.j)({flex:"0 0 20px","min-width":"0px"})),Object(m.k)("open => closed",[Object(m.e)("0.2s ease-out")]),Object(m.k)("closed => open",[Object(m.e)("0.2s ease-out")])]),Object(m.l)("enterAnimation2",[Object(m.i)("open",Object(m.j)({opacity:1})),Object(m.i)("closed",Object(m.j)({opacity:0})),Object(m.k)("open => closed",[Object(m.e)("0s")]),Object(m.k)("closed => open",[Object(m.e)("1s ease-in")])])]}}),t}(h.a)},"3OLy":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("mrSG"),o=n("AA4e"),r=n("otx/"),a=n("pSv2"),c=n("aDQL"),l=n("fXoL"),s=n("tk/3"),d=function(){function e(e){this.http=e}return e.prototype.openWiki=function(e,t){void 0===t&&(t=[]),Object(c.a)().emit(r.b.wikiOpen,e,t)},e.prototype.lockWiki=function(e,t){return Object(i.b)(this,void 0,void 0,function(){var n,l,s;return Object(i.e)(this,function(i){switch(i.label){case 0:return s=(l=a.a).toUserInfo,[4,o.d];case 1:return n=s.apply(l,[i.sent()]),Object(c.a)().emit(r.b.wikiLock,e,t,n),[2]}})})},e.prototype.unlockWiki=function(e,t){Object(c.a)().emit(r.b.wikiUnlock,e,t)},e.prototype.exitCollabEdit=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,l;return Object(i.e)(this,function(i){switch(i.label){case 0:return l=(n=a.a).toUserInfo,[4,o.d];case 1:return t=l.apply(n,[i.sent()]),Object(c.a)().emit(r.b.wikiExitCollaboration,e,t.username),[2]}})})},e.prototype.reqestUnlock=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,l;return Object(i.e)(this,function(i){switch(i.label){case 0:return l=(n=a.a).toUserInfo,[4,o.d];case 1:return t=l.apply(n,[i.sent()]),Object(c.a)().emit(r.b.wikiRequestUnlock,e,t),[2]}})})},e.prototype.collaborationForceOpen=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,l;return Object(i.e)(this,function(i){switch(i.label){case 0:return l=(n=a.a).toUserInfo,[4,o.d];case 1:return t=l.apply(n,[i.sent()]),Object(c.a)().emit(r.b.wikiCollaborationForceOpen,e,t.username),[2]}})})},e.prototype.collaborationForceExit=function(e){Object(c.a)().emit(r.b.wikiCollaborationForceExit,e)},e.prototype.requestCollaboration=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,l;return Object(i.e)(this,function(i){switch(i.label){case 0:return l=(n=a.a).toUserInfo,[4,o.d];case 1:return t=l.apply(n,[i.sent()]),Object(c.a)().emit(r.b.wikiRequestCollabration,e,t),[2]}})})},e.prototype.joinCollaborationReport=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return[4,o.d];case 1:return t=n.sent(),[2,new Promise(function(n,i){Object(c.a)().emit(r.b.wikiJoinCollabration,e,t.user_name,function(e){e?i(e):n()})})]}})})},e.prototype.convertWebstrateSuccess=function(e){Object(c.a)().emit(r.b.wikiConvertCollaborationComplete,e)},e.prototype.convertWebstrateFailed=function(e,t){Object(c.a)().emit(r.b.wikiConvertCollaborationFailed,e,t)},e.prototype.createWebstrate=function(e,t){return new Promise(function(n){var i=document.createElement("iframe");i.setAttribute("src",location.origin+"/collab-ui/"+t+"/"),i.style.display="none",document.body.appendChild(i);var o=function(r){var a,c;"webstrateReady"===(null===(a=r.data)||void 0===a?void 0:a.type)&&i.contentWindow.postMessage({type:"setDoc",data:e},location.origin),"docSaved"===(null===(c=r.data)||void 0===c?void 0:c.type)&&(window.removeEventListener("message",o),n(t),document.body.removeChild(i))};window.addEventListener("message",o)})},e.prototype.queryCollaboration=function(e){return this.http.get("/devops-knowledge-management/api/wiki/collaboration",{params:{wikiSn:e,type:"collaboration"}})},e.prototype.cleanCollaboration=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return[4,o.d];case 1:return t=n.sent(),[2,this.http.put("/devops-knowledge-management/api/wiki/collaboration",{user:t.user_name,wikiSn:[e],operationType:"clean"}).toPromise()]}})})},e.prototype.joinCollaboration=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return[4,o.d];case 1:return t=n.sent(),[2,this.http.put("/devops-knowledge-management/api/wiki/collaboration",{user:t.user_name,wikiSn:[e],operationType:"join"}).toPromise()]}})})},e.prototype.leaveCollaboration=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return[4,o.d];case 1:return t=n.sent(),[2,this.http.put("/devops-knowledge-management/api/wiki/collaboration",{user:t.user_name,wikiSn:[e],operationType:"exit"}).toPromise()]}})})},e.prototype.removeLock=function(e){return this.http.delete("/devops-knowledge-management/api/wiki/lock",{params:{entity_sn:e}})},e.prototype.addLock=function(e){return this.http.post("/devops-knowledge-management/api/wiki/lock",null,{params:{entity_sn:e}})},e.prototype.queryLock=function(e){return this.http.post("/devops-knowledge-management/api/query/wiki/lock",e)},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](s.c))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"3giW":function(e,t,n){var i=n("GuN1"),o=n("yd89"),r=n("u33/"),a=n("X72n");e.exports=function(e,t){return i(e)||o(e,t)||r(e,t)||a()}},"4P1S":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("fujP"),o=n("fXoL"),r=n("sYmb"),a=function(){function e(e){this.translate=e}return e.prototype.getFormatedPerson=function(e,t){return e&&e.name?"en"===t&&e.name_full?e.name_full:e.account?e.name+" "+e.account:e.name:""},e.prototype.getFormatedPeople=function(e,t){return"string"==typeof e?e:e.map(function(e){return"zh"===t?e.name+" "+e.account:e.name_full}).join("zh"===t?"\uff0c":",")},e.prototype.getFomatedLabel=function(e,t,n,i){if(!e)return"";for(t=0;t<e.length;t++)"PMS"!==(i=e[t]).title&&(n+=i.title+(t===e.length-1?"":"\uff0c"));return n},e.prototype.getFormatedAssignedPlan=function(e,t,n){n+=e.version_number;var i=e.expire_date?e.expire_date.replace(/-/g,"."):"";for(n+="("+(e.expect_start_time?e.expect_start_time.replace(/-/g,"."):"")+"~"+i+")",t=0;t<e.assigned_milestones.length;t++)n+=" \u25aa "+e.assigned_milestones[t].title;return n},e.prototype.getFormatedDomainName=function(e,t,n){return Array.isArray(e)&&(t=e.map(function(e){return"en"===n&&e.title_en||e.title}).join("/")),t},e.prototype.transform=function(e,t){var n=this,i="",o=localStorage.getItem("NG_TRANSLATE_LANG_KEY")||"zh",r=this.translate?this.translate.currentLang:o,a={person:function(){return n.getFormatedPerson(e,r)},people:function(){return n.getFormatedPeople(e,r)},labels:function(){return n.getFomatedLabel(e,0,i,void 0)},req_sources:function(){return n.formatReqSources(e,i,r)},assigned_plans:function(){return n.getFormatedAssignedPlan(e,0,i)},joinDomainName:function(){return n.getFormatedDomainName(e,i,r)},release_plans:function(){i+=e.title;var t=e.start_date?e.start_date.replace(/-/g,"."):"",n=e.end_date?e.end_date.replace(/-/g,"."):"";return i+="("+t+"~"+n+")"},assigned_domain:function(){return"en"===r?e.short_title||e.title_en||e.title:e.short_title||e.title},roadmap:function(){return"en"===r&&e.serviceEnTitle||e.serviceCNTitle},joinFeatureSetName:function(){return Array.isArray(e)&&(i=e.map(function(e){return e.title}).join("/")),i}}[t];if(a)return a()},e.prototype.formatReqSources=function(e,t,n){for(var o=0;o<e.length;o++){var r=e[o];o>0&&(t+=" "),Object(i.a)(r.cloud)||(t+="en"===n&&r.cloud.title_en||r.cloud.title),Object(i.a)(r.region)||(t+=" "+this.translate.instant("en"===n&&r.region.title_en||r.region.title)),r.customer&&!Object(i.a)(r.customer.id)&&(t+=" \u2022"+this.translate.instant("en"===n&&r.customer.title_en||r.customer.title))}return t},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](r.c))},e.\u0275pipe=o["\u0275\u0275definePipe"]({name:"workitemAttr",type:e,pure:!0}),e}()},"5+WD":function(e,t,n){"use strict";n.d(t,"a",function(){return ye}),n.d(t,"b",function(){return fe}),n.d(t,"c",function(){return be}),n.d(t,"d",function(){return he}),n.d(t,"e",function(){return de}),n.d(t,"f",function(){return we}),n.d(t,"g",function(){return X}),n.d(t,"h",function(){return Y});var i=n("95OS"),o=n("8vcG"),r=n("MGFw"),a=n("WtWf"),c=n("fXoL"),l=n("ofXK"),s=n("vxfF"),d=n("nLfN"),p=n("8LU1"),u=n("XNiG"),m=n("quSY"),h=n("l5mm"),g=n("eNwd"),f=n("HDdC"),v=n("VRyK"),b=n("1G5W"),C=n("JX91"),y=n("lJxs"),x=n("IzEk"),w=n("vkgz"),_=n("eIep"),O=n("cH1L");function S(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function E(e,t){var n=t?"":"none";S(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function M(e,t){var n=e.style;n.position=t?"":"fixed",n.top=n.opacity=t?"":"0",n.left=t?"":"-999em"}function P(e){var t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function I(e,t){return e.getPropertyValue(t).split(",").map(function(e){return e.trim()})}function k(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}function T(e,t,n){return n>=e.top&&n<=e.bottom&&t>=e.left&&t<=e.right}function D(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function A(e,t,n,i){var o=e.width*t,r=e.height*t;return i>e.top-r&&i<e.bottom+r&&n>e.left-o&&n<e.right+o}var z=function(){function e(t,n){Object(r.a)(this,e),this._document=t,this._viewportRuler=n,this.positions=new Map}return Object(a.a)(e,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(e){var t=this;this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach(function(e){t.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:k(e)})})}},{key:"handleScroll",value:function(e){var t=e.target,n=this.positions.get(t);if(!n)return null;var i,o,r=t===this._document?t.documentElement:t,a=n.scrollPosition;if(t===this._document){var c=this._viewportRuler.getViewportScrollPosition();i=c.top,o=c.left}else i=t.scrollTop,o=t.scrollLeft;var l=a.top-i,s=a.left-o;return this.positions.forEach(function(e,n){e.clientRect&&t!==n&&r.contains(n)&&D(e.clientRect,l,s)}),a.top=i,a.left=o,{top:l,left:s}}}]),e}();function R(e){var t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),i=e.nodeName.toLowerCase();t.removeAttribute("id");for(var o=0;o<n.length;o++)n[o].removeAttribute("id");return"canvas"===i?V(e,t):"input"!==i&&"select"!==i&&"textarea"!==i||j(e,t),L("canvas",e,t,V),L("input, textarea, select",e,t,j),t}function L(e,t,n,i){var o=t.querySelectorAll(e);if(o.length)for(var r=n.querySelectorAll(e),a=0;a<o.length;a++)i(o[a],r[a])}var N=0;function j(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name="mat-clone-".concat(t.name,"-").concat(N++))}function V(e,t){var n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch(i){}}var F=Object(d.e)({passive:!0}),B=Object(d.e)({passive:!1}),U=function(){function e(t,n,i,o,a,c){var l=this;Object(r.a)(this,e),this._config=n,this._document=i,this._ngZone=o,this._viewportRuler=a,this._dragDropRegistry=c,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new u.a,this._pointerMoveSubscription=m.a.EMPTY,this._pointerUpSubscription=m.a.EMPTY,this._scrollSubscription=m.a.EMPTY,this._resizeSubscription=m.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new u.a,this.started=new u.a,this.released=new u.a,this.ended=new u.a,this.entered=new u.a,this.exited=new u.a,this.dropped=new u.a,this.moved=this._moveEvents,this._pointerDown=function(e){if(l.beforeStarted.next(),l._handles.length){var t=l._handles.find(function(t){var n=e.target;return!!n&&(n===t||t.contains(n))});!t||l._disabledHandles.has(t)||l.disabled||l._initializeDragSequence(t,e)}else l.disabled||l._initializeDragSequence(l._rootElement,e)},this._pointerMove=function(e){var t=l._getPointerPositionOnPage(e);if(l._hasStartedDragging){l._boundaryElement&&(l._previewRect&&(l._previewRect.width||l._previewRect.height)||(l._previewRect=(l._preview||l._rootElement).getBoundingClientRect())),e.preventDefault();var n=l._getConstrainedPointerPosition(t);if(l._hasMoved=!0,l._lastKnownPointerPosition=t,l._updatePointerDirectionDelta(n),l._dropContainer)l._updateActiveDropContainer(n,t);else{var i=l._activeTransform;if(i.x=n.x-l._pickupPositionOnPage.x+l._passiveTransform.x,i.y=n.y-l._pickupPositionOnPage.y+l._passiveTransform.y,l._applyRootElementTransform(i.x,i.y),"undefined"!=typeof SVGElement&&l._rootElement instanceof SVGElement){var o="translate(".concat(i.x," ").concat(i.y,")");l._rootElement.setAttribute("transform",o)}}l._moveEvents.observers.length&&l._ngZone.run(function(){l._moveEvents.next({source:l,pointerPosition:n,event:e,distance:l._getDragDistance(n),delta:l._pointerDirectionDelta})})}else if(Math.abs(t.x-l._pickupPositionOnPage.x)+Math.abs(t.y-l._pickupPositionOnPage.y)>=l._config.dragStartThreshold){var r=Date.now()>=l._dragStartTime+l._getDragStartDelay(e),a=l._dropContainer;if(!r)return void l._endDragSequence(e);a&&(a.isDragging()||a.isReceiving())||(e.preventDefault(),l._hasStartedDragging=!0,l._ngZone.run(function(){return l._startDragSequence(e)}))}},this._pointerUp=function(e){l._endDragSequence(e)},this.withRootElement(t).withParent(n.parentDragRef||null),this._parentPositions=new z(i,a),c.registerDragItem(this)}return Object(a.a)(e,[{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(e){var t=Object(p.c)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(function(e){return E(e,t)}))}},{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(e){var t=this;this._handles=e.map(function(e){return Object(p.e)(e)}),this._handles.forEach(function(e){return E(e,t.disabled)}),this._toggleNativeDragInteractions();var n=new Set;return this._disabledHandles.forEach(function(e){t._handles.indexOf(e)>-1&&n.add(e)}),this._disabledHandles=n,this}},{key:"withPreviewTemplate",value:function(e){return this._previewTemplate=e,this}},{key:"withPlaceholderTemplate",value:function(e){return this._placeholderTemplate=e,this}},{key:"withRootElement",value:function(e){var t=this,n=Object(p.e)(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(function(){n.addEventListener("mousedown",t._pointerDown,B),n.addEventListener("touchstart",t._pointerDown,F)}),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(e){var t=this;return this._boundaryElement=e?Object(p.e)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(function(){return t._containInsideBoundaryOnResize()})),this}},{key:"withParent",value:function(e){return this._parentDragRef=e,this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&G(this._rootElement),G(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),E(e,!0))}},{key:"enableHandle",value:function(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),E(e,this.disabled))}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"_withDropContainer",value:function(e){this._dropContainer=e}},{key:"getFreeDragPosition",value:function(){var e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}},{key:"setFreeDragPosition",value:function(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}},{key:"_sortFromLastPointerPosition",value:function(){var e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&G(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&G(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(e){var t=this;this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(function(){t._cleanupDragArtifacts(e),t._cleanupCachedDimensions(),t._dragDropRegistry.stopDragging(t)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(function(){t.ended.next({source:t,distance:t._getDragDistance(t._getPointerPositionOnPage(e))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}},{key:"_startDragSequence",value:function(e){q(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var t=this._dropContainer;if(t){var n=this._rootElement,i=n.parentNode,o=this._preview=this._createPreviewElement(),r=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();i.insertBefore(a,n),M(n,!1),this._document.body.appendChild(i.replaceChild(r,n)),function(e,t){return t||e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.body}(this._document,c).appendChild(o),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(e,t){var n=this;this._parentDragRef&&t.stopPropagation();var i=this.isDragging(),o=q(t),r=!o&&0!==t.button,a=this._rootElement,c=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),!(i||r||c)){this._handles.length&&(this._rootElementTapHighlight=a.style.webkitTapHighlightColor||"",a.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(function(e){n._updateOnScroll(e)}),this._boundaryElement&&(this._boundaryRect=k(this._boundaryElement));var l=this._previewTemplate;this._pickupPositionInElement=l&&l.template&&!l.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);var s=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:s.x,y:s.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}}},{key:"_cleanupDragArtifacts",value:function(e){var t=this;M(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(function(){var n=t._dropContainer,i=n.getItemIndex(t),o=t._getPointerPositionOnPage(e),r=t._getDragDistance(t._getPointerPositionOnPage(e)),a=n._isOverContainer(o.x,o.y);t.ended.next({source:t,distance:r}),t.dropped.next({item:t,currentIndex:i,previousIndex:t._initialIndex,container:n,previousContainer:t._initialContainer,isPointerOverContainer:a,distance:r}),n.drop(t,i,t._initialIndex,t._initialContainer,a,r),t._dropContainer=t._initialContainer})}},{key:"_updateActiveDropContainer",value:function(e,t){var n=this,i=e.x,o=e.y,r=t.x,a=t.y,c=this._initialContainer._getSiblingContainerFromPosition(this,i,o);!c&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,o)&&(c=this._initialContainer),c&&c!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=c,n._dropContainer.enter(n,i,o,c===n._initialContainer&&c.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:c,currentIndex:c.getItemIndex(n)})}),this._dropContainer._startScrollingIfNecessary(r,a),this._dropContainer._sortItem(this,i,o,this._pointerDirectionDelta),this._preview.style.transform=W(i-this._pickupPositionInElement.x,o-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var e,t=this._previewTemplate,n=this.previewClass,i=t?t.template:null;if(i&&t){var o=t.matchSize?this._rootElement.getBoundingClientRect():null,r=t.viewContainer.createEmbeddedView(i,t.context);r.detectChanges(),e=$(r,this._document),this._previewRef=r,t.matchSize?K(e,o):e.style.transform=W(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var a=this._rootElement;K(e=R(a),a.getBoundingClientRect())}return S(e.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"".concat(this._config.zIndex||1e3)}),E(e,!1),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(function(t){return e.classList.add(t)}):e.classList.add(n)),e}},{key:"_animatePreviewToPlaceholder",value:function(){var e=this;if(!this._hasMoved)return Promise.resolve();var t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=W(t.left,t.top);var n=function(e){var t=getComputedStyle(e),n=I(t,"transition-property"),i=n.find(function(e){return"transform"===e||"all"===e});if(!i)return 0;var o=n.indexOf(i),r=I(t,"transition-duration"),a=I(t,"transition-delay");return P(r[o])+P(a[o])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(t){var i=function n(i){(!i||i.target===e._preview&&"transform"===i.propertyName)&&(e._preview.removeEventListener("transitionend",n),t(),clearTimeout(o))},o=setTimeout(i,1.5*n);e._preview.addEventListener("transitionend",i)})})}},{key:"_createPlaceholderElement",value:function(){var e,t=this._placeholderTemplate,n=t?t.template:null;return n?(this._placeholderRef=t.viewContainer.createEmbeddedView(n,t.context),this._placeholderRef.detectChanges(),e=$(this._placeholderRef,this._document)):e=R(this._rootElement),e.classList.add("cdk-drag-placeholder"),e}},{key:"_getPointerPositionInElement",value:function(e,t){var n=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,o=i?i.getBoundingClientRect():n,r=q(t)?t.targetTouches[0]:t,a=this._getViewportScrollPosition();return{x:o.left-n.left+(r.pageX-o.left-a.left),y:o.top-n.top+(r.pageY-o.top-a.top)}}},{key:"_getPointerPositionOnPage",value:function(e){var t=this._getViewportScrollPosition(),n=q(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=n.pageX-t.left,o=n.pageY-t.top;if(this._ownerSVGElement){var r=this._ownerSVGElement.getScreenCTM();if(r){var a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(r.inverse())}}return{x:i,y:o}}},{key:"_getConstrainedPointerPosition",value:function(e){var t=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(e,this):e,i=n.x,o=n.y;if("x"===this.lockAxis||"x"===t?o=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==t||(i=this._pickupPositionOnPage.x),this._boundaryRect){var r=this._pickupPositionInElement,a=r.x,c=r.y,l=this._boundaryRect,s=this._previewRect,d=l.top+c,p=l.bottom-(s.height-c);i=H(i,l.left+a,l.right-(s.width-a)),o=H(o,d,p)}return{x:i,y:o}}},{key:"_updatePointerDirectionDelta",value:function(e){var t=e.x,n=e.y,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-o.x),a=Math.abs(n-o.y);return r>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=n>o.y?1:-1,o.y=n),i}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,E(this._rootElement,e))}}},{key:"_removeRootElementListeners",value:function(e){e.removeEventListener("mousedown",this._pointerDown,B),e.removeEventListener("touchstart",this._pointerDown,F)}},{key:"_applyRootElementTransform",value:function(e,t){var n=W(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}},{key:"_getDragDistance",value:function(e){var t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var e=this._passiveTransform,t=e.x,n=e.y;if(!(0===t&&0===n||this.isDragging())&&this._boundaryElement){var i=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(!(0===i.width&&0===i.height||0===o.width&&0===o.height)){var r=i.left-o.left,a=o.right-i.right,c=i.top-o.top,l=o.bottom-i.bottom;i.width>o.width?(r>0&&(t+=r),a>0&&(t-=a)):t=0,i.height>o.height?(c>0&&(n+=c),l>0&&(n-=l)):n=0,t===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:t})}}}},{key:"_getDragStartDelay",value:function(e){var t=this.dragStartDelay;return"number"==typeof t?t:q(e)?t.touch:t?t.mouse:0}},{key:"_updateOnScroll",value:function(e){var t=this._parentPositions.handleScroll(e);if(t){var n=e.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&D(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}},{key:"_getShadowRoot",value:function(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Object(d.c)(this._rootElement)),this._cachedShadowRoot}}]),e}();function W(e,t){return"translate3d(".concat(Math.round(e),"px, ").concat(Math.round(t),"px, 0)")}function H(e,t,n){return Math.max(t,Math.min(n,e))}function G(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function q(e){return"t"===e.type[0]}function $(e,t){var n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];var i=t.createElement("div");return n.forEach(function(e){return i.appendChild(e)}),i}function K(e,t){e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.transform=W(t.left,t.top)}function X(e,t,n){var i=Q(t,e.length-1),o=Q(n,e.length-1);if(i!==o){for(var r=e[i],a=o<i?-1:1,c=i;c!==o;c+=a)e[c]=e[c+a];e[o]=r}}function Y(e,t,n,i){var o=Q(n,e.length-1),r=Q(i,t.length);e.length&&t.splice(r,0,e.splice(o,1)[0])}function Q(e,t){return Math.max(0,Math.min(t,e))}var J=function(){function e(t,n,i,o,a){var c=this;Object(r.a)(this,e),this._dragDropRegistry=n,this._ngZone=o,this._viewportRuler=a,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.beforeStarted=new u.a,this.entered=new u.a,this.exited=new u.a,this.dropped=new u.a,this.sorted=new u.a,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=m.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new u.a,this._cachedShadowRoot=null,this._startScrollInterval=function(){c._stopScrolling(),Object(h.a)(0,g.a).pipe(Object(b.a)(c._stopScrollTimers)).subscribe(function(){var e=c._scrollNode,t=c.autoScrollStep;1===c._verticalScrollDirection?ee(e,-t):2===c._verticalScrollDirection&&ee(e,t),1===c._horizontalScrollDirection?te(e,-t):2===c._horizontalScrollDirection&&te(e,t)})},this.element=Object(p.e)(t),this._document=i,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new z(i,a)}return Object(a.a)(e,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){this._draggingStarted(),this._notifyReceivingSiblings()}},{key:"enter",value:function(e,t,n,i){var o;this._draggingStarted(),null==i?-1===(o=this.sortingDisabled?this._draggables.indexOf(e):-1)&&(o=this._getItemIndexFromPointerPosition(e,t,n)):o=i;var r=this._activeDraggables,a=r.indexOf(e),c=e.getPlaceholderElement(),l=r[o];if(l===e&&(l=r[o+1]),a>-1&&r.splice(a,1),l&&!this._dragDropRegistry.isDragging(l)){var s=l.getRootElement();s.parentElement.insertBefore(c,s),r.splice(o,0,e)}else if(this._shouldEnterAsFirstChild(t,n)){var d=r[0].getRootElement();d.parentNode.insertBefore(c,d),r.unshift(e)}else Object(p.e)(this.element).appendChild(c),r.push(e);c.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}},{key:"exit",value:function(e){this._reset(),this.exited.next({item:e,container:this})}},{key:"drop",value:function(e,t,n,i,o,r){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:i,isPointerOverContainer:o,distance:r})}},{key:"withItems",value:function(e){var t=this,n=this._draggables;return this._draggables=e,e.forEach(function(e){return e._withDropContainer(t)}),this.isDragging()&&(n.filter(function(e){return e.isDragging()}).every(function(t){return-1===e.indexOf(t)})?this._reset():this._cacheItems()),this}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"connectedTo",value:function(e){return this._siblings=e.slice(),this}},{key:"withOrientation",value:function(e){return this._orientation=e,this}},{key:"withScrollableParents",value:function(e){var t=Object(p.e)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t].concat(Object(o.a)(e)):e.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(e){return this._isDragging?Z("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,function(t){return t.drag===e}):this._draggables.indexOf(e)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(e,t,n,i){if(!this.sortingDisabled&&this._clientRect&&A(this._clientRect,.05,t,n)){var o=this._itemPositions,r=this._getItemIndexFromPointerPosition(e,t,n,i);if(!(-1===r&&o.length>0)){var a="horizontal"===this._orientation,c=Z(o,function(t){return t.drag===e}),l=o[r],s=l.clientRect,d=c>r?1:-1,p=this._getItemOffsetPx(o[c].clientRect,s,d),u=this._getSiblingOffsetPx(c,o,d),m=o.slice();X(o,c,r),this.sorted.next({previousIndex:c,currentIndex:r,container:this,item:e}),o.forEach(function(t,n){if(m[n]!==t){var i=t.drag===e,o=i?p:u,r=i?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=o,a?(r.style.transform="translate3d(".concat(Math.round(t.offset),"px, 0, 0)"),D(t.clientRect,0,o)):(r.style.transform="translate3d(0, ".concat(Math.round(t.offset),"px, 0)"),D(t.clientRect,o,0))}}),this._previousSwap.overlaps=T(s,t,n),this._previousSwap.drag=l.drag,this._previousSwap.delta=a?i.x:i.y}}}},{key:"_startScrollingIfNecessary",value:function(e,t){var n=this;if(!this.autoScrollDisabled){var o,r=0,a=0;if(this._parentPositions.positions.forEach(function(c,l){if(l!==n._document&&c.clientRect&&!o&&A(c.clientRect,.05,e,t)){var s=function(e,t,n,i){var o=ne(t,i),r=ie(t,n),a=0,c=0;if(o){var l=e.scrollTop;1===o?l>0&&(a=1):e.scrollHeight-l>e.clientHeight&&(a=2)}if(r){var s=e.scrollLeft;1===r?s>0&&(c=1):e.scrollWidth-s>e.clientWidth&&(c=2)}return[a,c]}(l,c.clientRect,e,t),d=Object(i.a)(s,2);a=d[1],((r=d[0])||a)&&(o=l)}}),!r&&!a){var c=this._viewportRuler.getViewportSize(),l=c.width,s=c.height,d={width:l,height:s,top:0,right:l,bottom:s,left:0};r=ne(d,t),a=ie(d,e),o=window}!o||r===this._verticalScrollDirection&&a===this._horizontalScrollDirection&&o===this._scrollNode||(this._verticalScrollDirection=r,this._horizontalScrollDirection=a,this._scrollNode=o,(r||a)&&o?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_draggingStarted",value:function(){var e=Object(p.e)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"_cacheParentPositions",value:function(){var e=Object(p.e)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}},{key:"_cacheItemPositions",value:function(){var e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(function(e){var t=e.getVisibleElement();return{drag:e,offset:0,clientRect:k(t)}}).sort(function(t,n){return e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top})}},{key:"_reset",value:function(){var e=this;this._isDragging=!1;var t=Object(p.e)(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(function(e){var t=e.getRootElement();t&&(t.style.transform="")}),this._siblings.forEach(function(t){return t._stopReceiving(e)}),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,o=t[e].clientRect,r=t[e+-1*n],a=o[i?"width":"height"]*n;if(r){var c=i?"left":"top",l=i?"right":"bottom";-1===n?a-=r.clientRect[c]-o[l]:a+=o[c]-r.clientRect[l]}return a}},{key:"_getItemOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,o=i?t.left-e.left:t.top-e.top;return-1===n&&(o+=i?t.width-e.width:t.height-e.height),o}},{key:"_shouldEnterAsFirstChild",value:function(e,t){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var o=n[n.length-1].clientRect;return i?e>=o.right:t>=o.bottom}var r=n[0].clientRect;return i?e<=r.left:t<=r.top}},{key:"_getItemIndexFromPointerPosition",value:function(e,t,n,i){var o=this,r="horizontal"===this._orientation,a=Z(this._itemPositions,function(a,c,l){var s=a.drag,d=a.clientRect;return s===e?l.length<2:(!i||s!==o._previousSwap.drag||!o._previousSwap.overlaps||(r?i.x:i.y)!==o._previousSwap.delta)&&(r?t>=Math.floor(d.left)&&t<Math.floor(d.right):n>=Math.floor(d.top)&&n<Math.floor(d.bottom))});return-1!==a&&this.sortPredicate(a,e,this)?a:-1}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(e,t){return null!=this._clientRect&&T(this._clientRect,e,t)}},{key:"_getSiblingContainerFromPosition",value:function(e,t,n){return this._siblings.find(function(i){return i._canReceive(e,t,n)})}},{key:"_canReceive",value:function(e,t,n){if(!this._clientRect||!T(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;var i=this._getShadowRoot().elementFromPoint(t,n);if(!i)return!1;var o=Object(p.e)(this.element);return i===o||o.contains(i)}},{key:"_startReceiving",value:function(e,t){var n=this,i=this._activeSiblings;!i.has(e)&&t.every(function(e){return n.enterPredicate(e,n)||n._draggables.indexOf(e)>-1})&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var e=this;this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(function(t){if(e.isDragging()){var n=e._parentPositions.handleScroll(t);n&&(e._itemPositions.forEach(function(e){D(e.clientRect,n.top,n.left)}),e._itemPositions.forEach(function(t){var n=t.drag;e._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else e.isReceiving()&&e._cacheParentPositions()})}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var e=Object(d.c)(Object(p.e)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}},{key:"_notifyReceivingSiblings",value:function(){var e=this,t=this._activeDraggables.filter(function(e){return e.isDragging()});this._siblings.forEach(function(n){return n._startReceiving(e,t)})}}]),e}();function Z(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}function ee(e,t){e===window?e.scrollBy(0,t):e.scrollTop+=t}function te(e,t){e===window?e.scrollBy(t,0):e.scrollLeft+=t}function ne(e,t){var n=e.top,i=e.bottom,o=.05*e.height;return t>=n-o&&t<=n+o?1:t>=i-o&&t<=i+o?2:0}function ie(e,t){var n=e.left,i=e.right,o=.05*e.width;return t>=n-o&&t<=n+o?1:t>=i-o&&t<=i+o?2:0}var oe=Object(d.e)({passive:!1,capture:!0}),re=function(){var e=function(){function e(t,n){var i=this;Object(r.a)(this,e),this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=function(e){return e.isDragging()},this.pointerMove=new u.a,this.pointerUp=new u.a,this.scroll=new u.a,this._preventDefaultWhileDragging=function(e){i._activeDragInstances.length>0&&e.preventDefault()},this._persistentTouchmoveListener=function(e){i._activeDragInstances.length>0&&(i._activeDragInstances.some(i._draggingPredicate)&&e.preventDefault(),i.pointerMove.next(e))},this._document=n}return Object(a.a)(e,[{key:"registerDropContainer",value:function(e){this._dropInstances.has(e)||this._dropInstances.add(e)}},{key:"registerDragItem",value:function(e){var t=this;this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){t._document.addEventListener("touchmove",t._persistentTouchmoveListener,oe)})}},{key:"removeDropContainer",value:function(e){this._dropInstances.delete(e)}},{key:"removeDragItem",value:function(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,oe)}},{key:"startDragging",value:function(e,t){var n=this;if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){var i=t.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:function(e){return n.pointerUp.next(e)},options:!0}).set("scroll",{handler:function(e){return n.scroll.next(e)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:oe}),i||this._globalListeners.set("mousemove",{handler:function(e){return n.pointerMove.next(e)},options:oe}),this._ngZone.runOutsideAngular(function(){n._globalListeners.forEach(function(e,t){n._document.addEventListener(t,e.handler,e.options)})})}}},{key:"stopDragging",value:function(e){var t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}},{key:"isDragging",value:function(e){return this._activeDragInstances.indexOf(e)>-1}},{key:"ngOnDestroy",value:function(){var e=this;this._dragInstances.forEach(function(t){return e.removeDragItem(t)}),this._dropInstances.forEach(function(t){return e.removeDropContainer(t)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var e=this;this._globalListeners.forEach(function(t,n){e._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275inject"](c.NgZone),c["\u0275\u0275inject"](l.d))},e.\u0275prov=Object(c["\u0275\u0275defineInjectable"])({factory:function(){return new e(Object(c["\u0275\u0275inject"])(c.NgZone),Object(c["\u0275\u0275inject"])(l.d))},token:e,providedIn:"root"}),e}(),ae={dragStartThreshold:5,pointerDirectionChangeThreshold:5},ce=function(){var e=function(){function e(t,n,i,o){Object(r.a)(this,e),this._document=t,this._ngZone=n,this._viewportRuler=i,this._dragDropRegistry=o}return Object(a.a)(e,[{key:"createDrag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;return new U(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(e){return new J(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275inject"](l.d),c["\u0275\u0275inject"](c.NgZone),c["\u0275\u0275inject"](s.g),c["\u0275\u0275inject"](re))},e.\u0275prov=Object(c["\u0275\u0275defineInjectable"])({factory:function(){return new e(Object(c["\u0275\u0275inject"])(l.d),Object(c["\u0275\u0275inject"])(c.NgZone),Object(c["\u0275\u0275inject"])(s.g),Object(c["\u0275\u0275inject"])(re))},token:e,providedIn:"root"}),e}(),le=new c.InjectionToken("CDK_DRAG_PARENT"),se=new c.InjectionToken("CdkDropListGroup"),de=function(){var e=function(){function e(){Object(r.a)(this,e),this._items=new Set,this._disabled=!1}return Object(a.a)(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(p.c)(e)}},{key:"ngOnDestroy",value:function(){this._items.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=c["\u0275\u0275defineDirective"]({type:e,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],features:[c["\u0275\u0275ProvidersFeature"]([{provide:se,useExisting:e}])]}),e}(),pe=new c.InjectionToken("CDK_DRAG_CONFIG"),ue=0,me=new c.InjectionToken("CdkDropList"),he=function(){var e=function(){function e(t,n,i,o,a,l,s){var d=this;Object(r.a)(this,e),this.element=t,this._changeDetectorRef=i,this._scrollDispatcher=o,this._dir=a,this._group=l,this._destroyed=new u.a,this.connectedTo=[],this.id="cdk-drop-list-".concat(ue++),this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.dropped=new c.EventEmitter,this.entered=new c.EventEmitter,this.exited=new c.EventEmitter,this.sorted=new c.EventEmitter,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,s&&this._assignDefaults(s),this._dropListRef.enterPredicate=function(e,t){return d.enterPredicate(e.data,t.data)},this._dropListRef.sortPredicate=function(e,t,n){return d.sortPredicate(e,t.data,n.data)},this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),l&&l._items.add(this)}return Object(a.a)(e,[{key:"disabled",get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(e){this._dropListRef.disabled=this._disabled=Object(p.c)(e)}},{key:"addItem",value:function(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"removeItem",value:function(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"getSortedItems",value:function(){return Array.from(this._unsortedItems).sort(function(e,t){return e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1})}},{key:"ngOnDestroy",value:function(){var t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}},{key:"_setupInputSyncSubscription",value:function(t){var n=this;this._dir&&this._dir.change.pipe(Object(C.a)(this._dir.value),Object(b.a)(this._destroyed)).subscribe(function(e){return t.withDirection(e)}),t.beforeStarted.subscribe(function(){var i=Object(p.b)(n.connectedTo).map(function(t){return"string"==typeof t?e._dropLists.find(function(e){return e.id===t}):t});if(n._group&&n._group._items.forEach(function(e){-1===i.indexOf(e)&&i.push(e)}),!n._scrollableParentsResolved){var o=n._scrollDispatcher.getAncestorScrollContainers(n.element).map(function(e){return e.getElementRef().nativeElement});n._dropListRef.withScrollableParents(o),n._scrollableParentsResolved=!0}t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.sortingDisabled=Object(p.c)(n.sortingDisabled),t.autoScrollDisabled=Object(p.c)(n.autoScrollDisabled),t.autoScrollStep=Object(p.f)(n.autoScrollStep,2),t.connectedTo(i.filter(function(e){return e&&e!==n}).map(function(e){return e._dropListRef})).withOrientation(n.orientation)})}},{key:"_handleEvents",value:function(e){var t=this;e.beforeStarted.subscribe(function(){t._syncItemsWithRef(),t._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){t.entered.emit({container:t,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){t.exited.emit({container:t,item:e.item.data}),t._changeDetectorRef.markForCheck()}),e.sorted.subscribe(function(e){t.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:t,item:e.item.data})}),e.dropped.subscribe(function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),t._changeDetectorRef.markForCheck()})}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.draggingDisabled,i=e.sortingDisabled,o=e.listAutoScrollDisabled,r=e.listOrientation;this.disabled=null!=n&&n,this.sortingDisabled=null!=i&&i,this.autoScrollDisabled=null!=o&&o,this.orientation=r||"vertical",t&&(this.lockAxis=t)}},{key:"_syncItemsWithRef",value:function(){this._dropListRef.withItems(this.getSortedItems().map(function(e){return e._dragRef}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](ce),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](s.e),c["\u0275\u0275directiveInject"](O.c,8),c["\u0275\u0275directiveInject"](se,12),c["\u0275\u0275directiveInject"](pe,8))},e.\u0275dir=c["\u0275\u0275defineDirective"]({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(c["\u0275\u0275attribute"]("id",t.id),c["\u0275\u0275classProp"]("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[c["\u0275\u0275ProvidersFeature"]([{provide:se,useValue:void 0},{provide:me,useExisting:e}])]}),e._dropLists=[],e}(),ge=new c.InjectionToken("CdkDragHandle"),fe=function(){var e=function(){function e(t,n){Object(r.a)(this,e),this.element=t,this._stateChanges=new u.a,this._disabled=!1,this._parentDrag=n}return Object(a.a)(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(p.c)(e),this._stateChanges.next(this)}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](le,12))},e.\u0275dir=c["\u0275\u0275defineDirective"]({type:e,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[c["\u0275\u0275ProvidersFeature"]([{provide:ge,useExisting:e}])]}),e}(),ve=new c.InjectionToken("CdkDragPlaceholder"),be=function(){var e=Object(a.a)(function e(t){Object(r.a)(this,e),this.templateRef=t});return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](c.TemplateRef))},e.\u0275dir=c["\u0275\u0275defineDirective"]({type:e,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[c["\u0275\u0275ProvidersFeature"]([{provide:ve,useExisting:e}])]}),e}(),Ce=new c.InjectionToken("CdkDragPreview"),ye=function(){var e=function(){function e(t,n,i,o,a,l,s,d,p,m,h){var g=this;Object(r.a)(this,e),this.element=t,this.dropContainer=n,this._ngZone=o,this._viewContainerRef=a,this._dir=s,this._changeDetectorRef=p,this._selfHandle=m,this._parentDrag=h,this._destroyed=new u.a,this.started=new c.EventEmitter,this.released=new c.EventEmitter,this.ended=new c.EventEmitter,this.entered=new c.EventEmitter,this.exited=new c.EventEmitter,this.dropped=new c.EventEmitter,this.moved=new f.a(function(e){var t=g._dragRef.moved.pipe(Object(y.a)(function(e){return{source:g,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}})).subscribe(e);return function(){t.unsubscribe()}}),this._dragRef=d.createDrag(t,{dragStartThreshold:l&&null!=l.dragStartThreshold?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&null!=l.pointerDirectionChangeThreshold?l.pointerDirectionChangeThreshold:5,zIndex:null==l?void 0:l.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),l&&this._assignDefaults(l),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return Object(a.a)(e,[{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(e){this._disabled=Object(p.c)(e),this._dragRef.disabled=this._disabled}},{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var e=this;this._ngZone.onStable.pipe(Object(x.a)(1),Object(b.a)(this._destroyed)).subscribe(function(){e._updateRootElement(),e._handles.changes.pipe(Object(C.a)(e._handles),Object(w.a)(function(t){var n=t.filter(function(t){return t._parentDrag===e}).map(function(e){return e.element});e._selfHandle&&e.rootElementSelector&&n.push(e.element),e._dragRef.withHandles(n)}),Object(_.a)(function(e){return v.a.apply(void 0,Object(o.a)(e.map(function(e){return e._stateChanges.pipe(Object(C.a)(e))})))}),Object(b.a)(e._destroyed)).subscribe(function(t){var n=e._dragRef,i=t.element.nativeElement;t.disabled?n.disableHandle(i):n.enableHandle(i)}),e.freeDragPosition&&e._dragRef.setFreeDragPosition(e.freeDragPosition)})}},{key:"ngOnChanges",value:function(e){var t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){this.dropContainer&&this.dropContainer.removeItem(this);var t=e._dragInstances.indexOf(this);t>-1&&e._dragInstances.splice(t,1),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}},{key:"_updateRootElement",value:function(){var e=this.element.nativeElement,t=this.rootElementSelector?xe(e,this.rootElementSelector):e;this._dragRef.withRootElement(t||e)}},{key:"_getBoundaryElement",value:function(){var e=this.boundaryElement;return e?"string"==typeof e?xe(this.element.nativeElement,e):Object(p.e)(e):null}},{key:"_syncInputs",value:function(t){var n=this;t.beforeStarted.subscribe(function(){if(!t.isDragging()){var e=n._dir,i=n.dragStartDelay,o=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,r=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,matchSize:n._previewTemplate.matchSize,viewContainer:n._viewContainerRef}:null;t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:Object(p.f)(i),t.constrainPosition=n.constrainPosition,t.previewClass=n.previewClass,t.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(r),e&&t.withDirection(e.value)}}),t.beforeStarted.pipe(Object(x.a)(1)).subscribe(function(){var i,o;if(n._parentDrag)t.withParent(n._parentDrag._dragRef);else for(var r=n.element.nativeElement.parentElement;r;){if(null===(i=r.classList)||void 0===i?void 0:i.contains("cdk-drag")){t.withParent((null===(o=e._dragInstances.find(function(e){return e.element.nativeElement===r}))||void 0===o?void 0:o._dragRef)||null);break}r=r.parentElement}})}},{key:"_handleEvents",value:function(e){var t=this;e.started.subscribe(function(){t.started.emit({source:t}),t._changeDetectorRef.markForCheck()}),e.released.subscribe(function(){t.released.emit({source:t})}),e.ended.subscribe(function(e){t.ended.emit({source:t,distance:e.distance}),t._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){t.entered.emit({container:e.container.data,item:t,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){t.exited.emit({container:e.container.data,item:t})}),e.dropped.subscribe(function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:t,distance:e.distance})})}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.dragStartDelay,i=e.constrainPosition,o=e.previewClass,r=e.boundaryElement,a=e.draggingDisabled,c=e.rootElementSelector;this.disabled=null!=a&&a,this.dragStartDelay=n||0,t&&(this.lockAxis=t),i&&(this.constrainPosition=i),o&&(this.previewClass=o),r&&(this.boundaryElement=r),c&&(this.rootElementSelector=c)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](me,12),c["\u0275\u0275directiveInject"](l.d),c["\u0275\u0275directiveInject"](c.NgZone),c["\u0275\u0275directiveInject"](c.ViewContainerRef),c["\u0275\u0275directiveInject"](pe,8),c["\u0275\u0275directiveInject"](O.c,8),c["\u0275\u0275directiveInject"](ce),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](ge,10),c["\u0275\u0275directiveInject"](le,12))},e.\u0275dir=c["\u0275\u0275defineDirective"]({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){var i;1&e&&(c["\u0275\u0275contentQuery"](n,Ce,1),c["\u0275\u0275contentQuery"](n,ve,1),c["\u0275\u0275contentQuery"](n,ge,1)),2&e&&(c["\u0275\u0275queryRefresh"](i=c["\u0275\u0275loadQuery"]())&&(t._previewTemplate=i.first),c["\u0275\u0275queryRefresh"](i=c["\u0275\u0275loadQuery"]())&&(t._placeholderTemplate=i.first),c["\u0275\u0275queryRefresh"](i=c["\u0275\u0275loadQuery"]())&&(t._handles=i))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&c["\u0275\u0275classProp"]("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[c["\u0275\u0275ProvidersFeature"]([{provide:le,useExisting:e}]),c["\u0275\u0275NgOnChangesFeature"]]}),e._dragInstances=[],e}();function xe(e,t){for(var n=e.parentElement;n;){if(n.matches?n.matches(t):n.msMatchesSelector(t))return n;n=n.parentElement}return null}var we=function(){var e=Object(a.a)(function e(){Object(r.a)(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({providers:[ce],imports:[s.b]}),e}()},"5UG9":function(e,t,n){"use strict";n.d(t,"a",function(){return H});var i=n("mrSG"),o=n("fXoL"),r=n("Kj3r"),a=n("/uUt"),c=n("XNiG"),l=n("AA4e"),s=n("4P1S"),d=n("0VPD"),p=n("tk/3"),u=n("lJxs"),m=function(){function e(e){this.http=e}return e.prototype.getDirs=function(e,t){var n={params:(new p.g).set("domain_id",e)};return this.http.post("/devops-knowledge-management/api/query/childrensWiki",t,n).pipe(Object(u.a)(function(e){return e.data}))},e.prototype.getWikiCategories=function(e){return this.http.get("/devops-knowledge-management/api/wiki/kanban?domain_id="+e).pipe(Object(u.a)(function(e){return e.data}))},e.prototype.getMyDomainInfo=function(){var e=localStorage.getItem("visionUserInfo");return e=JSON.parse(e),this.http.get("/vision-platform/api/domains/v2/mine_domain?user_id="+e.user_id).pipe(Object(u.a)(function(e){return e.data}))},e.prototype.getUserPermission=function(e,t){void 0===t&&(t=!1);var n=localStorage.getItem("visionUserInfo"),i="/vision-platform/api/domain/"+e+"/roles?user_id="+(n=JSON.parse(n)).user_id;return t&&(i+="&need_up_role=false"),this.http.get(i).pipe(Object(u.a)(function(e){return e.data}))},e.prototype.getLinkDomains=function(e,t){return this.http.post("/vision-platform/api/domains/query/faltung",[e],{params:t}).pipe(Object(u.a)(function(e){return e.data}))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](p.c))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),h=n("sYmb"),g=n("ofXK"),f=n("PTRe"),v=n("3Pt+"),b=n("Nqz0"),C=n("nxWG"),y=n("Q8cG"),x=["nzTreeComponent"];function w(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,n.tipInfo.title))}}function _(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",20),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().goBackCategoryList()}),o["\u0275\u0275element"](1,"i",21),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden","system"===(null==i.currentCategory?null:i.currentCategory.classify)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](3,2,i.tipInfo.detailTitle)," ")}}function O(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",22),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"i",23),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](),i=o["\u0275\u0275reference"](17);o["\u0275\u0275property"]("nzDropdownMenu",i),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.currentDomainInfo?null==n.currentDomainInfo?null:n.currentDomainInfo.title:o["\u0275\u0275pipeBind1"](2,2,"DOMAIN")," ")}}function S(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",27),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).handleCategoryClick(e)}),o["\u0275\u0275elementStart"](2,"div",28),o["\u0275\u0275element"](3,"img",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",30),o["\u0275\u0275elementStart"](5,"div",31),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",32),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](9,"i",33),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/"+i.icon+".jpg",o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.title),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.description)}}function E(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",24),o["\u0275\u0275elementStart"](1,"div",25),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,S,10,3,"div",26),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,2,"KNOWLEDGE_CATEGORY")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",n.categoriesArr)}}function M(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",27),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).handleCategoryClick(e)}),o["\u0275\u0275elementStart"](2,"div",28),o["\u0275\u0275element"](3,"img",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",30),o["\u0275\u0275elementStart"](5,"div",31),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",32),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](9,"i",33),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/"+i.icon+".jpg",o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.title),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.description)}}function P(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",34),o["\u0275\u0275elementStart"](1,"div",25),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,M,10,3,"div",26),o["\u0275\u0275elementStart"](5,"nz-tree",35,36),o["\u0275\u0275listener"]("nzClick",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().nzClickEvent(e)})("nzExpandChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getChildrenTreeNode(e.node)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](),r=o["\u0275\u0275reference"](15);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,5,"KNOWLEDGE_CATEGORY")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",i.matchCategoriesArr),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzHideUnMatched",!0)("nzData",i.selectArrMatch)("nzTreeTemplate",r)}}function I(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",34),o["\u0275\u0275elementStart"](1,"div",37),o["\u0275\u0275elementStart"](2,"div",38),o["\u0275\u0275elementStart"](3,"span",39),o["\u0275\u0275elementStart"](4,"i",20),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().rootSelectFunc()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",27),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().rootSelectFunc()}),o["\u0275\u0275elementStart"](6,"div",28),o["\u0275\u0275element"](7,"img",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",30),o["\u0275\u0275elementStart"](9,"div",31),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",32),o["\u0275\u0275text"](12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",40),o["\u0275\u0275elementStart"](14,"nz-tree",41,42),o["\u0275\u0275listener"]("nzExpandChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getChildrenTreeNode(e.node)})("nzClick",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().nzClickEvent(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](),r=o["\u0275\u0275reference"](15);o["\u0275\u0275advance"](4),o["\u0275\u0275classMap"](i.rootSelect?"select-active-styl iconfont icon-yuanquan":"fa fa-circle-thin"),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/"+i.activeCategory.icon+".jpg",o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](i.rootSelect?"active-span-styl":""),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.activeCategory.title),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.activeCategory.description),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzHideUnMatched",!0)("nzData",i.selectArr)("nzSearchValue",i.treeSearchValue)("nzTreeTemplate",r)}}function k(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",43),o["\u0275\u0275elementStart"](1,"span",44),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"span",45),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"button",46),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().confirmFunc()}),o["\u0275\u0275element"](7,"span",47),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,3,i.tipInfo.detailBottomTip)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.movePath),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](8,5,i.tipInfo.detailConfirmBtnTip))}}function T(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"i",20),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().selectNode(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275classMap"](r.activeNode&&r.activeNode.origin.sn==i.origin.sn?"select-active-styl iconfont icon-yuanquan":"fa fa-circle-thin")}}function D(e,t){1&e&&o["\u0275\u0275element"](0,"i",54),2&e&&o["\u0275\u0275classMap"]("icon-color fa fa-ban")}var A=function(e){return{width:e}};function z(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",55),o["\u0275\u0275elementStart"](1,"span",56),o["\u0275\u0275elementStart"](2,"span",57),o["\u0275\u0275element"](3,"i",58),o["\u0275\u0275elementStart"](4,"span",59),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](8,A,331-16*n.level+"px")),o["\u0275\u0275advance"](3),o["\u0275\u0275classProp"]("search-active-styl",""!=i.searchValue.trim()&&n.origin.is_search),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"]((null==i.disabledNode||null==i.disabledNode.origin?null:i.disabledNode.origin.sn)==n.origin.sn||(null==n.origin||null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)!=i.currentDomain?"diabled-span":""),o["\u0275\u0275classProp"]("search-active-styl",""!=i.searchValue.trim()&&n.origin.is_search),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.title)}}function R(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",60),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().selectNode(e)}),o["\u0275\u0275elementStart"](1,"span",56),o["\u0275\u0275elementStart"](2,"span",57),o["\u0275\u0275element"](3,"i",58),o["\u0275\u0275elementStart"](4,"span",59),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](10,A,331-16*i.level+"px")),o["\u0275\u0275advance"](3),o["\u0275\u0275classProp"]("search-active-styl",""!=r.searchValue.trim()&&i.origin.is_search),o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("search-active-styl",""!=r.searchValue.trim()&&i.origin.is_search)("diabled-span",r.disabledNode&&r.disabledNode.origin&&r.disabledNode.origin.sn==i.origin.sn)("active-span-styl",r.activeNode&&r.activeNode.origin&&r.activeNode.origin.sn==i.origin.sn),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.title)}}var L=function(e){return{left:e}};function N(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",48),o["\u0275\u0275elementStart"](1,"span",49),o["\u0275\u0275template"](2,T,1,2,"i",50),o["\u0275\u0275template"](3,D,1,2,"i",51),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,z,6,10,"span",52),o["\u0275\u0275template"](5,R,6,12,"span",53),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](5,L,n.level>0?-50-24*n.level+"px":"-50px")),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",((null==i.disabledNode||null==i.disabledNode.origin?null:i.disabledNode.origin.sn)!=n.origin.sn||!i.disabledNode)&&(null==n.origin||null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)==i.currentDomain),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(null==i.disabledNode||null==i.disabledNode.origin?null:i.disabledNode.origin.sn)==n.origin.sn||(null==n.origin||null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)!=i.currentDomain),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(null==i.disabledNode||null==i.disabledNode.origin?null:i.disabledNode.origin.sn)==n.origin.sn||(null==n.origin||null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)!=i.currentDomain),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",((null==i.disabledNode||null==i.disabledNode.origin?null:i.disabledNode.origin.sn)!=n.origin.sn||!i.disabledNode)&&(null==n.origin||null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)==i.currentDomain)}}function j(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",64),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).moveChangeDomain(e.domain)}),o["\u0275\u0275elementStart"](1,"a",65),o["\u0275\u0275element"](2,"i",66),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"workitemAttr"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](5,1,i.domain,"assigned_domain"))}}function V(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",67),o["\u0275\u0275element"](1,"span",68),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"img",69),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,1,"COMMON_INFO_NO_DATA")))}function F(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",61),o["\u0275\u0275template"](1,j,6,4,"div",62),o["\u0275\u0275template"](2,V,4,3,"div",63),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.myDomainList),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",0==n.myDomainList.length)}}function B(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",64),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).moveChangeDomain(e.domain)}),o["\u0275\u0275elementStart"](1,"a",65),o["\u0275\u0275element"](2,"i",66),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"workitemAttr"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](5,1,i.domain,"assigned_domain"))}}function U(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",67),o["\u0275\u0275element"](1,"span",68),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"img",69),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,1,"COMMON_INFO_NO_DATA")))}function W(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",61),o["\u0275\u0275template"](1,B,6,4,"div",62),o["\u0275\u0275template"](2,U,4,3,"div",63),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.matchDomainArr),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",0==n.matchDomainArr.length)}}var H=function(){function e(e,t,n){var i=this;this.knowledgeService=e,this.translate=t,this.attrPipe=n,this.searchValue="",this.modelTitle="",this.selectArr=[],this.modelShowVariableChange=new o.EventEmitter,this.modelShowCloseChange=new o.EventEmitter,this.rootSelect=!0,this.inputFlag=!0,this.userQuestionUpdate=new c.a,this.showCategoryListCtrl=!0,this.myDomainList=[],this.matchDomainArr=[],this.domainSearchValue="",this.canMoveDomainAccess=!1,this.movePath="",this.userQuestionUpdate.pipe(Object(r.a)(500),Object(a.a)()).subscribe(function(e){i.getSearchList()})}return e.prototype.closeModal=function(){this.searchValue="",this.modelShowVariable=!1,this.modelShowCloseChange.emit(this.modelShowVariable)},e.prototype.goBackCategoryList=function(){var e,t;"system"!==(null===(e=this.currentCategory)||void 0===e?void 0:e.classify)&&(this.wikiEditFunction&&["workitem"].includes(null===(t=this.wikiEditFunction)||void 0===t?void 0:t.editFrom)||(this.searchValue="",this.showCategoryListCtrl=!0,this.searchPlaceHolder=this.translate.instant(this.tipInfo.listPlaceHolder,"")))},e.prototype.nzClickEvent=function(e){},e.prototype.selectNode=function(e){this.activeNode=e,this.rootSelect=!1;var t=this.getSelectNode(e),n=this.currentDomainInfo?this.attrPipe.transform(this.currentDomainInfo,"assigned_domain"):this.translate.instant("CURRENT_DOMAIN","");this.movePath=n+" > "+this.activeCategory.title+" > "+t},e.prototype.getSelectNode=function(e){var t="";return e.parentNode&&(t+=this.getSelectNode(e.parentNode)),""==t?e.origin.title:t+" > "+e.origin.title},e.prototype.rootSelectFunc=function(){this.rootSelect=!0,this.activeNode=null;var e=this.currentDomainInfo?this.attrPipe.transform(this.currentDomainInfo,"assigned_domain"):this.translate.instant("CURRENT_DOMAIN","");this.movePath=e+" > "+this.activeCategory.title},e.prototype.confirmFunc=function(){this.searchValue="",this.modelShowVariable=!1;var e={};this.rootSelect&&(e={sn:"",id:"0",key:"0",parent_id:null,category:"directory",kanban_id:this.activeCategory.id});var t={showCtrl:this.modelShowVariable,parentObj:this.rootSelect?e:this.activeNode.origin};t.parentObj.domain_id=this.currentDomain,this.modelShowVariableChange.emit(t)},e.prototype.getSearchList=function(){var e=this;setTimeout(function(){e.inputFlag&&(""!=e.searchValue.trim()?e.showCategoryListCtrl?(e.matchCategoryList(),e.getCataLogBySearch()):e.treeSearchValue=e.searchValue:e.showCategoryListCtrl||(e.treeSearchValue=""))},0)},e.prototype.matchCategoryList=function(){var e=this;this.matchCategoriesArr=this.categoriesArr.filter(function(t){return t.title.indexOf(e.searchValue)>-1||t.description&&t.description.indexOf(e.searchValue)>-1})},e.prototype.matchMoveList=function(e){for(var t=e.length,n=0;n<t;n++)e[n].isLeaf=0===e[n].children_number,0!==e[n].children_number&&this.matchMoveList(e[n].children)},e.prototype.getDirs=function(){var e=this;this.knowledgeService.getDirs(this.currentDomain,{status:["published"],kanban_id:this.activeCategory.id}).subscribe(function(t){var n;e.selectArr=Object(i.i)([],t),e.getSuitableArr(e.selectArr,null),e.getGiveArr(e.selectArr,""!=e.disabledNode?e.disabledNode.origin.sn:""),"system"===(null===(n=e.currentCategory)||void 0===n?void 0:n.classify)&&e.matchMoveList(e.selectArr)},function(){})},e.prototype.getCataLogBySearch=function(){var e=this;this.knowledgeService.getDirs(this.currentDomain,{status:["published"],search:this.searchValue,searchTree:!0,kanban_id:this.activeCategory.id}).subscribe(function(t){var n;e.selectArrMatch=t,e.getSuitableArr(e.selectArrMatch,null),e.expandHighLightArr(e.selectArrMatch),e.getGiveArr(e.selectArrMatch,""!=e.disabledNode?e.disabledNode.origin.sn:""),"system"===(null===(n=e.currentCategory)||void 0===n?void 0:n.classify)&&e.matchMoveList(e.selectArrMatch),e.selectArrMatch=Object(i.i)([],e.selectArrMatch)},function(){})},e.prototype.getGiveArr=function(e,t){for(var n,i,o=e.length-1;o>=0;o--)e[o].sn!==t&&(null===(n=["feature","story"])||void 0===n?void 0:n.includes(null===(i=e[o])||void 0===i?void 0:i.classify))?e.splice(o,1):(e[o].key=e[o].sn,""!==t&&e[o].sn==t&&(e[o].children=[]),0!==e[o].children.length&&this.getGiveArr(e[o].children,t))},e.prototype.getSuitableArr=function(e,t){for(var n,i,o=e.length,r=0;r<o;r++)e[r].isLeaf=!e[r].children_number||e[r].sn==(null===(i=null===(n=this.disabledNode)||void 0===n?void 0:n.origin)||void 0===i?void 0:i.sn),e[r].key=e[r].sn,e[r].parent=t,1===e[r].publish_status&&e[r].assigned_domain.id!==this.currentDomain&&(e[r].assigned_domain.id=this.currentDomain),e[r].children_number&&this.getSuitableArr(e[r].children,e[r])},e.prototype.ngOnInit=function(){this.searchPlaceHolder=this.translate.instant(this.tipInfo.listPlaceHolder,""),this.movePath=this.translate.instant("CURRENT_DOMAIN",""),this.getCategories(),this.importDocument?(this.getLinkDomains(),this.canMoveDomainAccess=!0):this.getDomainAccess()},e.prototype.getCategories=function(){var e=this;this.knowledgeService.getWikiCategories(this.currentDomain).subscribe(function(t){var n;if(e.categoriesArr=t.filter(function(e){return"grey"!=e.classify}).filter(function(t){var n,i,o;return!(null===(n=e.importDocument)||void 0===n?void 0:n.filterCategory)||!((null===(i=e.importDocument)||void 0===i?void 0:i.filterCategory.id.includes(t.id))||(null===(o=e.importDocument)||void 0===o?void 0:o.filterCategory.classify.includes(t.classify)))}).map(function(e,t){return Object(i.a)({icon:"category-icon-"+(t%10+1)},e)}),e.currentCategory){var o=e.categoriesArr.find(function(t){return t.id===e.currentCategory.id});e.handleCategoryClick(o)}(null===(n=e.currentCategory)||void 0===n?void 0:n.classify)||(e.categoriesArr=e.categoriesArr.filter(function(e){return"system"!==e.classify}))},function(){})},e.prototype.handleCategoryClick=function(e){this.selectArr=[],this.showCategoryListCtrl=!1,this.activeCategory=e,this.getDirs(),this.searchPlaceHolder=this.translate.instant(this.tipInfo.detailPlaceHolder,"")+"  "+this.activeCategory.title,this.searchValue="";var t=this.currentDomainInfo?this.attrPipe.transform(this.currentDomainInfo,"assigned_domain"):this.translate.instant("CURRENT_DOMAIN","");this.movePath=t+" > "+this.activeCategory.title},e.prototype.expandHighLightArr=function(e){for(var t=e.length,n=0;n<t;n++)e[n].is_search&&this.openTargetBranch(e[n]),0!=e[n].children.length&&this.expandHighLightArr(e[n].children)},e.prototype.openTargetBranch=function(e){Object(l.o)(e)||Object(l.o)(e.parent)||(e.parent.expanded=!0,this.openTargetBranch(e.parent))},e.prototype.getChildrenTreeNode=function(e){var t=this;e.origin.isLeaf||!e.origin.children_number||e.origin.children.length||this.knowledgeService.getDirs(this.currentDomain,{status:["published"],wiki_sn:e.origin.sn}).subscribe(function(n){var i;e.origin.children_number=n.length,t.getSuitableArr(n,e.origin),"system"===(null===(i=t.currentCategory)||void 0===i?void 0:i.classify)&&t.matchMoveList(n),e.addChildren(n)},function(){})},e.prototype.getDomainAccess=function(){var e=this;this.knowledgeService.getUserPermission(this.currentDomain).subscribe(function(t){e.canMoveDomainAccess=Object(d.a)(t,["Owner","Admin"]).length>0,e.canMoveDomainAccess&&e.getMyDomainInfo()},function(){})},e.prototype.getMyDomainInfo=function(){var e=this;this.knowledgeService.getMyDomainInfo().subscribe(function(t){for(var n=t.join_domain,i=function(t){var i=n[t];e.knowledgeService.getUserPermission(i.domain.id).subscribe(function(t){Object(d.a)(t,["Owner","Admin"]).length>0&&e.myDomainList.push({domain:i.domain,id:i.domain.id,title:i.domain.title,short_title:i.domain.short_title,title_en:i.domain.title_en,logo:""})},function(){})},o=0;o<n.length;o++)i(o)},function(){})},e.prototype.moveChangeDomain=function(e){this.currentDomain=e.id,this.getCategories(),this.currentDomainInfo=e},e.prototype.matchDomainList=function(){var e=this.domainSearchValue.toLowerCase();this.matchDomainArr=this.myDomainList.filter(function(t){return t.title&&t.title.toLowerCase().indexOf(e)>-1||t.title_en&&t.title_en.toLowerCase().indexOf(e)>-1||t.short_title&&t.short_title.toLowerCase().indexOf(e)>-1})},e.prototype.getLinkDomains=function(){var e=this;this.knowledgeService.getLinkDomains(this.currentDomain,{type:1,dir:this.importDocument.domainType||"down"}).subscribe(function(t){if(t){var n=t[e.currentDomain],i={domain:n.self,id:n.self.id,title:n.self.title,short_title:n.self.short_title||n.self.title,title_en:n.self.title_en,logo:""};e.currentDomainInfo=i;var o=[i];n.down.forEach(function(e){o.push({domain:e,id:e.id,title:e.title,short_title:e.short_title||e.title,title_en:e.title_en,logo:""})}),e.myDomainList=o}},function(){})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](m),o["\u0275\u0275directiveInject"](h.c),o["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["select-category-directory"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](x,1),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.nzTreeComponent=n.first)},inputs:{disabledNode:"disabledNode",currentCategory:"currentCategory",selectArr:"selectArr",modelShowVariable:"modelShowVariable",wikiEditFunction:"wikiEditFunction",importDocument:"importDocument",currentDomain:"currentDomain",showCategoryListCtrl:"showCategoryListCtrl",tipInfo:"tipInfo"},outputs:{modelShowVariableChange:"modelShowVariableChange",modelShowCloseChange:"modelShowCloseChange"},features:[o["\u0275\u0275ProvidersFeature"]([m,s.a])],decls:25,vars:15,consts:[[1,"select-category-directory"],[1,"select-directory-header"],[4,"ngIf"],["class","pointer-cursor",3,"click",4,"ngIf"],["nz-dropdown","","nzTrigger","click","class","pointer-cursor dropdown-trigger space","nzPlacement","bottomLeft",3,"nzDropdownMenu",4,"ngIf"],[1,"icon-color","icon-font-size14","position-right-close","iconfont","icon-close","pointer-cursor",3,"click"],[1,"content-container"],[1,"input-container"],[1,"icon-color","icon-font-size14","pointer-cursor","position-absolute-styl","fa","fa-search"],["nz-input","",1,"search-input",3,"ngModel","placeholder","ngModelChange","compositionend","compositionstart"],["class","tree-wrapper show-category-list",4,"ngIf"],["class","tree-wrapper category-directory-list",4,"ngIf"],["class","bottom-button",4,"ngIf"],["nzTreeTemplate1",""],["menuspace","nzDropdownMenu"],[1,"drop-menu"],[1,"search-input-wrapper"],[1,"input-search-icon","icon-color","fa","fa-search","pointer-cursor"],[1,"search-input","overfolw-eclipis",3,"ngModel","placeholder","ngModelChange","compositionend","compositionstart"],["nz-menu","","class","space-drop-menu",4,"ngIf"],[1,"pointer-cursor",3,"click"],[1,"iconfont","icon-icon-crown","rotate-icon-back",3,"hidden"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"pointer-cursor","dropdown-trigger","space",3,"nzDropdownMenu"],[1,"fa","fa-chevron-down"],[1,"tree-wrapper","show-category-list"],[1,"common-location"],[4,"ngFor","ngForOf"],[1,"knowledge-category-item",3,"click"],[1,"category-item-img-wrapper"],[3,"src"],[1,"category-item-desc"],[1,"category-item-title"],[1,"category-item-description"],[1,"iconfont","icon-icon-crown","rotate-icon"],[1,"tree-wrapper","category-directory-list"],["nzShowIcon","","nzBlockNode","",3,"nzHideUnMatched","nzData","nzTreeTemplate","nzClick","nzExpandChange"],["nzTreeComponent",""],[1,"directory-wrapper"],[1,"directory-wrapper-left"],[1,"position-left-span-i"],[1,"margin-left-27"],["nzShowIcon","","nzBlockNode","",3,"nzHideUnMatched","nzData","nzSearchValue","nzTreeTemplate","nzExpandChange","nzClick"],["nzTreeComponent1",""],[1,"bottom-button"],[1,"bottom-button-oprate-desc"],[1,"bottom-button-directory-title","text-eclipis"],[1,"confirm-button","pointer-cursor",3,"click"],[3,"textContent"],[1,"custom-node"],[1,"position-absolute-select",3,"ngStyle"],["class","pointer-cursor",3,"class","click",4,"ngIf"],["class","i-disabled-hover",3,"class",4,"ngIf"],["class","hidden-text-operate",3,"ngStyle",4,"ngIf"],["class","hidden-text-operate pointer-cursor",3,"ngStyle","click",4,"ngIf"],[1,"i-disabled-hover"],[1,"hidden-text-operate",3,"ngStyle"],[1,"category-directory-wrapper"],[1,"hidden-text-styl","category-directory-left"],[1,"real-icon-size","icon-color","icon-font-size14","iconfont","icon-article"],[1,"margin-left-span-10","ant-tree-title"],[1,"hidden-text-operate","pointer-cursor",3,"ngStyle","click"],["nz-menu","",1,"space-drop-menu"],["nz-menu-item","","class","menu-item",3,"click",4,"ngFor","ngForOf"],["class","no-data-wrapper",4,"ngIf"],["nz-menu-item","",1,"menu-item",3,"click"],[1,"menu-name"],[1,"iconfont","icon-multi-layers"],[1,"no-data-wrapper"],[1,"box-block",3,"textContent"],["src","/knowledge-ui/assets/imgs/no_data.jpg"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275template"](2,w,3,3,"span",2),o["\u0275\u0275template"](3,_,4,4,"span",3),o["\u0275\u0275template"](4,O,4,4,"span",4),o["\u0275\u0275elementStart"](5,"i",5),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",6),o["\u0275\u0275elementStart"](7,"div",7),o["\u0275\u0275element"](8,"i",8),o["\u0275\u0275elementStart"](9,"input",9),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchValue=e})("compositionend",function(){return t.inputFlag=!0})("compositionstart",function(){return t.inputFlag=!1})("ngModelChange",function(e){return t.userQuestionUpdate.next(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,E,5,4,"div",10),o["\u0275\u0275template"](11,P,7,7,"div",11),o["\u0275\u0275template"](12,I,16,11,"div",11),o["\u0275\u0275template"](13,k,9,7,"div",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](14,N,6,7,"ng-template",null,13,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementStart"](16,"nz-dropdown-menu",null,14),o["\u0275\u0275elementStart"](18,"div",15),o["\u0275\u0275elementStart"](19,"div",16),o["\u0275\u0275element"](20,"i",17),o["\u0275\u0275elementStart"](21,"input",18),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.domainSearchValue=e})("compositionend",function(){return t.inputFlag=!0})("compositionstart",function(){return t.inputFlag=!1})("ngModelChange",function(){return t.matchDomainList()}),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](23,F,3,2,"div",19),o["\u0275\u0275template"](24,W,3,2,"div",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.showCategoryListCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.showCategoryListCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showCategoryListCtrl&&t.canMoveDomainAccess&&t.myDomainList.length),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.searchValue)("placeholder",t.searchPlaceHolder),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showCategoryListCtrl&&""==t.searchValue.trim()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showCategoryListCtrl&&""!=t.searchValue.trim()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.showCategoryListCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.showCategoryListCtrl||t.showCategoryListCtrl&&""!=t.searchValue.trim()),o["\u0275\u0275advance"](8),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](22,13,"SEARCH_MY_DOMAIN")),o["\u0275\u0275property"]("ngModel",t.domainSearchValue),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",""==t.domainSearchValue.trim()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",""!=t.domainSearchValue.trim()))},directives:[g.n,f.b,v.d,v.k,v.l,b.d,b.b,g.m,C.a,g.o,y.c,y.e],pipes:[h.b,s.a],styles:['.select-category-directory[_ngcontent-%COMP%]{width:100%;height:100%}.select-category-directory[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]{height:50px;width:100%;line-height:50px;text-align:left;padding:0 10px;position:relative;color:#676a6c;font-weight:700}.select-category-directory[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .position-right-close[_ngcontent-%COMP%]{position:absolute;right:10px;font-size:23px}.select-category-directory[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .rotate-icon-back[_ngcontent-%COMP%]{transform:rotate(90deg);display:inline-block;font-size:13px;margin-right:8px}.select-category-directory[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .space[_ngcontent-%COMP%]{margin-left:20px}.select-category-directory[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .space[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.select-category-directory[_ngcontent-%COMP%]   .directory-wrapper[_ngcontent-%COMP%]{margin-top:10px;height:50px;position:relative;display:flex;align-items:center}.select-category-directory[_ngcontent-%COMP%]   .category-directory-list[_ngcontent-%COMP%]{height:calc(100% - 50px)}.select-category-directory[_ngcontent-%COMP%]   .margin-right30[_ngcontent-%COMP%]{position:absolute;left:31px}.select-category-directory[_ngcontent-%COMP%]   .position-absolute-select[_ngcontent-%COMP%]{position:absolute;left:-52px}.select-category-directory[_ngcontent-%COMP%]   .select-active-styl[_ngcontent-%COMP%]{position:relative;left:-2px;color:#23c6c8}.select-category-directory[_ngcontent-%COMP%]   .custom-node[_ngcontent-%COMP%]{line-height:24px;margin-left:4px;display:inline-block;position:relative;overflow:visible}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]{overflow:hidden;height:24px;padding:0;line-height:24px;display:inline-block;position:relative}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]   .category-directory-right[_ngcontent-%COMP%]{width:58px;right:-60px}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]   .category-document-right[_ngcontent-%COMP%]{width:28px;right:-30px}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]   .hidden-right-operate[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;height:24px;line-height:24px;display:inline-block}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]   .hidden-right-operate[_ngcontent-%COMP%]   .operate-more-span[_ngcontent-%COMP%]{position:absolute;right:35px;top:0;bottom:0;cursor:pointer}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]   .hidden-right-operate[_ngcontent-%COMP%]   .operate-add-span[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:5px;top:0;bottom:0}.select-category-directory[_ngcontent-%COMP%]   .hidden-text-styl[_ngcontent-%COMP%]{width:100%;display:inline-block;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.select-category-directory[_ngcontent-%COMP%]   .real-icon-size[_ngcontent-%COMP%]{width:14px!important;height:14px!important}.select-category-directory[_ngcontent-%COMP%]   .tree-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:hidden;overflow-y:scroll;padding-left:2px;-ms-overflow-style:none}.select-category-directory[_ngcontent-%COMP%]   .tree-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important}.select-category-directory[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]{margin-top:10px;height:30px;line-height:30px;position:relative;padding-top:10px}.select-category-directory[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .confirm-button[_ngcontent-%COMP%]{position:absolute;background:#23c6c8;width:65px;border-radius:4px;right:10px;text-align:center;color:#fff;outline:none;border:none}.select-category-directory[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]:before{position:absolute;height:1px;content:"";width:100%;top:-10px;background:#e5e5e5}.select-category-directory[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .bottom-button-oprate-desc[_ngcontent-%COMP%]{color:#999;margin-right:5px}.select-category-directory[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .bottom-button-directory-title[_ngcontent-%COMP%]{width:calc(100% - 145px);position:relative;top:1px}.select-category-directory[_ngcontent-%COMP%]   .search-match-styl[_ngcontent-%COMP%]{color:#23c6c8}.select-category-directory[_ngcontent-%COMP%]   .i-disabled-hover[_ngcontent-%COMP%]{cursor:no-drop}.select-category-directory[_ngcontent-%COMP%]   .diabled-span[_ngcontent-%COMP%]{color:#999;cursor:no-drop}.select-category-directory[_ngcontent-%COMP%]   .pointer-cursor[_ngcontent-%COMP%]{cursor:pointer}.select-category-directory[_ngcontent-%COMP%]   .icon-color[_ngcontent-%COMP%]{color:#999}.select-category-directory[_ngcontent-%COMP%]   .icon-font-size14[_ngcontent-%COMP%]{font-size:14px}.select-category-directory[_ngcontent-%COMP%]   .icon-font-size15[_ngcontent-%COMP%]{font-size:15px}.select-category-directory[_ngcontent-%COMP%]   .active-icon-styl-color[_ngcontent-%COMP%]{color:#23c6c8}.select-category-directory[_ngcontent-%COMP%]   .icon-font-size12[_ngcontent-%COMP%]{font-size:12px}.select-category-directory[_ngcontent-%COMP%]   .icon-font-size13[_ngcontent-%COMP%]{font-size:13px}.select-category-directory[_ngcontent-%COMP%]   .margin-left-span-10[_ngcontent-%COMP%]{margin-left:10px}.select-category-directory[_ngcontent-%COMP%]   .search-active-styl[_ngcontent-%COMP%]{color:#23c6c8}.select-category-directory[_ngcontent-%COMP%]     .ant-tree{overflow:hidden;margin:0 -5px}.select-category-directory[_ngcontent-%COMP%]     .ant-tree li{padding:6px 0 0;position:relative}.select-category-directory[_ngcontent-%COMP%]     .ant-tree ul{padding-left:16px;overflow:visible}.select-category-directory[_ngcontent-%COMP%]     .ant-tree-treenode{margin-left:23px}.select-category-directory[_ngcontent-%COMP%]     .ant-tree-node-content-wrapper{overflow:visible}.select-category-directory[_ngcontent-%COMP%]     .ant-tree-child-tree{overflow:visible}.select-category-directory[_ngcontent-%COMP%]     .ant-tree .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff}.select-category-directory[_ngcontent-%COMP%]     .ant-tree li span.ant-tree-switcher{margin-left:25px;color:#999}.select-category-directory[_ngcontent-%COMP%]   .text-eclipis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.select-category-directory[_ngcontent-%COMP%]   .active-span-styl[_ngcontent-%COMP%]{color:#23c6c8!important}.drop-menu[_ngcontent-%COMP%]{line-height:25px;z-index:10;border:1px solid #eaeaea;background-color:#fdfdfd;padding:10px 0;width:240px;border-radius:5px}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]{max-height:150px;overflow-y:auto;margin-top:3px;box-shadow:none}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{margin:3px 0;cursor:pointer;font-weight:400;padding:5px 0 5px 20px}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-name[_ngcontent-%COMP%]{display:inline-block;width:100%;height:24px;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#23c6c8;font-size:14px}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:8px}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background-color:#d6f1f1}.drop-menu[_ngcontent-%COMP%]   .space-drop-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:#23c6c8}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{position:relative;font-size:14px;width:90%;margin:0 auto}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .input-search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#b9b7b7;top:6px;font-size:14px}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{outline:none;height:26px;font-size:14px;padding-left:33px;padding-right:10px;border-radius:13px;line-height:26px;border:1px solid #d7d7d7;display:inline-block;width:100%;font-weight:400}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus, .drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:hover{border:1px solid #23c6c8}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::-moz-placeholder{color:#d2d2d2;font-weight:400}.drop-menu[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#d2d2d2;font-weight:400}.drop-menu[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{width:100%;padding:10px;text-align:center}.drop-menu[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:130px;margin:0 auto}.drop-menu[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.common-location-item[_ngcontent-%COMP%]{height:55px;display:flex;justify-content:space-between;padding:10px}.common-location-item[_ngcontent-%COMP%]:hover{background:#f2f2f2}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]{flex:1;display:flex}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .small-directory-icon[_ngcontent-%COMP%]{font-size:14px}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .common-location-info-desc[_ngcontent-%COMP%]{margin-left:10px}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .common-location-info-desc[_ngcontent-%COMP%]   .location-info-desc-dirctory[_ngcontent-%COMP%]{color:#676a6c;font-size:14px}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .common-location-info-desc[_ngcontent-%COMP%]   .location-info-desc-category[_ngcontent-%COMP%]{marign-top:5px}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .common-location-info-desc[_ngcontent-%COMP%]   .location-info-desc-category[_ngcontent-%COMP%]   .icon-font-size-12[_ngcontent-%COMP%]{font-size:12px;color:#bdbdbd}.common-location-item[_ngcontent-%COMP%]   .common-location-info[_ngcontent-%COMP%]   .common-location-info-desc[_ngcontent-%COMP%]   .location-info-desc-category[_ngcontent-%COMP%]   .recent-view-item-category[_ngcontent-%COMP%]{color:#bdbdbd;font-weight:400;margin-left:2px;font-size:12px}.common-location-item[_ngcontent-%COMP%]   .common-location-btn[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}.common-location-item[_ngcontent-%COMP%]   .common-location-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:3px 8px;border:1px solid #23c6c8;border-radius:4px;background:#fff;color:#23c6c8;outline:none;font-size:14px}.content-container[_ngcontent-%COMP%]{height:calc(100% - 50px);padding:0 10px 10px}.content-container[_ngcontent-%COMP%]   .common-location[_ngcontent-%COMP%]{height:38px;line-height:38px;color:#999;font-size:12px}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]{padding:10px 10px 2px;display:flex;height:50px;position:relative}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]:hover{background:#f2f2f2}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:3px}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]   .category-item-desc[_ngcontent-%COMP%]{margin-left:10px}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]   .category-item-desc[_ngcontent-%COMP%]   .category-item-title[_ngcontent-%COMP%]{height:14px;line-height:14px;font-size:14px;color:#676a6c}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]   .category-item-desc[_ngcontent-%COMP%]   .category-item-description[_ngcontent-%COMP%]{margin-top:2px;font-size:12px;color:#bdbdbd}.content-container[_ngcontent-%COMP%]   .knowledge-category-item[_ngcontent-%COMP%]   .rotate-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:17px;transform:rotate(270deg);font-size:13px;color:#333}.content-container[_ngcontent-%COMP%]   .show-category-list[_ngcontent-%COMP%]{height:calc(100% - 30px)}.input-container[_ngcontent-%COMP%]{height:28px;line-height:28px;position:relative}.input-container[_ngcontent-%COMP%]   .position-absolute-styl[_ngcontent-%COMP%]{position:absolute;left:9px;top:7px}.input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{height:28px;line-height:28px;outline:none;border:1px solid #d5d5d5;border-radius:5px;padding-left:28px;width:100%}.input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#bdbdbd;font-size:13px}.input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus, .input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:hover{border-color:#23c6c8}']}),e}()},"6J3s":function(e,t,n){"use strict";n.d(t,"a",function(){return O});var i=n("3Pt+"),o=n("ofXK"),r=n("sYmb"),a=n("nxWG"),c=n("FwiY"),l=n("qAZ0"),s=n("dEAy"),d=n("Nqz0"),p=n("zAKX"),u=n("+oEP"),m=n("PTRe"),h=n("nJia"),g=n("Faj5"),f=n("BbD4"),v=n("7gQO"),b=n("kVCb"),C=n("FXAj"),y=n("cnMA"),x=n("8WYy"),w=n("nraT"),_=n("fXoL"),O=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=_["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=_["\u0275\u0275defineInjector"]({imports:[[o.c,c.b,l.b,d.c,a.b,u.b,m.e,h.b,i.g,r.a.forRoot(),s.b,p.g,g.a,v.a,f.a,C.a,b.a,y.a,x.a,w.a]]}),e}()},"7gQO":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("3Pt+"),o=n("ofXK"),r=n("sYmb"),a=n("mOC4"),c=n("BbD4"),l=n("fXoL"),s=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[o.c,i.g,r.a,a.a,c.a]]}),e}()},"7lu6":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("ofXK"),o=n("sYmb"),r=n("3Pt+"),a=n("0qTp"),c=n("Nqz0"),l=n("fXoL"),s=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[i.c,o.a,r.g,a.a,c.c]]}),e}()},"7xxS":function(e,t,n){"use strict";n.d(t,"a",function(){return j});var i=n("fXoL"),o=n("sYmb"),r=n("ofXK"),a=n("C2AL"),c=n("PTRe"),l=n("3Pt+"),s=n("FwiY"),d=n("OzZK"),p=n("RwU8"),u=n("qAZ0"),m=n("oMLp"),h=["option"];function g(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"i",12),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](3).searchValue=null}),i["\u0275\u0275elementEnd"]()}}function f(e,t){if(1&e&&i["\u0275\u0275template"](0,g,1,0,"i",11),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngIf",n.searchValue)}}function v(e,t){1&e&&i["\u0275\u0275element"](0,"i",19)}function b(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"i",20),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).deleteLabel(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](2,"i",21),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).updateLabel(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}}var C=function(e){return{backgroundColor:e}},y=function(e){return{color:e}};function x(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"li",13),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).handleOptionClick(e)}),i["\u0275\u0275template"](1,v,1,0,"i",14),i["\u0275\u0275elementStart"](2,"div",15),i["\u0275\u0275elementStart"](3,"div",16),i["\u0275\u0275element"](4,"i",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"span",18),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,b,3,0,"ng-container",1),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.isSelected),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](5,C,o[r.colorKey])),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](7,y,o[r.colorKey])),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](o.title),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!o.readOnly&&0!==o.domainId)}}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"li",22),i["\u0275\u0275text"](1,"There is nothing"),i["\u0275\u0275elementEnd"]())}var _=function(e){return{searchValue:e,key:"title"}};function O(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",3),i["\u0275\u0275elementStart"](2,"nz-input-group",4),i["\u0275\u0275elementStart"](3,"input",5),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().searchValue=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,f,1,1,"ng-template",null,6,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](6,"i",7),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addNewLabel()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"ul",8),i["\u0275\u0275template"](8,x,8,9,"li",9),i["\u0275\u0275pipe"](9,"filterByKey"),i["\u0275\u0275template"](10,w,2,0,"li",10),i["\u0275\u0275pipe"](11,"filterByKey"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275reference"](5),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("nzSuffix",o),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",r.searchValue)("placeholder",r.searchPlaceholder),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind2"](9,5,r.options,i["\u0275\u0275pureFunction1"](11,_,r.searchValue))),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(r.loading||r.options.length&&i["\u0275\u0275pipeBind2"](11,8,r.options,i["\u0275\u0275pureFunction1"](13,_,r.searchValue)).length))}}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",31),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"ADD_LABEL")))}function E(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",31),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"EDIT_LABEL")))}function M(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"li",32),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).selectedColor=e}),i["\u0275\u0275element"](1,"i",33),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275classProp"]("selected",r.selectedColor==o),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](3,C,o))}}function P(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",34),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).handleAddLabelCancel()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"COMMON_BUTTON_CANCLE")))}function I(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",35),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).handleAddLabelConfirm()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"ADD")))}function k(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",34),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).handleUpdateLabelCancel()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"COMMON_BUTTON_CANCLE")))}function T(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",35),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).handleUpdateLabelConfirm()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"COMMON_BUTTON_CONFIRM")))}function D(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,S,3,3,"p",23),i["\u0275\u0275template"](2,E,3,3,"p",23),i["\u0275\u0275elementStart"](3,"div",24),i["\u0275\u0275elementStart"](4,"input",25),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().inputValue=e}),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",26),i["\u0275\u0275elementStart"](7,"ul"),i["\u0275\u0275template"](8,M,2,5,"li",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",28),i["\u0275\u0275template"](10,P,3,3,"button",29),i["\u0275\u0275template"](11,I,3,3,"button",30),i["\u0275\u0275template"](12,k,3,3,"button",29),i["\u0275\u0275template"](13,T,3,3,"button",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","add"==o.mode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update"==o.mode),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",o.inputValue)("placeholder",i["\u0275\u0275pipeBind1"](5,9,"FILL_IN_LABEL_NAME")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",o.availableColors),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","add"==o.mode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","add"==o.mode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update"==o.mode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update"==o.mode)}}function A(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"p",36),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"span",15),i["\u0275\u0275elementStart"](6,"span",16),i["\u0275\u0275element"](7,"i",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"span",18),i["\u0275\u0275text"](9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"span",37),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",28),i["\u0275\u0275elementStart"](14,"button",34),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().handleDeleteLabelCancel()}),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"button",35),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().handleDeleteLabelConfirm()}),i["\u0275\u0275text"](18),i["\u0275\u0275pipe"](19,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,7,"COMFIRM_DELETE")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](15,C,o.currentEditLabel.color)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](17,y,o.currentEditLabel.color)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](o.currentEditLabel.title),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,9,"QUESTION_MARK")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](16,11,"COMMON_BUTTON_CANCLE")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](19,13,"COMMON_BUTTON_CONFIRM"))}}function z(e,t){1&e&&i["\u0275\u0275element"](0,"i",41)}function R(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",38),i["\u0275\u0275element"](1,"nz-spin",39),i["\u0275\u0275template"](2,z,1,0,"ng-template",null,40,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzIndicator",n)}}var L=function(){return["add","update"]},N=function(){return["delete"]},j=function(){function e(e){this.translate=e,this.searchPlaceholder=this.translate.instant("SEARCH_LABEL"),this.options=[],this.colorKey="color",this.modeChange=new i.EventEmitter,this.onSelect=new i.EventEmitter,this.onConfirm=new i.EventEmitter,this.searchValue="",this.inputValue="",this.availableColors=["#EC7E69","#FFB720","#76C16D","#4DD5D5","#69A5EC","#A595E5"],this.selectedColor=this.availableColors[0],this.currentEditLabel={}}return e.prototype.ngOnInit=function(){},e.prototype.handleOptionClick=function(e){e.isSelected=!e.isSelected,this.onSelect.emit(e)},e.prototype.handleConfirmClick=function(){this.resetSearchValue();var e=this.options.filter(function(e){return e.isSelected});this.onConfirm.emit(e)},e.prototype.resetSearchValue=function(){this.searchValue=""},e.prototype.modeSetter=function(e){this.mode=e,this.modeChange.emit(e)},e.prototype.addNewLabel=function(){this.modeSetter("add"),this.inputValue=this.searchValue,this.searchValue="",this.selectedColor=this.availableColors[0]},e.prototype.handleAddLabelConfirm=function(){this.inputValue&&this.onConfirm.emit({operate:"add",data:{title:this.inputValue,color:this.selectedColor}})},e.prototype.handleAddLabelCancel=function(){this.modeSetter("default")},e.prototype.updateLabel=function(e){this.modeSetter("update"),this.currentEditLabel=e,this.inputValue=e.title,this.selectedColor=e[this.colorKey]},e.prototype.deleteLabel=function(e){this.modeSetter("delete"),this.currentEditLabel=e},e.prototype.handleUpdateLabelConfirm=function(){this.inputValue==this.currentEditLabel.title&&this.selectedColor==this.currentEditLabel[this.colorKey]||this.onConfirm.emit({operate:"update",data:{id:this.currentEditLabel.id,title:this.inputValue,color:this.selectedColor}})},e.prototype.handleUpdateLabelCancel=function(){this.modeSetter("default")},e.prototype.handleDeleteLabelConfirm=function(){this.onConfirm.emit({operate:"delete",data:this.currentEditLabel})},e.prototype.handleDeleteLabelCancel=function(){this.modeSetter("default")},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.c))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["workitem-label-select-panel"]],contentQueries:function(e,t,n){var o;1&e&&i["\u0275\u0275contentQuery"](n,h,1),2&e&&i["\u0275\u0275queryRefresh"](o=i["\u0275\u0275loadQuery"]())&&(t.optionTemplateRef=o.first)},inputs:{loading:"loading",searchPlaceholder:"searchPlaceholder",options:"options",mode:"mode",colorKey:"colorKey"},outputs:{modeChange:"modeChange",onSelect:"onSelect",onConfirm:"onConfirm"},decls:5,vars:6,consts:[[1,"label-select-wrapper"],[4,"ngIf"],["class","loading-wrapper",4,"ngIf"],[1,"label-select-header"],[3,"nzSuffix"],["type","text","nz-input","",3,"ngModel","placeholder","ngModelChange"],["inputClearTpl",""],[1,"label-add-icon","iconfont","icon-close",3,"click"],[1,"label-select-body"],[3,"click",4,"ngFor","ngForOf"],["style","text-align: center;",4,"ngIf"],["nz-icon","","class","ant-input-clear-icon","nzTheme","fill","nzType","close-circle",3,"click",4,"ngIf"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],[3,"click"],["class","txt-primary","style","position: absolute;left: 15px;top: 8px;","nz-icon","","nzType","check","nzTheme","outline",4,"ngIf"],[1,"label-item"],[1,"label-bg",3,"ngStyle"],[1,"label-item-arrow"],[3,"ngStyle"],["nz-icon","","nzType","check","nzTheme","outline",1,"txt-primary",2,"position","absolute","left","15px","top","8px"],[1,"iconfont","icon-trash",3,"click"],[1,"iconfont","icon-edit",3,"click"],[2,"text-align","center"],["class","p-l-10 m-b-10",4,"ngIf"],[1,"label-add-input"],["nz-input","","type","text",3,"ngModel","placeholder","ngModelChange"],[1,"label-add-color"],[3,"selected","ngStyle","click",4,"ngFor","ngForOf"],[1,"label-add-footer"],["nz-button","","nzSize","small","nzType","danger","nzGhost","",3,"click",4,"ngIf"],["nz-button","","nzSize","small","nzType","primary","nzGhost","",3,"click",4,"ngIf"],[1,"p-l-10","m-b-10"],[3,"ngStyle","click"],[1,"iconfont","icon-check"],["nz-button","","nzSize","small","nzType","danger","nzGhost","",3,"click"],["nz-button","","nzSize","small","nzType","primary","nzGhost","",3,"click"],[1,"p-l-10","p-r-10","m-t-15","m-b-20","txt-666"],[1,"m-l-10"],[1,"loading-wrapper"],["nzSimple","",3,"nzIndicator"],["indicatorTemplate",""],["nz-icon","","nzType","loading",2,"font-size","24px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,O,12,15,"ng-container",1),i["\u0275\u0275template"](2,D,14,11,"ng-container",1),i["\u0275\u0275template"](3,A,20,19,"ng-container",1),i["\u0275\u0275template"](4,R,4,1,"div",2),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","default"==t.mode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pureFunction0"](4,L).includes(t.mode)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pureFunction0"](5,N).includes(t.mode)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.loading))},directives:[r.n,a.a,c.c,c.d,c.b,l.d,l.k,l.l,r.m,s.a,r.o,d.a,p.a,u.a],pipes:[m.a,o.b],styles:[".label-select-wrapper[_ngcontent-%COMP%]{position:relative;padding:10px 0;background-color:#fff;box-shadow:0 0 4px rgba(0,0,0,.2);border-right:4px}.label-select-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-header[_ngcontent-%COMP%]{padding:0 10px;position:relative}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-header[_ngcontent-%COMP%]   .label-add-icon[_ngcontent-%COMP%]{position:absolute;cursor:pointer;right:12px;bottom:3px;font-size:18px;transform:rotate(45deg);z-index:1}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-header[_ngcontent-%COMP%]     .ant-input-affix-wrapper{border-radius:0;outline:none;border:none;border-bottom:1px solid #d9d9d9;padding-right:30px}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%]{margin-top:10px;max-height:220px;overflow:auto}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:4px}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative;padding:5px 56px 5px 26px;cursor:pointer}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon-trash[_ngcontent-%COMP%]{font-size:18px;display:none;position:absolute;right:35px;top:3px;cursor:pointer}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon-edit[_ngcontent-%COMP%]{font-size:18px;display:none;position:absolute;right:15px;top:3px;cursor:pointer}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   .icon-edit[_ngcontent-%COMP%], .label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   .icon-trash[_ngcontent-%COMP%]{display:inline-block}.label-select-wrapper[_ngcontent-%COMP%]   .label-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   .label-item-arrow[_ngcontent-%COMP%]{border-top:8px solid #f2f2f2!important;border-bottom:8px solid #f2f2f2!important}.label-select-wrapper[_ngcontent-%COMP%]   .loading-wrapper[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;background:hsla(0,0%,100%,.7)}.label-select-wrapper[_ngcontent-%COMP%]   .loading-wrapper[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-input[_ngcontent-%COMP%]{padding:0 10px}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-input[_ngcontent-%COMP%]     .ant-input{border:none;outline:none;background-color:#f2f2f2}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-color[_ngcontent-%COMP%]{padding:0 10px;margin-top:20px;margin-bottom:20px}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-color[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-color[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:24px;width:24px;border-radius:50%;background-color:#f2f2f2;text-align:center;line-height:25px;color:transparent;cursor:pointer}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-color[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{color:#fff}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-color[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:first-child){margin-left:10px}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-footer[_ngcontent-%COMP%]{padding:0 10px;text-align:right}.label-select-wrapper[_ngcontent-%COMP%]   .label-add-footer[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:5px}.label-select-wrapper[_ngcontent-%COMP%]   .label-item[_ngcontent-%COMP%]{position:relative;font-size:12px;display:inline-block;margin-left:10px;height:18px;padding-left:10px;padding-right:5px}.label-select-wrapper[_ngcontent-%COMP%]   .label-item[_ngcontent-%COMP%]   .label-bg[_ngcontent-%COMP%]{opacity:.2;position:absolute;left:0;top:0;bottom:0;right:0}.label-select-wrapper[_ngcontent-%COMP%]   .label-item[_ngcontent-%COMP%]   .label-item-arrow[_ngcontent-%COMP%]{display:inline-block;position:absolute;height:100%;top:0;left:0;border:8px solid #fff;border-right-color:transparent;border-left:none}"]}),e}()},"8J34":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("+rOU"),o=n("rDax"),r=n("oEkB"),a=n("fXoL"),c=function(){function e(e){this.overlay=e}return e.prototype.show=function(e,t){void 0===t&&(t=0);var n=new o.e({scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:!0}),a=this.overlay.create(n),c=a.attach(new i.c(r.a)).instance;c.fullScreen=!0,c.urls=e,c.index=t,c.close.subscribe(function(){return a.dispose()})},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](o.d))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()},"8WYy":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("ofXK"),o=n("sYmb"),r=n("3Pt+"),a=n("D9mS"),c=n("dEAy"),l=n("fXoL"),s=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[i.c,o.a,r.g,a.b,c.b]]}),e}()},"8oxB":function(e,t){var n,i,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,s=[],d=!1,p=-1;function u(){d&&l&&(d=!1,l.length?s=l.concat(s):p=-1,s.length&&m())}function m(){if(!d){var e=c(u);d=!0;for(var t=s.length;t;){for(l=s,s=[];++p<t;)l&&l[p].run();p=-1,t=s.length}l=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new h(e,t)),1!==s.length||d||c(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"8p0l":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("ofXK"),o=n("qAZ0"),r=n("FwiY"),a=n("fXoL"),c=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[i.c,o.b,r.b]]}),e}()},"9/xO":function(e,t,n){"use strict";n.d(t,"a",function(){return L});var i=n("fXoL"),o=n("hbEN"),r=n("HI9p"),a=n("PTRe"),c=n("3Pt+"),l=n("ofXK"),s=n("OzZK"),d=n("RwU8"),p=n("C2AL"),u=n("qAZ0"),m=n("FwiY"),h=n("yg7y"),g=n("Dyep"),f=n("sYmb"),v=n("u7mE"),b=["option"],C=function(e){return{$implicit:e}};function y(e,t){if(1&e&&i["\u0275\u0275elementContainer"](0,12),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngTemplateOutlet",o.optionTemplateRef)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,C,n))}}function x(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.title)}}var w=function(e){return{width:e}};function _(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"li",10),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).handleOptionClick(e)}),i["\u0275\u0275template"](1,y,1,4,"ng-container",11),i["\u0275\u0275template"](2,x,2,1,"ng-container",4),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](3,w,o.styles&&o.styles.width)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.optionTemplateRef),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!o.optionTemplateRef)}}function O(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"li",13),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"LIST_FILTER_TIP")))}function S(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,_,3,5,"li",8),i["\u0275\u0275pipe"](2,"slice"),i["\u0275\u0275pipe"](3,"filter"),i["\u0275\u0275template"](4,O,3,3,"li",9),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind3"](2,2,i["\u0275\u0275pipeBind2"](3,6,n.options,n.searchValue),0,n.limitTo)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!n.searchValue&&n.limitTo&&n.options.length>n.limitTo)}}function E(e,t){if(1&e&&i["\u0275\u0275elementContainer"](0,12),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngTemplateOutlet",o.optionTemplateRef)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,C,n))}}function M(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.title)}}function P(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"li",10),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).handleOptionClick(e)}),i["\u0275\u0275template"](1,E,1,4,"ng-container",11),i["\u0275\u0275template"](2,M,2,1,"ng-container",4),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](3,w,o.styles&&o.styles.width)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.optionTemplateRef),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!o.optionTemplateRef)}}function I(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,P,3,5,"li",8),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.options)}}var k=function(e,t,n){return{width:e,height:t,"padding-top":n}};function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"li",14),i["\u0275\u0275element"](1,"img",15),i["\u0275\u0275pipe"](2,"assetUrl"),i["\u0275\u0275elementStart"](3,"div",16),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction3"](7,k,n.styles&&n.styles.width,n.styles&&n.styles.maxHeight,n.styles&&"50px")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("src",i["\u0275\u0275pipeBind1"](2,3,"img/empty.svg"),i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](5,5,"NO_CONTENT_FOUND"))}}function D(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275elementStart"](1,"button",18),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().handleConfirmClick()}),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,1,"COMMON_BUTTON_CONFIRM")))}function A(e,t){1&e&&i["\u0275\u0275element"](0,"i",22)}function z(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275element"](1,"nz-spin",20),i["\u0275\u0275template"](2,A,1,0,"ng-template",null,21,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzIndicator",n)}}var R=function(e,t){return{height:e,maxHeight:t}},L=function(){function e(){var e=this;this.searchPlaceholder="",this.options=[],this.forwardNode=!1,this.type="multiple",this.onSelect=new i.EventEmitter,this.onConfirm=new i.EventEmitter,this.onSearch=new i.EventEmitter,this.searchValue="",this.searchFun=Object(o.a)(function(t){e.onSearch.emit(t)},500)}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){e.options&&e.options.currentValue&&e.options.currentValue.length>0&&("single"==this.type&&this.selected&&this.formatSingleOption(),"multiple"==this.type&&this.selected&&this.formatMultipleOption(),this.options.sort(function(e,t){return e.isSelected&&!t.isSelected?-1:1}))},e.prototype.formatSingleOption=function(){for(var e=0;e<this.options.length;e++){var t=this.options[e];t.isSelected=!1,this.selected.id==t.id&&(!this.params||!this.params.key||this.selected[this.params.key]===t[this.params.key])&&(t.isSelected=!0,this.selected=t)}},e.prototype.formatMultipleOption=function(){for(var e=0;e<this.options.length;e++){var t=this.options[e];t.isSelected||(t.isSelected=-1!==Object(r.a)(this.selected,{id:t.id,domainId:t.domainId}))}},e.prototype.handleOptionClick=function(e){var t=this;if(!e.invalid){if(this.options.forEach(e.exclusive?function(e){e.exclusive||(e.isSelected=!1)}:function(e){e.exclusive&&(e.isSelected=!1)}),e.isSelected=!e.isSelected,"single"==this.type&&(this.selected&&(this.selected.id!=e.id||!this.params||!this.params.key||this.selected&&this.selected[this.params.key]!=e[this.params.key])&&(this.selected.isSelected=!1),this.selected=e,this.options.sort(function(e,t){return e.isSelected&&!t.isSelected?-1:1})),"multiple"==this.type&&this.options.sort(function(e,t){return e.isSelected&&!t.isSelected?-1:1}),this.searchValue&&this.limitTo>0&&this.options.length>this.limitTo&&this.options.sort(function(e,t){return e.isSelected&&!t.isSelected?-1:1}),this.forwardNode){this.options.sort(function(e,t){return e.isSelected&&!t.isSelected?-1:1});var n=this.options.findIndex(function(e){return!e.isSelected});this.options.splice(0,n).forEach(function(e){t.options.unshift(e)})}this.resetSearchValue(),this.onSelect.emit(e)}},e.prototype.handleConfirmClick=function(){this.resetSearchValue(),this.options.sort(function(e,t){return e.isSelected&&!t.isSelected?-1:1});var e=this.options.filter(function(e){return e.isSelected});this.onConfirm.emit(e)},e.prototype.resetSearchValue=function(){this.searchValue=""},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["workitem-search-select-panel"]],contentQueries:function(e,t,n){var o;1&e&&i["\u0275\u0275contentQuery"](n,b,1),2&e&&i["\u0275\u0275queryRefresh"](o=i["\u0275\u0275loadQuery"]())&&(t.optionTemplateRef=o.first)},inputs:{loading:"loading",searchPlaceholder:"searchPlaceholder",options:"options",limitTo:"limitTo",selected:"selected",forwardNode:"forwardNode",type:"type",styles:"styles",params:"params"},outputs:{onSelect:"onSelect",onConfirm:"onConfirm",onSearch:"onSearch"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:10,vars:13,consts:[[1,"search-select-wrapper"],[1,"search-select-header"],["nz-input","","type","text",3,"ngModel","placeholder","ngModelChange"],[1,"search-select-body",3,"ngStyle"],[4,"ngIf"],["style","text-align: center;padding: 5px 0 5px 0;",3,"ngStyle",4,"ngIf"],["class","search-select-footer",4,"ngIf"],["class","loading-wrapper",4,"ngIf"],[3,"ngStyle","click",4,"ngFor","ngForOf"],["class","search-tip",4,"ngIf"],[3,"ngStyle","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"search-tip"],[2,"text-align","center","padding","5px 0 5px 0",3,"ngStyle"],["width","64",3,"src"],[1,"text-cccccc","m-t-10"],[1,"search-select-footer"],["nz-button","","nzSize","small","nzType","primary","nzGhost","",1,"confirm-btn",3,"click"],[1,"loading-wrapper"],["nzSimple","",3,"nzIndicator"],["indicatorTemplate",""],["nz-icon","","nzType","loading",2,"font-size","24px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"input",2),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchValue=e})("ngModelChange",function(){return t.searchFun(t.searchValue)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"ul",3),i["\u0275\u0275pipe"](4,"isEmpty"),i["\u0275\u0275template"](5,S,5,9,"ng-container",4),i["\u0275\u0275template"](6,I,2,1,"ng-container",4),i["\u0275\u0275template"](7,T,6,11,"li",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,D,4,3,"div",6),i["\u0275\u0275template"](9,z,4,1,"div",7),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",t.searchValue)("placeholder",t.searchPlaceholder),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction2"](10,R,t.loading&&i["\u0275\u0275pipeBind1"](4,8,t.options)?"220px":"unset",t.styles&&t.styles.maxHeight)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.params||!t.params.isRemoteSearch),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.params&&t.params.isRemoteSearch),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.loading&&t.options&&0==t.options.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","single"!=t.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.loading))},directives:[a.b,c.d,c.k,c.l,l.o,l.n,l.m,l.s,s.a,d.a,p.a,u.a,m.a],pipes:[h.a,l.v,g.a,f.b,v.a],styles:[".search-select-wrapper[_ngcontent-%COMP%]{position:relative;padding:10px 0;background-color:#fff;box-shadow:0 0 4px rgba(0,0,0,.2);border-right:4px}.search-select-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-header[_ngcontent-%COMP%]{padding:0 10px}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-header[_ngcontent-%COMP%]     .ant-input{border-radius:0;outline:none;border:none;border-bottom:1px solid #d9d9d9}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-body[_ngcontent-%COMP%]{margin-top:10px;max-height:220px;overflow:auto}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:4px}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{width:200px;margin:0 10px}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-body[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-body[_ngcontent-%COMP%]   .search-tip[_ngcontent-%COMP%]{text-align:center;color:#ccc;cursor:default}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-body[_ngcontent-%COMP%]   .search-tip[_ngcontent-%COMP%]:hover{background-color:transparent}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-footer[_ngcontent-%COMP%]{padding:0 10px;margin-top:10px;text-align:right}.search-select-wrapper[_ngcontent-%COMP%]   .search-select-footer[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{line-height:20px;border:1px solid #23c6c8;padding:2px 10px;color:#23c6c8;height:26px;background:none;border-radius:3px}.search-select-wrapper[_ngcontent-%COMP%]   .loading-wrapper[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;background:hsla(0,0%,100%,.7)}.search-select-wrapper[_ngcontent-%COMP%]   .loading-wrapper[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"]}),e}()},"9CzY":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("ofXK"),o=n("nJia"),r=n("9zdF"),a=n("sYmb"),c=n("fXoL"),l=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[i.c,o.b,r.a,a.a]]}),e}()},"9l1e":function(e,t,n){var i,o=n("9Z5Q");tinymce.addI18n("zh_CN",(o(i={Redo:"\u6062\u590d",Undo:"\u64a4\u9500",Cut:"\u526a\u5207",Copy:"\u590d\u5236",Paste:"\u7c98\u8d34","Select all":"\u5168\u9009","New document":"\u65b0\u5efa\u6587\u6863",Ok:"\u786e\u5b9a",Cancel:"\u53d6\u6d88","Visual aids":"\u7f51\u683c\u7ebf",Bold:"\u7c97\u4f53",Italic:"\u659c\u4f53",Underline:"\u4e0b\u5212\u7ebf",Strikethrough:"\u5220\u9664\u7ebf",Superscript:"\u4e0a\u6807",Subscript:"\u4e0b\u6807","Clear formatting":"\u6e05\u9664\u683c\u5f0f","Align left":"\u5de6\u5bf9\u9f50","Align center":"\u5c45\u4e2d","Align right":"\u53f3\u5bf9\u9f50",Justify:"\u4e24\u7aef\u5bf9\u9f50","Bullet list":"\u7b26\u53f7\u5217\u8868","Numbered list":"\u6570\u5b57\u5217\u8868","Decrease indent":"\u51cf\u5c11\u7f29\u8fdb","Increase indent":"\u589e\u52a0\u7f29\u8fdb",Close:"\u5173\u95ed",Formats:"\u683c\u5f0f","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8bbf\u95ee\u526a\u8d34\u677f\uff0c\u8bf7\u4f7f\u7528\u5feb\u6377\u952eCtrl+X/C/V\u590d\u5236\u7c98\u8d34",Headers:"\u6807\u9898","Header 1":"\u6807\u98981","Header 2":"\u6807\u98982","Header 3":"\u6807\u98983","Header 4":"\u6807\u98984","Header 5":"\u6807\u98985","Header 6":"\u6807\u98986",Headings:"\u6807\u9898","Heading 1":"\u6807\u98981","Heading 2":"\u6807\u98982","Heading 3":"\u6807\u98983","Heading 4":"\u6807\u98984","Heading 5":"\u6807\u98985","Heading 6":"\u6807\u98986",Preformatted:"\u9884\u683c\u5f0f\u5316",Div:"Div\u533a\u5757",Pre:"\u9884\u683c\u5f0f\u6587\u672c",Code:"\u4ee3\u7801",Paragraph:"\u6bb5\u843d",Blockquote:"\u5f15\u7528",Inline:"\u6587\u672c",Blocks:"\u533a\u5757","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"\u5f53\u524d\u4e3a\u7eaf\u6587\u672c\u7c98\u8d34\u6a21\u5f0f\uff0c\u518d\u6b21\u70b9\u51fb\u53ef\u4ee5\u56de\u5230\u666e\u901a\u7c98\u8d34\u6a21\u5f0f\u3002",Fonts:"\u5b57\u4f53","Font Sizes":"\u5b57\u53f7",Class:"Class","Browse for an image":"\u6d4f\u89c8\u56fe\u50cf",OR:"\u6216","Drop an image here":"\u62d6\u653e\u4e00\u5f20\u56fe\u7247\u6587\u4ef6\u81f3\u6b64",Upload:"\u4e0a\u4f20",Block:"\u5757",Align:"\u5bf9\u9f50",Default:"\u9ed8\u8ba4",Circle:"\u7a7a\u5fc3\u5706",Disc:"\u5b9e\u5fc3\u5706",Square:"\u65b9\u5757","Lower Alpha":"\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd","Lower Greek":"\u5c0f\u5199\u5e0c\u814a\u5b57\u6bcd","Lower Roman":"\u5c0f\u5199\u7f57\u9a6c\u5b57\u6bcd","Upper Alpha":"\u5927\u5199\u82f1\u6587\u5b57\u6bcd","Upper Roman":"\u5927\u5199\u7f57\u9a6c\u5b57\u6bcd","Anchor...":"\u951a\u70b9...",Name:"\u540d\u79f0",Id:"id","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"id\u5e94\u8be5\u4ee5\u5b57\u6bcd\u5f00\u5934\uff0c\u540e\u8ddf\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u6a2a\u7ebf\u3001\u70b9\u3001\u5192\u53f7\u6216\u4e0b\u5212\u7ebf\u3002","You have unsaved changes are you sure you want to navigate away?":"\u4f60\u5bf9\u6587\u6863\u7684\u4fee\u6539\u5c1a\u672a\u4fdd\u5b58\uff0c\u786e\u5b9a\u79bb\u5f00\u5417\uff1f","Restore last draft":"\u6062\u590d\u4e0a\u6b21\u7684\u8349\u7a3f","Special characters...":"\u7279\u6b8a\u5b57\u7b26...","Source code":"HTML\u6e90\u7801","Insert/Edit code sample":"\u63d2\u5165/\u7f16\u8f91\u4ee3\u7801\u793a\u4f8b",Language:"\u8bed\u8a00","Code sample...":"\u4ee3\u7801\u793a\u4f8b...","Color Picker":"\u9009\u53d6\u989c\u8272",R:"R",G:"G",B:"B","Left to right":"\u4ece\u5de6\u5230\u53f3","Right to left":"\u4ece\u53f3\u5230\u5de6","Emoticons...":"\u8868\u60c5\u7b26\u53f7...","Metadata and Document Properties":"\u5143\u6570\u636e\u548c\u6587\u6863\u5c5e\u6027",Title:"\u6807\u9898",Keywords:"\u5173\u952e\u8bcd",Description:"\u63cf\u8ff0",Robots:"\u673a\u5668\u4eba",Author:"\u4f5c\u8005",Encoding:"\u7f16\u7801",Fullscreen:"\u5168\u5c4f",Action:"\u64cd\u4f5c",Shortcut:"\u5feb\u6377\u952e",Help:"\u5e2e\u52a9",Address:"\u5730\u5740","Focus to menubar":"\u79fb\u52a8\u7126\u70b9\u5230\u83dc\u5355\u680f","Focus to toolbar":"\u79fb\u52a8\u7126\u70b9\u5230\u5de5\u5177\u680f","Focus to element path":"\u79fb\u52a8\u7126\u70b9\u5230\u5143\u7d20\u8def\u5f84","Focus to contextual toolbar":"\u79fb\u52a8\u7126\u70b9\u5230\u4e0a\u4e0b\u6587\u83dc\u5355","Insert link (if link plugin activated)":"\u63d2\u5165\u94fe\u63a5 (\u5982\u679c\u94fe\u63a5\u63d2\u4ef6\u5df2\u6fc0\u6d3b)","Save (if save plugin activated)":"\u4fdd\u5b58(\u5982\u679c\u4fdd\u5b58\u63d2\u4ef6\u5df2\u6fc0\u6d3b)","Find (if searchreplace plugin activated)":"\u67e5\u627e(\u5982\u679c\u67e5\u627e\u66ff\u6362\u63d2\u4ef6\u5df2\u6fc0\u6d3b)","Plugins installed ({0}):":"\u5df2\u5b89\u88c5\u63d2\u4ef6 ({0})\uff1a","Premium plugins:":"\u4f18\u79c0\u63d2\u4ef6\uff1a","Learn more...":"\u4e86\u89e3\u66f4\u591a...","You are using {0}":"\u4f60\u6b63\u5728\u4f7f\u7528 {0}",Plugins:"\u63d2\u4ef6","Handy Shortcuts":"\u5feb\u6377\u952e","Horizontal line":"\u6c34\u5e73\u5206\u5272\u7ebf","Insert/edit image":"\u63d2\u5165/\u7f16\u8f91\u56fe\u7247","Image description":"\u56fe\u7247\u63cf\u8ff0",Source:"\u5730\u5740",Dimensions:"\u5927\u5c0f","Constrain proportions":"\u4fdd\u6301\u5bbd\u9ad8\u6bd4",General:"\u5e38\u89c4",Advanced:"\u9ad8\u7ea7",Style:"\u6837\u5f0f","Vertical space":"\u5782\u76f4\u8fb9\u8ddd","Horizontal space":"\u6c34\u5e73\u8fb9\u8ddd",Border:"\u8fb9\u6846","Insert image":"\u63d2\u5165\u56fe\u7247","Image...":"\u56fe\u7247...","Image list":"\u56fe\u7247\u5217\u8868","Rotate counterclockwise":"\u9006\u65f6\u9488\u65cb\u8f6c","Rotate clockwise":"\u987a\u65f6\u9488\u65cb\u8f6c","Flip vertically":"\u5782\u76f4\u7ffb\u8f6c","Flip horizontally":"\u6c34\u5e73\u7ffb\u8f6c","Edit image":"\u7f16\u8f91\u56fe\u7247","Image options":"\u56fe\u7247\u9009\u9879","Zoom in":"\u653e\u5927","Zoom out":"\u7f29\u5c0f",Crop:"\u88c1\u526a",Resize:"\u8c03\u6574\u5927\u5c0f",Orientation:"\u65b9\u5411",Brightness:"\u4eae\u5ea6",Sharpen:"\u9510\u5316",Contrast:"\u5bf9\u6bd4\u5ea6","Color levels":"\u8272\u9636",Gamma:"\u4f3d\u9a6c\u503c",Invert:"\u53cd\u8f6c",Apply:"\u5e94\u7528",Back:"\u540e\u9000","Insert date/time":"\u63d2\u5165\u65e5\u671f/\u65f6\u95f4","Date/time":"\u65e5\u671f/\u65f6\u95f4","Insert/Edit Link":"\u63d2\u5165/\u7f16\u8f91\u94fe\u63a5","Insert/edit link":"\u63d2\u5165/\u7f16\u8f91\u94fe\u63a5","Text to display":"\u663e\u793a\u6587\u5b57",Url:"\u5730\u5740","Open link in...":"\u94fe\u63a5\u6253\u5f00\u65b9\u5f0f...","Current window":"\u5f53\u524d\u7a97\u53e3\u6253\u5f00",None:"\u5728\u5f53\u524d\u7a97\u53e3/\u6846\u67b6\u6253\u5f00","New window":"\u5728\u65b0\u7a97\u53e3\u6253\u5f00","Remove link":"\u5220\u9664\u94fe\u63a5",Anchors:"\u951a\u70b9","Link...":"\u94fe\u63a5...","Paste or type a link":"\u7c98\u8d34\u6216\u8f93\u5165\u94fe\u63a5","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"\u4f60\u6240\u586b\u5199\u7684URL\u5730\u5740\u4e3a\u90ae\u4ef6\u5730\u5740\uff0c\u9700\u8981\u52a0\u4e0amailto:\u524d\u7f00\u5417\uff1f","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"\u4f60\u6240\u586b\u5199\u7684URL\u5730\u5740\u5c5e\u4e8e\u5916\u90e8\u94fe\u63a5\uff0c\u9700\u8981\u52a0\u4e0ahttp://:\u524d\u7f00\u5417\uff1f","Link list":"\u94fe\u63a5\u5217\u8868","Insert video":"\u63d2\u5165\u89c6\u9891","Insert/edit video":"\u63d2\u5165/\u7f16\u8f91\u89c6\u9891","Insert/edit media":"\u63d2\u5165/\u7f16\u8f91\u5a92\u4f53","Alternative source":"\u66ff\u4ee3\u8d44\u6e90","Alternative image URL":"\u8d44\u6e90\u5907\u7528\u5730\u5740","Media poster (Image URL)":"\u5c01\u9762(\u56fe\u7247\u5730\u5740)","Paste your embed code below:":"\u5c06\u5185\u5d4c\u4ee3\u7801\u7c98\u8d34\u5728\u4e0b\u9762:",Embed:"\u5185\u5d4c","Media...":"\u591a\u5a92\u4f53...","Nonbreaking space":"\u4e0d\u95f4\u65ad\u7a7a\u683c","Page break":"\u5206\u9875\u7b26","Paste as text":"\u7c98\u8d34\u4e3a\u6587\u672c",Preview:"\u9884\u89c8","Print...":"\u6253\u5370...",Save:"\u4fdd\u5b58",Find:"\u67e5\u627e","Replace with":"\u66ff\u6362\u4e3a",Replace:"\u66ff\u6362","Replace all":"\u66ff\u6362\u5168\u90e8",Previous:"\u4e0a\u4e00\u4e2a",Next:"\u4e0b\u4e00\u4e2a","Find and replace...":"\u67e5\u627e\u5e76\u66ff\u6362...","Could not find the specified string.":"\u672a\u627e\u5230\u641c\u7d22\u5185\u5bb9\u3002","Match case":"\u533a\u5206\u5927\u5c0f\u5199","Find whole words only":"\u5168\u5355\u8bcd\u5339\u914d","Spell check":"\u62fc\u5199\u68c0\u67e5",Ignore:"\u5ffd\u7565","Ignore all":"\u5ffd\u7565\u5168\u90e8",Finish:"\u5b8c\u6210","Add to Dictionary":"\u6dfb\u52a0\u5230\u5b57\u5178","Insert table":"\u63d2\u5165\u8868\u683c","Table properties":"\u8868\u683c\u5c5e\u6027","Delete table":"\u5220\u9664\u8868\u683c","Copy table":"\u590d\u5236\u8868\u683c","Table full":"\u8868\u683c\u5168\u5c4f","Table wide":"\u5de6\u53f3\u5c55\u5f00/\u6536\u7f29",Cell:"\u5355\u5143\u683c",Row:"\u884c",Column:"\u5217","Cell properties":"\u5355\u5143\u683c\u5c5e\u6027","Merge cells":"\u5408\u5e76\u5355\u5143\u683c","Split cell":"\u62c6\u5206\u5355\u5143\u683c","Insert row before":"\u5728\u4e0a\u65b9\u63d2\u5165","Insert row after":"\u5728\u4e0b\u65b9\u63d2\u5165","Delete row":"\u5220\u9664\u884c","Row properties":"\u884c\u5c5e\u6027","Cut row":"\u526a\u5207\u884c","Copy row":"\u590d\u5236\u884c","Paste row before":"\u7c98\u8d34\u5230\u4e0a\u65b9","Paste row after":"\u7c98\u8d34\u5230\u4e0b\u65b9","Insert column before":"\u5728\u5de6\u4fa7\u63d2\u5165","Insert column after":"\u5728\u53f3\u4fa7\u63d2\u5165","Delete column":"\u5220\u9664\u5217",Cols:"\u5217",Rows:"\u884c",Width:"\u5bbd",Height:"\u9ad8","Cell spacing":"\u5355\u5143\u683c\u5916\u95f4\u8ddd","Cell padding":"\u5355\u5143\u683c\u5185\u8fb9\u8ddd","Show caption":"\u663e\u793a\u6807\u9898",Left:"\u5de6\u5bf9\u9f50",Center:"\u5c45\u4e2d",Right:"\u53f3\u5bf9\u9f50","Cell type":"\u5355\u5143\u683c\u7c7b\u578b",Scope:"\u8303\u56f4",Alignment:"\u5bf9\u9f50\u65b9\u5f0f","H Align":"\u6c34\u5e73\u5bf9\u9f50","V Align":"\u5782\u76f4\u5bf9\u9f50",Top:"\u9876\u90e8\u5bf9\u9f50",Middle:"\u5782\u76f4\u5c45\u4e2d",Bottom:"\u5e95\u90e8\u5bf9\u9f50","Header cell":"\u8868\u5934\u5355\u5143\u683c","Row group":"\u884c\u7ec4","Column group":"\u5217\u7ec4","Row type":"\u884c\u7c7b\u578b",Header:"\u8868\u5934",Body:"\u8868\u4f53",Footer:"\u8868\u5c3e","Border color":"\u8fb9\u6846\u989c\u8272","Insert template...":"\u63d2\u5165\u6a21\u677f...",Templates:"\u6a21\u677f",Template:"\u6a21\u677f","Text color":"\u6587\u5b57\u989c\u8272","Background color":"\u80cc\u666f\u8272","Cell background color":"\u80cc\u666f\u8272","Custom...":"\u81ea\u5b9a\u4e49...","Custom color":"\u81ea\u5b9a\u4e49\u989c\u8272","No color":"\u65e0","Remove color":"\u5220\u9664\u989c\u8272","Table of Contents":"\u76ee\u5f55","Show blocks":"\u663e\u793a\u533a\u5757\u8fb9\u6846","Show invisible characters":"\u663e\u793a\u4e0d\u53ef\u89c1\u5b57\u7b26","Word count":"\u5b57\u6570\u7edf\u8ba1","Words: {0}":"\u5b57\u6570\uff1a{0}","{0} words":"{0} \u4e2a\u5b57",File:"\u6587\u4ef6",Edit:"\u7f16\u8f91",Insert:"\u63d2\u5165",View:"\u67e5\u770b",Format:"\u683c\u5f0f",Table:"\u8868\u683c",Tools:"\u5de5\u5177","Powered by {0}":"Powered by {0}","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"\u5728\u7f16\u8f91\u533a\u6309ALT+F9\u6253\u5f00\u83dc\u5355\uff0c\u6309ALT+F10\u6253\u5f00\u5de5\u5177\u680f\uff0c\u6309ALT+0\u67e5\u770b\u5e2e\u52a9","Image title":"\u56fe\u7247\u6807\u9898","Border width":"\u8fb9\u6846\u5bbd\u5ea6","Border style":"\u8fb9\u6846\u6837\u5f0f",Error:"\u9519\u8bef",Warn:"\u8b66\u544a",Valid:"\u6709\u6548","To open the popup, press Shift+Enter":"\u6b64\u5feb\u6377\u4e3a\u8f6f\u56de\u8f66\uff08\u63d2\u5165<br>\uff09","Rich Text Area. Press ALT-0 for help.":"\u7f16\u8f91\u533a. \u6309Alt+0\u952e\u6253\u5f00\u5e2e\u52a9","System Font":"\u9ed8\u8ba4\u5b57\u4f53","Failed to upload image: {0}":"\u56fe\u7247\u4e0a\u4f20\u5931\u8d25: {0}","Failed to load plugin: {0} from url {1}":"\u63d2\u4ef6\u52a0\u8f7d\u5931\u8d25: {0} - {1}","Failed to load plugin url: {0}":"\u63d2\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}","Failed to initialize plugin: {0}":"\u63d2\u4ef6\u521d\u59cb\u5316\u5931\u8d25: {0}",example:"\u793a\u4f8b",Search:"\u67e5\u627e",All:"\u5168\u90e8",Currency:"\u8d27\u5e01",Text:"\u6587\u672c",Quotations:"\u5f15\u7528",Mathematical:"\u6570\u5b66\u8fd0\u7b97\u7b26","Extended Latin":"\u62c9\u4e01\u8bed\u6269\u5145",Symbols:"\u7b26\u53f7",Arrows:"\u7bad\u5934","User Defined":"\u81ea\u5b9a\u4e49","dollar sign":"\u7f8e\u5143","currency sign":"\u8d27\u5e01","euro-currency sign":"\u6b27\u5143","colon sign":"\u5192\u53f7","cruzeiro sign":"\u514b\u9c81\u8d5b\u7f57\u5e01","french franc sign":"\u6cd5\u90ce","lira sign":"\u91cc\u62c9","mill sign":"\u5bc6\u5c14","naira sign":"\u5948\u62c9","peseta sign":"\u6bd4\u585e\u5854","rupee sign":"\u5362\u6bd4","won sign":"\u97e9\u5143","new sheqel sign":"\u65b0\u8c22\u514b\u5c14","dong sign":"\u8d8a\u5357\u76fe","kip sign":"\u8001\u631d\u57fa\u666e","tugrik sign":"\u56fe\u683c\u91cc\u514b","drachma sign":"\u5fb7\u62c9\u514b\u9a6c","german penny symbol":"\u5fb7\u56fd\u4fbf\u58eb","peso sign":"\u6bd4\u7d22","guarani sign":"\u74dc\u62c9\u5c3c","austral sign":"\u6fb3\u5143","hryvnia sign":"\u683c\u91cc\u592b\u5c3c\u4e9a","cedi sign":"\u585e\u5730","livre tournois sign":"\u91cc\u5f17\u5f17\u5c14","spesmilo sign":"\u4e00\u5343spesoj\u7684\u8d27\u5e01\u7b26\u53f7\uff0c\u8be5\u8d27\u5e01\u672a\u4f7f\u7528","tenge sign":"\u575a\u6208","indian rupee sign":"\u5370\u5ea6\u5362\u6bd4","turkish lira sign":"\u571f\u8033\u5176\u91cc\u62c9","nordic mark sign":"\u5317\u6b27\u9a6c\u514b","manat sign":"\u9a6c\u7eb3\u7279","ruble sign":"\u5362\u5e03","yen character":"\u65e5\u5143","yuan character":"\u4eba\u6c11\u5e01\u5143","yuan character, in hong kong and taiwan":"\u5143\u7684\u7e41\u4f53\u5b57","yen/yuan character variant one":"\u5143\uff08\u5927\u5199\uff09","Loading emoticons...":"\u6b63\u5728\u52a0\u8f7d\u8868\u60c5\u6587\u5b57...","Could not load emoticons":"\u4e0d\u80fd\u52a0\u8f7d\u8868\u60c5\u6587\u5b57",People:"\u4eba\u7c7b","Animals and Nature":"\u52a8\u7269\u548c\u81ea\u7136","Food and Drink":"\u98df\u7269\u548c\u996e\u54c1",Activity:"\u6d3b\u52a8","Travel and Places":"\u65c5\u6e38\u548c\u5730\u70b9",Objects:"\u7269\u4ef6",Flags:"\u65d7\u5e1c",Characters:"\u5b57\u6570","Characters (no spaces)":"\u5b57\u6570\uff08\u4e0d\u542b\u7a7a\u683c\uff09","Error: Form submit field collision.":"\u9519\u8bef: \u8868\u5355\u63d0\u4ea4\u5b57\u6bb5\u51b2\u7a81.","Error: No form element found.":"\u9519\u8bef: \u672a\u627e\u5230\u53ef\u7528\u7684form.",Update:"\u66f4\u65b0","Color swatch":"\u989c\u8272\u6837\u672c",Turquoise:"\u9752\u7eff",Green:"\u7eff\u8272",Blue:"\u84dd\u8272",Purple:"\u7d2b\u8272","Navy Blue":"\u6d77\u519b\u84dd","Dark Turquoise":"\u6df1\u84dd\u7eff\u8272","Dark Green":"\u6697\u7eff","Medium Blue":"\u4e2d\u84dd","Medium Purple":"\u4e2d\u7d2b","Midnight Blue":"\u6df1\u84dd",Yellow:"\u9ec4\u8272",Orange:"\u6a59\u8272",Red:"\u7ea2\u8272","Light Gray":"\u6d45\u7070",Gray:"\u7070\u8272","Dark Yellow":"\u6697\u9ec4","Dark Orange":"\u6697\u6a59","Dark Red":"\u6697\u7ea2","Medium Gray":"\u4e2d\u7070","Dark Gray":"\u6df1\u7070",Black:"\u9ed1\u8272",White:"\u767d\u8272","Switch to or from fullscreen mode":"\u5207\u6362\u5168\u5c4f\u6a21\u5f0f","Open help dialog":"\u6253\u5f00\u5e2e\u52a9\u5bf9\u8bdd\u6846",history:"\u5386\u53f2",styles:"\u6837\u5f0f",formatting:"\u683c\u5f0f\u5316",alignment:"\u5bf9\u9f50",indentation:"\u7f29\u8fdb","permanent pen":"\u8bb0\u53f7\u7b14",comments:"\u6ce8\u91ca",Anchor:"\u951a\u70b9","Special character":"\u7279\u6b8a\u5b57\u7b26","Code sample":"\u4ee3\u7801\u793a\u4f8b",Color:"\u989c\u8272",Emoticons:"\u8868\u60c5","Document properties":"\u6587\u6863\u5c5e\u6027",Image:"\u56fe\u7247","Insert link":"\u63d2\u5165\u94fe\u63a5",Target:"\u76ee\u6807",Link:"\u94fe\u63a5",Poster:"\u5c01\u9762",Media:"\u97f3\u89c6\u9891",Print:"\u6253\u5370",Prev:"\u4e0a\u4e00\u4e2a","Find and replace":"\u67e5\u627e\u5e76\u66ff\u6362","Whole words":"\u5168\u5b57\u5339\u914d",Spellcheck:"\u62fc\u5199\u68c0\u67e5",Caption:"\u6807\u9898","Insert template":"\u63d2\u5165\u6a21\u677f","Code view":"\u4ee3\u7801\u533a\u57df","Select...":"\u9009\u62e9...","Format Painter":"\u683c\u5f0f\u5237","No templates defined.":"\u65e0\u5185\u7f6e\u6a21\u677f","Special character...":"\u7279\u6b8a\u5b57\u7b26...","Open link":"\u6253\u5f00\u94fe\u63a5"},"None","\u65e0"),o(i,"Count","\u7edf\u8ba1"),o(i,"Document","\u6574\u4e2a\u6587\u6863"),o(i,"Selection","\u9009\u53d6\u90e8\u5206"),o(i,"Words","\u5b57\u8bcd\u6570"),o(i,"{0} characters","{0} \u4e2a\u5b57\u7b26"),o(i,"Alternative source URL","\u66ff\u4ee3\u8d44\u6e90\u5730\u5740"),o(i,"Alternative description","\u66ff\u4ee3\u8bf4\u660e\u6587\u5b57"),o(i,"Accessibility","\u53ef\u8bbf\u95ee\u6027"),o(i,"Image is decorative","\u4ec5\u7528\u4e8e\u88c5\u9970"),o(i,"Version","\u7248\u672c"),o(i,"Keyboard Navigation","\u952e\u76d8\u5bfc\u822a"),o(i,"Open popup menu for split buttons","\u8be5\u7ec4\u5408\u952e\u7684\u4f5c\u7528\u662f\u8f6f\u56de\u8f66\uff08\u63d2\u5165br\uff09"),o(i,"Line height","\u884c\u9ad8"),o(i,"Cut column","\u526a\u5207\u5217"),o(i,"Copy column","\u590d\u5236\u5217"),o(i,"Paste column before","\u7c98\u8d34\u5230\u5de6\u4fa7"),o(i,"Paste column after","\u7c98\u8d34\u5230\u53f3\u4fa7"),o(i,"Horizontal align","\u6c34\u5e73\u5bf9\u9f50"),o(i,"Vertical align","\u5782\u76f4\u5bf9\u9f50"),i))},"9zdF":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("ofXK"),o=n("fXoL"),r=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[i.c]]}),e}()},AA4e:function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"h",function(){return a}),n.d(t,"o",function(){return c}),n.d(t,"q",function(){return l}),n.d(t,"u",function(){return s}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return m}),n.d(t,"f",function(){return h}),n.d(t,"s",function(){return g}),n.d(t,"p",function(){return f}),n.d(t,"j",function(){return v}),n.d(t,"g",function(){return b}),n.d(t,"t",function(){return _}),n.d(t,"m",function(){return O}),n.d(t,"i",function(){return S}),n.d(t,"r",function(){return E}),n.d(t,"l",function(){return M}),n.d(t,"k",function(){return P}),n.d(t,"n",function(){return I}),n("z4NU");var i=n("LRne"),o=n("vRWp"),r=function(e){var t=e;if(e&&"object"==typeof e){if(e instanceof Date)return new Date(e.getTime());t="[object Array]"===Object.prototype.toString.call(e)?[]:{},Object.keys(e).forEach(function(n){t[n]=r(e[n])})}return t},a=function(e,t){if(e){try{e instanceof Date||(e=new Date(e));var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,String(e.getFullYear()).substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr(String(n[i]).length)))}catch(o){console.error(o)}return t}},c=function(e){return null==e||void 0!==e.length&&0===e.length||0===Object.keys(e).length},l=function(e){return 1===e?"rich-text":"markdown"},s=function(e,t){return""===t?t:["workload_man_day","workLoad"].includes(e)?Number((22*t).toFixed(2)):"workload_man_month"===e?Number((t/22).toFixed(2)):t},d={deepCopy:r,formatDate:a,getIds:function(e){return Array.isArray(e)?e.map(function(e){return e&&e.id?e.id:null}):[]},isEmptyValue:c,calcDateRange:function(e,t){var n=new Date(e),i=new Date(t),o=Math.abs(i.getTime()-n.getTime());return Math.ceil(o/864e5)+1},saveAllCdks:function(e){var t=document.querySelectorAll(".cdk-overlay-container"),n=[];if(t.length>0)for(var i=t.length,o=0;o<i;o++)0==e.length?e.push(t.item(o)):e.length>0&&(e.includes(t.item(o))||e.push(t.item(o))),n.push(t.item(o));e.forEach(function(e){n.includes(e)||document.body.appendChild(e)})},checkIsPresent:function(e,t){if(e&&t){var n=new Date(e).getTime(),i=new Date(t).getTime(),o=(new Date).getTime();return o>=n&&o<=i}},workloadChange:s,getUtf8CharLength:function(e){var t,n,i,o=0;for(n=0,i=e.length;n<i;n++)o+=(t=e.charCodeAt(n))<=127?1:t<=2047?2:t<=65535?3:4;return o}},p=new Promise(function(e,t){window.communicationService&&window.communicationService.currentDomain$&&window.communicationService.currentDomain$.subscribe({next:function(t){t&&e(t)},error:function(e){return t(e)}})}),u=new Promise(function(e,t){window.communicationService.currentUser$||!window.communicationService.currentUser?window.communicationService.currentUser$.subscribe({next:function(t){t&&e(t)},error:function(e){return t(e)}}):e(window.communicationService.currentUser)}),m=new Promise(function(e,t){window.communicationService&&window.communicationService.currentCloudService$&&window.communicationService.currentCloudService$.subscribe({next:function(t){t&&e(t)},error:function(e){return t(e)}})}),h=function(e){return{Department:"DOMAIN_TYPE_DEPARTMENT","Product Line":"DOMAIN_TYPE_PRODUCT_LINE","Product Department":"DOMAIN_TYPE_PRODUCT_DEPARTMENT",Solution:"DOMAIN_TYPE_SOLUTION","Service Domain":"DOMAIN_TYPE_SERVICE_DOMAIN",Team:"DOMAIN_TYPE_TEAM",Product:"DOMAIN_TYPE_PRODUCT","Cloud Service":"DOMAIN_TYPE_CLOUD_SERVICE","Internal Service":"DOMAIN_TYPE_INTERNAL_SERVICE",Service:"DOMAIN_TYPE_SERVICE",Project:"DOMAIN_TYPE_PROJECT",Program:"DOMAIN_TYPE_PROGRAM"}[e]||"unknown"};function g(e,t,n){void 0===n&&(n=0);var i=t.offsetTop-e.offsetTop-n;i>0&&e.scrollTo({top:i})}function f(e,t){void 0===t&&(t=1),setTimeout(function(){e()},t)}var v=function(e){return(e=(e=(e=(e=e||"").replace(/<(?!img).*?>/g,"")).replace(/[ | ]*\n/g,"\n")).replace(/\n[\s| | ]*\r/g,"\n")).replace(/&(lt|gt|nbsp|amp|quot|emsp|ensp);/g,"").trim()};function b(e,t){void 0===t&&(t=[]);var n=document.createElement("div");return n.innerHTML=e,t.forEach(function(e){n.querySelectorAll(e).forEach(function(e){e.parentNode.removeChild(e)})}),n.innerHTML}function C(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.childNodes,e):-1}function y(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.children,e):-1}function x(e,t){if(!e.contains(t))throw new Error("root node not contain target node");for(var n=[],i=0;t!==e;)n.unshift(0===i?C(t):y(t)),i++,t=t.parentNode;return n}function w(e,t,n){return null==t?void 0:t.reduce(function(e,i,o){return e?o===t.length-1&&n===Node.TEXT_NODE?e.childNodes[i]:e.children[i]:null},e)}function _(e,t){var n=t.endNodePath,i=t.startOffset,o=t.endOffset,r=t.endNodeType,a=w(e,t.startNodePath,t.startNodeType),c=w(e,n,r);if(a&&c){var l=document.createRange();try{l.setStart(a,i)}catch(d){l.setStart(a,0)}try{l.setEnd(c,o)}catch(p){l.setEnd(c,0)}var s=getSelection();s.removeAllRanges(),s.addRange(l)}}function O(e){var t=getSelection().getRangeAt(0),n=t.startContainer,i=t.endContainer,o=t.startOffset,r=t.endOffset;if(!e.contains(n)||!e.contains(i))return!1;var a=x(e,n),c=x(e,i);return{startNodePath:a,startOffset:o,startNodeType:n.nodeType,endNodePath:c,endOffset:r,endNodeType:i.nodeType}}var S=function(e){var t="";try{t=e.replace(/<[^<>]+>/g,"").replace(/[\r\n\\n&nbsp;\s+]/gi,"")}catch(n){t=""}return t},E=function(e){var t=(new Date).getTime();console.log(e+": ",t-(null===window||void 0===window?void 0:window.startTime))},M=function(){var e=window.location.href.match(/rat\/detail\/(\d+)\/workitem/);return window.location.href.includes("/rat/detail")&&e&&e[1]?{scene:"rat",scene_id:e[1]}:{}};function P(e,t){return void 0===e&&(e=""),void 0===t&&(t=16),""+e+new Array(t).fill(0).map(function(){return(16*Object(o.a)()|0).toString(16)}).join("")}var I=function(e){return void 0===e&&(e={}),function(t){return Object(i.a)(e)}}},"AlH/":function(e,t,n){var i=n("GuN1"),o=n("LWLZ"),r=n("u33/"),a=n("X72n");e.exports=function(e){return i(e)||o(e)||r(e)||a()}},"B+r4":function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"b",function(){return C}),n.d(t,"c",function(){return v});var i=n("TR1e"),o=n("95OS"),r=n("MGFw"),a=n("WtWf"),c=n("cH1L"),l=n("0MNC"),s=n("nLfN"),d=n("JwMs"),p=n("jtHE"),u=n("XNiG"),m=n("1G5W"),h=n("/KA4"),g=n("ofXK"),f=n("fXoL"),v=function(){var e=function(){function e(t,n,i,o,a,c,l){Object(r.a)(this,e),this.elementRef=t,this.renderer=n,this.mediaMatcher=i,this.ngZone=o,this.platform=a,this.breakpointService=c,this.directionality=l,this.nzAlign=null,this.nzJustify=null,this.nzGutter=null,this.actualGutter$=new p.a(1),this.dir="ltr",this.destroy$=new u.a,this.elementRef.nativeElement.classList.add("ant-row")}return Object(a.a)(e,[{key:"getGutter",value:function(){var e=this,t=[null,null],n=this.nzGutter||0;return(Array.isArray(n)?n:[n,null]).forEach(function(n,i){"object"==typeof n&&null!==n?(t[i]=null,Object.keys(d.f).map(function(o){var r=o;e.mediaMatcher.matchMedia(d.f[r]).matches&&n[r]&&(t[i]=n[r])})):t[i]=Number(n)||null}),t}},{key:"setGutterStyle",value:function(){var e=this,t=this.getGutter(),n=Object(o.a)(t,2),i=n[0],r=n[1];this.actualGutter$.next([i,r]);var a=function(t,n){null!==n&&e.renderer.setStyle(e.elementRef.nativeElement,t,"-".concat(n/2,"px"))};a("margin-left",i),a("margin-right",i),a("margin-top",r),a("margin-bottom",r)}},{key:"ngOnInit",value:function(){var e,t=this;this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(Object(m.a)(this.destroy$)).subscribe(function(e){t.dir=e}),this.setGutterStyle()}},{key:"ngOnChanges",value:function(e){e.nzGutter&&this.setGutterStyle()}},{key:"ngAfterViewInit",value:function(){var e=this;this.platform.isBrowser&&this.breakpointService.subscribe(d.f).pipe(Object(m.a)(this.destroy$)).subscribe(function(){e.setGutterStyle()})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](f.ElementRef),f["\u0275\u0275directiveInject"](f.Renderer2),f["\u0275\u0275directiveInject"](l.b),f["\u0275\u0275directiveInject"](f.NgZone),f["\u0275\u0275directiveInject"](s.a),f["\u0275\u0275directiveInject"](d.b),f["\u0275\u0275directiveInject"](c.c,8))},e.\u0275dir=f["\u0275\u0275defineDirective"]({type:e,selectors:[["","nz-row",""],["nz-row"],["nz-form-item"]],hostVars:18,hostBindings:function(e,t){2&e&&f["\u0275\u0275classProp"]("ant-row-top","top"===t.nzAlign)("ant-row-middle","middle"===t.nzAlign)("ant-row-bottom","bottom"===t.nzAlign)("ant-row-start","start"===t.nzJustify)("ant-row-end","end"===t.nzJustify)("ant-row-center","center"===t.nzJustify)("ant-row-space-around","space-around"===t.nzJustify)("ant-row-space-between","space-between"===t.nzJustify)("ant-row-rtl","rtl"===t.dir)},inputs:{nzAlign:"nzAlign",nzJustify:"nzJustify",nzGutter:"nzGutter"},exportAs:["nzRow"],features:[f["\u0275\u0275NgOnChangesFeature"]]}),e}(),b=function(){var e=function(){function e(t,n,i,o){Object(r.a)(this,e),this.elementRef=t,this.nzRowDirective=n,this.renderer=i,this.directionality=o,this.classMap={},this.destroy$=new u.a,this.hostFlexStyle=null,this.dir="ltr",this.nzFlex=null,this.nzSpan=null,this.nzOrder=null,this.nzOffset=null,this.nzPush=null,this.nzPull=null,this.nzXs=null,this.nzSm=null,this.nzMd=null,this.nzLg=null,this.nzXl=null,this.nzXXl=null}return Object(a.a)(e,[{key:"setHostClassMap",value:function(){var e,t=Object.assign((e={},Object(i.a)(e,"ant-col",!0),Object(i.a)(e,"ant-col-".concat(this.nzSpan),Object(h.i)(this.nzSpan)),Object(i.a)(e,"ant-col-order-".concat(this.nzOrder),Object(h.i)(this.nzOrder)),Object(i.a)(e,"ant-col-offset-".concat(this.nzOffset),Object(h.i)(this.nzOffset)),Object(i.a)(e,"ant-col-pull-".concat(this.nzPull),Object(h.i)(this.nzPull)),Object(i.a)(e,"ant-col-push-".concat(this.nzPush),Object(h.i)(this.nzPush)),Object(i.a)(e,"ant-col-rtl","rtl"===this.dir),e),this.generateClass());for(var n in this.classMap)this.classMap.hasOwnProperty(n)&&this.renderer.removeClass(this.elementRef.nativeElement,n);for(var o in this.classMap=Object.assign({},t),this.classMap)this.classMap.hasOwnProperty(o)&&this.classMap[o]&&this.renderer.addClass(this.elementRef.nativeElement,o)}},{key:"setHostFlexStyle",value:function(){this.hostFlexStyle=this.parseFlex(this.nzFlex)}},{key:"parseFlex",value:function(e){return"number"==typeof e?"".concat(e," ").concat(e," auto"):"string"==typeof e&&/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}},{key:"generateClass",value:function(){var e=this,t={};return["nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"].forEach(function(n){var i=n.replace("nz","").toLowerCase();if(Object(h.i)(e[n]))if("number"==typeof e[n]||"string"==typeof e[n])t["ant-col-".concat(i,"-").concat(e[n])]=!0;else{var o=e[n];["span","pull","push","offset","order"].forEach(function(e){var n="span"===e?"-":"-".concat(e,"-");t["ant-col-".concat(i).concat(n).concat(o[e])]=o&&Object(h.i)(o[e])})}}),t}},{key:"ngOnInit",value:function(){var e=this;this.dir=this.directionality.value,this.directionality.change.pipe(Object(m.a)(this.destroy$)).subscribe(function(t){e.dir=t,e.setHostClassMap()}),this.setHostClassMap(),this.setHostFlexStyle()}},{key:"ngOnChanges",value:function(e){this.setHostClassMap(),e.nzFlex&&this.setHostFlexStyle()}},{key:"ngAfterViewInit",value:function(){var e=this;this.nzRowDirective&&this.nzRowDirective.actualGutter$.pipe(Object(m.a)(this.destroy$)).subscribe(function(t){var n=Object(o.a)(t,2),i=n[0],r=n[1],a=function(t,n){null!==n&&e.renderer.setStyle(e.elementRef.nativeElement,t,"".concat(n/2,"px"))};a("padding-left",i),a("padding-right",i),a("padding-top",r),a("padding-bottom",r)})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](f.ElementRef),f["\u0275\u0275directiveInject"](v,9),f["\u0275\u0275directiveInject"](f.Renderer2),f["\u0275\u0275directiveInject"](c.c,8))},e.\u0275dir=f["\u0275\u0275defineDirective"]({type:e,selectors:[["","nz-col",""],["nz-col"],["nz-form-control"],["nz-form-label"]],hostVars:2,hostBindings:function(e,t){2&e&&f["\u0275\u0275styleProp"]("flex",t.hostFlexStyle)},inputs:{nzFlex:"nzFlex",nzSpan:"nzSpan",nzOrder:"nzOrder",nzOffset:"nzOffset",nzPush:"nzPush",nzPull:"nzPull",nzXs:"nzXs",nzSm:"nzSm",nzMd:"nzMd",nzLg:"nzLg",nzXl:"nzXl",nzXXl:"nzXXl"},exportAs:["nzCol"],features:[f["\u0275\u0275NgOnChangesFeature"]]}),e}(),C=function(){var e=Object(a.a)(function e(){Object(r.a)(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=f["\u0275\u0275defineInjector"]({imports:[[c.a,g.c,l.a,s.b]]}),e}()},B9Yq:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},BT9m:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL"),o=function(e){return{"border-radius":e}},r=function(){function e(){this.account="000000",this.isAnonymous=!1,this.height=45,this.width=45,this.borderRadius="50%",this.avatarBaseLink="http://w3.huawei.com/w3lab/rest/yellowpage/face/"}return e.prototype.ngOnInit=function(){this.generateUrl()},e.prototype.ngOnChanges=function(e){this.generateUrl()},e.prototype.generateUrl=function(){this.isAnonymous&&(this.account="000000"),this.avatarLink=""+this.avatarBaseLink+this.account,this.avatarLink+=this.width<=45?"/45":"/120"},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["user-avatar"]],inputs:{account:"account",isAnonymous:"isAnonymous",height:"height",width:"width",borderRadius:"borderRadius"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:7,consts:[[1,"user-avatar-photo",3,"src","height","width"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"img",0),2&e&&(i["\u0275\u0275styleMap"](i["\u0275\u0275pureFunction1"](5,o,t.borderRadius)),i["\u0275\u0275property"]("src",t.avatarLink,i["\u0275\u0275sanitizeUrl"])("height",t.height)("width",t.width))},styles:[".user-avatar-photo[_ngcontent-%COMP%]{background-color:#69c;color:#fff;display:inline-block}"]}),e}()},BbD4:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({}),e}()},CuYH:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("z4NU"),o=n("fXoL"),r=function(){function e(){}return e.prototype.transform=function(e,t){switch(t){case"workitem_category":return i.m[e]||i.m.DEFAULT;case"workitem_status":return i.q[e]||i.q.DEFAULT;case"requirement_category":case"bug_category":return i.g[e]||i.g.DEFAULT;case"fuxi_status":return i.e[e]||i.q.DEFAULT;case"workitemBaseInfoColMenuIcon":return i.j[e]||"";case"conference_status":return i.b[e]||i.b.DEFAULT;default:return e}},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o["\u0275\u0275definePipe"]({name:"iconMap",type:e,pure:!0}),e}()},"D/6h":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return a});var i="01001001",o="2147483647",r="1",a={Task:2,Epic:3,Feature:4,Story:5,TaskGroup:6}},Dyep:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("mrSG"),o=n("LrWZ"),r=n("fXoL"),a=function(){function e(){}return e.prototype.transform=function(t,n){return t&&n?e.filter(t,n):t},e.filter=function(e,t){function n(e,t){var r,a,c=t.toLowerCase();try{for(var l=Object(i.j)(Object.keys(e)),s=l.next();!s.done;s=l.next()){var d=s.value;if(!Object(o.a)(e[d])){if("object"==typeof e[d]&&n(e[d],t))return!0;if(-1!==e[d].toString().toLowerCase().indexOf(c))return!0}}}catch(p){r={error:p}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}return!1}return e.filter(function(e){return n(e,t)})},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r["\u0275\u0275definePipe"]({name:"filter",type:e,pure:!0}),e}()},EcwE:function(e,t,n){"use strict";n.d(t,"a",function(){return _t});var i=n("mrSG"),o=n("XNiG"),r=n("LRne"),a=n("itXk"),c=n("l5mm"),l=n("PqYM"),s=n("3E0/"),d=n("Kj3r"),p=n("/uUt"),u=n("1G5W"),m=n("6eBy"),h=n("Muja"),g=n("XIp8"),f=n("8YmR"),v=n("y7eE"),b=n("to4i"),C=n("A/Mn"),y=n("8oxB"),x=n("fXoL"),w=n("tyNb"),_=n("sYmb"),O=n("UJq8"),S=n("bNXi"),E=n("fesf"),M=n("ofXK"),P=n("qAZ0"),I=n("nxWG"),k=n("dEAy"),T=n("Nqz0"),D=n("Q8cG"),A=n("+oEP"),z=n("1JWf"),R=n("oFdG"),L=n("j5vU"),N=n("FwiY"),j=n("PTRe"),V=n("3Pt+"),F=n("5UG9"),B=n("1egt"),U=n("lPmA"),W=n("OTR8"),H=n("THGc"),G=n("zAKX"),q=n("nJia");function $(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"nz-option",19),x["\u0275\u0275element"](1,"i",20),x["\u0275\u0275elementStart"](2,"span"),x["\u0275\u0275text"](3),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;x["\u0275\u0275property"]("nzLabel",n)("nzValue",n),x["\u0275\u0275advance"](1),x["\u0275\u0275classMap"]("Feature"===n?"icon-cup icon-feature-style":"icon-story icon-story-style"),x["\u0275\u0275advance"](2),x["\u0275\u0275textInterpolate"](n)}}function K(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"nz-option",21),x["\u0275\u0275elementStart"](1,"div",22),x["\u0275\u0275elementStart"](2,"span",23),x["\u0275\u0275element"](3,"i",24),x["\u0275\u0275elementStart"](4,"span",25),x["\u0275\u0275text"](5),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](6,"span",26),x["\u0275\u0275elementStart"](7,"span",27),x["\u0275\u0275text"](8),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;x["\u0275\u0275property"]("nzValue",n),x["\u0275\u0275advance"](3),x["\u0275\u0275classMap"]("Feature"===(null==n?null:n.category)?"icon-cup icon-feature-style":"icon-story icon-story-style"),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("title",n.title),x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate"](n.title),x["\u0275\u0275advance"](3),x["\u0275\u0275textInterpolate"]("#"+n.number)}}function X(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"div",22),x["\u0275\u0275elementStart"](1,"span",23),x["\u0275\u0275element"](2,"i",24),x["\u0275\u0275elementStart"](3,"span",25),x["\u0275\u0275text"](4),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](5,"span",26),x["\u0275\u0275elementStart"](6,"span",27),x["\u0275\u0275text"](7),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](2),x["\u0275\u0275classMap"]("Feature"===(null==n.selectValue?null:n.selectValue.category)?"icon-cup icon-feature-style":"icon-story icon-story-style"),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("title",n.selectValue.title),x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate"](n.selectValue.title),x["\u0275\u0275advance"](3),x["\u0275\u0275textInterpolate"]("#"+n.selectValue.number)}}var Y=function(){return{maxWidth:"340px"}};function Q(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"button",28),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().toCopyWiki()}),x["\u0275\u0275elementStart"](1,"span"),x["\u0275\u0275text"](2),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](4,"span",29),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"](),o=x["\u0275\u0275reference"](27);x["\u0275\u0275property"]("disabled",!i.selectedFutureList.length),x["\u0275\u0275advance"](2),x["\u0275\u0275textInterpolate"](x["\u0275\u0275pipeBind1"](3,4,"CONFIRM_IMPORT_DOCUMENT")),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("nzTooltipTitle",o)("nzTooltipOverlayStyle",x["\u0275\u0275pureFunction0"](6,Y))}}function J(e,t){1&e&&(x["\u0275\u0275elementStart"](0,"div"),x["\u0275\u0275text"](1),x["\u0275\u0275pipe"](2,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](3,"div"),x["\u0275\u0275text"](4),x["\u0275\u0275pipe"](5,"translate"),x["\u0275\u0275elementEnd"]()),2&e&&(x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate"](x["\u0275\u0275pipeBind1"](2,2,"IMPORT_DOCUMENT_TIP1")),x["\u0275\u0275advance"](3),x["\u0275\u0275textInterpolate"](x["\u0275\u0275pipeBind1"](5,4,"IMPORT_DOCUMENT_TIP2")))}var Z=function(){function e(e,t,n){this.knowledgeService=e,this.translate=t,this.notificationService=n,this.selectedFutureList=[],this.workitemList=[],this.isLoading=!1,this.showCopyWiki=!1,this.modelShowCloseChange=new x.EventEmitter,this.searchFilter=function(e,t){var n,i,o,r;return(null===(i=null===(n=null==t?void 0:t.nzValue)||void 0===n?void 0:n.title)||void 0===i?void 0:i.includes(e))||(null===(r=null===(o=null==t?void 0:t.nzValue)||void 0===o?void 0:o.number)||void 0===r?void 0:r.includes(e))}}return e.prototype.closeModal=function(){this.modelShowCloseChange.emit()},e.prototype.ngOnInit=function(){var e;this.designValue=null===(e=this.designTypeList)||void 0===e?void 0:e[0],this.getWorkitemList()},e.prototype.getWorkitemList=function(){var e,t=this;this.isLoading=!0,this.workitemList=[];var n={domain_id:this.currentDomain,classify:null===(e=this.designValue)||void 0===e?void 0:e.toLocaleLowerCase(),wikiSn:this.wikiSn||""};"PRD"===this.category.classify&&(n.category="PRD"),this.knowledgeService.getSpaceWorkitemList(n).subscribe(function(e){t.workitemList=e,t.isLoading=!1},function(){t.isLoading=!1})},e.prototype.createPush=function(){this.modelShowCloseChange.emit({selectedFutureList:this.selectedFutureList})},e.prototype.showSelectValue=function(){this.selectedFutureList=[],this.selectedFutureList.push(this.selectValue)},e.prototype.toCopyWiki=function(){this.modelShowCloseChange.emit({selectedFutureList:this.selectedFutureList,isCopyWiki:!0})},e.\u0275fac=function(t){return new(t||e)(x["\u0275\u0275directiveInject"](C.b),x["\u0275\u0275directiveInject"](_.c),x["\u0275\u0275directiveInject"](S.b))},e.\u0275cmp=x["\u0275\u0275defineComponent"]({type:e,selectors:[["create-workitem-article"]],inputs:{showCopyWiki:"showCopyWiki",currentDomain:"currentDomain",designTypeList:"designTypeList",wikiSn:"wikiSn",category:"category"},outputs:{modelShowCloseChange:"modelShowCloseChange"},decls:28,vars:34,consts:[["nzWrapClassName","share-content-modal",3,"nzVisible","nzClosable","nzFooter","nzWidth"],[1,"share-content"],[1,"share-content-header"],[1,"f-18",3,"textContent"],[1,"iconfont","icon-close","cursor-pointer","position-a","user-tip-close",3,"click"],[1,"share-content-body"],[1,"create-type"],[1,"title-style",3,"textContent"],[3,"ngModel","ngModelChange"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"send-user"],["nzShowSearch","",3,"ngModel","nzAllowClear","nzDisabled","nzCustomTemplate","nzFilterOption","nzLoading","nzPlaceHolder","nzOptionOverflowSize","ngModelChange","nzDisabledChange","nzLoadingChange"],["nzCustomContent","",3,"nzValue",4,"ngFor","ngForOf"],["defaultTemplate",""],[1,"share-content-footer"],["type","button",1,"f-14","confirm-btn-styl","cancel-btn-color","m-r-10",3,"textContent","click"],["type","button","class","f-14 confirm-btn-styl cancel-btn-color m-r-10",3,"disabled","click",4,"ngIf"],["type","button",1,"f-14","confirm-btn-styl",3,"disabled","textContent","click"],["copyWikiTip",""],["nzCustomContent","",3,"nzLabel","nzValue"],[1,"iconfont","icon-cup","m-r-5","icon-feature-style"],["nzCustomContent","",3,"nzValue"],[1,"flex-box"],[1,"img-wrapper-styl","flex-item-left"],[1,"iconfont","icon-cup","m-r-5"],[3,"title"],[1,"flex-item-right"],[1,"m-r-5"],["type","button",1,"f-14","confirm-btn-styl","cancel-btn-color","m-r-10",3,"disabled","click"],["nz-tooltip","",1,"cur-pointer","iconfont","icon-doubt","m-l-10",3,"nzTooltipTitle","nzTooltipOverlayStyle"]],template:function(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"nz-modal",0),x["\u0275\u0275elementStart"](1,"div",1),x["\u0275\u0275elementStart"](2,"div",2),x["\u0275\u0275element"](3,"span",3),x["\u0275\u0275pipe"](4,"translate"),x["\u0275\u0275elementStart"](5,"i",4),x["\u0275\u0275listener"]("click",function(){return t.closeModal()}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](6,"div",5),x["\u0275\u0275elementStart"](7,"div",6),x["\u0275\u0275element"](8,"div",7),x["\u0275\u0275pipe"](9,"translate"),x["\u0275\u0275elementStart"](10,"nz-select",8),x["\u0275\u0275listener"]("ngModelChange",function(e){return t.designValue=e})("ngModelChange",function(){return t.getWorkitemList()}),x["\u0275\u0275template"](11,$,4,5,"nz-option",9),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](12,"div",10),x["\u0275\u0275element"](13,"div",7),x["\u0275\u0275pipe"](14,"translate"),x["\u0275\u0275elementStart"](15,"nz-select",11),x["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectValue=e})("nzDisabledChange",function(e){return t.isLoading=e})("ngModelChange",function(){return t.showSelectValue()})("nzLoadingChange",function(e){return t.isLoading=e}),x["\u0275\u0275pipe"](16,"translate"),x["\u0275\u0275template"](17,K,9,6,"nz-option",12),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](18,X,8,5,"ng-template",null,13,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](20,"div",14),x["\u0275\u0275elementStart"](21,"button",15),x["\u0275\u0275listener"]("click",function(){return t.closeModal()}),x["\u0275\u0275pipe"](22,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](23,Q,5,7,"button",16),x["\u0275\u0275elementStart"](24,"button",17),x["\u0275\u0275listener"]("click",function(){return t.createPush()}),x["\u0275\u0275pipe"](25,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](26,J,6,6,"ng-template",null,18,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275reference"](19);x["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",552),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](4,22,"SELECT_EXISTING_FETURES")),x["\u0275\u0275advance"](5),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](9,24,"CREAT_FETURE_DESIGN_TYPE")),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngModel",t.designValue),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngForOf",t.designTypeList),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](14,26,"LINK_FEATURE_SET_TO")),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngModel",t.selectValue)("nzAllowClear",!0)("nzDisabled",t.isLoading)("nzCustomTemplate",n)("nzFilterOption",t.searchFilter)("nzLoading",t.isLoading)("nzPlaceHolder",x["\u0275\u0275pipeBind1"](16,28,"SELECT_FETURE_SEARCH_PLACEHOLDER"))("nzOptionOverflowSize",10),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngForOf",t.workitemList),x["\u0275\u0275advance"](4),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](22,30,"COMMON_BUTTON_CANCLE")),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",t.showCopyWiki),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("disabled",!t.selectedFutureList.length)("textContent",x["\u0275\u0275pipeBind1"](25,32,"COMMON_BUTTON_CONFIRM"))}},directives:[k.a,G.e,V.k,V.l,M.m,M.n,G.a,q.d],pipes:[_.b],styles:[".share-content-modal .ant-modal-body{padding:0}  .share-content-modal .ant-select-item-empty{width:504px!important}.share-content[_ngcontent-%COMP%]{position:relative;background-color:#fff;background-clip:padding-box;border:0;border-radius:4px;box-shadow:0 4px 12px rgba(0,0,0,.15);pointer-events:auto;min-height:400px;width:552px}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]{padding:16px 24px;color:rgba(0,0,0,.65);background:#fff;border-bottom:1px solid #e5e5e5;border-radius:4px 4px 0 0;position:relative}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]{padding:24px 24px 0;font-size:14px;line-height:1.5;word-wrap:break-word}.share-content[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}.flex-item-left[_ngcontent-%COMP%]{flex:3;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.flex-item-right[_ngcontent-%COMP%]{display:inline-block;flex:1}.user-tip-close[_ngcontent-%COMP%]{font-size:30px;right:20px;top:5px;line-height:1.5}.create-type[_ngcontent-%COMP%]{margin-bottom:20px}.icon-feature-style[_ngcontent-%COMP%]{color:#8d71c6}.icon-story-style[_ngcontent-%COMP%]{color:#23c6c8}.title-style[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:5px 0}.share-content-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;padding:0 24px 20px;text-align:right}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]{height:28px;padding:1px 12px;border-radius:4px;outline:none;border:1px solid #23c6c8;background:#fff;color:#23c6c8}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.share-content-footer[_ngcontent-%COMP%]   .cancel-btn-color[_ngcontent-%COMP%]{border:1px solid #dbdbdb;color:#5f5f5f}"]}),e}(),ee=n("TgVB"),te=n("ebHz"),ne=["nzTreeComponent"],ie=["currentCategoryElement"],oe=["titleOperate"],re=["renameInput"];function ae(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"button",56),x["\u0275\u0275elementStart"](1,"i",57),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().getOperateRoot})("nzVisibleChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().setOperateNull(e,"rootDirectory")}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){x["\u0275\u0275nextContext"]();var i=x["\u0275\u0275reference"](61);x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("nzDropdownMenu",i)}}var ce=function(e){return{user:e}},le=function(){return["system","PRD"]};function se(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",58),x["\u0275\u0275listener"]("clickOutside",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().showHistory=!1}),x["\u0275\u0275elementStart"](1,"span",59),x["\u0275\u0275element"](2,"wiki-search-input",60),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](3,"div",61),x["\u0275\u0275listener"]("nzVisibleChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().tablePopoverShow.menu4=e}),x["\u0275\u0275pipe"](4,"translate"),x["\u0275\u0275element"](5,"i",62),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"](),o=x["\u0275\u0275reference"](73);x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("customStyle",i.customStyle)("kanbanId",null==i.currentCategory?null:i.currentCategory.id)("pageForm","category"),x["\u0275\u0275advance"](1),x["\u0275\u0275classMap"](i.authAccess&&(i.authAccess.userEditPermission||i.authAccess.templateAccess)&&i.createArticleAccess?"pointer-cursor":"not-allowed-class"),x["\u0275\u0275property"]("nzDropdownMenu",o)("nzVisible",i.tablePopoverShow.menu4)("nzDisabled",!(i.authAccess&&(i.authAccess.userEditPermission||i.authAccess.templateAccess)&&i.createArticleAccess))("nzPopoverContent",i.createArticleAccess?"":x["\u0275\u0275pipeBind2"](4,11,"WORKITEM_ARTICLE_ACCESS_TIP",x["\u0275\u0275pureFunction1"](14,ce,i.employeeUser)))("nzPopoverPlacement","right")("redCircleVisible",!x["\u0275\u0275pureFunction0"](16,le).includes(null==i.currentCategory?null:i.currentCategory.classify)&&i.isShowTable)}}function de(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",63),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().toHomePage()}),x["\u0275\u0275element"](1,"i",64),x["\u0275\u0275elementStart"](2,"div",65),x["\u0275\u0275elementStart"](3,"span",66),x["\u0275\u0275text"](4),x["\u0275\u0275pipe"](5,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](6,"span",67),x["\u0275\u0275text"](7),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](8,"i",68),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"](),o=x["\u0275\u0275reference"](81);x["\u0275\u0275property"]("nzPopoverContent",o)("nzPopoverPlacement","rightTop"),x["\u0275\u0275advance"](4),x["\u0275\u0275textInterpolate"](x["\u0275\u0275pipeBind1"](5,5,"CATALOG_HOME")),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("title",null==i.currentDomainInfo?null:i.currentDomainInfo.domainTitle),x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate1"]("(",null==i.currentDomainInfo?null:i.currentDomainInfo.domainTitle,")")}}function pe(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",69),x["\u0275\u0275element"](1,"i",70),x["\u0275\u0275elementStart"](2,"div",71),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().showMoreFvorite()}),x["\u0275\u0275elementStart"](3,"span",66),x["\u0275\u0275text"](4),x["\u0275\u0275pipe"](5,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](6,"i",68),x["\u0275\u0275elementEnd"]()}if(2&e){x["\u0275\u0275nextContext"]();var i=x["\u0275\u0275reference"](83);x["\u0275\u0275property"]("nzPopoverContent",i)("nzPopoverPlacement","rightTop"),x["\u0275\u0275advance"](4),x["\u0275\u0275textInterpolate"](x["\u0275\u0275pipeBind1"](5,3,"STARRED"))}}function ue(e,t){1&e&&x["\u0275\u0275element"](0,"i",72)}function me(e,t){1&e&&(x["\u0275\u0275elementStart"](0,"div",73),x["\u0275\u0275element"](1,"span",32),x["\u0275\u0275pipe"](2,"translate"),x["\u0275\u0275elementEnd"]()),2&e&&(x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](2,1,"NO_CONTENT_PROMPT")))}function he(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",74),x["\u0275\u0275elementStart"](1,"span",75),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().goCategoryPage()}),x["\u0275\u0275element"](2,"i",76),x["\u0275\u0275elementStart"](3,"span",77),x["\u0275\u0275text"](4),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](5,"span",78),x["\u0275\u0275elementStart"](6,"i",79),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().getOperateRoot})("nzVisibleChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().setOperateNull(e,"rootDirectory")})("nzVisibleChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().tablePopoverShow.menu3=e}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"](),o=x["\u0275\u0275reference"](61);x["\u0275\u0275advance"](4),x["\u0275\u0275textInterpolate"](i.currentCategory.title),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("nzDropdownMenu",o)("nzVisible",i.tablePopoverShow.menu3)("redCircleVisible",!x["\u0275\u0275pureFunction0"](4,le).includes(null==i.currentCategory?null:i.currentCategory.classify)&&i.isShowTable)}}function ge(e,t){1&e&&(x["\u0275\u0275elementStart"](0,"div",80),x["\u0275\u0275element"](1,"span",32),x["\u0275\u0275pipe"](2,"translate"),x["\u0275\u0275elementEnd"]()),2&e&&(x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](2,1,"EMPTY_TIP")))}var fe=function(e){return{color:e}},ve=function(e){return["iconfont",e]};function be(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"div",82),x["\u0275\u0275element"](1,"span"),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"]().$implicit;x["\u0275\u0275advance"](1),x["\u0275\u0275styleMap"](x["\u0275\u0275pureFunction1"](4,fe,n.isExpanded?"#5E7CE0":"#575D6C")),x["\u0275\u0275classMap"](x["\u0275\u0275pureFunction1"](6,ve,n.isExpanded?"icon-square-minus":"icon-square-plus"))}}function Ce(e,t){1&e&&x["\u0275\u0275template"](0,be,2,8,"div",81),2&e&&x["\u0275\u0275property"]("ngIf",!0)}var ye=function(){return{width:"calc(100% - 48px)"}};function xe(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"input",85,86),x["\u0275\u0275listener"]("blur",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"](2).saveFloderName()})("keydown.enter",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"](2).saveFloderName()})("keydown.esc",function(){x["\u0275\u0275restoreView"](n);var e=x["\u0275\u0275nextContext"]().$implicit;return x["\u0275\u0275nextContext"]().cancleNodeRename(e)})("ngModelChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"](2).nodeRenameTitle=e}),x["\u0275\u0275pipe"](2,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"](2);x["\u0275\u0275property"]("ngStyle",x["\u0275\u0275pureFunction0"](5,ye))("placeholder",x["\u0275\u0275pipeBind1"](2,3,"INPUT_PLACEHOLDER"))("ngModel",i.nodeRenameTitle)}}function we(e,t){if(1&e&&x["\u0275\u0275element"](0,"i",98),2&e){var n=x["\u0275\u0275nextContext"](3).$implicit,i=x["\u0275\u0275nextContext"]();x["\u0275\u0275classMap"](null!=n&&null!=n.key&&n.key.includes("PAGE")||null!=n&&null!=n.key&&n.key.includes("trustedDesign")?"icon-page-mark":"icon-article"),x["\u0275\u0275classProp"]("search-active-styl",""!=i.searchVal.trim()&&n.origin.is_search)("active-icon-styl-color",(null==i.activedNode?null:i.activedNode.key)&&(null==i.activedNode?null:i.activedNode.key)==n.origin.sn&&i.catalogClick)}}function _e(e,t){1&e&&(x["\u0275\u0275element"](0,"i",99),x["\u0275\u0275pipe"](1,"translate")),2&e&&x["\u0275\u0275property"]("title",x["\u0275\u0275pipeBind1"](1,1,"RELEASE_BEING_REVIEWED"))}function Oe(e,t){1&e&&x["\u0275\u0275element"](0,"i",100)}function Se(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"span",101),x["\u0275\u0275elementStart"](1,"i",102),x["\u0275\u0275listener"]("click",function(e){x["\u0275\u0275restoreView"](n);var t=x["\u0275\u0275nextContext"](3).$implicit;return x["\u0275\u0275nextContext"]().getOperateNode(t,e)})("nzVisibleChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"](4).setOperateNull(e)}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](2,"i",103),x["\u0275\u0275listener"]("click",function(e){x["\u0275\u0275restoreView"](n);var t=x["\u0275\u0275nextContext"](3).$implicit;return x["\u0275\u0275nextContext"]().getOperateNode(t,e)})("nzVisibleChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"](4).setOperateNull(e)}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"](3).$implicit,o=x["\u0275\u0275nextContext"](),r=x["\u0275\u0275reference"](46),a=x["\u0275\u0275reference"](32);x["\u0275\u0275advance"](1),x["\u0275\u0275classProp"]("search-active-styl",""!=o.searchVal.trim()&&i.origin.is_search)("active-icon-styl-color",(null==o.activedNode?null:o.activedNode.key)&&(null==o.activedNode?null:o.activedNode.key)==i.origin.sn&&o.catalogClick),x["\u0275\u0275property"]("nzDropdownMenu",r),x["\u0275\u0275advance"](1),x["\u0275\u0275classProp"]("search-active-styl",""!=o.searchVal.trim()&&i.origin.is_search)("active-icon-styl-color",(null==o.activedNode?null:o.activedNode.key)&&(null==o.activedNode?null:o.activedNode.key)==i.origin.sn&&o.catalogClick),x["\u0275\u0275property"]("nzDropdownMenu",a)}}var Ee=function(){return[1,4]};function Me(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"span",91),x["\u0275\u0275elementStart"](1,"span",92),x["\u0275\u0275template"](2,we,1,6,"i",93),x["\u0275\u0275elementStart"](3,"span",94),x["\u0275\u0275text"](4),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](5,_e,2,3,"i",95),x["\u0275\u0275template"](6,Oe,1,0,"i",96),x["\u0275\u0275template"](7,Se,3,10,"span",97),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"](2).$implicit,i=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](1),x["\u0275\u0275classMap"](1!=n.origin.visibility&&4!=n.origin.visibility||0===n.origin.publish_status&&x["\u0275\u0275pureFunction0"](11,Ee).includes(n.origin.visibility)?"hidden-text-styl-with-lock":""),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!i.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275classProp"]("search-active-styl",""!=i.searchVal.trim()&&n.origin.is_search)("m-l-0",i.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate"](n.title),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",0===n.origin.publish_status&&x["\u0275\u0275pureFunction0"](12,Ee).includes(n.origin.visibility)),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",1!=n.origin.visibility&&4!=n.origin.visibility),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!(n.origin.disableOperate||null!=n.origin&&n.origin.theme_page||(null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)!=i.currentDomain))}}function Pe(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"span"),x["\u0275\u0275element"](1,"i",104),x["\u0275\u0275elementStart"](2,"span",105),x["\u0275\u0275text"](3),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"](2).$implicit;x["\u0275\u0275advance"](1),x["\u0275\u0275classMap"](n.isExpanded?"icon-font-size12 iconfont icon-files-open":" iconfont icon-files-close1"),x["\u0275\u0275advance"](2),x["\u0275\u0275textInterpolate"](n.title)}}function Ie(e,t){if(1&e&&x["\u0275\u0275element"](0,"i",98),2&e){var n=x["\u0275\u0275nextContext"](3).$implicit,i=x["\u0275\u0275nextContext"]();x["\u0275\u0275classProp"]("search-active-styl",""!=i.searchVal.trim()&&n.origin.is_search)("active-icon-styl-color",(null==i.activedNode?null:i.activedNode.key)&&(null==i.activedNode?null:i.activedNode.key)==n.origin.sn&&i.catalogClick)("icon-article",null==n||null==n.key?null:n.key.includes("WIKI"))("icon-table",null==n||null==n.key?null:n.key.includes("TABLE"))("icon-page-mark",n.key.includes("PAGE"))}}function ke(e,t){1&e&&(x["\u0275\u0275element"](0,"i",99),x["\u0275\u0275pipe"](1,"translate")),2&e&&x["\u0275\u0275property"]("title",x["\u0275\u0275pipeBind1"](1,1,"RELEASE_BEING_REVIEWED"))}function Te(e,t){1&e&&x["\u0275\u0275element"](0,"i",100)}function De(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"span",111),x["\u0275\u0275elementStart"](1,"i",112),x["\u0275\u0275listener"]("click",function(e){x["\u0275\u0275restoreView"](n);var t=x["\u0275\u0275nextContext"](3).$implicit;return x["\u0275\u0275nextContext"]().getOperateNode(t,e)})("nzVisibleChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"](4).setOperateNull(e,"document")}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"](3).$implicit,o=x["\u0275\u0275nextContext"](),r=x["\u0275\u0275reference"](46);x["\u0275\u0275advance"](1),x["\u0275\u0275classProp"]("search-active-styl",""!=o.searchVal.trim()&&i.origin.is_search)("active-icon-styl-color",(null==o.activedNode?null:o.activedNode.key)&&(null==o.activedNode?null:o.activedNode.key)==i.origin.sn&&o.catalogClick),x["\u0275\u0275property"]("nzDropdownMenu",r)}}function Ae(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"span",106),x["\u0275\u0275elementStart"](1,"span",107),x["\u0275\u0275template"](2,Ie,1,10,"i",108),x["\u0275\u0275elementStart"](3,"span",109),x["\u0275\u0275text"](4),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](5,ke,2,3,"i",95),x["\u0275\u0275template"](6,Te,1,0,"i",96),x["\u0275\u0275template"](7,De,2,5,"span",110),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"](2).$implicit,i=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](1),x["\u0275\u0275classMap"](1!=n.origin.visibility&&4!=n.origin.visibility||0===n.origin.publish_status&&x["\u0275\u0275pureFunction0"](11,Ee).includes(n.origin.visibility)?"hidden-text-styl-with-lock":""),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!i.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275classProp"]("search-active-styl",""!=i.searchVal.trim()&&n.origin.is_search)("m-l-0",i.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate"](n.title),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",0===n.origin.publish_status&&x["\u0275\u0275pureFunction0"](12,Ee).includes(n.origin.visibility)),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",1!=n.origin.visibility&&4!=n.origin.visibility),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!n.origin.disableOperate&&(null==n.origin.assigned_domain?null:n.origin.assigned_domain.id)==i.currentDomain)}}var ze=function(){return{width:"calc(100% - 5px)"}};function Re(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"span",87),x["\u0275\u0275elementStart"](1,"span",88),x["\u0275\u0275template"](2,Me,8,13,"span",89),x["\u0275\u0275template"](3,Pe,4,3,"span",26),x["\u0275\u0275template"](4,Ae,8,13,"span",90),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"]().$implicit,i=x["\u0275\u0275nextContext"]();x["\u0275\u0275classProp"]("operate-span-styl",i.operateActive&&i.operateActive.origin&&i.operateActive.origin.sn==n.origin.sn&&(null==i.activedNode?null:i.activedNode.key)!=i.operateActive.origin.sn)("active-span-styl",(null==i.activedNode?null:i.activedNode.key)&&(null==i.activedNode?null:i.activedNode.key)==n.origin.sn&&i.catalogClick)("cursor-pointer-styl","rootDirectory"!=n.origin.category)("draggable",!0),x["\u0275\u0275property"]("title",n.title),x["\u0275\u0275attribute"]("id",n.origin.showId?n.origin.showId:null)("draggable",!0)("aria-grabbed",!0),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngStyle",x["\u0275\u0275pureFunction0"](16,ze)),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf","directory"==n.origin.category),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf","coeDirectory"===n.origin.category),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf","document"==n.origin.category||"table"==n.origin.category)}}function Le(e,t){if(1&e&&(x["\u0275\u0275template"](0,xe,3,6,"input",83),x["\u0275\u0275template"](1,Re,5,17,"span",84)),2&e){var n=t.$implicit;x["\u0275\u0275property"]("ngIf",null==n||null==n.origin?null:n.origin.renaming),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!(null!=n&&null!=n.origin&&n.origin.renaming))}}var Ne=function(e){return{id:e,classify:"system"}};function je(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",113),x["\u0275\u0275elementStart"](1,"select-category-directory",114),x["\u0275\u0275listener"]("modelShowCloseChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().getModelShowCtrl(e)})("modelShowVariableChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().getConfirmFunc(e)}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("currentDomain",i.currentDomain)("currentCategory",i.isCopyWiki||"system"!==i.currentCategory.classify?null:x["\u0275\u0275pureFunction1"](5,Ne,i.currentCategory.id))("disabledNode",i.isCopyWiki?"":i.operateNode)("tipInfo",i.tipInfo)("importDocument",i.isCopyWiki?i.importDocument:null)}}function Ve(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"nz-modal",115),x["\u0275\u0275elementStart"](1,"div",116),x["\u0275\u0275elementStart"](2,"div",117),x["\u0275\u0275element"](3,"i",118),x["\u0275\u0275elementStart"](4,"span",119),x["\u0275\u0275text"](5),x["\u0275\u0275pipe"](6,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](7,"div",120),x["\u0275\u0275pipe"](8,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](9,"div",121),x["\u0275\u0275elementStart"](10,"div",122),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().removeModalCtrl=!1}),x["\u0275\u0275pipe"](11,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](12,"div",123),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().dangerConfirmFunc()}),x["\u0275\u0275pipe"](13,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",416),x["\u0275\u0275advance"](5),x["\u0275\u0275textInterpolate2"]("",x["\u0275\u0275pipeBind1"](6,9,"DELETE_WIKI_TIP"),"",i.deleteTitle,""),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](8,11,"DELETE_ARTICLE_TIPS")),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](11,13,"COMMON_BUTTON_CANCLE")),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](13,15,"COMMON_BUTTON_CONFIRM"))}}function Fe(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"import-word-drag",124),x["\u0275\u0275listener"]("closeCallback",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().closeImportWord(e)}),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275property"]("isFeWordImport",i.isFeWordImport)("sn",i.operateNode.origin.sn)("parentNode",i.parentNode)("kanBanId",i.currentCategory.id)("currentDomain",i.currentDomain)}}function Be(e,t){1&e&&(x["\u0275\u0275elementStart"](0,"div",136),x["\u0275\u0275element"](1,"span",32),x["\u0275\u0275pipe"](2,"translate"),x["\u0275\u0275elementEnd"]()),2&e&&(x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](2,1,"EMPTY_TIP")))}function Ue(e,t){if(1&e&&x["\u0275\u0275element"](0,"i",139),2&e){var n=x["\u0275\u0275nextContext"](3).$implicit,i=x["\u0275\u0275nextContext"](2);x["\u0275\u0275classProp"]("search-active-styl",""!=i.searchVal.trim()&&n.origin.is_search)("active-icon-styl-color",i.rubbishClick&&n.origin.isClickActived)}}function We(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"span",106),x["\u0275\u0275elementStart"](1,"span",107),x["\u0275\u0275template"](2,Ue,1,4,"i",138),x["\u0275\u0275elementStart"](3,"span",109),x["\u0275\u0275text"](4),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"](2).$implicit,i=x["\u0275\u0275nextContext"](2);x["\u0275\u0275advance"](1),x["\u0275\u0275classMap"](1!=n.origin.visibility?"hidden-text-styl-with-lock":""),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!i.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275classProp"]("search-active-styl",""!=i.searchVal.trim()&&n.origin.is_search)("m-l-0",i.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate"](n.title)}}var He,Ge=function(){return{width:"calc(100% - 15px)",left:"-5px"}};function qe(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"span",87),x["\u0275\u0275elementStart"](1,"span",88),x["\u0275\u0275template"](2,We,5,8,"span",90),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"]().$implicit,i=x["\u0275\u0275nextContext"](2);x["\u0275\u0275classProp"]("active-span-styl",i.rubbishClick&&n.origin.isClickActived)("cursor-pointer-styl",!0),x["\u0275\u0275property"]("title",n.title),x["\u0275\u0275attribute"]("id",n.origin.showId?n.origin.showId:null),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngStyle",x["\u0275\u0275pureFunction0"](8,Ge)),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf","document"==n.origin.category||"table"==n.origin.category)}}function $e(e,t){if(1&e&&x["\u0275\u0275template"](0,qe,3,9,"span",137),2&e){var n=x["\u0275\u0275nextContext"](2);x["\u0275\u0275property"]("ngIf",n.rubbishDetailShow)}}function Ke(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",125),x["\u0275\u0275elementStart"](1,"div",126),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().rubbishRecycleHandler()}),x["\u0275\u0275element"](2,"i",127),x["\u0275\u0275element"](3,"span",128),x["\u0275\u0275pipe"](4,"translate"),x["\u0275\u0275elementStart"](5,"span",129),x["\u0275\u0275element"](6,"i",130),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](7,Be,3,3,"div",131),x["\u0275\u0275elementStart"](8,"div",132),x["\u0275\u0275elementStart"](9,"nz-tree",133,17),x["\u0275\u0275listener"]("nzClick",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().sendSn(null==e?null:e.node.origin,"rubbish")}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](11,$e,1,1,"ng-template",null,134,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](13,"div",135),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275reference"](12),o=x["\u0275\u0275nextContext"]();x["\u0275\u0275classMap"](o.rubbishDetailShow?"border-top":""),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](4,10,"BIN")),x["\u0275\u0275advance"](2),x["\u0275\u0275classMap"](o.rubbishDetailShow?"chevron-down":""),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",o.rubbishDetailShow&&o.showEmptyTip),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("hidden",!o.rubbishDetailShow)("nzData",o.rubbishArr)("nzExpandedKeys",o.defaultRubbishExpandedKeys)("nzTreeTemplate",i)}}function Xe(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementContainerStart"](0),x["\u0275\u0275elementStart"](1,"favorite-view",140),x["\u0275\u0275listener"]("closeFavoriteModel",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().closeFavoriteModel(e)}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementContainerEnd"]()}2&e&&(x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("model","full"))}function Ye(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",141),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().toggleCatalogShowCtrl()}),x["\u0275\u0275element"](1,"i",142),x["\u0275\u0275elementEnd"]()}}function Qe(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",143),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().importWord()}),x["\u0275\u0275element"](1,"i",144),x["\u0275\u0275element"](2,"span",32),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275classMap"](i.authAccess&&i.authAccess.userEditPermission?"dropdown-override-li-styl":"not-allowed-styl"),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](3,3,"IMPORT_WORD"))}}function Je(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",30),x["\u0275\u0275listener"]("click",function(e){x["\u0275\u0275restoreView"](n);var t=x["\u0275\u0275nextContext"]();return"system"===(null==t.currentCategory?null:t.currentCategory.classify)?t.quickCreateArticle(e,!0):t.createArticle()}),x["\u0275\u0275pipe"](1,"translate"),x["\u0275\u0275element"](2,"i",31),x["\u0275\u0275element"](3,"span",32),x["\u0275\u0275pipe"](4,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275classMap"](i.authAccess&&i.authAccess.userEditPermission&&i.createArticleAccess?"dropdown-override-li-styl":"not-allowed-styl"),x["\u0275\u0275property"]("nzPopoverContent",i.createArticleAccess?"":x["\u0275\u0275pipeBind2"](1,5,"WORKITEM_ARTICLE_ACCESS_TIP",x["\u0275\u0275pureFunction1"](10,ce,i.employeeUser)))("nzPopoverPlacement","right"),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](4,8,"NEW_ARTICLE"))}}function Ze(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",143),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"](2).createFloder()}),x["\u0275\u0275element"](1,"i",145),x["\u0275\u0275element"](2,"span",32),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"](2);x["\u0275\u0275classMap"](i.authAccess&&i.authAccess.userEditPermission?"dropdown-create-li-styl":"not-allowed-sty2"),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](3,3,"NEW_GROUP"))}}function et(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"div"),x["\u0275\u0275template"](1,Ze,4,5,"li",34),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!n.isDesignDoc)}}function tt(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",147),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"](2).createFloder()})("nzPopoverVisibleChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"](2).popoverGuideVisible.isElidePopVisible=e}),x["\u0275\u0275element"](1,"i",145),x["\u0275\u0275element"](2,"span",32),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"](2),o=x["\u0275\u0275reference"](90);x["\u0275\u0275classMap"](i.authAccess&&i.authAccess.userEditPermission?"dropdown-create-li-styl":"not-allowed-sty2"),x["\u0275\u0275property"]("nzSelected",i.needGuide.articlesGroup)("nzPopoverVisible",i.popoverGuideVisible.isElidePopVisible)("nzPopoverContent",o)("nzPopoverPlacement","right"),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](3,7,"NEW_GROUP"))}}function nt(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"div"),x["\u0275\u0275template"](1,tt,4,9,"li",146),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!n.isDesignDoc)}}function it(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",30),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().createExcel()}),x["\u0275\u0275pipe"](1,"translate"),x["\u0275\u0275element"](2,"i",148),x["\u0275\u0275element"](3,"span",32),x["\u0275\u0275pipe"](4,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275classMap"](i.authAccess&&i.authAccess.userEditPermission&&i.createArticleAccess?"dropdown-override-li-styl":"not-allowed-styl"),x["\u0275\u0275property"]("nzPopoverContent",i.createArticleAccess?"":x["\u0275\u0275pipeBind2"](1,5,"WORKITEM_ARTICLE_ACCESS_TIP",x["\u0275\u0275pureFunction1"](10,ce,i.employeeUser)))("nzPopoverPlacement","right"),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](4,8,"NEW_TABLE"))}}function ot(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",143),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().moveFunc()}),x["\u0275\u0275element"](1,"i",149),x["\u0275\u0275element"](2,"span",32),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275classMap"](i.operateNode&&i.operateNode.origin&&i.operateNode.origin.is_updated&&"CIM"!==i.operateNode.origin.source_system?"dropdown-override-li-styl":"not-allowed-styl"),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](3,3,"MOVE"))}}function rt(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",143),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().accessControlShowFunc()}),x["\u0275\u0275element"](1,"i",150),x["\u0275\u0275element"](2,"span",32),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"]()}2&e&&(x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](3,1,"VISIBILITY_CONFIG")))}function at(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",143),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().renameDirectory()}),x["\u0275\u0275element"](1,"i",151),x["\u0275\u0275element"](2,"span",32),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"]()}2&e&&(x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](3,1,"DOMAIN_SELECTOR_RENAME_GROUP")))}function ct(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",143),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().importWord()}),x["\u0275\u0275element"](1,"i",144),x["\u0275\u0275element"](2,"span",32),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275classMap"](i.authAccess&&i.authAccess.userEditPermission?"dropdown-override-li-styl":"not-allowed-styl"),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](3,3,"IMPORT_WORD"))}}function lt(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",41),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().titleCreateFloder()}),x["\u0275\u0275pipe"](1,"translate"),x["\u0275\u0275element"](2,"i",31),x["\u0275\u0275element"](3,"span",32),x["\u0275\u0275pipe"](4,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275classProp"]("not-allowed-styl",!(i.authAccess&&i.authAccess.userEditPermission&&i.createArticleAccess)),x["\u0275\u0275property"]("nzPopoverContent",i.createArticleAccess?"":x["\u0275\u0275pipeBind2"](1,5,"WORKITEM_ARTICLE_ACCESS_TIP",x["\u0275\u0275pureFunction1"](10,ce,i.employeeUser)))("nzPopoverPlacement","right"),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](4,8,"NEW_GROUP"))}}function st(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",152),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().titleCreateExcel()}),x["\u0275\u0275element"](1,"i",148),x["\u0275\u0275element"](2,"span",32),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275classProp"]("not-allowed-styl",!(i.authAccess&&i.authAccess.userEditPermission&&i.createArticleAccess)),x["\u0275\u0275property"]("magazineVisible",i.tablePopoverShow.menu3&&!x["\u0275\u0275pureFunction0"](7,le).includes(null==i.currentCategory?null:i.currentCategory.classify)&&i.isShowTable)("nzPopoverPlacement","right"),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](3,5,"NEW_TABLE"))}}function dt(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",153),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().titleCreateFloder()}),x["\u0275\u0275element"](1,"i",31),x["\u0275\u0275element"](2,"span",32),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"](),o=x["\u0275\u0275reference"](90);x["\u0275\u0275classProp"]("not-allowed-styl",!(i.authAccess&&i.authAccess.userEditPermission&&i.createArticleAccess)),x["\u0275\u0275property"]("nzSelected",i.needGuide.articlesGroup)("nzPopoverVisible",i.popoverGuideVisible.isPlusPopoVisible&&("system"===(null==i.currentCategory?null:i.currentCategory.classify)||!i.tableGuideVisible()||!i.isShowTable))("nzPopoverContent",o)("nzPopoverPlacement","right"),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](3,7,"NEW_GROUP"))}}function pt(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",47),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().importWord("root")}),x["\u0275\u0275element"](1,"i",144),x["\u0275\u0275element"](2,"span",32),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275classProp"]("not-allowed-styl",!(i.authAccess&&i.authAccess.userEditPermission)),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](3,3,"IMPORT_WORD"))}}function ut(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"li",154),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().titleCreateExcel(null)}),x["\u0275\u0275element"](1,"i",148),x["\u0275\u0275element"](2,"span",32),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275property"]("magazineVisible",i.tablePopoverShow.menu4&&!x["\u0275\u0275pureFunction0"](4,le).includes(null==i.currentCategory?null:i.currentCategory.classify)&&i.isShowTable),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](3,2,"NEW_TABLE"))}}function mt(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementContainerStart"](0),x["\u0275\u0275elementStart"](1,"div",157),x["\u0275\u0275listener"]("click",function(){x["\u0275\u0275restoreView"](n);var e=t.$implicit;return x["\u0275\u0275nextContext"](2).toCategory(e)}),x["\u0275\u0275elementStart"](2,"div",158),x["\u0275\u0275element"](3,"img",159),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](4,"div",160),x["\u0275\u0275elementStart"](5,"div",161),x["\u0275\u0275text"](6),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=t.$implicit;x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/"+i.icon+".jpg",x["\u0275\u0275sanitizeUrl"]),x["\u0275\u0275advance"](3),x["\u0275\u0275textInterpolate"](i.title)}}function ht(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"div",155),x["\u0275\u0275template"](1,mt,7,2,"ng-container",156),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngForOf",n.otherCategories)}}function gt(e,t){1&e&&(x["\u0275\u0275elementStart"](0,"div",162),x["\u0275\u0275element"](1,"favorite-view",163),x["\u0275\u0275elementEnd"]()),2&e&&(x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("pageFrom","detailPage"))}function ft(e,t){if(1&e&&x["\u0275\u0275element"](0,"app-article-create",164),2&e){var n=x["\u0275\u0275nextContext"]();x["\u0275\u0275property"]("model","create-article")("categoryId",n.selectCategory)("currentDomain",n.currentDomain)("dictionaryId",n.dictionaryId)("parentSn",null==n.operateNode||null==n.operateNode.origin?null:n.operateNode.origin.sn)("articleDetails",null==n.operateNode?null:n.operateNode.origin)("categoryDetails",n.currentCategory)("createFrom",n.createFrom)}}function vt(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"app-excel-create",165),x["\u0275\u0275element"](1,"div",166),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275nextContext"]();x["\u0275\u0275property"]("container","new-luckysheet")("model","create-excel")("categoryId",n.selectCategory)("currentDomain",n.currentDomain)("dictionaryId",n.dictionaryId)("parentSn",null==n.operateNode||null==n.operateNode.origin?null:n.operateNode.origin.sn)}}function bt(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"create-workitem-article",167),x["\u0275\u0275listener"]("showCopyWikiChange",function(e){return x["\u0275\u0275restoreView"](n),!(x["\u0275\u0275nextContext"]().isFeWordImport=e)})("modelShowCloseChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().closeHandleFunc(e)}),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275property"]("showCopyWiki",!i.isFeWordImport)("currentDomain",i.currentDomain)("wikiSn",i.wikiSn)("designTypeList",i.designTypeList)("category",i.currentCategory)}}function Ct(e,t){if(1&e&&x["\u0275\u0275element"](0,"workitem-article-edit",168),2&e){var n=x["\u0275\u0275nextContext"]();x["\u0275\u0275property"]("currentDomain",n.currentDomain)("categoryId",n.selectCategory)("dictionaryId",n.dictionaryId)("currentDomainInfo",n.currentDomainInfo)("workitemList",n.workitemList)("hidden",n.workitemDetailShow)("category",n.currentCategory)}}function yt(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div"),x["\u0275\u0275elementStart"](1,"nz-modal",169),x["\u0275\u0275listener"]("nzVisibleChange",function(e){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().accessControlShow=e}),x["\u0275\u0275elementStart"](2,"div",170),x["\u0275\u0275elementStart"](3,"access-control",171),x["\u0275\u0275listener"]("closeCallback",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().closeCallbackFunc()}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){var i=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("nzVisible",i.accessControlShow)("nzClosable",!1)("nzFooter",null)("nzWidth",600),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("articleDetails",null==i.operateNode?null:i.operateNode.origin)}}function xt(e,t){if(1&e){var n=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",172),x["\u0275\u0275elementStart"](1,"div",173),x["\u0275\u0275text"](2),x["\u0275\u0275pipe"](3,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](4,"button",174),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().popoverSubmit("lookHelp")}),x["\u0275\u0275text"](5),x["\u0275\u0275pipe"](6,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](7,"button",175),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](n),x["\u0275\u0275nextContext"]().popoverSubmit("complete")}),x["\u0275\u0275text"](8),x["\u0275\u0275pipe"](9,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}2&e&&(x["\u0275\u0275advance"](2),x["\u0275\u0275textInterpolate"](x["\u0275\u0275pipeBind1"](3,3,"GROUP_POPOVER_CONTENT")),x["\u0275\u0275advance"](3),x["\u0275\u0275textInterpolate"](x["\u0275\u0275pipeBind1"](6,5,"GROUP_LOOK_HELP")),x["\u0275\u0275advance"](3),x["\u0275\u0275textInterpolate"](x["\u0275\u0275pipeBind1"](9,7,"TIP_BUTTON_KNOW")))}var wt=function(e){return e[e.del=1]="del",e[e.addInTree=2]="addInTree",e[e.addInRoot=3]="addInRoot",e}({}),_t=function(){function e(e,t,n,i,a,c,l,u,m,f,v,b){var C=this;this.router=e,this.activeRoute=t,this.knowledgeService=n,this.categoryManager=i,this.translate=a,this.ref=c,this.emitService=l,this.notificationService=u,this.authService=m,this.searchService=f,this.spaceMemberService=v,this.cdr=b,this.isShowTable=!1,this.newCoe=!1,this.operateNode={origin:{sn:null,title:"",key:""}},this.nodeRenameTitle="",this.nodeDraggable=!0,this.isDesignDoc=!1,this.unMovableNode=!1,this.designTypeList=[],this.wikiSn="",this.realCatalogArrBack=!1,this.isLoading=!0,this.userQuestionUpdate=new o.a,this.removeModalCtrl=!1,this.rubbishLastNodesn="",this.expandBeforeArr=[],this.countAPINum=0,this.fromPage="",this.coeRootNode={key:"0001",showId:"catelogCOERootNode",sn:"COERootNode",category:"directory",classify:"coe",title:this.translate.instant("COE_DIRECTORY"),children:[],visibility:1,isLeaf:!1,disableOperate:!0},this.trustedDesignRootNode={key:"trustedDesignRootNode",showId:"catelogTrustedDesignRootNode",sn:"trustedDesignRootNode",category:"directory",title:this.translate.instant("COMMUNITY_HOME"),children:[],visibility:1,isLeaf:!1,disableOperate:!0},this.authAccess={userEditPermission:!0,templateAccess:!1},this.currentCategory={title:"",id:"",icon:"category-icon-1"},this.otherCategories=[],this.arr=[],this.dictionaryId=0,this.rubbishDetailShow=!1,this.modelShowCtrl=!1,this.accessControlShow=!1,this.searchVal="",this.newArticleMod=!1,this.newExcelMod=!1,this.defaultExpandedKeys=["WIKIRootNode"],this.importWordShow=!1,this.showHistory=!1,this.isFocus=!1,this.showSelectWorkitem=!1,this.showEditWorkitemArticle=!1,this.workitemDetailShow=!1,this.rubbishArr=[],this.showEmptyTip=!1,this.defaultRubbishExpandedKeys=[""],this.recentViewClick=!1,this.catalogClick=!1,this.rubbishClick=!1,this.recentViewedArr=[],this.realCatalogArr=[],this.spaceSetWorkitemAccess=!1,this.spaceNewModelAccess=!1,this.employeeUser="\u5218\u5219\u8fb0 wx1080774",this.nodeRenamePermission={},this.showFvorite=!1,this.popoverGuideVisible={isPlusPopoVisible:null,isElidePopVisible:null},this.isCurrentMenuNode=null,this.needGuide={articlesGroup:null},this.catalogData=[],this.isExistsCatalogData=!1,this.isHideLeftCategory=!1,this.isFeWordImport=!1,this.trustedDesignNodeList=[],this.trustedDesignPages=[],this.isCoeCategory=!1,this.isTrustedDesignCategory=!1,this.onDestory$=new o.a,this.countAPINumber=0,this.isRouteParamLoad=!1,this.isDomLoaded=!1,this.titleCreateGroupArticle=!1,this.dirsDataWaitHandle=null,this.closeCatalogLoading=new o.a,this.tablePopoverShow={menu3:!1,menu4:!1},this.isCopyWiki=!1,this.importDocument={domainType:"down",filterCategory:{id:[3,6],classify:["PRD"]}},this.clickOutsideFunc=function(){setTimeout(function(){C.isFocus||(C.showHistory=!1)})},this.beforeDrop=function(e){var t,n,i,o,a,c;if((null===(n=null===(t=e.dragNode.origin)||void 0===t?void 0:t.assigned_domain)||void 0===n?void 0:n.id)===Number(C.currentDomain)&&(null===(o=null===(i=e.node.origin)||void 0===i?void 0:i.assigned_domain)||void 0===o?void 0:o.id)===Number(C.currentDomain)){C.dragPos=e.pos;var l=C.handleNotDropNode(e);if((null===(a=e.dragNode.origin)||void 0===a?void 0:a.parent)&&Object(h.a)(null===(c=e.dragNode.origin)||void 0===c?void 0:c.parent,e.node.origin)&&0===e.pos||l)return Object(r.a)(!1).pipe(Object(s.a)(0));if(e.node.isLeaf&&0===e.pos){try{C.dragNode=Object(g.a)(e.dragNode)}catch(d){C.dragNode=e.dragNode}return Object(r.a)(!0).pipe(Object(s.a)(0))}try{C.dragNode=Object(g.a)(e.dragNode)}catch(p){C.dragNode=e.dragNode}return Object(r.a)(!0).pipe(Object(s.a)(0))}},this.userQuestionUpdate.pipe(Object(d.a)(500),Object(p.a)()).subscribe(function(e){window.hwa("trackStructEvent",{label:"\u641c\u7d22"})})}return Object.defineProperty(e.prototype,"createArticleAccess",{get:function(){return!!("system"!==this.currentCategory.classify||this.spaceSetWorkitemAccess&&this.spaceNewModelAccess)},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){var e,t;null===(e=this.currentUserChanges)||void 0===e||e.unsubscribe(),null===(t=this.currentDomainChanges)||void 0===t||t.unsubscribe(),this.onDestory$.next(),this.onDestory$.complete()},e.prototype.getModelShowCtrl=function(e){this.modelShowCtrl=e,this.isCopyWiki=!1},e.prototype.getConfirmFunc=function(e){var t=this;if(this.isCopyWiki){if(!e.parentObj.sn)return;this.toCopyWiki(e)}else this.modelShowCtrl=e.showCtrl,e.parentObj.domain_id==this.currentDomain?this.knowledgeService.saveArticle([{id:this.operateNode.origin.id,parent_id:e.parentObj.id,parent_sn:e.parentObj.sn,kanban_id:e.parentObj.kanban_id}]).subscribe(function(n){t.confirmModeCallback(e.parentObj.kanban_id==t.currentCategory.id&&e.parentObj.domain_id==t.currentDomain)}):this.getConfirmFunDomain(e)},e.prototype.confirmModeCallback=function(e){this.getDirs(e?this.operateNode.origin.sn:null),e?this.goDetailPage(this.operateNode.origin.sn,!0):this.router.navigate(["./"],{relativeTo:this.activeRoute}),this.notificationService.success(this.translate.instant("SUCCESSFUL_OPERATION"),"")},e.prototype.getConfirmFunDomain=function(e){var t=this;this.modelShowCtrl=e.showCtrl,this.knowledgeService.saveMoveArticle({fromWikiSn:this.operateNode.origin.sn,toWikiSn:e.parentObj.sn,toKanBanId:e.parentObj.kanban_id,toDomainId:e.parentObj.domain_id}).subscribe(function(e){t.confirmModeCallback()})},e.prototype.getSearchList=function(e){""==this.searchVal.trim()?this.getDirs(null==e?void 0:e.sn):this.getCataLogBySearch(e)},e.prototype.goSearchPage=function(){""!=this.searchVal.trim()&&(Object(v.c)("wiki-search-from",window.location.href),this.searchService.goSearchPage(this))},e.prototype.toCopyWiki=function(e){var t=this;this.categoryManager.importWikiToDesign({assign_domain_id:this.currentDomain,from_sn:e.parentObj.sn,from_id:e.parentObj.id,entity_id:this.workitemList[0].id,entity_sn:this.workitemList[0].number,entity_type:"PRD"===this.currentCategory.classify?"PRD":"workitem",category:"PRD"===this.currentCategory.classify?"PRD":"workitem",wiki_classify:"PRD"===this.currentCategory.classify?"PRD":"feature",entity_name:this.workitemList[0].title,parent_id:0,entity_domain_id:this.workitemList[0].simple_domain.id,operate_source:"wiki"}).subscribe(function(e){e&&((null==e?void 0:e.sn)&&(t.getDirs(e.sn),t.goDetailPage(e.sn,!0)),t.modelShowCtrl=!1,t.isCopyWiki=!1)},function(){})},Object.defineProperty(e.prototype,"isShareWiki",{get:function(){return location.pathname.startsWith("/wiki")},enumerable:!1,configurable:!0}),e.prototype.closeCallbackFunc=function(){this.accessControlShow=!1},e.prototype.accessControlShowFunc=function(){this.accessControlShow=!0,window.hwa("trackStructEvent",{label:"\u53ef\u89c1\u5ea6\u8bbe\u7f6e"})},e.prototype.quickCreateArticle=function(e,t){var n;this.createFrom="article",this.createArticleAccess&&this.authAccess.userEditPermission&&(["system","PRD"].includes(this.currentCategory.classify)?(this.showSelectWorkitem=!0,this.dictionaryId=0,this.wikiSn="",this.designTypeList=[],t?("normal"===(null===(n=this.operateNode.origin)||void 0===n?void 0:n.classify)?this.designTypeList=["Feature","Story"]:(this.wikiSn=this.operateNode.origin.sn,this.designTypeList=["Story"]),this.dictionaryId=this.operateNode.origin.id):this.designTypeList=["Feature"]):(e&&e.stopPropagation(),this.showHistory=!1,(this.authAccess.userEditPermission||this.authAccess.templateAccess)&&(this.newArticleMod=!0,this.dictionaryId=null)))},e.prototype.parentCloseModal=function(e){this.modelShowCtrl=e,this.isCopyWiki=!1},e.prototype.expandHighLightArr=function(e){for(var t=e.length,n=0;n<t;n++)e[n].is_search&&this.openTargetBranch(e[n]),0!=e[n].children.length&&this.expandHighLightArr(e[n].children)},e.prototype.openTargetBranch=function(e){Object(v.a)(e)||Object(v.a)(e.parent)||(e.parent.expanded=!0,this.openTargetBranch(e.parent))},e.prototype.getCataLogBySearch=function(e){var t=this;this.knowledgeService.getDirs(this.currentDomain,{status:["published"],search:this.searchVal,searchTree:!0,kanban_id:this.currentCategory.id}).subscribe(function(n){n=n.filter(function(e){return e}),t.getSuitableArr(n,null),t.expandHighLightArr(n),t.realCatalogArr=Object(i.i)(n),t.ref.detectChanges(),setTimeout(function(){t.positionFunc(e)})})},e.prototype.positionFunc=function(e){var t=this;if(e){if(this.expandBeforeArr=this.nzTreeComponent.getExpandedNodeList().map(function(e){return e.key}),"1"==e.operateType)this.defaultExpandedKeys=Object(i.i)(this.expandBeforeArr),e.bool&&this.router.navigate(["../"+this.currentCategory.id],{relativeTo:this.activeRoute});else if(e&&e.operateType===wt.addInTree)-1==this.expandBeforeArr.indexOf(e.parentSn)&&this.expandBeforeArr.push(e.parentSn),this.defaultExpandedKeys=Object(i.i)(this.expandBeforeArr),this.recentViewClick=!1,this.catalogClick=!0,this.rubbishClick=!1,setTimeout(function(){t.findFinishedDom(t.activedNode.origin.showId).then(function(){"document"===e.category&&t.autoRename(e.sn)})});else if(e&&e.operateType===wt.addInRoot){for(var n=this.realCatalogArr.length,o=void 0,r=0;r<n;r++)this.realCatalogArr[r].sn==e.sn&&(o=this.realCatalogArr[r],this.realCatalogArr.splice(r,1),this.realCatalogArr.unshift(o));this.defaultExpandedKeys=Object(i.i)(this.expandBeforeArr),this.realCatalogArr=Object(i.i)(this.realCatalogArr),this.recentViewClick=!1,this.catalogClick=!0,this.rubbishClick=!1,this.setActivedNode(e.sn),setTimeout(function(){t.findFinishedDom(t.activedNode.origin.showId).then(function(){"document"===e.category&&t.autoRename(e.sn)})})}else if("4"==e.operateType){var a=[];for(this.getSpecialNodeFunc(this.realCatalogArr,"sn",e.sn,a),n=a.length,r=0;r<n;r++)-1==this.expandBeforeArr.indexOf(a[r])&&this.expandBeforeArr.push(a[r]);this.defaultExpandedKeys=Object(i.i)(this.expandBeforeArr),this.recentViewClick=!1,this.catalogClick=!0,this.rubbishClick=!1,setTimeout(function(){t.findFinishedDom("catalog"+e.sn).then(function(){t.setActivedNode(e.sn),t.cdr.detectChanges(),e.isNeedRename&&"document"===e.category&&t.autoRename(e.sn)})})}else"refresh-tree-with-position"==e.operateType&&(this.setActivedNode(e.sn),(e.sn.startsWith("WIKI")||e.sn.startsWith("TABLE"))&&this.getNavigationFather(e));setTimeout(function(){t.closeLoadingStatus(!0)})}},e.prototype.setActivedNode=function(e){var t=this.nzTreeComponent.getTreeNodeByKey(e);t&&(this.activedNode=null,this.activedNode=t)},e.prototype.changeItemObj=function(e,t){for(var n=t.length,i=0;i<n;i++)t[i].isClickActived=e.sn==t[i].sn,0!==t[i].children.length&&this.changeItemObj(e,t[i].children)},e.prototype.sendSn=function(e,t){"recentView"==t?(this.recentViewClick=!0,this.catalogClick=!1,this.rubbishClick=!1,this.changeItemObj(e,this.recentViewedArr)):"rubbish"==t&&(this.recentViewClick=!1,this.catalogClick=!1,this.rubbishClick=!0,this.changeItemObj(e,this.rubbishArr)),this.goDetailPage(e.sn,!0)},e.prototype.getOperateNode=function(e,t){var n,i,o;this.newCoe&&t.stopPropagation(),this.isDesignDoc=["feature","story"].includes(null===(n=null==e?void 0:e.origin)||void 0===n?void 0:n.classify),this.unMovableNode="story"===(null===(i=null==e?void 0:e.origin)||void 0===i?void 0:i.classify)&&"feature"===(null===(o=null==e?void 0:e.origin)||void 0===o?void 0:o.parentClassify),this.operateNode=e,this.operateActive=e,this.newCoe&&this.editPermissions(e.origin.sn)},e.prototype.setOperateNull=function(e,t){this.isCurrentMenuNode=t,e?null!==localStorage.getItem("readArticlesGroupGuide")?(this.needGuide.articlesGroup=JSON.parse(localStorage.getItem("readArticlesGroupGuide")),"rootDirectory"===this.isCurrentMenuNode?this.popoverGuideVisible.isPlusPopoVisible=this.needGuide.articlesGroup:this.popoverGuideVisible.isElidePopVisible=this.needGuide.articlesGroup):this.isUserShowPopover("WIKI_ARTICLE_GROUP_GUIDE_READ"):this.operateActive=null},e.prototype.isUserShowPopover=function(e){var t=this;this.knowledgeService.getUserPopover(e).subscribe(function(e){t.needGuide.articlesGroup=!e,Object(v.c)("readArticlesGroupGuide",JSON.stringify(!e)),"rootDirectory"===t.isCurrentMenuNode?t.popoverGuideVisible.isPlusPopoVisible=t.needGuide.articlesGroup:t.popoverGuideVisible.isElidePopVisible=t.needGuide.articlesGroup})},e.prototype.popoverSubmit=function(e){"lookHelp"===e&&window.open("https://clouddevops.huawei.com/domains/2/wiki/9/WIKI2022010600263","_blank"),"rootDirectory"===this.isCurrentMenuNode?this.popoverGuideVisible.isPlusPopoVisible=!1:this.popoverGuideVisible.isElidePopVisible=!1,this.isUpdataUserPopover(["WIKI_ARTICLE_GROUP_GUIDE_READ"])},e.prototype.isUpdataUserPopover=function(e){var t=this;this.knowledgeService.updatesUserPopover(e).subscribe(function(e){Object(v.c)("readArticlesGroupGuide","false"),t.needGuide.articlesGroup=!1})},e.prototype.tableGuideVisible=function(){return"true"!==localStorage.getItem("readTableGuide")},e.prototype.titleCreateArticle=function(){this.createFrom="category",this.authAccess.userEditPermission&&this.createArticleAccess&&(this.authAccess.userEditPermission||this.authAccess.templateAccess)&&(this.newArticleMod=!0,this.dictionaryId=0)},e.prototype.titleCreateExcel=function(e){void 0===e&&(e=0),this.authAccess.userEditPermission&&this.createArticleAccess&&(this.authAccess.userEditPermission||this.authAccess.templateAccess)&&(this.newExcelMod=!0,this.dictionaryId=e)},e.prototype.titleCreateFloder=function(){var e=this;if(this.authAccess.userEditPermission&&this.createArticleAccess){var t=[{title:this.translate.instant("UNNAMED_GROUP"),description:"",category:"document",parent_id:0,ui_source:1,assigned_domain_id:this.currentDomain,kanban_id:this.currentCategory.id}];this.knowledgeService.createArticleFloder(t).subscribe(function(t){if(200===t.code&&t.data&&t.data.success&&0!==t.data.success.length){var n={operateType:wt.addInRoot,category:t.data.success[0].category,sn:t.data.success[0].sn};e.goDetailPage(n.sn,!0),e.titleCreateGroupArticle=!0,e.getSearchList(n)}})}},e.prototype.getGiveArr=function(e,t){for(var n=e.length-1;n>=0;n--)e[n].key=e[n].sn,e[n].sn==t&&(e[n].children=[]),e[n].category&&0===e[n].children.length?e.splice(n,1):0!=e[n].children.length&&this.getGiveArr(e[n].children,t)},e.prototype.moveFunc=function(){var e=this;this.operateNode.origin.is_updated&&"CIM"!==this.operateNode.origin.source_system&&(this.modelShowCtrl=!0,this.knowledgeService.getDirs(this.currentDomain,{status:["published"],kanban_id:this.currentCategory.id}).subscribe(function(t){e.giveCatalogArr=t,e.getGiveArr(e.giveCatalogArr,e.operateNode.origin.sn)}),window.hwa("trackStructEvent",{label:"\u79fb\u52a8"}))},e.prototype.removeFunc=function(){var e,t,n,i=Number(this.currentDomain)===(null===(t=null===(e=this.operateNode.origin)||void 0===e?void 0:e.assigned_domain)||void 0===t?void 0:t.id);i||this.notificationService.error(this.translate.instant("DELETE_OTHER_WIKI_TIPS",{title:null===(n=this.operateNode.origin)||void 0===n?void 0:n.title}),""),this.operateNode.origin.is_deleted&&"CIM"!==this.operateNode.origin.source_system&&i&&(this.removeModalCtrl=!0,window.hwa("trackStructEvent",{label:"\u5220\u9664"}))},e.prototype.dangerConfirmFunc=function(){var e=this;this.initRubbish(),this.removeModalCtrl=!1;var t=[{id:this.operateNode.origin.id,category:this.operateNode.origin.category,kanban_id:this.currentCategory.id}],n=this.nzTreeComponent.getTreeNodeByKey(this.operateNode.origin.sn),i=[this.operateNode.origin.sn];0!=n.origin.children.length&&(i=this.getNodeSnList(n.origin.children,i)),this.knowledgeService.deleteNode(this.currentDomain,t).subscribe(function(t){var n,o,r;e.newCoe&&(null===(o=null===(n=t.data)||void 0===n?void 0:n.success)||void 0===o?void 0:o.length)>0&&e.emitService.emit({type:"coe-cancel-delete",length:t.data.success.length});for(var a=0;a<i.length;a++){var c=e.expandBeforeArr.indexOf(i[a]);-1!=c&&e.expandBeforeArr.splice(c,1)}var l=e.nzTreeComponent.getTreeNodeByKey(null===(r=e.operateNode.origin)||void 0===r?void 0:r.sn);l&&(0==l.level?e.getDirs():l.remove()),setTimeout(function(){e.router.navigate(["./"],{relativeTo:e.activeRoute})}),e.notificationService.success(e.translate.instant("SUCCESSFUL_OPERATION"),"")})},Object.defineProperty(e.prototype,"deleteTitle",{get:function(){return this.translate.instant("WIKI_ARTICLE")+" <"+this.operateNode.origin.title+"> ?"},enumerable:!1,configurable:!0}),e.prototype.createFloder=function(){var e=this;if(this.authAccess.userEditPermission&&this.createArticleAccess){window.hwa("trackStructEvent",{label:"\u65b0\u5efa\u6587\u4ef6\u5939"});var t=[{title:this.translate.instant("UNNAMED_GROUP"),description:"",category:"document",parent_id:this.operateNode.origin.id,ui_source:1,assigned_domain_id:this.currentDomain,kanban_id:this.currentCategory.id}];this.knowledgeService.createArticleFloder(t).subscribe(function(t){if(200===t.code&&t.data&&t.data.success&&0!==t.data.success.length){var n={operateType:wt.addInTree,sn:t.data.success[0].sn,category:t.data.success[0].category};e.goDetailPage(n.sn,!0),e.newCoe?e.getDirs(null==n?void 0:n.sn):e.getChildrenNode(e.activedNode,n)}})}},e.prototype.getChildrenNode=function(e,t){var n=this,o={status:["published"],wiki_sn:e.origin.sn};e.isLoading=!0,this.knowledgeService.getDirs(this.currentDomain,o).subscribe(function(o){o=o.filter(function(e){return e}),n.getSuitableArr(o,e.origin),e.origin.isLeaf=!1,e.isLeaf=!1,e.isLoading=!1,e&&e.clearChildren(),n.childrenSuitHandler(e,o),setTimeout(function(){n.setActivedNode(t.sn),n.expandBeforeArr=n.nzTreeComponent.getExpandedNodeList().map(function(e){return e.key}),n.defaultExpandedKeys=Object(i.i)(n.expandBeforeArr,[e.origin.sn]),setTimeout(function(){n.positionFunc(t)})})})},e.prototype.createArticle=function(){this.createFrom="article",this.authAccess.userEditPermission&&(window.hwa("trackStructEvent",{label:"\u65b0\u5efa\u6587\u7ae0"}),this.newArticleMod=!0,this.dictionaryId=this.operateNode.origin.id)},e.prototype.createExcel=function(){this.authAccess.userEditPermission&&(window.hwa("trackStructEvent",{label:"\u65b0\u5efa\u8868\u683c"}),this.newExcelMod=!0,this.dictionaryId=this.operateNode.origin.id)},e.prototype.handleNotDropNode=function(e,t){var n,i,o,r,a=["feature","story"].includes(null===(n=e.node.origin)||void 0===n?void 0:n.classify),c=["feature"].includes(null===(i=e.node.origin)||void 0===i?void 0:i.parentClassify);return a&&(0===(null==e?void 0:e.pos)||0===t||c)||"story"===(null===(o=e.dragNode.origin)||void 0===o?void 0:o.classify)&&"feature"===(null===(r=e.dragNode.origin)||void 0===r?void 0:r.parentClassify)},e.prototype.afterDrop=function(e){var t,n,i,o,r,a,c,l,s,d,p,u,m=e.dragNode,g=e.node;if((null===(t=m.origin.assigned_domain)||void 0===t?void 0:t.id)===Number(this.currentDomain)&&(null===(n=g.origin.assigned_domain)||void 0===n?void 0:n.id)===Number(this.currentDomain)){if(null===g.origin.parent&&null===m.origin.parent){var f=null===(r=null===(o=null===(i=this.nzTreeComponent)||void 0===i?void 0:i.getTreeNodes())||void 0===o?void 0:o.filter(function(e){return 0===e.level&&e.origin&&e.origin.id}))||void 0===r?void 0:r.map(function(e){return e.origin.id});this.treeNoteSort(f)}Object(h.a)(null===(c=null===(a=m.origin)||void 0===a?void 0:a.parent)||void 0===c?void 0:c.id,null===(s=null===(l=g.origin)||void 0===l?void 0:l.parent)||void 0===s?void 0:s.id)&&0!==this.dragPos?this.treeNoteSort(null===(u=null===(p=null===(d=null==g?void 0:g.getParentNode())||void 0===d?void 0:d.children)||void 0===p?void 0:p.filter(function(e){return e.origin}))||void 0===u?void 0:u.map(function(e){return e.origin.id})):this.moveAndSort(e)}},e.prototype.moveAndSort=function(e){var t=this;this.knowledgeService.saveArticle(0===this.dragPos?[{id:this.dragNode.origin.id,parent_id:e.node.origin.id,parent_sn:e.node.origin.sn,kanban_id:this.currentCategory.id}]:[{id:this.dragNode.origin.id,parent_id:0===e.node.level?"0":e.node.origin.parent.id,parent_sn:0===e.node.level?"0":e.node.origin.parent.sn,kanban_id:this.currentCategory.id}]).subscribe(function(n){var i,o,r;n.success&&n.success.length>0&&(r=0===t.dragPos?(null===(o=null===(i=null==e?void 0:e.node)||void 0===i?void 0:i.children)||void 0===o?void 0:o.length)?t.getChildrenIdArry(e.node.children):[t.dragNode.origin.id]:e.node.origin.parent?t.getChildrenIdArry(e.node.getParentNode().children):t.nzTreeComponent.getTreeNodes().filter(function(e){return 0===e.level&&e.origin&&e.origin.id}).map(function(e){return e.origin.id}),t.treeNoteSort(r))})},e.prototype.treeNoteSort=function(e){var t=this;return He.knowledgeService.treeNodeSort(e).subscribe(function(e){200==e.code&&(He.notificationService.success(He.translate.instant("SUCCESSFUL_OPERATION"),""),t.recentViewClick=!1,t.catalogClick=!0,t.rubbishClick=!1,t.getDirs(He.dragNode.origin.sn),t.goDetailPage(He.dragNode.origin.sn,!0))})},e.prototype.getChildrenIdArry=function(e){var t=[];return e.length>0&&e.forEach(function(e){t.push(e.origin.id)}),t},e.prototype.nzClickEvent=function(e){var t,n,i=e.node.origin;"rootDirectory"!=(null==i?void 0:i.category)&&("trustedDesignRootNode"!=(null==i?void 0:i.key)?(null==i?void 0:i.disableOperate)&&"directory"===i.category||(this.recentViewClick=!1,this.catalogClick=!0,this.rubbishClick=!1,(null==i?void 0:i.theme_page)?this.router.navigate(["./"+(null==i?void 0:i.theme_page)],{relativeTo:this.activeRoute}):this.goDetailPage(i.sn),this.activedNode=null,this.activedNode=e.node):(null===(n=null===(t=this.activedNode)||void 0===t?void 0:t.origin)||void 0===n?void 0:n.sn)!=(null==i?void 0:i.key)&&(this.router.navigate(["../1887"],{relativeTo:this.activeRoute}),this.activedNode=this.nzTreeComponent.getTreeNodeByKey("trustedDesignRootNode")))},e.prototype.getChildrenTreeNode=function(e,t){var n=this;if(this.isCoeCategory&&!e.origin.children.length&&"COERootNode"==e.origin.sn)return e.isLoading=!0,void this.knowledgeService.getCoeDirs(this.currentDomain).subscribe(function(t){e.isLoading=!1,n.childrenSuitHandler(e,t,!0)});if(e.origin.isLeaf||!e.origin.children_number||e.origin.children.length)e.isLoading&&(e.isLoading=!1);else{var i={status:["published"],wiki_sn:e.origin.sn};e.isLoading=!0,this.knowledgeService.getDirs(this.currentDomain,i).subscribe(function(t){e.isLoading=!1,t=t.filter(function(e){return e}),n.getSuitableArr(t,e.origin),n.childrenSuitHandler(e,t,!0)})}},e.prototype.childrenSuitHandler=function(e,t,n){var i=this;e.origin.children_number=t.length,e.addChildren(t),n&&setTimeout(function(){i.cdr.detectChanges()})},e.prototype.buildTrustedDesignNodeList=function(e){var t=this;this.trustedDesignNodeList=[],e.forEach(function(e){var n={key:"trustedDesignRootNode",showId:"catelogTrustedDesignRootNode",sn:"trustedDesignRootNode",category:"directory",title:e.title,children:t.buildTrustedDesignData(e.children)||[],visibility:1,isLeaf:!1,disableOperate:!0};t.trustedDesignNodeList.push(n)})},e.prototype.initFolder=function(){var e=this;if(/\/wiki((\/\d+)?)(\/(WIKI\w+|DIR\w+|DOC\w+|TABLE\w+))?/.test(window.location.pathname)){var t=RegExp.$2,n=RegExp.$4;if(t){this.isCoeCategory="/6"===t,(this.countAPINum>=1||this.fromPage)&&this.categoryManager.clearCategoryAPICache(),this.isLoading=!1;var o=[this.categoryManager.getWikiCategories(this.currentDomain)];if(n)o.push(this.knowledgeService.getDirsWithPosition(this.currentDomain,r={status:["published"],wiki_sn:n}));else{var r={status:["published"],kanban_id:t.replace(/\//g,"")};o.push(this.knowledgeService.getDirs(this.currentDomain,r))}Object(a.a)(o).subscribe(function(o){var r=Object(i.g)(o,3),a=r[0],c=r[1],l=r[2];e.countAPINum++,a.forEach(function(e,t){e.icon="category-icon-"+((t+1)%10==0?10:(t+1)%10)});var s=a.find(function(t){return t.id===e.selectCategory});e.otherCategories=a.filter(function(t){return t.id!=e.selectCategory&&"grey"!=t.classify}),e.currentCategory=s||{};var d=null==s?void 0:s.theme_page;e.trustedDesignPages=(d.self_page?[d.self_page]:[]).concat(d.shared_page||[]),e.isTrustedDesignCategory="/1887"===t&&e.trustedDesignPages.length>0,e.isTrustedDesignCategory?e.knowledgeService.getTrustedDesignPage(e.trustedDesignPages).subscribe(function(t){e.handleTrustedDesignPage(c,t,n)}):e.handleTrustedDesignPage(c,l,n)},function(t){e.isLoading=!0})}else n&&this.knowledgeService.getCategoryBySn(n).subscribe(function(t){e.router.navigate(["domains/"+e.currentDomain+"/wiki/"+t.id+"/"+n])},function(){},function(){e.realCatalogArrBack=!0})}this.fromItem={domain_id:this.currentDomain,fromEngine:"wiki",currentCategory:this.currentCategory}},e.prototype.handleTrustedDesignPage=function(e,t,n){"grey"!=this.currentCategory.classify&&this.dirsDataHandleAfterDomLoaded(e,t,n)},e.prototype.handleCatalogQueryData=function(e,t,n){var o=this;void 0===n&&(n={});var r=this.isCoeCategory;this.recentViewClick=!1,this.catalogClick=!0,this.rubbishClick=!1;var a=e;this.defaultExpandedKeys=Object(i.i)(this.defaultExpandedKeys),a=a.filter(function(e){return e}),this.getSuitableArr(a,null),this.realCatalogArrBack=!0,r?this.realCatalogArr=Object(i.i)([this.coeRootNode],a):this.isTrustedDesignCategory?this.getTrustedDesignNode(a,t):this.realCatalogArr=Object(i.i)(a),this.titleCreateGroupArticle&&(n.category="document",n.isNeedRename=!0,this.titleCreateGroupArticle=!1),this.isDomLoaded?(this.positionFuncArgs=null,setTimeout(function(){o.positionFunc(n)})):this.positionFuncArgs=n},e.prototype.bindEvent=function(){var e=this;this.emitService.eventEmit.subscribe(function(t){e.listeningEmitEvent(t)})},e.prototype.listeningEmitEvent=function(e){var t=this,n={"delete-article":function(){t.initRubbish()},"remove-directory":function(){t.removeArticleHandler(e)},"recover-article":function(){t.handlerEvent(e)},"add-document":function(){t.handlerEvent(e),(null==e?void 0:e.isCreateWorkitem)&&t.sendSn(e,"")},"nav-updata":function(){t.handlerEvent(e)},"wiki:access-control-set-success":function(){t.handlerEvent(e)},"excel::wiki-closeModel":function(){t.newExcelMod&&(t.newExcelMod=!1)},"article::wiki-closeModel":function(){t.newArticleMod&&(t.newArticleMod=!1),t.showEditWorkitemArticle&&(t.showEditWorkitemArticle=!1)},"article::wiki-closeWorkitemEditModel":function(){t.showEditWorkitemArticle&&(t.showEditWorkitemArticle=!1)},"article-update-finished":function(){t.handlerArticleUpdate(e)},"excel-update-finished":function(){t.handlerArticleUpdate(e)},"article-add-finished":function(){t.handlerArticleUpdate(e)},"wiki::workitem-detail-open":function(){t.workitemDetailShow=!0},"workitem:detail:exit":function(){t.workitemDetailShow=!1},"workitem:delete":function(){t.removeArticleHandler(e)},"show-more-fvorite":function(){t.showMoreFvorite()},"wiki:release-article-success":function(){t.operateNode.origin.sn=e.sn,t.confirmModeCallback(!0)},"wiki:main-content-list":function(){t.catalogData=[e.obj],t.catalogData[0]?t.catalogData[0].wiki_total||(t.isHideLeftCategory=!0):t.isExistsCatalogData=!0},"content-inited":function(){t.emitData&&(t.emitService.emit(t.emitData),t.emitData=null)}},i=n[e.type||e.event];i&&("string"==typeof i&&(i=n[i]),i())},e.prototype.buildTrustedDesignData=function(e){void 0===e&&(e=[]);var t=[];return e.forEach(function(e){t.push({key:e.sn,showId:e.sn,theme_page:e.sn,sn:e.sn,category:"directory",title:e.title,children:[],visibility:1,isLeaf:!0})}),t},e.prototype.removeArticleHandler=function(e){this.getSearchList({operateType:"1",category:"directory",sn:e.sn}),this.getRencentView()},e.prototype.initRubbish=function(){this.rubbishArr=[],this.rubbishDetailShow=!1},e.prototype.handlerEvent=function(e){this.newArticleMod=!1,this.newExcelMod=!1,(null==e?void 0:e.is_deleted)||this.initRubbish(),this.getDirs(e.sn),this.goDetailPage(e.sn,!0)},e.prototype.handlerArticleUpdate=function(e){this.newArticleMod=!1;var t=this.nzTreeComponent.getTreeNodeByKey(e.sn);t&&(t.origin.title=e.title,t.title=e.title)},e.prototype.buildAuth=function(){var e=this;this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&(e.userId=t.user_id,e.authService.buildOperateAuth({currentDomain:e.currentDomain,currentUserId:t.user_id}).then(function(t){e.authAccess=t}))})},e.prototype.ngOnInit=function(){var e=this;window.wikiPageLoaded?window.wikiPageLoaded.subscribe(function(t){if(e.isDomLoaded=t,e.isDomLoaded&&(e.isRouteParamLoad&&(e.buildAuth(),e.getSpaceNewModelAccess(),e.getSpaceWorkitemAccess()),e.dirsDataWaitHandle)){var n=e.dirsDataWaitHandle;e.dirsDataHandler(n.res,n.trustedDesignRes,n.wikiOrDirId),setTimeout(function(){e.cdr.detectChanges()})}}):this.isDomLoaded=!0,this.closeLoadingSubjection=this.closeCatalogLoading.pipe(Object(u.a)(this.onDestory$)),this.closeLoadingSubjection.subscribe(function(t){e.cdr.detectChanges()}),this.getDomainInfo(),this.customStyle={top:"27px",left:"0px",width:"100%"},this.inputStyle={width:"calc(100% - 60px)!important"},this.tipInfo={title:"MOVE_TO",listPlaceHolder:"SEARCH_CATEGORY_DIRECTORY",listDirectoryTip:"MOVE",detailTitle:"SELECT_MOVE_LOCATION",detailPlaceHolder:"SEARCH",detailBottomTip:"MOVE_TO",detailConfirmBtnTip:"COMMON_BUTTON_CONFIRM"},He=this,this.activeRoute.queryParams.subscribe(function(t){e.fromPage=t.from}),this.activeRoute.paramMap.subscribe(function(t){e.currentDomain=t.get("domain_id"),e.knowledgeService.getTableGray({resource:"knowledge:table",domainId:e.currentDomain}).subscribe(function(t){e.isShowTable=t},function(){}),e.selectCategory=Number(t.get("categoryId")),e.initFolder(),e.bindEvent(),e.isDomLoaded?(e.isRouteParamLoad=!1,e.buildAuth(),e.getSpaceNewModelAccess(),e.getSpaceWorkitemAccess()):e.isRouteParamLoad=!0}),this.emitService.emit({type:"catalog-save-cdk"}),this.listenNodeEditPermission()},e.prototype.getSpecialNode=function(e,t,n){for(var i=e.length,o=0;o<i;o++){if(e[o].sn==t){e[o].title=n;break}0!=e[o].children.length&&this.getSpecialNode(e[o].children,t,n)}},e.prototype.getNavigationFather=function(e){var t=this;this.knowledgeService.getArticleDetails(e.sn,null).subscribe(function(n){n.data&&"deleted"==n.data.status?t.getNavigation(e,"rubbish"):t.getNavigation(e)},function(){})},e.prototype.getNavigation=function(e,t){var n=this;this.countAPINumber>=1&&this.spaceMemberService.clearArticleNavigationCache(),this.spaceMemberService.getArticleNavigation(this.currentDomain,e.sn).subscribe(function(o){if(n.countAPINumber++,o){if(!o.length)return void setTimeout(function(){n.positionFunc({sn:e.sn,operateType:"4"})});for(var r=o.length,a=[],c=0;c<r;c++)o[c].sn!=e.sn&&a.push(o[c].sn);"rubbish"===t?(n.defaultRubbishExpandedKeys=Object(i.i)(a),setTimeout(function(){n.findFinishedDom(t+e.sn,e.isNeedCloseLoading)})):(n.defaultExpandedKeys=Object(i.i)(a),setTimeout(function(){n.findFinishedDom("catalog"+e.sn,e.isNeedCloseLoading).then(function(){e.isNeedRename&&"document"===e.category&&n.autoRename(e.sn)})}))}n.isLoading=!0})},e.prototype.findFinishedDom=function(e,t){var n=this;return void 0===t&&(t=!1),new Promise(function(i){var o="catalog"+n.getLastDomNodeRubbish(n.realCatalogArr),r=Object(c.a)(100).pipe(Object(m.a)(function(e){return Object(l.a)(2*e)})).subscribe(function(a){document.getElementById(e)&&document.getElementById(o)&&(setTimeout(function(){n.positionActiveElement(e,t)}),r.unsubscribe(),i()),n.isLoading=!0})})},e.prototype.getSuitableArr=function(e,t,n){for(var i=e.length,o=0;o<i;o++)e[o].isLeaf=!e[o].children_number,e[o].key=e[o].sn,e[o].showId=n?n+e[o].sn:"catalog"+e[o].sn,e[o].parent=t,0!==e[o].children.length&&this.getSuitableArr(e[o].children,e[o])},e.prototype.getRencentView=function(){var e=this;this.knowledgeService.getRencentView(this.currentDomain).subscribe(function(t){e.recentViewedArr=t.data;for(var n=e.recentViewedArr.length,i=0;i<n;i++)e.recentViewedArr[i].showId="recent"+e.recentViewedArr[i].sn},function(){})},e.prototype.getRecycle=function(){var e=this;this.knowledgeService.getRecycle(this.currentDomain,this.currentCategory.id).subscribe(function(t){var n;0===(null===(n=t.data)||void 0===n?void 0:n.length)&&(e.showEmptyTip=!0),e.rubbishArr=Object(i.i)(t.data),e.rubbishLastNodesn=e.getLastDomNodeRubbish(e.rubbishArr),e.rubbishArr=e.rubbishArr.filter(function(e){return e}),e.getSuitableArr(e.rubbishArr,null,"rubbish"),e.defaultRubbishExpandedKeys=Object(i.i)(e.defaultRubbishExpandedKeys)},function(){})},e.prototype.getNodeSnList=function(e,t){for(var n=e.length,i=0;i<n;i++)t.push(e[i].sn),0!=e[i].children.length&&this.getNodeSnList(e[i].children,t);return t},e.prototype.getSpecialNodeFunc=function(e,t,n,i){for(var o=e.length,r=0;r<o;r++)e[r][t]==n&&this.openTargetBranchFunc(e[r],i),0!=e[r].children.length&&this.getSpecialNodeFunc(e[r].children,t,n,i)},e.prototype.openTargetBranchFunc=function(e,t){Object(v.a)(e)||Object(v.a)(e.parent)||(t.push(e.parent.sn),this.openTargetBranchFunc(e.parent,t))},e.prototype.getTrustedDesignNode=function(e,t){var n=this;t&&t.length&&(this.buildTrustedDesignNodeList(t),this.realCatalogArr=Object(i.i)(this.trustedDesignNodeList,e),setTimeout(function(){n.closeLoadingStatus(!0);var e=location.href.split("/");e[e.length-1].startsWith("PAGE")?(setTimeout(function(){n.positionFunc({sn:e[e.length-1],operateType:"refresh-tree-with-position"})}),n.nzTreeComponent.getTreeNodeByKey(n.trustedDesignRootNode.key).isExpanded=!0):n.activedNode=n.nzTreeComponent.getTreeNodeByKey(n.trustedDesignRootNode.key)}))},e.prototype.getDirs=function(e){var t=this;this.isLoading=!1;var n=[];n.push(e?this.knowledgeService.getDirsWithPosition(this.currentDomain,{status:["published"],wiki_sn:e}):this.knowledgeService.getDirs(this.currentDomain,{status:["published"],kanban_id:this.currentCategory.id})),this.isTrustedDesignCategory&&n.push(this.knowledgeService.getTrustedDesignPage(this.trustedDesignPages)),Object(a.a)(n).subscribe(function(n){var o=Object(i.g)(n,2);t.dirsDataHandleAfterDomLoaded(o[0],o[1],e),t.isLoading=!0},function(e){t.isLoading=!0})},e.prototype.dirsDataHandler=function(e,t,n){this.dirsDataWaitHandle=null,n?this.handleCatalogQueryData(e,t,{operateType:"4",sn:n}):this.handleCatalogQueryData(e,t)},e.prototype.dirsDataHandleAfterDomLoaded=function(e,t,n){this.isDomLoaded?this.dirsDataHandler(e,t,n):this.dirsDataWaitHandle={res:e,trustedDesignRes:t,wikiOrDirId:n}},e.prototype.positionActiveElement=function(e,t){void 0===t&&(t=!1);var n=document.getElementById("topPosition")&&document.getElementById("topPosition").getBoundingClientRect(),i=document.getElementById("bottomPosition")&&document.getElementById("bottomPosition").getBoundingClientRect(),o=document.getElementById(e)&&document.getElementById(e).getBoundingClientRect(),r=document.getElementById("scrollParent"),a=null==r?void 0:r.getBoundingClientRect(),c=Math.abs((null==o?void 0:o.top)-(null==n?void 0:n.top))-(null==a?void 0:a.height)/2,l=(null==i?void 0:i.top)-(null==n?void 0:n.top)-(null==a?void 0:a.height);c>l&&(c=l),r.scrollTop=c,this.closeLoadingStatus()},e.prototype.closeLoadingStatus=function(e){this.isLoading||(this.isLoading=!0,e&&this.closeCatalogLoading.next())},e.prototype.getLastDomNodeRubbish=function(e){var t=e.length;if(t>0)return e[t-1].sn},e.prototype.toggleCatalogShowCtrl=function(){var e=this;this.emitService.emit({type:"wiki:catalog-collpase"}),Object(y.nextTick)(function(){e.emitService.emit({type:"dragge-div-width-change"})})},e.prototype.importWord=function(e){if(this.authAccess.userEditPermission){if(window.hwa("trackStructEvent",{label:"Word\u5bfc\u5165"}),"system"===this.currentCategory.classify)return this.showSelectWorkitem=!0,this.dictionaryId=0,this.wikiSn="",this.designTypeList=["Feature"],void(this.isFeWordImport=!0);this.parentNode=e&&"root"==e?0:this.operateNode.origin.id,this.importWordShow=!0}},e.prototype.closeImportWord=function(e){this.importWordShow=!1,e&&"feImport"===e.import&&(this.workitemList[0].wordContent=e.description,this.showEditWorkitemArticle=!0),this.isFeWordImport=!1},e.prototype.getOperateRoot=function(){this.operateNode.origin={sn:null,title:"",key:""}},e.prototype.toHomePage=function(){this.emitService.emit({eventType:"category::wiki-number-change"}),this.router.navigate(["domains/"+this.currentDomain+"/wiki"])},e.prototype.toCategory=function(e){this.router.navigate(["domains/"+this.currentDomain+"/wiki/"+e.id])},e.prototype.getDomainInfo=function(){var e=this;this.currentDomainChanges=window.communicationService.currentDomain$.subscribe(function(t){t&&(e.currentDomainInfo=t)})},e.prototype.closeHandleFunc=function(e){if(this.showSelectWorkitem=!1,null==e?void 0:e.selectedFutureList){if(this.workitemList=null==e?void 0:e.selectedFutureList,this.isFeWordImport)return this.parentNode=0,void(this.importWordShow=!0);if(null==e?void 0:e.isCopyWiki)return this.isCopyWiki=null==e?void 0:e.isCopyWiki,this.tipInfo.title="SELECT_SOURCE_DOCUMNET",this.tipInfo.detailTitle="SELECT_SOURCE_DOCUMNET",this.tipInfo.detailBottomTip="HAVE_CHOSEN",void(this.modelShowCtrl=!0);this.showEditWorkitemArticle=!0}else this.isFeWordImport=!1,this.isCopyWiki=!1},e.prototype.getSpaceWorkitemAccess=function(){var e=this;this.knowledgeService.getSpaceWorkitemAccess(this.currentDomain).subscribe(function(t){e.spaceSetWorkitemAccess=t.includes("feature")},function(){})},e.prototype.getSpaceNewModelAccess=function(){var e=this;this.knowledgeService.getSpaceNewModelAccess(this.currentDomain).subscribe(function(t){e.spaceNewModelAccess=t.some(function(e){return"planning"===e.service_name&&"on"===e.on_off})},function(){})},e.prototype.rubbishRecycleHandler=function(){this.showEmptyTip=!1,this.rubbishDetailShow=!this.rubbishDetailShow,this.rubbishDetailShow&&this.getRecycle()},e.prototype.renameDirectory=function(){var e=this;this.nodeDraggable=!1,this.operateNode.origin.renaming=!0,this.nodeRenameTitle=this.operateNode.origin.title,setTimeout(function(){var t=e.renameInputEl.nativeElement;t.focus(),t.select()},200)},e.prototype.saveFloderName=function(){var e,t=this;this.nodeDraggable=!0;var n=this.operateNode.origin,i=n.title,o=null===(e=this.nodeRenameTitle)||void 0===e?void 0:e.trim();n.renaming=!1,o&&i!==o&&(this.operateNode.title=o,this.knowledgeService.saveArticle([{id:n.id,title:o}]).subscribe(function(e){var r;if(e.success.length>0)n.title=o,t.notificationService.success(t.translate.instant("SUCCESSFUL_OPERATION"),""),t.knowledgeService.nodeTitleChange(n.sn,o);else{if((null===(r=e.failed)||void 0===r?void 0:r.length)>0){var a=(null==e?void 0:e.failed[0]).code;t.notificationService.error(t.translate.instant(String(a)),""),n.renaming=!0}t.operateNode.title=i}},function(){}))},e.prototype.cancleNodeRename=function(e){this.nodeDraggable=!0,e.origin.renaming=!1},e.prototype.goCategoryPage=function(){this.router.navigate(["domains/"+this.currentDomain+"/wiki/"+this.currentCategory.id])},e.prototype.showMoreFvorite=function(){this.showFvorite=!0,setTimeout(function(){document.querySelectorAll(".favorite-view-page")[0].click()})},e.prototype.closeFavoriteModel=function(e){this.showFvorite=!1},e.prototype.listenNodeEditPermission=function(){var e=this,t=Object(f.a)("articleEditPermission",function(t){e.nodeRenamePermission[t.wikiSn]=t.canEdit});this.onDestory$.subscribe(function(){return t.unListen()})},e.prototype.autoRename=function(e){var t=this.nzTreeComponent.getTreeNodeByKey(e);this.getOperateNode(t),this.renameDirectory()},e.prototype.editPermissions=function(e){var t=this;this.knowledgeService.getArticleDetails(e,"UI","FEATURE_API_DESIGN").subscribe(function(n){t.knowledgeService.articleEditableReport(e,n.data.is_updated)},function(){})},e.prototype.goDetailPage=function(e,t){if(this.newCoe){if(t||!this.nodeDraggable)return;var n=location.origin+"/wiki/"+e;window.open(n,"_blank")}else this.router.navigate([e],{relativeTo:this.activeRoute})},e.\u0275fac=function(t){return new(t||e)(x["\u0275\u0275directiveInject"](w.f),x["\u0275\u0275directiveInject"](w.a),x["\u0275\u0275directiveInject"](C.b),x["\u0275\u0275directiveInject"](C.a),x["\u0275\u0275directiveInject"](_.c),x["\u0275\u0275directiveInject"](x.ChangeDetectorRef),x["\u0275\u0275directiveInject"](O.a),x["\u0275\u0275directiveInject"](S.b),x["\u0275\u0275directiveInject"](E.a),x["\u0275\u0275directiveInject"](b.a),x["\u0275\u0275directiveInject"](C.c),x["\u0275\u0275directiveInject"](x.ChangeDetectorRef))},e.\u0275cmp=x["\u0275\u0275defineComponent"]({type:e,selectors:[["catalog"]],viewQuery:function(e,t){if(1&e&&(x["\u0275\u0275viewQuery"](ne,1),x["\u0275\u0275viewQuery"](ie,1),x["\u0275\u0275viewQuery"](oe,1),x["\u0275\u0275viewQuery"](re,1)),2&e){var n=void 0;x["\u0275\u0275queryRefresh"](n=x["\u0275\u0275loadQuery"]())&&(t.nzTreeComponent=n.first),x["\u0275\u0275queryRefresh"](n=x["\u0275\u0275loadQuery"]())&&(t.currentCategoryElement=n.first),x["\u0275\u0275queryRefresh"](n=x["\u0275\u0275loadQuery"]())&&(t.titleOperate=n.first),x["\u0275\u0275queryRefresh"](n=x["\u0275\u0275loadQuery"]())&&(t.renameInputEl=n.first)}},inputs:{newCoe:"newCoe"},features:[x["\u0275\u0275ProvidersFeature"]([C.b,b.a])],decls:91,vars:95,consts:[["nz-button","","class","plus-btn",4,"ngIf"],[1,"catalog-wrapper"],[1,"right-table-wrapper"],[1,"margin-left-15","m-r-10"],["class","search-input-wrapper position-absolute-static-div","clickElementOutside","",3,"clickOutside",4,"ngIf"],["class","knowledge-category-item current-category","nz-popover","",3,"nzPopoverContent","nzPopoverPlacement","click",4,"ngIf"],["class","knowledge-category-item current-category","nz-popover","",3,"nzPopoverContent","nzPopoverPlacement",4,"ngIf"],["id","scrollParent",1,"scroll-warper"],["id","topPosition",1,"top-position-styl"],[1,"real-catalog-wrapper","position-relative"],[1,"overlay","loading",3,"hidden"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["class","catalog-wrapper-item-tip margin-left-15","style","color: #b7b7b7 !important",4,"ngIf"],["class","category-root-wrapper",4,"ngIf"],["class","catalog-wrapper-item-tip center-styl margin-left-15","style","color: #b7b7b7 !important",4,"ngIf"],["nzShowIcon","","nzBlockNode","","nzAsyncData","",3,"nzData","nzDraggable","nzBeforeDrop","nzExpandedKeys","nzExpandedIcon","nzTreeTemplate","nzClick","nzExpandChange","nzOnDragEnd","nzOnDragEnter"],["nzTreeComponent",""],["multiExpandedIconTpl",""],["nzTreeTemplate1",""],["nzWrapClassName","model-show-ctrl","id","catalog-select-directory",3,"nzVisible","nzClosable","nzFooter","nzWidth","nzVisibleChange"],["style","width: 492px; height: 600px",4,"ngIf"],["nzWrapClassName","modal-confim",3,"nzVisible","nzClosable","nzFooter","nzWidth",4,"ngIf"],[3,"isFeWordImport","sn","parentNode","kanBanId","currentDomain","closeCallback",4,"ngIf"],["class","rubbish-recycle-station",3,"class",4,"ngIf"],["id","bottomPosition",1,"top-position-styl"],[4,"ngIf"],["class","show-hidden-btn",3,"click",4,"ngIf"],["menu1","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","","nz-popover","",3,"nzPopoverContent","nzPopoverPlacement","click"],[1,"i-margin-right10","icon-color","icon-font-size14","fa","fa-file-text-o"],[3,"textContent"],[1,"i-margin-right10","icon-color","icon-font-size13","iconfont","icon-files-close1"],["nz-menu-item","",3,"class","click",4,"ngIf"],["menu2","nzDropdownMenu"],["nz-menu-item","","nz-popover","",3,"class","nzPopoverContent","nzPopoverPlacement","click",4,"ngIf"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-item","",1,"delete-button",3,"click"],[1,"i-margin-right10","icon-color","icon-font-size16","fa","fa-trash-o"],["menu3","nzDropdownMenu"],["nz-menu-item","","nz-popover","",1,"title-menu-item",3,"nzPopoverContent","nzPopoverPlacement","click"],["nz-menu-item","","class","title-menu-item","nz-popover","",3,"not-allowed-styl","nzPopoverContent","nzPopoverPlacement","click",4,"ngIf"],["nz-menu-item","","class","title-menu-item","magazineTips","","storageItemName","readTableGuide",3,"not-allowed-styl","magazineVisible","nzPopoverPlacement","click",4,"ngIf"],["nz-menu-item","","class","title-menu-item","nz-popover","",3,"not-allowed-styl","nzSelected","nzPopoverVisible","nzPopoverContent","nzPopoverPlacement","click",4,"ngIf"],["nz-menu-item","","class","title-menu-item",3,"not-allowed-styl","click",4,"ngIf"],["menu4","nzDropdownMenu"],["nz-menu-item","",1,"title-menu-item",3,"click"],["nz-menu-item","","class","title-menu-item","magazineTips","","storageItemName","readTableGuide",3,"magazineVisible","click",4,"ngIf"],["menuChange",""],["menuFavorite",""],["visibilityEditModel","create-article",3,"model","categoryId","currentDomain","dictionaryId","parentSn","articleDetails","categoryDetails","createFrom",4,"ngIf"],[3,"container","model","categoryId","currentDomain","dictionaryId","parentSn",4,"ngIf"],[3,"showCopyWiki","currentDomain","wikiSn","designTypeList","category","showCopyWikiChange","modelShowCloseChange",4,"ngIf"],[3,"currentDomain","categoryId","dictionaryId","currentDomainInfo","workitemList","hidden","category",4,"ngIf"],["popoverList",""],["nz-button","",1,"plus-btn"],["nz-dropdown","","nzTrigger","click",1,"f-12","iconfont","icon-plus","show-icon",3,"nzDropdownMenu","click","nzVisibleChange"],["clickElementOutside","",1,"search-input-wrapper","position-absolute-static-div",3,"clickOutside"],[1,"input-width-styl"],[3,"customStyle","kanbanId","pageForm"],["nz-dropdown","","nzTrigger","click","nz-popover","","redCircle","","storageItemName","readTableGuide",1,"add-new-article",3,"nzDropdownMenu","nzVisible","nzDisabled","nzPopoverContent","nzPopoverPlacement","redCircleVisible","nzVisibleChange"],[1,"add-article-margin4","iconfont","icon-plus"],["nz-popover","",1,"knowledge-category-item","current-category",3,"nzPopoverContent","nzPopoverPlacement","click"],[1,"home-icon","iconfont","icon-house","home-icon-style"],[1,"domain-title","text-omit"],[1,"main-page"],[3,"title"],[1,"iconfont","icon-icon-crown","rotate-icon"],["nz-popover","",1,"knowledge-category-item","current-category",3,"nzPopoverContent","nzPopoverPlacement"],[1,"favorite-icon-bg","iconfont","icon-xing1","home-icon-style"],[1,"domain-title","text-omit","cursor-pointer",3,"click"],["nz-icon","","nzType","loading",1,"icon-style"],[1,"catalog-wrapper-item-tip","margin-left-15",2,"color","#b7b7b7 !important"],[1,"category-root-wrapper"],[1,"hidden-text-styl","category-directory-left-styl",3,"click"],[1,"iconfont","icon-liebiao","home-icon-style","current-styl"],[1,"real-catalog-wrapper","tree-node-title"],[1,"hidden-right-operate-styl"],["nz-dropdown","","nzTrigger","click","redCircle","","storageItemName","readTableGuide",1,"operate-add-span","icon-color","icon-font-size14","iconfont","icon-plus","title-operate-color",3,"nzDropdownMenu","nzVisible","redCircleVisible","click","nzVisibleChange"],[1,"catalog-wrapper-item-tip","center-styl","margin-left-15",2,"color","#b7b7b7 !important"],["class","icon-box",4,"ngIf"],[1,"icon-box"],["class","custom-node","nz-input","",3,"ngStyle","placeholder","ngModel","blur","keydown.enter","keydown.esc","ngModelChange",4,"ngIf"],["class","custom-node",3,"operate-span-styl","active-span-styl","cursor-pointer-styl","title","draggable",4,"ngIf"],["nz-input","",1,"custom-node",3,"ngStyle","placeholder","ngModel","blur","keydown.enter","keydown.esc","ngModelChange"],["renameInput",""],[1,"custom-node",3,"title"],[1,"hidden-text-operate",3,"ngStyle"],["class","category-directory-wrapper",4,"ngIf"],["class","category-document-wrapper",4,"ngIf"],[1,"category-directory-wrapper"],[1,"hidden-text-styl","category-directory-left"],["class","icon-article-color icon-font-size14 iconfont",3,"search-active-styl","active-icon-styl-color","class",4,"ngIf"],["draggable","",1,"margin-left-span-10"],["class","iconfont icon-stamper lock-icon-styl","style","color: #f8ac59;",3,"title",4,"ngIf"],["class","iconfont icon-lock lock-icon-styl",4,"ngIf"],["class","hidden-right-operate category-directory-right",4,"ngIf"],[1,"icon-article-color","icon-font-size14","iconfont"],[1,"iconfont","icon-stamper","lock-icon-styl",2,"color","#f8ac59",3,"title"],[1,"iconfont","icon-lock","lock-icon-styl"],[1,"hidden-right-operate","category-directory-right"],["nz-dropdown","","nzTrigger","click",1,"operate-more-span","icon-color","icon-font-size14","iconfont","icon-more",3,"nzDropdownMenu","click","nzVisibleChange"],["nz-dropdown","","nzTrigger","click",1,"operate-add-span","icon-color","icon-font-size14","iconfont","icon-plus",3,"nzDropdownMenu","click","nzVisibleChange"],[1,"icon-font-size13","icon-color"],[1,"margin-left-span-10"],[1,"category-document-wrapper"],[1,"hidden-text-styl","category-document-left"],["class","icon-article-color icon-font-size14 iconfont",3,"search-active-styl","active-icon-styl-color","icon-article","icon-table","icon-page-mark",4,"ngIf"],["draggable","",1,"tree-node-leaf","margin-left-span-10"],["class","hidden-right-operate category-document-right",4,"ngIf"],[1,"hidden-right-operate","category-document-right"],["nz-dropdown","","nzTrigger","click",1,"operate-add-span","icon-color","icon-font-size14","iconfont","icon-more",3,"nzDropdownMenu","click","nzVisibleChange"],[2,"width","492px","height","600px"],[1,"modal-position-relative",3,"currentDomain","currentCategory","disabledNode","tipInfo","importDocument","modelShowCloseChange","modelShowVariableChange"],["nzWrapClassName","modal-confim",3,"nzVisible","nzClosable","nzFooter","nzWidth"],[1,"modal-styl"],[1,"modal-confirm-content"],[1,"fa","fa-times-circle-o","modal-error-icon",2,"color","#ff4d4f"],[1,"modal-right-title"],[1,"content-tip-styl",3,"textContent"],[1,"footer-btns-container"],[1,"btn-confirm","left-another",3,"textContent","click"],[1,"btn-confirm","right-another",3,"textContent","click"],[3,"isFeWordImport","sn","parentNode","kanBanId","currentDomain","closeCallback"],[1,"rubbish-recycle-station"],[1,"catalog-wrapper-title","pointer-cursor",3,"click"],[1,"iconfont","icon-trash-fill","home-icon-style"],[1,"tree-node-title","m-l-12",3,"textContent"],[1,"title-oprate-span"],[1,"iconfont","icon-icon-crown","icon-font-size14"],["class","catalog-wrapper-item-tip margin-left-15 rubbish-tip","style","color: #b7b7b7 !important",4,"ngIf"],[1,"rubbish-list","slimScrollBar"],[3,"hidden","nzData","nzExpandedKeys","nzTreeTemplate","nzClick"],["nzTreeTemplate",""],[1,"padding-bottom-div"],[1,"catalog-wrapper-item-tip","margin-left-15","rubbish-tip",2,"color","#b7b7b7 !important"],["class","custom-node",3,"active-span-styl","cursor-pointer-styl","title",4,"ngIf"],["class","icon-article-color icon-font-size14 iconfont icon-article",3,"search-active-styl","active-icon-styl-color",4,"ngIf"],[1,"icon-article-color","icon-font-size14","iconfont","icon-article"],[3,"model","closeFavoriteModel"],[1,"show-hidden-btn",3,"click"],[1,"hidden-show-icon","pointer-cursor","fa","fa-angle-double-left"],["nz-menu-item","",3,"click"],[1,"i-margin-right10","iconfont","icon-word","icon-word-color"],[1,"icon-gruop-margin","icon-color","icon-font-size14","fa","fa-file-text-o"],["nz-menu-item","","nz-popover","","nz-menu-item","",3,"class","nzSelected","nzPopoverVisible","nzPopoverContent","nzPopoverPlacement","click","nzPopoverVisibleChange",4,"ngIf"],["nz-menu-item","","nz-popover","","nz-menu-item","",3,"nzSelected","nzPopoverVisible","nzPopoverContent","nzPopoverPlacement","click","nzPopoverVisibleChange"],[1,"i-margin-right10","iconfont","icon-table","icon-font-size14"],[1,"i-margin-right10","icon-color","icon-font-size16","fa","fa-arrow-circle-o-right"],[1,"icon-gruop-margin","iconfont","icon-font-size15","fa","icon-lock"],[1,"icon-gruop-margin","icon-color","icon-font-size14","iconfont","icon-edit"],["nz-menu-item","","magazineTips","","storageItemName","readTableGuide",1,"title-menu-item",3,"magazineVisible","nzPopoverPlacement","click"],["nz-menu-item","","nz-popover","",1,"title-menu-item",3,"nzSelected","nzPopoverVisible","nzPopoverContent","nzPopoverPlacement","click"],["nz-menu-item","","magazineTips","","storageItemName","readTableGuide",1,"title-menu-item",3,"magazineVisible","click"],[1,"category-select-menu"],[4,"ngFor","ngForOf"],[1,"knowledge-category-item","dropdown-item",3,"click"],[1,"category-item-img-wrapper"],[3,"src"],[1,"category-item-desc"],[1,"category-item-title","dropdown-category-item-title"],[1,"favorite-tip-box"],[3,"pageFrom"],["visibilityEditModel","create-article",3,"model","categoryId","currentDomain","dictionaryId","parentSn","articleDetails","categoryDetails","createFrom"],[3,"container","model","categoryId","currentDomain","dictionaryId","parentSn"],["id","new-luckysheet",1,"luckysheet-container"],[3,"showCopyWiki","currentDomain","wikiSn","designTypeList","category","showCopyWikiChange","modelShowCloseChange"],[3,"currentDomain","categoryId","dictionaryId","currentDomainInfo","workitemList","hidden","category"],["nzWrapClassName","access-control-modal","nzCalssName","modal-styl",3,"nzVisible","nzClosable","nzFooter","nzWidth","nzVisibleChange"],[2,"width","600px","height","100%"],[3,"articleDetails","closeCallback"],[1,"menu-popover-list"],[1,"menu-popover-content"],["nz-button","","nzType","primary",1,"menu-popover-help",3,"click"],["nz-button","","nzType","primary",1,"menu-popover-submit",3,"click"]],template:function(e,t){if(1&e&&(x["\u0275\u0275template"](0,ae,2,1,"button",0),x["\u0275\u0275elementStart"](1,"div",1),x["\u0275\u0275elementStart"](2,"div",2),x["\u0275\u0275elementStart"](3,"div",3),x["\u0275\u0275template"](4,se,6,17,"div",4),x["\u0275\u0275template"](5,de,9,7,"div",5),x["\u0275\u0275template"](6,pe,7,5,"div",6),x["\u0275\u0275elementStart"](7,"div",7),x["\u0275\u0275element"](8,"div",8),x["\u0275\u0275elementStart"](9,"div",9),x["\u0275\u0275elementStart"](10,"div",10),x["\u0275\u0275template"](11,ue,1,0,"ng-template",null,11,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275element"](13,"nz-spin",12),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](14,me,3,3,"div",13),x["\u0275\u0275template"](15,he,7,5,"div",14),x["\u0275\u0275template"](16,ge,3,3,"div",15),x["\u0275\u0275elementStart"](17,"nz-tree",16,17),x["\u0275\u0275listener"]("nzClick",function(e){return t.nzClickEvent(e)})("nzExpandChange",function(e){return t.getChildrenTreeNode(e.node)})("nzOnDragEnd",function(e){return t.afterDrop(e)})("nzOnDragEnter",function(e){return t.getChildrenTreeNode(e.node)}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](19,Ce,1,1,"ng-template",null,18,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275template"](21,Le,2,2,"ng-template",null,19,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275elementStart"](23,"nz-modal",20),x["\u0275\u0275listener"]("nzVisibleChange",function(e){return t.modelShowCtrl=e}),x["\u0275\u0275template"](24,je,2,7,"div",21),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](25,Ve,14,17,"nz-modal",22),x["\u0275\u0275template"](26,Fe,1,5,"import-word-drag",23),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](27,Ke,14,12,"div",24),x["\u0275\u0275element"](28,"div",25),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](29,Xe,2,1,"ng-container",26),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](30,Ye,2,0,"div",27),x["\u0275\u0275elementStart"](31,"nz-dropdown-menu",null,28),x["\u0275\u0275elementStart"](33,"ul",29),x["\u0275\u0275elementStart"](34,"li",30),x["\u0275\u0275listener"]("click",function(e){return"system"===(null==t.currentCategory?null:t.currentCategory.classify)?t.quickCreateArticle(e,!0):t.createArticle()}),x["\u0275\u0275pipe"](35,"translate"),x["\u0275\u0275element"](36,"i",31),x["\u0275\u0275element"](37,"span",32),x["\u0275\u0275pipe"](38,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](39,"li",30),x["\u0275\u0275listener"]("click",function(){return t.createFloder()}),x["\u0275\u0275pipe"](40,"translate"),x["\u0275\u0275element"](41,"i",33),x["\u0275\u0275element"](42,"span",32),x["\u0275\u0275pipe"](43,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](44,Qe,4,5,"li",34),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](45,"nz-dropdown-menu",null,35),x["\u0275\u0275elementStart"](47,"ul",29),x["\u0275\u0275template"](48,Je,5,12,"li",36),x["\u0275\u0275template"](49,et,2,1,"div",26),x["\u0275\u0275template"](50,nt,2,1,"div",26),x["\u0275\u0275template"](51,it,5,12,"li",36),x["\u0275\u0275template"](52,ot,4,5,"li",34),x["\u0275\u0275template"](53,rt,4,3,"li",37),x["\u0275\u0275template"](54,at,4,3,"li",37),x["\u0275\u0275template"](55,ct,4,5,"li",34),x["\u0275\u0275elementStart"](56,"li",38),x["\u0275\u0275listener"]("click",function(){return t.removeFunc()}),x["\u0275\u0275element"](57,"i",39),x["\u0275\u0275element"](58,"span",32),x["\u0275\u0275pipe"](59,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](60,"nz-dropdown-menu",null,40),x["\u0275\u0275elementStart"](62,"ul",29),x["\u0275\u0275elementStart"](63,"li",41),x["\u0275\u0275listener"]("click",function(e){return["system","PRD"].includes(null==t.currentCategory?null:t.currentCategory.classify)?t.quickCreateArticle(e):t.titleCreateArticle()}),x["\u0275\u0275pipe"](64,"translate"),x["\u0275\u0275element"](65,"i",31),x["\u0275\u0275element"](66,"span",32),x["\u0275\u0275pipe"](67,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](68,lt,5,12,"li",42),x["\u0275\u0275template"](69,st,4,8,"li",43),x["\u0275\u0275template"](70,dt,4,9,"li",44),x["\u0275\u0275template"](71,pt,4,5,"li",45),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](72,"nz-dropdown-menu",null,46),x["\u0275\u0275elementStart"](74,"ul",29),x["\u0275\u0275elementStart"](75,"li",47),x["\u0275\u0275listener"]("click",function(e){return t.quickCreateArticle(e)}),x["\u0275\u0275element"](76,"i",31),x["\u0275\u0275element"](77,"span",32),x["\u0275\u0275pipe"](78,"translate"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](79,ut,4,5,"li",48),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](80,ht,2,1,"ng-template",null,49,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275template"](82,gt,2,1,"ng-template",null,50,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275template"](84,ft,1,8,"app-article-create",51),x["\u0275\u0275template"](85,vt,2,6,"app-excel-create",52),x["\u0275\u0275template"](86,bt,1,5,"create-workitem-article",53),x["\u0275\u0275template"](87,Ct,1,7,"workitem-article-edit",54),x["\u0275\u0275template"](88,yt,4,5,"div",26),x["\u0275\u0275template"](89,xt,10,9,"ng-template",null,55,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275elementEnd"]()),2&e){var n=x["\u0275\u0275reference"](12),i=x["\u0275\u0275reference"](20),o=x["\u0275\u0275reference"](22);x["\u0275\u0275property"]("ngIf",t.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275classMap"](t.isExistsCatalogData||t.isHideLeftCategory?"catelog-no-exists":""),x["\u0275\u0275advance"](1),x["\u0275\u0275classProp"]("new-coe-tree",t.newCoe),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",!t.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!t.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!t.newCoe),x["\u0275\u0275advance"](4),x["\u0275\u0275property"]("hidden",t.isLoading),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("nzIndicator",n),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",""!=t.searchVal.trim()&&t.realCatalogArr.length<=0),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!t.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",""==t.searchVal.trim()&&t.realCatalogArr.length<=0),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("nzData",t.realCatalogArr)("nzDraggable",t.nodeDraggable)("nzBeforeDrop",t.beforeDrop)("nzExpandedKeys",t.defaultExpandedKeys)("nzExpandedIcon",t.newCoe&&i)("nzTreeTemplate",o),x["\u0275\u0275advance"](6),x["\u0275\u0275property"]("nzVisible",t.modelShowCtrl)("nzClosable",!1)("nzFooter",null)("nzWidth",492),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.modelShowCtrl),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.removeModalCtrl),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.importWordShow),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!t.newCoe),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",t.showFvorite),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.realCatalogArrBack&&!t.newCoe),x["\u0275\u0275advance"](4),x["\u0275\u0275classMap"](t.authAccess&&t.authAccess.userEditPermission&&t.createArticleAccess?"dropdown-override-li-styl":"not-allowed-styl"),x["\u0275\u0275property"]("nzPopoverContent",t.createArticleAccess?"":x["\u0275\u0275pipeBind2"](35,67,"WORKITEM_ARTICLE_ACCESS_TIP",x["\u0275\u0275pureFunction1"](86,ce,t.employeeUser)))("nzPopoverPlacement","right"),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](38,70,"NEW_ARTICLE")),x["\u0275\u0275advance"](2),x["\u0275\u0275classMap"](t.authAccess&&t.authAccess.userEditPermission&&t.createArticleAccess?"dropdown-override-li-styl":"not-allowed-styl"),x["\u0275\u0275property"]("nzPopoverContent",t.createArticleAccess?"":x["\u0275\u0275pipeBind2"](40,72,"WORKITEM_ARTICLE_ACCESS_TIP",x["\u0275\u0275pureFunction1"](88,ce,t.employeeUser)))("nzPopoverPlacement","right"),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](43,75,"NEW_FOLDER")),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf","system"!==t.currentCategory.classify&&!t.newCoe),x["\u0275\u0275advance"](4),x["\u0275\u0275property"]("ngIf","story"!==(null==t.operateNode||null==t.operateNode.origin?null:t.operateNode.origin.classify)),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!t.needGuide.articlesGroup),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.needGuide.articlesGroup),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf","story"!==(null==t.operateNode||null==t.operateNode.origin?null:t.operateNode.origin.classify)&&"feature"!==(null==t.operateNode||null==t.operateNode.origin?null:t.operateNode.origin.classify)&&!x["\u0275\u0275pureFunction0"](90,le).includes(null==t.currentCategory?null:t.currentCategory.classify)&&t.isShowTable&&!t.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!t.unMovableNode),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.operateNode.origin.is_chg_visibility&&!t.isShareWiki),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.nodeRenamePermission[null==t.operateNode||null==t.operateNode.origin?null:t.operateNode.origin.sn]),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf","system"!==t.currentCategory.classify&&"table"!==(null==t.activedNode?null:t.activedNode.origin.category)&&!t.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275classMap"](t.operateNode&&t.operateNode.origin&&t.operateNode.origin.is_deleted&&"CIM"!==t.operateNode.origin.source_system?"dropdown-override-li-styl":"not-allowed-styl"),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](59,77,"COMMON_BUTTON_DELETE")),x["\u0275\u0275advance"](5),x["\u0275\u0275classProp"]("not-allowed-styl",!(t.authAccess&&t.authAccess.userEditPermission&&t.createArticleAccess)),x["\u0275\u0275property"]("nzPopoverContent",t.createArticleAccess?"":x["\u0275\u0275pipeBind2"](64,79,"WORKITEM_ARTICLE_ACCESS_TIP",x["\u0275\u0275pureFunction1"](91,ce,t.employeeUser)))("nzPopoverPlacement","right"),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](67,82,"NEW_ARTICLE")),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",!t.needGuide.articlesGroup),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!x["\u0275\u0275pureFunction0"](93,le).includes(null==t.currentCategory?null:t.currentCategory.classify)&&t.isShowTable&&!t.newCoe),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.needGuide.articlesGroup),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!t.newCoe),x["\u0275\u0275advance"](6),x["\u0275\u0275property"]("textContent",x["\u0275\u0275pipeBind1"](78,84,"NEW_ARTICLE")),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",!x["\u0275\u0275pureFunction0"](94,le).includes(null==t.currentCategory?null:t.currentCategory.classify)&&t.isShowTable&&!t.newCoe),x["\u0275\u0275advance"](5),x["\u0275\u0275property"]("ngIf",t.newArticleMod),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.newExcelMod),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.showSelectWorkitem),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.showEditWorkitemArticle),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.accessControlShow)}},directives:[M.n,P.a,I.a,k.a,T.d,D.c,D.e,A.a,T.b,z.a,R.a,L.b,N.a,j.b,V.d,M.o,V.k,V.l,F.a,B.a,U.a,L.a,M.m,W.a,H.a,Z,ee.a,te.a],pipes:[_.b],styles:['.catalog-wrapper[_ngcontent-%COMP%]{position:relative;height:100%}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;border-right:1px solid #e5e5e5;padding-right:3px}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{padding-left:16px;padding-top:16px;display:flex;position:relative;align-items:center;padding-bottom:16px;overflow-x:visible}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .input-width-styl[_ngcontent-%COMP%]{width:calc(100% - 55px);display:inline-block}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .input-search-icon[_ngcontent-%COMP%]{position:absolute;left:28px;color:#999}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .input-clear-icon[_ngcontent-%COMP%]{position:absolute;right:64px;font-size:18px;color:#333}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{outline:none;width:calc(100% - 55px);height:26px;font-size:14px;padding-left:33px;padding-right:30px;border-radius:13px;line-height:26px;border:1px solid #d7d7d7}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .add-new-article[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:25px;height:25px;position:absolute;right:5px;top:15px;background:#23c6c8;line-height:17px;font-size:24px;color:#fff;border-radius:50%}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .add-new-article[_ngcontent-%COMP%]   .add-article-margin4[_ngcontent-%COMP%]{margin-left:0;font-size:10px}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .not-allowed-class[_ngcontent-%COMP%]:hover{cursor:not-allowed}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .margin-left-15[_ngcontent-%COMP%]{height:calc(100% - 25px);-ms-overflow-style:none;overflow-x:visible;overflow-y:scroll;padding-left:2px}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .margin-left-15[_ngcontent-%COMP%]   .top-position-styl[_ngcontent-%COMP%]{width:100%;height:1px;background:#fff}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .margin-left-15[_ngcontent-%COMP%]   .position-absolute-static-div[_ngcontent-%COMP%]{overflow-x:visible}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .margin-left-15[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .scroll-warper[_ngcontent-%COMP%]{max-height:calc(100% - 170px);overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none}.catalog-wrapper[_ngcontent-%COMP%]   .right-table-wrapper[_ngcontent-%COMP%]   .scroll-warper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.catalog-wrapper[_ngcontent-%COMP%]   .new-coe-tree[_ngcontent-%COMP%]{border:0}.catalog-wrapper[_ngcontent-%COMP%]   .new-coe-tree[_ngcontent-%COMP%]   .margin-left-15[_ngcontent-%COMP%]{height:100%}.catalog-wrapper[_ngcontent-%COMP%]   .new-coe-tree[_ngcontent-%COMP%]   .margin-left-15[_ngcontent-%COMP%]   .scroll-warper[_ngcontent-%COMP%]{max-height:100%}.catalog-wrapper[_ngcontent-%COMP%]   .show-hidden-btn[_ngcontent-%COMP%]{position:absolute;top:13px;right:-22px;width:22px;z-index:2;height:35px;line-height:28px;border-top-right-radius:8px;border-bottom-right-radius:8px;background:#fff;border-right:1px solid #e5e5e5;border-top:1px solid #e5e5e5;border-bottom:1px solid #e5e5e5;box-shadow:0 0 6px rgba(0,0,0,.08)}.catalog-wrapper[_ngcontent-%COMP%]   .show-catalog[_ngcontent-%COMP%]{background:red}.catalog-wrapper[_ngcontent-%COMP%]   .hidden-catalog[_ngcontent-%COMP%]{background:green}.catelog-no-exists[_ngcontent-%COMP%]{display:none}  .access-control-modal .ant-modal-body{padding:0!important}.other-click[_ngcontent-%COMP%]{position:relative}.other-click.other-click[_ngcontent-%COMP%]:hover.other-click.other-click:hover:before{width:1000px;background:rgba(35,198,200,.102);position:absolute;content:"";right:0;bottom:-2px;height:36px;z-index:-1}.other-click.other-click[_ngcontent-%COMP%]:hover.other-click.other-click:hover:after{width:1000px;background:rgba(35,198,200,.102);position:absolute;content:"";right:-1000px;bottom:-2px;height:36px;z-index:-1}.other-click[_ngcontent-%COMP%]:before{right:0}.other-click[_ngcontent-%COMP%]:after, .other-click[_ngcontent-%COMP%]:before{width:1000px;background:rgba(35,198,200,.102);position:absolute;content:"";bottom:-2px;height:36px;z-index:-2}.other-click[_ngcontent-%COMP%]:after{right:-1000px}.catalog-wrapper-title[_ngcontent-%COMP%]{padding-left:18px;line-height:30px;height:30px}.catalog-wrapper-title[_ngcontent-%COMP%]:hover{background:#f2f2f2}.catalog-wrapper-title[_ngcontent-%COMP%]   .title-margin10[_ngcontent-%COMP%]{margin-left:10px}.catalog-wrapper-title[_ngcontent-%COMP%]   .title-oprate-span[_ngcontent-%COMP%]{margin-right:22px;float:right;font-size:14px;color:#333;transform:rotate(180deg)}.catalog-wrapper-title[_ngcontent-%COMP%]   .chevron-down[_ngcontent-%COMP%]{transform:rotate(1turn)}.rubbish-list[_ngcontent-%COMP%]{position:relative;top:10px;left:16px;width:94%;max-height:250px;overflow-y:auto;overflow-x:hidden}.rubbish-left-style[_ngcontent-%COMP%]{left:24px}.rubbish-style[_ngcontent-%COMP%]{left:0}.rubbish-tip[_ngcontent-%COMP%]{display:flex;justify-content:center}.catalog-wrapper-item[_ngcontent-%COMP%], .catalog-wrapper-item-tip[_ngcontent-%COMP%]{margin-top:7px;display:flex;height:30px;align-items:center;margin-left:5px;position:relative;color:#676a6c!important;width:calc(100% - 15px)}.catalog-wrapper-item[_ngcontent-%COMP%]   .item-margin15[_ngcontent-%COMP%], .catalog-wrapper-item-tip[_ngcontent-%COMP%]   .item-margin15[_ngcontent-%COMP%]{padding-left:22px}.catalog-wrapper-item[_ngcontent-%COMP%]   .item-margin10[_ngcontent-%COMP%], .catalog-wrapper-item-tip[_ngcontent-%COMP%]   .item-margin10[_ngcontent-%COMP%]{margin-left:10px}.center-styl[_ngcontent-%COMP%]{display:block;text-align:center}.overfolw-eclipis[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.catalog-wrapper-item[_ngcontent-%COMP%]:hover{position:relative}.catalog-wrapper-item[_ngcontent-%COMP%]:hover.catalog-wrapper-item:hover:before{width:1000px;background:#f2f2f2;position:absolute;content:"";right:0;bottom:-2px;height:36px;z-index:-1}.catalog-wrapper-item[_ngcontent-%COMP%]:hover.catalog-wrapper-item:hover:after{width:1000px;background:#f2f2f2;position:absolute;content:"";right:-1000px;bottom:-2px;height:36px;z-index:-1}.padding-bottom-div[_ngcontent-%COMP%]{height:60px}#catalogWIKIRootNode[_ngcontent-%COMP%]{position:relative;right:26px;height:29px;background:#fff;display:inline-block;padding-left:19px}#catalogWIKIRootNode[_ngcontent-%COMP%]   .hidden-right-operate-styl[_ngcontent-%COMP%]{right:18px;height:20px}#catalogWIKIRootNode[_ngcontent-%COMP%]   .hidden-text-operate[_ngcontent-%COMP%]{width:100%!important}.category-root-wrapper[_ngcontent-%COMP%]{width:100%!important;display:flex;padding:10px 9px 10px 8px;height:34px;align-items:center;margin-bottom:6px}.category-root-wrapper[_ngcontent-%COMP%]:hover{background:#f2f2f2}[_nghost-%COMP%]     .ant-tree{overflow:hidden}.ant-tree-switcher[_ngcontent-%COMP%]   .ant-select-tree-switcher-icon[_ngcontent-%COMP%], [_nghost-%COMP%]     .ant-tree-switcher .ant-tree-switcher-icon{font-size:12px}[_nghost-%COMP%]     .ant-tree li{padding:6px 0 0;position:relative}[_nghost-%COMP%]     .ant-tree ul{padding-left:16px}[_nghost-%COMP%]     .ant-tree-treenode .ant-tree-switcher{color:#999;z-index:1}[_nghost-%COMP%]     .ant-tree-node-content-wrapper{flex:1;border:0;overflow:hidden}[_nghost-%COMP%]     .ant-tree .ant-tree-node-content-wrapper.ant-tree-node-selected, [_nghost-%COMP%]     .ant-tree .ant-tree-node-content-wrapper:hover{background:transparent}.margin-left-span-10[_ngcontent-%COMP%]{margin-left:10px}.margin-left-span-22[_ngcontent-%COMP%]{margin-left:22px}.position-absolute-title[_ngcontent-%COMP%]{position:absolute;top:6px;bottom:0;right:50px;height:24px}.m-l-0[_ngcontent-%COMP%]{margin-left:0}.cursor-default-styl[_ngcontent-%COMP%]{cursor:default}.cursor-pointer-styl[_ngcontent-%COMP%]{cursor:pointer}.real-icon-size[_ngcontent-%COMP%]{width:14px!important;height:14px!important}.tree-node-title[_ngcontent-%COMP%]{color:#333;font-size:14px}.tree-node-leaf[_ngcontent-%COMP%]{color:#676a6c}  .ant-input:hover{border-color:#23c6c8;box-shadow:none}  .ant-input{border-color:#23c6c8!important;box-shadow:none}.custom-node[_ngcontent-%COMP%]{line-height:24px;margin-left:4px;display:inline-block;position:relative;width:100%}.custom-node[_ngcontent-%COMP%]   .category-directory-left-styl[_ngcontent-%COMP%]{width:calc(100% - 60px);margin-left:10px}.custom-node[_ngcontent-%COMP%]   .hidden-right-operate-styl[_ngcontent-%COMP%]{right:-24px;position:absolute;top:0;bottom:0;height:24px;line-height:24px;width:58px;display:inline-block}.custom-node[_ngcontent-%COMP%]   .hidden-right-operate-styl[_ngcontent-%COMP%]   .operate-add-span[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:5px;top:0;bottom:0}.custom-node.custom-node[_ngcontent-%COMP%]:hover   .hidden-right-operate[_ngcontent-%COMP%]{right:0}.custom-node.custom-node[_ngcontent-%COMP%]:hover   .category-directory-wrapper[_ngcontent-%COMP%]   .category-directory-left[_ngcontent-%COMP%]{width:calc(100% - 60px)}.custom-node.custom-node[_ngcontent-%COMP%]:hover   .category-document-wrapper[_ngcontent-%COMP%]   .category-document-left[_ngcontent-%COMP%]{width:calc(100% - 30px)}.custom-node.custom-node[_ngcontent-%COMP%]:hover.custom-node.custom-node:hover:before{width:1000px;background:#f2f2f2;position:absolute;content:"";right:0;bottom:3px;height:36px}.custom-node.custom-node[_ngcontent-%COMP%]:hover.custom-node.custom-node:hover:after{width:1000px;background:#f2f2f2;position:absolute;content:"";right:-1000px;bottom:3px;height:36px}.custom-node.custom-node[_ngcontent-%COMP%]:hover   .lock-icon-styl[_ngcontent-%COMP%]{display:none}.custom-node[_ngcontent-%COMP%]   .lock-icon-styl[_ngcontent-%COMP%]{font-size:16px;color:#999;position:relative;top:-6px}.icon-article-color[_ngcontent-%COMP%]{color:#5f5f5f}.hidden-text-styl-with-lock[_ngcontent-%COMP%]{width:calc(100% - 20px)!important}.hidden-text-styl[_ngcontent-%COMP%]{width:100%;display:inline-block;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.hidden-text-operate[_ngcontent-%COMP%]{overflow:hidden;height:24px;padding:0;line-height:24px;display:inline-block;position:relative}.hidden-text-operate[_ngcontent-%COMP%]   .category-directory-right[_ngcontent-%COMP%]{width:58px;right:-60px}.hidden-text-operate[_ngcontent-%COMP%]   .category-document-right[_ngcontent-%COMP%]{width:28px;right:-30px}.hidden-text-operate[_ngcontent-%COMP%]   .hidden-right-operate[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;height:24px;line-height:24px;display:inline-block}.hidden-text-operate[_ngcontent-%COMP%]   .hidden-right-operate[_ngcontent-%COMP%]   .operate-more-span[_ngcontent-%COMP%]{position:absolute;right:35px;top:0;bottom:0;cursor:pointer}.hidden-text-operate[_ngcontent-%COMP%]   .hidden-right-operate[_ngcontent-%COMP%]   .operate-add-span[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:5px;top:0;bottom:0}.active-span-styl[_ngcontent-%COMP%]{color:#333;position:relative}.active-span-styl.active-span-styl[_ngcontent-%COMP%]:hover   .hidden-right-operate[_ngcontent-%COMP%]{right:0}.active-span-styl.active-span-styl[_ngcontent-%COMP%]:hover   .category-directory-wrapper[_ngcontent-%COMP%]   .category-directory-left[_ngcontent-%COMP%]{width:calc(100% - 60px)}.active-span-styl.active-span-styl[_ngcontent-%COMP%]:hover   .category-document-wrapper[_ngcontent-%COMP%]   .category-document-left[_ngcontent-%COMP%]{width:calc(100% - 30px)}.active-span-styl.active-span-styl[_ngcontent-%COMP%]:hover.active-span-styl.active-span-styl:hover:before{width:1000px;background:rgba(35,198,200,.102);position:absolute;content:"";right:0;bottom:3px;height:36px;opacity:1}.active-span-styl.active-span-styl[_ngcontent-%COMP%]:hover.active-span-styl.active-span-styl:hover:after{width:1000px;background:rgba(35,198,200,.102);position:absolute;content:"";right:-1000px;bottom:3px;height:36px;opacity:1}.active-span-styl[_ngcontent-%COMP%]:before{right:0}.active-span-styl[_ngcontent-%COMP%]:after, .active-span-styl[_ngcontent-%COMP%]:before{width:1000px;background:rgba(35,198,200,.102);position:absolute;content:"";bottom:3px;height:36px;opacity:1}.active-span-styl[_ngcontent-%COMP%]:after{right:-1000px}.operate-span-styl[_ngcontent-%COMP%]{color:#333;position:relative}.operate-span-styl[_ngcontent-%COMP%]:before{right:0}.operate-span-styl[_ngcontent-%COMP%]:after, .operate-span-styl[_ngcontent-%COMP%]:before{width:1000px;background:#f2f2f2;position:absolute;content:"";bottom:3px;height:36px;z-index:-10;opacity:1}.operate-span-styl[_ngcontent-%COMP%]:after{right:-1000px}.i-margin-right10[_ngcontent-%COMP%]{margin-right:10px}.icon-edit-margin[_ngcontent-%COMP%]{margin:0 8px 0 6px}.icon-gruop-margin[_ngcontent-%COMP%]{margin:0 8px}.delete-button[_ngcontent-%COMP%]{border-top:1px solid #dedede}.rubbish-recycle-station[_ngcontent-%COMP%]{width:272px;position:fixed;bottom:-45px;background-color:#fff;z-index:5;overflow:hidden}.rubbish-recycle-station[_ngcontent-%COMP%]   .rubbish-recycle-container[_ngcontent-%COMP%]{height:30px;display:flex;align-items:center;position:relative}.rubbish-recycle-station[_ngcontent-%COMP%]   .rubbish-recycle-container[_ngcontent-%COMP%]   .margin-left-rubbish[_ngcontent-%COMP%]{margin-left:10px;margin-bottom:3px}.rubbish-recycle-station[_ngcontent-%COMP%]   .rubbish-recycle-container[_ngcontent-%COMP%]   .position-rubbish-icon[_ngcontent-%COMP%]{position:absolute;top:2px;right:0}.rubbish-recycle-station[_ngcontent-%COMP%]   .rubbish-recycle-container[_ngcontent-%COMP%]   .translate-bottom5[_ngcontent-%COMP%]{transform:translateY(1px)}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e8e8e8}.tree-padding-left30[_ngcontent-%COMP%]{margin-left:30px}.pointer-cursor[_ngcontent-%COMP%]{cursor:pointer}.hidden-show-icon[_ngcontent-%COMP%]{color:#999;font-size:18px;margin-left:4px;margin-top:7px}.icon-color[_ngcontent-%COMP%]{color:#999}.icon-word-color[_ngcontent-%COMP%]{color:#999;font-size:16px;margin-left:-2px;margin-top:1px}.icon-font-size14[_ngcontent-%COMP%]{font-size:14px}.icon-font-size15[_ngcontent-%COMP%]{font-size:15px}.icon-font-size16[_ngcontent-%COMP%]{font-size:16px}.active-icon-styl-color[_ngcontent-%COMP%]{color:#23c6c8}.icon-font-size12[_ngcontent-%COMP%]{font-size:12px}.icon-font-size13[_ngcontent-%COMP%]{font-size:13px}.dropdown-override-li-styl[_ngcontent-%COMP%]{padding:6px 20px}.dropdown-override-li-styl.dropdown-override-li-styl[_ngcontent-%COMP%]:hover{background:#f2f2f2}.not-allowed-styl[_ngcontent-%COMP%]{padding:6px 20px}.not-allowed-styl.not-allowed-styl[_ngcontent-%COMP%]:hover{background:#f2f2f2;cursor:not-allowed}.not-allowed-sty2[_ngcontent-%COMP%]{padding:5px 12px}.not-allowed-sty2.not-allowed-sty2[_ngcontent-%COMP%]:hover{background:#f2f2f2;cursor:not-allowed}.search-active-styl[_ngcontent-%COMP%]{color:#23c6c8}.modal-styl[_ngcontent-%COMP%]   .modal-confirm-content[_ngcontent-%COMP%]{margin:0;padding:0}.modal-styl[_ngcontent-%COMP%]   .modal-confirm-content[_ngcontent-%COMP%]   .modal-error-icon[_ngcontent-%COMP%]{float:left;margin-right:16px;font-size:22px}.modal-styl[_ngcontent-%COMP%]   .modal-confirm-content[_ngcontent-%COMP%]   .modal-right-title[_ngcontent-%COMP%]{display:block;overflow:hidden;color:rgba(0,0,0,.85);font-weight:500;font-size:16px;line-height:1.4}.modal-styl[_ngcontent-%COMP%]   .modal-confirm-content[_ngcontent-%COMP%]   .content-tip-styl[_ngcontent-%COMP%]{margin-top:8px;color:rgba(0,0,0,.65);font-size:14px;margin-left:38px}.modal-styl[_ngcontent-%COMP%]   .footer-btns-container[_ngcontent-%COMP%]{margin-top:24px;padding-bottom:32px;position:relative}.modal-styl[_ngcontent-%COMP%]   .footer-btns-container[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]{text-shadow:0 -1px 0 rgba(0,0,0,.12);box-shadow:0 2px 0 rgba(0,0,0,.045);line-height:1.5715;display:inline-block;font-weight:400;white-space:nowrap;text-align:center;background-image:none;box-shadow:0 2px 0 rgba(0,0,0,.015);cursor:pointer;transition:all .3s cubic-bezier(.645,.045,.355,1);-webkit-user-select:none;-moz-user-select:none;user-select:none;touch-action:manipulation;height:32px;padding:4px 15px;font-size:14px;border-radius:2px;color:rgba(0,0,0,.65);background-color:#fff;border:1px solid #d9d9d9;position:absolute;right:0}.modal-styl[_ngcontent-%COMP%]   .footer-btns-container[_ngcontent-%COMP%]   .right-another[_ngcontent-%COMP%]{background-color:#ff4d4f;color:#fff}.modal-styl[_ngcontent-%COMP%]   .footer-btns-container[_ngcontent-%COMP%]   .left-another[_ngcontent-%COMP%]{right:68px;color:#999}  .modal-confim .ant-modal-body{padding:24px}  .model-show-ctrl .ant-modal-body{padding:24px!important}.home-icon-style[_ngcontent-%COMP%]{color:#666;font-size:14px}.knowledge-category-item[_ngcontent-%COMP%]{display:flex;height:34px;align-items:center;cursor:pointer}.knowledge-category-item.current-category[_ngcontent-%COMP%]{margin-bottom:6px}.knowledge-category-item.current-category[_ngcontent-%COMP%]   .favorite-icon-bg[_ngcontent-%COMP%], .knowledge-category-item.current-category[_ngcontent-%COMP%]   .home-icon[_ngcontent-%COMP%]{padding:0 5px;margin-left:16px;margin-right:7px;border-radius:4px}.knowledge-category-item.current-category[_ngcontent-%COMP%]   .domain-title[_ngcontent-%COMP%]{flex:1 1 auto;font-size:14px;color:#333}.knowledge-category-item.current-category[_ngcontent-%COMP%]   .rotate-icon[_ngcontent-%COMP%]{transform:rotate(270deg);font-size:13px;margin-left:8px;margin-right:9px;color:#333}.knowledge-category-item[_ngcontent-%COMP%]:hover{background:#f2f2f2}.knowledge-category-item.dropdown-item[_ngcontent-%COMP%]{height:50px;position:relative}.knowledge-category-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:3px}.knowledge-category-item.not-allowed[_ngcontent-%COMP%]{cursor:not-allowed}.knowledge-category-item[_ngcontent-%COMP%]   .category-item-desc[_ngcontent-%COMP%]{margin-left:10px}.knowledge-category-item[_ngcontent-%COMP%]   .category-item-desc[_ngcontent-%COMP%]   .category-item-title[_ngcontent-%COMP%]{font-size:14px;color:#676a6c}.knowledge-category-item[_ngcontent-%COMP%]   .category-item-desc[_ngcontent-%COMP%]   .category-item-title.dropdown-category-item-title[_ngcontent-%COMP%]{height:14px;line-height:14px}.knowledge-category-item[_ngcontent-%COMP%]   .category-item-desc[_ngcontent-%COMP%]   .category-item-description[_ngcontent-%COMP%]{margin-top:2px;font-size:12px;color:#bdbdbd}.menu-popover-list[_ngcontent-%COMP%]{width:200px;overflow:hidden}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-content[_ngcontent-%COMP%]{width:100%;overflow:hidden;margin-bottom:10px;line-height:26px;font-size:14px;cursor:pointer;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-help[_ngcontent-%COMP%], .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{position:relative;right:-50px;background:transparent;text-shadow:none;border-radius:4px}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-help[_ngcontent-%COMP%]:focus, .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-help[_ngcontent-%COMP%]:hover, .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:focus, .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:hover{outline:none}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{margin-left:10px;color:#23c6c8;border:1px solid #23c6c8}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-help[_ngcontent-%COMP%]{color:#5f5f5f;border:1px solid #dbdbdb}.category-select-menu[_ngcontent-%COMP%]{width:180px}.titleDropdownMenu[_ngcontent-%COMP%]{border:1px solid #ddd;box-shadow:3px 3px 3px 3px #eee;width:133px;display:none;z-index:1000}.titleDropdownMenu.visible[_ngcontent-%COMP%]{display:block}.real-catalog-wrapper[_ngcontent-%COMP%]{margin-left:12px}.current-styl[_ngcontent-%COMP%]{margin-left:1px}.title-menu-item[_ngcontent-%COMP%]{clear:both;margin:0;padding:5px 12px;color:rgba(0,0,0,.65);font-weight:400;font-size:14px;line-height:22px;white-space:nowrap;cursor:pointer;transition:all .3s;margin-bottom:0!important}[_nghost-%COMP%]     .ant-tree-treenode.drag-over-gap-bottom>[draggable]{border-bottom-width:2px;border-bottom-style:solid}[_nghost-%COMP%]     .ant-tree-treenode.drag-over-gap-top>[draggable]{border-top-width:2px;border-top-style:solid}.modal-position-relative[_ngcontent-%COMP%]{position:relative;top:-24px;left:-24px}.loading[_ngcontent-%COMP%]{text-align:center}.title-operate-color[_ngcontent-%COMP%]{color:#5f5f5f}.favorite-tip-box[_ngcontent-%COMP%]{width:230px;max-height:450px;overflow:none}.favorite-tip-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#23c6c8}  .favorite-tip-box .favorite-head input{border:0!important;border-bottom:1px!important}']}),e}()},Etcd:function(e,t,n){"use strict";n.d(t,"a",function(){return A}),n.d(t,"b",function(){return P}),n.d(t,"c",function(){return z});var i=n("t9bE"),o=n("KUzl"),r=n("mvVQ"),a=n("/E8u"),c=n("MGFw"),l=n("WtWf"),s=n("cH1L"),d=n("nLfN"),p=n("ofXK"),u=n("fXoL"),m=n("mrSG"),h=n("FtGj"),g=n("2Suw"),f=n("/KA4"),v=n("XNiG"),b=n("1G5W"),C=n("JwMs"),y=["slickList"],x=["slickTrack"];function w(e,t){}var _=function(e){return{$implicit:e}};function O(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"li",9),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=t.index;return u["\u0275\u0275nextContext"](2).onLiClick(e)}),u["\u0275\u0275template"](1,w,0,0,"ng-template",10),u["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=t.index,r=u["\u0275\u0275nextContext"](2),a=u["\u0275\u0275reference"](8);u["\u0275\u0275classProp"]("slick-active",i.isActive),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngTemplateOutlet",r.nzDotRender||a)("ngTemplateOutletContext",u["\u0275\u0275pureFunction1"](4,_,o))}}function S(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ul",7),u["\u0275\u0275template"](1,O,2,6,"li",8),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275classProp"]("slick-dots-top","top"===n.nzDotPosition)("slick-dots-bottom","bottom"===n.nzDotPosition)("slick-dots-left","left"===n.nzDotPosition)("slick-dots-right","right"===n.nzDotPosition),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",n.carouselContents)}}function E(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"button"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n+1)}}var M=["*"],P=function(){var e=function(){function e(t,n){Object(c.a)(this,e),this.renderer=n,this._active=!1,this.el=t.nativeElement,this.renderer.addClass(t.nativeElement,"slick-slide")}return Object(l.a)(e,[{key:"isActive",get:function(){return this._active},set:function(e){this._active=e,this.isActive?this.renderer.addClass(this.el,"slick-active"):this.renderer.removeClass(this.el,"slick-active")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](u.ElementRef),u["\u0275\u0275directiveInject"](u.Renderer2))},e.\u0275dir=u["\u0275\u0275defineDirective"]({type:e,selectors:[["","nz-carousel-content",""]],exportAs:["nzCarouselContent"]}),e}(),I=function(){function e(t,n,i,o,r){Object(c.a)(this,e),this.cdr=n,this.renderer=i,this.platform=o,this.options=r,this.carouselComponent=t}return Object(l.a)(e,[{key:"maxIndex",get:function(){return this.length-1}},{key:"firstEl",get:function(){return this.contents[0].el}},{key:"lastEl",get:function(){return this.contents[this.maxIndex].el}},{key:"withCarouselContents",value:function(e){var t=this,n=this.carouselComponent;if(this.slickListEl=n.slickListEl,this.slickTrackEl=n.slickTrackEl,this.contents=(null==e?void 0:e.toArray())||[],this.length=this.contents.length,this.platform.isBrowser){var i=n.el.getBoundingClientRect();this.unitWidth=i.width,this.unitHeight=i.height}else null==e||e.forEach(function(e,n){0===n?t.renderer.setStyle(e.el,"width","100%"):t.renderer.setStyle(e.el,"display","none")})}},{key:"dragging",value:function(e){}},{key:"dispose",value:function(){}},{key:"getFromToInBoundary",value:function(e,t){var n=this.maxIndex+1;return{from:(e+n)%n,to:(t+n)%n}}}]),e}(),k=function(e){Object(r.a)(n,e);var t=Object(a.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"withCarouselContents",value:function(e){var t=this;Object(i.a)(Object(o.a)(n.prototype),"withCarouselContents",this).call(this,e),this.contents&&(this.slickTrackEl.style.width="".concat(this.length*this.unitWidth,"px"),this.contents.forEach(function(e,n){t.renderer.setStyle(e.el,"opacity",t.carouselComponent.activeIndex===n?"1":"0"),t.renderer.setStyle(e.el,"position","relative"),t.renderer.setStyle(e.el,"width","".concat(t.unitWidth,"px")),t.renderer.setStyle(e.el,"left","".concat(-t.unitWidth*n,"px")),t.renderer.setStyle(e.el,"transition",["opacity 500ms ease 0s","visibility 500ms ease 0s"])}))}},{key:"switch",value:function(e,t){var n=this,i=this.getFromToInBoundary(e,t).to,o=new v.a;return this.contents.forEach(function(e,t){n.renderer.setStyle(e.el,"opacity",i===t?"1":"0")}),setTimeout(function(){o.next(),o.complete()},this.carouselComponent.nzTransitionSpeed),o}},{key:"dispose",value:function(){var e=this;this.contents.forEach(function(t){e.renderer.setStyle(t.el,"transition",null)}),Object(i.a)(Object(o.a)(n.prototype),"dispose",this).call(this)}}]),n}(I),T=function(e){Object(r.a)(n,e);var t=Object(a.a)(n);function n(e,i,o,r,a){var l;return Object(c.a)(this,n),(l=t.call(this,e,i,o,r,a)).isDragging=!1,l.isTransitioning=!1,l}return Object(l.a)(n,[{key:"vertical",get:function(){return this.carouselComponent.vertical}},{key:"dispose",value:function(){Object(i.a)(Object(o.a)(n.prototype),"dispose",this).call(this),this.renderer.setStyle(this.slickTrackEl,"transform",null)}},{key:"withCarouselContents",value:function(e){var t=this;Object(i.a)(Object(o.a)(n.prototype),"withCarouselContents",this).call(this,e);var r=this.carouselComponent.activeIndex;this.platform.isBrowser&&this.contents.length&&(this.renderer.setStyle(this.slickListEl,"height","".concat(this.unitHeight,"px")),this.vertical?(this.renderer.setStyle(this.slickTrackEl,"width","".concat(this.unitWidth,"px")),this.renderer.setStyle(this.slickTrackEl,"height","".concat(this.length*this.unitHeight,"px")),this.renderer.setStyle(this.slickTrackEl,"transform","translate3d(0, ".concat(-r*this.unitHeight,"px, 0)"))):(this.renderer.setStyle(this.slickTrackEl,"height","".concat(this.unitHeight,"px")),this.renderer.setStyle(this.slickTrackEl,"width","".concat(this.length*this.unitWidth,"px")),this.renderer.setStyle(this.slickTrackEl,"transform","translate3d(".concat(-r*this.unitWidth,"px, 0, 0)"))),this.contents.forEach(function(e){t.renderer.setStyle(e.el,"position","relative"),t.renderer.setStyle(e.el,"width","".concat(t.unitWidth,"px")),t.renderer.setStyle(e.el,"height","".concat(t.unitHeight,"px"))}))}},{key:"switch",value:function(e,t){var n=this,i=this.getFromToInBoundary(e,t).to,o=new v.a;return this.renderer.setStyle(this.slickTrackEl,"transition","transform ".concat(this.carouselComponent.nzTransitionSpeed,"ms ease")),this.vertical?this.verticalTransform(e,t):this.horizontalTransform(e,t),this.isTransitioning=!0,this.isDragging=!1,setTimeout(function(){n.renderer.setStyle(n.slickTrackEl,"transition",null),n.contents.forEach(function(e){n.renderer.setStyle(e.el,n.vertical?"top":"left",null)}),n.renderer.setStyle(n.slickTrackEl,"transform",n.vertical?"translate3d(0, ".concat(-i*n.unitHeight,"px, 0)"):"translate3d(".concat(-i*n.unitWidth,"px, 0, 0)")),n.isTransitioning=!1,o.next(),o.complete()},this.carouselComponent.nzTransitionSpeed),o.asObservable()}},{key:"dragging",value:function(e){if(!this.isTransitioning){var t=this.carouselComponent.activeIndex;this.carouselComponent.vertical?(!this.isDragging&&this.length>2&&(t===this.maxIndex?this.prepareVerticalContext(!0):0===t&&this.prepareVerticalContext(!1)),this.renderer.setStyle(this.slickTrackEl,"transform","translate3d(0, ".concat(-t*this.unitHeight+e.x,"px, 0)"))):(!this.isDragging&&this.length>2&&(t===this.maxIndex?this.prepareHorizontalContext(!0):0===t&&this.prepareHorizontalContext(!1)),this.renderer.setStyle(this.slickTrackEl,"transform","translate3d(".concat(-t*this.unitWidth+e.x,"px, 0, 0)"))),this.isDragging=!0}}},{key:"verticalTransform",value:function(e,t){var n=this.getFromToInBoundary(e,t),i=n.to;this.length>2&&t!==i?(this.prepareVerticalContext(i<n.from),this.renderer.setStyle(this.slickTrackEl,"transform","translate3d(0, ".concat(-t*this.unitHeight,"px, 0)"))):this.renderer.setStyle(this.slickTrackEl,"transform","translate3d(0, ".concat(-i*this.unitHeight,"px, 0"))}},{key:"horizontalTransform",value:function(e,t){var n=this.getFromToInBoundary(e,t),i=n.to;this.length>2&&t!==i?(this.prepareHorizontalContext(i<n.from),this.renderer.setStyle(this.slickTrackEl,"transform","translate3d(".concat(-t*this.unitWidth,"px, 0, 0)"))):this.renderer.setStyle(this.slickTrackEl,"transform","translate3d(".concat(-i*this.unitWidth,"px, 0, 0"))}},{key:"prepareVerticalContext",value:function(e){e?(this.renderer.setStyle(this.firstEl,"top","".concat(this.length*this.unitHeight,"px")),this.renderer.setStyle(this.lastEl,"top",null)):(this.renderer.setStyle(this.firstEl,"top",null),this.renderer.setStyle(this.lastEl,"top","".concat(-this.unitHeight*this.length,"px")))}},{key:"prepareHorizontalContext",value:function(e){e?(this.renderer.setStyle(this.firstEl,"left","".concat(this.length*this.unitWidth,"px")),this.renderer.setStyle(this.lastEl,"left",null)):(this.renderer.setStyle(this.firstEl,"left",null),this.renderer.setStyle(this.lastEl,"left","".concat(-this.unitWidth*this.length,"px")))}}]),n}(I),D=new u.InjectionToken("nz-carousel-custom-strategies"),A=function(){var e=function(){function e(t,n,i,o,r,a,l,s,d){var p=this;Object(c.a)(this,e),this.nzConfigService=n,this.renderer=i,this.cdr=o,this.platform=r,this.resizeService=a,this.nzDragService=l,this.directionality=s,this.customStrategies=d,this._nzModuleName="carousel",this.nzEffect="scrollx",this.nzEnableSwipe=!0,this.nzDots=!0,this.nzAutoPlay=!1,this.nzAutoPlaySpeed=3e3,this.nzTransitionSpeed=500,this.nzStrategyOptions=void 0,this._dotPosition="bottom",this.nzBeforeChange=new u.EventEmitter,this.nzAfterChange=new u.EventEmitter,this.activeIndex=0,this.vertical=!1,this.transitionInProgress=null,this.dir="ltr",this.destroy$=new v.a,this.gestureRect=null,this.pointerDelta=null,this.isTransiting=!1,this.isDragging=!1,this.onLiClick=function(e){p.goTo("rtl"===p.dir?p.carouselContents.length-1-e:e)},this.pointerDown=function(e){p.isDragging||p.isTransiting||!p.nzEnableSwipe||(p.clearScheduledTransition(),p.gestureRect=p.slickListEl.getBoundingClientRect(),p.nzDragService.requestDraggingSequence(e).subscribe(function(e){var t;p.pointerDelta=e,p.isDragging=!0,null===(t=p.strategy)||void 0===t||t.dragging(p.pointerDelta)},function(){},function(){if(p.nzEnableSwipe&&p.isDragging){var e=p.pointerDelta?p.pointerDelta.x:0;Math.abs(e)>p.gestureRect.width/3?p.goTo(e>0?p.activeIndex-1:p.activeIndex+1):p.goTo(p.activeIndex),p.gestureRect=null,p.pointerDelta=null}p.isDragging=!1}))},this.nzDotPosition="bottom",this.renderer.addClass(t.nativeElement,"ant-carousel"),this.el=t.nativeElement}return Object(l.a)(e,[{key:"nzDotPosition",get:function(){return this._dotPosition},set:function(e){this._dotPosition=e,this.vertical="left"===e||"right"===e}},{key:"ngOnInit",value:function(){var e,t=this;this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(Object(b.a)(this.destroy$)).subscribe(function(e){t.dir=e,t.markContentActive(t.activeIndex),t.cdr.detectChanges()})}},{key:"ngAfterContentInit",value:function(){this.markContentActive(0)}},{key:"ngAfterViewInit",value:function(){var e=this;this.slickListEl=this.slickList.nativeElement,this.slickTrackEl=this.slickTrack.nativeElement,this.carouselContents.changes.pipe(Object(b.a)(this.destroy$)).subscribe(function(){e.markContentActive(0),e.layout()}),this.resizeService.subscribe().pipe(Object(b.a)(this.destroy$)).subscribe(function(){e.layout()}),this.switchStrategy(),this.markContentActive(0),this.layout(),Promise.resolve().then(function(){e.layout()})}},{key:"ngOnChanges",value:function(e){var t=e.nzEffect,n=e.nzDotPosition;t&&!t.isFirstChange()&&(this.switchStrategy(),this.markContentActive(0),this.layout()),n&&!n.isFirstChange()&&(this.switchStrategy(),this.markContentActive(0),this.layout()),this.nzAutoPlay&&this.nzAutoPlaySpeed?this.scheduleNextTransition():this.clearScheduledTransition()}},{key:"ngOnDestroy",value:function(){this.clearScheduledTransition(),this.strategy&&this.strategy.dispose(),this.destroy$.next(),this.destroy$.complete()}},{key:"onKeyDown",value:function(e){e.keyCode===h.h?(e.preventDefault(),this.pre()):e.keyCode===h.j&&(this.next(),e.preventDefault())}},{key:"next",value:function(){this.goTo(this.activeIndex+1)}},{key:"pre",value:function(){this.goTo(this.activeIndex-1)}},{key:"goTo",value:function(e){var t=this;if(this.carouselContents&&this.carouselContents.length&&!this.isTransiting){var n=this.carouselContents.length,i=this.activeIndex,o=(e+n)%n;this.isTransiting=!0,this.nzBeforeChange.emit({from:i,to:o}),this.strategy.switch(this.activeIndex,e).subscribe(function(){t.scheduleNextTransition(),t.nzAfterChange.emit(e),t.isTransiting=!1}),this.markContentActive(o),this.cdr.markForCheck()}}},{key:"switchStrategy",value:function(){var e=this;this.strategy&&this.strategy.dispose();var t=this.customStrategies?this.customStrategies.find(function(t){return t.name===e.nzEffect}):null;this.strategy=t?new t.strategy(this,this.cdr,this.renderer,this.platform):"scrollx"===this.nzEffect?new T(this,this.cdr,this.renderer,this.platform):new k(this,this.cdr,this.renderer,this.platform)}},{key:"scheduleNextTransition",value:function(){var e=this;this.clearScheduledTransition(),this.nzAutoPlay&&this.nzAutoPlaySpeed>0&&this.platform.isBrowser&&(this.transitionInProgress=setTimeout(function(){e.goTo(e.activeIndex+1)},this.nzAutoPlaySpeed))}},{key:"clearScheduledTransition",value:function(){this.transitionInProgress&&(clearTimeout(this.transitionInProgress),this.transitionInProgress=null)}},{key:"markContentActive",value:function(e){var t=this;this.activeIndex=e,this.carouselContents&&this.carouselContents.forEach(function(n,i){n.isActive="rtl"===t.dir?e===t.carouselContents.length-1-i:e===i}),this.cdr.markForCheck()}},{key:"layout",value:function(){this.strategy&&this.strategy.withCarouselContents(this.carouselContents)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](u.ElementRef),u["\u0275\u0275directiveInject"](g.a),u["\u0275\u0275directiveInject"](u.Renderer2),u["\u0275\u0275directiveInject"](u.ChangeDetectorRef),u["\u0275\u0275directiveInject"](d.a),u["\u0275\u0275directiveInject"](C.d),u["\u0275\u0275directiveInject"](C.c),u["\u0275\u0275directiveInject"](s.c,8),u["\u0275\u0275directiveInject"](D,8))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["nz-carousel"]],contentQueries:function(e,t,n){var i;1&e&&u["\u0275\u0275contentQuery"](n,P,0),2&e&&u["\u0275\u0275queryRefresh"](i=u["\u0275\u0275loadQuery"]())&&(t.carouselContents=i)},viewQuery:function(e,t){var n;1&e&&(u["\u0275\u0275viewQuery"](y,1),u["\u0275\u0275viewQuery"](x,1)),2&e&&(u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.slickList=n.first),u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.slickTrack=n.first))},hostVars:4,hostBindings:function(e,t){2&e&&u["\u0275\u0275classProp"]("ant-carousel-vertical",t.vertical)("ant-carousel-rtl","rtl"===t.dir)},inputs:{nzEffect:"nzEffect",nzEnableSwipe:"nzEnableSwipe",nzDots:"nzDots",nzAutoPlay:"nzAutoPlay",nzAutoPlaySpeed:"nzAutoPlaySpeed",nzTransitionSpeed:"nzTransitionSpeed",nzStrategyOptions:"nzStrategyOptions",nzDotPosition:"nzDotPosition",nzDotRender:"nzDotRender"},outputs:{nzBeforeChange:"nzBeforeChange",nzAfterChange:"nzAfterChange"},exportAs:["nzCarousel"],features:[u["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:M,decls:9,vars:3,consts:[[1,"slick-initialized","slick-slider"],["tabindex","-1",1,"slick-list",3,"keydown","mousedown","touchstart"],["slickList",""],[1,"slick-track"],["slickTrack",""],["class","slick-dots",3,"slick-dots-top","slick-dots-bottom","slick-dots-left","slick-dots-right",4,"ngIf"],["renderDotTemplate",""],[1,"slick-dots"],[3,"slick-active","click",4,"ngFor","ngForOf"],[3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(u["\u0275\u0275projectionDef"](),u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1,2),u["\u0275\u0275listener"]("keydown",function(e){return t.onKeyDown(e)})("mousedown",function(e){return t.pointerDown(e)})("touchstart",function(e){return t.pointerDown(e)}),u["\u0275\u0275elementStart"](3,"div",3,4),u["\u0275\u0275projection"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](6,S,2,9,"ul",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](7,E,2,1,"ng-template",null,6,u["\u0275\u0275templateRefExtractor"])),2&e&&(u["\u0275\u0275classProp"]("slick-vertical","left"===t.nzDotPosition||"right"===t.nzDotPosition),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",t.nzDots))},directives:[p.n,p.m,p.s],encapsulation:2,changeDetection:0}),Object(m.c)([Object(g.b)(),Object(m.f)("design:type",String)],e.prototype,"nzEffect",void 0),Object(m.c)([Object(g.b)(),Object(f.a)(),Object(m.f)("design:type",Boolean)],e.prototype,"nzEnableSwipe",void 0),Object(m.c)([Object(g.b)(),Object(f.a)(),Object(m.f)("design:type",Boolean)],e.prototype,"nzDots",void 0),Object(m.c)([Object(g.b)(),Object(f.a)(),Object(m.f)("design:type",Boolean)],e.prototype,"nzAutoPlay",void 0),Object(m.c)([Object(g.b)(),Object(f.b)(),Object(m.f)("design:type",Number)],e.prototype,"nzAutoPlaySpeed",void 0),Object(m.c)([Object(f.b)(),Object(m.f)("design:type",Object)],e.prototype,"nzTransitionSpeed",void 0),Object(m.c)([Object(g.b)(),Object(m.f)("design:type",String),Object(m.f)("design:paramtypes",[String])],e.prototype,"nzDotPosition",null),e}(),z=function(){var e=Object(l.a)(function e(){Object(c.a)(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[s.a,p.c,d.b]]}),e}()},Ev4J:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("3Pt+"),o=n("ofXK"),r=n("sYmb"),a=n("lR5k"),c=n("nJia"),l=n("WM4a"),s=n("9zdF"),d=n("BbD4"),p=n("mOC4"),u=n("fXoL"),m=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[o.c,i.g,r.a.forRoot(),c.b,l.a,a.b.forRoot(),d.a,s.a,p.a]]}),e}()},FHXd:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("tk/3"),o=n("lJxs"),r=n("ZVgC"),a=n("fXoL"),c=n("CuYH"),l=n("rXOI"),s=n("dEAy"),d=n("sYmb"),p=function(){function e(e,t,n,i,o){this.http=e,this.iconMap=t,this.colorMap=n,this.modalService=i,this.translate=o,this.currentUser={},this.url=window.location.origin,this.fuxi_host="http://fuxi-beta.inhuawei.com",this.url.includes(".huawei.com")&&(this.fuxi_host="https://g.fuxi.huawei.com"),this.currentUser=window.communicationService.currentUser}return e.prototype.queryComponents=function(e,t){return this.http.get("/vision-platform/api/domains/query/"+e+"/components?need_fuxi_id=true",{params:t}).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.queryBranchesByService=function(e){return this.http.get("/vision-workitem/api/query/branch/by_repourl",{params:e}).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.queryChanges=function(e){var t=this.fuxi_host+"/pipelineserv/api/v1/change/Specials",n=new i.f({Authorization:localStorage.getItem("userToken"),"Content-Type":"application/json",userId:this.currentUser.user_name,username:this.currentUser.user_name_full});return this.http.get(t,{params:e,headers:n}).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.queryRepoInfoByComponent=function(e){var t=this.fuxi_host+"/appserv/api/v2/repo/mainBranchRepo?appId="+e,n=new i.f({Authorization:localStorage.getItem("userToken"),"Content-Type":"application/json",userId:this.currentUser.user_name,username:this.currentUser.user_name_full});return this.http.get(t,{headers:n}).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.initiateChange=function(e){return this.http.post("/vision-workitem/api/build/workitem_change",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.relateChange=function(e){return this.http.post("/vision-workitem/api/relate/workitem_change/"+e.changeId,e.params).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.createBranches=function(e){return this.http.post("/vision-workitem/api/build/workitem_branch",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.queryCommits=function(e){return this.http.get("/vision-workitem/api/query/branchcode/number/"+e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.get_workitem_fuxi_status=function(e,t){return this.http.post("/vision-workitem/public-api/v1/new_cr_info",e,{params:{dataType:t}}).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.showLinkModal=function(e,t){window.hwa("trackStructEvent",{label:"create-change"===t?"\u90e8\u7f72\u4fe1\u606f-\u65b0\u5efa\u53d8\u66f4":"\u90e8\u7f72\u4fe1\u606f-\u5173\u8054\u53d8\u66f4"}),this.modalService.create({nzTitle:this.translate.instant("create-change"===t?"COMMON_LINK_CHANGE_NEW":"COMMON_LINK_EXIST_CHANGE"),nzContent:r.a,nzWidth:650,nzComponentParams:{workitem:{id:e.id,number:e.number,category:e.category,title:e.title,status:e.status,domain_id:e.domain.id,owners:e.owners,coder:e.owners,tester:e.owners,submitter:this.currentUser.user_name_full,createBy:this.currentUser.user_id,attribution_microservice:e.attribution_microservice||[]},category:t},nzBodyStyle:{"background-color":"#f2f2f2",padding:"8px","border-radius":"0 0 5px 5px"},nzMaskClosable:!1,nzFooter:null})},e.prototype.getFuxiLink=function(e,t){return t.urlLink?this.url+"/mine"+t.urlLink.split("mine")[1]:"pipeline"===t.key?this.url+"/mine/pipeline/redirect?compId="+t.compId+"&pipelineId="+t.id:this.url+"/mine/components/"+t.compId+"/change/detail?changeId="+t.id},e.prototype.query_members=function(e){return this.http.request("get","/vision-platform/api/domains/"+e+"/members").pipe(Object(o.a)(function(e){return e}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](i.c),a["\u0275\u0275inject"](c.a),a["\u0275\u0275inject"](l.a),a["\u0275\u0275inject"](s.d),a["\u0275\u0275inject"](d.c))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},FWf1:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=n("pshJ"),r=n("GiSu"),a=n("zB/H"),c=n("p//D"),l=n("n3uD"),s=n("MkmW"),d=function(e){function t(n,i,o){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=r.empty;break;case 1:if(!n){a.destination=r.empty;break}if("object"==typeof n){n instanceof t?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new p(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new p(a,n,i,o)}return a}return i(t,e),t.prototype[c.rxSubscriber]=function(){return this},t.create=function(e,n,i){var o=new t(e,n,i);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(a.Subscription);t.Subscriber=d;var p=function(e){function t(t,n,i,a){var c,l=e.call(this)||this;l._parentSubscriber=t;var s=l;return o.isFunction(n)?c=n:n&&(c=n.next,i=n.error,a=n.complete,n!==r.empty&&(s=Object.create(n),o.isFunction(s.unsubscribe)&&l.add(s.unsubscribe.bind(s)),s.unsubscribe=l.unsubscribe.bind(l))),l._context=s,l._next=c,l._error=i,l._complete=a,l}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;l.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=l.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):s.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;s.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};l.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),l.config.useDeprecatedSynchronousErrorHandling)throw n;s.hostReportError(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!l.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return l.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(s.hostReportError(i),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(d);t.SafeSubscriber=p},FXAj:function(e,t,n){"use strict";n.d(t,"a",function(){return V});var i=n("ofXK"),o=n("3Pt+"),r=n("cAPe"),a=n("sYmb"),c=n("PTRe"),l=n("FwiY"),s=n("KupA"),d=n("zAKX"),p=n("dEAy"),u=n("qAZ0"),m=n("nJia"),h=n("OzZK"),g=n("D9mS"),f=n("oyxB"),v=n("bNXi"),b=n("0lU3"),C=n("TaO5"),y=n("+oEP"),x=n("EGpF"),w=n("Nqz0"),_=n("q0Us"),O=n("VXpv"),S=n("s+/Z"),E=n("Faj5"),M=n("BbD4"),P=n("7lu6"),I=n("fesf"),k=n("A/Mn"),T=n("Ev4J"),D=n("mOC4"),A=n("Z9Gr"),z=n("+jTH"),R=n("9CzY"),L=n("bWbh"),N=n("cnMA"),j=n("fXoL"),V=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=j["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=j["\u0275\u0275defineInjector"]({providers:[I.a,k.b],imports:[[i.c,r.a,o.g,a.a,E.a,c.e,l.b,s.b,d.g,v.a,M.a,p.b,u.b,m.b,h.c,g.b,T.a,f.c,S.a,D.a,b.b,C.b,y.b,x.b,w.c,_.b,O.b,P.a,A.a,z.a,R.a,L.a,N.a]]}),e}()},Faj5:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("ofXK"),o=n("3Pt+"),r=n("sYmb"),a=n("dEAy"),c=n("nxWG"),l=n("PTRe"),s=n("Nqz0"),d=n("mOC4"),p=n("fXoL"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({providers:[r.c],imports:[[i.c,o.g,a.b,r.a.forChild(),c.b,l.e,d.a,s.c]]}),e}()},Fpfz:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("tk/3"),o=n("lJxs"),r=n("fXoL"),a=function(){function e(e){var t=this;this.http=e,this.initEditPlugins=function(e,t){return"normal"==e?["\n        directionality\n        visualblocks \n        visualchars \n        link \n        template \n        code \n        codesample\n        table\n        hr \n        nonbreaking\n        anchor\n        advlist\n        lists\n        textpattern\n        autosave \n        autoresize\n        autolink\n        codesample\n        paste\n        media\n        quickbars\n      "]:"simple"==e?["\n        directionality\n        visualblocks \n        visualchars \n        template \n        code \n        hr \n        nonbreaking\n        anchor\n        advlist\n        lists\n        textpattern\n        autosave\n        autolink \n        autoresize\n        paste\n      "]:"customize"==e?t.plugins:void 0},this.initEditToolbar=function(e,t,n){var i="";return"normal"==e&&(i="saveContent |                         forecolor backcolor bold italic underline strikethrough removeformat |                         fontsizeselect formatselect |                         editImage media quickimage articleAttachment sketchpad |                         alignleft aligncenter alignright alignjustify outdent indent lineheight |                          bullist numlist |                          table structuredtable thirdpartyservice link blockquote hr codesample |                         undo redo "),"simple"==e&&(i="forecolor backcolor bold italic underline removeformat |                         fontsizeselect formatselect |                         bullist numlist |                          undo redo"),"customize"==e&&(i=t.toolbar),n||(i+="| toMD"),i},this.initEditTextPattern=function(){return[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"~~",end:"~~",format:"strikethrough"},{start:">",format:"blockquote"},{start:"---",replacement:"<hr/>"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]},this.initEditBlockFormats=function(){return"Paragraph=p; \u6807\u98981=h1; \u6807\u98982=h2; \u6807\u98983=h3; \u6807\u98984=h4; \u6807\u98985=h5; \u6807\u98986=h6"},this.initEditFontsizeFormats=function(){return"12px 13px 14px 15px 16px 18px 24px 36px"},this.initEditColor=function(){return["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#FFFFFF","\u767d\u8272","#ECECEC","#ECECEC","#CCCCCC","#CCCCCC","#AAAAAA","#AAAAAA","#7E8C8D","#7E8C8D","#676a6c","\u7cfb\u7edf\u7070\u8272","#000000","\u9ed1\u8272"]},this.initCodeLanguage=function(){return[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"JSON",value:"json"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"Go",value:"go"},{text:"Shell",value:"bash"},{text:"PL/SQL",value:"sql"},{text:"YAML",value:"yaml"}]},this.queryAvailableModelOption=function(e){return t.http.get("/vision-platform/api/cloudmodeling/type/"+e).pipe(Object(o.a)(function(e){return e.data}))},this.createDiagram=function(e,n){var r={params:(new i.g).set("sn",e)};return t.http.post("/vision-platform/api/cloudmodeling",n,r).pipe(Object(o.a)(function(e){return e.data}))},this.queryAllDiagrams=function(e){var n={params:(new i.g).set("sn",e)};return t.http.get("/vision-platform/api/cloudmodeling",n).pipe(Object(o.a)(function(e){return e.data}))},this.isFullTbale=!1,this.isTableIconIn=!1,this.isTableIn=!1}return e.prototype.upload_file_storage=function(e,t,n,o){(new i.f).append("Content-Type",void 0);var r={params:(new i.g).set("file_type",e).set("username",t)},a=new FormData;return a.append("filename",n,o),this.http.post("/vision-file-storage/api/file/upload",a,r)},e.prototype.queryArticleCache=function(e){return this.http.post("/devops-knowledge-management/api/temporary/storage",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.updateArticleCache=function(e){return this.http.put("/devops-knowledge-management/api/temporary/storage",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.getSpaceImageData=function(e,t,n){var r;return r={params:(new i.g).set("domain_id",e)},t&&!n&&(r={params:(new i.g).set("domain_id",e).set("package_uuid",t)}),n&&!t&&(r={params:(new i.g).set("domain_id",e).set("element_uuid",n)}),this.http.get("/vision-platform/api/cloudmodeling/tree",r).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.getImageInfo=function(e,t,n){var r=(new i.g).set("space_uuid",e).set("diagram_uuid",t),a={params:n?r.set("version_uuid",n):r};return this.http.get("/vision-platform/api/cloudmodeling/diagram",a).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.imageBindingRelationship=function(e,t){var n={params:(new i.g).set("sn",e).set("diagram_uuid",t)};return this.http.get("/vision-platform/api/cloudmodeling/bind/diagram",n).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.queryTableInfoBySpace=function(e,t){return this.http.get("/devops-data-struct/api/v1/structTable/tableInfo?assignedDomainId="+e+"&category="+t).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.createStructuredTable=function(e){return this.http.post("/devops-data-struct/api/v1/structTable/build/table",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.queryArticleAttachmentNumber=function(){return this.http.get("/devops-knowledge-management/api/attachment/location").pipe(Object(o.a)(function(e){return e.data}))},e.prototype.changeContentMode=function(e,t){return"view"===t?e.replace(/story-structured-table-mode="edit"/g,'story-structured-table-mode="view"').replace(/article-attachment-mode="edit"/g,'article-attachment-mode="view"').replace(/article-attachment-scene=\"create\"/g,'article-attachment-scene=""').replace(/tinydesign-mode="edit"/g,'tinydesign-mode="view"').replace(/<sketch-pad(.*?)edit-mode=\".*?\"(.*?)<\/sketch-pad>/g,"<sketch-pad$1$2</sketch-pad>"):e.replace(/story-structured-table-mode="view"/g,'story-structured-table-mode="edit"').replace(/article-attachment-mode="view"/g,'article-attachment-mode="edit"').replace(/article-attachment-scene=\"create\"/g,'article-attachment-scene=""').replace(/tinydesign-mode="view"/g,'tinydesign-mode="edit"').replace(/<sketch-pad/g,'<sketch-pad edit-mode="edit"')},e.prototype.enterScroll=function(){if(13==window.event.keyCode){var e=document.getElementById("scroll-body");if(window.getSelection().focusNode.offsetTop<420)return;e.scrollTop=(e.scrollTop||0)+30}},e.prototype.hiddenTableDragele=function(){var e=document.querySelectorAll("#article-toolbar");e&&e.length&&(e[0].onmouseover=function(e){var t=document.querySelectorAll(".ephox-snooker-resizer-bar");t&&t.length&&(t[0].parentNode.style.visibility="hidden")},e[0].onmouseout=function(e){var t=document.querySelectorAll(".ephox-snooker-resizer-bar");t&&t.length&&(t[0].parentNode.style.visibility="visible")})},e.prototype.docTableView=function(){var e=this,t=document.querySelector("#doc-app");if(t&&t.querySelectorAll(".doc-table-edit-scorll").forEach(function(e){e.hasAttribute("contentEditable")&&(e.removeAttribute("contentEditable"),null==e||e.querySelectorAll("table").forEach(function(e){e.removeAttribute("contentEditable")}))}),location.pathname.includes("/wiki")){var n=document.querySelectorAll("table");n&&n.length&&n.forEach(function(t,n){e.addTableScorll(t),t.onmouseenter=function(){var e;(e=document.querySelectorAll(".ephox-snooker-resizer-bar"))&&e.length&&e[0].parentNode.setAttribute("oncontextmenu","return false")}})}},e.prototype.tinymceTableWide=function(e){e.preventDefault(),this.setTinymceTableWide(e.detail.tableDom),document.getElementById("doc-app").removeEventListener("tinymce_table_wide",this.tinymceTableWide.bind(this))},e.prototype.setTinymceTableWide=function(e){var t,n=e;n.parentNode.className.includes("doc-table-edit-scorll")&&(t=n.parentNode),t&&(t.className.includes("width-table")?this.removeWidthMode(t):this.addWidthMode(t))},e.prototype.tinymceTableFull=function(e){e.preventDefault(),this.setTinymceTableFull(e),document.getElementById("doc-app").removeEventListener("tinymce_table_full",this.tinymceTableFull.bind(this))},e.prototype.setTinymceTableFull=function(e){var t=e.detail.tableDom;t.parentNode.className.includes("doc-table-active-full")?this.closeTableMode(t,"edit"):this.fullTableMode(t,"edit")},e.prototype.addTableScorll=function(e){var t,n;e.parentNode.className.includes("doc-table-edit-scorll")||(null===(t=e.parentNode.parentNode)||void 0===t?void 0:t.className.includes("doc-table-edit-scorll"))||((n=document.createElement("div")).className="doc-table-edit-scorll",e.parentNode.replaceChild(n,e),n.appendChild(e),n.outerHTML=n.outerHTML+"<br/>")},e.prototype.hideTableFullIcons=function(){var e=this;setTimeout(function(){if(!e.isTableIn&&!e.isTableIconIn){var t=document.getElementsByClassName("tinymce-table-full-mode");t.length&&t[0].remove()}},1500)},e.prototype.createSketchPad=function(e,t){var n={params:(new i.g).set("relaType",e).set("relaSn",t)};return this.http.post("/devops-sketchpad-backend/api/painting/createPage",{},n).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.removeFullMode=function(e,t){var n=this;window,window.document.body.onmouseover=function(t){document.querySelectorAll("#doc-app").length||e.contains(t.target)||(n.isTableIn=!1,n.hideTableFullIcons())}},e.prototype.tableAddWidthMod=function(e,t,n){var i=this,o=e,r=document.createElement("i");r.title="\u8868\u683c\u5168\u5bbd/\u6807\u5bbd",r.className="doc-table-width-icon iconfont icon-horizon-expand txt-666",r.onclick=function(e,t){var n;o.parentNode.parentNode.className.includes("doc-table-edit-scorll")?n=o.parentNode.parentNode:o.parentNode.className.includes("table-wrapper")&&(n=o.parentNode),n.className.includes("width-table")?i.removeWidthMode(n):i.addWidthMode(n)},n.childNodes[0].classList.add("table-full-btn-content-more"),n.childNodes[0].appendChild(r)},e.prototype.addFullMode=function(e,t,n){var i=this;if(!document.querySelectorAll(".tinymce-table-full-mode").length&&!this.isFullTbale){var o=e.getBoundingClientRect(),r=o.top,a=o.width,c=document.createElement("div");c.className="tinymce-table-full-mode",c.style.top=r-40+"px";var l=e.parentNode.clientWidth;a<=e.parentNode.clientWidth&&(l=a),c.style.left=e.parentNode.getBoundingClientRect().left+Math.ceil(l/2)+"px",c.innerHTML='<div class="table-full-btn-content"><i class="doc-table-back-icon iconfont icon-fullscreen-square txt-666" title="\u8868\u683c\u5168\u5c4f"></i></div>';var s=e;this.isTableIn=!0;var d=c.getElementsByClassName("doc-table-back-icon")[0];n||this.tableAddWidthMod(e,t,c),d.onclick=function(e,n){s.parentNode.className.includes("doc-table-active-full")?i.closeTableMode(s,t):i.fullTableMode(s,t),i.refreshTableFullIconLocal(s)},c.onmouseout=function(){i.isTableIconIn=!1,i.hideTableFullIcons()},c.onmouseover=function(){i.isTableIconIn=!0},window.document.body.appendChild(c)}},e.prototype.addWidthMode=function(e){e.classList.add("width-table"),window.hwa("trackStructEvent",{label:"\u8868\u683c\u5168\u5bbd"})},e.prototype.removeWidthMode=function(e){e.classList.remove("width-table")},e.prototype.fullTableMode=function(e,t){var n=this,i=document.createElement("div"),o=document.createElement("div");o.id="back-full-table",o.innerHTML='<i class="iconfont icon-icon-crown"></i><span>\u8fd4\u56de\u6587\u7ae0</span>';var r=e;o.onclick=function(e){n.closeTableMode(r,t)},i.appendChild(o),i.className="doc-table-active-full slimScrollBar",e.parentNode.className.includes("doc-table-active-full")||(i.style.top="edit"===t?"50px":"0",i.style.zIndex="edit"===t?"0":"23px",e.parentNode.replaceChild(i,e),i.appendChild(e),t&&"edit"===t&&c("hidden"),this.isFullTbale=!0),window.hwa("trackStructEvent",{label:"\u8868\u683c\u5168\u5c4f"})},e.prototype.closeTableMode=function(e,t){t&&"edit"===t&&c("show"),e.parentNode.classList.remove("doc-table-active-full"),e.parentNode.parentNode.replaceChild(e,e.parentNode),this.isFullTbale=!1},e.prototype.refreshTableFullIconLocal=function(e){var t,n=e.getBoundingClientRect(),i=n.top,o=n.width;if((t=document.querySelectorAll(".tinymce-table-full-mode")).length){t[0].style.top=i-40+"px";var r=e.parentNode.getBoundingClientRect().width;o<=e.parentNode.getBoundingClientRect().width&&(r=o),t[0].style.left=e.parentNode.getBoundingClientRect().left+Math.ceil(r/2)+"px"}},e.prototype.checkIsFullTable=function(){var e,t=document.getElementsByClassName("doc-table-active-full");if(t&&t.length){var n=null===(e=t[0])||void 0===e?void 0:e.querySelectorAll("table")[0];this.closeTableMode(n,"edit")}},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](i.c))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();function c(e){var t;(t=document.querySelectorAll(".tox-toolbar__group"))&&t.length&&(t[t.length-1].style.display="hidden"===e?"none":"flex");var n=document.getElementById("doc-app");"hidden"===e?n.classList.add("app-doc-table-full"):n.classList.remove("app-doc-table-full"),[{dom:"right",display:"block"},{dom:"collapse-all-icon",display:"block"},{dom:"create-to",display:"inline-flex"},{dom:"doc-save-btn",display:"inline-block"},{dom:"article-outline-wrap",display:"block"}].forEach(function(t){var n;(n=document.querySelectorAll("."+t.dom))&&n.length&&(n[0].style.display="hidden"===e?" none":t.display)})}},GMZp:function(e,t,n){"use strict";t.isObject=function(e){return null!==e&&"object"==typeof e}},GiSu:function(e,t,n){"use strict";var i=n("n3uD"),o=n("MkmW");t.empty={closed:!0,next:function(e){},error:function(e){if(i.config.useDeprecatedSynchronousErrorHandling)throw e;o.hostReportError(e)},complete:function(){}}},GuN1:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},ISQy:function(e,t,n){var i=n("9Z5Q");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},IVlV:function(e,t,n){"use strict";n.d(t,"a",function(){return oe});var i=n("fXoL"),o=n("HDdC"),r=n("ofXK"),a=n("UJq8"),c=n("A/Mn"),l=n("zAKX"),s=n("3Pt+"),d=n("QhG9"),p=n("D9mS"),u=n("sYmb");function m(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",11),2&e){var n=t.$implicit,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("nzLabel","en"===o.curLanguage?n.attrTitleEn:n.attrTitleZh)("nzValue",n)}}function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nz-option-group",9),i["\u0275\u0275template"](1,m,1,2,"nz-option",10),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("nzLabel","en"===o.curLanguage?null==n?null:n.attrTitleEn:null==n?null:n.attrTitleZh),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.children)}}function g(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",11),2&e){var n=t.$implicit,o=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("nzLabel","en"===o.curLanguage?n.attrTitleEn:n.attrTitleZh)("nzValue",n)}}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nz-option-group",9),i["\u0275\u0275template"](1,g,1,2,"nz-option",10),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("nzLabel","en"===o.curLanguage?null==n?null:n.attrTitleEn:null==n?null:n.attrTitleZh),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.children)}}function v(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,f,2,2,"nz-option-group",3),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.causeChild)}}function b(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",11),2&e){var n=t.$implicit,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("nzLabel","en"===o.curLanguage?null==n?null:n.attrTitleEn:null==n?null:n.attrTitleZh)("nzValue",n.id)}}function C(e,t){if(1&e&&i["\u0275\u0275template"](0,b,1,2,"nz-option",10),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngForOf",n.causeChild)}}var y=function(){return{width:"200px"}},x=function(){function e(e,t){this.translate=e,this.knowledgeManage=t,this.causeChild=[],this.causeParent=[],this.causeClassIfy=[],this.resArr=[],this.curLanguage=this.translate.currentLang||"zh"}return e.prototype.ngOnInit=function(){this.initRootCauseClassify("failure-mode"===this.type?"getCoeFailureMode":"getCoeAttribute")},e.prototype.selectCauseParent=function(e){this.resArr=[];var t=this.selectParentObj(this.causeClassIfy,e);this.resArr[0]=t.id,this.resArr[1]=e.id,this.causeChild=e.children,this.causeChildId=""},e.prototype.selectParentObj=function(e,t){return e.find(function(e){for(var n=0;n<e.children.length;n++)if(e.children[n].attrValue===t.attrValue)return!0;return!1})},e.prototype.initRootCauseClassify=function(e){var t=this;window.communicationService.currentDomain$.subscribe(function(n){var i,o={convolution:!0,domains:[],domainId:null!==(i=null==n?void 0:n.id)&&void 0!==i?i:t.domainId,type:"ROOT_CAUSE_CLASSIFY_L1",withSize:!1};t.knowledgeManage[e](o).subscribe(function(e){t.causeClassIfy=e,"create-article"!==t.model&&t.getInitAttrData()},function(){})})},e.prototype.getInitAttrData=function(){var e=this;this.knowledgeManage.getCoeTagList(this.wikiId).subscribe(function(t){"failure-mode"!==e.type&&(null==t?void 0:t.wikiCustomAttr2)?e.filteringDataInfo(t,["wikiCustomAttr1","wikiCustomAttr2","wikiCustomAttr3"]):"failure-mode"===e.type&&(null==t?void 0:t.wikiFailureMode2)&&e.filteringDataInfo(t,["wikiFailureMode1","wikiFailureMode2","wikiFailureMode3","wikiFailureMode4"])},function(){})},e.prototype.filteringDataInfo=function(e,t){var n,i=this;this.filterEndData(this.causeClassIfy,null==e?void 0:e[t[1]]),this.causeChild=this.causeParent.children,"failure-mode"===this.type?this.filterEndData(this.causeChild,null==e?void 0:e.wikiFailureMode4,"failure-mode"):this.causeChildId=null===(n=this.causeChild.filter(function(t){var n;return t.id===(null===(n=null==e?void 0:e.wikiCustomAttr3)||void 0===n?void 0:n.id)})[0])||void 0===n?void 0:n.id,t.forEach(function(t,n){var o;i.resArr[n]=null===(o=null==e?void 0:e[t])||void 0===o?void 0:o.id})},e.prototype.filterEndData=function(e,t,n){var i=this;e.forEach(function(e){for(var o,r=0;r<(null===(o=null==e?void 0:e.children)||void 0===o?void 0:o.length);r++)e.children[r].id===(null==t?void 0:t.id)&&("failure-mode"===n?i.causeChildId=e.children[r]:i.causeParent=e.children[r])})},e.prototype.updateCause=function(e){if("failure-mode"===this.type){var t=this.selectParentObj(this.causeChild,e);this.resArr[2]=t.id,this.resArr[3]=e.id}else this.resArr[2]=e},e.prototype.getCauseNumber=function(e,t,n){return e.filter(function(e){return e.id===t})[0][n]},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.c),i["\u0275\u0275directiveInject"](c.b))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-negative-root-cause"]],inputs:{type:"type",model:"model",wikiId:"wikiId",domainId:"domainId"},decls:13,vars:16,consts:[[1,"attribute-cause","flex-box",2,"line-height","44px"],[1,"rootcause-left"],["nzShowSearch","",3,"ngModel","nzPlaceHolder","nzDropdownStyle","ngModelChange"],[3,"nzLabel",4,"ngFor","ngForOf"],[1,"rootcause-center"],[1,"rootcause-right"],["nzShowSearch","",1,"m-t-10",3,"ngModel","nzDropdownStyle","nzPlaceHolder","nzDropdownMatchSelectWidth","ngModelChange"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"nzLabel"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"nz-select",2),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.causeParent=e})("ngModelChange",function(e){return t.selectCauseParent(e)}),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275template"](4,h,2,2,"nz-option-group",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275text"](6,"-"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",5),i["\u0275\u0275elementStart"](8,"nz-select",6),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.updateCause(e)})("ngModelChange",function(e){return t.causeChildId=e}),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275template"](10,v,2,1,"ng-container",7),i["\u0275\u0275template"](11,C,1,1,"ng-template",null,8,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](12);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",t.causeParent)("nzPlaceHolder",i["\u0275\u0275pipeBind1"](3,10,"UNKNOWN"))("nzDropdownStyle",i["\u0275\u0275pureFunction0"](14,y)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.causeClassIfy),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",t.causeChildId)("nzDropdownStyle",i["\u0275\u0275pureFunction0"](15,y))("nzPlaceHolder",i["\u0275\u0275pipeBind1"](9,12,"UNKNOWN"))("nzDropdownMatchSelectWidth",!1),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","failure-mode"===t.type)("ngIfElse",n)}},directives:[l.e,s.k,s.l,r.m,r.n,l.b,l.a],pipes:[u.b],styles:[".rootcause-left[_ngcontent-%COMP%]{margin-left:-13px;width:auto}.rootcause-center[_ngcontent-%COMP%]{margin-left:-2px}.rootcause-right[_ngcontent-%COMP%]{flex:1;margin-top:-2px;margin-left:10px}  .rootcause-left .ant-select:not(.ant-select-customize-input) .ant-select-selector,   .rootcause-right .ant-select:not(.ant-select-customize-input) .ant-select-selector{border:none;text-decoration:underline;padding:0 15px}  .rootcause-left .ant-select .ant-select-arrow,   .rootcause-right .ant-select .ant-select-arrow{display:none}  .cdk-virtual-scroll-viewport::-webkit-scrollbar{width:8px;height:8px}  .cdk-virtual-scroll-viewport::-webkit-scrollbar-thumb{border-radius:10px;background-color:#aaa}  .cdk-virtual-scroll-viewport::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}"]}),e}(),w=n("mrSG"),_=n("XIp8"),O=n("tk/3"),S=function(){function e(e){this.http=e,this.allTreeObj=[{title:"ALL",key:"0",isLeaf:!0}]}return e.prototype.buildTemplateAttribute=function(e){var t=this;e&&e.length&&e.forEach(function(e){t.buildAttributeItem(e)})},e.prototype.buildAttributeItem=function(e,t){switch(void 0===t&&(t=[]),e.name){case"EVENT_CATEGORY":"string"==typeof e.selectValue&&e.selectValue.length&&(e.selectValue=e.selectValue.split(",")),this.setIsLeaf(e.optionValues);break;case"ATTRIBUTION_SERVER":e.optionValues=Object(_.a)(t);break;case"APPLICABLE_SERVER":"string"==typeof e.selectValue&&e.selectValue.length&&(e.selectValue=e.selectValue.split(",")),e.optionValues=Object(_.a)(Object(w.i)(this.allTreeObj,t));break;case"APPLICABLE_SITE_TYPE":"string"==typeof e.selectValue&&e.selectValue.length&&(e.selectValue=e.selectValue.split(","))}},e.prototype.setIsLeaf=function(e){var t=this;e&&e.forEach(function(e){var n;(null===(n=null==e?void 0:e.children)||void 0===n?void 0:n.length)?t.setIsLeaf(e.children):e.isLeaf=!0})},e.prototype.buildTemplateTreeList=function(e){var t=this;e&&e.forEach(function(e){var n;e.title=e.short_title||e.title_zh,e.key=e.sn,e.disabled="PRODUCT"!==e.category,(null===(n=null==e?void 0:e.children)||void 0===n?void 0:n.length)?t.buildTemplateTreeList(e.children):e.isLeaf=!0})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](O.c))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),E=n("PTRe"),M=n("q0Us"),P=n("VXpv");function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",8),i["\u0275\u0275text"](1,"*"),i["\u0275\u0275elementEnd"]())}function k(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"input",9),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.selectValue=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",o.selectValue)}}function T(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",12),2&e){var n=t.$implicit;i["\u0275\u0275property"]("nzLabel",n.label)("nzValue",n.value)}}function D(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-select",10),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.selectValue=e}),i["\u0275\u0275template"](2,T,1,2,"nz-option",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",o.selectValue)("nzDisabled",o.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",o.optionValues)}}function A(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",12),2&e){var n=t.$implicit;i["\u0275\u0275property"]("nzLabel",n.label)("nzValue",n.value)}}function z(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-select",13),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.selectValue=e}),i["\u0275\u0275template"](2,A,1,2,"nz-option",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",o.selectValue),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",o.optionValues)}}function R(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-cascader",14),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.selectValue=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzExpandTrigger","hover")("nzOptions",o.optionValues)("ngModel",o.selectValue)}}function L(e,t){1&e&&i["\u0275\u0275text"](0),2&e&&i["\u0275\u0275textInterpolate1"]("and ",t.$implicit.length," more...")}function N(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-tree-select",15),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.selectValue=e})("ngModelChange",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).onChangeTree(e,t)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,L,1,1,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275reference"](3),r=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",r.selectValue)("nzMaxTagCount",3)("nzMaxTagPlaceholder",o)("nzNodes",r.optionValues)("nzDefaultExpandAll",!0)("nzAllowClear",!1)("nzMultiple","multiple"===r.selectModel)}}function j(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",3),i["\u0275\u0275elementStart"](2,"span",4),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,I,2,0,"span",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",6),i["\u0275\u0275template"](7,k,2,1,"ng-container",7),i["\u0275\u0275template"](8,D,3,3,"ng-container",7),i["\u0275\u0275template"](9,z,3,2,"ng-container",7),i["\u0275\u0275template"](10,R,2,3,"ng-container",7),i["\u0275\u0275template"](11,N,4,7,"ng-container",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,7,n.name)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",n.required),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","input"===n.selectType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","select"===n.selectType&&"single"===n.selectModel),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","select"===n.selectType&&"multiple"===n.selectModel),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","linkage"===n.selectType&&"multiple"===n.selectModel),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","tree"===n.selectType)}}function V(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275template"](1,j,12,9,"ng-container",2),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.attributeList)}}var F=function(){function e(e,t,n){this.translate=e,this.knowledgeService=t,this.additiveAttributeService=n,this.serverTreeList=[],this.attributeList=[]}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){e.templateAttrObj&&this.getTemplateAttribute()},e.prototype.getTemplateAttribute=function(){var e=this;if(this.templateAttrObj.number){var t=this.templateAttrObj.number;this.attributeList=[],this.knowledgeService.getTemplateAttribute(t).subscribe(function(t){t&&(e.additiveAttributeService.buildTemplateAttribute(t),e.attributeList=t,e.getAttributeServerTree())},function(){})}},e.prototype.getAttributeServerTree=function(){var e=this;this.knowledgeService.getAttributeServerTree({filters:[{key:"top_sn",value:["CL12015881"],operator:"||"}],data_type:"tree"}).subscribe(function(t){t&&t.result&&(e.serverTreeList=[],e.additiveAttributeService.buildTemplateTreeList(t.result),e.serverTreeList=t.result,e.attributeList.forEach(function(t){e.additiveAttributeService.buildAttributeItem(t,e.serverTreeList)}))},function(){})},e.prototype.onChangeTree=function(e,t){"multiple"===t.selectModel&&e.length&&e.includes("0")&&(e=["0"],t.selectValue=["0"])},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.c),i["\u0275\u0275directiveInject"](c.b),i["\u0275\u0275directiveInject"](S))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-article-template-attribute"]],inputs:{templateAttrObj:"templateAttrObj"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[["class","m-b-30 template-attribute-box",4,"ngIf"],[1,"m-b-30","template-attribute-box"],[4,"ngFor","ngForOf"],[1,"m-b-8","attribute-title"],[1,"f-bold"],["class","text-danger m-l-5",4,"ngIf"],[1,"m-b-10","attribute-box"],[4,"ngIf"],[1,"text-danger","m-l-5"],["nz-input","",3,"ngModel","ngModelChange"],["nzShowSearch","",3,"ngModel","nzDisabled","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nzMode","multiple",3,"ngModel","ngModelChange"],[3,"nzExpandTrigger","nzOptions","ngModel","ngModelChange"],["nzShowSearch","","nzVirtualHeight","300px",3,"ngModel","nzMaxTagCount","nzMaxTagPlaceholder","nzNodes","nzDefaultExpandAll","nzAllowClear","nzMultiple","ngModelChange"],["omittedPlaceHolder",""]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,V,2,1,"div",0),2&e&&i["\u0275\u0275property"]("ngIf",t.attributeList.length)},directives:[r.n,r.m,E.b,s.d,s.k,s.l,l.e,l.a,M.a,P.a],pipes:[u.b],styles:[".template-attribute-box[_ngcontent-%COMP%]   nz-cascader[_ngcontent-%COMP%], .template-attribute-box[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%], .template-attribute-box[_ngcontent-%COMP%]   nz-tree-select[_ngcontent-%COMP%]{width:100%}  .ant-cascader-menu::-webkit-scrollbar{width:0!important;display:none}"]}),e}(),B=n("FwiY"),U=n("C2AL"),W=n("TaO5"),H=n("0lU3"),G=["tagManager"],q=["rootCause"],$=["failureMode"],K=["templateAttribute"];function X(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",16),2&e){var n=t.$implicit;i["\u0275\u0275property"]("nzLabel",n.name+" "+n.username)("nzValue",n.id)}}function Y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275elementStart"](1,"span",17),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",7),i["\u0275\u0275element"](5,"app-negative-root-cause",18,19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"span",20),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",7),i["\u0275\u0275element"](11,"app-negative-root-cause",21,22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](6),o=i["\u0275\u0275nextContext"]();i["\u0275\u0275styleProp"]("margin-bottom","create-article"!=o.model||n.causeChildId?"15px":"25px"),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](3,10,"ROOT_CAUSE_CLASSIFICATION")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("wikiId",o.wikiSn)("model",o.model)("domainId",null==o.currentDomainInfo?null:o.currentDomainInfo.id),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](9,12,"FAILURE_MODE")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("wikiId",o.wikiSn)("model",o.model)("domainId",null==o.currentDomainInfo?null:o.currentDomainInfo.id)}}function Q(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"app-article-template-attribute",24,25),i["\u0275\u0275listener"]("templateAttrObjChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().templateAttrObj=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("templateAttrObj",o.templateAttrObj)}}function J(e,t){1&e&&i["\u0275\u0275element"](0,"i",31),2&e&&i["\u0275\u0275property"]("nzType","loading")}function Z(e,t){1&e&&i["\u0275\u0275element"](0,"i",32)}function ee(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",26),i["\u0275\u0275template"](2,J,1,1,"i",27),i["\u0275\u0275template"](3,Z,1,0,"i",28),i["\u0275\u0275elementStart"](4,"div",29),i["\u0275\u0275element"](5,"span",30),i["\u0275\u0275text"](6),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",n.loading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!n.loading),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](7,3,"LOCAL_UPLOAD")," ")}}function te(e,t){if(1&e&&i["\u0275\u0275element"](0,"img",33),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("src",n.avatarUrl,i["\u0275\u0275sanitizeUrl"])}}function ne(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",36),i["\u0275\u0275elementStart"](1,"nz-range-picker",37),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).dateRange=e})("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).dateRangeChange(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzFormat",o.dateFormat)("ngModel",o.dateRange)}}function ie(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275elementStart"](1,"span",2),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"label",34),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().attributeValue.join_calendar=e})("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().checkboxChange(e)}),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,ne,2,2,"div",35),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,4,"COMMUNITY_ACTIVITY")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",o.attributeValue.join_calendar),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](6,6,"IS_JOIN_COMMUNITY_CALENDAR")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",o.attributeValue.join_calendar)}}var oe=function(){function e(e,t){this.emitService=e,this.knowledgeService=t,this.updateAttributeValue=new i.EventEmitter,this.dateRange=[],this.selectedValue=null,this.currentUsername=window.communicationService.currentUser.user_name,this.isHasCoeAttr=!0,this.loading=!1,this.userOption=[],this.dateFormat="yyyy/MM/dd",this.currentDomainInfo={},this.showCalendar=!0,this.selectedTagOption=[],this.attributeValue={id:null,tag:[],wiki_id:"",wiki_sn:"",icon_image:"",join_calendar:!1,start_time:null,end_time:null},this.beforeUpload=function(e){return new o.a(function(t){var n="image/jpeg"===e.type||"image/png"===e.type;if(n){var i=e.size/1024/1024<2;i?(t.next(n&&i),t.complete()):t.complete()}else t.complete()})}}return e.prototype.ngOnInit=function(){var e=this;"update-article"==this.model?(this.attributeValue.wiki_id=this.articleDetails.id,this.attributeValue.wiki_sn=this.wikiSn,this.userOption=[this.articleDetails.created_by],this.templateAttrObj={number:this.wikiSn},this.getAttributeInfo()):this.userOption=[{name:window.communicationService.currentUser.user_name_zh,username:window.communicationService.currentUser.user_name,id:window.communicationService.currentUser.user_id}],this.selectedValue=this.userOption[0].id,this.emitService.eventEmit.subscribe(function(t){"update-article-attribute"===t.type&&(e.attributeValue.tag=e.tagManager.markedTag,e.updateAttributeValue.emit(e.attributeValue))}),this.getDomainInfo(),this.updateAttributeValue.emit(this.attributeValue)},e.prototype.getDomainInfo=function(){var e=this;this.currentDomainChanges=window.communicationService.currentDomain$.subscribe(function(t){var n,i,o;t?e.currentDomainInfo=t:e.currentDomainInfo.id=null===(i=null===(n=e.articleDetails)||void 0===n?void 0:n.assigned_domain)||void 0===i?void 0:i.id,e.categoryId||(e.categoryId=null===(o=e.articleDetails)||void 0===o?void 0:o.kanban_id),e.showCalendar=28676===e.currentDomainInfo.id,e.knowledgeService.getCoeHasAttr({resource:"knowledge:root_cause_classify",domainId:e.currentDomainInfo.id}).subscribe(function(t){e.isHasCoeAttr=t},function(){})})},e.prototype.getAttributeInfo=function(){var e=this;this.wikiSn&&this.knowledgeService.getAttributeInfo(this.wikiSn).subscribe(function(t){t&&(e.avatarUrl=t.icon_image,e.dateRange[0]=t.start_time,e.dateRange[1]=t.end_time,e.attributeValue.id=t.id,e.attributeValue.icon_image=t.icon_image,e.attributeValue.join_calendar=1===t.join_calendar,e.attributeValue.start_time=t.start_time?Object(r.z)(t.start_time,"yyyy-MM-dd","zh"):t.start_time,e.attributeValue.end_time=t.end_time?Object(r.z)(t.end_time,"yyyy-MM-dd","zh"):t.end_time,e.attributeValue.tag=t.tags,e.updateAttributeValue.emit(e.attributeValue))},function(){})},e.prototype.dateRangeChange=function(e){e.length>0?(this.attributeValue.start_time=Object(r.z)(e[0],"yyyy-MM-dd","zh"),this.attributeValue.end_time=Object(r.z)(e[1],"yyyy-MM-dd","zh")):(this.attributeValue.start_time=null,this.attributeValue.end_time=null),this.updateAttributeValue.emit(this.attributeValue)},e.prototype.checkboxChange=function(e){this.updateAttributeValue.emit(this.attributeValue)},e.prototype.getBase64Img=function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result.toString())}),n.readAsDataURL(e)},e.prototype.handleChange=function(e){var t=this;switch(e.file.status){case"uploading":this.loading=!0;break;case"done":var n=e.file.response.data;n.success.length&&(this.attributeValue.icon_image=n.success[0].attachment_url,this.updateAttributeValue.emit(this.attributeValue)),this.getBase64Img(e.file.originFileObj,function(e){t.loading=!1,t.avatarUrl=e});break;case"error":this.loading=!1}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](c.b))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-additive-attribute"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](G,1),i["\u0275\u0275viewQuery"](q,1),i["\u0275\u0275viewQuery"]($,1),i["\u0275\u0275viewQuery"](K,1)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.tagManager=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.rootCause=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.failureMode=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.templateAttribute=n.first)}},inputs:{categoryId:"categoryId",wikiSn:"wikiSn",model:"model",articleDetails:"articleDetails",templateAttrObj:"templateAttrObj"},outputs:{updateAttributeValue:"updateAttributeValue"},decls:26,vars:21,consts:[[1,"additive-attribute","slimScrollBar"],[1,"attribute-tiem-box"],[1,"attribute-title"],[1,"auth-option"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a person",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["class","attribute-tiem-box",3,"marginBottom",4,"ngIf"],[1,"tag-box"],["isEdit","true",1,"tag-manager",3,"wikiId","isCoe","selectedTagOption"],["tagManager",""],["class","template-attribute-box",4,"ngIf"],[1,"up-file"],["nzAction","/vision-file-storage/api/upload/attachment","nzName","avatar","nzListType","picture-card",1,"avatar-uploader",3,"nzShowUploadList","nzBeforeUpload","nzChange"],[4,"ngIf"],["style","width: 100%",3,"src",4,"ngIf"],["class","attribute-tiem-box",4,"ngIf"],[3,"nzLabel","nzValue"],[1,"attribute-title",2,"margin-bottom","0"],[3,"wikiId","model","domainId"],["rootCause",""],[1,"attribute-title","m-t-10","m-b-0"],["type","failure-mode",3,"wikiId","model","domainId"],["failureMode",""],[1,"template-attribute-box"],[3,"templateAttrObj","templateAttrObjChange"],["templateAttribute",""],[1,"upload-text-content"],["class","upload-icon","nz-icon","",3,"nzType",4,"ngIf"],["class","upload-icon iconfont icon-plus",4,"ngIf"],[1,"ant-upload-text"],[1,"iconfont","icon-add"],["nz-icon","",1,"upload-icon",3,"nzType"],[1,"upload-icon","iconfont","icon-plus"],[2,"width","100%",3,"src"],["nz-checkbox","",1,"calendar-txt",3,"ngModel","ngModelChange"],["class","date-select m-t-10 m-b-10",4,"ngIf"],[1,"date-select","m-t-10","m-b-10"],[3,"nzFormat","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"span",2),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"nz-select",4),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectedValue=e}),i["\u0275\u0275template"](7,X,1,2,"nz-option",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,Y,13,14,"div",6),i["\u0275\u0275elementStart"](9,"div",1),i["\u0275\u0275elementStart"](10,"span",2),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",7),i["\u0275\u0275element"](14,"app-wiki-tag-manager",8,9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,Q,3,1,"div",10),i["\u0275\u0275elementStart"](17,"div",1),i["\u0275\u0275elementStart"](18,"span",2),i["\u0275\u0275text"](19),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",11),i["\u0275\u0275elementStart"](22,"nz-upload",12),i["\u0275\u0275listener"]("nzChange",function(e){return t.handleChange(e)}),i["\u0275\u0275template"](23,ee,8,5,"ng-container",13),i["\u0275\u0275template"](24,te,1,1,"img",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](25,ie,8,8,"div",15),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,15,"ORIGINAL_ANTHOR")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.selectedValue),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.userOption),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",6==t.categoryId&&t.isHasCoeAttr),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,17,"LABELS")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("wikiId",t.wikiSn)("isCoe",6==t.categoryId||"coe"==(null==t.articleDetails?null:t.articleDetails.classify))("selectedTagOption",t.attributeValue.tag),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.templateAttrObj),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](20,19,"THUMBNAIL")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("nzShowUploadList",!1)("nzBeforeUpload",t.beforeUpload),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.avatarUrl),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.avatarUrl),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.showCalendar))},directives:[l.e,s.k,s.l,r.m,r.n,d.a,p.a,l.a,x,F,B.a,U.a,W.a,H.a,H.c],pipes:[u.b],styles:[".additive-attribute[_ngcontent-%COMP%]{border:1px solid #dbdbdb;padding:20px 12px;border-radius:4px;height:100%;background:#fff;display:flex;flex-direction:column;overflow:auto}.additive-attribute[_ngcontent-%COMP%]   .attribute-tiem-box[_ngcontent-%COMP%]{margin-bottom:30px}.additive-attribute[_ngcontent-%COMP%]   .attribute-title[_ngcontent-%COMP%]{margin-bottom:8px;display:block;font-weight:700}.additive-attribute[_ngcontent-%COMP%]   .m-b-0[_ngcontent-%COMP%]{margin-bottom:0}.additive-attribute[_ngcontent-%COMP%]   .auth-option[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}.additive-attribute[_ngcontent-%COMP%]   .ant-upload-text[_ngcontent-%COMP%]{color:#000000d9}.additive-attribute[_ngcontent-%COMP%]   .calendar-txt[_ngcontent-%COMP%]{font-weight:400}.additive-attribute[_ngcontent-%COMP%]     .ant-upload.ant-upload-select-picture-card{background-color:#fff}"]}),e}()},IvDN:function(e,t,n){"use strict";n.d(t,"a",function(){return O}),n.d(t,"b",function(){return M}),n.d(t,"c",function(){return E});var i=n("MGFw"),o=n("WtWf"),r=n("mrSG"),a=n("fXoL"),c=n("GR68"),l=n("2Suw"),s=n("YF2q"),d=n("/KA4"),p=n("XNiG"),u=n("1G5W"),m=n("cH1L"),h=n("ofXK"),g=n("pdGh"),f=n("FwiY"),v=["*"];function b(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275element"](1,"i",6),a["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("nzType",n||"right")("nzRotate",i.nzActive?90:0)}}function C(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275template"](1,b,2,2,"ng-container",2),a["\u0275\u0275elementContainerEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("nzStringTemplateOutlet",n.nzExpandedIcon)}}function y(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275text"](1),a["\u0275\u0275elementContainerEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.nzHeader)}}function x(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275text"](1),a["\u0275\u0275elementContainerEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.nzExtra)}}function w(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",7),a["\u0275\u0275template"](1,x,2,1,"ng-container",2),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("nzStringTemplateOutlet",n.nzExtra)}}var _="collapse",O=function(){var e=function(){function e(t,n,o,r){var a=this;Object(i.a)(this,e),this.nzConfigService=t,this.cdr=n,this.elementRef=o,this.directionality=r,this._nzModuleName=_,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.destroy$=new p.a,this.elementRef.nativeElement.classList.add("ant-collapse"),this.nzConfigService.getConfigChangeEventForComponent(_).pipe(Object(u.a)(this.destroy$)).subscribe(function(){a.cdr.markForCheck()})}return Object(o.a)(e,[{key:"ngOnInit",value:function(){var e,t=this;null===(e=this.directionality.change)||void 0===e||e.pipe(Object(u.a)(this.destroy$)).subscribe(function(e){t.dir=e,t.cdr.detectChanges()}),this.dir=this.directionality.value}},{key:"addPanel",value:function(e){this.listOfNzCollapsePanelComponent.push(e)}},{key:"removePanel",value:function(e){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(e),1)}},{key:"click",value:function(e){this.nzAccordion&&!e.nzActive&&this.listOfNzCollapsePanelComponent.filter(function(t){return t!==e}).forEach(function(e){e.nzActive&&(e.nzActive=!1,e.nzActiveChange.emit(e.nzActive),e.markForCheck())}),e.nzActive=!e.nzActive,e.nzActiveChange.emit(e.nzActive)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](m.c,8))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["nz-collapse"]],hostVars:10,hostBindings:function(e,t){2&e&&a["\u0275\u0275classProp"]("ant-collapse-icon-position-left","left"===t.nzExpandIconPosition)("ant-collapse-icon-position-right","right"===t.nzExpandIconPosition)("ant-collapse-ghost",t.nzGhost)("ant-collapse-borderless",!t.nzBordered)("ant-collapse-rtl","rtl"===t.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],ngContentSelectors:v,decls:1,vars:0,template:function(e,t){1&e&&(a["\u0275\u0275projectionDef"](),a["\u0275\u0275projection"](0))},encapsulation:2,changeDetection:0}),Object(r.c)([Object(l.b)(),Object(d.a)(),Object(r.f)("design:type",Boolean)],e.prototype,"nzAccordion",void 0),Object(r.c)([Object(l.b)(),Object(d.a)(),Object(r.f)("design:type",Boolean)],e.prototype,"nzBordered",void 0),Object(r.c)([Object(l.b)(),Object(d.a)(),Object(r.f)("design:type",Boolean)],e.prototype,"nzGhost",void 0),e}(),S="collapsePanel",E=function(){var e=function(){function e(t,n,o,r,c){var l=this;Object(i.a)(this,e),this.nzConfigService=t,this.cdr=n,this.nzCollapseComponent=o,this.elementRef=r,this.noAnimation=c,this._nzModuleName=S,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new a.EventEmitter,this.destroy$=new p.a,this.elementRef.nativeElement.classList.add("ant-collapse-item"),this.nzConfigService.getConfigChangeEventForComponent(S).pipe(Object(u.a)(this.destroy$)).subscribe(function(){l.cdr.markForCheck()})}return Object(o.a)(e,[{key:"clickHeader",value:function(){this.nzDisabled||this.nzCollapseComponent.click(this)}},{key:"markForCheck",value:function(){this.cdr.markForCheck()}},{key:"ngOnInit",value:function(){this.nzCollapseComponent.addPanel(this)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete(),this.nzCollapseComponent.removePanel(this)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](O,1),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](s.a,8))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["nz-collapse-panel"]],hostVars:6,hostBindings:function(e,t){2&e&&a["\u0275\u0275classProp"]("ant-collapse-no-arrow",!t.nzShowArrow)("ant-collapse-item-active",t.nzActive)("ant-collapse-item-disabled",t.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],ngContentSelectors:v,decls:7,vars:8,consts:[["role","tab",1,"ant-collapse-header",3,"click"],[4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-collapse-extra",4,"ngIf"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"],[1,"ant-collapse-extra"]],template:function(e,t){1&e&&(a["\u0275\u0275projectionDef"](),a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275listener"]("click",function(){return t.clickHeader()}),a["\u0275\u0275template"](1,C,2,1,"ng-container",1),a["\u0275\u0275template"](2,y,2,1,"ng-container",2),a["\u0275\u0275template"](3,w,2,1,"div",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",4),a["\u0275\u0275elementStart"](5,"div",5),a["\u0275\u0275projection"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275attribute"]("aria-expanded",t.nzActive),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.nzShowArrow),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("nzStringTemplateOutlet",t.nzHeader),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.nzExtra),a["\u0275\u0275advance"](1),a["\u0275\u0275classProp"]("ant-collapse-content-active",t.nzActive),a["\u0275\u0275property"]("@.disabled",null==t.noAnimation?null:t.noAnimation.nzNoAnimation)("@collapseMotion",t.nzActive?"expanded":"hidden"))},directives:[h.n,g.b,f.a],encapsulation:2,data:{animation:[c.a]},changeDetection:0}),Object(r.c)([Object(d.a)(),Object(r.f)("design:type",Object)],e.prototype,"nzActive",void 0),Object(r.c)([Object(d.a)(),Object(r.f)("design:type",Object)],e.prototype,"nzDisabled",void 0),Object(r.c)([Object(l.b)(),Object(d.a)(),Object(r.f)("design:type",Boolean)],e.prototype,"nzShowArrow",void 0),e}(),M=function(){var e=Object(o.a)(function e(){Object(i.a)(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[m.a,h.c,f.b,g.a,s.b]]}),e}()},JXZa:function(e,t,n){"use strict";n.d(t,"a",function(){return te});var i=n("mrSG"),o=n("fXoL"),r=n("lJxs"),a=n("nYR2"),c=n("eIep"),l=n("1G5W"),s=n("XNiG"),d=n("VRyK"),p=n("PqYM"),u=n("Cfvw"),m=n("hbEN"),h=n("AA4e"),g=n("bNXi"),f=n("Fpfz"),v=n("sYmb"),b=n("dEAy"),C=n("UJq8"),y=n("ofXK"),x=n("25hl"),w=n("nxWG"),_=n("PTRe"),O=n("3Pt+");function S(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275element"](1,"i",20),o["\u0275\u0275elementStart"](2,"span",21),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](n.isExpanded?"icon-font-size12 iconfont icon-files-open":"iconfont icon-files-close1"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",n.origin.name),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.origin.name)}}function E(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275element"](1,"i",22),o["\u0275\u0275elementStart"](2,"span",23),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("title",n.origin.name),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.origin.name)}}var M=function(e){return{width:e}};function P(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",18),o["\u0275\u0275template"](1,S,4,4,"span",19),o["\u0275\u0275template"](2,E,4,2,"span",19),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275classMap"](i.activeNode&&i.activeNode.origin&&n.origin.uuid==i.activeNode.origin.uuid&&n.parentNode==i.activeNode.parentNode?"active-span-styl":""),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](5,M,198-16*n.level+"px")),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.isLeaf),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isLeaf)}}function I(e,t){if(1&e&&o["\u0275\u0275element"](0,"img",24),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("src",n.activeImageObj.imageUrl,o["\u0275\u0275sanitizeUrl"])}}function k(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",25),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"SELECT_DIAGRAM_PREVIEW")))}function T(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",26),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"INSERT_IMG_LINK_ERROR_TIP")))}var D=function(){function e(e,t,n,i){this.editorService=e,this.modal=t,this.translate=n,this.notification=i,this.modelingImgLink="",this.imgInsertLinkIsLegill=!0}return Object.defineProperty(e.prototype,"confirmBtnDisabled",{get:function(){return!this.modelingImgLink&&(!this.activeNode||!this.activeNode.origin||!this.activeNode.origin.isDiagram)||this.modelingImgLink&&!this.activeImageObj},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.inputWidth=250,e.maxWidth=450,e.minWidth=150})},e.prototype.ngOnInit=function(){var e=this;this.editorService.getSpaceImageData(this.workitemInfo.productId).subscribe(function(t){e.setTypeFunc(t),e.imageArr=Object(i.i)([],t.packages,t.elements,t.diagrams)},function(){})},e.prototype.setTypeFunc=function(e,t){e.packages.length>0&&(e.packages.forEach(function(e){e.isLeaf=!1,e.isPackage=!0}),t&&t.addChildren(e.packages)),e.elements.length>0&&(e.elements.forEach(function(e){e.isLeaf=!1,e.isElement=!0}),t&&t.addChildren(e.elements)),e.diagrams.length>0&&(e.diagrams.forEach(function(e){e.isLeaf=!0,e.isDiagram=!0}),t&&t.addChildren(e.diagrams))},e.prototype.nzEvent=function(e){var t=this;this.imgInsertLinkIsLegill=!0,this.modelingImgLink="";var n=e.node;n&&0===n.children.length&&!n.origin.isLeaf&&this.editorService.getSpaceImageData(this.workitemInfo.productId,n.origin.isPackage?n.origin.uuid:null,n.origin.isElement?n.origin.uuid:null).subscribe(function(i){t.setTypeFunc(i,n),n.addChildren([]),"click"==e.eventName&&0==n.isExpanded&&(n.isExpanded=!0)},function(){}),n&&n.origin.isLeaf&&this.editorService.getImageInfo(n.parentNode.origin.projectSpaceUUID,n.origin.uuid).subscribe(function(e){t.activeImageObj=e},function(){}),this.activeNode=n},e.prototype.closeModal=function(e){var t=this;e?this.editorService.imageBindingRelationship(this.workitemInfo.sn,this.activeImageObj.uuid).subscribe(function(e){t.modal.destroy({requestResult:e,imageObj:t.activeImageObj})},function(){}):this.modal.destroy()},e.prototype.getImageInfoByLink=function(){var e=this,t=this.modelingImgLink.match(/https:\/\/cloudmodeling\.tools\.huawei\.com\/projectspace\/detail\/(\w+)\?[A-Za-z0-9]+=([A-Za-z0-9]+)(&[A-Za-z0-9]+=([A-Za-z0-9]+))?/);t?(this.imgInsertLinkIsLegill=!0,this.editorService.getImageInfo(t[1],t[2],t[4]).subscribe(function(t){e.activeImageObj=t},function(){})):this.imgInsertLinkIsLegill=!1},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](b.c),o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](g.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["insert-existing-pictrure"]],inputs:{workitemInfo:"workitemInfo"},decls:26,vars:24,consts:[[1,"content-wrapper"],[1,"select-directory-header"],[1,"icon-color","icon-font-size14","position-right-close","iconfont","icon-close","pointer-cursor",3,"click"],["id","insert-image-wrapper",1,"select-insert-img","draggable-wrapper"],[1,"comment-container",3,"maxWidth","minWidth","position","inputWidth"],[1,"left-tree"],["nzAsyncData","",3,"nzData","nzTreeTemplate","nzClick","nzExpandChange"],["nzTreeTemplateNode",""],[1,"right-image"],["class","right-image-styl",3,"src",4,"ngIf"],["class","right-image-styl middle-span-styl",4,"ngIf"],["class","right-image-styl middle-span-styl erro-info-color",4,"ngIf"],[1,"bottom-button"],[1,"img-url-input"],[1,"img-url-input-wrapper"],["type","text","nz-input","",3,"nzSize","placeholder","ngModel","ngModelChange","input"],[1,"confirm-button","pointer-cursor",3,"disabled","click"],[3,"textContent"],[1,"custom-node","pointer-cursor","overfolw-eclipis",3,"ngStyle"],[4,"ngIf"],[1,"icon-font-size13"],[1,"folder-name","span-m-l-10",3,"title"],[1,"iconfont","icon-img"],[1,"file-name","span-m-l-10",3,"title"],[1,"right-image-styl",3,"src"],[1,"right-image-styl","middle-span-styl"],[1,"right-image-styl","middle-span-styl","erro-info-color"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementStart"](4,"i",2),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"draggable-div",4),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"nz-tree",6),o["\u0275\u0275listener"]("nzClick",function(e){return t.nzEvent(e)})("nzExpandChange",function(e){return t.nzEvent(e)}),o["\u0275\u0275template"](9,P,3,7,"ng-template",null,7,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",8),o["\u0275\u0275template"](12,I,1,1,"img",9),o["\u0275\u0275template"](13,k,3,3,"span",10),o["\u0275\u0275template"](14,T,3,3,"span",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",12),o["\u0275\u0275elementStart"](16,"div",13),o["\u0275\u0275elementStart"](17,"div"),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"nz-input-group",14),o["\u0275\u0275elementStart"](21,"input",15),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.modelingImgLink=e})("input",function(){return t.getImageInfoByLink()}),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"button",16),o["\u0275\u0275listener"]("click",function(){return t.closeModal(!0)}),o["\u0275\u0275element"](24,"span",17),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275reference"](10);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,16,"INSERT_EXISTING_PICTURE")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("maxWidth",t.maxWidth)("minWidth",t.minWidth)("position","right")("inputWidth",t.inputWidth),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzData",t.imageArr)("nzTreeTemplate",n),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",t.activeImageObj&&t.imgInsertLinkIsLegill),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.activeImageObj&&t.imgInsertLinkIsLegill),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.imgInsertLinkIsLegill),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](19,18,"INSERT_EXISTED_IMG_LINK")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzSize","small")("placeholder",o["\u0275\u0275pipeBind1"](22,20,"INSERT_EXISTED_IMG_LINK"))("ngModel",t.modelingImgLink),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.confirmBtnDisabled),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](25,22,"COMMON_BUTTON_CONFIRM"))}},directives:[x.a,w.a,y.n,_.c,_.b,O.d,O.k,O.l,y.o],pipes:[v.b],styles:['#catalog-select-directory[_ngcontent-%COMP%]     .ant-modal-body{padding:0!important}#catalog-select-directory[_ngcontent-%COMP%]     .ant-modal-body::-webkit-scrollbar{width:0!important}.draggable-wrapper[_ngcontent-%COMP%]{display:flex}.content-wrapper[_ngcontent-%COMP%]{position:relative}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]{margin-top:10px;height:40px;padding-top:30px;line-height:30px;position:relative;right:18px;bottom:10px;padding-left:36px}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .img-url-input[_ngcontent-%COMP%]{display:flex;width:85%;height:30px;position:relative;top:-17px}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .img-url-input[_ngcontent-%COMP%]   .img-url-input-wrapper[_ngcontent-%COMP%]{width:calc(100% - 130px);margin-left:10px}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:18px;width:100%;height:1px;background:#e5e5e5}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .confirm-button[_ngcontent-%COMP%]{position:absolute;background:#23c6c8;padding:0 20px;border-radius:4px;border:none;right:0;text-align:center;color:#fff;top:12px}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .confirm-button[disabled][_ngcontent-%COMP%]{color:#666;background:#e5e5e5}.content-wrapper[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]{height:45px;width:100%;line-height:45px;text-align:left;position:relative;border-bottom:1px solid #e5e5e5;padding-left:18px;font-weight:700}.content-wrapper[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .position-right-close[_ngcontent-%COMP%]{position:absolute;font-size:23px;right:18px;bottom:0}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]{height:600px;display:flex;position:relative}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]{overflow-y:scroll;overflow-x:hidden;height:100%;padding-left:10px;padding-right:10px;border-right:1px solid #e5e5e5}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]   .overfolw-eclipis[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]   .icon-font-size13[_ngcontent-%COMP%]{font-size:13px}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]   .icon-font-size12[_ngcontent-%COMP%]{font-size:12px}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]   .span-m-l-10[_ngcontent-%COMP%]{margin-left:10px}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]   .active-span-styl[_ngcontent-%COMP%]{color:#23c6c8}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;background-color:#aaa}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .left-tree[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .right-image[_ngcontent-%COMP%]{margin-left:3px;flex:1;position:relative}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .right-image[_ngcontent-%COMP%]   .erro-info-color[_ngcontent-%COMP%]{color:#e45f5f;word-break:break-all}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .right-image[_ngcontent-%COMP%]   .right-image-styl[_ngcontent-%COMP%]{position:absolute;max-width:80%;top:0;bottom:0;left:0;right:0;margin:auto}.content-wrapper[_ngcontent-%COMP%]   .select-insert-img[_ngcontent-%COMP%]   .right-image[_ngcontent-%COMP%]   .middle-span-styl[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}']}),e}();function A(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275elementStart"](1,"span",11),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"span"),o["\u0275\u0275text"](5,"https://tinydesign.cloudbu.huawei.com/run/"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,1,"TINY_DESIGIN_LINK_CASE")))}var z=function(){function e(e,t,n){this.translate=e,this.modal=t,this.notification=n,this.inputValue="",this.validTinyDesignUrl=!0}return e.prototype.ngOnInit=function(){},e.prototype.closeModal=function(e){if(e)this.modal.destroy();else if(this.inputValue){var t=/^http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?$/i.test(this.inputValue),n=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/.exec(this.inputValue),i=!1;n&&n.length&&(i="tinydesign.cloudbu.huawei.com"==n[0]),this.validTinyDesignUrl=t&&i,this.validTinyDesignUrl&&this.modal.destroy({url:this.inputValue})}},e.prototype.linkToHelpFile=function(){window.open("https://clouddevops.huawei.com/domains/2/wiki/9/WIKI2022012400476","_blank")},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](b.c),o["\u0275\u0275directiveInject"](g.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["lnsert-tinydesign-link"]],decls:16,vars:12,consts:[[1,"content-wrapper"],[1,"select-directory-header"],[1,"icon-color","icon-font-size14","position-right-close","iconfont","icon-close","pointer-cursor",3,"click"],[1,"p-15","link-content"],["rows","8",1,"ant-input","textarea-url-item",3,"placeholder","ngModel","ngModelChange"],["class","error-message m-t-5",4,"ngIf"],[1,"bottom-button"],[1,"help-button","pointer-cursor",3,"click"],[3,"textContent"],[1,"confirm-button","pointer-cursor",3,"click"],[1,"error-message","m-t-5"],[1,"box-block"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"span"),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"i",2),o["\u0275\u0275listener"]("click",function(){return t.closeModal(!0)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",3),o["\u0275\u0275elementStart"](7,"textarea",4),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.inputValue=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,A,6,3,"div",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",6),o["\u0275\u0275elementStart"](10,"button",7),o["\u0275\u0275listener"]("click",function(){return t.linkToHelpFile()}),o["\u0275\u0275element"](11,"span",8),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"button",9),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275element"](14,"span",8),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,6,"ADD_TING_LINK")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("placeholder","\u7c98\u8d34Tiny Design\u94fe\u63a5\uff0c\u5982\uff1ahttps://tinydesign.cloudbu.huawei.com/...")("ngModel",t.inputValue),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.validTinyDesignUrl),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](12,8,"HELP_FILE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](15,10,"COMMON_BUTTON_CONFIRM")))},directives:[O.d,O.k,O.l,y.n],pipes:[v.b],styles:[".draggable-wrapper[_ngcontent-%COMP%]{display:flex}.content-wrapper[_ngcontent-%COMP%]{position:relative}.content-wrapper[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#ff4c4c}.content-wrapper[_ngcontent-%COMP%]   .textarea-url-item[_ngcontent-%COMP%]{width:100%;border-radius:5px;border:1px solid #aaa;border-color:#aaa!important}.content-wrapper[_ngcontent-%COMP%]   .textarea-url-item[_ngcontent-%COMP%]:active, .content-wrapper[_ngcontent-%COMP%]   .textarea-url-item[_ngcontent-%COMP%]:focus{color:#676a6c!important}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]{line-height:30px;position:relative;right:18px;bottom:10px;padding-bottom:50px}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .help-button[_ngcontent-%COMP%]{position:absolute;background:#fff;padding:0 20px;border-radius:4px;right:80px;text-align:center;color:#23c6c8;top:12px;border:1px solid #23c6c8}.content-wrapper[_ngcontent-%COMP%]   .bottom-button[_ngcontent-%COMP%]   .confirm-button[_ngcontent-%COMP%]{position:absolute;background:#23c6c8;padding:0 20px;border-radius:4px;border:none;right:0;text-align:center;color:#fff;top:12px}.content-wrapper[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]{height:45px;width:100%;line-height:45px;text-align:left;position:relative;padding-left:18px;font-size:15px}.content-wrapper[_ngcontent-%COMP%]   .select-directory-header[_ngcontent-%COMP%]   .position-right-close[_ngcontent-%COMP%]{position:absolute;font-size:23px;right:18px;bottom:0}"]}),e}(),R=(n("5WJX"),n("7Cf0"),n("Rf5d"),n("DWi2"),n("CQIl"),n("0tw5"),n("L+zx"),n("cZOo"),n("/75p"),n("w9f+"),n("ZNhe"),n("LTPx"),n("9VcC"),n("hVuo"),n("Kwdf"),n("iGOs"),n("hOyB"),n("Oupb"),n("7anz"),n("z7CG"),n("66wf"),n("Cp0W"),n("kOcP"),n("aVf9"),n("VaDg"),n("AzV5"),n("NN4D"),n("eOTG"),n("7zcm"),n("DvpE"),n("Nl51"),n("Qjfq"),n("Tqh3"),n("B9f7"),n("vFQT"),n("B9FH"),n("9l1e"),n("z9gd"),n("8YmR")),L=n("AWuS"),N=n("jhN1"),j=function(){function e(e,t,n,i){this.translate=e,this.sanitizer=t,this.VisionEditorService=n,this.notification=i,this.modelShowCloseChange=new o.EventEmitter}return e.prototype.closeModal=function(){this.modelShowCloseChange.emit("create"==this.mode?this.newDiagramInfo:this.resolve.imageElement)},e.prototype.ngOnInit=function(){this.currentLang=this.translate.store.currentLang,this.mode=this.resolve.mode,"create"==this.mode?this.queryWorkitemDiagrams(this.resolve.createOptions):this.showIframe(this.resolve.projectUUID,this.resolve.diagramUUID)},e.prototype.showIframe=function(e,t){var n=window.location.origin,i="https://cloudmodeling.gamma.tools.huawei.com/";(n.includes("clouddevops.huawei.com")||n.includes("wiki.his.huawei.com"))&&(i="https://cloudmodeling.tools.huawei.com/"),this.iframeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(i+"projectspace/detail/"+e+"?projectDiagramUUID="+t+"&fromOtherSource=vision&hideDragonHead=true")},e.prototype.queryWorkitemDiagrams=function(e){var t=this,n="",i=0;this.VisionEditorService.queryAllDiagrams(e.sn).subscribe(function(o){n="en"==t.currentLang?"New Diagram":"\u65b0\u5efa\u6a21\u578b\u56fe";for(var r=0;r<o.length;r++){var a=o[r].name.match(new RegExp("^"+n+"(\\d*)"));a&&a[1]&&Number(a[1])>=i&&(i=Number(a[1]))}e.diagramName=n+(i+=1),t.createDiagram(e)},function(){})},e.prototype.createDiagram=function(e){var t=this,n=e.sn;delete e.sn,this.VisionEditorService.createDiagram(n,e).subscribe(function(n){if(n){if(t.newDiagramInfo=n,t.newDiagramInfo.isEmptyImage||t.newDiagramInfo.imageUrl&&t.newDiagramInfo.imageUrl.contains("noData")){var i=window.location.origin,o="https://cloudmodelingapi.gamma.tools.huawei.com/cloudmodelingdrawiosvr/";(i.includes("clouddevops.huawei.com")||i.includes("wiki.his.huawei.com"))&&(o="https://cloudmodelingapi.tools.huawei.com/cloudmodelingdrawiosvr/"),t.newDiagramInfo.imageUrl=o+"d?diagramUUID="+t.newDiagramInfo.uuid+"&fromSys=Vision&versionUUID=&userId="+t.newDiagramInfo.createUser}t.showIframe(e.projectSpaceUUID,t.newDiagramInfo.uuid)}else t.notification.error(t.translate.instant("CREATE_FAILED"),"")},function(){})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](N.b),o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](g.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["cloud-modeling-iframe"]],inputs:{resolve:"resolve"},outputs:{modelShowCloseChange:"modelShowCloseChange"},decls:5,vars:4,consts:[["nzClassName","cloud-modeling-modal",3,"nzVisible","nzClosable","nzFooter"],[1,"flex-box","cloud-modeling-wrapper"],["id","cloud-modeling-iframe",2,"width","100%","height","100%","z-index","1400",3,"src"],[1,"box-inline","text-white","m-l-xs","pointer-cursor","right-close-btn",3,"click"],[1,"x-style","iconfont","colse","icon-close"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nz-modal",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275element"](2,"iframe",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275element"](4,"i",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("src",t.iframeUrl,o["\u0275\u0275sanitizeResourceUrl"]))},directives:[b.a],styles:[".cloud-modeling-modal{width:97vw!important;height:calc(100vh - 3vw)!important;position:fixed;top:1.5vw;left:1.5vw}.cloud-modeling-modal .flex-box{width:100%;height:100%;display:flex}.cloud-modeling-modal .flex-box .cloud-modeling-wrapper{background-color:#fff;width:100%;height:100%}.cloud-modeling-modal .btn-img{width:17px;height:17px}.cloud-modeling-modal .right-close-btn{position:fixed;top:1.5vw;right:0}.cloud-modeling-modal .ant-modal{width:97vw!important;height:calc(100vh - 3vw)!important}.cloud-modeling-modal .ant-modal-content{width:97vw;position:relative;height:calc(100vh - 3vw)!important}.cloud-modeling-modal .ant-modal-body{padding:0!important;width:97vw;height:calc(100vh - 3vw);overflow-y:scroll;-ms-overflow-style:none}.cloud-modeling-modal .ant-modal-body::-webkit-scrollbar{width:0!important}.cloud-modeling-modal .ant-select{width:100%}.cloud-modeling-modal .x-style{font-size:1.3vw}"],encapsulation:2}),e}(),V=["docContentWrapper"];function F(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"cloud-modeling-iframe",6),o["\u0275\u0275listener"]("modelShowCloseChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getIframeCloseData(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("resolve",i.resolve)}}var B=function(){function e(e,t,n,i){var r=this;this.editorService=e,this.translate=t,this.modal=n,this.ele=i,this.height=300,this.structuredTableInfo=null,this.saveContent=!1,this.articleAttachmentInfo=null,this.tingDesignInfo=null,this.tableConfigInfo={},this.sketchPadEnable=!1,this.richTextOnChange=new o.EventEmitter,this.handoverMarkdown=new o.EventEmitter,this.focusOnEditor=new o.EventEmitter,this.initInstanceCallback=new o.EventEmitter,this.tableEventEmit=new o.EventEmitter,this.saveContentEmit=new o.EventEmitter,this.fullTableEmit=new o.EventEmitter,this.imgLoaded=new o.EventEmitter,this.readonly=!1,this.tinymceInit={},this.diagramOptions=[],this.isIframeShow=!1,this.cloudModelingHost="https://cloudmodeling.tools.huawei.com/",this.richTextEditorInit=!0,this.onDestroy$=new s.a,this.hideMDChange$=new s.a,this.cloudModelingSaveImage=function(e){e.origin===r.cloudModelingHost&&"wiki-save-img-can-close-iframe"===e.data&&r.closeIframeHandler()}}return Object.defineProperty(e.prototype,"toolbarContainer",{get:function(){return this.toolbarContailerSelector?this.toolbarContailerSelector:"."+this.richTextId+"-container .toolbar"},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.spaceUUID="",window.addEventListener("message",this.cloudModelingSaveImage,!1),window.addEventListener("sketch-pad-delete",this.removeSkecthPadHandler.bind(this)),this.listenGLobalEvents()},Object.defineProperty(e.prototype,"_isInline",{get:function(){return this.isInline||void 0===this.isInline},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(e){var t=e.hideMarkdown;t&&this.hideMDChange$.next(t.currentValue)},e.prototype.ngAfterViewInit=function(){var e;return Object(i.b)(this,void 0,void 0,function(){var t=this;return Object(i.e)(this,function(n){return tinymce.init({readonly:this.readonly,selector:"#"+this.richTextId,content_style:this._isInline?"":"body { font-size: 14px }",fixed_toolbar_container:this.toolbarContainer,menubar:!1,inline:this._isInline,statusbar:!1,contextmenu:"table",table_toolbar:"tablefull tablewide | tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol | tablecopy tablecellbackgroundcolor",tablecellvalign:"middle",table_column_resizing:"resizetable",convert_urls:!1,paste_data_images:!0,image_dimensions:!1,images_reuse_filename:!0,link_title:!1,importcss_append:!0,autosave_ask_before_unload:!1,default_link_target:"_blank",base_url:"/knowledge-ui/tinymce",language:"zh"===localStorage.getItem("NG_TRANSLATE_LANG_KEY")?"zh_CN":"en_US",extended_valid_elements:"ce-story-structured-table[structured-table-info|story-structured-table-mode|structure-table-id],ce-article-attachment[article-attachment-info|article-attachment-mode|article-attachment-id|article-attachment-scene],ce-tinydesign-page[tinydesign-src|creat-time|tinydesign-mode],sketch-pad[graph-id|page-id|edit-mode|height|history-id],ce-tooltip[data-content|style]",plugins:this.editorService.initEditPlugins(this.richTextMode,this.richTextTools),toolbar:this.editorService.initEditToolbar(this.richTextMode,this.richTextTools,this.hideMarkdown),textpattern_patterns:this.editorService.initEditTextPattern(),block_formats:this.editorService.initEditBlockFormats(),fontsize_formats:this.editorService.initEditFontsizeFormats(),color_map:this.editorService.initEditColor(),codesample_languages:this.editorService.initCodeLanguage(),toolbar_mode:"floating",icons:"vision_editor_icons",paste_postprocess:function(e,n){n.node.querySelectorAll(".annotation-bg").forEach(function(e){e.classList.remove("annotation-bg")}),n.node.querySelectorAll("[data-highlight-id]").forEach(function(e){e.removeAttribute("data-highlight-id")}),n.node.querySelectorAll("[data-highlight-uuid]").forEach(function(e){e.removeAttribute("data-highlight-uuid")}),n.node.innerHTML=n.node.innerHTML.replace(/(^(?!href=")(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$)/g,"<a href='$1' target='_blank'>$1</a>"),t.buildTableElement(n)},lineheight_formats:"1 1.5 1.6 1.75 1.8 2 3 4 5",codesample_global_prismjs:!0,smart_paste:!1,quickbars_insert_toolbar:!1,quickbars_selection_toolbar:!1,quickbars_image_toolbar:!1,formats:{h1:{block:"h1",classes:"h1-fontsize",remove:"all"},h2:{block:"h2",classes:"h2-fontsize",remove:"all"},h3:{block:"h3",classes:"h3-fontsize",remove:"all"},h4:{block:"h4",classes:"h4-fontsize",remove:"all"},h5:{block:"h5",classes:"h5-fontsize",remove:"all"},h6:{block:"h6",classes:"h6-fontsize",remove:"all"}},style_formats:[{title:"h1",format:"h1"},{title:"h2",format:"h2"},{title:"h3",format:"h3"},{title:"h4",format:"h4"},{title:"h5",format:"h5"},{title:"h6",format:"h6"}],images_upload_handler:function(e,n,o,r){return Object(i.b)(t,void 0,void 0,function(){var t,r,a,c;return Object(i.e)(this,function(i){switch(i.label){case 0:return e.blob().size/1024/1024>50?(o("\u60a8\u7684\u56fe\u7247\u592a\u5927\u4e86\uff0c\u5f53\u524d\u7cfb\u7edf\u4ec5\u652f\u630150M\u4ee5\u4e0b\u7684\u56fe\u7247\u4e0a\u4f20",{remove:!0}),[2]):[4,h.d];case 1:t=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.editorService.upload_file_storage("image",t.user_name,e.blob(),e.filename()).toPromise()];case 3:return 200===(r=i.sent()).code?n(null===(c=r.data)||void 0===c?void 0:c.image_url):o(this.translate.instant(r.message),{remove:!0}),[3,5];case 4:return a=i.sent(),Object(L.b)(a),o(a.message,{remove:!0}),[3,5];case 5:return[2]}})})},setup:function(e){t.editor=e,t.workitemInfo&&t.workitemInfo.productId&&e.ui.registry.addMenuButton("editImage",{icon:"edit-images",tooltip:"CloudModeling",fetch:function(e){t.queryDiagramOptions(e)}}),t.structuredTableInfo&&e.ui.registry.addMenuButton("structuredtable",{icon:"structured-table-icon",tooltip:"\u7ed3\u6784\u5316\u8868\u683c",fetch:function(e){t.queryTableOptions(e)}}),t.tingDesignInfo&&e.ui.registry.addMenuButton("thirdpartyservice",{icon:"tiny-design-icon",tooltip:"\u7b2c\u4e09\u65b9\u670d\u52a1",fetch:function(e){t.queryServerOptions(e)}}),t.articleAttachmentInfo&&e.ui.registry.addButton("articleAttachment",{icon:"article-attachment-icon",tooltip:"\u63d2\u5165\u9644\u4ef6",onAction:function(){for(var e=document.querySelectorAll("ce-article-attachment")||[],n=0;n<e.length;n++)if("create"===e[n].getAttribute("article-attachment-scene"))return;window.hwa("trackStructEvent",{label:"\u4e0a\u4f20\u9644\u4ef6"}),t.editorService.queryArticleAttachmentNumber().subscribe(function(e){var n=JSON.stringify(t.articleAttachmentInfo);t.editor.insertContent("<ce-article-attachment article-attachment-info="+n+' article-attachment-mode="edit" article-attachment-id="'+e+'" article-attachment-scene="create"></ce-article-attachment>&nbsp;')},function(){})}}),t.hideMarkdown||e.ui.registry.addButton("toMd",{icon:"to-md",tooltip:"\u8f6c\u6362\u4e3aMarkdown",onAction:function(){t.handoverMarkdown.emit(null)},onSetup:function(e){e.setDisabled(t.hideMarkdown);var n=t.hideMDChange$.pipe(Object(l.a)(t.onDestroy$)).subscribe(function(t){e.setDisabled(t)});return function(){n.unsubscribe()}}}),t.saveContent&&e.ui.registry.addButton("saveContent",{icon:"save-content",tooltip:t.translate.instant("SAVE"),onAction:function(){t.saveContentEmit.emit(null)}}),t.sketchPadEnable&&t.workitemInfo&&e.ui.registry.addButton("sketchpad",{icon:"sketch-pad",tooltip:"\u753b\u677f",onAction:function(){t.editorService.createSketchPad("wiki",t.workitemInfo.sn).subscribe(function(e){e&&e.pages&&e.pages.length&&t.editor.insertContent('<br><sketch-pad graph-id="'+e.id+'" page-id="'+e.pages[0].id+'" edit-mode="edit"></sketch-pad>&nbsp;')},function(){})}}),e.on("change",function(){t.richTextOnChange.emit({initChange:t.richTextEditorInit})}),e.on("keydown",function(t){9==t.keyCode&&(e.execCommand(t.shiftKey?"Outdent":"Indent"),t.preventDefault(),t.stopPropagation())}),e.on("mousedown",function(){t.focusOnEditor.emit()}),e.on("SetContent",function(){tinymce.dom.DomQuery("tr",e.getBody()).removeAttr("data-mce-style"),setTimeout(function(){t.editorService.docTableView()})}),e.on("FormatApply",function(t){var n=t.format,i=e.selection.getNode();if("p"===n||/^h[1-6]$/.test(n)){for(;i&&i.tagName&&i.tagName.toLowerCase()!==n;)i=null==i?void 0:i.parentElement;if("p"===n)return i.removeAttribute("class"),void i.removeAttribute("id");/^h[1-6]$/.test(n)&&(i.classList.length>1&&(i.className=n+"-fontsize"),i.id||i.setAttribute("id",Object(h.k)("",8)))}}),e.on("TableModified",function(n){var i,o,r,a;t.resetTableHight(n.table);for(var c=n.table.rows,l=0;l<c.length;l++)if(""==c[l].innerHTML){var s=null===(o=null===(i=c[l])||void 0===i?void 0:i.previousSibling)||void 0===o?void 0:o.cells;if(null==s?void 0:s.length)for(var d=0;d<(null==s?void 0:s.length);d++)"TD"==(null===(r=s[d])||void 0===r?void 0:r.nodeName)&&(null===(a=s[d])||void 0===a?void 0:a.rowSpan)>1&&(s[d].rowSpan-=1);return c[l].parentNode.removeChild(c[l]),void e.execCommand("mceTableToggleClass",!1,"refresh-table")}}),e.on("ObjectSelected",function(e){var n,i;"TABLE"==e.target.nodeName&&(t.tableDragDom||document.querySelectorAll('[oncontextmenu="return false"]').forEach(function(e){var n;"BODY"==(null===(n=null==e?void 0:e.parentNode)||void 0===n?void 0:n.nodeName)&&(t.tableDragDom=e)}),"hidden"==(null===(i=null===(n=t.tableDragDom)||void 0===n?void 0:n.style)||void 0===i?void 0:i.visibility)&&(t.tableDragDom.style.visibility="visible"))})},init_instance_callback:function(e){t.editor=e,t.description&&e.setContent(t.description),e.undoManager.clear(),e.save(),e.execCommand("selectAll"),t.richTextEditorInit=!1,e.selection.getRng().collapse(!1),e.focus(),t.initInstanceCallback.emit(),setTimeout(function(){if(document.getElementById(t.richTextId)){setTimeout(function(){t.addListenerToCloudModelingImages()},300);var e=function(e){e.stopPropagation(),e.stopImmediatePropagation()};t.onDestroy$.subscribe(function(){t.ele.nativeElement.removeEventListener("focusin",e),t.ele.nativeElement.removeEventListener("focus",e),t.ele.nativeElement.removeEventListener("drop",n)}),t.ele.nativeElement.addEventListener("focusin",e,{capture:!0}),t.ele.nativeElement.addEventListener("focus",e,{capture:!0});var n=function(e){setTimeout(function(){t.addListenerToCloudModelingImages.apply(t)},300)};t.ele.nativeElement.addEventListener("drop",n),t.imgAddEvent()}})}}),(null===(e=this.tableConfigInfo)||void 0===e?void 0:e.fullTable)&&(document.getElementById("doc-app").addEventListener("tinymce_table_full",this.tinymceTableFull.bind(this),!1),document.getElementById("doc-app").addEventListener("tinymce_table_wide",this.tinymceTableWide.bind(this),!1)),[2]})})},e.prototype.imgAddEvent=function(){var e=this,t=this.docContentWrapper.nativeElement.querySelectorAll("img");Array.from(t).forEach(function(t){t.hasAttribute("loading")&&"lazy"==t.loading&&(t.complete?e.emitLoaded():t.addEventListener("load",e.emitLoaded.bind(e)))})},e.prototype.emitLoaded=function(e){this.imgLoaded.emit(e)},e.prototype.tinymceTableWide=function(e){this.editorService.tinymceTableWide(e)},e.prototype.tinymceTableFull=function(e){this.editorService.tinymceTableFull(e),tinymce.activeEditor.execCommand("mceFullScreen"),this.fullTableEmit.emit(e)},e.prototype.removeSkecthPadHandler=function(e){var t=document.getElementById(this.richTextId).getElementsByTagName("sketch-pad");if(t.length)for(var n=0;n<t.length;n++){var i=t[n],o=i.getAttribute("page-id");if(o&&o==String(e.detail.pageId)&&i.parentNode){i.parentNode.removeChild(i);break}}},e.prototype.buildTableElement=function(e){e.node.querySelectorAll("table").forEach(function(e){var t=0;e.querySelectorAll("tr").forEach(function(e){t+=30}),e.style.height=t+"px"})},e.prototype.resetTableHight=function(e){e.style.height&&(e.style.height="auto",e.querySelectorAll("tr").forEach(function(e){var t=e.style.height;t&&e.querySelectorAll("td").forEach(function(e){e.rowSpan<=1&&e.style.height&&(e.style.height=t)})}))},e.prototype.queryTableOptions=function(e){var t,n=this,i=[];(null===(t=this.structuredTableInfo)||void 0===t?void 0:t.feture)&&this.editorService.queryTableInfoBySpace(this.structuredTableInfo.domainId,this.structuredTableInfo.category||"FEATURE_DECOMPOSITION").subscribe(function(t){t.length&&t.forEach(function(e){"FEATURE_DECOMPOSITION"===(null==e?void 0:e.category)&&i.push({type:"menuitem",text:"story"+n.translate.instant("TABLE_LIST",""),onAction:function(){n.createStructuredtable()}}),"COE_IMPROVEMENT_MEASURE"===(null==e?void 0:e.category)&&i.push({type:"menuitem",text:"\u6539\u8fdb\u63aa\u65bd",onAction:function(){n.createStructuredtable()}}),n.structuredTableInfo.feture.fetureTableCategory={id:e.id,category:e.category,number:e.number,valid:e.valid,title:e.title,relateObjects:e.relateObjects,assignedDomainType:e.assignedDomainType}}),e(i)},function(){})},e.prototype.queryServerOptions=function(e){var t=this;e([{type:"menuitem",text:"Tiny Design",onAction:function(){t.lnsertTinydesignLink()}}])},e.prototype.lnsertTinydesignLink=function(){var e=this;window.hwa("trackStructEvent",{label:"\u63d2\u5165Tiny Design"}),this.modal.create({nzContent:z,nzBodyStyle:{padding:"0"},nzFooter:null,nzWidth:500,nzClosable:!1}).afterClose.subscribe(function(t){e.insertTinydesign(t)})},e.prototype.insertTinydesign=function(e){var t=(new Date).getTime();this.editor.insertContent("<br><ce-tinydesign-page tinydesign-src="+e.url+" creat-time="+t+" tinydesign-mode=edit></ce-tinydesign-page>&nbsp;")},e.prototype.createStructuredtable=function(){var e,t,n,i=this;if("COE_IMPROVEMENT_MEASURE"===(null===(e=this.structuredTableInfo)||void 0===e?void 0:e.category)){var o=document.querySelectorAll("ce-story-structured-table")||[];if(o&&o.length||"\u7ea0\u6b63/\u6539\u8fdb\u63aa\u65bd"!=(null===(t=this.structuredTableInfo)||void 0===t?void 0:t.paragraphTitle))return}var r=[{title:"",assignedDomainId:this.structuredTableInfo.domainId,assignedDomainType:"DOMAIN",category:this.structuredTableInfo.feture.fetureTableCategory.category,relateObjects:[{relatedCategory:"COE_IMPROVEMENT_MEASURE"===(null===(n=this.structuredTableInfo)||void 0===n?void 0:n.category)?"COE":"FEATURE",relatedType:"CONTENT",relationType:"ENTITY_OBJECT",relatedNumber:this.structuredTableInfo.contentNumber}]}];this.editorService.createStructuredTable(r).subscribe(function(e){var t=JSON.stringify(i.structuredTableInfo);i.editor.insertContent("<br><ce-story-structured-table structured-table-info="+t+' structure-table-id="'+e[0].number+'" story-structured-table-mode="edit"></ce-story-structured-table><br>')},function(){})},e.prototype.queryDiagramOptions=function(e){var t=this,n=this.workitemInfo.productId;this.diagramOptions=[],this.editorService.queryAvailableModelOption(n).subscribe(function(n){if(n){t.spaceUUID=n.projectSpaceUUID;for(var o=n.oneLevel,r=n.twoLevel,a=[],c=0;c<o.length;c++){var l=o[c];if("UML"==(l=Object(i.a)(Object(i.a)({},l),{children:[]})).name){for(var s=0;s<r.length;s++)(d=r[s]).parentTypeUUID==l.uuid&&l.children.push(d);a.push(l)}else{for(s=0;s<r.length;s++){var d;(d=r[s]).parentTypeUUID==l.uuid&&l.children.push(d)}t.diagramOptions.push(l)}}a.length>0&&(t.diagramOptions=a.concat(t.diagramOptions));var p=[],u=t.diagramOptions.length;if(u>0){var m=function(e){var n=t.diagramOptions[e];p.push({type:"nestedmenuitem",text:n.name,getSubmenuItems:function(){return t.getSubmenuItemsFunc(n.children)}})};for(c=0;c<u;c++)m(c)}var h=[{type:"menuitem",text:t.translate.instant("INSERT_EXISTING_PICTURE",""),onAction:function(){t.openInsertPictureModal()}},{type:"nestedmenuitem",text:t.translate.instant("DRAWING",""),getSubmenuItems:function(){return p}}];e(h)}},function(){})},e.prototype.openInsertPictureModal=function(){var e=this;this.modal.create({nzContent:D,nzComponentParams:{workitemInfo:this.workitemInfo},nzBodyStyle:{padding:"0"},nzFooter:null,nzWidth:900,nzClosable:!1}).afterClose.subscribe(function(t){e.confirmFunc(t)})},e.prototype.getSubmenuItemsFunc=function(e){var t=this,n=[],i=e.length;if(i>0)for(var o=function(i){var o=e[i];n.push({type:"menuitem",text:o.name,onAction:function(){t.selectDiagramType(o)}})},r=0;r<i;r++)o(r);return n},e.prototype.selectDiagramType=function(e){this.openModelingEditPage(null,"create",{productId:this.workitemInfo.productId,sn:this.workitemInfo.sn,projectSpaceUUID:this.spaceUUID,itemName:this.workitemInfo.itemName,itemUrl:this.workitemInfo.itemUrl,description:"",diagramTypeUUID:e.uuid})},e.prototype.openModelingEditPage=function(e,t,n){this.resolve={mode:t=t||"edit",createOptions:n=n||{},imageElement:e?e.currentTarget:null,projectUUID:e?e.currentTarget.getAttribute("spaceuuid"):null,diagramUUID:e?e.currentTarget.getAttribute("diagramuuid"):null},this.isIframeShow=!0,clearTimeout(this.cloudModleingIframeCloseTimer)},e.prototype.addListenerToCloudModelingImages=function(){var e=document.getElementById(this.richTextId).getElementsByTagName("img"),t="cloudmodeling.gamma.tools.huawei.com",n=window.location.origin;(n.includes("clouddevops.huawei.com")||n.includes("wiki.his.huawei.com"))&&(t="cloudmodeling.tools.huawei.com");for(var i=0;i<e.length;i++){var o=e[i],r=o.dataset.href;r&&r.includes(t)&&this.cloudModelingImageHandler(r,o)}},e.prototype.cloudModelingImageHandler=function(e,t){var n=e.match(/projectspace\/detail\/(.*)\?/),i=e.match(/openedDiagramUUID\=(.*)\&/);n.length>0&&i.length>0&&(t.setAttribute("spaceUUID",n[1]),t.setAttribute("diagramUUID",i[1]),t.removeEventListener("click",this.openModelingEditPage.bind(this)),t.addEventListener("click",this.openModelingEditPage.bind(this)))},e.prototype.getIframeCloseData=function(e){var t=this;this.cloudModelingResultData=e,document.getElementById("cloud-modeling-iframe").contentWindow.postMessage("wiki-save-img-before-close-iframe",this.cloudModelingHost),clearTimeout(this.cloudModleingIframeCloseTimer),this.cloudModleingIframeCloseTimer=setTimeout(function(){t.isIframeShow&&t.closeIframeHandler()},2e3)},e.prototype.closeIframeHandler=function(){this.isIframeShow=!1,this.getIframeCloseDataHandler(this.cloudModelingResultData)},e.prototype.getIframeCloseDataHandler=function(e){var t=this;"create"==this.resolve.mode?this.editor.insertContent('<a href="'+e.openUrl+'" target="_blank"><img data-href="'+e.openUrl+'" src="'+e.imageUrl+'" '+(e.imageUrl?' _src="'+e.imageUrl+'" ':"")+"/></a>"):this.reloadCloudModelingImg(e),setTimeout(function(){t.addListenerToCloudModelingImages()},300)},e.prototype.reloadCloudModelingImg=function(e){var t=null==e?void 0:e.parentElement;t.innerHTML=t.innerHTML},e.prototype.refreshContent=function(e){this.editor&&this.editor.setContent(e)},e.prototype.insertContent=function(e){this.editor&&this.editor.insertContent(e)},e.prototype.insertTableRows=function(e){e&&e instanceof Array&&0!==e.length&&(this.editor.plugins.table.setClipboardRows(e),this.editor.execCommand("mceTablePasteRowAfter"))},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete(),this.richTextEditorInit=!0,window.removeEventListener("message",this.cloudModelingSaveImage,!1),window.removeEventListener("sketch-pad-delete",this.removeSkecthPadHandler),tinymce.remove(this.editor)},e.prototype.confirmFunc=function(e){var t=this;if(e){var n=e.imageObj;if(!n)return;this.editor.insertContent('<a href="'+n.openUrl+'" target="_blank"><img data-href="'+n.openUrl+'" src="'+n.imageUrl+'" '+(n.imageUrl?' _src="'+n.imageUrl+'" ':"")+"/></a>"),setTimeout(function(){t.addListenerToCloudModelingImages()},300)}},e.prototype.disableEditor=function(){this.docContentWrapper.nativeElement.setAttribute("contenteditable","false")},e.prototype.enableEditor=function(){this.docContentWrapper.nativeElement.setAttribute("contenteditable","true")},e.prototype.listenGLobalEvents=function(){var e=this,t=Object(R.a)("DisableEditorUndo",function(){e.editor.undoManager&&(e.editor.undoManager.clear(),e.editor.on("BeforeAddUndo",function(e){e.preventDefault()}))});this.onDestroy$.subscribe(function(){t.unListen()})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](b.d),o["\u0275\u0275directiveInject"](o.ElementRef))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["vision-rich-editor"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](V,1),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.docContentWrapper=n.first)},inputs:{richTextId:"richTextId",description:"description",richTextMode:"richTextMode",height:"height",isInline:"isInline",richTextTools:"richTextTools",workitemInfo:"workitemInfo",hideMarkdown:"hideMarkdown",toolbarContailerSelector:"toolbarContailerSelector",structuredTableInfo:"structuredTableInfo",saveContent:"saveContent",articleAttachmentInfo:"articleAttachmentInfo",tingDesignInfo:"tingDesignInfo",tableConfigInfo:"tableConfigInfo",sketchPadEnable:"sketchPadEnable",readonly:"readonly"},outputs:{richTextOnChange:"richTextOnChange",handoverMarkdown:"handoverMarkdown",focusOnEditor:"focusOnEditor",initInstanceCallback:"initInstanceCallback",tableEventEmit:"tableEventEmit",saveContentEmit:"saveContentEmit",fullTableEmit:"fullTableEmit",imgLoaded:"imgLoaded"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:6,vars:8,consts:[["id","doc-app"],[1,"toolbar"],[1,"box"],[1,"doc-cnt",3,"id"],["docContentWrapper",""],[3,"resolve","modelShowCloseChange",4,"ngIf"],[3,"resolve","modelShowCloseChange"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275element"](3,"div",3,4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,F,1,1,"cloud-modeling-iframe",5)),2&e&&(o["\u0275\u0275classMap"](t.richTextId+"-container"),o["\u0275\u0275advance"](3),o["\u0275\u0275classMap"](t.richTextId),o["\u0275\u0275styleProp"]("height",t.height-40+"px"),o["\u0275\u0275property"]("id",t.richTextId),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isIframeShow))},directives:[y.n,j],styles:[".tox-tinymce.tox-tinymce{border:none}.tox.tox{display:flex!important}.tox.tox .tox-toolbar__overflow{background:none}.tox.tox .tox-tbtn{width:30px;height:30px}.tox.tox .tox-tbtn.tox-tbtn--select{width:auto}.tox.tox .tox-tbtn.tox-tbtn--select .tox-tbtn__select-label{width:70px}.tox.tox .tox-tbtn.tox-split-button__chevron{width:16px}.tox.tox .tox-tbtn svg{fill:#888}.tox .tox-collection--list .tox-collection__group{min-width:130px!important}#doc-app{line-height:1.75;margin:0;font-size:16px;color:#494949;position:relative}#doc-app .toolbar{max-width:100%}#doc-app .tox .tox-toolbar{background:none}#doc-app .tox-tinymce-inline{visibility:visible!important}#doc-app .doc-cnt{overflow:auto;position:relative;padding:10px;word-break:break-word}#doc-app .doc-cnt p{text-indent:0}#doc-app .doc-cnt p img{filter:drop-shadow(rgba(0,0,0,.14) 0 0 4px);padding:6px}#doc-app .doc-cnt:focus{outline:0}#doc-app ::-webkit-scrollbar{width:8px;height:8px}#doc-app ::-webkit-scrollbar-thumb{border-radius:10px;background-color:#aaa}#doc-app ::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}#doc-app .h1-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h1-fontsize,#doc-app .h1-fontsize *{font-size:26px!important}#doc-app .h2-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h2-fontsize,#doc-app .h2-fontsize *{font-size:22px!important}#doc-app .h3-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h3-fontsize,#doc-app .h3-fontsize *{font-size:20px!important}#doc-app .h4-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h4-fontsize,#doc-app .h4-fontsize *{font-size:18px!important}#doc-app .h5-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h5-fontsize,#doc-app .h5-fontsize *,#doc-app .h6-fontsize{font-size:16px!important}#doc-app .h6-fontsize{font-weight:700;color:#333;margin-top:.5em}#doc-app .h6-fontsize *{font-size:16px!important}#doc-app ol li,#doc-app p,#doc-app ul li{line-height:1.75;margin:0;font-size:16px;color:#494949;font-family:Huawei Sans}#doc-app li ol,#doc-app li ul{padding:0 0 0 20px}#doc-app td p{margin-bottom:0!important}#doc-app td img{max-width:100%}#doc-app td,#doc-app th{border:1px solid #ccc;padding:.4rem}#doc-app .doc-table-edit-scorll{overflow-x:auto;cursor:default;padding:3px}#doc-app .doc-table-edit-scorll>:nth-child(n){cursor:text}#doc-app .doc-table-active-full{position:fixed;width:100%;height:calc(100% - 60px);background-color:#fff;top:0;left:0;right:0;padding:0 10px 10px;display:block;overflow:scroll}#doc-app .tinymce-table-full-mode{position:fixed;z-index:99;background:#fff;cursor:pointer}#doc-app #back-full-table{cursor:pointer;padding:10px 0}#doc-app #back-full-table:hover{color:#23c6c8}#doc-app #back-full-table i{transform:rotate(90deg);display:inline-block}#doc-app #back-full-table span{margin-left:5px}#doc-app .doc-table-back-icon{padding:0 4px;font-size:20px}#doc-app img{max-width:100%}#doc-app ::-moz-selection{color:#494949}#doc-app ::selection{color:#494949}.app-doc-table-full{position:fixed!important;width:100%;top:0;left:0}"],encapsulation:2}),e}(),U=n("+2qM"),W=n("/0GP"),H=n.n(W),G=function(){function e(e,t,n){var i=this;this.emitService=e,this.translate=t,this.modal=n,this.switchToRTF=new o.EventEmitter,this.getMDContentHandler=new o.EventEmitter,this.saveContentEmit=new o.EventEmitter,this.vditorAfter=new o.EventEmitter,this.bodyCloseMenus=function(e){var t=i.filterHeadTagName(e),n=document.querySelectorAll(".vditor-hint");n.length&&n.forEach(function(n){n===e.target||t||(n.style.display="none")})},this.filterHeadTagName=function(e){var t=!1;return["BUTTON","svg","path"].includes(e.target.nodeName)&&"headings"===e.target.getAttribute("data-type")&&(t=!0),t}}return e.prototype.ngOnChanges=function(e){var t,n;"description"in e&&this.description!==(null===(t=this.vditor)||void 0===t?void 0:t.getValue())&&(null===(n=this.vditor)||void 0===n||n.setValue(this.description))},e.prototype.ngOnInit=function(){var e,t=this,n=document.body.clientWidth>1200?"sv":"ir";this.model=null===(e=document.getElementsByClassName("page")[0].classList)||void 0===e?void 0:e.contains("create-article-height"),this.vditor=new H.a("vditor",{toolbar:[{name:"save",tipPosition:"s",tip:this.translate.instant("SAVE"),icon:'<svg t="1646704022786" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11121" width="32" height="32"><path d="M1002.24 315.52L693.12 19.2c-13.44-12.16-30.72-19.2-48.64-19.2H69.76C31.36 0 0 31.36 0 69.76v884.48C0 992.64 31.36 1024 69.76 1024h884.48c38.4 0 69.76-31.36 69.76-69.76V366.08c0-19.2-7.68-37.76-21.76-50.56zM379.52 128h142.08v175.36H379.52V128z m323.84 768H314.88v-240.64h388.48V896zM896 896h-96.64V604.16c0-24.96-19.84-44.8-44.8-44.8H263.68c-24.96 0-44.8 19.84-44.8 44.8V896H128V128h90.88v232.32c0 21.76 17.92 39.68 39.68 39.68h319.36c21.76 0 39.68-17.92 39.68-39.68V128h3.84L896 390.4V896z" fill="#666666" p-id="11122"></path></svg>',click:function(){t.saveContentEmit.emit()}},"headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|",{name:"upload",tip:this.translate.instant("UPLOAD_IMG")},"table","|","undo","redo","|","edit-mode",{name:"sponsor",tipPosition:"s",tip:this.translate.instant("TOGGLE_RICH_TEXT_EDITOR"),icon:'<svg t="1646463844331" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11121" width="32" height="32"><path d="M985.6 831.36H38.4c-21.12 0-38.4 17.28-38.4 38.4v51.2c0 21.12 17.28 38.4 38.4 38.4h947.2c21.12 0 38.4-17.28 38.4-38.4v-51.2c0-21.12-17.28-38.4-38.4-38.4zM42.88 197.12h191.36v490.88c0 23.68 19.2 42.88 42.88 42.88h41.6c23.68 0 42.88-19.2 42.88-42.88V197.12h191.36c23.68 0 42.88-19.2 42.88-42.88v-41.6c0-23.68-19.2-42.88-42.88-42.88H42.88c-23.68-0.64-42.88 19.2-42.88 42.88v41.6c0 23.68 19.2 42.88 42.88 42.88zM981.12 603.52h-293.12c-23.68 0-42.88 19.2-42.88 42.88v41.6c0 23.68 19.2 42.88 42.88 42.88h293.12c23.68 0 42.88-19.2 42.88-42.88v-41.6c0-23.68-19.2-42.88-42.88-42.88zM981.12 69.12h-293.12c-23.68 0-42.88 19.2-42.88 42.88v41.6c0 23.68 19.2 42.88 42.88 42.88h293.12c23.68 0 42.88-19.2 42.88-42.88v-40.96c0-23.68-19.2-43.52-42.88-43.52zM981.12 336.64h-293.12c-23.68 0-42.88 19.2-42.88 42.88v41.6c0 23.68 19.2 42.88 42.88 42.88h293.12c23.68 0 42.88-19.2 42.88-42.88v-41.6c0-23.68-19.2-42.88-42.88-42.88z" fill="#666666" p-id="11122"></path></svg>',click:function(){var e=t.vditor.getValue();marked(e)?t.modal.warning({nzTitle:t.translate.instant("TIPS_SAMPLE"),nzContent:t.translate.instant("TOGGLE_EDITOR_TIPS"),nzOkText:null,nzCancelText:t.translate.instant("TIP_BUTTON_KNOW"),nzClosable:!1,nzClassName:"convert-markdown-tips"}):t.switchToRTF.emit({type:"new-markdown",description:""})}}],toolbarConfig:{pin:!0},cache:{enable:!1},outline:{enable:!0,position:"left"},mode:n,preview:{actions:[],mode:"both",delay:0,theme:{current:"light",path:window.location.origin+"/knowledge-ui/vditor/dist/css/content-theme"}},value:this.description,cdn:window.location.origin+"/knowledge-ui/vditor",upload:{accept:"image/*",max:52428800,url:window.location.origin+"/vision-file-storage/api/file/upload?file_type=image&username="+this.username,success:function(e,n){var i=JSON.parse(n);t.vditor.insertValue("\n![image]("+i.data.image_url+")\n\n",!0)}},input:function(e){var n=t.vditor.getCurrentMode();t.getMDContentHandler.emit({type:"new-markdown-content",description:e,currentMode:n})},after:function(){t.vditorAfter.emit(),t.fixToolbarPosition(),t.emitService.emit({type:"new-markdown",currentMode:n})},editModeCallBack:function(e){t.emitService.emit({type:"markdown-mode-"+e}),t.fixToolbarPosition()}}),document.addEventListener("click",this.bodyCloseMenus)},e.prototype.fixToolbarPosition=function(){document.getElementsByClassName("vditor-outline")[0].classList.add("hidden");var e=document.getElementsByClassName("vditor-toolbar")[0];document.getElementById("newMdToolbar").append(e);var t=document.getElementById("vditorSVScroll"),n=document.getElementById("vditorReset");t&&t.classList.add("slimScrollBar"),n&&n.classList.add("slimScrollBar")},e.prototype.ngOnDestroy=function(){document.removeEventListener("click",this.bodyCloseMenus)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](C.a),o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](b.d))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["markdown-editor"]],inputs:{description:"description",username:"username"},outputs:{switchToRTF:"switchToRTF",getMDContentHandler:"getMDContentHandler",saveContentEmit:"saveContentEmit",vditorAfter:"vditorAfter"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[["id","vditor",3,"ngClass"]],template:function(e,t){1&e&&o["\u0275\u0275element"](0,"div",0),2&e&&o["\u0275\u0275property"]("ngClass",t.model?"create-markdown-height":"update-markdown-height")},directives:[y.l],styles:[".create-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 126px)}.update-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 164px)}[_nghost-%COMP%]     .vditor-toolbar{background-color:#fff;border-bottom:0}[_nghost-%COMP%]     .vditor, [_nghost-%COMP%]     .vditor-ir pre.vditor-reset{border:none}[_nghost-%COMP%]     .vditor-sv{background-color:#fff}[_nghost-%COMP%]     .vditor-toolbar--pin{padding-left:0!important}[_nghost-%COMP%]     .vditor-toolbar__divider{position:relative;top:3px}[_nghost-%COMP%]     .vditor-toolbar__item{top:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped{width:30px;height:30px;padding:5px;border-radius:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped:hover{background:#dee0e2;color:#222f3e}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped input{width:30px;height:30px}[_nghost-%COMP%]     .vditor-hint button:not(.vditor-menu--disabled):hover{background-color:#dee0e2!important;color:#676a6c!important}[_nghost-%COMP%]     .vditor-menu--current{color:#23c6c8!important}[_nghost-%COMP%]     .vditor-reset h1, [_nghost-%COMP%]     .vditor-reset h2{border-bottom:0}[_nghost-%COMP%]     .vditor-ir .vditor-reset{padding:10px 35px!important}[_nghost-%COMP%]     .vditor-ir pre.vditor-reset:focus{background-color:#fff}"]}),e}(),q=["richTextEditor"],$=["ConvertMarkdownWarnTemplate"],K=function(e){return{date:e}};function X(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275element"](1,"span",7),o["\u0275\u0275elementStart"](2,"div",8),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"span",9),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().revertCache()}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"span"),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"span",10),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().cancelCache()}),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](5,4,"RESTORE_CACHE",o["\u0275\u0275pureFunction1"](13,K,i.wikiArticleCacheData.operate_date))),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](8,7,"REVERT")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](11,9,"QUESTION_MARK")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](14,11,"DISCARD_DRAFT"),"?")}}function Y(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",11),o["\u0275\u0275elementStart"](1,"vision-rich-editor",12,13),o["\u0275\u0275listener"]("richTextOnChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onRichTextChanged(e)})("handoverMarkdown",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().switchEditor()})("focusOnEditor",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().focusOnEditorHandler()})("initInstanceCallback",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().initInstanceCallbackHandler()})("saveContentEmit",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().saveContentEmitHandler()})("fullTableEmit",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().fullTableEmitHandler(e)})("imgLoaded",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().imgLoadedHandler()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngStyle",i.styles),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("richTextMode",i.richTextMode)("richTextTools",i.richTextTools)("richTextId",i.richTextId)("isInline",i.isInline)("readonly",i.readonly)("description",i.description)("workitemInfo",i.workitemInfo)("height",i.editorHeight)("hideMarkdown",!i.modeSwitchEnabled)("toolbarContailerSelector",i.toolbarContailerSelector)("structuredTableInfo",i.structuredTableInfo)("saveContent",i.saveContent)("articleAttachmentInfo",i.articleAttachmentInfo)("tingDesignInfo",i.tingDesignInfo)("tableConfigInfo",i.tableConfigInfo)("sketchPadEnable",i.sketchPadEnable)}}var Q=function(e){return{height:e}};function J(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",11),o["\u0275\u0275elementStart"](1,"angular-markdown-editor",14),o["\u0275\u0275listener"]("placeholderChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().placeholderContent=e})("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().description=e})("onFullscreenExit",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().hidePreview()})("switchToRTF",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().switchEditor()})("focusOnEditor",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().focusOnEditorHandler()})("saveContentEmit",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().saveContentEmitHandler()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275styleProp"]("height",i.height+"px"),o["\u0275\u0275property"]("ngStyle",i.styles),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textareaId",i.richTextId+"-markdown")("options",i.editorOptions)("customStyle",o["\u0275\u0275pureFunction1"](9,Q,i.height-45+"px"))("placeholder",i.placeholderContent)("ngModel",i.description)("toolbarContailerSelector",i.toolbarContailerSelector)}}function Z(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"markdown-editor",15),o["\u0275\u0275listener"]("descriptionChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().description=e})("switchToRTF",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().switchRichTextEditor(e)})("getMDContentHandler",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getMDContentHandler(e)})("saveContentEmit",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().saveContentEmitHandler()})("vditorAfter",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().afterMDInit()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("description",i.description)("username",i.username)}}function ee(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"ol",16),o["\u0275\u0275elementStart"](4,"li"),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"li"),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"li"),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"li"),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"li"),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div"),o["\u0275\u0275text"](20),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,7,"MARKDOWN_WARN")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](6,9,"MARKDOWN_WARN:TABLE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,11,"MARKDOWN_WARN:STRUCTURED_TABLE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](12,13,"MARKDOWN_WARN:CODE_SAMPLE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](15,15,"MARKDOWN_WARN:VIDEO")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](18,17,"MARKDOWN_WARN:COMMENT")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](21,19,"MARKDOWN_WARN:CONFIRM")))}var te=function(){function e(e,t,n,i,c,l){var d=this;this.notification=e,this.visionEditorService=t,this.translate=n,this.modal=i,this.ref=c,this.emitService=l,this.modeSwitchEnabled=!0,this.readonly=!1,this.structuredTableInfo=null,this.saveContent=!1,this.articleAttachmentInfo=null,this.showCacheTips=!0,this.tingDesignInfo=!1,this.tableConfigInfo={},this.sketchPadEnable=!1,this.visionOnEditorChanged=new o.EventEmitter,this.getEditorContent=new o.EventEmitter,this.focusOnEditor=new o.EventEmitter,this.initInstanceCallback=new o.EventEmitter,this.saveContentEmit=new o.EventEmitter,this.fullTableEmit=new o.EventEmitter,this.imgLoaded=new o.EventEmitter,this.isLocalEditing=!1,this.changeObj={cacheInfoChange:null,valueChange:null},this.titleChange$=new s.a,this.contentChange$=new s.a,this.editorTypeChange$=new s.a,this.cacheTimerClear$=new s.a,this.onDestory$=new s.a,this.markdownEditorOnShow=function(e){var t=d.description,n="";void 0!==t&&(n=t),e.setContent(n),d.bsEditorInstance=e,d.fromVision||d.afterMDInit()},this.markdownEditorOnChange=function(e){e.setContent(e.getContent()),d.cacheInfo&&d.contentChange$.next(),d.visionOnEditorChanged.emit()},this.markdownEditorOnPaste=function(e){if(!Object(h.o)(e.$textarea.originalEvent)&&0==d.pasteCount){var t=e.$textarea.originalEvent.clipboardData,n=void 0,i=void 0,o=void 0;if(t){if(!(n=t.items))return;i=n[0],o=t.types||[];for(var c=0;c<o.length;c++)if("Files"===o[c]){i=n[c];break}if(i&&"file"===i.kind&&i.type.match(/^image\//i)){var l=i.getAsFile();if(l.size/1048576>50)d.notification.error("\u8bf7\u7c98\u8d34\u5c0f\u4e8e50M\u7684\u56fe\u7247","");else{var s,p=d.username;d.pasteCount++,s=Object(h.o)(l.name)?"image.png":l.name,d.visionEditorService.upload_file_storage("image",p,l,s).pipe(Object(r.a)(function(e){return e.data}),Object(a.a)(function(){d.pasteCount=0})).subscribe(function(t){var n,i;n=0==e.getSelection().length?e.__localize("image"):"image",null!==(i=t.image_url)&&""!==i&&(e.replaceSelection("\n!["+n+"]("+i+")\n\n"),e.setContent(e.getContent()),d.description=e.getContent(),d.visionOnEditorChanged.emit())},function(){})}}}}},this.markdownEditorOnDrop=function(e){if(!Object(h.o)(e.$textarea.originalEvent)&&0===d.dragCount){var t,n,i,o=e.$textarea.originalEvent.dataTransfer;if(o&&(t=o.items)){n=t[0],i=o.types||[];for(var c=0;c<i.length;c++)if("Files"===i[c]){n=t[c];break}if(n&&"file"===n.kind)if(n.type.match(/^image\//i)){var l=n.getAsFile();if(l.size/1048576>50)d.notification.error("\u8bf7\u7c98\u8d34\u5c0f\u4e8e50M\u7684\u56fe\u7247","");else{var s,p=d.username;d.dragCount++,s=Object(h.o)(l.name)?"image.png":l.name,d.visionEditorService.upload_file_storage("image",p,l,s).pipe(Object(r.a)(function(e){return e.data}),Object(a.a)(function(){d.dragCount=0})).subscribe(function(t){var n,i;n=0==e.getSelection().length?e.__localize("image"):"image",null!==(i=t.image_url)&&""!==i&&(e.replaceSelection("\n!["+n+"]("+i+")\n\n"),e.setContent(e.getContent()),d.description=e.getContent(),d.visionOnEditorChanged.emit())},function(){})}}else d.notification.error("\u4ec5\u652f\u6301\u62d6\u62fd\u56fe\u7247\u6587\u4ef6","")}}},this.getArticleOutlineDelay=Object(m.a)(function(e){d.emitService.emit({type:"new-markdown",currentMode:e.currentMode})},600)}return Object.defineProperty(e.prototype,"editorHeight",{get:function(){return this.height-(this.isLocalEditing?30:0)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;Object(h.o)(this.structuredTableInfo)||(this.description=this.visionEditorService.changeContentMode(this.description,"edit")),this.richTextMode=this.richTextMode||"normal",this.type=this.type||"rich-text",this.editorOptions=Object(i.a)(Object(i.a)({iconlibrary:"glyph"},this.markdownOptions),{saveContent:this.saveContent,enableSwitchRTF:this.modeSwitchEnabled,onShow:this.markdownEditorOnShow,onChange:this.markdownEditorOnChange,onPaste:this.markdownEditorOnPaste,onDrop:this.markdownEditorOnDrop}),this.pasteCount=0,this.dragCount=0,this.refreshContentEvent&&(this.refreshContentEventSubscription=this.refreshContentEvent.subscribe(function(t){e.refreshContent(t.refreshContent)})),this.insertContentEvent&&(this.insertContentEventSubscription=this.insertContentEvent.subscribe(function(t){e.insertContent(t.insertContent)})),this.insertTableRowsEvent&&(this.insertTableRowsEventSubscription=this.insertTableRowsEvent.subscribe(function(t){e.insertTableRows(t.insertTableRows)})),this.getContentEvent&&(this.getContentEventSubscription=this.getContentEvent.subscribe(function(t){if(e.visionEditorService.checkIsFullTable(),t.clearCache&&e.cacheTimerClear$.next(),"rich-text"==e.type){if(!e.richTextEditor)return;e.imgLazyLoadEvent(),e.getRTFContent().then(function(n){e.getEditorContent.emit({eventType:t.eventType?t.eventType:null,description:n.replace(/<div[^<>]*class="mce-resize-backdrop"[^<>]*>.*?<\/div>/g,""),type:e.type})})}else{var n=e.bsEditorInstance?e.bsEditorInstance.getContent():e.description;e.getEditorContent.emit({eventType:t.eventType?t.eventType:null,description:e.fromVision?e.description:n,type:e.type})}})),this.cacheInfo&&(this.initCache(),this.visionEditorService.queryArticleCache({target_sn:this.cacheInfo.sn?this.cacheInfo.sn:"",type:this.cacheInfo.type}).subscribe(function(t){t&&(e.wikiArticleCacheData=t,e.isLocalEditing=!0,e.editContent=e.description)},function(){}))},e.prototype.imgLazyLoadEvent=function(){this.richEditorDom||(this.richEditorDom=document.getElementById(this.richTextId)),Object(i.i)(this.richEditorDom.querySelectorAll("img")).forEach(function(e){(e.hasAttribute("loading")&&"lazy"!=e.loading||!e.hasAttribute("loading"))&&e.setAttribute("loading","lazy")})},e.prototype.ngOnChanges=function(e){var t=this;e.cacheInfo&&e.cacheInfo.currentValue&&e.cacheInfo.previousValue&&e.cacheInfo.currentValue!=e.cacheInfo.previousValue&&e.cacheInfo.currentValue.title&&e.cacheInfo.previousValue.title&&e.cacheInfo.currentValue.title!=e.cacheInfo.previousValue.title&&this.titleChange$.next(),e.type&&this.type&&setTimeout(function(){var e=document.getElementById("markdown"===t.type?t.richTextId+"-markdown":t.richTextId);e&&e.focus()},100)},e.prototype.ngOnDestroy=function(){this.refreshContentEventSubscription&&this.refreshContentEventSubscription.unsubscribe(),this.insertContentEventSubscription&&this.insertContentEventSubscription.unsubscribe(),this.insertTableRowsEventSubscription&&this.insertTableRowsEventSubscription.unsubscribe(),this.getContentEventSubscription&&this.getContentEventSubscription.unsubscribe(),this.getTimeoutSubscription&&this.getTimeoutSubscription.unsubscribe(),this.onDestory$.next(),this.onDestory$.complete()},e.prototype.switchEditor=function(){var e=this;this.editorTypeChange$.next(),"rich-text"==this.type?this.showConvertMarkdownWarn().then(function(){return e.getRTFContent()}).then(function(t){e.description=t?html2markdown(t):"",e.type="markdown",e.fromVision||e.visionOnEditorChanged.emit({type:e.type}),e.fromVision&&e.emitService.emit({type:"markdown-mode-init"})}):this.getMDContent().then(function(t){e.description=t?marked(t):"",e.type="rich-text",e.visionOnEditorChanged.emit({type:e.type})})},e.prototype.hidePreview=function(){this.bsEditorInstance&&this.bsEditorInstance.hidePreview&&this.bsEditorInstance.hidePreview()},e.prototype.afterMDInit=function(){this.initInstanceCallback.emit({type:"markdown"})},e.prototype.switchRichTextEditor=function(e){this.editorTypeChange$.next(),this.description=e.description?marked(e.description):"",this.type="rich-text",this.emitService.emit({type:"rich-text-mode"})},e.prototype.onRichTextChanged=function(e){!e.initChange&&this.cacheInfo&&this.contentChange$.next(),this.fromVision||this.visionOnEditorChanged.emit()},e.prototype.refreshContent=function(e){var t;"rich-text"==this.type?this.richTextEditor.refreshContent(e):null===(t=this.bsEditorInstance)||void 0===t||t.setContent(e)},e.prototype.insertContent=function(e){e&&this.richTextEditor&&this.richTextEditor.insertContent(e)},e.prototype.insertTableRows=function(e){e&&this.richTextEditor&&this.richTextEditor.insertTableRows(e)},e.prototype.revertCache=function(){var e=this;this.editContent==this.description?this.revertCacheConfirm():this.modal.warning({nzTitle:this.translate.instant("REVERT_CACHE_TIP"),nzOkText:this.translate.instant("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){e.revertCacheConfirm()},nzCancelText:this.translate.instant("COMMON_BUTTON_CANCLE"),nzOnCancel:function(){}})},e.prototype.revertCacheConfirm=function(){var e=this;this.judgeEditorType()!=this.wikiArticleCacheData.ui_source&&(this.wikiArticleCacheData.description=1==this.wikiArticleCacheData.ui_source?this.wikiArticleCacheData.description?html2markdown(this.wikiArticleCacheData.description):"":this.wikiArticleCacheData.description?marked(this.wikiArticleCacheData.description):""),this.isLocalEditing=!1,this.description=this.wikiArticleCacheData.description,this.getEditorContent.emit({description:this.description,type:this.type,title:this.wikiArticleCacheData.title}),setTimeout(function(){e.refreshContent(e.description)}),this.wikiArticleCacheData=null},e.prototype.cancelCache=function(){var e=this,t={target_sn:this.cacheInfo.sn,title:this.cacheInfo.title?this.cacheInfo.title:"",description:"",valid:-1,type:this.cacheInfo.type,ui_source:this.judgeEditorType()};this.visionEditorService.updateArticleCache(t).subscribe(function(t){e.wikiArticleCacheData=null,e.isLocalEditing=!1},function(){})},e.prototype.postCacheRequest=function(e){var t={target_sn:this.cacheInfo.sn,title:this.cacheInfo.title?this.cacheInfo.title:"",description:e,type:this.cacheInfo.type,ui_source:this.judgeEditorType()};return this.visionEditorService.updateArticleCache(t)},e.prototype.judgeEditorType=function(){return"rich-text"==this.type?1:2},e.prototype.initCache=function(){var e=this,t=Object(d.a)(this.cacheTimerClear$,this.contentChange$,this.titleChange$,this.editorTypeChange$);Object(d.a)(this.titleChange$,this.contentChange$).pipe(Object(c.a)(function(){return Object(p.a)(5e3).pipe(Object(l.a)(t),Object(c.a)(function(){return Object(u.a)(e.getContent())}),Object(c.a)(function(t){return e.postCacheRequest(t)}))}),Object(l.a)(this.onDestory$)).subscribe(function(){},function(){})},e.prototype.getContent=function(){return"rich-text"===this.type?this.getRTFContent():this.getMDContent()},e.prototype.getMDContent=function(){var e=this.bsEditorInstance;return Promise.resolve(e?e.getContent():this.description)},e.prototype.getRTFContent=function(){var e=this.richTextEditor;return e?(this.richTextEditor.editor.save(),new Promise(function(t){setTimeout(function(){var n=e.editor.getContent(),i=Object(h.g)(n,['div.author-tip[contenteditable="false"]']);t(i)})})):Promise.reject(new Error("Can not get rich-text editor content!"))},e.prototype.showConvertMarkdownWarn=function(){var e=this,t="",n=this.richTextEditor;return n&&(t=n.editor.getContent()),new Promise(function(n,i){t?e.modal.warning({nzTitle:e.translate.instant("TIPS_SAMPLE"),nzContent:e.fromVision?e.translate.instant("TOGGLE_EDITOR_TIPS"):e.convertMarkdownWarnTemplate,nzOkText:e.fromVision?null:e.translate.instant("COMMON_BUTTON_CONFIRM"),nzCancelText:e.translate.instant(e.fromVision?"TIP_BUTTON_KNOW":"COMMON_BUTTON_CANCLE"),nzClosable:!1,nzClassName:"convert-markdown-tips",nzOnOk:function(){return n()},nzOnCancel:function(){return i(new Error("Switch Cancled"))}}):n()})},e.prototype.focusOnEditorHandler=function(){this.focusOnEditor.emit({toolbarContainer:this.toolbarContailerSelector,richTextId:this.richTextId})},e.prototype.initInstanceCallbackHandler=function(){this.initInstanceCallback.emit({type:"instance"})},e.prototype.getMDContentHandler=function(e){this.description=e.description||"",this.contentChange$.next(),this.getArticleOutlineDelay(e)},e.prototype.saveContentEmitHandler=function(){this.saveContentEmit.emit()},e.prototype.fullTableEmitHandler=function(e){this.fullTableEmit.emit(e)},e.prototype.disableEditor=function(){"rich-text"===this.type&&this.richTextEditor.disableEditor()},e.prototype.enableEditor=function(){"rich-text"===this.type&&this.richTextEditor.enableEditor()},e.prototype.setContent=function(e){"rich-text"===this.type&&this.richTextEditor.editor.setContent(e)},e.prototype.imgLoadedHandler=function(){this.imgLoaded.emit()},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](g.b),o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](v.c),o["\u0275\u0275directiveInject"](b.d),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](C.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["vision-editor"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](q,1),o["\u0275\u0275viewQuery"]($,1)),2&e){var n=void 0;o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.richTextEditor=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.convertMarkdownWarnTemplate=n.first)}},inputs:{richTextId:"richTextId",fromVision:"fromVision",description:"description",styles:"styles",height:"height",type:"type",modeSwitchEnabled:"modeSwitchEnabled",workitemInfo:"workitemInfo",username:"username",placeholderContent:"placeholderContent",refreshContentEvent:"refreshContentEvent",insertContentEvent:"insertContentEvent",insertTableRowsEvent:"insertTableRowsEvent",getContentEvent:"getContentEvent",richTextMode:"richTextMode",richTextTools:"richTextTools",cacheInfo:"cacheInfo",isInline:"isInline",readonly:"readonly",toolbarContailerSelector:"toolbarContailerSelector",markdownOptions:"markdownOptions",structuredTableInfo:"structuredTableInfo",saveContent:"saveContent",articleAttachmentInfo:"articleAttachmentInfo",showCacheTips:"showCacheTips",tingDesignInfo:"tingDesignInfo",tableConfigInfo:"tableConfigInfo",sketchPadEnable:"sketchPadEnable"},outputs:{visionOnEditorChanged:"visionOnEditorChanged",getEditorContent:"getEditorContent",focusOnEditor:"focusOnEditor",initInstanceCallback:"initInstanceCallback",saveContentEmit:"saveContentEmit",fullTableEmit:"fullTableEmit",imgLoaded:"imgLoaded"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:7,vars:4,consts:[[1,"MD-and-richtext-editor","position-r"],["class","localhost-info",4,"ngIf"],[3,"ngStyle",4,"ngIf"],[3,"height","ngStyle",4,"ngIf"],[4,"ngIf"],["ConvertMarkdownWarnTemplate",""],[1,"localhost-info"],[1,"fa","fa-exclamation-triangle","font-import-color"],[1,"font-import","block-inline"],[1,"edit-item","f-weight6","font-import","font-import-color",3,"click"],[1,"m-l-3","pull-right","pointer-cursor","font-import","f-14","give-up-draft",3,"click"],[3,"ngStyle"],[3,"richTextMode","richTextTools","richTextId","isInline","readonly","description","workitemInfo","height","hideMarkdown","toolbarContailerSelector","structuredTableInfo","saveContent","articleAttachmentInfo","tingDesignInfo","tableConfigInfo","sketchPadEnable","richTextOnChange","handoverMarkdown","focusOnEditor","initInstanceCallback","saveContentEmit","fullTableEmit","imgLoaded"],["richTextEditor",""],["rows","12","name","markdownText",3,"textareaId","options","customStyle","placeholder","ngModel","toolbarContailerSelector","placeholderChange","ngModelChange","onFullscreenExit","switchToRTF","focusOnEditor","saveContentEmit"],[3,"description","username","descriptionChange","switchToRTF","getMDContentHandler","saveContentEmit","vditorAfter"],[1,"mardown-warn-content"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,X,15,15,"div",1),o["\u0275\u0275template"](2,Y,3,17,"div",2),o["\u0275\u0275template"](3,J,2,11,"div",3),o["\u0275\u0275template"](4,Z,2,2,"div",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,ee,22,21,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showCacheTips&&t.isLocalEditing),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","rich-text"==t.type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","markdown"==t.type&&!t.fromVision),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","markdown"==t.type&&t.fromVision))},directives:[y.n,y.o,B,U.a,O.k,O.l,G],pipes:[v.b],styles:["[_nghost-%COMP%]     .md-editor.active{border:none;outline:0;box-shadow:0 0 0 0}[_nghost-%COMP%]     .md-editor>.md-header{background:#fff;padding-left:0}[_nghost-%COMP%]     .md-editor>.md-header .btn-default{color:#777}[_nghost-%COMP%]     .md-editor>.md-header .btn-group:first-child{margin-left:0}[_nghost-%COMP%]     .md-editor>.md-header [data-handler=bootstrap-markdown-cmdPreview]{line-height:1;color:#777;border-color:transparent!important;background-color:transparent!important;font-size:14px!important;box-shadow:none}[_nghost-%COMP%]     .md-editor>.md-header [data-handler=bootstrap-markdown-cmdPreview] .glyphicon-search{font-size:12px!important}[_nghost-%COMP%]     .md-editor>.md-header [data-handler=bootstrap-markdown-cmdPreview]:hover{background-color:#e6e6e6!important;color:#777!important}[_nghost-%COMP%]     .md-editor>.md-header [data-handler=bootstrap-markdown-cmdPreview].focus{color:#777!important}[_nghost-%COMP%]     .md-editor>.md-header [data-handler=bootstrap-markdown-cmdPreview].active{color:#23c6c8!important}[_nghost-%COMP%]     .md-editor{border:none}[_nghost-%COMP%]     .btn-default{border:none}[_nghost-%COMP%]     .md-editor{height:100%}.MD-and-richtext-editor[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]{position:relative;color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc;font-size:12px;padding:5px 5px 6px}.MD-and-richtext-editor[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]   .block-inline[_ngcontent-%COMP%]{display:inline}.MD-and-richtext-editor[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]   .font-import-color[_ngcontent-%COMP%]{color:#e45f5f}.MD-and-richtext-editor[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]   .font-import[_ngcontent-%COMP%]{padding-left:5px}.MD-and-richtext-editor[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]   .give-up-draft[_ngcontent-%COMP%]{padding-left:0;margin-left:0;text-decoration:underline;color:#909399}  .ephox-dragster-blocker,   .ephox-snooker-resizer-bar{position:fixed!important;z-index:999}.mardown-warn-content[_ngcontent-%COMP%]{padding:6px 26px}  .convert-markdown-tips .ant-modal-confirm-body .anticon{margin-top:2px}  .convert-markdown-tips .ant-modal-confirm-body .ant-modal-confirm-title{font-size:17px;font-weight:700}  .convert-markdown-tips .ant-modal-confirm-body .ant-modal-confirm-content{margin-top:12px}"]}),e}()},KmK3:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n("ofXK"),o=n("sYmb"),r=n("Etcd"),a=n("nJia"),c=n("3Pt+"),l=n("5+WD"),s=n("0lU3"),d=n("z4wI"),p=n("5vDB"),u=n("IvDN"),m=n("PTRe"),h=n("Nqz0"),g=n("mOC4"),f=n("OzZK"),v=n("fXoL"),b=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[i.c,c.g,h.c,o.a,g.a,u.b,m.e,s.b,d.b,p.b,f.c,l.f]]}),e}(),C=n("7gQO"),y=n("+oEP"),x=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[i.c,o.a,y.b]]}),e}(),w=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[i.c,o.a,r.c,C.a,b,a.b,x]]}),e}()},LBXl:function(e,t,n){"use strict";t.UnsubscriptionError=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},LZfB:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("fXoL"),o=n("eJlN"),r=n("sYmb"),a=n("ofXK"),c=n("nJia"),l=n("QlLE"),s=n("ZV1T");function d(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275elementStart"](1,"span",11),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",12),i["\u0275\u0275pipe"](5,"to_trusted"),i["\u0275\u0275element"](6,"span",12),i["\u0275\u0275pipe"](7,"to_trusted"),i["\u0275\u0275elementStart"](8,"span",13),i["\u0275\u0275text"](9),i["\u0275\u0275pipe"](10,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"span"),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](3,5,"DOMAIN_TYPE_CLOUD_SERVICE"),":"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](5,7,n.cloudShortServiceName),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](7,9,n.cloudServiceName),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](10,11,"DOMAIN_PRODUCT_CATALOG"),":"),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](n.businessExpandInfoStr)}}function p(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275elementStart"](2,"span",11),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"span",12),i["\u0275\u0275pipe"](6,"to_trusted"),i["\u0275\u0275element"](7,"span",12),i["\u0275\u0275pipe"](8,"to_trusted"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",15),i["\u0275\u0275elementStart"](10,"span",11),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"span"),i["\u0275\u0275text"](14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("title",n.cloudServiceNameTooltips),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](4,7,"DOMAIN_TYPE_CLOUD_SERVICE"),":"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](6,9,n.cloudShortServiceName),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](8,11,n.cloudServiceName),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("title",n.businessExpandInfoStr),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](12,13,"DOMAIN_PRODUCT_CATALOG"),":"),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](n.businessExpandInfoStr)}}function u(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).onSelect(e.domain)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"div",7),i["\u0275\u0275elementStart"](3,"span",8),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,d,13,13,"div",9),i["\u0275\u0275template"](6,p,15,15,"div",9),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("nzTooltipTitle",i["\u0275\u0275pipeBind1"](1,8,r.disableTooltip(o.domain)))("ngClass",r.isDisabled(o.domain)?"cursor-disabled":"")("title",o.title_ups),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",r.isDisabled(o.domain)?"disabled":""),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("title",o.domainShortTitleTooltips),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](o.domainShortTitleTooltips),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","default"===r.screenSize),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","small"===r.screenSize)}}function m(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",3),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,u,7,10,"div",4),i["\u0275\u0275pipe"](5,"slice"),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().showAll.cloudService=!0}),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,4,"DOMAIN_TYPE_CLOUD_SERVICE")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind3"](5,6,o.cloudServices,0,o.showAll.cloudService?o.cloudServices.length:o.MAX_SHOW)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hidden",o.showAll.cloudService||o.cloudServices.length<=o.MAX_SHOW),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,10,"SHOW_MORE"))}}function h(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).onSelect(e.domain)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275pipe"](2,"to_trusted"),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("nzTooltipTitle",i["\u0275\u0275pipeBind1"](1,4,r.disableTooltip(o.domain)))("ngClass",r.isDisabled(o.domain)?"cursor-disabled disabled":"")("title",o.title_ups)("innerHTML",i["\u0275\u0275pipeBind1"](2,6,o.title),i["\u0275\u0275sanitizeHtml"])}}function g(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",3),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,h,3,8,"div",16),i["\u0275\u0275pipe"](5,"slice"),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().showAll.domains=!0}),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,4,"DOMAIN")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind3"](5,6,o.domains,0,o.showAll.domains?o.domains.length:o.MAX_SHOW)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hidden",o.showAll.domains||o.domains.length<=o.MAX_SHOW),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,10,"SHOW_MORE"))}}function f(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).onSelect(e.domain)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"div",20),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",10),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275text"](6),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](8,"img",21),i["\u0275\u0275element"](9,"span",12),i["\u0275\u0275pipe"](10,"to_trusted"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngClass",r.isDisabled(o.domain)?"cursor-disabled":"")("nzTooltipTitle",i["\u0275\u0275pipeBind1"](1,8,r.disableTooltip(o.domain)))("title",o.title_ups),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",r.isDisabled(o.domain)?"disabled":""),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](o.domainTitle),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](7,10,"DOMAIN_SELECTOR_INCLUDE"),":"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("src",o.avatarLink,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](10,12,o.username),i["\u0275\u0275sanitizeHtml"])}}function v(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",3),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,f,11,14,"div",18),i["\u0275\u0275pipe"](5,"slice"),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().showAll.members=!0}),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,4,"DOMAIN_SELECTOR_MEMBER_DOMAIN")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind3"](5,6,o.members,0,o.showAll.members?o.members.length:o.MAX_SHOW)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hidden",o.showAll.members||o.members.length<=o.MAX_SHOW),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,10,"SHOW_MORE"))}}function b(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function C(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",25),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,b,1,0,"ng-container",26)),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,2,"DOMAIN_SELECTOR_SEARCH_RESULT_EMPTY")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",n.notFoundAction)}}function y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",22),i["\u0275\u0275element"](1,"nz-empty",23),i["\u0275\u0275template"](2,C,4,4,"ng-template",null,24,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzNotFoundContent",n)}}var x=function(){function e(e,t){this.domainSelectorService=e,this.translate=t,this.domainSelect=new i.EventEmitter,this.MAX_SHOW=5,this.showAll={domains:!1,members:!1,cloudService:!1},this.domains=[],this.members=[],this.cloudServices=[],this.isDisabled=function(){return!1},this.disableTooltip=function(){return""}}return Object.defineProperty(e.prototype,"onlyOneType",{get:function(){return[this.domains,this.members,this.cloudServices].reduce(function(e,t){return e+(t.length>0?1:0)},0)<2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.domains.length&&0===this.members.length&&0===this.cloudServices.length},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.onlyOneType&&(this.showAll={domains:!0,members:!0,cloudService:!0})},e.prototype.ngOnChanges=function(e){e.searchResult&&this.searchResult&&this.buildDisplayData()},e.prototype.onSelect=function(e){this.isDisabled(e)||this.domainSelect.next(e)},e.prototype.buildDisplayData=function(){var e=this.searchResult,t=e.members,n=e.cloudServices;this.buildDomains(e.domains),this.buildMembers(t),this.buidlCloudServices(n),this.showAll={members:!1,domains:!1,cloudService:!1}},e.prototype.buidlCloudServices=function(e){var t=this;this.cloudServices=e.map(function(e){var n=t.titleEn(e.title_en,e.title),i=t.titleEn(e.product_short_title_en,e.product_short_title),o=t.hightLightString(i),r=t.titleEn(e.product_title_en,e.product_title),a="("+t.hightLightString(r)+")",c=t.handleBusinessExpandInfo(e.business_expand_info);return{domain:e.domain,domainTitle:n,domainShortTitle:e.short_title,domainShortTitleTooltips:e.short_title?e.short_title+" ("+n+")":""+n,cloudServiceName:a,cloudShortServiceName:o,cloudServiceNameTooltips:i+"("+r+")",businessExpandInfoStr:c,title_ups:t.titleEn(e.title_en_ups,e.title_ups)}})},e.prototype.buildMembers=function(e){var t=this;this.members=e.map(function(e){var n=t.titleEn(e.title_en,e.title);return{username:t.hightLightString(e.user_name),domainTitle:n,domain:e.domain,avatarLink:"http://w3.huawei.com/w3lab/rest/yellowpage/face/"+e.account+"/45",title_ups:t.titleEn(e.title_en_ups,e.title_ups)}})},e.prototype.buildDomains=function(e){var t=this;this.domains=e.map(function(e){var n=t.titleEn(e.title_en,e.title);return{title:t.hightLightString(n),domain:e.domain,title_ups:t.titleEn(e.title_en_ups,e.title_ups)}})},e.prototype.titleEn=function(e,t){return"en"===this.translate.currentLang?e||t:t||e},e.prototype.hightLightString=function(e){var t=this.keyword;if(!e)return"";var n=e.toLowerCase().indexOf(t.toLowerCase());return n>-1?e.slice(0,n)+'<span class="hight-light">'+e.slice(n,n+t.length)+"</span>"+e.slice(n+t.length):e},e.prototype.handleBusinessExpandInfo=function(e){var t=this,n="";if(e&&e.length){var i=e.filter(function(e){return null==e?void 0:e.title});i.length&&(n+=i.map(function(e){return t.titleEn(e.title_en,e.title)}).join("/"))}return n},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](r.c))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["search-result"]],inputs:{keyword:"keyword",searchResult:"searchResult",notFoundAction:"notFoundAction",screenSize:"screenSize",isDisabled:"isDisabled",disableTooltip:"disableTooltip"},outputs:{domainSelect:"domainSelect"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:4,consts:[[1,"search-result"],[4,"ngIf"],["class","empty-tips",4,"ngIf"],[1,"category","f-12","txt-999"],["class","cursor-pointer item member-item","nz-tooltip","",3,"nzTooltipTitle","ngClass","title","click",4,"ngFor","ngForOf"],[1,"display-all","t-a-c","cursor-pointer","txt-underline","txt-theme",3,"hidden","click"],["nz-tooltip","",1,"cursor-pointer","item","member-item",3,"nzTooltipTitle","ngClass","title","click"],[1,"txt-333","f-14","domain-name","text-omit",3,"ngClass"],[3,"title"],["class","sub-title f-12",4,"ngIf"],[1,"sub-title","f-12"],[1,"m-r-10"],[3,"innerHTML"],[1,"m-l-10","m-r-10"],[1,"service-name","text-omit",3,"title"],[1,"business-info","text-omit-2",3,"title"],["class","domain cursor-pointer item","nz-tooltip","",3,"nzTooltipTitle","ngClass","title","innerHTML","click",4,"ngFor","ngForOf"],["nz-tooltip","",1,"domain","cursor-pointer","item",3,"nzTooltipTitle","ngClass","title","innerHTML","click"],["class","cursor-pointer item member-item","nz-tooltip","",3,"ngClass","nzTooltipTitle","title","click",4,"ngFor","ngForOf"],["nz-tooltip","",1,"cursor-pointer","item","member-item",3,"ngClass","nzTooltipTitle","title","click"],[1,"txt-333","f-14","domain-name",3,"ngClass"],["alt","user-avatar-photo",1,"avatar",3,"src"],[1,"empty-tips"],["nzNotFoundImage","simple",3,"nzNotFoundContent"],["notFoundContent",""],[1,"f-14","txt-999","not-found-tips"],[4,"ngTemplateOutlet"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,m,9,12,"ng-container",1),i["\u0275\u0275template"](2,g,9,12,"ng-container",1),i["\u0275\u0275template"](3,v,9,12,"ng-container",1),i["\u0275\u0275template"](4,y,4,1,"div",2),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.cloudServices.length>0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.domains.length>0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.members.length>0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.empty))},directives:[a.n,a.m,c.d,a.l,l.b,a.s],pipes:[r.b,a.v,s.a],styles:[".search-result[_ngcontent-%COMP%]{padding:8px;line-height:normal}.search-result[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%], .search-result[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:0 8px}.search-result[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{font-size:14px;line-height:24px;margin-top:8px;font-weight:700}.search-result[_ngcontent-%COMP%]   .domain[_ngcontent-%COMP%]{font-size:14px;line-height:30px;color:#333}.search-result[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.search-result[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]{margin-top:8px}.search-result[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .domain-name[_ngcontent-%COMP%]{line-height:24px}.search-result[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{min-height:24px;color:#999}.search-result[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin:0 4px 0 8px;width:16px;height:16px;border-radius:50%}.search-result[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .small-sub-title[_ngcontent-%COMP%]{min-height:24px;display:flex;flex-direction:column;align-items:center}.search-result[_ngcontent-%COMP%]   .empty-tips[_ngcontent-%COMP%]   .not-found-tips[_ngcontent-%COMP%]{margin-top:-24px}.search-result[_ngcontent-%COMP%]     .hight-light{color:#23c6c8}"]}),e}()},LrWZ:function(e,t,n){"use strict";t.a=function(e){return null==e}},MP3p:function(e,t,n){"use strict";n.d(t,"a",function(){return ni});var i=n("mrSG"),o=n("fXoL"),r=n("XNiG"),a=n("AA4e"),c=n("AWuS"),l=n("teTe"),s=n("dEAy"),d=n("sYmb"),p=n("bNXi"),u=n("UJq8"),m=n("ofXK"),h=n("zAKX"),g=n("3Pt+"),f=n("PTRe"),v=n("Nqz0"),b=n("9/xO"),C=n("0lU3"),y=n("Q8cG"),x=n("Cfvw"),w=n("eIep"),_=n("IzEk"),O=n("lJxs"),S=n("UXun"),E=n("1G5W"),M=n("Kj3r"),P=n("vkgz"),I=n("pLZG"),k=n("eJlN"),T=n("LZfB"),D=n("nJia"),A=n("FwiY"),z=n("C2AL"),R=["searchInput"];function L(e,t){1&e&&o["\u0275\u0275elementContainer"](0)}function N(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"search-result",16),o["\u0275\u0275listener"]("domainSelect",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).selected.next(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){o["\u0275\u0275nextContext"]();var i=o["\u0275\u0275reference"](4),r=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("isDisabled",r.isDisabled)("disableTooltip",r.disableTooltip)("keyword",r.searchKeyword)("screenSize","small")("searchResult",r.searchResult)("notFoundAction",i)}}function j(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"span",17),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"span",18),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).showAdvanced.next()}),o["\u0275\u0275elementStart"](5,"span",19),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](8,"i",20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,2,"DOMAIN_SELECTOR_CAN_USE")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](7,4,"ADVANCED_SEARCH")))}function V(e,t){if(1&e&&o["\u0275\u0275template"](0,j,9,6,"div",10),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("ngIf",n.isShowAdvancedSearch)}}var F=function(e){return{loading:e}};function B(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275template"](1,L,1,0,"ng-container",9),o["\u0275\u0275template"](2,N,1,6,"search-result",14),o["\u0275\u0275template"](3,V,1,1,"ng-template",null,15,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](),i=o["\u0275\u0275reference"](17);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",o["\u0275\u0275pureFunction1"](3,F,n.searchLoading)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.searchLoading)}}function U(e,t){1&e&&o["\u0275\u0275elementContainer"](0)}function W(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",24),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).onRecommendSelect(e)}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275property"]("nzTooltipTitle",o["\u0275\u0275pipeBind1"](1,4,i.tooltip))("ngClass",i.disabled?"disabled cursor-disabled":"")("title",i.title),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.title)}}function H(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",21),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",22),o["\u0275\u0275template"](5,W,3,6,"div",23),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.ngIf;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,2,"RECOMMENDED")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",n)}}function G(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",25),o["\u0275\u0275elementStart"](1,"div",26),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().showAdvanced.next()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",27),o["\u0275\u0275element"](5,"i",28),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,2,"ADVANCED_SEARCH")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzTooltipTitle",o["\u0275\u0275pipeBind1"](6,4,"DOMAIN_SELECTOR_ADVANCE_SEARCH_TIPS")))}function q(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",30),o["\u0275\u0275element"](1,"i",31),o["\u0275\u0275elementEnd"]())}function $(e,t){1&e&&o["\u0275\u0275template"](0,q,2,0,"div",29),2&e&&o["\u0275\u0275property"]("ngIf",t.loading)}var K=function(){function e(e){this.domainSelectorService=e,this.isShowAdvancedSearch=!0,this.selected=new o.EventEmitter,this.showAdvanced=new o.EventEmitter,this.multi=!1,this.searchLoading=!1,this.searchKeyword="",this.onSearch$=new r.a,this.onDestory$=new r.a,this.showSearch=!1}return e.prototype.ngOnInit=function(){this.domainSelectorService.onCompInit(this),this.watchSearch(),this.loadRecommend()},e.prototype.ngAfterViewInit=function(){this.searchInput.nativeElement.focus()},e.prototype.ngOnDestroy=function(){this.onDestory$.next(),this.onDestory$.complete()},e.prototype.onRecommendSelect=function(e){e.disabled||this.selected.next(e.domain)},e.prototype.loadRecommend=function(){var e=this;this.recommend$=Object(x.a)(a.d).pipe(Object(w.a)(function(t){var n=e.preferReqConfig(t);return e.domainSelectorService.loadPreferDomain(n)}),Object(_.a)(1),Object(O.a)(function(t){return t.map(function(t){var n=!t.optional;return{domain:t.domain,title:e.domainSelectorService.domainTitle(t.domain),disabled:n||e.isDisabled(t.domain),tooltip:n?e.notInTreeTooltip:e.disableTooltip(t.domain)}})}),Object(S.a)(1))},e.prototype.clearSearch=function(){this.searchKeyword="",this.showSearch=!1},e.prototype.watchSearch=function(){var e=this;this.onSearch$.pipe(Object(E.a)(this.onDestory$),Object(M.a)(200),Object(P.a)(function(t){t&&t.length>=2?(e.showSearch=!0,e.searchLoading=!0):e.showSearch=!1}),Object(I.a)(function(e){return Boolean(e)&&e.length>=2}),Object(w.a)(function(t){var n=e.searchReqConfig(t);return e.domainSelectorService.querySearchResult(n)})).subscribe(function(t){e.searchLoading=!1,e.searchResult=t},function(){})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](k.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["domain-selector-simp"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](R,1),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.searchInput=n.first)},inputs:{notInTreeTooltip:"notInTreeTooltip",isDisabled:"isDisabled",isShowAdvancedSearch:"isShowAdvancedSearch",disableTooltip:"disableTooltip",preferReqConfig:"preferReqConfig",searchReqConfig:"searchReqConfig"},outputs:{selected:"selected",showAdvanced:"showAdvanced"},features:[o["\u0275\u0275ProvidersFeature"]([k.a])],decls:18,vars:20,consts:[[1,"comp-wrapper"],[1,"search-box"],[1,"input-box"],["type","text",1,"search-input",3,"title","placeholder","ngModel","ngModelChange"],["searchInput",""],[1,"close-box","cursor-pointer",3,"hidden","click"],[1,"iconfont","icon-close","f-20"],["class","search-container loading-wrapper",4,"ngIf"],[1,"recommend","loading-wrapper",3,"hidden"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],["class","comp-footer",4,"ngIf"],["loadingTpl",""],[1,"search-container","loading-wrapper"],[3,"isDisabled","disableTooltip","keyword","screenSize","searchResult","notFoundAction","domainSelect",4,"ngIf"],["notFoundAction",""],[3,"isDisabled","disableTooltip","keyword","screenSize","searchResult","notFoundAction","domainSelect"],[1,"f-14","txt-999","m-r-8"],[1,"f-14","txt-theme","cursor-pointer","underline",3,"click"],[1,"m-r-4"],[1,"iconfont","icon-double-right","f-14"],[1,"group-title","txt-999","f-14"],[1,"items"],["nz-tooltip","","class","item cursor-pointer text-omit f-14",3,"nzTooltipTitle","ngClass","title","click",4,"ngFor","ngForOf"],["nz-tooltip","",1,"item","cursor-pointer","text-omit","f-14",3,"nzTooltipTitle","ngClass","title","click"],[1,"comp-footer"],[1,"full-search","txt-theme","txt-underline","cursor-pointer","m-r-8",3,"click"],[1,"icon"],["nz-tooltip","",1,"iconfont","icon-info","f-14",3,"nzTooltipTitle"],["class","loading",4,"ngIf"],[1,"loading"],["nz-icon","","nzType","loading","nzTheme","outline"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"input",3,4),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.onSearch$.next(e)})("ngModelChange",function(e){return t.searchKeyword=e}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275listener"]("click",function(){return t.clearSearch()}),o["\u0275\u0275element"](8,"i",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,B,5,5,"div",7),o["\u0275\u0275elementStart"](10,"div",8),o["\u0275\u0275template"](11,U,1,0,"ng-container",9),o["\u0275\u0275pipe"](12,"async"),o["\u0275\u0275template"](13,H,6,4,"ng-container",10),o["\u0275\u0275pipe"](14,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](15,G,7,6,"div",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](16,$,1,1,"ng-template",null,12,o["\u0275\u0275templateRefExtractor"])),2&e){var n=o["\u0275\u0275reference"](17);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](5,10,"DOMAIN_SELECTOR_TREE_SEARCH_PLACEHOLDER"))("placeholder",o["\u0275\u0275pipeBind1"](6,12,"DOMAIN_SELECTOR_TREE_SEARCH_PLACEHOLDER"))("ngModel",t.searchKeyword),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("hidden",!t.searchKeyword),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.showSearch),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden",t.showSearch),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",o["\u0275\u0275pureFunction1"](18,F,!o["\u0275\u0275pipeBind1"](12,14,t.recommend$))),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](14,16,t.recommend$)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isShowAdvancedSearch)}},directives:[g.d,g.k,g.l,m.n,m.s,T.a,m.m,D.d,m.l,A.a,z.a],pipes:[d.b,m.b],styles:[".comp-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:290px;height:400px;border-radius:4px;box-shadow:0 0 8px rgba(0,0,0,.24);overflow:hidden;background-color:#fff}.search-box[_ngcontent-%COMP%]{margin:0 12px;border-bottom:1px solid #dbdbdb;display:flex;align-items:center}.search-box[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{flex:1 1 auto}.search-box[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{border:none;outline:none;font-size:13px;line-height:40px;width:100%}.search-box[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::-moz-placeholder{color:#999}.search-box[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#999}.search-box[_ngcontent-%COMP%]   .close-box[_ngcontent-%COMP%]{flex:0 0 auto}.recommend[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]{flex:1 1 10px}.search-container[_ngcontent-%COMP%]{overflow:hidden scroll;margin-right:2px}.recommend[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.recommend[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{line-height:40px;flex:0 0 auto;margin:0 12px}.recommend[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden scroll;margin-left:12px;margin-right:2px;padding-right:4px}.recommend[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:transparent}.recommend[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{height:30px;line-height:30px;margin-bottom:8px;border-radius:4px;padding-left:28px}.recommend[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.comp-footer[_ngcontent-%COMP%]{height:42px;padding:0 12px;border-top:1px solid #dbdbdb;display:flex;align-items:center}.comp-footer[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-top:2px}.comp-footer[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .icon-info[_ngcontent-%COMP%]{color:#f8ac59}.underline[_ngcontent-%COMP%]{border-bottom:1px solid}",".loading-wrapper[_ngcontent-%COMP%]{position:relative}.loading-wrapper[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.7);position:absolute;left:0;top:0;right:0;bottom:0;z-index:1;display:flex;justify-content:center;align-items:center;font-size:32px;color:#23c6c8}"]}),e}(),X=n("chJY"),Y=function(){function e(){var e=this;this.multi=!0,this.defaultSelected=[],this.confirm=new o.EventEmitter,this.close=new o.EventEmitter,this.fullTreeReqConfig=function(){return Object(a.o)(e.domainTreeConfig)?{method:"GET",url:"/vision-platform/api/domains/"+e.entryDomainId+"/rat_entity_tree",params:{add_dispatch:"true",r_type:"1",return_func:"true",topdown:"true"}}:Object(i.a)({},e.domainTreeConfig)},this.addFavouriteReqConfig=function(e,t){return{url:"/vision-configuration-center/api/user_center/domain_stores",method:"POST",body:{user_id:t.user_id,domain_id:e.id,domain_type:"Domain",workitem_type:"Requirement"}}},this.favouriteReqConfig=function(e){return{method:"GET",url:"/vision-configuration-center/api/user_center/domain_stores",params:{domain_type:"Cloud_Service",user_id:""+e.user_id,workitem_type:"Requirement"}}},this.searchReqConfig=function(t){return{url:Object(a.o)(e.domainTreeConfig)?"/vision-platform/api/domains/"+e.entryDomainId+"/search":e.domainTreeConfig.url,params:{key:t},method:"GET"}},this.disableDomain=function(t){return t.id===e.entryDomainId||!!Object(a.o)(e.domainTreeConfig)&&!t.receive_rr},this.disableTooltip=function(t){return Object(a.o)(e.domainTreeConfig)?t.id===e.entryDomainId?"PLEASE_USE_WORKITEM_SERVICE":t.receive_rr?"":"COMMON_TOOLTIP_NO_RECEIVE_RR":""}}return e.prototype.ngOnInit=function(){},e.prototype.onConfirm=function(e){this.confirm.next(e),this.close.next()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["batch-domain-selector"]],inputs:{entryDomainId:"entryDomainId",multi:"multi",defaultSelected:"defaultSelected",domainTreeConfig:"domainTreeConfig",domainTreeTooltip:"domainTreeTooltip"},outputs:{confirm:"confirm",close:"close"},decls:1,vars:14,consts:[[3,"multi","title","isDisabled","disableTooltip","notInTreeTooltip","comfirmBtTitle","defaultSelected","fullTreeReqConfig","addFavouriteReqConfig","favouriteReqConfig","searchReqConfig","zIndex","defaultMode","sourceDomainId","confirm","close"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"domain-selector",0),o["\u0275\u0275listener"]("confirm",function(e){return t.onConfirm(e)})("close",function(){return t.close.next()}),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("multi",t.multi)("title","DOMAIN_SELECTOR_TITLE_FE_TO_RR")("isDisabled",t.disableDomain)("disableTooltip",t.disableTooltip)("notInTreeTooltip",t.domainTreeTooltip)("comfirmBtTitle","NEXT_STEP")("defaultSelected",t.defaultSelected)("fullTreeReqConfig",t.fullTreeReqConfig)("addFavouriteReqConfig",t.addFavouriteReqConfig)("favouriteReqConfig",t.favouriteReqConfig)("searchReqConfig",t.searchReqConfig)("zIndex",2010)("defaultMode",!1)("sourceDomainId",t.entryDomainId)},directives:[X.a],encapsulation:2}),e}(),Q=n("rXOI"),J=n("ayLg");function Z(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"domain-selector-simp",20),o["\u0275\u0275listener"]("selected",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().updateDomain(e)})("showAdvanced",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]();return e.showAdvanceDomainSelector=!0,e.showDomainSelector=!1}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("isDisabled",i.disableDomain)("disableTooltip",i.disableTooltip)("notInTreeTooltip","COMMON_TOOLTIP_NO_RECEIVE_RR")("preferReqConfig",i.preferReqConfig)("searchReqConfig",i.searchReqConfig)}}function ee(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"batch-domain-selector",21),o["\u0275\u0275listener"]("close",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().showAdvanceDomainSelector=!1})("confirm",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().updateDomain(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("multi",!1)("defaultSelected",i.batchDomainSelectorDefault)("entryDomainId",i.domainId)}}function te(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",22),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().errTipDomain()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"TERM_OWNER_SELECT")))}function ne(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",23),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]();return e.beforeSelectUser(e.attributeList)})("nzVisibleChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().attributeList.isShowModal.members=e}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"userInfo"),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](),r=o["\u0275\u0275reference"](25);o["\u0275\u0275property"]("nzDropdownMenu",r)("nzVisible",i.attributeList.isShowModal.members),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",i.attributeList.owner?o["\u0275\u0275pipeBind1"](2,3,i.attributeList.owner):o["\u0275\u0275pipeBind1"](3,5,"TERM_OWNER_SELECT")," ")}}var ie=function(e){return{selected:e}};function oe(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",24),o["\u0275\u0275element"](1,"i",25),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"userInfo"),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](4,ie,null==n?null:n.isSelected)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,n)," ")}}function re(e,t){1&e&&o["\u0275\u0275element"](0,"span",26)}function ae(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",27),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=o["\u0275\u0275nextContext"]();return i.handleConfirmPriority(i.attributeList,e)}),o["\u0275\u0275pipe"](1,"colorMap"),o["\u0275\u0275element"](2,"span",28),o["\u0275\u0275elementStart"](3,"span",29),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275classMap"](o["\u0275\u0275pipeBind2"](1,3,i,"priority")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,6,i))}}var ce=function(){function e(e,t,n){var i=this;this.relationLinkNewService=e,this.translate=t,this.notification=n,this.updateDefaultDomain=new o.EventEmitter,this.batchDomainSelectorDefault=[],this.priorityList=["02003001","02003002","02003003","02003004"],this.preferReqConfig=function(e){return{method:"GET",params:{domainId:""+i.domainId,userId:""+e.user_id,workitemType:"Requirement",domainType:"Domain"},url:"/vision-platform/api/domains/recommend_domain"}},this.searchReqConfig=function(e){return{url:"/vision-platform/api/domains/"+i.domainId+"/search",params:{key:e},method:"GET"}},this.disableDomain=function(e){return e.id===i.domainId||!e.receive_rr},this.disableTooltip=function(e){return e.id===i.domainId?"PLEASE_USE_WORKITEM_SERVICE":e.receive_rr?"":"COMMON_TOOLTIP_NO_RECEIVE_RR"}}return e.prototype.ngOnInit=function(){},e.prototype.changeDomainShow=function(e){this.showDomainSelector=e},e.prototype.errTipDomain=function(){this.notification.error(this.translate.instant("DOMAIN_SELECTOR_TITLE_ISSUE_ASSIGNED_DOMAIN"),"")},e.prototype.beforeSelectUser=function(e){return Object(i.b)(this,void 0,void 0,function(){return Object(i.e)(this,function(t){switch(t.label){case 0:return[4,this.relationLinkNewService.beforeSelectUser(e)];case 1:return t.sent(),[2]}})})},e.prototype.selectUser=function(e,t){this.relationLinkNewService.selectUser(e,t)},e.prototype.handleConfirmPriority=function(e,t){e.priority=t},e.prototype.updateDomain=function(e){var t={id:e.id,domain_id:e.id,short_title:e.short_title,title:e.title,title_en:e.title_en,workitem_category:[]};this.attributeList.domain=t,this.batchDomainSelectorDefault=[t],this.updateDefaultDomain.emit(t),this.attributeList.domain_members=this.relationLinkNewService.queryDomainMembers(this.attributeList).toPromise().catch(function(e){return Object(c.b)(e)}),this.attributeList.availableLabels=[],this.attributeList.labels=[],this.showDomainSelector=!1},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](d.c),o["\u0275\u0275directiveInject"](p.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["rr-attribute"]],inputs:{attributeList:"attributeList",domainId:"domainId"},outputs:{updateDefaultDomain:"updateDefaultDomain"},decls:58,vars:49,consts:[[1,"attribute-container"],[1,"attribute-item"],[1,"attribute-label"],[1,"text-danger"],[1,"attribute-value"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"cur-pointer","txt-underline",3,"nzVisible","nzDropdownMenu","nzVisibleChange"],["domains","nzDropdownMenu"],[3,"isDisabled","disableTooltip","notInTreeTooltip","preferReqConfig","searchReqConfig","selected","showAdvanced",4,"ngIf"],[3,"multi","defaultSelected","entryDomainId","close","confirm",4,"ngIf"],["class","cur-pointer txt-underline",3,"click",4,"ngIf"],["nz-dropdown","","nzTrigger","click","class","cur-pointer txt-underline",3,"nzDropdownMenu","nzVisible","click","nzVisibleChange",4,"ngIf"],["ownerMenu","nzDropdownMenu"],["type","single",3,"options","loading","selected","searchPlaceholder","onSelect"],["option",""],["nzFormat","yyyy-MM-dd","nzSize","small",3,"nzShowToday","nzAllowClear","ngModel","nzPlaceHolder","ngModelChange"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"editable","cur-pointer","txt-underline",3,"nzDropdownMenu"],["class","fa fa-circle-o m-r-5",4,"ngIf"],["priorityMenu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","","class","priority-dropdown-menu-item",3,"class","click",4,"ngFor","ngForOf"],[3,"isDisabled","disableTooltip","notInTreeTooltip","preferReqConfig","searchReqConfig","selected","showAdvanced"],[3,"multi","defaultSelected","entryDomainId","close","confirm"],[1,"cur-pointer","txt-underline",3,"click"],["nz-dropdown","","nzTrigger","click",1,"cur-pointer","txt-underline",3,"nzDropdownMenu","nzVisible","click","nzVisibleChange"],[1,"search-select-option"],[1,"iconfont","m-r-5","icon-right","unselected",3,"ngClass"],[1,"fa","fa-circle-o","m-r-5"],["nz-menu-item","",1,"priority-dropdown-menu-item",3,"click"],[1,"fa","fa-circle-o"],[1,"m-l-5"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementStart"](5,"span",3),o["\u0275\u0275text"](6,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",4),o["\u0275\u0275elementStart"](8,"span",5),o["\u0275\u0275listener"]("nzVisibleChange",function(e){return t.attributeList.isShowModal.domains=e})("nzVisibleChange",function(e){return t.changeDomainShow(e)}),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"nz-dropdown-menu",null,6),o["\u0275\u0275template"](13,Z,1,5,"domain-selector-simp",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](14,ee,1,3,"batch-domain-selector",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",1),o["\u0275\u0275elementStart"](16,"div",2),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementStart"](19,"span",3),o["\u0275\u0275text"](20,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",4),o["\u0275\u0275template"](22,te,3,3,"span",9),o["\u0275\u0275template"](23,ne,4,7,"span",10),o["\u0275\u0275elementStart"](24,"nz-dropdown-menu",null,11),o["\u0275\u0275elementStart"](26,"workitem-search-select-panel",12),o["\u0275\u0275listener"]("onSelect",function(e){return t.selectUser(e,t.attributeList)}),o["\u0275\u0275pipe"](27,"async"),o["\u0275\u0275pipe"](28,"async"),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275template"](30,oe,4,6,"ng-template",null,13,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"div",1),o["\u0275\u0275elementStart"](33,"div",2),o["\u0275\u0275text"](34),o["\u0275\u0275pipe"](35,"translate"),o["\u0275\u0275elementStart"](36,"span",3),o["\u0275\u0275text"](37,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](38,"div",4),o["\u0275\u0275elementStart"](39,"nz-date-picker",14),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.attributeList.deadline=e}),o["\u0275\u0275pipe"](40,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](41,"div",1),o["\u0275\u0275elementStart"](42,"div",2),o["\u0275\u0275text"](43),o["\u0275\u0275pipe"](44,"translate"),o["\u0275\u0275elementStart"](45,"span",3),o["\u0275\u0275text"](46,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](47,"div",4),o["\u0275\u0275elementStart"](48,"span",15),o["\u0275\u0275pipe"](49,"colorMap"),o["\u0275\u0275template"](50,re,1,0,"span",16),o["\u0275\u0275elementStart"](51,"span"),o["\u0275\u0275text"](52),o["\u0275\u0275pipe"](53,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](54,"nz-dropdown-menu",null,17),o["\u0275\u0275elementStart"](56,"ul",18),o["\u0275\u0275template"](57,ae,6,8,"li",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275reference"](12),i=o["\u0275\u0275reference"](55);o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,26,"HOME_SPACE")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("nzVisible",t.attributeList.isShowModal.domains)("nzDropdownMenu",n)("nzVisible",t.showDomainSelector),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",t.attributeList.domain&&t.attributeList.domain.title||o["\u0275\u0275pipeBind1"](10,28,"DOMAIN_SELECTOR_TITLE_ISSUE_ASSIGNED_DOMAIN")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",t.showDomainSelector),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showAdvanceDomainSelector),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,30,"OWNER")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",!t.attributeList.domain),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.attributeList.domain),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("searchPlaceholder",o["\u0275\u0275pipeBind1"](29,36,"SEARCH_MEMBERS")),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](27,32,t.attributeList.domain_members))("loading",!o["\u0275\u0275pipeBind1"](28,34,t.attributeList.domain_members))("selected",t.attributeList.owner),o["\u0275\u0275advance"](8),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](35,38,"EXPECT_ONLINE_DATE")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",o["\u0275\u0275pipeBind1"](40,40,"SELECT_DATE")),o["\u0275\u0275property"]("nzShowToday",!1)("nzAllowClear",!0)("ngModel",t.attributeList.deadline),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](44,42,"PRIORITY")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275classMap"](o["\u0275\u0275pipeBind2"](49,44,t.attributeList.priority,"priority")),o["\u0275\u0275property"]("nzDropdownMenu",i),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.attributeList.priority),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](53,47,t.attributeList.priority||"SELECT_PRIORITY")),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngForOf",t.priorityList)}},directives:[v.b,v.d,m.n,b.a,C.a,g.k,g.l,y.c,m.m,K,Y,m.l,z.a,y.e],pipes:[d.b,m.b,Q.a,J.a],styles:[".attribute-container[_ngcontent-%COMP%]{width:100%;height:auto}.attribute-container[_ngcontent-%COMP%]   .attribute-item[_ngcontent-%COMP%]{width:50%;float:left;line-height:20px;margin:7px 0;display:flex}.attribute-container[_ngcontent-%COMP%]   .attribute-item[_ngcontent-%COMP%]   .attribute-label[_ngcontent-%COMP%]{width:110px}.attribute-container[_ngcontent-%COMP%]   .attribute-item[_ngcontent-%COMP%]   .attribute-value[_ngcontent-%COMP%]{flex:1;color:#666;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-select-option[_ngcontent-%COMP%]{cursor:pointer;position:relative;padding:5px 15px}.search-select-option[_ngcontent-%COMP%]   .unselected[_ngcontent-%COMP%]{font-size:14px;opacity:0}.search-select-option[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:#23c6c8;font-size:14px;opacity:1}"]}),e}(),le=n("CpTu"),se=n("HI9p"),de=n("fujP"),pe=n("Dyep"),ue=n("ZncU"),me=n("KupA"),he=n("+oEP"),ge=n("fODL"),fe=n("yg7y"),ve=["domain"],be=["owner"],Ce=["deadline"],ye=["during"],xe=["iteration"],we=["releasePlan"],_e=["taskType"],Oe=["microservice"],Se=["testOwner"],Ee=["feature_set"];function Me(e,t){1&e&&o["\u0275\u0275elementContainer"](0)}var Pe=function(e){return{newItem:e}};function Ie(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",12),o["\u0275\u0275template"](2,Me,1,0,"ng-container",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngTemplateOutlet",i.getTemplate(n))("ngTemplateOutletContext",o["\u0275\u0275pureFunction1"](2,Pe,i.newItem))}}var ke=function(e){return{selected:e}};function Te(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",21),o["\u0275\u0275element"](1,"i",22),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"]().newItem;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](2,ke,(null==i.domain?null:i.domain.domain_id)===(null==n?null:n.domain_id))),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.title," ")}}var De=function(){return{key:"domain_id"}};function Ae(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"span",15),o["\u0275\u0275text"](4,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",16),o["\u0275\u0275elementStart"](6,"span",17),o["\u0275\u0275listener"]("nzVisibleChange",function(e){return t.newItem.isShowModal.domains=e}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"nz-dropdown-menu",null,18),o["\u0275\u0275elementStart"](11,"workitem-search-select-panel",19),o["\u0275\u0275listener"]("onSelect",function(e){o["\u0275\u0275restoreView"](n);var i=t.newItem;return o["\u0275\u0275nextContext"]().itemDomainChange(i,e)}),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275template"](13,Te,3,4,"ng-template",null,20,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.newItem,r=o["\u0275\u0275reference"](10);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,9,"HOME_SPACE")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("nzVisible",i.isShowModal.domains)("nzDropdownMenu",r),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](8,11,i.domain&&i.domain.title||"DOMAIN_SELECTOR_TITLE_SELECT_HOME_SPACE")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("searchPlaceholder",o["\u0275\u0275pipeBind1"](12,13,"SEARCH_HOME_SPACE")),o["\u0275\u0275property"]("params",o["\u0275\u0275pureFunction0"](15,De))("options",i.collaborationDomains)("loading",!1)("selected",i.domain)}}function ze(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",21),o["\u0275\u0275element"](1,"i",22),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"userInfo"),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](4,ke,null==n?null:n.isSelected)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,n)," ")}}function Re(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"span",15),o["\u0275\u0275text"](4,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",16),o["\u0275\u0275elementStart"](6,"span",23),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.newItem;return o["\u0275\u0275nextContext"]().beforeSelectUser(e)})("nzVisibleChange",function(e){return t.newItem.isShowModal.members=e}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"isEmpty"),o["\u0275\u0275pipe"](9,"userInfo"),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"nz-dropdown-menu",null,24),o["\u0275\u0275elementStart"](13,"workitem-search-select-panel",25),o["\u0275\u0275listener"]("onSelect",function(e){o["\u0275\u0275restoreView"](n);var i=t.newItem;return o["\u0275\u0275nextContext"]().selectUser(e,i)}),o["\u0275\u0275pipe"](14,"async"),o["\u0275\u0275pipe"](15,"async"),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275template"](17,ze,4,6,"ng-template",null,20,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.newItem,r=o["\u0275\u0275reference"](12);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,8,"OWNER")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("nzDropdownMenu",r)("nzVisible",i.isShowModal.members),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",!o["\u0275\u0275pipeBind1"](8,10,i.owner)&&o["\u0275\u0275pipeBind1"](9,12,i.owner)||o["\u0275\u0275pipeBind1"](10,14,"TERM_OWNER_SELECT")," "),o["\u0275\u0275advance"](6),o["\u0275\u0275propertyInterpolate"]("searchPlaceholder",o["\u0275\u0275pipeBind1"](16,20,"SEARCH_MEMBERS")),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](14,16,i.domain_members))("loading",!o["\u0275\u0275pipeBind1"](15,18,i.domain_members))("selected",i.owner)}}function Le(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",16),o["\u0275\u0275elementStart"](4,"nz-date-picker",26),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.newItem.deadline=e}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.newItem;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,5,"DEADLINE")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",o["\u0275\u0275pipeBind1"](5,7,"SELECT_DATE")),o["\u0275\u0275property"]("nzShowToday",!1)("nzAllowClear",!0)("ngModel",n.deadline)}}var Ne=function(){return{nzFormat:"HH:mm",nzMinuteStep:15}};function je(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",16),o["\u0275\u0275elementStart"](4,"nz-date-picker",27),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.newItem.start_time=e}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"span",28),o["\u0275\u0275text"](7,"-"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"nz-date-picker",27),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.newItem.deadline=e}),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.newItem;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,11,"SET_DURING_TIME")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzShowTime",o["\u0275\u0275pureFunction0"](17,Ne))("nzShowToday",!1)("nzAllowClear",!0)("ngModel",n.start_time)("nzPlaceHolder",o["\u0275\u0275pipeBind1"](5,13,"START_TIME")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("nzShowTime",o["\u0275\u0275pureFunction0"](18,Ne))("nzShowToday",!1)("nzAllowClear",!0)("ngModel",n.deadline)("nzPlaceHolder",o["\u0275\u0275pipeBind1"](9,15,"DEADLINE"))}}function Ve(e,t){1&e&&o["\u0275\u0275element"](0,"i",37)}function Fe(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"i",38),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().newItem;return o["\u0275\u0275nextContext"]().handleSprintItemClick(null,e)}),o["\u0275\u0275elementEnd"]()}}function Be(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",47),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("(",o["\u0275\u0275pipeBind1"](2,1,"RECOMMENDED"),")"))}function Ue(e,t){1&e&&o["\u0275\u0275element"](0,"i",48)}function We(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",42),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]().newItem;return o["\u0275\u0275nextContext"]().handleSprintItemClick(e,t)}),o["\u0275\u0275element"](1,"i",43),o["\u0275\u0275elementStart"](2,"span",44),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,Be,3,3,"span",45),o["\u0275\u0275template"](5,Ue,1,0,"i",46),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"]().newItem;o["\u0275\u0275property"]("nzTooltipTitle",(i.start_date||"")+"~"+(i.end_date||"")),o["\u0275\u0275advance"](2),o["\u0275\u0275classProp"]("f-bold",r.iteration&&r.iteration.iteration_id==i.iteration_id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.title),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isPreferred),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.is_baseline)}}function He(e,t){1&e&&o["\u0275\u0275element"](0,"i",48)}var Ge=function(e,t){return{plan_type:e,plan_title:t}};function qe(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",49),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"i",43),o["\u0275\u0275elementStart"](4,"span",44),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,He,1,0,"i",46),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit,i=o["\u0275\u0275nextContext"]().newItem;o["\u0275\u0275property"]("nzTooltipTitle",o["\u0275\u0275pipeBind2"](1,5,"BASELINE_TIP",o["\u0275\u0275pureFunction2"](10,Ge,o["\u0275\u0275pipeBind1"](2,8,"ITERATIONS"),n.title))),o["\u0275\u0275advance"](4),o["\u0275\u0275classProp"]("f-bold",i.iteration&&i.iteration.iteration_id==n.iteration_id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.title),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.is_baseline)}}function $e(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"li",39),o["\u0275\u0275template"](1,We,6,6,"div",40),o["\u0275\u0275template"](2,qe,7,13,"div",41),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzDisabled",!n.isModifiedPlan),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isModifiedPlan),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.isModifiedPlan)}}function Ke(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"NO_ITERATION")))}function Xe(e,t){1&e&&o["\u0275\u0275element"](0,"workitem-loading-modal",53),2&e&&o["\u0275\u0275property"]("isLoaded",!1)}function Ye(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"li",50),o["\u0275\u0275template"](1,Ke,3,3,"span",51),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275template"](3,Xe,1,1,"ng-template",null,52,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275reference"](4),i=o["\u0275\u0275nextContext"]().newItem;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](2,2,null==i?null:i.domain.iterations))("ngIfElse",n)}}var Qe=function(e){return{"txt-warning":e}};function Je(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",16),o["\u0275\u0275elementStart"](4,"div",29),o["\u0275\u0275elementStart"](5,"span",30),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275template"](8,Ve,1,0,"i",31),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,Fe,1,0,"i",32),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"nz-dropdown-menu",null,33),o["\u0275\u0275elementStart"](12,"ul",34),o["\u0275\u0275template"](13,$e,3,3,"li",35),o["\u0275\u0275pipe"](14,"async"),o["\u0275\u0275template"](15,Ye,5,4,"li",36),o["\u0275\u0275pipe"](16,"isEmpty"),o["\u0275\u0275pipe"](17,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.newItem,i=o["\u0275\u0275reference"](11);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,9,"ITERATIONS")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzTooltipTitle",n.timeWarning),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzDropdownMenu",i)("ngClass",o["\u0275\u0275pureFunction1"](19,Qe,n.timeWarning)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,11,n.service_iteration&&n.service_iteration.title||"SELECT_ITERATION")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.timeWarning),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.service_iteration),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind1"](14,13,null==n?null:n.domain.iterations)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](16,15,o["\u0275\u0275pipeBind1"](17,17,null==n?null:n.domain.iterations)))}}function Ze(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",60),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().newItem;return o["\u0275\u0275nextContext"]().formatAvailableReleasePlans(e)}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){o["\u0275\u0275nextContext"]();var i=o["\u0275\u0275reference"](7);o["\u0275\u0275property"]("nzDropdownMenu",i),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"SELECT_RELEASE_PLAN")," ")}}function et(e,t){1&e&&o["\u0275\u0275element"](0,"i",37)}function tt(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",71),o["\u0275\u0275element"](1,"i",72),o["\u0275\u0275elementEnd"]())}function nt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",73),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"](2).newItem;return o["\u0275\u0275nextContext"]().getSimpleIterationList(t,e)}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){o["\u0275\u0275nextContext"](3);var i=o["\u0275\u0275reference"](13);o["\u0275\u0275property"]("nzDropdownMenu",i),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" \xa0\u2022\xa0",o["\u0275\u0275pipeBind1"](2,2,"SELECT_ITERATION")," ")}}function it(e,t){1&e&&o["\u0275\u0275element"](0,"i",78)}function ot(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,it,1,0,"i",76),o["\u0275\u0275elementStart"](2,"div",64),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](3).$implicit,t=o["\u0275\u0275nextContext"](2).newItem;return o["\u0275\u0275nextContext"]().getSimpleIterationList(t,e)}),o["\u0275\u0275elementStart"](3,"span",29),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"i",77),o["\u0275\u0275listener"]("nzOnConfirm",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"](2).$implicit,i=o["\u0275\u0275nextContext"](2).newItem;return o["\u0275\u0275nextContext"]().cancelRelateToInteration(i,t,e)}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"](4).newItem,a=o["\u0275\u0275reference"](13);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.timeWarning),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzDropdownMenu",a),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzTooltipTitle",i.title+": "+(i.start_date||"")+"~"+(i.end_date||"")),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" \xa0\u2022\xa0",i.title," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzPopconfirmTitle",o["\u0275\u0275pipeBind1"](6,5,"ARE_YOU_SURE_DELETE"))}}function rt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",75),o["\u0275\u0275template"](1,ot,7,7,"ng-container",55),o["\u0275\u0275elementEnd"]()),2&e){var n=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n<=1)}}function at(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,rt,2,1,"div",74),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.simpleIteration)}}function ct(e,t){if(1&e&&o["\u0275\u0275element"](0,"i",79),2&e){o["\u0275\u0275nextContext"]();var n=o["\u0275\u0275reference"](15);o["\u0275\u0275property"]("nzPopoverContent",n)}}function lt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",81),o["\u0275\u0275elementStart"](1,"span",29),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzTooltipTitle",n.title+": "+(n.start_date||"")+"~"+(n.end_date||"")),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function st(e,t){if(1&e&&o["\u0275\u0275template"](0,lt,3,2,"div",80),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275property"]("ngForOf",n.simpleIteration)}}function dt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",62),o["\u0275\u0275elementStart"](1,"div",63),o["\u0275\u0275elementStart"](2,"div",64),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](2).newItem;return o["\u0275\u0275nextContext"]().formatAvailableReleasePlans(e)}),o["\u0275\u0275elementStart"](3,"span",65),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,et,1,0,"i",31),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,tt,2,0,"span",66),o["\u0275\u0275elementStart"](7,"i",67),o["\u0275\u0275listener"]("nzOnConfirm",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=o["\u0275\u0275nextContext"](2).newItem;return o["\u0275\u0275nextContext"]().cancelReasePlan(i,e)}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",62),o["\u0275\u0275template"](10,nt,3,4,"div",68),o["\u0275\u0275template"](11,at,2,1,"ng-container",55),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div"),o["\u0275\u0275template"](13,ct,1,1,"i",69),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](14,st,1,1,"ng-template",null,70,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=o["\u0275\u0275nextContext"](2).newItem,a=o["\u0275\u0275reference"](7);o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzDropdownMenu",a),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzTooltipTitle",r.timeWarning||i.title),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",i.title," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.timeWarning),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.is_baseline),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzPopconfirmTitle",o["\u0275\u0275pipeBind1"](8,9,"ARE_YOU_SURE_DELETE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!(null!=i&&null!=i.simpleIteration&&i.simpleIteration.length)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==i||null==i.simpleIteration?null:i.simpleIteration.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.simpleIteration&&i.simpleIteration.length>2)}}function pt(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,dt,16,11,"div",61),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().newItem;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.releasePlan)}}function ut(e,t){1&e&&o["\u0275\u0275element"](0,"i",86)}function mt(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",71),o["\u0275\u0275element"](1,"i",48),o["\u0275\u0275elementEnd"]())}function ht(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",82),o["\u0275\u0275elementStart"](1,"span",83),o["\u0275\u0275template"](2,ut,1,0,"i",84),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",85),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,mt,2,0,"span",66),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.isSelected),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzTooltipTitle",(n.start_date||"")+"~"+(n.end_date||"")),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.title," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.is_baseline)}}function gt(e,t){1&e&&o["\u0275\u0275element"](0,"i",86)}function ft(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",71),o["\u0275\u0275element"](1,"i",48),o["\u0275\u0275elementEnd"]())}function vt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",82),o["\u0275\u0275elementStart"](1,"span",83),o["\u0275\u0275template"](2,gt,1,0,"i",84),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",85),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,ft,2,0,"span",66),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.isSelected),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzTooltipTitle",(n.start_date||"")+"~"+(n.end_date||"")),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.title," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.is_baseline)}}var bt=function(){return{width:"200px",maxHeight:"260px"}};function Ct(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",16),o["\u0275\u0275template"](4,Ze,3,4,"div",54),o["\u0275\u0275template"](5,pt,2,1,"ng-container",55),o["\u0275\u0275elementStart"](6,"nz-dropdown-menu",null,56),o["\u0275\u0275elementStart"](8,"workitem-search-select-panel",57),o["\u0275\u0275listener"]("onConfirm",function(e){o["\u0275\u0275restoreView"](n);var i=t.newItem;return o["\u0275\u0275nextContext"]().handleConfirmReleasePlan(e,i)}),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275template"](10,ht,6,4,"ng-template",null,20,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"nz-dropdown-menu",null,58),o["\u0275\u0275elementStart"](14,"workitem-search-select-panel",59),o["\u0275\u0275listener"]("onConfirm",function(e){o["\u0275\u0275restoreView"](n);var i=t.newItem;return o["\u0275\u0275nextContext"]().handleConfirmSimpleIteration(e,i)}),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275template"](16,vt,6,4,"ng-template",null,20,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.newItem,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,12,"RELEASE_PLAN")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!(null!=i&&null!=i.releasePlan&&i.releasePlan.length)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==i||null==i.releasePlan?null:i.releasePlan.length),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("searchPlaceholder",o["\u0275\u0275pipeBind1"](9,14,"SEARCH_RELEASE_PLANS")),o["\u0275\u0275property"]("options",i.availableReleasePlans)("loading",r.loading.availableReleasePlans)("selected",i.releasePlan)("styles",o["\u0275\u0275pureFunction0"](18,bt)),o["\u0275\u0275advance"](6),o["\u0275\u0275propertyInterpolate"]("searchPlaceholder",o["\u0275\u0275pipeBind1"](15,16,"SEARCH_ITEATION_PLANS")),o["\u0275\u0275property"]("options",i.availableSimpleIteration)("loading",r.loading.availableSimpleIteration)("selected",i.relateToInterationList)}}function yt(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",15),o["\u0275\u0275text"](1,"*"),o["\u0275\u0275elementEnd"]())}function xt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",87),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"span",88),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,yt,2,0,"span",89),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",16),o["\u0275\u0275element"](7,"i",90),o["\u0275\u0275elementStart"](8,"span",91),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getAvailiablefeatureSet()})("nzVisibleChange",function(e){return t.newItem.isShowModal.availableFeatureSet=e}),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"nz-dropdown-menu",null,92),o["\u0275\u0275elementStart"](13,"div",93),o["\u0275\u0275elementStart"](14,"feature-set-select",94),o["\u0275\u0275listener"]("selected",function(e){o["\u0275\u0275restoreView"](n);var i=t.newItem;return o["\u0275\u0275nextContext"]().selectedFeatureSet(e,i)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.newItem,r=o["\u0275\u0275reference"](12),a=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("title",o["\u0275\u0275pipeBind1"](1,9,i.enableSF?"ASSIGNED_SF":"ASSIGNED_FEATURE_SET")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,11,i.enableSF?"ASSIGNED_SF":"ASSIGNED_FEATURE_SET")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",null==i.necessary?null:i.necessary.feature_set),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngClass",i.enableSF?"icon-bulb":"icon-drawer"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzDropdownMenu",r)("nzVisible",i.isShowModal.availableFeatureSet),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,13,(null==i.feature_set?null:i.feature_set.title)||(i.enableSF?"SELECT_SERVICE_FEATURE":"SELECT_FEATURE_SET"))," "),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("treeData",a.availableFeatureSet)("loading",a.loading.availableFeatureSet)}}function wt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"li",39),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275property"]("nzDisabled",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.enum_value)}}function _t(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",102),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"](2).newItem;return o["\u0275\u0275nextContext"]().handleAttrsItemClick(e,t)}),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"](2).newItem;o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("f-bold",r.attrs&&r.attrs.id==i.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.enum_value)}}function Ot(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,wt,3,2,"li",100),o["\u0275\u0275template"](2,_t,3,3,"ng-template",null,101,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,i=o["\u0275\u0275reference"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","\u5f00\u53d1"===n.enum_value)("ngIfElse",i)}}function St(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"NO_AVAILABLE_TYPE")))}function Et(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"li",103),o["\u0275\u0275element"](1,"workitem-loading-modal",53),o["\u0275\u0275template"](2,St,3,3,"span",55),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("isLoaded",!n.loading.availableAttrs),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.loading.availableAttrs)}}function Mt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"ul",98),o["\u0275\u0275template"](1,Ot,4,2,"ng-container",1),o["\u0275\u0275template"](2,Et,3,2,"li",99),o["\u0275\u0275pipe"](3,"isEmpty"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().newItem;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.workitemClassify.enum_attr),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](3,2,n.workitemClassify&&n.workitemClassify.enum_attr))}}function Pt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",16),o["\u0275\u0275elementStart"](4,"span",95),o["\u0275\u0275pipe"](5,"colorMap"),o["\u0275\u0275elementStart"](6,"span"),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"nz-dropdown-menu",null,96),o["\u0275\u0275template"](11,Mt,4,4,"ul",97),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.newItem,i=o["\u0275\u0275reference"](10);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,6,"TASK_TYPE")),o["\u0275\u0275advance"](3),o["\u0275\u0275classMap"](o["\u0275\u0275pipeBind2"](5,8,n.priority,"priority")),o["\u0275\u0275property"]("nzDropdownMenu",i),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](n.attrs&&n.attrs.enum_value||o["\u0275\u0275pipeBind1"](8,11,"CHOOSE_TYPE")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",n.workitemClassify&&n.workitemClassify.enum_attr)}}function It(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",15),o["\u0275\u0275text"](1,"*"),o["\u0275\u0275elementEnd"]())}function kt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",21),o["\u0275\u0275element"](1,"i",22),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](2,ke,n.isSelected)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Tt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275template"](3,It,2,0,"span",89),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",16),o["\u0275\u0275elementStart"](5,"span",104),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.newItem;return o["\u0275\u0275nextContext"]().formatAvailableMicroservice(e)})("nzVisibleChange",function(e){return t.newItem.isShowModal.microservice=e}),o["\u0275\u0275elementStart"](6,"span"),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"nz-dropdown-menu",null,105),o["\u0275\u0275elementStart"](11,"workitem-search-select-panel",106),o["\u0275\u0275listener"]("onConfirm",function(e){o["\u0275\u0275restoreView"](n);var i=t.newItem;return o["\u0275\u0275nextContext"]().handleAddMicroservice(e,i)}),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275template"](13,kt,3,4,"ng-template",null,20,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.newItem,r=o["\u0275\u0275reference"](10),a=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,8,"MICROSERVICES")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.necessary&&i.necessary.attribution_microservice),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzDropdownMenu",r)("nzVisible",i.isShowModal.microservice),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](8,10,i.microserviceStringName||"SELECT_MICROSERVICES")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("options",i.availiableMicroservice)("searchPlaceholder",o["\u0275\u0275pipeBind1"](12,12,"SEARCH_MICROSERVICES"))("loading",a.loading.availiableMicroservice)}}function Dt(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",15),o["\u0275\u0275text"](1,"*"),o["\u0275\u0275elementEnd"]())}function At(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",21),o["\u0275\u0275element"](1,"i",22),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"userInfo"),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](4,ke,n.isSelected)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,n)," ")}}var zt=function(){return{width:"240px",maxHeight:"260px"}};function Rt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275template"](3,Dt,2,0,"span",89),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",16),o["\u0275\u0275elementStart"](5,"span",23),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.newItem;return o["\u0275\u0275nextContext"]().getAvailiableTestOwners(e)})("nzVisibleChange",function(e){return t.newItem.isShowModal.test_owner=e}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"isEmpty"),o["\u0275\u0275pipe"](8,"userInfo"),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"nz-dropdown-menu",null,107),o["\u0275\u0275elementStart"](12,"workitem-search-select-panel",108),o["\u0275\u0275listener"]("onSearch",function(e){o["\u0275\u0275restoreView"](n);var i=t.newItem;return o["\u0275\u0275nextContext"]().handleSearchTestOwner(e,i)})("onSelect",function(e){o["\u0275\u0275restoreView"](n);var i=t.newItem;return o["\u0275\u0275nextContext"]().handleSelectTestOwner(e,i)}),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275template"](14,At,4,6,"ng-template",null,20,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.newItem,r=o["\u0275\u0275reference"](11),a=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,10,"TEST_OWNER")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.necessary&&i.necessary.test_owners),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzDropdownMenu",r)("nzVisible",i.isShowModal.test_owner),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",!o["\u0275\u0275pipeBind1"](7,12,i.test_owner)&&o["\u0275\u0275pipeBind1"](8,14,i.test_owner)||o["\u0275\u0275pipeBind1"](9,16,"SELECT_TESTER")," "),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("searchPlaceholder",o["\u0275\u0275pipeBind1"](13,18,"ENTER_NAME_SEARCH"))("options",i.availableTestOwners)("loading",a.loading.availableTestOwners)("selected",i.test_owner)("styles",o["\u0275\u0275pureFunction0"](20,zt))}}var Lt=function(){function e(e,t){this.relationLinkNewService=e,this.translate=t,this.eventOutput=new o.EventEmitter,this.priorityList=[],this.loading={availableAttrs:!1,availiableMicroservice:!1,availableTestOwners:!1,availableSimpleIteration:!1,availableReleasePlans:!1,availableFeatureSet:!1},this.availableFeatureSet=[]}return e.prototype.ngOnInit=function(){var e=this;this.priorityList=this.relationLinkNewService.initPriorities(),this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&(e.currentUser={id:t.user_id,name:t.user_name_zh,account:t.huawei_id,email:t.email,name_full:t.user_name_full,username:t.user_name})})},e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe()},e.prototype.itemDomainChange=function(e,t){return Object(i.b)(this,void 0,void 0,function(){var n=this;return Object(i.e)(this,function(i){return e.isShowModal.domains=!1,e.domain&&t&&e.domain.domain_id===t.domain_id||(e.domain=t,e.owner=null,e.domain_members=this.relationLinkNewService.queryDomainMembers(e).toPromise().catch(function(e){return Object(c.b)(e)}),e.service_iteration=null,e.releasePlan=null,this.relationLinkNewService.getNecessaryAttribute(e),e.domain_members.then(function(t){if(e.owner=null,!Object(a.o)(t)){var i=t.find(function(e){return e.id===n.currentUser.id});e.owner=i?n.currentUser:t[0]}}),this.eventOutput.emit({event:"newItem-update:domain-change",data:e})),[2]})})},e.prototype.getTemplate=function(e){return this[e]},e.prototype.beforeSelectUser=function(e){return Object(i.b)(this,void 0,void 0,function(){return Object(i.e)(this,function(t){switch(t.label){case 0:return[4,this.relationLinkNewService.beforeSelectUser(e)];case 1:return t.sent(),[2]}})})},e.prototype.selectUser=function(e,t){this.relationLinkNewService.selectUser(e,t)},e.prototype.handleConfirmPriority=function(e,t){e.priority=t},e.prototype.handleSprintItemClick=function(e,t){t.service_iteration=e,e&&this.tipTimeWarning(t,{relate_number:this.fromItem.number,current_plan:[{category:"iteration",id:e.iteration_id}]})},e.prototype.handleReleasePlanItemClick=function(e,t){t.releasePlan=e,this.tipTimeWarning(t,{relate_number:this.fromItem.number,current_plan:[{category:"release_plan",number:e.number}]})},e.prototype.handleConfirmReleasePlan=function(e,t){var n=[],o=[];e.forEach(function(e){var i=t.availableReleasePlans.find(function(t){return t.id===e.id});i?(i.isSelected=!0,n.push(i)):(e.isSelected=!0,e.simpleIteration=[],o.push(e))}),t.isShowModal.release_plans=!1,t.releasePlan=Object(i.i)(n,o)},e.prototype.handleConfirmSimpleIteration=function(e,t){var n=e[0].upReleasePlan.id,i=t.availableReleasePlans.find(function(e){return e.id===n});i&&(i.simpleIteration=e)},e.prototype.formatAvailableReleasePlans=function(e){this.relationLinkNewService.queryReleasePlans(null==e?void 0:e.domain.domain_id).subscribe(function(t){Object(a.o)(t)||(e.availableReleasePlans=t,e.availableReleasePlans.forEach(function(e){e.simpleIteration=[],e.isSelected=!1}),e.isShowModal.release_plans=!0)},function(){})},e.prototype.getSimpleIterationList=function(e,t){var n=this;t&&(e.relateToInterationList=t.simpleIteration,this.loading.availableSimpleIteration=!0,this.relationLinkNewService.queryAvailableSprints(e,t).subscribe(function(i){var o;e.availableSimpleIteration=((o=i).forEach(function(e){e.isSelected=!!Object(le.a)(t.simpleIteration,{iteration_id:e.iteration_id})}),o),n.loading.availableSimpleIteration=!1},function(){}))},e.prototype.cancelReasePlan=function(e,t){var n=Object(se.a)(e.releasePlan,{id:t.id});n>=0&&e.releasePlan.splice(n,1)},e.prototype.cancelRelateToInteration=function(e,t,n){var i=Object(se.a)(t.simpleIteration,{iteration_id:n.iteration_id});i>=0&&t.simpleIteration.splice(i,1),e.releasePlan.forEach(function(e){e.id===t.id&&(e=t)})},e.prototype.tipTimeWarning=function(e,t){var n=this;this.relationLinkNewService.getTimeWarning(t).subscribe(function(t){e.timeWarning=t&&t.warning_message.length?n.translate.instant(t.warning_message[0].reason):""},function(){})},e.prototype.handleAttrsItemClick=function(e,t){t.attrs=e},e.prototype.handleAddMicroservice=function(e,t){t.microserviceStringName="",t.microservice=e,t.isShowModal.microservice=!1,t.microserviceStringName=e.map(function(e){return e.name}).join(",")},e.prototype.formatAvailableMicroservice=function(e){var t=this;e.availiableMicroservice=[],this.loading.availiableMicroservice=!0,this.relationLinkNewService.queryMicroservice(e.domain.domain_id,!1).subscribe(function(n){if(t.loading.availiableMicroservice=!1,n)if(n.forEach(function(t){"MICRO_SERVICE_GROUP"===t.type?e.availiableMicroservice.push.apply(e.availiableMicroservice,t.micro_services):"MICRO_SERVICE"===t.type&&e.availiableMicroservice.push(t)}),e.microserviceStringName){var i=e.microserviceStringName.split(",");e.availiableMicroservice.forEach(function(e){e.isSelected=i.includes(e.name)})}else e.availiableMicroservice.forEach(function(e){e.isSelected=!1})},function(){})},e.prototype.getAvailiableTestOwners=function(e){var t=this;Object(a.o)(e.availableTestOwners)&&(this.loading.availableTestOwners=!0,this.relationLinkNewService.query_members(e.domain.domain_id).subscribe(function(n){t.loading.availableTestOwners=!1,e.availableTestOwners=n.data.self_members.members.map(function(e){return e.isSelected=!1,e.user})},function(){}))},e.prototype.handleSearchTestOwner=function(e,t){var n=this,i=pe.a.filter(t.availableTestOwners,e);Object(de.a)(i)&&(this.loading.availableTestOwners=!0,this.relationLinkNewService.fuzzySearchUsers(e).subscribe(function(e){if(n.loading.availableTestOwners=!1,!Object(de.a)(e)){var i={};t.availableTestOwners.forEach(function(e){i[e.id]=!0}),e.forEach(function(e){e.name="en"===n.translate.currentLang?e.name_full:""+e.name,i[e.id]||t.availableTestOwners.push(e)})}},function(){}))},e.prototype.handleSelectTestOwner=function(e,t){t.test_owner=e.isSelected?e:null,t.isShowModal.test_owner=!1},e.prototype.getAvailiablefeatureSet=function(e){var t=this;void 0===e&&(e=!1),this.loading.availableFeatureSet=!0,this.availableFeatureSet=[];var n=function(){t.loading.availableFeatureSet=!1};this.newItem.enableSF?this.relationLinkNewService.queryFeatureSetTree({domainId:this.newItem.domain.id,displayFeature:!1,displayServiceFeature:!0}).subscribe(function(e){if(n(),!Object(de.a)(e)){var i=function(e){return e.forEach(function(e){e.disabled="FeatureSet"===e.category,Object(de.a)(e.children)||i(e.children)}),e};t.availableFeatureSet=i(e)}},n):this.relationLinkNewService.featureListForMove(this.newItem.domain.id,e).subscribe(function(e){Object(a.o)(e)||(t.availableFeatureSet=e),n()},n)},e.prototype.selectedFeatureSet=function(e,t){t.enableSF&&"ServiceFeature"!==e.category||(t.feature_set=e,t.isShowModal.availableFeatureSet=!1)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](d.c))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["workitem-attribute"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](ve,3),o["\u0275\u0275viewQuery"](be,3),o["\u0275\u0275viewQuery"](Ce,3),o["\u0275\u0275viewQuery"](ye,3),o["\u0275\u0275viewQuery"](xe,3),o["\u0275\u0275viewQuery"](we,3),o["\u0275\u0275viewQuery"](_e,3),o["\u0275\u0275viewQuery"](Oe,3),o["\u0275\u0275viewQuery"](Se,3),o["\u0275\u0275viewQuery"](Ee,3)),2&e){var n=void 0;o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.domain=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.owner=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.deadline=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.during=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.iteration=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.releasePlan=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.taskType=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.microservice=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.testOwner=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.feature_set=n.first)}},inputs:{newItem:"newItem",fromItem:"fromItem",attrList:"attrList"},outputs:{eventOutput:"eventOutput"},decls:22,vars:1,consts:[[1,"attribute-container"],[4,"ngFor","ngForOf"],["domain",""],["owner",""],["deadline",""],["during",""],["iteration",""],["releasePlan",""],["feature_set",""],["taskType",""],["microservice",""],["testOwner",""],[1,"attribute-item"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"attribute-label"],[1,"text-danger"],[1,"attribute-value"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"cur-pointer","txt-underline",3,"nzVisible","nzDropdownMenu","nzVisibleChange"],["domains","nzDropdownMenu"],["type","single",3,"params","options","loading","selected","searchPlaceholder","onSelect"],["option",""],[1,"search-select-option"],[1,"iconfont","m-r-5","icon-right","unselected",3,"ngClass"],["nz-dropdown","","nzTrigger","click",1,"cur-pointer","txt-underline",3,"nzDropdownMenu","nzVisible","click","nzVisibleChange"],["ownerMenu","nzDropdownMenu"],["type","single",3,"options","loading","selected","searchPlaceholder","onSelect"],["nzFormat","yyyy-MM-dd","nzSize","small",3,"nzShowToday","nzAllowClear","ngModel","nzPlaceHolder","ngModelChange"],["nzFormat","MM-dd HH:mm","nzSuffixIcon","","nzSize","small",2,"width","100px","height","28px",3,"nzShowTime","nzShowToday","nzAllowClear","ngModel","nzPlaceHolder","ngModelChange"],[1,"m-l-5","m-r-5"],["nz-tooltip","",3,"nzTooltipTitle"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomCenter",1,"cur-pointer","txt-underline",3,"nzDropdownMenu","ngClass"],["class","fa fa-exclamation-triangle m-r-5 cur-pointer txt-warning",4,"ngIf"],["class","iconfont icon-close f-12 m-r-5 cur-pointer",3,"click",4,"ngIf"],["sprint","nzDropdownMenu"],["nz-menu","",1,"select-content"],["nz-menu-item","","class","txt-999","style","min-width: 120px; padding: 8px 12px",3,"nzDisabled",4,"ngFor","ngForOf"],["nz-menu-item","","class","txt-999","style","min-width: 120px; padding: 8px 12px; height: 40px; position: relative",4,"ngIf"],[1,"fa","fa-exclamation-triangle","m-r-5","cur-pointer","txt-warning"],[1,"iconfont","icon-close","f-12","m-r-5","cur-pointer",3,"click"],["nz-menu-item","",1,"txt-999",2,"min-width","120px","padding","8px 12px",3,"nzDisabled"],["nz-tooltip","",3,"nzTooltipTitle","click",4,"ngIf"],["nz-tooltip","","nzTooltipPlacement","right",3,"nzTooltipTitle",4,"ngIf"],["nz-tooltip","",3,"nzTooltipTitle","click"],["nz-icon","","nzType","clock-circle","nzTheme","outline"],[2,"padding","0 5px"],["class","txt-999 m-l-10",4,"ngIf"],["class","iconfont icon-lock txt-666",4,"ngIf"],[1,"txt-999","m-l-10"],[1,"iconfont","icon-lock","txt-666"],["nz-tooltip","","nzTooltipPlacement","right",3,"nzTooltipTitle"],["nz-menu-item","",1,"txt-999",2,"min-width","120px","padding","8px 12px","height","40px","position","relative"],[4,"ngIf","ngIfElse"],["loadingTips",""],[3,"isLoaded"],["class","cur-pointer txt-underline editable","nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",3,"nzDropdownMenu","click",4,"ngIf"],[4,"ngIf"],["menu1","nzDropdownMenu"],["type","multiple",3,"options","searchPlaceholder","loading","selected","styles","onConfirm"],["menu2","nzDropdownMenu"],[3,"options","searchPlaceholder","loading","selected","onConfirm"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"cur-pointer","txt-underline","editable",3,"nzDropdownMenu","click"],["class","flex-box",4,"ngFor","ngForOf"],[1,"flex-box"],[1,"release-box","flex-box","flex-center"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"plan-title","editable",3,"nzDropdownMenu","click"],["nz-tooltip","","nzTooltipPlacement","topLeft",3,"nzTooltipTitle"],["class","option-lock",4,"ngIf"],["nz-popconfirm","","nzPopconfirmPlacement","top",1,"iconfont","icon-close",3,"nzPopconfirmTitle","nzOnConfirm"],["class","editable txt-aaa cur-pointer","nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",3,"nzDropdownMenu","click",4,"ngIf"],["class","m-l-5 iconfont icon-more","nz-popover","",3,"nzPopoverContent",4,"ngIf"],["simpleIterationList",""],[1,"option-lock"],[1,"iconfont","icon-lock","txt-666","f-14"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"editable","txt-aaa","cur-pointer",3,"nzDropdownMenu","click"],["class","iteration-box flex-box flex-center m-l-3",4,"ngFor","ngForOf"],[1,"iteration-box","flex-box","flex-center","m-l-3"],["class","fa fa-exclamation-triangle txt-warning",4,"ngIf"],["nz-popconfirm","","nzPopconfirmPlacement","top",1,"iconfont","icon-close","m-r-5","m-l-5",3,"nzPopconfirmTitle","nzOnConfirm"],[1,"fa","fa-exclamation-triangle","txt-warning"],["nz-popover","",1,"m-l-5","iconfont","icon-more",3,"nzPopoverContent"],["class","txt-999 f-14",4,"ngFor","ngForOf"],[1,"txt-999","f-14"],[1,"flex-box","cur-pointer","option-item"],[1,"option-checked"],["class","txt-primary","nz-icon","","nzType","check","nzTheme","outline",4,"ngIf"],["nz-tooltip","",1,"option-title",3,"nzTooltipTitle"],["nz-icon","","nzType","check","nzTheme","outline",1,"txt-primary"],[1,"attribute-label","flex-box","flex-a-c",3,"title"],[1,"feature-set-label","text-omit"],["class","text-danger",4,"ngIf"],[1,"iconfont","m-r-5",3,"ngClass"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"text-omit","txt-underline","display-inline","cur-pointer",3,"nzDropdownMenu","nzVisible","click","nzVisibleChange"],["featureSetRef","nzDropdownMenu"],[1,"featureset-select-menu"],[3,"treeData","loading","selected"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"editable","cur-pointer","txt-underline",3,"nzDropdownMenu"],["attrs","nzDropdownMenu"],["nz-menu","",4,"ngIf"],["nz-menu",""],["class","txt-999","style","min-width: 120px; padding: 8px 12px; height: 40px; position: relative",4,"ngIf"],["nz-menu-item","","class","txt-999","style","min-width: 120px; padding: 8px 12px",3,"nzDisabled",4,"ngIf","ngIfElse"],["content",""],["nz-menu-item","",1,"txt-999",2,"min-width","120px","padding","8px 12px",3,"click"],[1,"txt-999",2,"min-width","120px","padding","8px 12px","height","40px","position","relative"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"editable","cur-pointer","txt-underline",3,"nzDropdownMenu","nzVisible","click","nzVisibleChange"],["microservice","nzDropdownMenu"],["forwardNode","true",3,"options","searchPlaceholder","loading","onConfirm"],["testOwnerMenu","nzDropdownMenu"],["type","single",3,"searchPlaceholder","options","loading","selected","styles","onSearch","onSelect"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,Ie,3,4,"ng-container",1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](2,Ae,15,16,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](4,Re,19,22,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](6,Le,6,9,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](8,je,10,19,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](10,Je,18,21,"ng-template",null,6,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](12,Ct,18,19,"ng-template",null,7,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](14,xt,15,15,"ng-template",null,8,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](16,Pt,12,13,"ng-template",null,9,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](18,Tt,15,14,"ng-template",null,10,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](20,Rt,16,21,"ng-template",null,11,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.attrList))},directives:[m.m,m.s,v.b,v.d,b.a,m.l,C.a,g.k,g.l,D.d,m.n,y.c,z.a,y.e,A.a,ue.a,me.a,he.a,ge.a],pipes:[d.b,fe.a,J.a,m.b,Q.a],styles:[".attribute-container[_ngcontent-%COMP%]{width:100%;height:auto}.attribute-container[_ngcontent-%COMP%]   .attribute-item[_ngcontent-%COMP%]:nth-child(odd){width:60%}.attribute-container[_ngcontent-%COMP%]   .attribute-item[_ngcontent-%COMP%]:nth-child(2n){width:40%}.attribute-container[_ngcontent-%COMP%]   .attribute-item[_ngcontent-%COMP%]{float:left;line-height:30px;display:flex}.attribute-container[_ngcontent-%COMP%]   .attribute-item[_ngcontent-%COMP%]   .attribute-label[_ngcontent-%COMP%]{width:95px}.attribute-container[_ngcontent-%COMP%]   .attribute-item[_ngcontent-%COMP%]   .attribute-value[_ngcontent-%COMP%]{flex:1;color:#666}.search-select-option[_ngcontent-%COMP%]{cursor:pointer;position:relative;padding:5px 15px}.search-select-option[_ngcontent-%COMP%]   .unselected[_ngcontent-%COMP%]{font-size:14px;opacity:0}.search-select-option[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:#23c6c8;font-size:14px;opacity:1}.select-content[_ngcontent-%COMP%]{max-height:300px;overflow:auto}.feature-set-label[_ngcontent-%COMP%]{width:80px}.iteration-box[_ngcontent-%COMP%]   .plan-title[_ngcontent-%COMP%], .release-box[_ngcontent-%COMP%]   .plan-title[_ngcontent-%COMP%]{max-width:80px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.iteration-box[_ngcontent-%COMP%]   .icon-close[_ngcontent-%COMP%], .release-box[_ngcontent-%COMP%]   .icon-close[_ngcontent-%COMP%]{font-size:13px;display:none;cursor:pointer}.iteration-box[_ngcontent-%COMP%]   .close-box[_ngcontent-%COMP%], .release-box[_ngcontent-%COMP%]   .close-box[_ngcontent-%COMP%]{width:12px;height:12px;display:inline-block}.iteration-box[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%], .release-box[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:block;font-weight:700;margin:0 2px}  .cdk-overlay-pane{min-width:unset!important}  .option-item{align-items:center;padding:5px 0;position:relative;white-space:nowrap;line-height:20px}  .option-item .option-checked,   .option-item .option-lock{width:25px;text-align:center}  .option-item .option-title{flex:1}  .featureset-select-menu{width:250px;height:300px;box-shadow:0 0 4px #00000033}  .featureset-select-menu .feature-set-select .ant-tree .ant-tree-treenode{padding:0;margin-bottom:10px}"]}),e}(),Nt=n("JXZa"),jt=n("z4wI"),Vt=n("7xxS"),Ft=function(e){return{backgroundColor:e}},Bt=function(e){return{color:e}};function Ut(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",16),o["\u0275\u0275elementStart"](1,"span",17),o["\u0275\u0275element"](2,"i",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",19),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"span",20),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=o["\u0275\u0275nextContext"]();return i.removeLabel(i.moreAttributeList,e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](3,Ft,i.color)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](5,Bt,i.color)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.title)}}function Wt(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",6),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"ADD_LABEL")))}function Ht(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"workitem-label-select-panel",21),o["\u0275\u0275listener"]("modeChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().labelModalMode=e})("onSelect",function(e){o["\u0275\u0275restoreView"](n);var t=o["\u0275\u0275nextContext"]();return t.handleLabelItemClick(e,t.moreAttributeList)})("onConfirm",function(e){o["\u0275\u0275restoreView"](n);var t=o["\u0275\u0275nextContext"]();return t.handleLabelConfirmClick(e,t.moreAttributeList)}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("searchPlaceholder",o["\u0275\u0275pipeBind1"](1,4,"SEARCH_LABEL")),o["\u0275\u0275property"]("options",i.moreAttributeList.availableLabels)("loading",!1)("mode",i.labelModalMode)}}function Gt(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275element"](1,"nz-option",22),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzValue",n)("nzLabel",o["\u0275\u0275pipeBind1"](2,2,n))}}var qt=function(){function e(e,t,n){this.relationLinkNewService=e,this.translate=t,this.notification=n,this.labelModalMode="default",this.loading={create:!1,availableAttrs:!1,availableLabels:!1,availiableMicroservice:!1},this.fromItemLabels=[],this.healthDegreeOptions=["02002001","02002002","02002003"]}return e.prototype.ngOnInit=function(){},e.prototype.workloadShift=function(e,t){"workload_man_day"===t?e.workload_man_day=Object(a.u)("workload_man_day",e.workload_man_month):"workload_man_month"===t&&(e.workload_man_month=Object(a.u)("workload_man_month",e.workload_man_day))},e.prototype.formatAvailableLabels=function(e){var t=this;if(!e.domain)return this.notification.error(this.translate.instant("DOMAIN_SELECTOR_TITLE_ISSUE_ASSIGNED_DOMAIN"),"");var n={method:"POST",url:"/vision-common/api/query/labels",body:{filter:[{domainId:this.domainId,categorys:["requirement_tag"]},{domainId:0,categorys:["signpost_tag"]}]},params:{}};this.loading.availableLabels=!0,this.relationLinkNewService.labelRequest(n).subscribe(function(n){t.loading.availableLabels=!1,n&&(e.availableLabels=n.map(function(t){return t.color=t.bg_color,delete t.bg_color,t.isSelected=!!Object(le.a)(e.labels,{id:t.id}),t.readOnly=!0,t}).sort(function(e,t){return e.isSelected&&!t.isSelected?-1:0}))},function(){t.loading.availableLabels=!1})},e.prototype.removeLabel=function(e,t){this.relationLinkNewService.removeLabel(e,t)},e.prototype.handleLabelItemClick=function(e,t){this.relationLinkNewService.handleLabelItemClick(e,t)},e.prototype.handleLabelConfirmClick=function(e,t){var n=this;this.loading.availableLabels=!0,this.relationLinkNewService.labelRequest({method:"POST",url:"/vision-common/api/domains/"+this.domainId+"/labels",body:[{title:e.data.title,bg_color:e.data.color,category:"requirement_tag"}],params:{}}).pipe(Object(_.a)(1)).subscribe(function(e){if(!e)return n.notification.error(n.translate.instant("CREATE_FAILED"),""),void(n.loading.availableLabels=!1);e.color=e.bg_color,n.notification.success(n.translate.instant("UPDATE_SUCCESS"),"",{nzDuration:1e3}),t.availableLabels.unshift(e),n.labelModalMode="default",n.loading.availableLabels=!1,t.availableLabels[0].isSelected=!0,n.handleLabelItemClick(t.availableLabels[0],t)},function(){})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](d.c),o["\u0275\u0275directiveInject"](p.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["rr-more-attribute"]],inputs:{moreAttributeList:"moreAttributeList",domainId:"domainId"},decls:35,vars:28,consts:[[1,"more-attribute-container"],[1,"attribute"],[1,"attribute-item"],[1,"laber-name"],[1,"laber-value"],[2,"width","60px","height","28px",3,"nzSize","ngModel","nzMin","ngModelChange"],[1,"m-l-5"],[1,"m-l-10",2,"width","60px","height","28px",3,"nzSize","ngModel","nzMin","ngModelChange"],["class","label-item m-r-10",4,"ngFor","ngForOf"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomCenter",1,"txt-999",3,"nzVisible","nzDropdownMenu","click","nzVisibleChange"],[1,"iconfont","icon-addmember","f-14"],["class","m-l-5",4,"ngIf"],["addLabel","nzDropdownMenu"],[3,"options","searchPlaceholder","loading","mode","modeChange","onSelect","onConfirm",4,"ngIf"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"label-item","m-r-10"],[1,"label-bg",3,"ngStyle"],[1,"label-item-arrow"],[3,"ngStyle"],[1,"label-item-delete","iconfont","icon-close",3,"click"],[3,"options","searchPlaceholder","loading","mode","modeChange","onSelect","onConfirm"],[3,"nzValue","nzLabel"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"ul",1),o["\u0275\u0275elementStart"](2,"li",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"nz-input-number",5),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.moreAttributeList.workload_man_day=e})("ngModelChange",function(){return t.workloadShift(t.moreAttributeList,"workload_man_month")}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"span",6),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"nz-input-number",7),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.moreAttributeList.workload_man_month=e})("ngModelChange",function(){return t.workloadShift(t.moreAttributeList,"workload_man_day")}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"span",6),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"li",2),o["\u0275\u0275elementStart"](16,"div",3),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",4),o["\u0275\u0275template"](20,Ut,6,7,"span",8),o["\u0275\u0275elementStart"](21,"span"),o["\u0275\u0275elementStart"](22,"a",9),o["\u0275\u0275listener"]("click",function(){return t.formatAvailableLabels(t.moreAttributeList)})("nzVisibleChange",function(e){return t.moreAttributeList.isShowModal.labels=e}),o["\u0275\u0275element"](23,"i",10),o["\u0275\u0275template"](24,Wt,3,3,"span",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"nz-dropdown-menu",null,12),o["\u0275\u0275template"](27,Ht,2,6,"workitem-label-select-panel",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"li",2),o["\u0275\u0275elementStart"](29,"div",3),o["\u0275\u0275text"](30),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"div",4),o["\u0275\u0275elementStart"](33,"nz-select",14),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.moreAttributeList.health_degree=e}),o["\u0275\u0275template"](34,Gt,3,4,"ng-container",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275reference"](26);o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,18,"EXPECTED_WORKLOAD_MAN_DAY")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzSize","small")("ngModel",t.moreAttributeList.workload_man_day)("nzMin",0),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](10,20,"workload_man_day")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzSize","small")("ngModel",t.moreAttributeList.workload_man_month)("nzMin",0),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](14,22,"workload_man_month")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](18,24,"WORKITEM_LABEL")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.moreAttributeList.labels),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzVisible",t.moreAttributeList.isShowModal.labels)("nzDropdownMenu",n),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.moreAttributeList.labels.length),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.moreAttributeList.isShowModal.labels),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](31,26,"HEALTH_DEGREE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",t.moreAttributeList.health_degree),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.healthDegreeOptions)}},directives:[jt.a,g.k,g.l,m.m,v.a,v.b,m.n,v.d,h.e,m.o,Vt.a,h.a],pipes:[d.b],styles:[".more-attribute-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:auto}.more-attribute-container[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]{list-style:none;padding:0 15px}.more-attribute-container[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]   .attribute-item[_ngcontent-%COMP%]{display:flex;line-height:26px;margin:14px 0}.more-attribute-container[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]   .attribute-item[_ngcontent-%COMP%]   .laber-name[_ngcontent-%COMP%]{width:110px}.more-attribute-container[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]   .attribute-item[_ngcontent-%COMP%]   .laber-value[_ngcontent-%COMP%]{flex:1}"]}),e}(),$t=["workload"],Kt=["lable"],Xt=["priority"],Yt=["classify"],Qt=["parent_workitem"];function Jt(e,t){1&e&&o["\u0275\u0275elementContainer"](0)}var Zt=function(e){return{newItem:e}};function en(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"li"),o["\u0275\u0275template"](1,Jt,1,0,"ng-container",7),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngTemplateOutlet",i.getTemplate(n))("ngTemplateOutletContext",o["\u0275\u0275pureFunction1"](2,Zt,i.newItem))}}function tn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",9),o["\u0275\u0275elementStart"](4,"nz-input-number",10),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.newItem.workload_man_day=e})("ngModelChange",function(){o["\u0275\u0275restoreView"](n);var e=t.newItem;return o["\u0275\u0275nextContext"]().workloadShift(e,"workload_man_month")}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"span",11),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"nz-input-number",12),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.newItem.workload_man_month=e})("ngModelChange",function(){o["\u0275\u0275restoreView"](n);var e=t.newItem;return o["\u0275\u0275nextContext"]().workloadShift(e,"workload_man_day")}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"span",11),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.newItem;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,9,"EXPECTED_WORKLOAD_MAN_DAY")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzSize","small")("ngModel",i.workload_man_day)("nzMin",0),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](7,11,"workload_man_day")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzSize","small")("ngModel",i.workload_man_month)("nzMin",0),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](11,13,"workload_man_month"))}}var nn=function(e){return{backgroundColor:e}},on=function(e){return{color:e}};function rn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",19),o["\u0275\u0275elementStart"](1,"span",20),o["\u0275\u0275element"](2,"i",21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",22),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"span",23),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=o["\u0275\u0275nextContext"]().newItem;return o["\u0275\u0275nextContext"]().removeLabel(i,e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](3,nn,i.color)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](5,on,i.color)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.title)}}function an(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",11),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"ADD_LABEL")))}function cn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"workitem-label-select-panel",24),o["\u0275\u0275listener"]("modeChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).labelModalMode=e})("onSelect",function(e){o["\u0275\u0275restoreView"](n);var t=o["\u0275\u0275nextContext"]().newItem;return o["\u0275\u0275nextContext"]().handleLabelItemClick(e,t)})("onConfirm",function(e){o["\u0275\u0275restoreView"](n);var t=o["\u0275\u0275nextContext"]().newItem;return o["\u0275\u0275nextContext"]().handleLabelConfirmClick(e,t)}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().newItem,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("searchPlaceholder",o["\u0275\u0275pipeBind1"](1,4,"SEARCH_LABEL")),o["\u0275\u0275property"]("options",i.availableLabels)("loading",!1)("mode",r.labelModalMode)}}function ln(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",9),o["\u0275\u0275template"](4,rn,6,7,"span",13),o["\u0275\u0275elementStart"](5,"span"),o["\u0275\u0275elementStart"](6,"a",14),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.newItem;return o["\u0275\u0275nextContext"]().formatAvailableLabels(e)})("nzVisibleChange",function(e){return t.newItem.isShowModal.labels=e}),o["\u0275\u0275element"](7,"i",15),o["\u0275\u0275template"](8,an,3,3,"span",16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"nz-dropdown-menu",null,17),o["\u0275\u0275template"](11,cn,2,6,"workitem-label-select-panel",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.newItem,r=o["\u0275\u0275reference"](10);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,6,"WORKITEM_LABEL")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",i.labels),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzVisible",i.isShowModal.labels)("nzDropdownMenu",r),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!i.labels.length),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",i.isShowModal.labels)}}function sn(e,t){1&e&&o["\u0275\u0275element"](0,"span",30)}function dn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",31),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=o["\u0275\u0275nextContext"]().newItem;return o["\u0275\u0275nextContext"]().handleConfirmPriority(i,e)}),o["\u0275\u0275pipe"](1,"colorMap"),o["\u0275\u0275element"](2,"span",32),o["\u0275\u0275elementStart"](3,"span",11),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275classMap"](o["\u0275\u0275pipeBind2"](1,3,i.enum_value,"priority")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,6,i.enum_value))}}function pn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",9),o["\u0275\u0275elementStart"](4,"span",25),o["\u0275\u0275pipe"](5,"colorMap"),o["\u0275\u0275template"](6,sn,1,0,"span",26),o["\u0275\u0275elementStart"](7,"span"),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"nz-dropdown-menu",null,27),o["\u0275\u0275elementStart"](12,"ul",28),o["\u0275\u0275template"](13,dn,6,8,"li",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.newItem,i=o["\u0275\u0275reference"](11);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,7,"PRIORITY")),o["\u0275\u0275advance"](3),o["\u0275\u0275classMap"](o["\u0275\u0275pipeBind2"](5,9,n.priority,"priority")),o["\u0275\u0275property"]("nzDropdownMenu",i),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.priority),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,12,(null==n.priority?null:n.priority.enum_value)||"SELECT_PRIORITY")),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngForOf",n.systemPriorityOption)}}function un(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"i",38),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().newItem;return o["\u0275\u0275nextContext"]().removeClassify(e)}),o["\u0275\u0275elementEnd"]()}}function mn(e,t){1&e&&o["\u0275\u0275element"](0,"i",42)}function hn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",43),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.desc)}}function gn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",39),o["\u0275\u0275template"](1,mn,1,0,"i",40),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,hn,2,1,"ng-template",null,41,o["\u0275\u0275templateRefExtractor"])),2&e){var n=t.$implicit,i=o["\u0275\u0275reference"](4);o["\u0275\u0275property"]("nzPopoverContent",i),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isSelected),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.title," ")}}var fn=function(){return{key:"classify"}};function vn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",9),o["\u0275\u0275elementStart"](4,"span",33),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.newItem;return o["\u0275\u0275nextContext"]().queryAvailiableClassifies(e)})("nzVisibleChange",function(e){return t.newItem.isShowModal.classify=e}),o["\u0275\u0275elementStart"](5,"span"),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,un,1,0,"i",34),o["\u0275\u0275elementStart"](9,"nz-dropdown-menu",null,35),o["\u0275\u0275elementStart"](11,"workitem-search-select-panel",36),o["\u0275\u0275listener"]("onSelect",function(e){o["\u0275\u0275restoreView"](n);var i=t.newItem;return o["\u0275\u0275nextContext"]().handleConfirmClassify(e,i)}),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275template"](13,gn,5,3,"ng-template",null,37,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.newItem,r=o["\u0275\u0275reference"](10),a=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,8,"CLASSIFY")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzDropdownMenu",r)("nzVisible",i.isShowModal.classify),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](7,10,i.classify?i.classify.key.toUpperCase():"SELECT_CLASSIFY")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.classify),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("options",a.availiableClassifies)("params",o["\u0275\u0275pureFunction0"](14,fn))("searchPlaceholder",o["\u0275\u0275pipeBind1"](12,12,"SEARCH_CLASSIFY"))}}function bn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"i",49),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().newItem;return o["\u0275\u0275nextContext"]().removeParent(e)}),o["\u0275\u0275elementEnd"]()}}function Cn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",9),o["\u0275\u0275elementStart"](4,"span",44),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getAvailiablefeatureSet(!0)})("nzVisibleChange",function(e){return t.newItem.isShowModal.featureSet=e}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,bn,1,0,"i",45),o["\u0275\u0275elementStart"](8,"nz-dropdown-menu",null,46),o["\u0275\u0275elementStart"](10,"div",47),o["\u0275\u0275elementStart"](11,"feature-set-select",48),o["\u0275\u0275listener"]("selected",function(e){o["\u0275\u0275restoreView"](n);var i=t.newItem;return o["\u0275\u0275nextContext"]().selectedFeature(e,i)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.newItem,r=o["\u0275\u0275reference"](9),a=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,7,"PARENT_WORKITEM")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzDropdownMenu",r)("nzVisible",i.isShowModal.featureSet),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,9,(null==i.parent_workitem?null:i.parent_workitem.title)||"SELECT")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.parent_workitem),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("treeData",a.availableFeatureSet)("loading",a.loading.featureSet)}}var yn=function(){function e(e,t,n){this.relationLinkNewService=e,this.translate=t,this.notification=n,this.labelModalMode="default",this.loading={create:!1,availableLabels:!1,featureSet:!1},this.fromItemLabels=[],this.availiableClassifies=[],this.availableFeatureSet=[]}return e.prototype.ngOnInit=function(){},e.prototype.workloadShift=function(e,t){"workload_man_day"===t?e.workload_man_day=Object(a.u)("workload_man_day",e.workload_man_month):"workload_man_month"===t&&(e.workload_man_month=Object(a.u)("workload_man_month",e.workload_man_day))},e.prototype.getTemplate=function(e){return this[e]},e.prototype.formatAvailableLabels=function(e){var t=this;if(e.domain.domain_id){var n={method:"GET",url:"/devops-workitem/api/v1/label?domain_id="+e.domain.domain_id};this.loading.availableLabels=!0,this.relationLinkNewService.labelRequest(n).subscribe(function(n){t.loading.availableLabels=!1,e.availableLabels=Object(de.a)(n.success)?[]:n.success.map(function(t){return t.isSelected=!!Object(le.a)(e.labels,{id:t.id}),t.readOnly=!0,t}).sort(function(e,t){return e.isSelected&&!t.isSelected?-1:0})},function(){t.loading.availableLabels=!1})}},e.prototype.handleDocLabel=function(e){if("Story"===(null==e?void 0:e.category)&&(null==e?void 0:e.labels)){var t=this.translate.instant("DOC_LABEL");if(e.labels.find(function(e){return e.title===t}))Reflect.deleteProperty(e.necessary,"attribution_microservice");else{if(!Object.prototype.hasOwnProperty.call(e.originNecessary,"attribution_microservice"))return;Object.assign(e.necessary,{attribution_microservice:!0})}}},e.prototype.removeLabel=function(e,t){this.relationLinkNewService.removeLabel(e,t),this.handleDocLabel(e)},e.prototype.handleLabelItemClick=function(e,t){this.relationLinkNewService.handleLabelItemClick(e,t),this.handleDocLabel(t)},e.prototype.handleLabelConfirmClick=function(e,t){var n=this;this.loading.availableLabels=!0,this.relationLinkNewService.labelRequest({method:"POST",url:"/devops-workitem/api/v1/label",body:{title:e.data.title,color:e.data.color,category:"workitem_tag",domain_id:t.domain.domain_id}}).pipe(Object(_.a)(1)).subscribe(function(e){var o;e||(n.notification.error(n.translate.instant("CREATE_FAILED"),""),n.loading.availableLabels=!1),e.success.length&&(n.notification.success(n.translate.instant("UPDATE_SUCCESS"),"",{nzDuration:1e3}),(o=t.availableLabels).unshift.apply(o,Object(i.i)(e.success)),n.labelModalMode="default",n.loading.availableLabels=!1,t.availableLabels[0].isSelected=!0,n.handleLabelItemClick(t.availableLabels[0],t))},function(){})},e.prototype.handleConfirmPriority=function(e,t){e.priority=t},e.prototype.handleConfirmClassify=function(e,t){e.isSelected?t.classify=e:this.removeClassify(t),t.isShowModal.classify=!1},e.prototype.queryAvailiableClassifies=function(e){var t=this;this.availiableClassifies.length?e.classify?this.relationLinkNewService.beSelectedOrNot(this.availiableClassifies,e.classify.id):this.relationLinkNewService.notSelect(this.availiableClassifies):this.relationLinkNewService.getSystemConfigByField(e.domain.domain_id,"workitem","Feature","classify").subscribe(function(e){e&&e.classify&&e.classify.fieldValue&&(t.availiableClassifies=t.relationLinkNewService.initAvailiableClassifies(e.classify.fieldValue))},function(){})},e.prototype.removeClassify=function(e){e.classify=null,this.availiableClassifies.forEach(function(e){e.isSelected=!1})},e.prototype.getAvailiablefeatureSet=function(e){var t=this;void 0===e&&(e=!1),this.loading.featureSet=!0,this.availableFeatureSet=[],this.relationLinkNewService.featureListForMove(this.newItem.domain.id,e).subscribe(function(e){Object(a.o)(e)||(t.availableFeatureSet=e),t.loading.featureSet=!1},function(){})},e.prototype.selectedFeature=function(e,t){"Feature"===e.category&&(t.parent_workitem=e,t.isShowModal.featureSet=!1)},e.prototype.removeParent=function(e){e.parent_workitem=null},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](d.c),o["\u0275\u0275directiveInject"](p.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["workitem-more-attribute"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"]($t,3),o["\u0275\u0275viewQuery"](Kt,3),o["\u0275\u0275viewQuery"](Xt,3),o["\u0275\u0275viewQuery"](Yt,3),o["\u0275\u0275viewQuery"](Qt,3)),2&e){var n=void 0;o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.workload=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.lable=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.priority=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.classify=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.parent_workitem=n.first)}},inputs:{newItem:"newItem",attrList:"attrList"},decls:13,vars:1,consts:[[1,"more-attribute-container"],[4,"ngFor","ngForOf"],["workload",""],["lable",""],["priority",""],["classify",""],["parent_workitem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"attribute-name"],[1,"attribute-value"],[2,"width","60px","height","28px",3,"nzSize","ngModel","nzMin","ngModelChange"],[1,"m-l-5"],[1,"m-l-10",2,"width","60px","height","28px",3,"nzSize","ngModel","nzMin","ngModelChange"],["class","label-item m-r-10",4,"ngFor","ngForOf"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomCenter",1,"txt-999",3,"nzVisible","nzDropdownMenu","click","nzVisibleChange"],[1,"iconfont","icon-addmember","f-14"],["class","m-l-5",4,"ngIf"],["addLabel","nzDropdownMenu"],[3,"options","searchPlaceholder","loading","mode","modeChange","onSelect","onConfirm",4,"ngIf"],[1,"label-item","m-r-10"],[1,"label-bg",3,"ngStyle"],[1,"label-item-arrow"],[3,"ngStyle"],[1,"label-item-delete","iconfont","icon-close","cur-pointer",3,"click"],[3,"options","searchPlaceholder","loading","mode","modeChange","onSelect","onConfirm"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"editable","cur-pointer","txt-underline",3,"nzDropdownMenu"],["class","fa fa-circle-o m-r-5",4,"ngIf"],["priorityMenu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","","class","priority-dropdown-menu-item",3,"class","click",4,"ngFor","ngForOf"],[1,"fa","fa-circle-o","m-r-5"],["nz-menu-item","",1,"priority-dropdown-menu-item",3,"click"],[1,"fa","fa-circle-o"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"editable","cur-pointer","txt-underline",3,"nzDropdownMenu","nzVisible","click","nzVisibleChange"],["class","iconfont icon-close m-l-5 cur-pointer",3,"click",4,"ngIf"],["classifies","nzDropdownMenu"],["type","single",3,"options","params","searchPlaceholder","onSelect"],["option",""],[1,"iconfont","icon-close","m-l-5","cur-pointer",3,"click"],["nz-popover","","nzPopoverPlacement","right",1,"cur-pointer",2,"position","relative","padding","5px 15px 5px 20px",3,"nzPopoverContent"],["class","txt-primary","style","position: absolute; left: 5px; top: 8px","nz-icon","","nzType","check","nzTheme","outline",4,"ngIf"],["contentTemplate",""],["nz-icon","","nzType","check","nzTheme","outline",1,"txt-primary",2,"position","absolute","left","5px","top","8px"],[2,"max-width","500px"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomLeft",1,"text-omit","txt-underline","display-inline","cur-pointer",3,"nzDropdownMenu","nzVisible","click","nzVisibleChange"],["class","iconfont icon-close f-12 m-r-5 cur-pointer",3,"click",4,"ngIf"],["featureSetRef","nzDropdownMenu"],[1,"featureset-select-menu"],[3,"treeData","loading","selected"],[1,"iconfont","icon-close","f-12","m-r-5","cur-pointer",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"ul"),o["\u0275\u0275template"](2,en,2,4,"li",1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,tn,12,15,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](5,ln,12,8,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](7,pn,14,14,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](9,vn,15,15,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](11,Cn,12,11,"ng-template",null,6,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.attrList))},directives:[m.m,m.s,jt.a,g.k,g.l,v.a,v.b,m.n,v.d,m.o,Vt.a,y.c,z.a,y.e,b.a,he.a,A.a,ge.a],pipes:[d.b,Q.a],styles:[".more-attribute-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:auto}.more-attribute-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0 15px}.more-attribute-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;line-height:26px;margin:10px 0}.more-attribute-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .attribute-name[_ngcontent-%COMP%]{width:110px}.more-attribute-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .attribute-value[_ngcontent-%COMP%]{flex:1}.search-select-option[_ngcontent-%COMP%]{cursor:pointer;position:relative;padding:5px 15px}.search-select-option[_ngcontent-%COMP%]   .unselected[_ngcontent-%COMP%]{font-size:14px;opacity:0}.search-select-option[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:#23c6c8;font-size:14px;opacity:1}  .featureset-select-menu{width:250px;height:300px;box-shadow:0 0 4px #00000033}  .featureset-select-menu .feature-set-select .ant-tree .ant-tree-treenode{padding:0;margin-bottom:10px}"]}),e}(),xn=n("OzZK"),wn=n("RwU8"),_n=n("CuYH"),On=n("r+jA"),Sn=n("4P1S");function En(e,t){1&e&&o["\u0275\u0275elementContainer"](0)}var Mn=function(e){return{color:e}},Pn=function(e,t){return{category:e,role:t}};function In(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nz-option",31),o["\u0275\u0275elementStart"](1,"div",32),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275elementStart"](3,"span",33),o["\u0275\u0275pipe"](4,"iconMap"),o["\u0275\u0275pipe"](5,"colorMap"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"span"),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",34),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275property"]("nzValue",n)("nzLabel",n.link_to.name)("nzDisabled",!n.valid),o["\u0275\u0275advance"](3),o["\u0275\u0275classMap"](o["\u0275\u0275pipeBind2"](4,9,n.link_to.category,"workitem_category")),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](18,Mn,o["\u0275\u0275pipeBind2"](5,12,n.valid?n.link_to.category:"Disabled","workitem_category")))("title",n.link_to.category),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](n.link_to.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](10,15,n.link_type[0].tips,o["\u0275\u0275pureFunction2"](20,Pn,null==n.link_to?null:n.link_to.category,null==n?null:n.roleForShow))," ")}}function kn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nz-option",31),o["\u0275\u0275elementStart"](1,"div",32),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275elementStart"](3,"span",33),o["\u0275\u0275pipe"](4,"iconMap"),o["\u0275\u0275pipe"](5,"colorMap"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"span"),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",34),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275property"]("nzValue",n)("nzLabel",n.link_to.name)("nzDisabled",!n.valid),o["\u0275\u0275advance"](3),o["\u0275\u0275classMap"](o["\u0275\u0275pipeBind2"](4,9,n.link_to.category,"workitem_category")),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](18,Mn,o["\u0275\u0275pipeBind2"](5,12,n.valid?n.link_to.category:"Disabled","workitem_category")))("title",n.link_to.category),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",n.link_to.name,""),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](10,15,n.link_type[0].tips,o["\u0275\u0275pureFunction2"](20,Pn,null==n.link_to?null:n.link_to.category,null==n?null:n.roleForShow))," ")}}function Tn(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,In,11,23,"nz-option",30),o["\u0275\u0275template"](2,kn,11,23,"nz-option",30),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","Task"===n.link_to.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","Task"!==n.link_to.category)}}function Dn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nz-option-group",28),o["\u0275\u0275template"](1,Tn,3,2,"ng-container",29),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzLabel",n.groupName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.groupType)}}function An(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rr-attribute",35),o["\u0275\u0275listener"]("updateDefaultDomain",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).updateDefaultDomain(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("attributeList",i)("domainId",r.fromItem.domain.id)}}function zn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"workitem-attribute",36),o["\u0275\u0275listener"]("eventOutput",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).workitemAttrEventOutput(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("newItem",i)("attrList",i.attrList.major)("fromItem",r.fromItem)}}function Rn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",23),o["\u0275\u0275element"](1,"i",24),o["\u0275\u0275elementStart"](2,"span",25),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](),t=e.$implicit,i=e.index;return o["\u0275\u0275nextContext"]().copyItemToRest(t,i)}),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,1,"COPY_LINE_DOWN")," "))}function Ln(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",23),o["\u0275\u0275element"](1,"i",37),o["\u0275\u0275elementStart"](2,"span",38),o["\u0275\u0275listener"]("nzOnConfirm",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](),t=e.$implicit,i=e.index;return o["\u0275\u0275nextContext"]().removeItem(t,i)}),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("nzPopconfirmTitle",o["\u0275\u0275pipeBind1"](3,2,"OPERATE_DELETE")),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,4,"COMMON_BUTTON_DELETE")," "))}function Nn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",39),o["\u0275\u0275elementStart"](1,"span",25),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().moreAttribute(e)}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"i",40),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,1,"VULN_VIEW_MOEW_PROPERTY")," "))}var jn=function(e){return{background:e}},Vn=function(e){return{active:e}},Fn=function(e){return{attr:e}};function Bn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",11),o["\u0275\u0275elementStart"](1,"div",12),o["\u0275\u0275elementStart"](2,"div",13),o["\u0275\u0275elementStart"](3,"div",14),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",15),o["\u0275\u0275elementStart"](6,"nz-select",16),o["\u0275\u0275listener"]("ngModelChange",function(e){o["\u0275\u0275restoreView"](n);var i=t.$implicit;return o["\u0275\u0275nextContext"]().buildLinkType(e,i)})("ngModelChange",function(e){return t.$implicit.entityType=e}),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275template"](8,Dn,2,2,"nz-option-group",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",18),o["\u0275\u0275elementStart"](10,"input",19),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.title=e}),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,An,1,2,"rr-attribute",20),o["\u0275\u0275template"](13,zn,1,3,"ng-template",null,21,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"ul",22),o["\u0275\u0275elementStart"](16,"li",23),o["\u0275\u0275element"](17,"i",24),o["\u0275\u0275elementStart"](18,"span",25),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"]().copyFromItem(e)}),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](21,Rn,5,3,"li",26),o["\u0275\u0275template"](22,Ln,6,6,"li",26),o["\u0275\u0275template"](23,Nn,5,3,"li",27),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,a=t.last,c=o["\u0275\u0275reference"](14),l=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](23,jn,i.showMore?"#23c6c81a":"")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](25,Vn,i.showMore)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](r+1),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzPlaceHolder",o["\u0275\u0275pipeBind1"](7,16,"SELECT_WORKITEM_TYPE"))("nzDropdownClassName","entity-container")("compareWith",l.compareFn)("ngModel",i.entityType),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",i.entityTypeOptions),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](11,18,"ENTER_TITLE")),o["\u0275\u0275property"]("ngModel",i.title),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf","RR"===i.category)("ngIfElse",c),o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](20,20,"COPY_ATTR",o["\u0275\u0275pureFunction1"](27,Fn,l.fromItem.entity_category))," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!a),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",l.relationList.length>1),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.showMore)}}function Un(e,t){if(1&e&&o["\u0275\u0275element"](0,"rr-more-attribute",50),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("moreAttributeList",n.moreAttributeData)("domainId",n.fromItem.domain.id)}}function Wn(e,t){if(1&e&&o["\u0275\u0275element"](0,"workitem-more-attribute",51),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("newItem",n.moreAttributeData)("attrList",n.moreAttributeData.attrList.minor)}}var Hn=function(){return{border:"1px solid #e5e5e5"}};function Gn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",41),o["\u0275\u0275elementStart"](1,"div",42),o["\u0275\u0275template"](2,Un,1,2,"rr-more-attribute",43),o["\u0275\u0275template"](3,Wn,1,2,"ng-template",null,44,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",45),o["\u0275\u0275elementStart"](6,"div",46),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"vision-editor",47),o["\u0275\u0275listener"]("getEditorContent",function(e){o["\u0275\u0275restoreView"](n);var t=o["\u0275\u0275nextContext"]();return t.descriptionChange(t.moreAttributeData,e)})("visionOnEditorChanged",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().visionOnEditorChanged(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",48),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().resetStyle()}),o["\u0275\u0275elementStart"](11,"span"),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](14,"i",49),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275reference"](4),r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf","RR"===r.moreAttributeData.category)("ngIfElse",i),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](8,13,"DESCRIPTION")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate1"]("richTextId","link-new-article-",r.moreAttributeData.index,""),o["\u0275\u0275property"]("type",r.moreAttributeData.description.descriptionUiSource)("richTextMode","simple")("height",r.editorHeight)("styles",o["\u0275\u0275pureFunction0"](17,Hn))("refreshContentEvent",r.refreshContentEventSubject.asObservable())("getContentEvent",r.getContentEventSubject.asObservable())("username",null==r.currentUser?null:r.currentUser.name)("description",r.moreAttributeData.description.desc),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](13,15,"VULN_COLLAPSE"))}}function qn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"batch-domain-selector",52),o["\u0275\u0275listener"]("close",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().showBatchDomainSelector=!1})("confirm",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().batchCreate(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("defaultSelected",i.batchDomainSelectorDefault)("entryDomainId",i.fromItem.domain.id)("domainTreeConfig",i.domainTreeConfig)("domainTreeTooltip",i.domainTreeTooltip)}}function $n(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",70),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("(",n.link_type[0].tips,")")}}function Kn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",68),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](3).batchLink(e)}),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,$n,2,1,"span",69),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275property"]("title",i.link_type[0].tips),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.link_to.name),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.link_type[0].tips)}}function Xn(e,t){1&e&&o["\u0275\u0275element"](0,"li",71)}function Yn(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"span",65),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,Kn,4,3,"li",66),o["\u0275\u0275template"](4,Xn,1,0,"li",67),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,i=t.last;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.groupName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.groupType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i)}}function Qn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",53),o["\u0275\u0275elementStart"](1,"div",54),o["\u0275\u0275elementStart"](2,"div",55),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().addNewItem()}),o["\u0275\u0275element"](3,"i",56),o["\u0275\u0275elementStart"](4,"span"),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",57),o["\u0275\u0275element"](8,"i",58),o["\u0275\u0275elementStart"](9,"span",59),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"nz-dropdown-menu",null,60),o["\u0275\u0275elementStart"](14,"ul",61),o["\u0275\u0275template"](15,Yn,5,3,"ng-container",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",62),o["\u0275\u0275elementStart"](17,"button",63),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().cancel()}),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"button",64),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().ok()}),o["\u0275\u0275text"](21),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275reference"](13),r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](6,9,"ASSOCIATED_MORE_TASK")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("nzDropdownMenu",i)("nzPlacement","top"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](11,11,"BATCH_RELATE")),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngForOf",r.entityTypeOptions),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](19,13,"COMMON_BUTTON_CANCLE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzLoading",r.isOkLoading)("disabled",r.isOkLoading),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](22,15,"COMMON_BUTTON_CONFIRM")," ")}}function Jn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",79),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"workitemAttr"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](", ",o["\u0275\u0275pipeBind2"](2,1,n.fromItem.owners[0],"person"),"")}}var Zn=function(e,t){return{color:e,background:t}};function ei(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",72),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",73),o["\u0275\u0275elementStart"](4,"div",74),o["\u0275\u0275elementStart"](5,"span",75),o["\u0275\u0275pipe"](6,"colorMap"),o["\u0275\u0275pipe"](7,"hex2rgba"),o["\u0275\u0275pipe"](8,"colorMap"),o["\u0275\u0275text"](9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"span",76),o["\u0275\u0275text"](11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",77),o["\u0275\u0275elementStart"](13,"span"),o["\u0275\u0275text"](14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](15,Jn,3,4,"span",78),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,7,"ASSOCIATED_FOLLOWING_WORK_ITEMS")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction2"](18,Zn,o["\u0275\u0275pipeBind2"](6,9,n.fromItem.entity_category,"workitem_category"),o["\u0275\u0275pipeBind2"](7,12,o["\u0275\u0275pipeBind2"](8,15,n.fromItem.entity_category,"workitem_category"),"0.2"))),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",n.fromItem.entity_category," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",n.fromItem.title),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.fromItem.title),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("#",n.fromItem.number,""),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==n.fromItem.owners?null:n.fromItem.owners.length)}}var ti=function(e){return{height:e}},ni=function(){function e(e,t,n,i,a){var c=this;this.relationLinkNewService=e,this.modalService=t,this.translate=n,this.notification=i,this.emitService=a,this.close=new o.EventEmitter,this.getContentEventSubject=new r.a,this.refreshContentEventSubject=new r.a,this.isModalVisible=!0,this.batchDomainSelectorDefault=[],this.domainSelectorArray=[],this.relationList=[],this.editorHeight=475,this.relationBodyStyle={width:.406*window.screen.width,height:.486*window.screen.height+"px",showMore:!1},this.domainTreeConfig={},this.domainTreeTooltip="",this.fromItemLabels=[],this.count=0,this.titleMap={create:"LINK_NEW_WORKITEM",distribute_rr:"COMMON_DISTRIBUTE_RR"},this.descriptionChange=function(e,t){if("get-content-before-copy-description-event"===t.eventType&&c.copyAttrToNewItem(e,t),"get-content-before-more-description-event"===t.eventType&&(c.setItemDescription(t),c.moreAttributeData=c.currentBeforeItem,c.refreshContentEventSubject.next({refreshContent:c.moreAttributeData.description.desc})),"get-content-before-close-description-event"===t.eventType)return e.showMore=!1,c.setItemDescription(t),c.moreAttributeData=null,void(c.relationBodyStyle={width:.406*window.screen.width,height:.486*window.screen.height+"px",showMore:!1});"get-content-before-submit-description-event"===t.eventType&&(c.setItemDescription(t),c.createTask()),"workitem::get-content-before-change-domain"===t.eventType&&(c.isDescriptionChanged(e.oldTemplate,t.description)?(e.description.desc=t.description?t.description:e.newTemplate,c.moreAttributeData.description.desc=e.description.desc):(e.description.desc=e.newTemplate,c.moreAttributeData.description.desc=e.newTemplate),c.moreAttributeData.description.descriptionUiSource=t.type,c.refreshContentEventSubject.next({refreshContent:c.moreAttributeData.description.desc}))},this.compareFn=function(e,t){return e&&t&&e.link_to&&t.link_to&&e.link_type&&t.link_type&&e.link_to.category===t.link_to.category?e.link_type[0].tips===t.link_type[0].tips:e===t}}return e.prototype.ngOnInit=function(){this.initCurrentUser(),this.relationLinkNewService.formatFromItem(this.fromItem),this.getLinkConfig(this.fromItem)},e.prototype.workitemAttrEventOutput=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n;return Object(i.e)(this,function(i){switch(i.label){case 0:return t=e.event,n=e.data,Object(a.o)(n)?[2]:"newItem-update:domain-change"!==t||n.description.desc?[3,2]:[4,this.getTemplate(n,!0)];case 1:i.sent(),this.handleToggleDescTemplate(n),i.label=2;case 2:return[2]}})})},e.prototype.initCurrentUser=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t=this;return Object(i.e)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(e){t.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&e(t)})})];case 1:return e=n.sent(),this.currentUserId=e.user_id,this.currentUser={id:e.user_id,name:e.user_name_zh,account:e.huawei_id,email:e.email,name_full:e.user_name_full,username:e.user_name},[2]}})})},e.prototype.getLinkConfig=function(e){var t=this;this.relationLinkNewService.getLinkConfig(e).subscribe(function(e){t.entityTypeOptions=t.relationLinkNewService.linkCountCheck(e),t.addNewItem()},function(){})},e.prototype.cancel=function(){var e=this;this.modalService.confirm({nzTitle:this.translate.instant("CANCLE_CONFIRM_TITLE"),nzContent:this.translate.instant("CANCLE_CONFIRM_CONTENT"),nzBodyStyle:{padding:"20px","background-color":"#fff","border-radius":"5px"},nzMaskClosable:!1,nzOkType:"danger",nzOnOk:function(){e.close.emit()},nzFooter:null,nzOkText:this.translate.instant("COMMON_BUTTON_CONFIRM"),nzCancelText:this.translate.instant("COMMON_BUTTON_CANCLE")})},e.prototype.getEditorHeight=function(e){return document.getElementById(e)&&document.getElementById(e).clientHeight},e.prototype.setItemDescription=function(e){var t=this,n=this.relationList.find(function(e){return t.moreAttributeData.newIndex===e.newIndex});Object(a.o)(n)||(n.description.desc=e.description,n.description.descriptionUiSource=e.type)},e.prototype.visionOnEditorChanged=function(e){e&&e.type&&(this.moreAttributeData.newDescriptionUiSource=e.type,this.moreAttributeData.description.descriptionUiSource=e.type)},e.prototype.moreAttribute=function(e){return Object(i.b)(this,void 0,void 0,function(){var t=this;return Object(i.e)(this,function(n){switch(n.label){case 0:return e.description.desc?[3,2]:[4,this.getTemplate(e)];case 1:n.sent(),e.description.desc=e.newTemplate,n.label=2;case 2:return this.moreAttributeData?this.getContentEventSubject.next({eventType:"get-content-before-more-description-event"}):(this.moreAttributeData=e,this.refreshContentEventSubject.next({refreshContent:e.description.desc})),this.relationList.forEach(function(e){e.showMore=!1}),e.showMore=!0,this.relationBodyStyle={width:.781*window.screen.width,height:.583*window.screen.height+"px",showMore:!0},this.currentBeforeItem=e,setTimeout(function(){t.editorHeight=t.getEditorHeight("relation-content-right")-t.getEditorHeight("more-attribute-container")-100},1e3),[2]}})})},e.prototype.resetStyle=function(){this.getContentEventSubject.next({eventType:"get-content-before-close-description-event"})},e.prototype.removeItem=function(e,t){var n=Object(a.e)(e);if(this.relationList.splice(t,1),this.count--,n.domain&&(this.relationList.some(function(e){return!!e.domain&&n.domain.id===e.domain.id})||(this.domainSelectorArray=this.domainSelectorArray.filter(function(e){return n.domain.id!==e}))),!this.relationList.length)return this.moreAttributeData=null,void(this.relationBodyStyle={width:.406*window.screen.width,height:.486*window.screen.height+"px",showMore:!1});n.showMore&&(this.relationList[0].showMore=!0,this.moreAttributeData=this.relationList[0],this.refreshContentEventSubject.next({refreshContent:this.moreAttributeData.description.desc}))},e.prototype.addNewItem=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t=this;return Object(i.e)(this,function(n){switch(n.label){case 0:return(e=this.relationLinkNewService.makeNewItem(this.fromItem,this.entityTypeOptions)).created_by=this.currentUser,e.newIndex=this.count++,"coe"===this.fromItem.type&&this.fromItem.relateItem&&(e.title=this.fromItem.relateItem.title,e.deadline=this.fromItem.relateItem.deadline,e.description.desc=this.fromItem.relateItem.root_cause,!Object(a.o)(this.fromItem.relateItem.owner)&&(e.owner=this.fromItem.relateItem.owner[0])),"RR"===e.category?(this.relationList.push(e),[2]):(["Task"].includes(e.category)&&this.relationLinkNewService.formatSystemExtendAttrs(this.fromItem,e),[4,this.inintCollaborationInfo(this.fromItem,e)]);case 1:return n.sent()&&(this.relationLinkNewService.getNecessaryAttribute(e),this.relationLinkNewService.getSystemAttrConfig(this.fromItem,e).then(function(){t.relationLinkNewService.buildNewItemAttrs(e,t.fromItem.category),t.relationList.push(e)})),[2]}})})},e.prototype.updateDefaultDomain=function(e){this.domainSelectorArray.includes(e.id)||(this.domainSelectorArray.push(e.id),this.batchDomainSelectorDefault.push(e))},e.prototype.ok=function(){this.moreAttributeData&&this.moreAttributeData.showMore?this.getContentEventSubject.next({eventType:"get-content-before-submit-description-event"}):this.createTask()},e.prototype.createTask=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n=this;return Object(i.e)(this,function(i){switch(i.label){case 0:return(null==(e=this.relationList.filter(function(e){return"n-to-1"===e.entityType.link_type[0].quantity_limit}))?void 0:e.length)>1?(this.notification.error(this.translate.instant("WORKITEM_LINK_HAS_SUPPORT"),"",{nzDuration:1e3}),[2]):[4,this.relationLinkNewService.createTask(this.fromItem,this.relationList,this.currentUserId)];case 1:return(t=i.sent())?(this.isOkLoading=!0,Promise.all(t).then(function(e){if(setTimeout(function(){n.isOkLoading=!1},500),!Object(a.o)(e))if(e.some(function(e){return!Object(a.o)(e.success)}))n.emitService.eventEmit.emit({event:"workitem-link-new:success",type:"create",linkType:n.fromItem.scene,data:{entity_number:n.fromItem.number,relation:e[0].success,relation_type:"create",operateType:"link"}}),n.notification.success(n.translate.instant("FUXI_PIPELINE_SUCCESS"),"",{nzDuration:1e3}),n.close.emit(e);else{var t=e.find(function(e){return e.failed.length>0})||{};n.notification.error(n.translate.instant(t.failed&&t.failed[0].code?String(t.failed[0].code):"FUXI_PIPELINE_FAILED"),"",{nzDuration:1e3})}},function(e){n.isOkLoading=!1}),[2]):[2]}})})},e.prototype.buildLinkType=function(e,t){return Object(i.b)(this,void 0,void 0,function(){var n=this;return Object(i.e)(this,function(i){switch(i.label){case 0:return t.category=e.link_to.category,t.linkType=e.link_type[0].value,t.entityType=e,["Task"].includes(t.category)?this.relationLinkNewService.formatSystemExtendAttrs(this.fromItem,t).then(function(){n.relationLinkNewService.buildNewItemAttrs(t)}):"RR"!==t.category&&this.relationLinkNewService.buildNewItemAttrs(t,this.fromItem.category),this.relationLinkNewService.getNecessaryAttribute(t),setTimeout(function(){n.editorHeight=n.getEditorHeight("relation-content-right")-n.getEditorHeight("more-attribute-container")-100},1e3),[4,this.inintCollaborationInfo(this.fromItem,t)];case 1:return i.sent(),[4,this.getTemplate(t,!0)];case 2:return i.sent(),this.handleToggleDescTemplate(t),[2]}})})},e.prototype.inintCollaborationInfo=function(e,t){return Object(i.b)(this,void 0,void 0,function(){var n,o,r=this;return Object(i.e)(this,function(i){switch(i.label){case 0:return[4,this.initCollaborationDomains(e,t.category)];case 1:return n=i.sent(),t.collaborationDomains=n,t.domain=this.collaborationDomains.find(function(t){return t.domain_id===e.domain.id})||this.collaborationDomains[0],t.domain_members=this.getAvailableMembers(t),[4,this.checkIsGrayDomain(t)];case 2:return o=i.sent(),t.enableSF=o,e.initField&&(t.field=e.initField),t.domain_members.then(function(n){if(("coe"!==e.type||Object(a.o)(t.owner))&&(t.owner=null,!Object(a.o)(n))){var i=n.find(function(e){return e.id===r.currentUser.id});t.owner=i?r.currentUser:n[0]}}),t.domain.iterations.subscribe(function(e){t.service_iteration=null,Object(a.o)(e)||(t.service_iteration=r.iterationId?e.find(function(e){return e.iteration_id===Number(r.iterationId)}):null)}),[2,!0]}})})},e.prototype.initCollaborationDomains=function(e,t){return Object(i.b)(this,void 0,void 0,function(){var n,o,r,a,l,s=this;return Object(i.e)(this,function(i){switch(i.label){case 0:n=e.domain.id,o=e.category,r=e.number,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.relationLinkNewService.getCollaborationDomains(n,o,t).toPromise()];case 2:return a=i.sent(),this.relationLinkNewService.formatCollaborationDomains(a),this.collaborationDomains=a,a.forEach(function(e){var n={number:r,domainId:e.domain_id,type:t,field:"dev"};e.isSelected=!1,e.iterations=s.relationLinkNewService.queryAvailableIterations(n)}),[2,a];case 3:return l=i.sent(),Object(c.b)(l),[2,[]];case 4:return[2]}})})},e.prototype.getAvailableMembers=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.relationLinkNewService.queryDomainMembers(e).toPromise()];case 1:return[2,n.sent()];case 2:return t=n.sent(),Object(c.b)(t),[3,3];case 3:return[2]}})})},e.prototype.batchCreate=function(e){var t=this;this.domainTreeConfig={},this.batchDomainSelectorDefault=[],this.domainSelectorArray=e.map(function(e){return t.batchDomainSelectorDefault.push({id:e.id,short_title:e.short_title,title:e.title,title_en:e.title_en,workitem_category:e.workitem_category?e.workitem_category:[]}),e.id});var n=this.relationList.filter(function(e){var t;return null===(t=e.domain)||void 0===t?void 0:t.id});if(n.length){var o=n.map(function(e){return e.domain.id});this.batchDomainSelectorDefault=this.batchDomainSelectorDefault.filter(function(e){return!o.includes(e.id)})}this.batchDomainSelectorDefault.forEach(function(e){return Object(i.b)(t,void 0,void 0,function(){var t,n=this;return Object(i.e)(this,function(i){switch(i.label){case 0:return(t=this.relationLinkNewService.makeNewItem(this.fromItem,this.entityTypeOptions)).created_by=this.currentUser,t.newIndex=this.count++,this.batchLinkType&&(t.entityType=this.batchLinkType),["Task"].includes(t.category)&&this.relationLinkNewService.formatSystemExtendAttrs(this.fromItem,t),[4,this.inintCollaborationInfo({domain:{id:e.id},category:this.fromItem.category,number:this.fromItem.number},t)];case 1:return i.sent()&&(this.relationLinkNewService.getNecessaryAttribute(t),this.relationLinkNewService.getSystemAttrConfig(this.fromItem,t).then(function(){n.relationLinkNewService.buildNewItemAttrs(t,n.fromItem.category),n.relationList.push(t)})),[2]}})})})},e.prototype.showBatchDomain=function(e){var t=[];this.relationList.forEach(function(e){Object(a.o)(e.domain)||t.push({id:e.domain.domain_id,short_title:e.domain.short_title,title:e.domain.title,title_en:e.domain.title_en,workitem_category:e.domain.workitem_category})});var n={};this.batchDomainSelectorDefault=t.reduce(function(e,t){return n[t.id]||(n[t.id]=e.push(t)),e},[]),this.domainTreeTooltip=e?"COMMON_TOOLTIP_NO_RECEIVE_WORKITEM":"COMMON_TOOLTIP_NO_RECEIVE_RR",this.showBatchDomainSelector=!0},e.prototype.batchLink=function(e){this.domainTreeConfig="RR"!==e.link_to.category?{method:"GET",url:"/devops-cooperate-config/api/v1/domain/collaboration/config",params:{domainId:this.fromItem.domain.id||this.fromItem.domain.domain_id,linkFrom:this.fromItem.entity_category,linkTo:e.link_to.category}}:null,this.batchLinkType=e,this.showBatchDomain(!0)},e.prototype.copyFromItem=function(e){var t,n=this,i=this.fromItem,o=i.title,r=i.entity_type,a=i.text_format,c=null===(t=e.domain)||void 0===t?void 0:t.id,l={number:i.number};c&&(l.to_domain_ids=[c]),this.relationLinkNewService.getCopyAttr(l).subscribe(function(t){var i=c?t[c]:t;e.title=o,e.deadline=i.deadline,e.workload_man_day=i.workload_man_day,e.workload_man_month=i.workload_man_month,"workitem"===r?(e.labels=i.labels||[],e.description.descriptionUiSource=1===i.documents.ui_source?"rich-text":"markdown"):["requirement","bug"].includes(r)&&(e.labels=n.relationLinkNewService.buildAvailableLabels(i.labels,n.fromItemLabels),e.description.descriptionUiSource="Markdown"===a?"markdown":"rich-text"),e.description.desc=i.documents.content,n.relationLinkNewService.getSystemAttrConfig(n.fromItem,e),n.relationLinkNewService.copyCollaborationAttr(e,i),n.refreshContentEventSubject.next({refreshContent:e.description.desc})},function(){})},e.prototype.copyItemToRest=function(e,t){t!==this.relationList.length-1&&(e.showMore?this.getContentEventSubject.next({eventType:"get-content-before-copy-description-event"}):this.copyAttrToNewItem(e))},e.prototype.copyAttrToNewItem=function(e,t){var n,i,o,r,c,l=this,s=this.relationList.filter(function(t,n){return n>e.newIndex});if(!Object(a.o)(s)){var d=s.filter(function(e){var t;return null===(t=e.domain)||void 0===t?void 0:t.id}),p={to_domain_ids:d.length?d.map(function(e){return e.domain.id}):[],required_copy_attr:{from_domain_id:null===(n=e.domain)||void 0===n?void 0:n.id,from_owner:(null===(i=e.owner)||void 0===i?void 0:i.id)||null,from_test_owner:(null===(o=e.test_owner)||void 0===o?void 0:o.id)||null,from_service_iteration:(null===(r=e.service_iteration)||void 0===r?void 0:r.iteration_id)||null,from_release_plan:(null===(c=e.releasePlan)||void 0===c?void 0:c.number)||null}};this.relationLinkNewService.getCopyAttr(p).subscribe(function(n){s.forEach(function(i){var o,r=null===(o=i.domain)||void 0===o?void 0:o.id;l.relationLinkNewService.copyAttr(i,e,r?n[r]:{}),e.showMore&&(i.description.desc=t.description,i.description.descriptionUiSource=t.type)})},function(){})}},e.prototype.getTemplate=function(e,t){var n;return Object(i.b)(this,void 0,void 0,function(){var o,r,a,l,s,d;return Object(i.e)(this,function(i){switch(i.label){case 0:if(!e.domain||!e.domain.domain_id)return[2];o={assigneDomainId:e.domain.domain_id,assignedDomainType:"DOMAIN",category:"WORKITEM",type:e.entityType.link_to.category.toUpperCase()},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.relationLinkNewService.getDocTemplate(o).toPromise()];case 2:if((r=i.sent())&&r.length){for(a=null,l=0;l<r.length&&!(a=null===(n=r[l])||void 0===n?void 0:n.detailInfo.find(function(e){return"DEFAULT_DESCRIPTION"===e.relatedValue}));l++);if(!a)return[2];t&&(e.oldTemplate=e.newTemplate),e.newTemplate=a.templateValue,s=1===a.textFormat?"rich-text":"markdown",e.newDescriptionUiSource||(e.description.descriptionUiSource=s)}return[3,4];case 3:return d=i.sent(),Object(c.b)(d),[3,4];case 4:return[2]}})})},e.prototype.isDescriptionChanged=function(e,t){return Object(a.i)(e)!==Object(a.i)(t)},e.prototype.handleToggleDescTemplate=function(e){e.showMore?this.getContentEventSubject.next({eventType:"workitem::get-content-before-change-domain",clearCache:!0}):this.isDescriptionChanged(e.oldTemplate,e.description.desc)||(e.description.desc=e.newTemplate)},e.prototype.checkIsGrayDomain=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.relationLinkNewService.queryGrayControl(e).toPromise()];case 1:return[2,!n.sent()];case 2:return t=n.sent(),Object(c.b)(t),[3,3];case 3:return[2]}})})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](s.d),o["\u0275\u0275directiveInject"](d.c),o["\u0275\u0275directiveInject"](p.b),o["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["relation-link-new"]],inputs:{fromItem:"fromItem",headerTemplate:"headerTemplate",iterationId:"iterationId"},outputs:{close:"close"},decls:14,vars:13,consts:[["nzClassName","relation-wraper","nzWrapClassName","relation-modal-wraper",3,"nzVisible","nzFooter","nzWidth","nzTitle","nzVisibleChange","nzOnCancel"],[1,"relation-container"],[1,"relation-header"],[4,"ngTemplateOutlet"],[1,"relation-content"],[1,"relation-content-left",3,"ngStyle"],["class","relation-item",3,"ngStyle",4,"ngFor","ngForOf"],["id","relation-content-right",4,"ngIf"],[3,"defaultSelected","entryDomainId","domainTreeConfig","domainTreeTooltip","close","confirm",4,"ngIf"],["modalFooter",""],["defautHeaderTemplate",""],[1,"relation-item",3,"ngStyle"],[1,"attribute-container"],[1,"attribute-top"],[1,"number",3,"ngClass"],[1,"task-type"],[2,"width","100%",3,"nzPlaceHolder","nzDropdownClassName","compareWith","ngModel","ngModelChange"],[3,"nzLabel",4,"ngFor","ngForOf"],[1,"item-title"],["nz-input","",1,"title-text",3,"placeholder","ngModel","ngModelChange"],[3,"attributeList","domainId","updateDefaultDomain",4,"ngIf","ngIfElse"],["workitemAttribute",""],[1,"attribute-more"],[1,"attribute-more-item"],[1,"iconfont","icon-copy","f-14","m-r-3","m-l-3"],[3,"click"],["class","attribute-more-item",4,"ngIf"],["class","attribute-more-item more",4,"ngIf"],[3,"nzLabel"],[4,"ngFor","ngForOf"],["nzCustomContent","",3,"nzValue","nzLabel","nzDisabled",4,"ngIf"],["nzCustomContent","",3,"nzValue","nzLabel","nzDisabled"],[1,"entity-option"],[1,"m-r-5",3,"ngStyle","title"],[1,"option-tip"],[3,"attributeList","domainId","updateDefaultDomain"],[3,"newItem","attrList","fromItem","eventOutput"],[1,"iconfont","icon-trash","f-18","m-r-2"],["nz-popconfirm","","nzPopconfirmPlacement","top",3,"nzPopconfirmTitle","nzOnConfirm"],[1,"attribute-more-item","more"],[1,"iconfont","icon-to-right","f-12","m-l-3"],["id","relation-content-right"],["id","more-attribute-container"],[3,"moreAttributeList","domainId",4,"ngIf","ngIfElse"],["workitemMoreAttribute",""],[1,"editor-wraper"],[1,"des-title"],[3,"richTextId","type","richTextMode","height","styles","refreshContentEvent","getContentEvent","username","description","getEditorContent","visionOnEditorChanged"],[1,"close-more-attribute","more",3,"click"],[1,"iconfont","icon-left-crown","f-12","m-l-3"],[3,"moreAttributeList","domainId"],[3,"newItem","attrList"],[3,"defaultSelected","entryDomainId","domainTreeConfig","domainTreeTooltip","close","confirm"],[1,"button-container"],[1,"operate-left"],[1,"link-more","cur-pointer","m-r-20",3,"click"],[1,"iconfont","icon-plus","m-r-5"],[1,"link-more","cur-pointer"],[1,"iconfont","icon-multi-layers","m-r-5"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu","nzPlacement"],["menu","nzDropdownMenu"],["nz-menu",""],[1,"operate-right"],["nz-button","","nzType","default",1,"m-r-10","ant-btn",3,"click"],["nz-button","","nzType","primary",1,"ant-btn","ant-btn-primary",3,"nzLoading","disabled","click"],[1,"m-l-5","m-r-5","txt-999","f-12"],["nz-menu-item","",3,"title","click",4,"ngFor","ngForOf"],["nz-menu-divider","",4,"ngIf"],["nz-menu-item","",3,"title","click"],["class","m-l-5 txt-999",4,"ngIf"],[1,"m-l-5","txt-999"],["nz-menu-divider",""],[1,"title-type"],[1,"item-info"],[1,"flex-box","flex-a-c"],[1,"category-box",3,"ngStyle"],[1,"f-bold","f-15","m-l-3","flex-1","title",3,"title"],[1,"addition-info"],["class","m-l-3",4,"ngIf"],[1,"m-l-3"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nz-modal",0),o["\u0275\u0275listener"]("nzVisibleChange",function(e){return t.isModalVisible=e})("nzOnCancel",function(){return t.cancel()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275elementStart"](3,"div",2),o["\u0275\u0275template"](4,En,1,0,"ng-container",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",4),o["\u0275\u0275elementStart"](6,"ul",5),o["\u0275\u0275template"](7,Bn,24,29,"li",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,Gn,15,18,"div",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,qn,1,4,"batch-domain-selector",8),o["\u0275\u0275template"](10,Qn,23,17,"ng-template",null,9,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](12,ei,16,21,"ng-template",null,10,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275reference"](11),i=o["\u0275\u0275reference"](13);o["\u0275\u0275propertyInterpolate"]("nzTitle",o["\u0275\u0275pipeBind1"](1,9,t.titleMap[t.fromItem.scene])),o["\u0275\u0275property"]("nzVisible",t.isModalVisible)("nzFooter",n)("nzWidth",t.relationBodyStyle.width),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngTemplateOutlet",t.headerTemplate?t.headerTemplate:i),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](11,ti,t.relationBodyStyle.height)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.relationList),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.relationBodyStyle.showMore),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showBatchDomainSelector)}},directives:[s.a,m.s,m.o,m.m,m.n,m.l,h.e,g.k,g.l,f.b,g.d,h.b,h.a,ce,Lt,me.a,Nt.a,qt,yn,Y,v.b,v.d,y.c,xn.a,wn.a,z.a,y.e,y.d],pipes:[d.b,_n.a,Q.a,On.a,Sn.a],styles:[".relation-wraper .ant-modal-header{border-bottom:none;padding:15px 15px 0}  .relation-wraper .ant-modal-header .ant-modal-title{font-size:18px}  .relation-wraper .ant-modal-body{padding:0}  .relation-wraper .ant-btn{border-radius:4px;color:rgba(0,0,0,.85);background:#fff;border-color:#d9d9d9}  .relation-wraper .ant-btn:hover{color:#23c6c8;border-color:#23c6c8}  .relation-wraper .ant-btn-primary{color:#fff;background:#23c6c8;border-color:#23c6c8;text-shadow:0 -1px 0 rgba(0,0,0,.12);box-shadow:0 2px 0 rgba(0,0,0,.045)}  .relation-wraper .ant-btn-primary:hover{color:#fff;background:#48d4d1;border-color:#48d4d1}  .entity-container .ant-select-dropdown{width:575px}  .task-type .ant-select-single:not(.ant-select-customize-input) .ant-select-selector{height:34px}  .task-type .ant-select:not(.ant-select-customize-input) .ant-select-selector{background-color:#23c6c81a}  .task-type .ant-select:not(.ant-select-customize-input) .ant-select-selector{border:none}  .relation-modal-wraper .ant-input{border:1px solid #eaeaea}  .tox-tinymce-inline .tox-editor-header{border:none!important}.relation-header[_ngcontent-%COMP%]{padding:15px 15px 7px;border-bottom:1px solid #eee}.relation-content[_ngcontent-%COMP%]{display:flex;width:100%;color:#999}.relation-content[_ngcontent-%COMP%]   .relation-content-left[_ngcontent-%COMP%]{width:780px;list-style:none;padding:0;overflow-y:auto}.relation-content[_ngcontent-%COMP%]   #relation-content-right[_ngcontent-%COMP%]{flex:1;border-left:1px solid #eee;display:flex;flex-direction:column;position:relative;overflow:auto}.relation-content[_ngcontent-%COMP%]   #relation-content-right[_ngcontent-%COMP%]   .close-more-attribute[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;cursor:pointer}.relation-content[_ngcontent-%COMP%]   #relation-content-right[_ngcontent-%COMP%]   .editor-wraper[_ngcontent-%COMP%]{flex:1;padding:0 15px 15px}.relation-content[_ngcontent-%COMP%]   #relation-content-right[_ngcontent-%COMP%]   .editor-wraper[_ngcontent-%COMP%]   .des-title[_ngcontent-%COMP%]{line-height:32px}.relation-item[_ngcontent-%COMP%]{width:100%;display:flex;padding:15px}.relation-item[_ngcontent-%COMP%]:hover{background:#f8f8f8}.relation-item[_ngcontent-%COMP%]   .attribute-more[_ngcontent-%COMP%]{width:150px;min-height:110px;border-left:1px solid #eee;list-style:none;padding:0}.relation-item[_ngcontent-%COMP%]   .attribute-more[_ngcontent-%COMP%]   .attribute-more-item[_ngcontent-%COMP%]{padding:0 10px;line-height:30px;cursor:pointer}.relation-item[_ngcontent-%COMP%]   .attribute-container[_ngcontent-%COMP%]{width:100%}.attribute-top[_ngcontent-%COMP%]{display:flex;height:36px;width:100%;margin-bottom:15px}.attribute-top[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{width:30px;height:34px;background:#f0f0f0;border-radius:3px;line-height:36px;color:#5f5f5f;text-align:center}.attribute-top[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff!important;background:#23c6c8!important}.attribute-top[_ngcontent-%COMP%]   .task-type[_ngcontent-%COMP%]{width:120px;height:34px;margin:0 10px}.attribute-top[_ngcontent-%COMP%]   .task-type[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}.attribute-top[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{flex-grow:1;width:100%;padding-right:20px}.attribute-top[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{height:34px}.more[_ngcontent-%COMP%]{color:#23c6c8!important}.button-container[_ngcontent-%COMP%]{display:flex}.button-container[_ngcontent-%COMP%]   .operate-right[_ngcontent-%COMP%]{width:auto}.button-container[_ngcontent-%COMP%]   .operate-left[_ngcontent-%COMP%]{flex:1;line-height:32px}.button-container[_ngcontent-%COMP%]   .operate-left[_ngcontent-%COMP%]   .link-more[_ngcontent-%COMP%]{width:auto;float:left;color:#23c6c8}.entity-option[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.entity-option[_ngcontent-%COMP%]   .option-tip[_ngcontent-%COMP%]{font-weight:400;color:#bdbdbd}.title-type[_ngcontent-%COMP%]{margin-bottom:5px;color:#5f5f5f}.item-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.addition-info[_ngcontent-%COMP%]{padding-top:3px;font-size:12px;color:#bdbdbd}.addition-info[_ngcontent-%COMP%]   .addition-type[_ngcontent-%COMP%]{color:#5f5f5f;margin-left:3px}.category-box[_ngcontent-%COMP%]{width:auto;height:20px;font-size:14px;padding:2px 6px;border-radius:3px}"]}),e}()},MkmW:function(e,t,n){"use strict";t.hostReportError=function(e){setTimeout(function(){throw e},0)}},Muja:function(e,t,n){"use strict";var i=n("EqEh");t.a=function(e,t){return Object(i.a)(e,t)}},"O/sn":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("mrSG"),o=n("D/6h"),r=n("AA4e"),a=n("lJxs"),c=n("UXun"),l=n("JIr8"),s=n("vNWM"),d=n("fXoL"),p=n("tk/3"),u=function(e){function t(t){var n=e.call(this,t)||this;return n.http=t,n.jsonParseParams=function(e){return e?("string"==typeof e?t=JSON.parse(e):"object"==typeof e&&(t=e),t):null;var t},n}return Object(i.d)(t,e),t.prototype.featureListForMove=function(e){return this.http.get("/devops-workitem/api/v1/query/fs_tree/cloud_service/"+e).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.systemAttrConfig=function(e){return this.http.get("/devops-cooperate-config/api/v1/query/workitem/system_attr/config",{params:e}).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.getAvailablePlans=function(e){return this.http.post("/devops-plan/api/v1/query/plans",e).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.checkUserInDomain=function(e){return this.http.get("/vision-platform/api/domains/is_indomain",{params:e}).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.queryDomainCollaboration=function(e){return this.http.get("/devops-cooperate-config/api/v1/domain/collaboration/config",{params:e}).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.querySystemExtendAttrs=function(e){return this.http.post("/devops-cooperate-config/api/v1/query/sys/extend/attrs",e).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.queryFeatureSetTree=function(e){return this.http.get("/devops-workitem/api/v1/fs_tree",{params:e}).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.queryMicroservice=function(e,t,n){return this.http.get("/vision-platform/api/domains/query/"+e+"/components?need_fuxi_id="+t,{params:n}).pipe(Object(a.a)(function(e){return e.data}),Object(c.a)(1))},t.prototype.queryNecessaryAttribute=function(e){return this.http.post("/vision-configuration-center/template/attribute-define/property_config",e).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.buildNecessaryAttribute=function(e,t){var n=[];return Object.keys(e).forEach(function(i){e[i].forEach(function(e){var o=t.domain_id;o&&o===e.domain_id&&"true"===e.necessary&&e.entity_type===t.category&&n.push(i)})}),n},t.prototype.getAvailiableLabels=function(e){return this.http.get("/devops-workitem/api/v1/label?domain_id="+e).pipe(Object(a.a)(function(e){return e.data.success}))},t.prototype.query_domain_application_setting=function(e){return this.http.get("/devops-app-store/api/v1/domains/"+e+"/application_setting?is_domain=true").pipe(Object(a.a)(function(e){return e.data}))},t.prototype.getSystemConfigByField=function(e){return this.http.get("/devops-cooperate-config/api/v1/query/workitem/system_field/config",{params:e}).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.buildMicroservice=function(e){return e.map(function(e){return{csbi_sn:e.csbi_sn,id:e.id,name:e.name}})},t.prototype.analysisParameterType=function(e){switch(e.category){case o.a:return"requirement";case"Epic":case"Feature":case"Story":case"Issue":case"Task":case"TaskGroup":return"workitem";case"document":case"directory":return"wiki";case"04000001":case"04000002":return"bug";case"iteration":return"iteration";default:return"workitem"}},t.prototype.recordCreateHistory=function(e){var t=e.filter(function(e){return e.field});if(t.length){var n=t.map(function(e){return{domainId:e.domain_id,category:e.category,enumId:i(e.extend_attr)}});this.http.post("/devops-user-analysis/api/v1/create/workitem/history",n).subscribe(function(){},function(){})}function i(e){if(!(e instanceof Array))return null;var t=e.find(function(e){return"\u7c7b\u578b"===e.attr_name});return t&&t.attr_value.id}},t.prototype.create=function(e){return this.recordCreateHistory(e),this.http.post("/devops-workitem/api/v1/workitem",e).pipe(Object(a.a)(function(e){return e.data}),Object(l.a)(Object(r.n)([])))},t.prototype.getPreferenceByKey=function(e){return this.user_preference[e]||{}},t.prototype.initUserPreference=function(){var e=this;return new Promise(function(t){e.user_preference?t(e.user_preference):window.communicationService.userPreference$.subscribe({next:function(n){e.user_preference=n,t(n)}})})},t.prototype.getDomainMembers=function(e){return this.http.get("/vision-platform/api/domains/"+e+"/members").pipe(Object(a.a)(function(e){return e.data}))},t.prototype.getDocTemplate=function(e){return this.http.post("/devops-template-management/api/v1/query/template/detail",e).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.createLabel=function(e){return this.http.post("/devops-workitem/api/v1/label",e).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.updateLabel=function(e){return this.http.put("/devops-workitem/api/v1/label",e).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.deleteLabel=function(e){return this.http.delete("/devops-workitem/api/v1/label/"+e).pipe(Object(a.a)(function(e){return e.data}))},t.prototype.queryGrayControl=function(e){return this.http.get("/vision-platform/api/gray/control",{params:e}).pipe(Object(a.a)(function(e){return e.data}))},t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275inject"](p.c))},t.\u0275prov=d["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(s.a)},OTR8:function(e,t,n){"use strict";n.d(t,"a",function(){return ot});var i=n("mrSG"),o=n("R0Ic"),r=n("fXoL"),a=n("XNiG"),c=n("itXk"),l=n("l5mm"),s=n("PqYM"),d=n("VRyK"),p=n("LRne"),u=n("xgIS"),m=n("1G5W"),h=n("pLZG"),g=n("IzEk"),f=n("eIep"),v=n("6eBy"),b=n("hbEN"),C=n("fujP"),y=n("AytR"),x=n("JXZa"),w=n("AA4e"),_=n("fxjG"),O=n("otx/"),S=n("d/Su"),E=n("y7eE"),M=n("AWuS"),P=n("3OLy"),I=n("bNXi"),k=n("tyNb"),T=n("A/Mn"),D=n("sYmb"),A=n("UJq8"),z=n("dEAy"),R=n("/Kk4"),L=n("Fpfz"),N=n("ofXK"),j=n("vTH2"),V=n("cbLU"),F=n("nJia"),B=n("3Pt+"),U=n("oyxB"),W=n("fesf"),H=n("PTRe"),G=n("C2AL"),q=n("FwiY"),$=n("KupA");function K(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",8),r["\u0275\u0275element"](1,"span",9),r["\u0275\u0275elementEnd"]())}function X(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",10),r["\u0275\u0275element"](1,"img",11),r["\u0275\u0275elementEnd"]())}function Y(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275elementStart"](1,"span",13),r["\u0275\u0275listener"]("click",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().emitEvent("editItem",e)}),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"span",14),r["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("nzOnConfirm",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().emitEvent("deleteItem",e)})("nzOnCancel",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().cancel()}),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275pipe"](5,"translate"),r["\u0275\u0275element"](6,"span",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"span",16),r["\u0275\u0275listener"]("click",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().setReommendationFunc(e,!1)}),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"span",17),r["\u0275\u0275listener"]("click",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().setReommendationFunc(e,!0)}),r["\u0275\u0275pipe"](10,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hidden",!(i.authSuccessVal&&i.hoverStatus))("title",r["\u0275\u0275pipeBind1"](2,10,"UPDATE_TEMPLATE")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("hidden",!(i.authSuccessVal&&i.hoverStatus))("nzOkType","danger")("nzPopconfirmTitle",r["\u0275\u0275pipeBind1"](4,12,"ARE_YOU_SURE_DELETE"))("title",r["\u0275\u0275pipeBind1"](5,14,"COMMON_BUTTON_DELETE")),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("hidden",!(1==i.item.recommendation))("title",r["\u0275\u0275pipeBind1"](8,16,"CANCEL_RECOMMENDEDATION")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("hidden",!(1!=i.item.recommendation&&i.hoverStatus))("title",r["\u0275\u0275pipeBind1"](10,18,"RECOMMENDED"))}}var Q=function(){function e(e,t,n){this.knowledgeService=e,this.translate=t,this.notification=n,this.type="wiki",this.eventHandler=new r.EventEmitter,this.hoverStatus=!1,this.authSuccessVal=!1}return e.prototype.ngOnInit=function(){var e=this;window.communicationService.currentDomain$.pipe().subscribe(function(t){var n,i,o,r,a;t&&(e.currentDomainInfo=t,e.authSuccessVal="trustworthy_design"===(null===(n=e.item)||void 0===n?void 0:n.type)?(null===(i=e.currentDomainInfo)||void 0===i?void 0:i.id)===(null===(o=e.item)||void 0===o?void 0:o.assigned_domain)&&(null===(r=e.authSuccess)||void 0===r?void 0:r.canCreateCategory):null===(a=e.authSuccess)||void 0===a?void 0:a.templateAccess)})},e.prototype.emitEvent=function(e,t){t&&t.stopPropagation(),this.eventHandler.emit({type:e,item:this.item})},e.prototype.setReommendationFunc=function(e,t){var n=this;if(e.stopPropagation(),this.authSuccess||!this.showUpdate){if(this.authSuccess&&this.showUpdate){var i={number:this.item.number};i.recommendation=t?1:-1,this.knowledgeService.updateWikiTemplate(i).subscribe(function(e){n.emitEvent("wiki:template-item-reommendation-change"),n.notification.success(n.translate.instant("UPDATE_SUCCESS"),"")},function(){})}}else this.notification.error(this.translate.instant("NO_PERMISSION"),"")},e.prototype.cancel=function(){},e.prototype.mouseEventhandle=function(e,t){this.showUpdate&&(e.stopPropagation(),this.hoverStatus=t)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](T.b),r["\u0275\u0275directiveInject"](D.c),r["\u0275\u0275directiveInject"](I.b))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-article-template-item"]],inputs:{item:["templateItem","item"],type:"type",authSuccess:"authSuccess",showUpdate:"showUpdate"},outputs:{eventHandler:"eventHandler"},decls:9,vars:5,consts:[[1,"flex","flex-j-sb","template",3,"mouseover","mouseout"],[1,"inline-flex"],[1,"icon","m-l-12","m-r-12"],["class","template-icon team-text",4,"ngIf"],["class","template-icon-wrapper",4,"ngIf"],[1,"template-name","overfolw-eclipis",3,"title"],[1,"operation"],["class","flex-item-template-header",4,"ngIf"],[1,"template-icon","team-text"],[1,"fa","fa-file-text-o"],[1,"template-icon-wrapper"],["src","/knowledge-ui/assets/imgs/template-icon.png"],[1,"flex-item-template-header"],[1,"iconfont","icon-edit-simple","margin-right-8","icon-small","edit-margin-top-2",3,"hidden","title","click"],["nz-popconfirm","","nzPopconfirmPlacement","top",1,"f-18",3,"hidden","nzOkType","nzPopconfirmTitle","title","click","nzOnConfirm","nzOnCancel"],[1,"fa","fa-trash-o","margin-right-8","icon-big","trash-margin-top-5"],[1,"iconfont","icon-xing1","reommend-color","margin-right-8",3,"hidden","title","click"],[1,"iconfont","icon-xing","margin-right-8",3,"hidden","title","click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275listener"]("mouseover",function(e){return t.mouseEventhandle(e,!0)})("mouseout",function(e){return t.mouseEventhandle(e,!1)}),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275template"](3,K,2,0,"span",3),r["\u0275\u0275template"](4,X,2,0,"div",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",5),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",6),r["\u0275\u0275template"](8,Y,11,20,"div",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",null==t.item?null:t.item.blanking),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!(null!=t.item&&t.item.blanking)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("title",null==t.item?null:t.item.title),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",null==t.item?null:t.item.title," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!(null!=t.item&&t.item.blanking)))},directives:[N.n,$.a],pipes:[D.b],styles:[".template[_ngcontent-%COMP%]{height:56px;line-height:56px;cursor:pointer}.template[_ngcontent-%COMP%]:hover{background:#f5f5f5}.template-icon-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:4px 4px 4px 0;box-shadow:2px 2px rgba(0,0,0,.08)}.template-name[_ngcontent-%COMP%]{max-width:104px}.overfolw-eclipis[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.flex-item-template-header[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.flex-item-template-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 4px}.reommend-color[_ngcontent-%COMP%]{color:#eead0e}"]}),e}(),J=n("ZXE5"),Z=n("mXSW");function ee(e,t){1&e&&r["\u0275\u0275element"](0,"i",12)}var te=function(){return{position:"relative",top:"8px"}};function ne(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",14),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).createTemplate()}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275text"](2,"+"),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("nzTooltipTitle",r["\u0275\u0275pipeBind1"](1,2,"CREATE_NEW_TEMPLATE"))("nzTooltipOverlayStyle",r["\u0275\u0275pureFunction0"](4,te))}function ie(e,t){if(1&e&&r["\u0275\u0275template"](0,ne,3,5,"span",13),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngIf",null==n.authAccess?null:n.authAccess.templateAccess)}}function oe(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"app-article-template-item",17),r["\u0275\u0275listener"]("eventHandler",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).handlerEvent(e)})("click",function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"](2).clickTemplate(e)})("mouseenter",function(e){r["\u0275\u0275restoreView"](n);var i=t.$implicit;return r["\u0275\u0275nextContext"](2).mouseenterItem(e,i)})("mouseleave",function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"](2).mouseleaveItem(e)}),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("authSuccess",o.authAccess)("showUpdate",!0)("templateItem",i)("type","wiki")}}function re(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",15),r["\u0275\u0275template"](1,oe,1,4,"app-article-template-item",16),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",n.templateList)}}function ae(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",18),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"EMPTY_TIP")," "))}function ce(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"app-create-template",19),r["\u0275\u0275listener"]("templateEmitter",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().handlerEvent(e)}),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("model",i.templateObj.model)("articleTitle",i.templateObj.articleTitle)("articleUiSource",i.templateObj.articleUiSource)("articleDescription",i.templateObj.articleDescription)("number",i.templateObj.number)("currentDomain",i.currentDomain)}}function le(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",20,21),r["\u0275\u0275listener"]("mouseenter",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().mouseenterView()})("mouseleave",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().mouseleaveView()}),r["\u0275\u0275elementStart"](2,"div",22),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",23),r["\u0275\u0275element"](5,"html-render",24),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275reference"](1),o=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngStyle",o.templateViewStyle),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](null==o.selectedTemplate?null:o.selectedTemplate.title),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("docContent",null==o.selectedTemplate?null:o.selectedTemplate.description)("docType",1===(null==o.selectedTemplate?null:o.selectedTemplate.ui_source)?"rich-text":"markdown")("scrollInEL",i)}}var se=null,de=function(){function e(e,t,n,i,o){this.knowledgeService=e,this.authService=t,this.emitService=n,this.translate=i,this.notification=o,this.selectTemplate=new r.EventEmitter,this.templateCreateShow=new r.EventEmitter,this.templateList=[],this.authAccess={userEditPermission:!0,templateAccess:!1},this.allTemplates=[],this.searchKeywords="",this.templateObj={},this.templateViewStyle={}}return e.prototype.ngOnInit=function(){var e=this;this.emitServiceSub=this.emitService.eventEmit.subscribe(function(t){t&&"wiki:create-wiki-cancel"===t.type?e.getTemplate():!t||"delete-template-success"!==t.type&&"update-template-success"!==t.type&&"create-template-success"!==t.type?t&&"close-create-template"===t.type&&(e.templateObj.show=!1,e.templateCreateShow.emit(!1)):(e.templateObj.show=!1,e.templateCreateShow.emit(!1),e.getTemplate())}),this.getTemplate(),this.getAccess()},e.prototype.getTemplate=function(){var e=this;this.knowledgeService.getTemplate(this.currentDomain).subscribe(function(t){t&&(e.allTemplates=[],t.sort(function(e,t){return t.recommendation-e.recommendation}),t.forEach(function(t){e.allTemplates.push(t)}),e.search())})},e.prototype.getAccess=function(){var e=this;this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&e.authService.buildOperateAuth({currentDomain:e.currentDomain,currentUserId:t.user_id}).then(function(t){e.authAccess=t})})},e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe(),this.emitServiceSub.unsubscribe()},e.prototype.createTemplate=function(){this.templateCreateShow.emit(!0),this.templateObj={model:"create-template",articleTitle:"\u7a7a\u767d\u6a21\u677f",articleUiSource:"rich-text",articleDescription:"",show:!0}},e.prototype.handlerEvent=function(e){var t=e.type,n=e.item;switch(t){case"wiki:template-item-reommendation-change":this.templateObj.show=!1,this.templateCreateShow.emit(!1),this.getTemplate(),this.emitService.emit({type:t});break;case"editItem":this.templateObj={model:"update-template",articleTitle:n.title,articleUiSource:1===n.ui_source?"rich-text":"markdown",articleDescription:n.description,show:!0,number:n.number},this.templateCreateShow.emit(!0);break;case"deleteItem":var i=this.templateList.findIndex(function(e){return e.id===n.id});this.dangerConfirmFunc(n,i)}},e.prototype.clickTemplate=function(e){this.selectTemplate.emit(e)},e.prototype.dangerConfirmFunc=function(e,t){var n=this;this.knowledgeService.updateWikiTemplate({number:e.number,assigned_domain:this.currentDomain?this.currentDomain:"",valid:-1}).subscribe(function(e){n.getTemplate(),n.emitService.emit({type:"delete-template-success"}),n.notification.success(n.translate.instant("UPDATE_SUCCESS"),"")})},e.prototype.search=function(){var e=this;this.templateList=this.allTemplates.filter(function(t){return t.title.indexOf(e.searchKeywords)>-1})},e.prototype.mouseenterItem=function(e,t){t!==this.selectedTemplate&&se&&clearTimeout(se),this.selectedTemplate=t;var n=e.target.getBoundingClientRect(),i=n.left,o=document.body.offsetHeight-n.y;this.templateViewStyle=o-20<600?{left:i-400+"px",bottom:"20px"}:{left:i-400+"px",top:n.top+"px"}},e.prototype.mouseleaveItem=function(e){var t=this;e===this.selectedTemplate&&(se=setTimeout(function(){t.selectedTemplate=null},500))},e.prototype.mouseenterView=function(){se&&clearTimeout(se),se=null},e.prototype.mouseleaveView=function(){this.selectedTemplate=null},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](T.b),r["\u0275\u0275directiveInject"](W.a),r["\u0275\u0275directiveInject"](A.a),r["\u0275\u0275directiveInject"](D.c),r["\u0275\u0275directiveInject"](I.b))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-template-list"]],inputs:{currentDomain:"currentDomain"},outputs:{selectTemplate:"selectTemplate",templateCreateShow:"templateCreateShow"},decls:14,vars:7,consts:[[1,"template","full-height"],[1,"list","full-height"],[1,"search"],[1,"search-input"],[3,"nzPrefix","nzSuffix"],["type","text","nz-input","","placeholder","\u8bf7\u8f93\u5165\u60a8\u8981\u641c\u7d22\u7684\u5185\u5bb9",1,"my-search",3,"ngModel","ngModelChange"],["prefixIconSearch",""],["suffixIconSearch",""],["class","template-list m-t-10 slimScrollBar",4,"ngIf"],["class","empty t-a-c m-t-20",4,"ngIf"],[3,"model","articleTitle","articleUiSource","articleDescription","number","currentDomain","templateEmitter",4,"ngIf"],["class","template-view slimScrollBar p-20 position-r",3,"ngStyle","mouseenter","mouseleave",4,"ngIf"],["nz-icon","","nzType","search"],["class","add","nzTooltipPlacement","top","nz-button","","nz-tooltip","",3,"nzTooltipTitle","nzTooltipOverlayStyle","click",4,"ngIf"],["nzTooltipPlacement","top","nz-button","","nz-tooltip","",1,"add",3,"nzTooltipTitle","nzTooltipOverlayStyle","click"],[1,"template-list","m-t-10","slimScrollBar"],[3,"authSuccess","showUpdate","templateItem","type","eventHandler","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[3,"authSuccess","showUpdate","templateItem","type","eventHandler","click","mouseenter","mouseleave"],[1,"empty","t-a-c","m-t-20"],[3,"model","articleTitle","articleUiSource","articleDescription","number","currentDomain","templateEmitter"],[1,"template-view","slimScrollBar","p-20","position-r",3,"ngStyle","mouseenter","mouseleave"],["previewWrapper",""],[1,"title","text-ellipsis","m-b-8"],[1,"show-preview","flex-1"],[3,"docContent","docType","scrollInEL"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"nz-input-group",4),r["\u0275\u0275elementStart"](5,"input",5),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchKeywords=e})("ngModelChange",function(){return t.search()}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,ee,1,0,"ng-template",null,6,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](8,ie,1,1,"ng-template",null,7,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](10,re,2,1,"div",8),r["\u0275\u0275template"](11,ae,3,3,"div",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](12,ce,1,6,"app-create-template",10),r["\u0275\u0275template"](13,le,6,5,"div",11)),2&e){var n=r["\u0275\u0275reference"](7),i=r["\u0275\u0275reference"](9);r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("nzPrefix",n)("nzSuffix",i),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.searchKeywords),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.templateList.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0===t.templateList.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.templateObj.show),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.selectedTemplate)}},directives:[H.c,G.a,H.d,H.b,B.d,B.k,B.l,N.n,q.a,F.d,N.m,Q,J.a,N.o,Z.a],pipes:[D.b],styles:[".list[_ngcontent-%COMP%]{border:1px solid #dbdbdb;padding:20px 16px;border-radius:4px;height:100%;background:#fff;display:flex;flex-direction:column}.list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{flex:0 0 auto}.list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .my-search[_ngcontent-%COMP%]{height:24px;line-height:24px;margin-left:10px}.list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .clear-search[_ngcontent-%COMP%]{cursor:pointer}.list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:30px;color:#23c6c8;position:relative;top:-2px;cursor:pointer}.list[_ngcontent-%COMP%]   .template-list[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto}.list[_ngcontent-%COMP%]   .template-list[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]     .ant-input-affix-wrapper{border-radius:50px;height:30px;display:flex;align-items:center}[_nghost-%COMP%]     .template-list .part-flex-item{width:100%}.template-view[_ngcontent-%COMP%]{position:fixed;z-index:10;width:400px;height:600px;border:1px solid #ddd;overflow-y:auto;background:#fff;box-shadow:0 0 8px rgba(0,0,0,.02);border-radius:4px}.template-view[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;max-width:560px}.text-ellipsis[_ngcontent-%COMP%]{word-break:break-all;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),e}(),pe=n("p10+"),ue=n("+oEP"),me=n("xGaz"),he=n("IVlV"),ge=n("qAZ0"),fe=n("OzZK"),ve=n("RwU8"),be=["tagManager"],Ce=["categorySelector"],ye=["createArticleWrapper"],xe=["richTextRemoterScroll"],we=["wikiUnlockTips"],_e=["additiveAttr"];function Oe(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.title)}}function Se(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",55),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().closeFullTable()}),r["\u0275\u0275element"](1,"i",56),r["\u0275\u0275elementStart"](2,"span"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4,1,"BACK_ARTICLE")))}function Ee(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",57),r["\u0275\u0275element"](1,"app-collab-users",58),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("collabUsers",null==n.collaboration?null:n.collaboration.collabUsers)}}var Me=function(e){return{"padding-left":e}};function Pe(e,t){if(1&e&&r["\u0275\u0275element"](0,"div",61),2&e){var n=t.$implicit,i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275classProp"]("active-li-styl",n.titleId==i.scrollTitleId),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](3,Me,3*n.indentationLevel+"px"))}}function Ie(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",59),r["\u0275\u0275template"](1,Pe,1,5,"div",60),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",n.articleOutlineArr)}}function ke(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",66),r["\u0275\u0275text"](1,"/"),r["\u0275\u0275elementEnd"]())}function Te(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",62),r["\u0275\u0275elementStart"](1,"div",63),r["\u0275\u0275elementStart"](2,"span",64),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](4,ke,2,0,"div",65),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.last,o=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("hidden",o.fullScreenCtrl),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("title",null==n?null:n.title),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",(null==n?null:n.title)||""," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!i)}}function De(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",67),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().articleTitle=e}),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275classProp"]("input-color",i.isSvMode),r["\u0275\u0275property"]("ngModel",i.articleTitle)("readonly",!0)}}function Ae(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",68),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onFullWidthToggle()}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"i",69),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](1,2,i.allCollapse?"FULL_SCREEN_EXIT":"FULL_SCREEN")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass",i.allCollapse?"icon-horizon-collapse":"icon-horizon-expand")}}function ze(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",70),r["\u0275\u0275elementStart"](1,"div",71),r["\u0275\u0275element"](2,"div",72),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){r["\u0275\u0275nextContext"]();var n=r["\u0275\u0275reference"](58);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("nzPopoverContent",n)}}function Re(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"vision-editor",73,74),r["\u0275\u0275listener"]("initInstanceCallback",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().afterEditorInit(e)})("visionOnEditorChanged",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().getArticleOutlineDelay()})("getEditorContent",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().descriptionChange(e)})("saveContentEmit",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().saveAutomatic()})("fullTableEmit",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().fullTableEmit(e)})("imgLoaded",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().imgLoadedHanlder(e)}),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("hidden",i.showPreview)("showCacheTips",!i.isCollaboration)("modeSwitchEnabled",!i.isCollaboration)("toolbarContailerSelector","#"+i.editorToolbarId)("richTextId",i.richTextEditorId)("type",i.articleUiSource)("insertContentEvent",i.insertContentEventSubject.asObservable())("insertTableRowsEvent",i.insertTableRowsEventSubject.asObservable())("description",i.changeStoryTableMode(i.articleDescription,"edit"))("cacheInfo",i.cacheInfo)("getContentEvent",i.getContentEventSubject.asObservable())("workitemInfo",i.workitemInfo)("username",i.currentUsername)("markdownOptions",i.mdOptions)("structuredTableInfo",i.structuredTableInfo&&i.structuredTableInfo.contentNumber?i.structuredTableInfo:null)("articleAttachmentInfo",i.articleAttachmentInfo)("tingDesignInfo",i.tingDesignInfo)("sketchPadEnable",i.isSketchPadEnable)("saveContent",!0)("tableConfigInfo",i.tableConfigInfo)("fromVision",!0)}}function Le(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",75),r["\u0275\u0275element"](1,"html-render",76),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](),i=r["\u0275\u0275reference"](13);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("scrollInEL",i)("docContent",n.articleDescription)("docType",n.articleUiSource)}}function Ne(e,t){if(1&e&&r["\u0275\u0275element"](0,"article-wiki-comment",79),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("isCoe",!1)("creatorId",n.creatorId)("articleId",n.id)("onlyShowAnnotation",!0)}}function je(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nz-tab",77),r["\u0275\u0275template"](1,Ne,1,4,"article-wiki-comment",78),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("nzTitle","\u6279\u6ce8"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","update-article"===n.model)}}function Ve(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nz-tab",41),r["\u0275\u0275elementStart"](1,"app-additive-attribute",80,81),r["\u0275\u0275listener"]("templateAttrObjChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().templateAttrObj=e})("updateAttributeValue",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().setAttributeValue(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("nzTitle","\u9644\u52a0\u5c5e\u6027"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("categoryId",i.categoryId)("wikiSn",i.sn||i.createArticleSn)("model",i.model)("articleDetails",i.articleDetails)("templateAttrObj",i.templateAttrObj)}}function Fe(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",82),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().handleTemplate(0)}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"i",83),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](1,1,"ANNOTATION"))}function Be(e,t){1&e&&r["\u0275\u0275element"](0,"i",87)}function Ue(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",84),r["\u0275\u0275element"](1,"nz-spin",85),r["\u0275\u0275template"](2,Be,1,0,"ng-template",null,86,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("nzIndicator",n)}}function We(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",88),r["\u0275\u0275elementStart"](1,"div",89),r["\u0275\u0275elementStart"](2,"div",90),r["\u0275\u0275element"](3,"i",91),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",92),r["\u0275\u0275elementStart"](5,"div",93),r["\u0275\u0275text"](6),r["\u0275\u0275pipe"](7,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",94),r["\u0275\u0275text"](9),r["\u0275\u0275pipe"](10,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](7,2,"COMMON_TIPS")),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](10,4,"COLLABORATION_ENTERING")))}function He(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",95),r["\u0275\u0275elementStart"](1,"div",96),r["\u0275\u0275element"](2,"i",97),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",98),r["\u0275\u0275elementStart"](4,"div",99),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",100),r["\u0275\u0275text"](8),r["\u0275\u0275pipe"](9,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",101),r["\u0275\u0275elementStart"](11,"button",102),r["\u0275\u0275listener"]("click",function(){return t.$implicit.close()}),r["\u0275\u0275text"](12),r["\u0275\u0275pipe"](13,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"button",103),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"]().unlockTipsOnCancle(e)}),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"button",104),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"]().unlockTipsOnSave(e)}),r["\u0275\u0275text"](18),r["\u0275\u0275pipe"](19,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.data;r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate3"](" ",null==i?null:i.name," ",null==i?null:i.username," ",r["\u0275\u0275pipeBind1"](6,7,"WIKI_REQUEST_UNLOCK")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](9,9,"WIKI_UNLOCK_TIPS")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](13,11,"WIKI_UNLOCK_REFUSE")),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](16,13,"WIKI_UNLOCK_NO_SAVE")),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](19,15,"WIKI_UNLOCK_SAVE"))}}function Ge(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",105),r["\u0275\u0275elementStart"](1,"div",106),r["\u0275\u0275elementStart"](2,"div",107),r["\u0275\u0275text"](3,"\u77e5\u8bc6\u5e93\u6807\u7b7e\u5df2\u52a0\u81f3\u3010\u9644\u52a0\u5c5e\u6027\u3011\uff0c\u5728\u8fd9\u91cc\u60a8\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u6587\u7ae0\u7684\u5176\u4ed6\u9644\u52a0\u5c5e\u6027\u4fe1\u606f\u3002"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"button",108),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().additiveAttributeTip()}),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](6,1,"TIP_BUTTON_KNOW")))}var qe,$e,Ke,Xe,Ye,Qe=function(e){return{zoom:e}},Je=function(e){return{visibility:e}},Ze=function(){return{padding:"0"}},et=function(){return{"margin-bottom":"10px"}},tt=function(e){return{width:e}},nt=y.a.GRAY_SKETCH_PAD_DOMAIN_IDS,it={"create-article":"\u521b\u5efa\u6587\u7ae0","update-article":"\u7f16\u8f91\u6587\u7ae0"},ot=function(e){function t(t,n,o,c,l,s,d,p,u,m,h,g){var f=e.call(this)||this;return f.wikiLockService=t,f.notification=n,f.router=o,f.knowledgeService=c,f.translate=l,f.emitService=s,f.modal=d,f.resizeObserver=p,f.cdr=u,f.ngZone=m,f.visionEditorService=h,f.activeRoute=g,f.model="create-article",f.articleTitle="\u7a7a\u767d\u6587\u6863",f.articleUiSource="rich-text",f.articleDescription="",f.sn="",f.id="",f.reopen=new r.EventEmitter,f.mdOptions=S.c,f.articleOutlineArr=[],f.num=1,f.editContentScroll=!0,f.editorStyle={opacity:1},f.editMarPaddHeight=20,f.editScrollMarPadd=10,f.scrollMarginPaddingVal=30,f.marginPaddingVal=50,f.articleMarginTop=100,f.articlePaddingVal=80,f.insertContentEventSubject=new a.a,f.insertTableRowsEventSubject=new a.a,f.getContentEventSubject=new a.a,f.hoverShowTip=!1,f.hiddenPreviewBtn=!1,f.showOutlineOverCtrl=!1,f.visibilityParams={},f.attributeValueObj={id:null,tag:[],wiki_id:"",wiki_sn:"",icon_image:"",join_calendar:!0,start_time:null,end_time:null},f.isFullTable=!1,f.fullTableDom=null,f.tableConfigInfo={fullTable:!0},f.outlineCollapse=!1,f.showTemplate=!0,f.activeTabIndex=2,f.showLoading=!1,f.showPreview=!1,f.getArticleInfo=!1,f.navigatioList=[],f.origin="article",f.templateCreateShow=!1,f.onDestroy$=new a.a,f.bindMarkdownEvent=!1,f.getArticleOutlineDelay=Object(b.a)(function(){f.getArticleOutline("article",f.articleTitle)},2e4),f.richTextEditorId="article",f.richTextRemoterShow=!1,f.richTextRemoterInnerWidth=100,f.isSketchPadEnable=!1,f.articleAttachmentInfo={sourceId:"",sourceType:"wiki_location"},f.tingDesignInfo=!0,f.isSvMode=!1,f.isMarkdownMode=!1,f.quickSaveCtrl=!1,f.saveBool=!1,f.additiveAttributeTipShow=!1,f.padSaveRecords=[],f.editWideModeSwitch=!0,f.isImgLazyLoaded=!1,f.templateAttrObj=null,f.descriptionChange$=new a.a,f.beforeConvert=function(){return Object(i.b)(f,void 0,void 0,function(){return Object(i.e)(this,function(e){switch(e.label){case 0:return this.visionEditor.disableEditor(),[4,this.saveBeforeConvert()];case 1:return[2,e.sent()]}})})},f.afterConvert=function(){return Object(i.b)(f,void 0,void 0,function(){return Object(i.e)(this,function(e){return this.enterCollaboration(),this.visionEditor.enableEditor(),[2]})})},f.imgLoadedHanlder=Object(b.a)(function(e){f.isImgLazyLoaded=!0,f.getArticleOutline("markdown"===f.articleUiSource?"vditorScrollParent":"article",f.articleTitle)},2e3),System.import("/shared-ui/knowledge-ui.ce.js"),f}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"isContentChanged",{get:function(){return qe&&qe!==this.articleTitle||$e&&$e!==this.articleUiSource||Ke&&Ke!==this.articleDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editorToolbarId",{get:function(){return this.richTextEditorId+"-toolbar"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allCollapse",{get:function(){return this.outlineCollapse&&!this.showTemplate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCollaboration",{get:function(){var e;return(null===(e=this.collaboration)||void 0===e?void 0:e.collaborationMode)===O.a.collaboration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reserveTitle",{get:function(){return this.translate.instant(this.outlineCollapse?"PIN_OUTLINE":"COLLAPSE_OUTLINE")},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e,t,n,i,o,r=this;null!==localStorage.getItem("normalWikiOutlineCollapse")&&(this.outlineCollapse="true"===localStorage.getItem("normalWikiOutlineCollapse")),null!==localStorage.getItem("normalWikiShowTemplate")&&(this.showTemplate="true"===localStorage.getItem("normalWikiShowTemplate"));var a=localStorage.getItem("wikiWideModeSwitch");a&&(this.editWideModeSwitch=JSON.parse(a)),this.additiveAttributeTipShow=!localStorage.getItem("additiveAttributeTip"),this.structuredTableInfo={domainId:this.currentDomain,feture:{},contentNumber:(null===(t=null===(e=this.articleDetails)||void 0===e?void 0:e.paragraphs)||void 0===t?void 0:t.length)?this.articleDetails.paragraphs[0].contentNumber:void 0},this.currentDomain&&nt.includes(this.currentDomain.toString())&&(this.isSketchPadEnable=!0),this.articleTitleChange(),this.title=it[this.model],this.cdr.detectChanges(),this.setTemplate(),this.currentUsername=window.communicationService.currentUser.user_name,"update-article"===this.model&&this.initNavigation(),this.emitService.eventEmit.subscribe(function(e){var t,n,i=document.getElementById("vditor");if(e.origin===r.origin)if("outline-position"===e.type)r.scrollTitleId=e.data.titleId,r.handlePositionActiveElement(i,e),r.router.navigate([],{relativeTo:r.activeRoute,queryParams:{title:"wikiArticleTitleId"===e.data.titleId?null:e.data.titleId},queryParamsHandling:"merge"});else if(e&&"after-component-change-description"===e.type){if(r.isImgLazyLoaded){for(var o=null===(t=null==r?void 0:r.articleOutlineArr)||void 0===t?void 0:t.length,a=0;a<o;a++){var c=r.articleOutlineArr[a],l=null==e?void 0:e.arr[a];c.startTop=null==l?void 0:l.startTop,c.endTop=null==l?void 0:l.endTop}r.isImgLazyLoaded=!1}else r.articleOutlineArr=e.arr;r.scrollTitleId=null===(n=e.arr[0])||void 0===n?void 0:n.titleId,i&&r.DepthTraversalCallback("vditorSVScroll"),setTimeout(function(){return r.cdr.detectChanges()})}r.updateOutline(e)}),(null===(n=this.articleDetails)||void 0===n?void 0:n.sn)&&(this.workitemInfo={productId:null===(i=this.articleDetails.assigned_domain)||void 0===i?void 0:i.id,sn:null===(o=this.articleDetails)||void 0===o?void 0:o.sn,itemName:"wiki-"+this.articleDetails.title,itemUrl:location.origin+"/domains/"+this.articleDetails.assigned_domain.id+"/wiki/"+this.articleDetails.sn},this.articleAttachmentInfo.sourceId=this.articleDetails.sn),this.getArticleInfo=!0,this.publicInsertContentListener=this.handleMessage.bind(this),window.parent!==window&&window.parent.postMessage("enterEditor",document.referrer),window.addEventListener("message",this.publicInsertContentListener,!1),"update-article"===this.model&&this.initSocketListen(),window.addEventListener("sketch-pad-save-callback",this.getPadSaveSuccess.bind(this)),this.requestArticleSn(),this.listenerContentWide()},t.prototype.initSocketListen=function(){Object(S.b)()?this.initCollaboration():this.initLockSocketListen()},t.prototype.initCollaboration=function(){var e=this;this.collaboration.disconnectInEdit$.pipe(Object(m.a)(this.onDestroy$)).subscribe(function(){e.visionEditor.disableEditor()})},t.prototype.enterCollaboration=function(){this.articleDescription="",this.collaboration.enterCollaboration(this.richTextEditorId,this.onDestroy$)},t.prototype.initLockSocketListen=function(){e.prototype.initSocketListen.call(this)},t.prototype.handlePositionActiveElement=function(e,t){if(e)this.positionMDActiveElement(t.data.titleId);else if("wikiArticleTitleId"===t.data.titleId){var n=document.getElementById("scroll-body");n&&(n.scrollTop=0)}else this.positionActiveElement(t.data.titleId)},t.prototype.requestArticleSn=function(){var e=this;"create-article"===this.model&&this.knowledgeService.requestArticleSn().subscribe(function(t){e.createArticleSn=t,e.workitemInfo={productId:e.currentDomain,sn:e.createArticleSn,itemName:"wiki-"+e.articleTitle,itemUrl:location.origin+"/domains/"+e.currentDomain+"/wiki/"+e.createArticleSn},e.articleAttachmentInfo.sourceId=e.createArticleSn},function(){})},t.prototype.updateOutline=function(e){var t=this;e&&"rich-text-mode"==e.type&&(this.isSvMode=!1,this.isMarkdownMode=!1,this.hiddenPreviewBtn=!1,document.getElementById("newMdToolbar").innerHTML=""),e&&"new-markdown"==e.type&&(this.isSvMode="sv"===e.currentMode,this.hiddenPreviewBtn=!0,this.outlineCollapse=!0,this.isMarkdownMode=!0,Object(E.c)("normalWikiOutlineCollapse",String(this.outlineCollapse)),this.setShowTemplate(!1),this.getArticleOutline("sv"===e.currentMode?"vditorScrollParent":"vditorReset",this.articleTitle)),e&&"markdown-mode-ir"==e.type&&(this.isSvMode=!1,this.DepthTraversalCallback("vditorReset")),e&&"markdown-mode-sv"==e.type&&(this.isSvMode=!0,this.DepthTraversalCallback("vditorSVScroll"),setTimeout(function(){t.DepthTraversalCallback("vditorScrollParent")},1e3)),e&&"wiki:doc-table-wide-edit"==e.type&&(this.editWideModeSwitch=e.obj,this.listenerContentWide())},t.prototype.listenerContentWide=function(){var e=document.getElementById("edit-content-box");e&&(e.clientWidth>760&&!this.editWideModeSwitch?e.classList.add("edit-artical-wide"):e.classList.remove("edit-artical-wide"))},t.prototype.DepthTraversalCallback=function(e){var t;this.num=1;var n=document.getElementById(e);(null===(t=null==n?void 0:n.childNodes)||void 0===t?void 0:t.length)&&this.DepthTraversal(n,e)},t.prototype.DepthTraversal=function(e,t){var n,i,o;if(e){if("vditorSVScroll"===t&&["h1","h2","h3","h4","h5","h6"].includes(e.className)&&""!=e.innerText.trim()&&(e.setAttribute("id","sv_"+(null===(n=this.articleOutlineArr[this.num])||void 0===n?void 0:n.titleId)),this.num+=1),["vditorReset","vditorScrollParent"].includes(t)&&["H1","H2","H3","H4","H5","H6"].includes(e.tagName)&&""!=e.innerText.trim()){var r="vditorReset"===t?"ir_"+(null===(i=this.articleOutlineArr[this.num])||void 0===i?void 0:i.titleId):null===(o=this.articleOutlineArr[this.num])||void 0===o?void 0:o.titleId;e.setAttribute("id",r),this.num+=1}if(e.childNodes&&e.childNodes.length)for(var a=0,c=e.childNodes.length;a<c;a++)this.DepthTraversal(e.childNodes[a],t)}},t.prototype.cancleEdit=function(){this.categorySelector.cancelCreate()},t.prototype.saveEdit=function(){this.categorySelector.save()},t.prototype.handleMessage=function(e){var t,n,i,o,r;if("rich-text"===this.articleUiSource&&e&&e.data){var a=e.data;if("insertContentToWiki"===a.event&&a.data instanceof Array)if((null===(r=null===(o=null===(i=null===(n=null===(t=this.visionEditor)||void 0===t?void 0:t.richTextEditor)||void 0===n?void 0:n.editor)||void 0===i?void 0:i.selection)||void 0===o?void 0:o.getNode())||void 0===r?void 0:r.nodeName)&&"TD"===this.visionEditor.richTextEditor.editor.selection.getNode().nodeName){var c=this.assembleTrs(a.data);this.insertTableRowsEventSubject.next({insertTableRows:c})}else{var l=this.assembleInsertHtml(a.data);this.insertContentEventSubject.next({insertContent:l})}}},t.prototype.assembleTrs=function(e){var t,n,o=this,r=[];try{for(var a=Object(i.j)(e),c=a.next();!c.done;c=a.next()){var l=c.value;if(l.data&&"table"===l.type){var s=l.data.body;s instanceof Array&&s.length>0&&s.forEach(function(e){var t=o.visionEditor.richTextEditor.editor.dom.create("tr");e.forEach(function(e){t.appendChild(o.visionEditor.richTextEditor.editor.dom.create("td",null,e||"&nbsp;"))}),r.push(t)})}}}catch(d){t={error:d}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r},t.prototype.assembleInsertHtml=function(e){var t,n,o="";try{for(var r=Object(i.j)(e),a=r.next();!a.done;a=r.next()){var c=a.value;if(!c.data)return;"text"===c.type?o+=this.assembleTextHtml(c):"table"===c.type&&(o+=this.assembleTableHtml(c.data))}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return o},t.prototype.assembleTableHtml=function(e){var t=this,n=e.head,i=e.body,o=0,r="";return n instanceof Array&&n.length>0&&(r=this.assembleTr(r,n,o=100/n.length)),i instanceof Array&&i.length>0&&(o=100/i[0].length,i.forEach(function(e){r=t.assembleTr(r,e,o)})),'<table style="border-collapse: collapse; width: 100%;" border="1">\n<tbody id="tbody">\n'+r+"</tbody>\n</table>"},t.prototype.assembleTr=function(e,t,n){return t instanceof Array&&0!==t.length?(e+="<tr>\n",t.forEach(function(t){e+='<td style="width: '+n+'%;">'+t+"</td>\n"}),e+="</tr>\n"):e},t.prototype.assembleTextHtml=function(e){var t="";return e.data&&e.data.content instanceof Array&&e.data.content.length>0&&e.data.content.forEach(function(e){t+="<p>"+e+"</p>"}),t},t.prototype.ngAfterViewInit=function(){var e,t=this;this.initEditor(),this.saveInitData(),Object(S.d)(this,this.createArticleWrapper,!1),setTimeout(function(){if(document.getElementById("scroll-body")&&document.getElementById("scroll-body").addEventListener("keydown",function(){t.ngZone.run(function(){return Object(S.a)(t.saveAutomatic.bind(t))}),t.visionEditorService.enterScroll()}),t.additiveAttributeTip){var e=document.getElementById("additiveAttributeTip");e&&e.click()}},1e3),(null===(e=this.collaboration)||void 0===e?void 0:e.collaborationMode)===O.a.collaboration&&this.enterCollaboration(),this.visionEditorService.hiddenTableDragele()},t.prototype.saveAutomatic=function(){this.isFullTable||(this.quickSaveCtrl=!0,this.buildTemplateAttribute()&&("update-article"==this.model?this.getContentEventSubject.next({clearCache:!1,eventType:"save-data"}):"create-article"==this.model&&(this.isCreatedOnce?this.getContentEventSubject.next({clearCache:!1,eventType:"save-data"}):this.categorySelector.showSelectCategoryDirectory=!0)))},t.prototype.fullTableEmit=function(e){this.fullTableDom=e.detail.tableDom,this.isFullTable=!this.isFullTable,document.getElementById("back-full-table").style.display="none"},t.prototype.closeFullTable=function(){this.visionEditorService.closeTableMode(this.fullTableDom,"edit"),this.isFullTable=!1},t.prototype.ngOnDestroy=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.e)(this,function(e){return this.onDestroy$.next(),this.onDestroy$.complete(),window.removeEventListener("message",this.publicInsertContentListener,!1),window.removeEventListener("sketch-pad-save-callback",this.getPadSaveSuccess),window.parent!==window&&window.parent.postMessage("leaveEditor",document.referrer),this.removeUnlockRequestTips(),[2]})})},t.prototype.setTemplate=function(){var e=this.selectedTemplate;e&&"select-template"===e.operateType&&(this.templateDetails=e,this.articleUiSource=Object(w.q)(e.ui_source),this.articleDescription=e.description,this.articleTitle=e.title,this.templateAttrObj=e)},t.prototype.saveInitData=function(){qe=this.articleTitle,$e=this.articleUiSource,Ke=this.changeStoryTableMode(this.articleDescription,"edit"),Xe=this.categoryId,Ye=this.dictionaryId},t.prototype.initNavigation=function(){var e=this;Object(c.a)(this.knowledgeService.getArticleNavigation(this.currentDomain,this.sn),this.knowledgeService.getWikiCategories(this.currentDomain)).subscribe(function(t){var n=Object(i.g)(t,2),o=n[0],r=n[1].find(function(t){return t.id===Number(e.categoryId)});try{var a=JSON.parse(localStorage.getItem("currentDomain"));e.navigatioList=[{title:a.domainTitle}]}catch(c){}finally{e.navigatioList=Object(i.i)(e.navigatioList,[r],o)}},function(){})},t.prototype.saveArticleOrTemplate=function(e){var t=e.dictionaryId,n=e.parentSn;this.categoryId=this.categoryId||e.categoryId,this.dictionaryId=this.dictionaryId||t,this.parentSn=this.parentSn||n,this.visibilityParams=e.visibilityParams,this.buildTemplateAttribute()&&this.getContentEventSubject.next({clearCache:!0,eventType:"save-data"})},t.prototype.buildTemplateAttribute=function(){var e,t;if(!(null===(t=null===(e=this.additiveAttr.templateAttribute)||void 0===e?void 0:e.attributeList)||void 0===t?void 0:t.length))return!0;var n=this.additiveAttr.templateAttribute.attributeList||[];this.templateAttrParam={};for(var i=0;i<n.length;i++){var o=n[i];if(this.isEmptyTemplateAttribute(o))return this.notification.error(this.translate.instant(o.name),this.translate.instant("-16158")),!1;this.templateAttrParam[o.name]=Array.isArray(o.selectValue)?o.selectValue.join(","):o.selectValue}return!0},t.prototype.isEmptyTemplateAttribute=function(e){var t=e.selectValue;return"string"==typeof t&&(t=t.trim()),"number"==typeof t&&(t=String(t)),e.required&&Object(C.a)(t)},t.prototype.descriptionChange=function(e){this.articleDescription=e.description,this.articleUiSource=e.type,this.setRemoter(e),this.articleTitle=e.title?e.title:this.articleTitle;var t=e.eventType;if(this.descriptionChange$.next(t),"save-data"===t)switch(this.model){case"create-article":this.createArticle();break;case"update-article":this.updateArticle();break;default:return}else"all-pad-saved-update"===t?this.updateArticleAfterSaveSketchPad():"all-pad-saved-create"===t&&this.createArticleAfterPadSaved()},t.prototype.createFaildHandler=function(){this.quickSaveCtrl=!1,this.dictionaryId=null},t.prototype.createArticle=function(){if(!this.articleTitle)return this.notification.error(this.translate.instant("EMPTY_ARTICLE_TITLE"),""),void(this.quickSaveCtrl&&this.createFaildHandler());window.hwa("trackStructEvent",{label:"\u65b0\u5efa\u6587\u7ae0"}),this.showLoading=!0,this.padSaveRecords=[];for(var e=document.getElementById("article"),t=e&&e.getElementsByTagName("sketch-pad")||[],n=0;n<t.length;n++){var i=t[n];i.getAttribute("page-id")&&this.padSaveRecords.push(i.getAttribute("page-id"))}if(t.length){var o=new CustomEvent("sketch-pad-save",{detail:{scenario:"create",needSaveCallBack:!0}});window.dispatchEvent(o)}else this.createArticleAfterPadSaved()},t.prototype.createArticleAfterPadSaved=function(){var e,t=this,n=[Object(i.a)(Object(i.a)({title:this.articleTitle,description:this.changeStoryTableMode(this.articleDescription,"view"),category:"document",parent_id:Number(this.dictionaryId),kanban_id:this.categoryId,ui_source:"rich-text"===this.articleUiSource?1:2,assigned_domain_id:Number(this.currentDomain),sn:this.createArticleSn},this.visibilityParams),{classify:(null===(e=this.templateAttrObj)||void 0===e?void 0:e.type)||null})];this.knowledgeService.createArticleFloder(n).subscribe(function(e){var n=e.data,i=n.success,o=n.failed;if(200===e.code){if(i.length>0){var r=i[0],a=r.sn,c=r.id;t.sn=a,t.id=c,t.updateAttributeValue(t.quickSaveCtrl),t.quickSaveCtrl?(qe=t.articleTitle,$e=t.articleUiSource,Ke=t.articleDescription,t.isCreatedOnce={type:"add-document",sn:a,parentSn:t.parentSn},t.notification.success(t.translate.instant("UPDATE_SUCCESS"),""),t.quickSaveCtrl=!1,t.model="update-article"):t.emitService.emit({type:"add-document",sn:a,parentSn:t.parentSn})}o.length>0&&(t.notification.error(t.translate.instant(String(o[0].code)),""),t.quickSaveCtrl?(t.quickSaveCtrl=!1,t.dictionaryId=null):(t.categoryId=Xe,t.dictionaryId=Ye))}},function(e){t.showLoading=!1})},Object.defineProperty(t.prototype,"articleBase",{get:function(){return{id:this.id,ui_source:"markdown"===this.articleUiSource?"2":"1",title:this.articleTitle}},enumerable:!1,configurable:!0}),t.prototype.saveBeforeConvert=function(){var e=this;return new Promise(function(t,n){var o="saveBeforeCollaboration";e.descriptionChange$.pipe(Object(m.a)(e.onDestroy$),Object(h.a)(function(e){return e===o}),Object(g.a)(1),Object(h.a)(function(){var t="rich-text"===e.articleUiSource;return t||n(new Error("COLLABORATION_FAILED:MARKDOWN_MODE")),t}),Object(f.a)(function(){var t=Object(i.a)(Object(i.a)({},e.articleBase),{description:e.changeStoryTableMode(e.articleDescription,"view")});try{return e.knowledgeService.saveArticle([t]).toPromise()}catch(o){Object(M.b)(o),n(new Error("SAVE_ARTICLE_FAILED"))}})).subscribe(function(i){var o=i.failed.find(function(e){return"description"===e.field});o?n(new Error(o.message||"\u534f\u540c\u524d\u4fdd\u5b58\u6587\u7ae0\u5185\u5bb9\u5931\u8d25")):t(e.articleDescription)},function(){}),e.getContentEventSubject.next({eventType:o})})},t.prototype.getPadSaveSuccess=function(e){var t=e.detail,n=t.scenario,i=t.pageId,o=t.height,r=t.historyId,a=document.getElementById("article"),c=a&&a.getElementsByTagName("sketch-pad")||[],l=Array.from(c).filter(function(e){return e.getAttribute("page-id")===String(i)});l.length&&(this.padSaveRecords=this.padSaveRecords.filter(function(e){return e!==String(i)}),l[0].setAttribute("height",o),l[0].setAttribute("history-id",r)),0===this.padSaveRecords.length&&this.getContentEventSubject.next({clearCache:!1,eventType:"all-pad-saved-"+n})},t.prototype.updateArticle=function(){this.showLoading=!0,this.padSaveRecords=[];for(var e=document.getElementById("article"),t=e&&e.getElementsByTagName("sketch-pad")||[],n=0;n<t.length;n++){var i=t[n];i.getAttribute("page-id")&&this.padSaveRecords.push(i.getAttribute("page-id"))}if(t.length){var o=new CustomEvent("sketch-pad-save",{detail:{scenario:"update",needSaveCallBack:!0}});window.dispatchEvent(o)}else this.updateArticleAfterSaveSketchPad()},t.prototype.updateArticleAfterSaveSketchPad=function(){var e,t,n,o,r,a,c,l,s,d,p,u,m=this,h=Object(i.a)(Object(i.a)({},this.articleBase),{description:this.changeStoryTableMode(this.articleDescription,"view"),classify:(null===(e=this.templateAttrObj)||void 0===e?void 0:e.type)||(null===(t=this.articleDetails)||void 0===t?void 0:t.classify)}),g=this.categorySelector.versionDetail;if(g){h.revision_record=g;var f=this.categorySelector.relatedWorkitem;f.length>0&&(g.relations=f.map(function(e){return{relation_id:null==e?void 0:e.id,relation_sn:null==e?void 0:e.number,relation_type:null==e?void 0:e.category}}))}this.emitService.emit({type:"update-article-attribute"});var v=this.attributeValueObj.tag,b=Object(i.a)({},this.attributeValueObj),C={wikiAdditionalAttribute:{id:b.id||null,wiki_id:null===(n=this.articleDetails)||void 0===n?void 0:n.id,wiki_sn:this.sn,icon_image:b.icon_image,join_calendar:b.join_calendar?1:0,start_time:b.start_time,end_time:b.end_time},tag:{wikiSn:this.sn,tagIds:v.map(function(e){return null==e?void 0:e.id})},wikiAttribute:{wikiId:null===(o=this.articleDetails)||void 0===o?void 0:o.id,wikiSn:(null===(r=this.articleDetails)||void 0===r?void 0:r.sn)||this.createArticleSn,attrId:null!==(l=null===(c=null===(a=this.additiveAttr)||void 0===a?void 0:a.rootCause)||void 0===c?void 0:c.resArr)&&void 0!==l?l:[]}};(null===(d=null===(s=this.additiveAttr.templateAttribute)||void 0===s?void 0:s.attributeList)||void 0===d?void 0:d.length)&&(C.templateAttribute=Object(i.a)({wiki_sn:this.sn,wiki_id:this.id,type:(null===(p=this.templateAttrObj)||void 0===p?void 0:p.type)||(null===(u=this.articleDetails)||void 0===u?void 0:u.classify)},this.templateAttrParam)),this.knowledgeService.updateWikiAttribute(C).subscribe(function(e){},function(){}),this.initWikiFailureMode(),this.knowledgeService.saveArticle([h]).subscribe(function(e){var t=e.success,n=e.unmodify;m.showLoading=!1,(null==t?void 0:t.length)||(null==n?void 0:n.length)?(m.quickSaveCtrl?(qe=m.articleTitle,$e=m.articleUiSource,Ke=m.articleDescription,m.saveBool=!0,m.quickSaveCtrl=!1):m.emitService.emit({type:"article-update-finished",title:m.articleTitle,sn:m.sn}),m.notification.success(m.translate.instant("UPDATE_SUCCESS"),""),g&&m.emitService.emit({type:"wiki::baseline-version-create"})):(m.quickSaveCtrl&&(m.quickSaveCtrl=!1),m.notification.error(m.translate.instant("SAVEED_FAILED"),""))},function(e){m.showLoading=!1})},t.prototype.articleTitleChange=function(){this.cacheInfo="create-article"===this.model?{sn:"",title:this.articleTitle,type:"create-wiki"}:{sn:this.sn,title:this.articleTitle,type:"wiki"}},t.prototype.updateAttributeValue=function(e){var t,n,o,r,a,c,l,s=this;this.emitService.emit({type:"update-article-attribute"});var d=this.attributeValueObj.tag,p=Object(i.a)({},this.attributeValueObj),u={wikiAdditionalAttribute:{id:p.id||null,wiki_id:this.id,wiki_sn:this.sn,icon_image:p.icon_image,join_calendar:p.join_calendar?1:0,start_time:p.start_time,end_time:p.end_time},tag:{wikiSn:this.sn,tagIds:d.map(function(e){return e.id})},wikiAttribute:{wikiId:this.id,wikiSn:(null===(t=this.articleDetails)||void 0===t?void 0:t.sn)||this.createArticleSn,attrId:null!==(r=null===(o=null===(n=this.additiveAttr)||void 0===n?void 0:n.rootCause)||void 0===o?void 0:o.resArr)&&void 0!==r?r:[]}};(null===(c=null===(a=this.additiveAttr.templateAttribute)||void 0===a?void 0:a.attributeList)||void 0===c?void 0:c.length)&&(u.templateAttribute=Object(i.a)({wiki_sn:this.sn,wiki_id:this.id,type:(null===(l=this.templateAttrObj)||void 0===l?void 0:l.type)||""},this.templateAttrParam)),this.knowledgeService.updateWikiAttribute(u).subscribe(function(){return Object(i.b)(s,void 0,void 0,function(){return Object(i.e)(this,function(t){switch(t.label){case 0:return[4,this.initWikiFailureMode()];case 1:return t.sent(),this.showLoading=!1,e||(this.router.navigateByUrl("/domains/"+this.currentDomain+"/wiki/"+this.categoryId+"/"+this.sn),this.emitService.emit({type:"article-add-finished"})),[2]}})})},function(){s.showLoading=!1})},t.prototype.afterEditorInit=function(e){var t="markdown"===(null==e?void 0:e.type)?"vditorScrollParent":"article";this.collaboration&&this.collaboration.afterEditorInit(this.beforeConvert,this.afterConvert),this.getArticleOutline(t,this.articleTitle)},t.prototype.getArticleOutline=function(e,t){this.isMarkdownMode||this.isImgLazyLoaded||(this.articleOutlineArr=[]),this.emitService.emit({type:"article-outline-get-outline-arr",data:{id:e,articleRealTitle:t,firstChildDom:document.getElementById("edit-wrapper-first-child")},origin:this.origin,isImgLazyLoaded:this.isImgLazyLoaded})},t.prototype.initEditor=function(){var e=this;if("markdown"===this.articleUiSource&&this.getContentEventSubject.next({}),"rich-text"===this.articleUiSource){var t,n=0,i=1;if("update-article"===this.model){var o=document.getElementById("scrollParentArticle"),r=document.getElementById("wikiArticleTitleId");if(o){this.editorStyle={opacity:0};var a=r&&r.getBoundingClientRect().height;i=o.scrollHeight-a-this.marginPaddingVal,(n=o.scrollTop-a-this.scrollMarginPaddingVal)<0&&(n=0)}}var c=Object(l.a)(100).pipe(Object(v.a)(function(e){return Object(s.a)(2*e)})).subscribe(function(o){(t=document.getElementById("scroll-body"))&&(t.removeEventListener("scroll",null),t.addEventListener("scroll",e.articleEditScrollFunc.bind(e)),setTimeout(function(){var o=t.scrollHeight;t.scrollTop=n*o*o/(i*i),setTimeout(function(){e.editorStyle={opacity:1}})}),c.unsubscribe())})}},t.prototype.articleEditScrollFunc=function(){this.editContentScroll&&this.articleScroll()},t.prototype.articleScroll=function(){var e=this.articleOutlineArr.length;this.articleOutlineArr&&e>0&&document.getElementById("article")&&this.findFinishedDom(this.articleOutlineArr[e-1].titleId)},t.prototype.positionActiveElement=function(e){var t=this;this.editContentScroll=!1,this.parent||(this.parent=document.getElementById("scroll-body")),this.top||(this.top=document.getElementById("edit-wrapper-first-child")),this.element||(this.element=document.getElementById("edit-wrapper-last-child"));var n=this.top&&this.top.getBoundingClientRect(),i=this.element&&this.element.getBoundingClientRect(),o=document.getElementById(e).getBoundingClientRect(),r=this.parent.getBoundingClientRect(),a=Math.abs(o.top-n.top),c=i.bottom-n.top-r.height;a>c&&(a=c),this.parent.scrollTop=a+this.articleMarginTop,setTimeout(function(){t.editContentScroll=!0})},t.prototype.positionMDActiveElement=function(e){var t,n,i,o=document.getElementById("vditorSVScroll"),r=null===(t=document.getElementById("sv_"+e))||void 0===t?void 0:t.offsetTop;o.scrollTop=r;var a=document.getElementById("vditorScroll"),c=null===(n=document.getElementById(e))||void 0===n?void 0:n.offsetTop;setTimeout(function(){a.scrollTop=c});var l=document.getElementById("vditorReset"),s=null===(i=document.getElementById("ir_"+e))||void 0===i?void 0:i.offsetTop;l.scrollTop=s},t.prototype.findFinishedDom=function(e){if(document.getElementById(e)){this.articleScrollDom||(this.articleScrollDom=document.getElementById("article")),this.parentScrollTopDom||(this.parentScrollTopDom=document.getElementById("scroll-body"));for(var t=this.parentScrollTopDom.scrollTop,n=JSON.parse(localStorage.getItem("outlineActiveTitle")),i=t-this.articlePaddingVal,o=0;o<this.articleOutlineArr.length;o++){var r=this.articleOutlineArr[o];if(r.startTop<i&&i<r.endTop){if(n&&n.titleId!==r.titleId||!n){Object(E.c)("outlineActiveTitle",JSON.stringify(r));var a={type:"scroll-active-outline-title",data:r};this.scrollTitleId=a.data.titleId,this.emitService.emit(a)}return}}}},t.prototype.showOutlineOver=function(e){this.showOutlineOverCtrl=!0,"showTip"===e&&(this.hoverShowTip=!0)},t.prototype.showOutlineOut=function(e){this.showOutlineOverCtrl=!1,"showTip"===e&&(this.hoverShowTip=!1)},t.prototype.getChangedEditorType=function(e){(null==e?void 0:e.type)&&(this.articleUiSource=e.type,"rich-text"===this.articleUiSource&&this.initEditor())},t.prototype.outlineToggle=function(){this.outlineCollapse=!this.outlineCollapse,Object(E.c)("normalWikiOutlineCollapse",String(this.outlineCollapse))},t.prototype.selectTemplate=function(e){var t={"rich-text":1,markdown:2}[this.articleUiSource];if("\u7a7a\u767d\u6587\u6863"!==this.articleTitle||this.articleDescription)var n=this.setEditorContent.bind(this),o=this.setTemplateAttribute.bind(this),r=this.translate.instant.bind(this.translate),a=this.articleDescription,c=this.modal.create({nzTitle:"\u653e\u5f03\u5f53\u524d\u5185\u5bb9\u5417?",nzContent:null,nzWidth:500,nzClosable:!1,nzClassName:"confirm-cancel-modal",nzFooter:[{label:"\u8986\u76d6",onClick:function(){this.templateDetails=e,n(e.description,e,!0),o(e),c.close()}},{label:"\u8ffd\u52a0",onClick:function(){this.templateDetails=e;var r=a;r+=t===e.ui_source?e.description:(1===t?marked:html2markdown)(e.description),n(r,Object(i.a)(Object(i.a)({},e),{ui_source:t}),!1),o(e),c.close()}},{label:r("COMMON_BUTTON_CANCLE"),onClick:function(){c.close()}}]});else this.setEditorContent(e.description,e,!0),this.setTemplateAttribute(e)},t.prototype.setEditorContent=function(e,t,n){var i=this;n&&(this.articleTitle=t.title),this.articleDescription=e,this.articleUiSource=Object(w.q)(t.ui_source),Object(w.p)(function(){i.visionEditor.refreshContent(e),i.getContentEventSubject.next({})}),"update-article"===this.model&&this.articleTitleChange()},t.prototype.setShowTemplate=function(e){this.showTemplate=e,Object(E.c)("normalWikiShowTemplate",String(this.showTemplate))},t.prototype.preview=function(e){this.getContentEventSubject.next({eventType:"getContentForPreview"}),this.showPreview=e},t.prototype.onRemoterScroll=function(){var e=this.richTextRemoterScroll.nativeElement,t=this.richTextWrapper;t.scrollLeft=e.scrollLeft/(e.scrollWidth-e.clientWidth)*(t.scrollWidth-t.clientWidth)},t.prototype.setRemoter=function(e){var t=this;if("rich-text"===e.type){var n=document.querySelector("#"+this.richTextEditorId+".doc-cnt"),i=n.scrollWidth>n.clientWidth;this.richTextRemoterShow=i,this.richTextWrapper=n,i&&(this.wrapperScrollSubscription&&this.wrapperScrollSubscription.unsubscribe(),this.wrapperScrollSubscription=Object(d.a)(Object(p.a)(),this.resizeObserver.observe(n),Object(u.a)(window,"resize")).subscribe(function(){t.richTextRemoterInnerWidth=n.scrollWidth;var e=t.richTextRemoterScroll.nativeElement,i=n.getBoundingClientRect(),o=i.width;e.style.left=i.left+"px",e.style.width=o+"px",e.scrollLeft=n.scrollLeft}))}else this.richTextRemoterShow=!1},t.prototype.setTemplateAttribute=function(e){this.templateAttrObj=e,this.activeTabIndex=2},t.prototype.onFullWidthToggle=function(){this.allCollapse?(this.outlineCollapse=!1,this.showTemplate=!0,Object(E.c)("normalWikiOutlineCollapse",String(this.outlineCollapse)),Object(E.c)("normalWikiShowTemplate",String(this.showTemplate))):(this.outlineCollapse=!0,this.showTemplate=!1,Object(E.c)("normalWikiOutlineCollapse",String(this.outlineCollapse)),Object(E.c)("normalWikiShowTemplate",String(this.showTemplate)))},t.prototype.changeStoryTableMode=function(e,t){return e?this.visionEditorService.changeContentMode(e,t):e},t.prototype.handleTemplate=function(e){this.showTemplate=!0,this.activeTabIndex=e,Object(E.c)("normalWikiShowTemplate",String(this.showTemplate))},t.prototype.setAttributeValue=function(e){this.attributeValueObj=e},t.prototype.additiveAttributeTip=function(){this.additiveAttributeTipShow=!1,Object(E.c)("additiveAttributeTip",String(!0))},t.prototype.initWikiFailureMode=function(){var e,t,n,i,o,r;if(null===(t=null===(e=this.additiveAttr)||void 0===e?void 0:e.failureMode)||void 0===t?void 0:t.resArr){var a={wikiId:this.id,wikiSn:(null===(n=this.articleDetails)||void 0===n?void 0:n.sn)||this.createArticleSn,attrId:null!==(r=null===(o=null===(i=this.additiveAttr)||void 0===i?void 0:i.failureMode)||void 0===o?void 0:o.resArr)&&void 0!==r?r:[]};this.knowledgeService.updateWikiFailureMode(a).subscribe(function(e){},function(){})}},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](P.a),r["\u0275\u0275directiveInject"](I.b),r["\u0275\u0275directiveInject"](k.f),r["\u0275\u0275directiveInject"](T.b),r["\u0275\u0275directiveInject"](D.c),r["\u0275\u0275directiveInject"](A.a),r["\u0275\u0275directiveInject"](z.d),r["\u0275\u0275directiveInject"](R.a),r["\u0275\u0275directiveInject"](r.ChangeDetectorRef),r["\u0275\u0275directiveInject"](r.NgZone),r["\u0275\u0275directiveInject"](L.a),r["\u0275\u0275directiveInject"](k.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-article-create"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](be,1),r["\u0275\u0275viewQuery"](Ce,1),r["\u0275\u0275viewQuery"](ye,1),r["\u0275\u0275viewQuery"](xe,1),r["\u0275\u0275viewQuery"](x.a,1),r["\u0275\u0275viewQuery"](we,1),r["\u0275\u0275viewQuery"](_e,1)),2&e){var n=void 0;r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.tagManager=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.categorySelector=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.createArticleWrapper=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.richTextRemoterScroll=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.visionEditor=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.wikiUnlockTipsTemplateRef=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.additiveAttr=n.first)}},inputs:{model:"model",articleTitle:"articleTitle",articleUiSource:"articleUiSource",articleDescription:"articleDescription",categoryId:"categoryId",parentSn:"parentSn",dictionaryId:"dictionaryId",currentDomain:"currentDomain",sn:"sn",id:"id",creatorId:"creatorId",selectedTemplate:"selectedTemplate",articleDetails:"articleDetails",collaboration:"collaboration",fullScreenCtrl:"fullScreenCtrl",fullScreenZoomSize:"fullScreenZoomSize",visibilityEditModel:"visibilityEditModel",categoryDetails:"categoryDetails",createFrom:"createFrom",showVisibilityEdit:"showVisibilityEdit"},outputs:{reopen:"reopen"},features:[r["\u0275\u0275ProvidersFeature"]([]),r["\u0275\u0275InheritDefinitionFeature"]],decls:59,vars:97,consts:[[1,"create-article-wrapper"],["createArticleWrapper",""],[1,"header-shadow",3,"ngStyle"],[1,"title","m-l-12"],[4,"ngIf"],["class","doc-full-table",3,"click",4,"ngIf"],["class","collab-users",4,"ngIf"],[1,"toolbar",3,"id","hidden"],["id","newMdToolbar",1,"vditor","md-toolbar"],[1,"buttons","m-r-12",3,"hidden"],[3,"model","categoryId","dictionaryId","currentDomain","contentChanged","showPreview","saveBool","isCreatedOnce","fullScreenCtrl","hiddenPreviewBtn","articleDetails","categoryDetails","createFrom","visibilityEditModel","showVisibilityEdit","selected","preview"],["categorySelector",""],["id","scroll-body",1,"doc-content","flex","slimScrollBar"],["scrollBody",""],[1,"left","m-l-12","position-r",3,"hidden","ngStyle","mouseover","mouseout"],[1,"article-outline-wrap","slimScrollBar"],["id","scrollParentOutline",1,"article-outline-show"],["id","topPositionOutline",1,"top-position-styl"],[3,"origin","needBorder","isEdit"],["id","bottomPositionOutline",1,"top-position-styl"],["nz-tooltip","",1,"outline-toggle-icon","cursor-pointer","reserve-span-show",3,"nzTooltipPlacement","nzTooltipTitle","click"],[1,"iconfont","icon","f-16","txt-999"],["class","article-hidden-wrapper",4,"ngIf"],[1,"center",3,"ngStyle"],[1,"knowledge-nav","text-omit",3,"ngStyle"],["class","knowledge-nav-item",3,"hidden",4,"ngFor","ngForOf"],["id","edit-content-box",1,"page",3,"ngClass"],[1,"title-input"],["type","text","placeholder","\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898...","maxlength","1000",1,"article-title","p-l-20","p-r-20","t-a-l",3,"ngModel","readonly","ngModelChange"],["type","text","maxlength","1000","class","article-title p-l-20 p-r-20 t-a-l",3,"ngModel","readonly","input-color","ngModelChange",4,"ngIf"],["class","collapse-all-icon cursor-pointer",3,"title","click",4,"ngIf"],["class","tag-pop-box",4,"ngIf"],["id","edit-wrapper-first-child",1,"position-child-div"],["class","create-article-container",3,"hidden","showCacheTips","modeSwitchEnabled","toolbarContailerSelector","richTextId","type","insertContentEvent","insertTableRowsEvent","description","cacheInfo","getContentEvent","workitemInfo","username","markdownOptions","structuredTableInfo","articleAttachmentInfo","tingDesignInfo","sketchPadEnable","saveContent","tableConfigInfo","fromVision","initInstanceCallback","visionOnEditorChanged","getEditorContent","saveContentEmit","fullTableEmit","imgLoaded",4,"ngIf"],["id","edit-wrapper-last-child",1,"position-child-div"],["class","show-preview p-20",4,"ngIf"],[1,"right","m-r-12",3,"hidden","ngStyle"],[1,"template-list","position-r"],[1,"iconfont","icon-to-right","position-a",3,"click"],[3,"nzSelectedIndex","nzSelectedIndexChange"],["class","comment-wrapper",3,"nzTitle",4,"ngIf"],[3,"nzTitle"],[3,"currentDomain","selectTemplate","templateCreateShow"],[3,"nzTitle",4,"ngIf"],[1,"small-btn-warp",3,"hidden","ngStyle"],[1,"small-btn","annotation-btn",3,"title","click"],[1,"iconfont","icon-template","f-14"],["class","small-btn template-btn",3,"title","click",4,"ngIf"],["class","loading-wrapper",4,"ngIf"],["class","converting-mask",4,"ngIf"],[1,"remote-scroll","slimScrollBar",3,"hidden","scroll"],["richTextRemoterScroll",""],[1,"remote-scroll-inner",3,"ngStyle"],["wikiUnlockTips",""],["popoverList",""],[1,"doc-full-table",3,"click"],[1,"iconfont","icon-icon-crown"],[1,"collab-users"],[3,"collabUsers"],[1,"article-hidden-wrapper"],["class","outline-style",3,"active-li-styl","ngStyle",4,"ngFor","ngForOf"],[1,"outline-style",3,"ngStyle"],[1,"knowledge-nav-item",3,"hidden"],[1,"nav-item-width","text-omit"],[3,"title"],["class","split-line-top",4,"ngIf"],[1,"split-line-top"],["type","text","maxlength","1000",1,"article-title","p-l-20","p-r-20","t-a-l",3,"ngModel","readonly","ngModelChange"],[1,"collapse-all-icon","cursor-pointer",3,"title","click"],[1,"iconfont","icon",3,"ngClass"],[1,"tag-pop-box"],[1,"popover-item"],["id","additiveAttributeTip","nz-popover","","nzPopoverTrigger","click","nzPopoverPlacement","left",1,"popover-item1",3,"nzPopoverContent"],[1,"create-article-container",3,"hidden","showCacheTips","modeSwitchEnabled","toolbarContailerSelector","richTextId","type","insertContentEvent","insertTableRowsEvent","description","cacheInfo","getContentEvent","workitemInfo","username","markdownOptions","structuredTableInfo","articleAttachmentInfo","tingDesignInfo","sketchPadEnable","saveContent","tableConfigInfo","fromVision","initInstanceCallback","visionOnEditorChanged","getEditorContent","saveContentEmit","fullTableEmit","imgLoaded"],["visionEditor",""],[1,"show-preview","p-20"],[3,"scrollInEL","docContent","docType"],[1,"comment-wrapper",3,"nzTitle"],[3,"isCoe","creatorId","articleId","onlyShowAnnotation",4,"ngIf"],[3,"isCoe","creatorId","articleId","onlyShowAnnotation"],[3,"categoryId","wikiSn","model","articleDetails","templateAttrObj","templateAttrObjChange","updateAttributeValue"],["additiveAttr",""],[1,"small-btn","template-btn",3,"title","click"],[1,"iconfont","icon-comment-left-tail","f-12"],[1,"loading-wrapper"],["nzSimple","",3,"nzIndicator"],["indicatorTemplate",""],["nz-icon","","nzType","loading",2,"font-size","24px"],[1,"converting-mask"],[1,"tips"],[1,"left"],[1,"iconfont","icon-info","info-icon"],[1,"right"],[1,"title"],[1,"detail"],[1,"unlock-tips"],[1,"tip-left"],[1,"iconfont","icon-warning","icon"],[1,"tip-right"],[1,"tip-title"],[1,"tip-content"],[1,"tip-buttons"],["nz-button","",1,"refuse",3,"click"],["nz-button","",1,"cancle",3,"click"],["nz-button","",1,"save-quit",3,"click"],[1,"menu-popover-list"],[1,"menu-popover-content"],[1,"menu-popover-div"],["nz-button","","nzType","primary",1,"menu-popover-submit",3,"click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0,1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275template"](4,Oe,2,1,"div",4),r["\u0275\u0275template"](5,Se,5,3,"div",5),r["\u0275\u0275template"](6,Ee,2,1,"div",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",7),r["\u0275\u0275element"](8,"div",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",9),r["\u0275\u0275elementStart"](10,"app-category-selector",10,11),r["\u0275\u0275listener"]("selected",function(e){return t.saveArticleOrTemplate(e)})("preview",function(e){return t.preview(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",12,13),r["\u0275\u0275elementStart"](14,"div",14),r["\u0275\u0275listener"]("mouseover",function(){return t.showOutlineOver("showTip")})("mouseout",function(){return t.showOutlineOut("showTip")}),r["\u0275\u0275elementStart"](15,"div",15),r["\u0275\u0275elementStart"](16,"div",16),r["\u0275\u0275element"](17,"div",17),r["\u0275\u0275element"](18,"article-outline",18),r["\u0275\u0275element"](19,"div",19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"span",20),r["\u0275\u0275listener"]("click",function(){return t.outlineToggle()}),r["\u0275\u0275element"](21,"i",21),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](22,Ie,2,1,"div",22),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",23),r["\u0275\u0275elementStart"](24,"div",24),r["\u0275\u0275template"](25,Te,5,4,"div",25),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",26),r["\u0275\u0275elementStart"](27,"div",27),r["\u0275\u0275elementStart"](28,"input",28),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.articleTitle=e})("ngModelChange",function(){return t.articleTitleChange()}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"div"),r["\u0275\u0275template"](30,De,1,4,"input",29),r["\u0275\u0275template"](31,Ae,3,4,"div",30),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](32,ze,3,1,"div",31),r["\u0275\u0275element"](33,"div",32),r["\u0275\u0275template"](34,Re,2,21,"vision-editor",33),r["\u0275\u0275element"](35,"div",34),r["\u0275\u0275template"](36,Le,2,3,"div",35),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"div",36),r["\u0275\u0275elementStart"](38,"div",37),r["\u0275\u0275elementStart"](39,"span",38),r["\u0275\u0275listener"]("click",function(){return t.setShowTemplate(!1)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](40,"nz-tabset",39),r["\u0275\u0275listener"]("nzSelectedIndexChange",function(e){return t.activeTabIndex=e}),r["\u0275\u0275template"](41,je,2,2,"nz-tab",40),r["\u0275\u0275elementStart"](42,"nz-tab",41),r["\u0275\u0275elementStart"](43,"app-template-list",42),r["\u0275\u0275listener"]("selectTemplate",function(e){return t.selectTemplate(e)})("templateCreateShow",function(e){return t.templateCreateShow=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](44,Ve,3,6,"nz-tab",43),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"div",44),r["\u0275\u0275elementStart"](46,"div",45),r["\u0275\u0275listener"]("click",function(){return t.handleTemplate(1)}),r["\u0275\u0275pipe"](47,"translate"),r["\u0275\u0275element"](48,"i",46),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](49,Fe,3,3,"div",47),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](50,Ue,4,1,"div",48),r["\u0275\u0275template"](51,We,11,6,"div",49),r["\u0275\u0275elementStart"](52,"div",50,51),r["\u0275\u0275listener"]("scroll",function(){return t.onRemoterScroll()}),r["\u0275\u0275element"](54,"div",52),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](55,He,20,17,"ng-template",null,53,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](57,Ge,7,3,"ng-template",null,54,r["\u0275\u0275templateRefExtractor"])),2&e&&(r["\u0275\u0275styleProp"]("visibility",t.templateCreateShow?"hidden":"visible"),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](85,Qe,t.fullScreenCtrl?1/t.fullScreenZoomSize:null)),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("markdown-title",t.hiddenPreviewBtn),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.fullScreenCtrl&&!t.isFullTable),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.isFullTable),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",(null==t.collaboration?null:t.collaboration.collabUsers.length)>0),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("id",t.editorToolbarId)("hidden",t.showPreview),r["\u0275\u0275advance"](2),r["\u0275\u0275classProp"]("markdown-buttons",t.hiddenPreviewBtn),r["\u0275\u0275property"]("hidden",t.isFullTable),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("model",t.model)("categoryId",t.categoryId)("dictionaryId",t.dictionaryId)("currentDomain",t.currentDomain)("contentChanged",t.isContentChanged)("showPreview",t.showPreview)("saveBool",t.saveBool)("isCreatedOnce",t.isCreatedOnce)("fullScreenCtrl",t.fullScreenCtrl)("hiddenPreviewBtn",t.hiddenPreviewBtn)("articleDetails",t.articleDetails)("categoryDetails",t.categoryDetails)("createFrom",t.createFrom)("visibilityEditModel",t.visibilityEditModel)("showVisibilityEdit",t.showVisibilityEdit),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("hidden",t.fullScreenCtrl)("@outlineToggle",t.outlineCollapse?"closed":"open")("ngStyle",r["\u0275\u0275pureFunction1"](87,Je,t.showPreview?"hidden":"visible")),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("article-outline-index",t.outlineCollapse),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("reserve-span-show",t.outlineCollapse)("article-outline-show-wrapper",!t.outlineCollapse),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("origin",t.origin)("needBorder",!0)("isEdit",!0),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("nzTooltipTitle",t.reserveTitle),r["\u0275\u0275property"]("nzTooltipPlacement","top"),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](t.outlineCollapse?"icon-pin-down-left":"icon-pin-down"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.outlineCollapse),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngStyle",t.fullScreenCtrl?r["\u0275\u0275pureFunction0"](89,Ze):null),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("hidden",t.showPreview),r["\u0275\u0275property"]("ngStyle",t.fullScreenCtrl?r["\u0275\u0275pureFunction0"](90,et):null),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.navigatioList),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("page-style",t.isSvMode),r["\u0275\u0275property"]("ngClass","create-article"===t.model?"create-article-height":"update-article-height"),r["\u0275\u0275advance"](2),r["\u0275\u0275classProp"]("input-style",t.isSvMode),r["\u0275\u0275property"]("ngModel",t.articleTitle)("readonly",t.showPreview),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("sv-markdown-title",t.isSvMode),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.isSvMode),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.fullScreenCtrl),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.additiveAttributeTipShow),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.getArticleInfo&&t.workitemInfo),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.showPreview),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("hidden",!t.showTemplate),r["\u0275\u0275property"]("hidden",t.fullScreenCtrl)("ngStyle",r["\u0275\u0275pureFunction1"](91,Je,t.showPreview?"hidden":"visible")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("nzSelectedIndex",t.activeTabIndex),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","update-article"===t.model),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("nzTitle","\u6a21\u677f"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("currentDomain",t.currentDomain),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","create-article"===t.model||"update-article"===t.model),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("hidden",t.showTemplate),r["\u0275\u0275property"]("hidden",t.fullScreenCtrl)("ngStyle",r["\u0275\u0275pureFunction1"](93,Je,t.showPreview?"hidden":"visible")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](47,83,"TEMPLATE")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf","update-article"===t.model),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.showLoading),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==t.collaboration?null:t.collaboration.collaborationConverting),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hidden",!t.richTextRemoterShow),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](95,tt,t.richTextRemoterInnerWidth+"px")))},directives:[N.o,N.n,j.a,V.a,F.d,N.m,N.l,B.d,B.h,B.k,B.l,U.b,U.a,de,pe.a,ue.a,x.a,Z.a,me.a,he.a,ge.a,q.a,G.a,fe.a,ve.a],pipes:[D.b],styles:['.locking-tip-box[_ngcontent-%COMP%]{width:280px;background-color:#fff;padding:16px;display:flex;flex-direction:column;justify-content:space-between;border-radius:4px;box-shadow:0 0 6px rgba(0,0,0,.14);position:relative}.locking-tip-box[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%]{color:#5f5f5f;font-size:16px;margin-right:8px}.locking-tip-box[_ngcontent-%COMP%]   .tip-button[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:row-reverse}.locking-tip-box[_ngcontent-%COMP%]   .tip-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;font-size:14px;color:#fff;background-color:#23c6c8;border:none;padding:0 9px;height:28px}.locking-tip-box[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;color:rgba(0,0,0,.45);padding:8px;top:0;right:0}  .locking-tooltip .ant-tooltip-arrow .ant-tooltip-arrow-content{background-color:#fff}  .locking-tooltip .ant-tooltip-inner{padding:0;background-color:#fff;box-shadow:none}.reload-tips[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]{display:flex;padding:16px}.reload-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]{margin-right:12px;flex:0 0 auto}.reload-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:20px;color:#fa0}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]{flex:1 1 auto}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%]{font-size:16px;color:#333}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-content[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-content[_ngcontent-%COMP%]{color:#5f5f5f;font-size:14px;margin:8px 0}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:28px;line-height:28px;border-radius:4px;padding:0 11px;margin-right:12px}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.cancle[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.cancle[_ngcontent-%COMP%]{color:#23c6c8;border-color:#23c6c8}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.reload[_ngcontent-%COMP%], .reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.save-quit[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.reload[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.save-quit[_ngcontent-%COMP%]{color:#fff;border:none;background-color:#23c6c8}.wait-collab-tips[_ngcontent-%COMP%]{color:#5f5f5f;padding:18px 16px;background-color:#fff;font-size:12px;box-shadow:0 0 6px rgba(0,0,0,.14);border-radius:4px}  .notification-box.ant-notification-notice{padding:0}.create-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 126px)}.update-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 164px)}[_nghost-%COMP%]     .vditor-toolbar{background-color:#fff;border-bottom:0}[_nghost-%COMP%]     .vditor, [_nghost-%COMP%]     .vditor-ir pre.vditor-reset{border:none}[_nghost-%COMP%]     .vditor-sv{background-color:#fff}[_nghost-%COMP%]     .vditor-toolbar--pin{padding-left:0!important}[_nghost-%COMP%]     .vditor-toolbar__divider{position:relative;top:3px}[_nghost-%COMP%]     .vditor-toolbar__item{top:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped{width:30px;height:30px;padding:5px;border-radius:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped:hover{background:#dee0e2;color:#222f3e}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped input{width:30px;height:30px}[_nghost-%COMP%]     .vditor-hint button:not(.vditor-menu--disabled):hover{background-color:#dee0e2!important;color:#676a6c!important}[_nghost-%COMP%]     .vditor-menu--current{color:#23c6c8!important}[_nghost-%COMP%]     .vditor-reset h1, [_nghost-%COMP%]     .vditor-reset h2{border-bottom:0}[_nghost-%COMP%]     .vditor-ir .vditor-reset{padding:10px 35px!important}[_nghost-%COMP%]     .vditor-ir pre.vditor-reset:focus{background-color:#fff}[_nghost-%COMP%]     .ant-tabs-tab+.ant-tabs-tab{margin:0}[_nghost-%COMP%]     .toolbar .tox-editor-header{border:none}[_nghost-%COMP%]     .doc-cnt, [_nghost-%COMP%]     .md-editor textarea{min-height:900px}[_nghost-%COMP%]     .doc-cnt::-webkit-scrollbar{display:none}[_nghost-%COMP%]     .create-article-container .toolbar{position:fixed;top:10px;display:flex;justify-content:center;z-index:1}[_nghost-%COMP%]     .create-article-container .tox-toolbar__overflow{max-width:50px}[_nghost-%COMP%]     .create-article-container .box{height:100%}[_nghost-%COMP%]     .vditor-toolbar--pin{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info{position:fixed!important;top:50px;left:50%;transform:translateX(-50%);display:flex!important;justify-content:center;align-items:center;z-index:1;color:#8a6d3b;padding:2px 0;background-color:#fcf8e3;border-color:#faebcc;font-size:12px;height:36px}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info .fa-exclamation-triangle{margin-top:2px}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info .icon-cancel{margin-top:2px;padding-left:20px}.create-article-wrapper[_ngcontent-%COMP%]{overflow-y:hidden;z-index:99;position:fixed;left:0;right:0;top:0;bottom:0;overflow:hidden;background:#f9f9f9}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]{position:absolute;z-index:1;left:0;right:0;width:100%;height:50px;background:#fff;box-shadow:0 4px 6px rgba(0,0,0,.04)}.create-article-wrapper[_ngcontent-%COMP%]   .md-toolbar[_ngcontent-%COMP%]{position:relative;top:-5px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:50px;bottom:0;display:flex;overflow:auto;padding-bottom:10px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{align-self:flex-start;top:0;position:-webkit-sticky;position:sticky;flex:2 1 100px;max-width:340px;min-width:300px;overflow:hidden;height:100%}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]{height:100%;position:-webkit-sticky;position:sticky;top:0;flex:0 0 0px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{top:36px;right:16px;font-size:18px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .reserve-span-show[_ngcontent-%COMP%]{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]{min-width:24px;max-width:340px;max-height:calc(100vh - 100px);position:fixed;overflow-y:auto;margin-top:24px;padding:12px;border-radius:4px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-index[_ngcontent-%COMP%]{z-index:100}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-show[_ngcontent-%COMP%]{min-width:300px;min-height:160px;background:#fff;padding:12px;box-shadow:0 0 6px rgba(0,0,0,.08)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-show-wrapper[_ngcontent-%COMP%]{background:#f9f9f9;box-shadow:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]:hover   .reserve-span-show[_ngcontent-%COMP%]{display:block}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]:hover   .article-hidden-wrapper[_ngcontent-%COMP%]{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-hidden-wrapper[_ngcontent-%COMP%]{transform:rotateY(180deg);display:block;position:fixed;top:70px;left:15px;width:24px;max-height:calc(100vh - 280px);padding:12px 0;color:#e5e5e5;overflow:hidden;z-index:1;cursor:pointer}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-style[_ngcontent-%COMP%]{display:flex;height:20px;width:100%;margin-bottom:8px;line-height:20px;font-size:12px;font-weight:400}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-style[_ngcontent-%COMP%]:before{content:"";flex:0 0 auto;margin:auto 7px auto 0;height:2px;width:24px;padding-left:1px;background:currentColor}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]{color:#23c6c8!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon[_ngcontent-%COMP%]{position:absolute;top:25px;right:30px;z-index:10}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon.collapsed[_ngcontent-%COMP%]{transform:rotate(0deg)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]{position:absolute;top:55px;left:-40px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]{background:#23c6c8!important;height:4px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-content-styl[_ngcontent-%COMP%]{width:100%}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]{list-style:none;height:26px;line-height:26px;color:#999;font-size:12px;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%]   .li-word-styl[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]   .li-word-styl[_ngcontent-%COMP%]{position:absolute;min-width:8px;top:12px;height:2px;left:0;background:#676a6c6e;max-width:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1 1 900px;overflow-x:hidden;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:0 12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]{color:#aaa;font-size:14px;margin-left:20px;line-height:36px;display:flex}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]{display:flex}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   .nav-item-width[_ngcontent-%COMP%]{max-width:140px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   .nav-item-width[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 6px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .page[_ngcontent-%COMP%]{padding-top:12px;background-color:#fff;border:1px solid #e8e8e8;box-shadow:0 2px 8px #73737314}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .page-style[_ngcontent-%COMP%]{padding-top:0}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .create-article-height[_ngcontent-%COMP%]{min-height:calc(100vh - 62px)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .update-article-height[_ngcontent-%COMP%]{min-height:calc(100vh - 100px)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .sv-markdown-title[_ngcontent-%COMP%]{display:flex;background:#fafbfc;margin-bottom:-2px;flex:1;padding-top:12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .input-color[_ngcontent-%COMP%]{background:#fafbfc;max-width:800px;margin:0 auto;color:#434343!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1 1 auto;border:none;outline:none;font-weight:700;font-style:normal;font-size:32px;color:#23c6c8;margin-bottom:0;margin-top:0}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .input-style[_ngcontent-%COMP%]{flex:1;padding-right:0;padding-top:12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]{margin-right:18px;text-align:center;line-height:30px;flex:0 0 30px;height:30px;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:24px;vertical-align:top;transition:all .2s}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .position-child-div[_ngcontent-%COMP%]{height:1px;width:100%;background:#fff}.header-shadow[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-shadow[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%], .header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:0 0 280px}.header-shadow[_ngcontent-%COMP%]   .markdown-title[_ngcontent-%COMP%]{flex:0 0 120px}.header-shadow[_ngcontent-%COMP%]   .markdown-buttons[_ngcontent-%COMP%]{flex:0 0 280px}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{flex:1 1 auto}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .tox-toolbar__primary{display:flex;justify-content:center}.header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;font-weight:700;font-style:normal;font-size:16px;color:#676a6c}.header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .collab-users[_ngcontent-%COMP%]{margin-left:22px}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header{display:flex;align-items:center;justify-content:center}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header .md-controls{width:30px;text-align:center}.template-list[_ngcontent-%COMP%]{margin-top:20px;height:calc(100% - 40px)}.template-list[_ngcontent-%COMP%]   .icon-to-right[_ngcontent-%COMP%]{cursor:pointer;top:16px;z-index:1}.create-article-wrapper[_ngcontent-%COMP%]   .active-full-screen[_ngcontent-%COMP%]{width:100%!important;height:100%;top:0;margin-top:0!important;overflow:hidden}.create-article-wrapper[_ngcontent-%COMP%]   .content.flex-j-c[_ngcontent-%COMP%]{justify-content:center!important}.create-article-wrapper[_ngcontent-%COMP%]   .right.non-width[_ngcontent-%COMP%]{flex:0}.tag-list[_ngcontent-%COMP%]{background:#fff}.tag-manager[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;display:inline-block;width:100%;padding-bottom:12px}.small-btn-warp[_ngcontent-%COMP%]{top:0;padding-top:36px;height:100%;position:-webkit-sticky;position:sticky}.small-btn-warp[_ngcontent-%COMP%]   .small-btn[_ngcontent-%COMP%]{margin-bottom:8px;width:26px;height:22px;line-height:22px;display:flex;justify-content:center;background:#eee;color:#676a6c;cursor:pointer;border-radius:11px;position:relative;left:-4px}[_nghost-%COMP%]     .tag-list .ant-dropdown-link{margin-left:0!important}[_nghost-%COMP%]     .template-list .ant-tabs{height:100%}[_nghost-%COMP%]     .template-list .ant-tabs-content{height:100%}[_nghost-%COMP%]     .template-list #scrollParentWikiComment{height:100%;padding:0}[_nghost-%COMP%]     .template-list .comment-input{display:none}[_nghost-%COMP%]     .template-list .select-wrapper{display:none!important}[_nghost-%COMP%]     .template-list .ant-tabs-tab-active .ant-tabs-tab-btn{color:#23c6c8!important}[_nghost-%COMP%]     .template-list .ant-tabs-ink-bar{background-color:#23c6c8!important}[_nghost-%COMP%]     .template-list .ant-tabs-nav{position:relative;left:40px}[_nghost-%COMP%]     .template-list .comment-wrapper #bottomPositionWikiComment, [_nghost-%COMP%]     .template-list .comment-wrapper #topPositionWikiComment{background:transparent}[_nghost-%COMP%]     .template-list .comment-wrapper .annotation-item{background:#fff}[_nghost-%COMP%]     #previewWrapper, [_nghost-%COMP%]     .doc-cnt, [_nghost-%COMP%]     .md-editor .auto-growing:after, [_nghost-%COMP%]     .md-input{padding:20px!important}  .confirm-cancel-modal .ant-modal-content{border-radius:4px;height:160px;position:relative;box-shadow:0 0 8px rgba(0,0,0,.2)}  .confirm-cancel-modal .ant-modal-header{padding:20px 0 16px 20px;border-bottom:none}  .confirm-cancel-modal .ant-modal-header .ant-modal-title{font-size:20px;color:#333}  .confirm-cancel-modal .ant-modal-body{padding-left:20px;font-size:14px;color:#676a6c}  .confirm-cancel-modal .ant-modal-footer{position:absolute;bottom:32px;right:32px;padding:0;border-top:none}  .confirm-cancel-modal .ant-modal-footer button{margin-right:12px;margin-left:0}  .confirm-cancel-modal .ant-modal-footer button:first-child{background:#23c6c8;color:#fff}  .confirm-cancel-modal .ant-modal-footer button:last-child{margin-right:0}.loading-wrapper[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;background:hsla(0,0%,100%,.7)}.loading-wrapper[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.remote-scroll[_ngcontent-%COMP%]{position:fixed;left:0;right:0;z-index:100;bottom:0;overflow:scroll hidden}.remote-scroll[_ngcontent-%COMP%]   .remote-scroll-inner[_ngcontent-%COMP%]{width:150%;height:1px}.converting-mask[_ngcontent-%COMP%]{z-index:5000;position:fixed;left:0;right:0;top:0;bottom:0;background-color:hsla(0,0%,100%,.7)}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin-top:20px;margin-right:20px;width:330px;height:78px;display:flex;background-color:#fff;border:1px solid #eaeaea;filter:drop-shadow(rgba(0,0,0,.1) 0 2px 12px);border-radius:5px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{flex:50px 0 0;text-align:center;line-height:52px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:20px;color:#aaa}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:auto 1 1}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;color:#333;font-size:16px;line-height:50px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{color:#5f5f5f;font-size:12px;line-height:1}.tag-pop-box[_ngcontent-%COMP%]{position:relative}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#afe8e9;position:absolute;right:-11px;top:90px}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item1[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;background-color:#23c6c8;margin:3px;position:relative}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item1[_ngcontent-%COMP%]:after{content:"";display:block;width:12px;height:12px;border-radius:50%;background-color:#fff;position:absolute;top:2px;left:2px}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item2[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background-color:#fff;position:absolute;top:3px;left:3px;cursor:pointer}.menu-popover-list[_ngcontent-%COMP%]{width:260px;overflow:hidden}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-content[_ngcontent-%COMP%]{width:100%;overflow:hidden;margin-bottom:10px}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-content[_ngcontent-%COMP%]   .menu-popover-div[_ngcontent-%COMP%]{line-height:26px;margin:0;font-size:14px;cursor:pointer;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{position:relative;background:transparent;text-shadow:none;border-radius:4px}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:focus, .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:hover{outline:none}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{color:#23c6c8;border:1px solid #23c6c8}.doc-full-table[_ngcontent-%COMP%]{cursor:pointer;padding:10px 0;font-weight:400}.doc-full-table[_ngcontent-%COMP%]:hover{color:#23c6c8}.doc-full-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:rotate(90deg);display:inline-block}.doc-full-table[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}  .edit-artical-wide .mce-content-body>*{max-width:760px;margin:auto!important}  .edit-artical-wide input.article-title{max-width:736px;margin:auto;padding:5px}  .edit-artical-wide .width-table{max-width:100%!important}'],data:{animation:[Object(o.l)("outlineToggle",[Object(o.i)("open",Object(o.j)({flex:"2 1 100px","min-width":"300px"})),Object(o.i)("closed",Object(o.j)({flex:"0 0 20px","min-width":"0px"})),Object(o.k)("open => closed",[Object(o.e)("0.2s ease-out")]),Object(o.k)("closed => open",[Object(o.e)("0.2s ease-out")])]),Object(o.l)("enterAnimation2",[Object(o.i)("open",Object(o.j)({opacity:1})),Object(o.i)("closed",Object(o.j)({opacity:0})),Object(o.k)("open => closed",[Object(o.e)("0s")]),Object(o.k)("closed => open",[Object(o.e)("1s ease-in")])])]}}),t}(_.a)},Olm7:function(e,t,n){"use strict";var i=n("fywt"),o=n("IlA0"),r=n("qAkX"),a=n("UTJH"),c=function(e,t){return t.length<2?e:Object(a.a)(e,function(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(o);++i<o;)r[i]=e[i+t];return r}(t,0,-1))},l=n("Tchk"),s=n("cSlR"),d=Array.prototype.splice;t.a=function(e,t){var n=[];if(!e||!e.length)return n;var a=-1,p=[],u=e.length;for(t=Object(i.a)(t,3);++a<u;){var m=e[a];t(m,a,e)&&(n.push(m),p.push(a))}return function(e,t){for(var n=e?t.length:0,i=n-1;n--;){var a=t[n];if(n==i||a!==p){var p=a;Object(s.a)(a)?d.call(e,a,1):(u=e,m=a,m=Object(o.a)(m,u),null==(u=c(u,m))||delete u[Object(l.a)(Object(r.a)(m))])}}var u,m}(e,p),n}},QWGN:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n("A/Mn"),o=n("4P1S"),r=n("fXoL"),a=n("sYmb"),c=n("UJq8"),l=n("bNXi"),s=n("dEAy"),d=n("ofXK"),p=n("BT9m"),u=n("lR5k"),m=n("3Pt+"),h=function(){function e(e){this.translate=e}return e.prototype.transform=function(e){if(e){var t,n,i,o,r,a=function(e){return Date.parse(e.replace(/-/gi,"/"))}(e)/1e3;return r=parseInt(String((new Date).getTime()/1e3))-a,o=parseInt(String(r/86400)),i=parseInt(String(r/3600)),n=parseInt(String(r/60)),t=parseInt(r),o>0&&o<30?o+this.translate.instant("DAY_AGO"):o<=0&&i>0?i+this.translate.instant("HOURS_AGO"):i<=0&&n>0?n+this.translate.instant("MIN_AGO"):t<60?t<=0?this.translate.instant("MOMENT_AGO"):t+this.translate.instant("SECONDS_AGO"):o>=30?Math.floor(o/30)+this.translate.instant("MONTH_AGO"):void 0}},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.c))},e.\u0275pipe=r["\u0275\u0275definePipe"]({name:"dateHowLongAgo",type:e,pure:!0}),e}();function g(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate4"](""," ","",r["\u0275\u0275pipeBind1"](2,4,"REPLYING"),""," "+n.realItem.replayUserName,""," "+n.realItem.replayUserAccount,"")}}function f(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span",17),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.passedResComment," ")}}function v(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span",18),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.failedResComment," ")}}function b(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275template"](1,f,2,1,"span",15),r["\u0275\u0275template"](2,v,2,1,"span",16),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==n.realItem.status),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",-1==n.realItem.status)}}function C(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"i",22),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.deleteAnnotationComment(e.realItem)}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](1,1,"COMMON_BUTTON_DELETE"))}function y(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"i",23),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.replyAnnotationComment(e.realItem)}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](1,1,"REPLYING"))}function x(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",19),r["\u0275\u0275template"](1,C,2,3,"i",20),r["\u0275\u0275template"](2,y,2,3,"i",21),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",(null==n.currentUser?null:n.currentUser.user_id)==n.realItem.submitted_by.id),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","anonymize"!==n.realItem.commentType)}}function w(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"i",24),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.editComment(e.realItem)}),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"i",25),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.shareComment(e.realItem,e.index)}),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"i",22),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.deleteComment(e.realItem.id)}),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()}2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](2,3,"EDIT")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](4,5,"PUSH")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](6,7,"COMMON_BUTTON_DELETE")))}var _=function(){return[0,2]};function O(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",19),r["\u0275\u0275template"](1,w,7,9,"ng-container",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==n.realItem.system_add&&r["\u0275\u0275pureFunction0"](1,_).includes(n.realItem.status)&&n.realItem.submitted_by.id==n.current_user_id)}}function S(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"div",26),r["\u0275\u0275text"](2),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](null!=n.realItem&&null!=n.realItem.parentObj&&n.realItem.parentObj.content?n.realItem.parentObj.content:r["\u0275\u0275pipeBind1"](3,1,"COMMENT_IS_DELETED"))}}function E(e,t){if(1&e&&r["\u0275\u0275element"](0,"markdown",27),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",n.realItem.content)}}function M(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",28),r["\u0275\u0275elementStart"](1,"textarea",29),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).updateComment.content=e}),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",30),r["\u0275\u0275elementStart"](4,"button",31),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](2);return e.cancelEditComment(e.realItem)}),r["\u0275\u0275pipe"](5,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"button",32),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](2);return e.updateCommentContent(e.realItem)}),r["\u0275\u0275pipe"](7,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](2,4,"KNOWLEDGE_BASE_COMMENT_PLACEHOLDER")),r["\u0275\u0275property"]("ngModel",i.updateComment.content),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("textContent",r["\u0275\u0275pipeBind1"](5,6,"COMMON_BUTTON_CANCLE")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("textContent",r["\u0275\u0275pipeBind1"](7,8,"COMMON_BTN_SAVE"))}}function P(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",33),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementStart"](3,"i",34),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).showShareTip=!1}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate3"](" ",i.sharedUserInfo.name,"",i.sharedUserInfo.username,"",r["\u0275\u0275pipeBind1"](2,3,"SHARE_COMMENT_USER"),"")}}function I(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",1),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275element"](2,"user-avatar",3),r["\u0275\u0275elementStart"](3,"div",4),r["\u0275\u0275elementStart"](4,"div",5),r["\u0275\u0275element"](5,"span",6),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275template"](7,g,3,6,"span",7),r["\u0275\u0275template"](8,b,3,2,"span",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",8),r["\u0275\u0275elementStart"](10,"span",9),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"dateHowLongAgo"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"span"),r["\u0275\u0275text"](14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](15,x,3,2,"div",10),r["\u0275\u0275template"](16,O,2,2,"div",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",11),r["\u0275\u0275template"](18,S,4,3,"ng-container",7),r["\u0275\u0275template"](19,E,1,1,"markdown",12),r["\u0275\u0275template"](20,M,8,10,"div",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",11),r["\u0275\u0275template"](22,P,4,5,"div",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275attribute"]("id",n.realItem.id),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("account",n.realItem.submitted_by.account)("isAnonymous",n.realItem.anonymous)("width",25)("height",25),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("textContent",n.realItem.anonymous?r["\u0275\u0275pipeBind1"](6,16,"ANONYMOUS_POST"):n.realItem.person),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",n.realItem.replayUserName),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.isShowResComment),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](12,18,n.realItem.create_time)),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](n.realItem.create_time),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.realItem.id!=n.current_item_id&&"annotation"==n.realItem.category&&"-1"!=n.status&&n.realItem.content),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.showOpreation&&(!n.isEditingComment||n.realItem.id!=n.current_item_id)&&"wiki"==n.realItem.category),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",null==n.realItem?null:n.realItem.parent_id),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!n.isEditingComment||n.realItem.id!=n.current_item_id),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.isEditingComment&&n.realItem.id==n.current_item_id),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",n.item.id==n.comment_id&&n.showShareTip)}}var k=function(){function e(e,t,n,i,o,r){var a=this;this.translate=e,this.knowledgeService=t,this.emitService=n,this.attrPipe=i,this.notification=o,this.modal=r,this.title="knowledge-ui",this.showShareTip=!1,this.showOpreation=!0,this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(e){e&&(a.currentUser=e,a.current_user_id=e.user_id)})}return Object.defineProperty(e.prototype,"isShowResComment",{get:function(){var e;return["countersign","review","verified"].includes(null===(e=this.realItem)||void 0===e?void 0:e.commentType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"passedResComment",{get:function(){var e,t="";switch(null===(e=this.realItem)||void 0===e?void 0:e.commentType){case"countersign":t=this.translate.instant("COUNTERSIGN_RESULT_SUCCESS");break;case"review":t=this.translate.instant("REVIEW_RESULT_SUCCESS");break;case"verified":t=this.translate.instant("VERIFICATION_RESULT_SUCCESS")}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedResComment",{get:function(){var e,t="";switch(null===(e=this.realItem)||void 0===e?void 0:e.commentType){case"countersign":t=this.translate.instant("COUNTERSIGN_RESULT_FAILED");break;case"review":t=this.translate.instant("REVIEW_RESULT_FAILED");break;case"verified":t=this.translate.instant("VERIFICATION_RESULT_FAILED")}return t},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.realItem=this.showOpreation?this.item.comments[0]:this.item,this.realItem.person=this.attrPipe.transform(this.realItem.submitted_by,"person")},e.prototype.editComment=function(e){this.emitService.emit({type:"wiki-comment::editComment",comment_item:e}),this.current_item_id=e.id},e.prototype.shareComment=function(e,t){this.emitService.emit({type:"wiki-comment::shareComment",item:e,index:t})},e.prototype.deleteComment=function(e){this.emitService.emit({type:"wiki-comment::deleteComment",comment_id:e})},e.prototype.cancelEditComment=function(e){this.current_item_id=void 0,this.emitService.emit({type:"wiki-comment::cancelEditComment",item:e})},e.prototype.updateCommentContent=function(e){this.current_item_id=void 0,this.emitService.emit({type:"wiki-comment::updateCommentContent",item:e})},e.prototype.replyAnnotationComment=function(e){this.current_item_id=void 0,this.emitService.emit({type:"wiki-comment::replyAnnotationComment",item:e,commentGuid:this.commentGuid})},e.prototype.deleteAnnotationComment=function(e){var t=this;this.modal.error({nzTitle:this.translate.instant("COMMENT_DELETE_CONFIRM"),nzContent:"",nzOkText:this.translate.instant("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){t.confirmDelete(e)},nzCancelText:this.translate.instant("COMMON_BUTTON_CANCLE")})},e.prototype.confirmDelete=function(e){var t=this;this.knowledgeService.deleteAnnotationComment({comment_id:e.id,comment_guid:this.commentGuid}).subscribe(function(n){t.notification.success(t.translate.instant("DELETE_SUCCESS"),""),t.current_item_id=void 0,t.emitService.emit({type:"wiki-comment::deleteAnnotationComment",item:e,commentGuid:t.commentGuid})},function(){})},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.c),r["\u0275\u0275directiveInject"](i.b),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](l.b),r["\u0275\u0275directiveInject"](s.d))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["comment-item"]],inputs:{item:"item",index:"index",isEditingComment:"isEditingComment",updateComment:"updateComment",showOpreation:"showOpreation",status:"status",commentGuid:"commentGuid"},features:[r["\u0275\u0275ProvidersFeature"]([i.b,o.a])],decls:1,vars:1,consts:[["class","comment-item",4,"ngIf"],[1,"comment-item"],[1,"comment-top"],[1,"avatar",3,"account","isAnonymous","width","height"],[1,"name-time"],[1,"comment-user"],[3,"textContent"],[4,"ngIf"],[1,"comment-time"],[1,"m-r-5"],["class","comment-operations",4,"ngIf"],[1,"comment-content",2,"max-width","100%"],[3,"data",4,"ngIf"],["class","is-editing-comment-styl",4,"ngIf"],["class","comment-push",4,"ngIf"],["class","countersign-status countersign-status-success",4,"ngIf"],["class","countersign-status countersign-status-failed",4,"ngIf"],[1,"countersign-status","countersign-status-success"],[1,"countersign-status","countersign-status-failed"],[1,"comment-operations"],["class","operation-item iconfont icon-delete",3,"title","click",4,"ngIf"],["class","operation-item iconfont icon-comment-left-tail operation-item-f-13",3,"title","click",4,"ngIf"],[1,"operation-item","iconfont","icon-delete",3,"title","click"],[1,"operation-item","iconfont","icon-comment-left-tail","operation-item-f-13",3,"title","click"],[1,"operation-item","iconfont","icon-edit-simple",3,"title","click"],[1,"operation-item","iconfont","icon-share",3,"title","click"],[1,"more-text-hidden"],[3,"data"],[1,"is-editing-comment-styl"],[1,"textarea-comment-style",3,"ngModel","placeholder","ngModelChange"],[1,"comment-edit-btns"],[1,"btn","btn-white","btn-sm","m-r-10",3,"textContent","click"],[1,"btn","btn-info","btn-sm",3,"textContent","click"],[1,"comment-push"],[1,"user-tip-close","iconfont","icon-close",3,"click"]],template:function(e,t){1&e&&r["\u0275\u0275template"](0,I,23,20,"div",0),2&e&&r["\u0275\u0275property"]("ngIf",t.realItem&&t.realItem.content)},directives:[d.n,p.a,u.a,m.d,m.k,m.l],pipes:[a.b,h],styles:[".comment-item[_ngcontent-%COMP%]{padding:10px 10px 0}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]{display:flex;padding-bottom:10px;position:relative}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-right:10px}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]{flex:1}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]{color:#999}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]   .countersign-status[_ngcontent-%COMP%]{margin-left:10px;display:inline-block;padding:0 2px;font-size:12px;border-radius:4px}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]   .countersign-status-success[_ngcontent-%COMP%]{color:#23c6c8;background:rgba(35,198,200,.2)}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]   .countersign-status-failed[_ngcontent-%COMP%]{background:rgba(226,50,55,.2);color:#e23237}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-time[_ngcontent-%COMP%]{font-size:12px;line-height:10px;color:#999}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]{float:right;position:absolute;right:0}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-left:9px;font-size:14px}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item.active[_ngcontent-%COMP%]{display:inline-block;color:#23c6c8}.comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item-f-13[_ngcontent-%COMP%]{font-size:13px}.comment-item[_ngcontent-%COMP%]:hover   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]{display:inline-block}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{padding-left:35px}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .more-text-hidden[_ngcontent-%COMP%]{color:#999;font-size:12px;overflow-x:hidden;width:100%;text-overflow:ellipsis;white-space:nowrap;word-break:break-all;padding-bottom:1px;padding-left:5px;background:#f5f5f5;border-radius:3px}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .is-editing-comment-styl[_ngcontent-%COMP%]{max-width:100%;margin-bottom:3px}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .is-editing-comment-styl[_ngcontent-%COMP%]   .textarea-comment-style[_ngcontent-%COMP%]{width:100%;height:197px}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-update-textarea[_ngcontent-%COMP%]{height:150px;min-height:80px;width:100%;max-width:100%;border-radius:3px;display:inline-block;border-color:#d7d7d7}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-edit-btns[_ngcontent-%COMP%]{text-align:right;margin-bottom:10px;position:relative}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .user-tip-close[_ngcontent-%COMP%]{font-size:15px;color:#666;position:absolute;top:0;bottom:0;right:5px}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-push[_ngcontent-%COMP%]{background:#ffffe0;font-size:10px;position:relative}.comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}"]}),e}()},QhG9:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i=n("mrSG"),o=n("itXk"),r=n("IzEk"),a=n("fXoL"),c=n("A/Mn"),l=n("bNXi"),s=n("sYmb"),d=n("ofXK"),p=n("Nqz0"),u=n("7xxS");function m(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span",9),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().removeTag(e)}),a["\u0275\u0275text"](1,"x"),a["\u0275\u0275elementEnd"]()}}var h=function(e){return{backgroundColor:e}},g=function(e){return{color:e}};function f(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",4),a["\u0275\u0275elementStart"](1,"div",5),a["\u0275\u0275element"](2,"i",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"span",7),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,m,2,0,"span",8),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](4,h,n.color)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](6,g,n.color)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.title),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.isEdit)}}function v(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span",13),a["\u0275\u0275text"](1,"\u6dfb\u52a0\u6807\u7b7e"),a["\u0275\u0275elementEnd"]())}function b(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"a",10),a["\u0275\u0275listener"]("nzVisibleChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().dropDownVisible=e}),a["\u0275\u0275element"](1,"i",11),a["\u0275\u0275template"](2,v,2,0,"span",12),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](),o=a["\u0275\u0275reference"](4);a["\u0275\u0275property"]("nzVisible",i.dropDownVisible)("nzDropdownMenu",o),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!i.markedTag.length)}}function C(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"workitem-label-select-panel",14),a["\u0275\u0275listener"]("modeChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().labelModalMode=e})("onSelect",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().handleConfirm()})("onConfirm",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().handleLabelConfirmClick(e)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("options",i.tagList)("loading",i.selectLoading)("mode",i.labelModalMode)}}var y=function(){function e(e,t,n){this.knowledgeManageService=e,this.notification=t,this.translate=n,this.isCoe=!1,this.wikiId="",this.isEdit=!1,this.selectedTagOption=[],this.curLanguage=this.translate.currentLang||"zh",this.tagList=[],this.markedTag=[],this.selectLoading=!1,this.dropDownVisible=!1,this.labelModalMode="default"}return e.prototype.ngOnInit=function(){var e=this;if(this.isEdit){var t=[this.knowledgeManageService.getAllWikiTags()];this.wikiId&&this.isCoe&&t.push(this.knowledgeManageService.getCoeTagList(this.wikiId)),Object(o.a)(t).subscribe(function(t){var n=Object(i.g)(t,2),o=n[1];e.tagList=n[0].map(function(e){var t;return Object(i.a)(Object(i.a)({},e),{isSelected:null===(t=null==o?void 0:o.tags)||void 0===t?void 0:t.some(function(t){return t.id===e.id}),readOnly:!!e.readOnly||!1})}),e.selectedTagOption.length?(e.markedTag=e.selectedTagOption,e.tagList.forEach(function(t){e.markedTag.some(function(e){return e.id===t.id})&&(t.isSelected=!0)})):e.markedTag=e.tagList.filter(function(e){return e.isSelected})},function(){})}else this.wikiId&&this.knowledgeManageService.getCoeTagList(this.wikiId).subscribe(function(t){e.markedTag=t.tags,e.setCoeAttr(null==t?void 0:t.wikiCustomAttr1),e.setCoeAttr(null==t?void 0:t.wikiCustomAttr2),e.setCoeAttr(null==t?void 0:t.wikiCustomAttr3);var n=(null==t?void 0:t.wikiFailureMode4)||(null==t?void 0:t.wikiFailureMode2);n&&e.markedTag.push({color:"#719df5",title:"en"==e.curLanguage?n.attrTitleEn:n.attrTitleZh})},function(){})},e.prototype.setCoeAttr=function(e){e&&this.markedTag.push({color:"#EC7E69",title:"en"==this.curLanguage?e.attrTitleEn:e.attrTitleZh})},e.prototype.addTag=function(e){var t=this;this.selectLoading=!0,this.knowledgeManageService.addWikiTag(e).pipe(Object(r.a)(1)).subscribe(function(e){t.labelModalMode="default",t.selectLoading=!1,"string"!=typeof e?(t.notification.success(t.translate.instant("ADD_TAG_SUCCESS"),"",{nzDuration:1e3}),t.ngOnInit()):t.notification.error(t.translate.instant(e),"")},function(){})},e.prototype.modifyTag=function(e){var t=this;this.selectLoading=!0,this.knowledgeManageService.modifyTag(e).subscribe(function(n){if(t.labelModalMode="default",t.selectLoading=!1,"string"!=typeof n){var o=t.tagList.findIndex(function(t){return t.id===e.id}),r=t.tagList[o];t.tagList[o]=Object(i.a)(Object(i.a)({},r),e),t.notification.success(t.translate.instant("MODIFY_TAG_SUCCESS"),"",{nzDuration:1e3}),t.handleConfirm()}else t.notification.error(t.translate.instant(n),"")},function(){})},e.prototype.deleteTag=function(e){var t=this;this.knowledgeManageService.deleteTag(e.id).subscribe(function(n){t.labelModalMode="default",t.notification.success(t.translate.instant("DELETE_TAG_SUCCESS"),"",{nzDuration:1e3});var i=t.tagList.findIndex(function(t){return t.id===e.id});t.tagList.splice(i,1),t.handleConfirm()},function(){})},e.prototype.handleConfirm=function(){this.markedTag=this.tagList.filter(function(e){return e.isSelected})},e.prototype.removeTag=function(e){this.tagList.find(function(t){return t.id===e.id}).isSelected=!1,this.handleConfirm()},e.prototype.handleLabelConfirmClick=function(e){var t=e.data;switch(e.operate){case"add":this.addTag(t);break;case"update":this.modifyTag(t);break;case"delete":this.deleteTag(t)}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.b),a["\u0275\u0275directiveInject"](l.b),a["\u0275\u0275directiveInject"](s.c))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-wiki-tag-manager"]],inputs:{isCoe:"isCoe",wikiId:"wikiId",isEdit:"isEdit",selectedTagOption:"selectedTagOption"},decls:6,vars:3,consts:[["class","label-item",4,"ngFor","ngForOf"],["class","txt-999 m-l-10","nz-dropdown","","nzTrigger","click","nzPlacement","bottomCenter",3,"nzVisible","nzDropdownMenu","nzVisibleChange",4,"ngIf"],["addLabel","nzDropdownMenu"],["searchPlaceholder","\u641c\u7d22\u6807\u7b7e",3,"options","loading","mode","modeChange","onSelect","onConfirm",4,"ngIf"],[1,"label-item"],[1,"label-bg",3,"ngStyle"],[1,"label-item-arrow"],[3,"ngStyle"],["class","label-item-delete",3,"click",4,"ngIf"],[1,"label-item-delete",3,"click"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomCenter",1,"txt-999","m-l-10",3,"nzVisible","nzDropdownMenu","nzVisibleChange"],[1,"iconfont","icon-addmember","f-14"],["class","m-l-5 f-12",4,"ngIf"],[1,"m-l-5","f-12"],["searchPlaceholder","\u641c\u7d22\u6807\u7b7e",3,"options","loading","mode","modeChange","onSelect","onConfirm"]],template:function(e,t){1&e&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275template"](1,f,6,8,"div",0),a["\u0275\u0275template"](2,b,3,3,"a",1),a["\u0275\u0275elementStart"](3,"nz-dropdown-menu",null,2),a["\u0275\u0275template"](5,C,1,3,"workitem-label-select-panel",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementContainerEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.markedTag),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.isEdit),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.dropDownVisible))},directives:[d.m,d.n,p.d,d.o,p.a,p.b,u.a],styles:[".label-item[_ngcontent-%COMP%]{position:relative;font-size:12px;display:inline-block;height:18px;padding-left:10px;padding-right:13px;margin-bottom:10px;margin-left:10px}.label-item[_ngcontent-%COMP%]   .label-bg[_ngcontent-%COMP%]{opacity:.2;position:absolute;left:0;top:0;bottom:0;right:0}.label-item[_ngcontent-%COMP%]   .label-item-arrow[_ngcontent-%COMP%]{display:inline-block;position:absolute;height:100%;top:0;left:0;border:8px solid #fff;border-right-color:transparent;border-left:none}.label-item[_ngcontent-%COMP%]   .label-item-delete[_ngcontent-%COMP%]{display:none;position:absolute;right:4px;top:-3px;font-size:14px;color:#999;cursor:pointer}.label-item[_ngcontent-%COMP%]:hover   .label-item-delete[_ngcontent-%COMP%]{display:inline-block}"]}),e}()},THGc:function(e,t,n){"use strict";n.d(t,"a",function(){return W});var i=n("mrSG"),o=n("fXoL"),r=n("AA4e"),a=n("fxjG"),c=n("XNiG"),l=n("VRyK"),s=n("PqYM"),d={lang:localStorage.getItem("NG_TRANSLATE_LANG_KEY")||"zh",showinfobar:!1,defaultRowHeight:25,defaultColWidth:90,showstatisticBarConfig:{count:!0,view:!1,zoom:!0}},p={allowEdit:!1,allowCopy:!1,showtoolbar:!1,enableAddRow:!1,showtoolbarConfig:{textWrapMode:!0,frozenMode:!0,sortAndFilter:!0,findAndReplace:!0},sheetFormulaBar:!1,showsheetbarConfig:{add:!1,menu:!0,sheet:!0},cellRightClickConfig:{copy:!1,copyAs:!1,paste:!1,insertRow:!1,insertColumn:!1,deleteRow:!1,deleteColumn:!1,deleteCell:!1,hideRow:!1,hideColumn:!1,rowHeight:!1,columnWidth:!1,clear:!1,matrix:!1,sort:!1,filter:!1,chart:!1,image:!1,link:!1,data:!1,cellFormat:!1},sheetRightClickConfig:{delete:!1,copy:!1,rename:!1,color:!1,hide:!1,move:!1}},u={showtoolbarConfig:{chart:!1,pivotTable:!1,protection:!1,print:!1},cellRightClickConfig:{copy:!0,copyAs:!0,paste:!1,insertRow:!0,insertColumn:!0,deleteRow:!0,deleteColumn:!0,deleteCell:!0,hideRow:!0,hideColumn:!0,rowHeight:!0,columnWidth:!0,clear:!0,matrix:!0,sort:!0,filter:!0,chart:!1,image:!0,link:!0,data:!1,cellFormat:!1}},m=n("eIep"),h=n("1G5W"),g=n("d/Su"),f=n("hbEN"),v=n("XIp8"),b=n("UJq8"),C=n("A/Mn"),y=n("bNXi"),x=n("sYmb"),w=n("Fpfz"),_=n("dEAy"),O=n("ofXK"),S=n("3Pt+"),E=n("vTH2"),M=n("OzZK"),P=n("RwU8"),I=n("C2AL"),k=["wikiUnlockTips"],T=["categorySelector"],D=function(e){return{date:e}};function A(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",5),o["\u0275\u0275element"](1,"span",6),o["\u0275\u0275elementStart"](2,"div",7),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"span",8),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().revertCache()}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"span"),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"span",9),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().cancelCache()}),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](5,4,"RESTORE_CACHE",o["\u0275\u0275pureFunction1"](13,D,i.wikiArticleCacheData.operate_date))),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](8,7,"REVERT")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](11,9,"QUESTION_MARK")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](14,11,"DISCARD_DRAFT"),"?")}}function z(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275elementStart"](1,"div",11),o["\u0275\u0275elementStart"](2,"span",12),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().exitFullScreen()}),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,1,"FULL_SCREEN_EXIT")))}function R(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275elementStart"](1,"div",14),o["\u0275\u0275elementStart"](2,"input",15),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().excelTitle=e})("change",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().titleChange$.next()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",11),o["\u0275\u0275elementStart"](4,"app-category-selector",16,17),o["\u0275\u0275listener"]("selected",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().selectorEmit(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",i.excelTitle)("title",i.excelTitle),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("model",i.model)("categoryId",i.categoryId)("dictionaryId",i.dictionaryId)("currentDomain",i.currentDomain)}}function L(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",18),o["\u0275\u0275elementStart"](1,"div",19),o["\u0275\u0275element"](2,"i",20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",21),o["\u0275\u0275elementStart"](4,"div",22),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",23),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",24),o["\u0275\u0275elementStart"](11,"button",25),o["\u0275\u0275listener"]("click",function(){return t.$implicit.close()}),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"button",26),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"]().unlockTipsOnCancle(e)}),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"button",27),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"]().unlockTipsOnSave(e)}),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.data;o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate3"](" ",null==i?null:i.name," ",null==i?null:i.username," ",o["\u0275\u0275pipeBind1"](6,7,"WIKI_REQUEST_UNLOCK")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,9,"WIKI_UNLOCK_TIPS")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](13,11,"WIKI_UNLOCK_REFUSE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](16,13,"WIKI_UNLOCK_NO_SAVE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](19,15,"WIKI_UNLOCK_SAVE"))}}var N,j,V=function(e,t,n){return{"check-excel":e,"not-check-excel":t,"full-check-excel":n}},F=["*"],B=window.$,U=window.luckysheet,W=function(e){function t(t,n,i,r,a,l,s){var d=e.call(this)||this;return d.emitService=t,d.knowledgeService=n,d.notification=i,d.translate=r,d.visionEditorService=a,d.modal=l,d.ngZone=s,d.quickSaveCtrl=!1,d.titleChange$=new c.a,d.contentChange$=new c.a,d.cancleExit$=new c.a,d.contentSaveExit$=new c.a,d.onDestroy$=new c.a,d.container="luckysheet",d.model="create-excel",d.fullScreenCtrl=!1,d.eventEmitter=new o.EventEmitter,d.isLocalEditing=!1,d.articleAttachmentInfo={sourceId:"",sourceType:"wiki_location"},d.excelTitle="\u65b0\u5efa\u8868\u683c\u6587\u6863",d.currentLang=d.translate.currentLang||"zh",d.selectorEmit=Object(f.a)(function(e){var t=e.type;if("save"===t){var n=e.dictionaryId,i=e.parentSn;d.categoryId=d.categoryId||e.categoryId,d.dictionaryId=d.dictionaryId||n,d.parentSn=d.parentSn||i,d.save()}else if("cancelCreate"===t){var o=void 0,r=void 0;"update-excel"===d.model&&(d.newContent=d.getAllSheets(),o=Object(v.a)(d.oldContent),r=Object(v.a)(d.newContent),o.forEach(function(e){delete e.luckysheet_select_save,delete e.scrollLeft,delete e.scrollTop}),r.forEach(function(e){delete e.luckysheet_select_save,delete e.scrollLeft,delete e.scrollTop})),JSON.stringify(o)!==JSON.stringify(r)?d.modal.confirm({nzTitle:d.translate.instant("CANCLE_CONFIRM_TITLE"),nzOkText:d.translate.instant("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){d.cancelCreate()},nzCancelText:d.translate.instant("COMMON_BUTTON_CANCLE"),nzOnCancel:function(){}}):d.cancelCreate()}},1e3,{leading:!0,trailing:!1}),d}return Object(i.d)(t,e),t.prototype.cancleEdit=function(){this.cancelCreate()},t.prototype.saveEdit=function(){this.save()},Object.defineProperty(t.prototype,"articleBase",{get:function(){var e;return{id:null===(e=this.articleInfo)||void 0===e?void 0:e.id,ui_source:"1",title:this.excelTitle,category:"table"}},enumerable:!1,configurable:!0}),t.prototype.ngOnChanges=function(e){var t;!1===(null===(t=e.fullScreenCtrl)||void 0===t?void 0:t.firstChange)?Object(r.p)(U.resize):e.sn&&!e.sn.firstChange||this.addScripts()},t.prototype.ngOnInit=function(){var e=this;this.requestExcelSn(),this.emitService.eventEmit.subscribe(function(t){"dragge-div-width-change"===t.type&&requestAnimationFrame(function(){U.resize()}),"re-initExcel"!==t.type||"check-excel"!==e.model||e.checkType||e.initExcel()})},t.prototype.ngAfterViewInit=function(){this.saveInitData()},t.prototype.initSocketListen=function(){e.prototype.initSocketListen.call(this)},t.prototype.addScripts=function(){var e=this,t=window.location.origin+"/knowledge-ui/luckysheet/dist";if(document.getElementById("pluginJs")&&document.getElementById("luckysheetJs"))this.initExcel();else{var n=new Promise(function(e){var n=document.createElement("script");n.id="pluginJs",n.src=t+"/plugins/js/plugin.js",n.onload=function(){e()},document.head.appendChild(n)}),i=new Promise(function(e){var n=document.createElement("script");n.id="luckysheetJs",n.src=t+"/luckysheet.umd.js",n.onload=function(){e()},document.head.appendChild(n)});Promise.all([n,i]).then(function(){!U&&(U=window.luckysheet),e.initExcel()})}[t+"/plugins/css/pluginsCss.css",t+"/plugins/plugins.css",t+"/css/luckysheet.css",t+"/assets/iconfont/iconfont.css"].forEach(function(e){if(!document.querySelector('head link[href="'+e+'"]')){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.head.appendChild(t)}})},t.prototype.initExcel=function(){this.renderExcel(),this.initCache()},t.prototype.renderExcel=function(){var e,t,n,o,r=this,a=JSON.parse(null!==(o=null===(n=null===(t=null===(e=this.articleInfo)||void 0===e?void 0:e.paragraphs)||void 0===t?void 0:t[0])||void 0===n?void 0:n.content)&&void 0!==o?o:"[]");"check-excel"===this.model?U.create(Object(i.a)(Object(i.a)(Object(i.a)({container:this.container},d),p),{hook:{workbookCreateAfter:function(e){},rangePasteBefore:function(e,t){return!1}},data:a})):"create-excel"===this.model?U.create(Object(i.a)(Object(i.a)(Object(i.a)({container:this.container,title:this.excelTitle},d),u),{hook:{updated:function(e){r.contentChange$.next()},workbookCreateAfter:function(e){r.initQuickSave()}},data:[{name:"Sheet1",color:"",index:U.sheetmanage.generateRandomSheetIndex(),status:1,order:1,celldata:[],config:{}}]})):"update-excel"===this.model&&(this.initSocketListen(),this.sn&&(this.excelTitle=this.articleInfo.title,U.create(Object(i.a)(Object(i.a)(Object(i.a)({container:this.container},d),u),{gridKey:{sn:this.sn},loadUrl:"/devops-knowledge-management/api/wiki",hook:{updated:function(e){r.contentChange$.next()},workbookCreateAfter:function(e){r.oldContent=r.getAllSheets(),r.initQuickSave()}}}))))},t.prototype.requestExcelSn=function(){var e=this;"create-excel"===this.model&&this.knowledgeService.requestKnowledgeSn({numberType:"Knowledge_table"}).subscribe(function(t){e.createArticleSn=t[0],e.articleAttachmentInfo.sourceId=e.createArticleSn},function(){})},t.prototype.exitFullScreen=function(){this.eventEmitter.emit({type:"full-screen-exit"})},t.prototype.saveInitData=function(){N=this.categoryId,j=this.dictionaryId},t.prototype.save=function(){var e=this.getAllSheets();"create-excel"===this.model&&this.createSave(e),"update-excel"===this.model&&this.updateSave(e)},t.prototype.getAllSheets=function(){var e=U.getAllSheets();return e.forEach(function(e){e.chart&&e.chart.forEach(function(e){e.chartOptions=Object(i.a)({},window.chartmix.default.getChartJson(e.chart_id));var t=document.getElementById(e.chart_id+"_c");t.style&&(e.left=parseInt(t.style.left),e.top=parseInt(t.style.top),e.width=parseInt(t.style.width),e.height=parseInt(t.style.height))}),e.luckysheet_selection_range=[],delete e.data}),e},t.prototype.initQuickSave=function(){var e,t=this;if("create-excel"===this.model&&(null===(e=this.categorySelector)||void 0===e?void 0:e.isNullOrUndefined(this.dictionaryId))&&B("#luckysheet-input-box, #"+this.container).on("keydown",function(){t.ngZone.run(function(){return Object(g.a)(function(){t.categorySelector.showSelectCategoryDirectory=!0})})}),"update-excel"===this.model){var n=Object(f.a)(function(){t.quickSaveCtrl=!0,t.save()},1e3,{leading:!0,trailing:!1});B("#luckysheet-input-box, #"+this.container).on("keydown",function(){t.ngZone.run(function(){return Object(g.a)(n)})})}},t.prototype.initCache=function(){var e=this;this.createCacheCondition={target_sn:"",type:"create-table"},this.updateCacheCondition={target_sn:this.sn,type:"update-table"};var t=Object(l.a)(this.contentSaveExit$,this.cancleExit$),n=Object(l.a)(this.titleChange$,this.contentChange$);if("update-excel"===this.model||"create-excel"===this.model){this.queryCache();var i=n.pipe(Object(m.a)(function(){return Object(s.a)(5e3).pipe(Object(h.a)(Object(l.a)(t,n)),Object(m.a)(function(){return e.cacheRequest()}))})).subscribe();t.subscribe(function(){i.unsubscribe()})}},t.prototype.queryCache=function(){var e=this;this.visionEditorService.queryArticleCache("create-excel"===this.model?this.createCacheCondition:this.updateCacheCondition).subscribe(function(t){(null==t?void 0:t.description)&&(e.wikiArticleCacheData=t,e.isLocalEditing=!0)},function(){})},t.prototype.cacheRequest=function(){var e=this.getAllSheets(),t={title:this.excelTitle,description:JSON.stringify(e),ui_source:1};return t="create-excel"===this.model?Object(i.a)(Object(i.a)({},t),this.createCacheCondition):Object(i.a)(Object(i.a)({},t),this.updateCacheCondition),this.visionEditorService.updateArticleCache(t)},t.prototype.revertCache=function(){var e=this;this.modal.warning({nzTitle:this.translate.instant("REVERT_CACHE_TIP"),nzOkText:this.translate.instant("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){e.revertCacheConfirm()},nzCancelText:this.translate.instant("COMMON_BUTTON_CANCLE"),nzOnCancel:function(){}})},t.prototype.cancelCache=function(){var e=this,t={title:this.excelTitle,description:"",ui_source:1};t="create-excel"===this.model?Object(i.a)(Object(i.a)({},t),this.createCacheCondition):Object(i.a)(Object(i.a)({},t),this.updateCacheCondition),this.visionEditorService.updateArticleCache(t).subscribe(function(t){e.wikiArticleCacheData=null,e.isLocalEditing=!1},function(){e.isLocalEditing=!1})},t.prototype.revertCacheConfirm=function(){var e=U.getAllSheets().map(function(e){return e.index});JSON.parse(this.wikiArticleCacheData.description).forEach(function(e){e.index=U.sheetmanage.generateRandomSheetIndex(),U.sheetmanage.createSheetbydata(e,!0,!1)}),this.excelTitle=this.wikiArticleCacheData.title,e.forEach(function(e){U.sheetmanage.deleteSheet(e)}),this.isLocalEditing=!1},t.prototype.createSave=function(e){var t=this,n=[{title:this.excelTitle,description:JSON.stringify(e),category:"table",parent_id:Number(this.dictionaryId),kanban_id:this.categoryId,ui_source:1,assigned_domain_id:Number(this.currentDomain),sn:this.createArticleSn}];this.knowledgeService.createArticleFloder(n).subscribe(function(e){var n=e.data,i=n.success,o=n.failed;if(200===e.code){if(i.length>0){var r=i[0];t.emitService.emit({type:"add-document",sn:r.sn,parentSn:t.parentSn,categoryId:r.kanban_id}),t.contentSaveExit$.next()}o.length>0&&(t.notification.error(t.translate.instant(String(o[0].code)),""),t.categoryId=N,t.dictionaryId=j)}},function(){})},t.prototype.updateSave=function(e){var t=this,n=Object(i.a)(Object(i.a)({},this.articleBase),{description:JSON.stringify(e)}),o=this.categorySelector.versionDetail;o&&!this.quickSaveCtrl&&(n.revision_record=o),this.knowledgeService.saveArticle([n]).subscribe(function(n){t.quickSaveCtrl||(t.categorySelector.versionDetail=null);var i=n.success,o=n.failed,r=n.unmodify;((null==i?void 0:i.length)||(null==r?void 0:r.length))&&(t.quickSaveCtrl?(t.quickSaveCtrl=!1,t.notification.success(t.translate.instant("UPDATE_SUCCESS"),"",{nzDuration:1500})):(t.emitService.emit({type:"excel-update-finished",title:t.excelTitle,sn:t.sn}),t.onDestroy$.next(),t.contentSaveExit$.next()),t.oldContent=e),(null==o?void 0:o.length)&&t.notification.error(t.translate.instant("SAVEED_FAILED"),"")},function(){})},t.prototype.cancelCreate=function(){this.cancleExit$.next(),this.emitService.emit({type:"excel::wiki-closeModel"}),"update-excel"===this.model&&this.onDestroy$.next()},t.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete(),this.cancleExit$.next()},t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](b.a),o["\u0275\u0275directiveInject"](C.b),o["\u0275\u0275directiveInject"](y.b),o["\u0275\u0275directiveInject"](x.c),o["\u0275\u0275directiveInject"](w.a),o["\u0275\u0275directiveInject"](_.d),o["\u0275\u0275directiveInject"](o.NgZone))},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["app-excel-create"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](k,1),o["\u0275\u0275viewQuery"](T,1)),2&e){var n=void 0;o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.wikiUnlockTipsTemplateRef=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.categorySelector=n.first)}},inputs:{container:"container",checkType:"checkType",model:"model",fullScreenCtrl:"fullScreenCtrl",sn:"sn",articleInfo:"articleInfo",categoryId:"categoryId",dictionaryId:"dictionaryId",currentDomain:"currentDomain",parentSn:"parentSn"},outputs:{eventEmitter:"eventEmitter"},features:[o["\u0275\u0275InheritDefinitionFeature"],o["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:F,decls:7,vars:9,consts:[[1,"excel-component-style"],["class","localhost-info",4,"ngIf"],["class","full-buttons",4,"ngIf"],["class","header-shadow",4,"ngIf"],["wikiUnlockTips",""],[1,"localhost-info"],[1,"fa","fa-exclamation-triangle","font-import-color"],[1,"font-import","block-inline"],[1,"edit-item","f-weight6","font-import","font-import-color",3,"click"],[1,"m-l-3","pull-right","pointer-cursor","font-import","f-14","give-up-draft",3,"click"],[1,"full-buttons"],[1,"buttons","m-r-12"],[1,"cursor-pointer","cancel","position-r",3,"click"],[1,"header-shadow"],[1,"header-input"],["type","text",3,"ngModel","title","ngModelChange","change"],["isTable","true",3,"model","categoryId","dictionaryId","currentDomain","selected"],["categorySelector",""],[1,"unlock-tips"],[1,"tip-left"],[1,"iconfont","icon-warning","icon"],[1,"tip-right"],[1,"tip-title"],[1,"tip-content"],[1,"tip-buttons"],["nz-button","",1,"refuse",3,"click"],["nz-button","",1,"cancle",3,"click"],["nz-button","",1,"save-quit",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275projectionDef"](),o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,A,15,15,"div",1),o["\u0275\u0275template"](2,z,6,3,"div",2),o["\u0275\u0275template"](3,R,6,6,"div",3),o["\u0275\u0275projection"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,L,20,17,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275classMap"](o["\u0275\u0275pureFunction3"](5,V,"check-excel"===t.model&&!t.fullScreenCtrl,"check-excel"!==t.model,t.fullScreenCtrl)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isLocalEditing),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","check-excel"===t.model&&t.fullScreenCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","check-excel"!==t.model))},directives:[O.n,S.d,S.k,S.l,E.a,M.a,P.a,I.a],pipes:[x.b],styles:[".locking-tip-box{width:280px;background-color:#fff;padding:16px;display:flex;flex-direction:column;justify-content:space-between;border-radius:4px;box-shadow:0 0 6px rgba(0,0,0,.14);position:relative}.locking-tip-box .tip-title{color:#5f5f5f;font-size:16px;margin-right:8px}.locking-tip-box .tip-button{margin-top:20px;display:flex;flex-direction:row-reverse}.locking-tip-box .tip-button button{border-radius:4px;font-size:14px;color:#fff;background-color:#23c6c8;border:none;padding:0 9px;height:28px}.locking-tip-box .close-icon{cursor:pointer;position:absolute;color:rgba(0,0,0,.45);padding:8px;top:0;right:0}::ng-deep .locking-tooltip .ant-tooltip-arrow .ant-tooltip-arrow-content{background-color:#fff}::ng-deep .locking-tooltip .ant-tooltip-inner{padding:0;background-color:#fff;box-shadow:none}.reload-tips,.unlock-tips{display:flex;padding:16px}.reload-tips .tip-left,.unlock-tips .tip-left{margin-right:12px;flex:0 0 auto}.reload-tips .tip-left .icon,.unlock-tips .tip-left .icon{font-size:20px;color:#fa0}.reload-tips .tip-right,.unlock-tips .tip-right{flex:1 1 auto}.reload-tips .tip-right .tip-title,.unlock-tips .tip-right .tip-title{font-size:16px;color:#333}.reload-tips .tip-right .tip-content,.unlock-tips .tip-right .tip-content{color:#5f5f5f;font-size:14px;margin:8px 0}.reload-tips .tip-right .tip-buttons,.unlock-tips .tip-right .tip-buttons{display:flex;justify-content:flex-end}.reload-tips .tip-right .tip-buttons button,.unlock-tips .tip-right .tip-buttons button{height:28px;line-height:28px;border-radius:4px;padding:0 11px;margin-right:12px}.reload-tips .tip-right .tip-buttons button.cancle,.unlock-tips .tip-right .tip-buttons button.cancle{color:#23c6c8;border-color:#23c6c8}.reload-tips .tip-right .tip-buttons button.reload,.reload-tips .tip-right .tip-buttons button.save-quit,.unlock-tips .tip-right .tip-buttons button.reload,.unlock-tips .tip-right .tip-buttons button.save-quit{color:#fff;border:none;background-color:#23c6c8}.wait-collab-tips{color:#5f5f5f;padding:18px 16px;background-color:#fff;font-size:12px;box-shadow:0 0 6px rgba(0,0,0,.14);border-radius:4px}::ng-deep .notification-box.ant-notification-notice{padding:0}.excel-component-style.full-check-excel,.excel-component-style.not-check-excel{z-index:99;position:fixed;left:0;right:0;top:0;bottom:0;overflow:hidden;background:#f9f9f9}.excel-component-style.check-excel{position:absolute;z-index:1;left:0;right:0;top:0;bottom:0;overflow:hidden;background:#f9f9f9}.excel-component-style .localhost-info{position:fixed;top:7px;left:50%;transform:translateX(-50%);height:36px;display:flex;align-items:center;justify-content:center;z-index:2;color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc;font-size:12px;padding:5px 5px 6px}.excel-component-style .localhost-info .block-inline{display:inline}.excel-component-style .localhost-info .font-import-color{color:#e45f5f}.excel-component-style .localhost-info .font-import{padding-left:5px}.excel-component-style .localhost-info .give-up-draft{padding-left:0;margin-left:0;text-decoration:underline;color:#909399}.excel-component-style .full-buttons{position:absolute;right:0;top:6px;z-index:1}.excel-component-style .header-shadow{position:absolute;width:100%;height:50px;padding:0 15px 0 20px;display:flex;justify-content:space-between;align-items:center}.excel-component-style .header-shadow .header-input input{outline:none;max-width:200px;border:none;font-size:20px;font-weight:700;background:#f9f9f9}.excel-component-style .header-shadow .title{left:0;font-weight:700;font-style:normal;font-size:16px;color:#676a6c}.excel-component-style .header-shadow+.luckysheet-container{height:calc(100% - 50px);margin-top:50px}.excel-component-style .buttons .cancel{padding:0 12px;border-radius:3px;display:inline-block;height:30px;line-height:30px;background:#eee;color:#676a6c}.excel-component-style .luckysheet-container{width:100%;height:100%}.excel-component-style .luckysheet-container td,.excel-component-style .luckysheet-container th{border:none;padding:0}div#luckysheet-input-box{z-index:101}"],encapsulation:2}),t}(a.a)},TTUg:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("fXoL"),o=n("tyNb"),r=n("UJq8"),a=n("e49q"),c=function(){function e(e,t,n,i){var o=this;this.activatedRoute=e,this.router=t,this.emitService=n,this.globalVariablesService=i,this.cdkDomsArr=[],this.handleCreateWorkitemEventOutput=function(e){var t=e.detail.event;"workitem:detail:exit"===t&&(o.router.navigate(["../../"],{relativeTo:o.activatedRoute}),o.emitService.emit({event:t}),o.createCustomElement.removeEventListener("eventOutput",o.handleCreateWorkitemEventOutput)),"workitem:delete"===t&&o.emitService.emit(e.detail)},this.workitemNumber=this.activatedRoute.snapshot.paramMap.get("workitemNumber")}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.paramMap.subscribe(function(t){e.domainId=Number(e.activatedRoute.snapshot.parent.parent.params.domain_id)}),this.emitService.emit({type:"wiki-workitem-detail-show",data:!0})},e.prototype.ngOnDestroy=function(){this.emitService.emit({type:"wiki-workitem-detail-show",data:!1})},e.prototype.ngAfterViewInit=function(){this.containerDom=document.querySelector("#ce-workitem-detail-wrapper"),this.createNewWorkItem()},e.prototype.createNewWorkItem=function(){var e=this;System.import("vision-workitem-ce").then(function(){e.globalVariablesService.saveAllCdks(e.cdkDomsArr),e.createCustomElement=document.createElement("ce-workitem-detail"),e.createCustomElement.setAttribute("workitem-number",e.workitemNumber),e.containerDom.appendChild(e.createCustomElement),setTimeout(function(){e.globalVariablesService.saveAllCdks(e.cdkDomsArr),e.createCustomElement.addEventListener("eventOutput",e.handleCreateWorkitemEventOutput)})})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](o.f),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["workitem-detail-adapter"]],decls:1,vars:0,consts:[["id","ce-workitem-detail-wrapper"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"div",0)},styles:[""]}),e}()},TgVB:function(e,t,n){"use strict";n.d(t,"a",function(){return Ue});var i=n("mrSG"),o=n("hbEN"),r=n("XIp8"),a=n("HI9p"),c=n("CpTu"),l=n("1G5W"),s=n("6eBy"),d=n("XNiG"),p=n("itXk"),u=n("l5mm"),m=n("PqYM"),h=n("VRyK"),g=n("LRne"),f=n("xgIS"),v=n("cp0P"),b=n("R0Ic"),C=n("fxjG"),y=n("d/Su"),x=n("A/Mn"),w=n("y7eE"),_=n("AWuS"),O=n("fXoL"),S=n("3OLy"),E=n("bNXi"),M=n("tyNb"),P=n("sYmb"),I=n("UJq8"),k=n("/Kk4"),T=n("Fpfz"),D=n("ofXK"),A=n("3Pt+"),z=n("vTH2"),R=n("cbLU"),L=n("nJia"),N=n("+oEP"),j=n("KupA"),V=n("JXZa"),F=n("r6kV"),B=n("FwiY"),U=n("C2AL"),W=n("mXSW"),H=n("oyxB"),G=n("xGaz"),q=n("IVlV"),$=n("qAZ0"),K=n("OzZK"),X=n("RwU8"),Y=["tagManager"],Q=["createWorkitemArticleWrapper"],J=["richTextRemoterScroll"],Z=["wikiUnlockTips"],ee=["categorySelector"];function te(e,t){if(1&e&&(O["\u0275\u0275elementStart"](0,"div",35),O["\u0275\u0275text"](1),O["\u0275\u0275elementEnd"]()),2&e){var n=O["\u0275\u0275nextContext"]();O["\u0275\u0275advance"](1),O["\u0275\u0275textInterpolate"](n.title)}}function ne(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",36),O["\u0275\u0275listener"]("click",function(){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().closeFullTable()}),O["\u0275\u0275element"](1,"i",37),O["\u0275\u0275elementStart"](2,"span"),O["\u0275\u0275text"](3),O["\u0275\u0275pipe"](4,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()}2&e&&(O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate"](O["\u0275\u0275pipeBind1"](4,1,"BACK_ARTICLE")))}function ie(e,t){if(1&e&&O["\u0275\u0275element"](0,"div",38),2&e){var n=t.$implicit,i=O["\u0275\u0275nextContext"]();O["\u0275\u0275classMap"](null==n?null:n.uuid),O["\u0275\u0275property"]("id",null==n?null:n.uuid)("hidden",i.showPreview||i.currentToolbarId!=(null==n?null:n.uuid))}}function oe(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",39),O["\u0275\u0275elementStart"](1,"app-category-selector",40,41),O["\u0275\u0275listener"]("selected",function(e){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().saveArticleOrTemplateHandler(e)})("preview",function(e){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().preview(e)}),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()}if(2&e){var i=O["\u0275\u0275nextContext"]();O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("model",i.model)("categoryId",i.categoryId)("dictionaryId",i.dictionaryId)("currentDomain",i.currentDomain)("contentChanged",i.isContentChanged)("showPreview",i.showPreview)("wikiEditFunction",i.wikiEditFunction)("saveBool",i.saveBool)("isCreatedOnce",i.isCreatedOnce)("fullScreenCtrl",i.fullScreenCtrl)}}var re=function(e){return{"padding-left":e}};function ae(e,t){if(1&e&&O["\u0275\u0275element"](0,"div",51),2&e){var n=t.$implicit,i=O["\u0275\u0275nextContext"](3);O["\u0275\u0275classProp"]("active-li-styl",n.titleId==i.scrollTitleId),O["\u0275\u0275property"]("ngStyle",O["\u0275\u0275pureFunction1"](3,re,3*n.indentationLevel+"px"))}}function ce(e,t){if(1&e&&(O["\u0275\u0275elementStart"](0,"div",49),O["\u0275\u0275template"](1,ae,1,5,"div",50),O["\u0275\u0275elementEnd"]()),2&e){var n=O["\u0275\u0275nextContext"](2);O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngForOf",n.articleOutlineArr)}}var le=function(e){return{visibility:e}};function se(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",42),O["\u0275\u0275listener"]("mouseover",function(){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().showOutlineOver("showTip")})("mouseout",function(){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().showOutlineOut("showTip")}),O["\u0275\u0275elementStart"](1,"div",43),O["\u0275\u0275elementStart"](2,"div",44),O["\u0275\u0275element"](3,"article-outline",45),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](4,"span",46),O["\u0275\u0275listener"]("click",function(){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().outlineToggle()}),O["\u0275\u0275element"](5,"i",47),O["\u0275\u0275elementEnd"](),O["\u0275\u0275template"](6,ce,2,1,"div",48),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()}if(2&e){var i=O["\u0275\u0275nextContext"]();O["\u0275\u0275property"]("hidden",i.fullScreenCtrl)("@outlineToggle",i.outlineCollapse?"closed":"open")("ngStyle",O["\u0275\u0275pureFunction1"](16,le,i.showPreview?"hidden":"visible")),O["\u0275\u0275advance"](1),O["\u0275\u0275classProp"]("article-outline-index",i.outlineCollapse),O["\u0275\u0275advance"](1),O["\u0275\u0275classProp"]("reserve-span-show",i.outlineCollapse)("article-outline-show-wrapper",!i.outlineCollapse),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("origin",i.origin)("needBorder",!0),O["\u0275\u0275advance"](1),O["\u0275\u0275propertyInterpolate"]("nzTooltipTitle",i.reserveTitle),O["\u0275\u0275property"]("nzTooltipPlacement","top"),O["\u0275\u0275advance"](1),O["\u0275\u0275classMap"](i.outlineCollapse?"icon-pin-down-left":"icon-pin-down"),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",i.outlineCollapse)}}function de(e,t){1&e&&(O["\u0275\u0275elementStart"](0,"div",56),O["\u0275\u0275text"](1,"/"),O["\u0275\u0275elementEnd"]())}function pe(e,t){if(1&e&&(O["\u0275\u0275elementStart"](0,"div",52),O["\u0275\u0275elementStart"](1,"div",53),O["\u0275\u0275elementStart"](2,"span",54),O["\u0275\u0275text"](3),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275template"](4,de,2,0,"div",55),O["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.last,o=O["\u0275\u0275nextContext"]();O["\u0275\u0275property"]("hidden",o.fullScreenCtrl),O["\u0275\u0275advance"](2),O["\u0275\u0275property"]("title",null==n?null:n.title),O["\u0275\u0275advance"](1),O["\u0275\u0275textInterpolate1"]("",null==n?null:n.title," "),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",!i)}}function ue(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",57),O["\u0275\u0275listener"]("click",function(){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().onFullWidthToggle()}),O["\u0275\u0275pipe"](1,"translate"),O["\u0275\u0275element"](2,"i",58),O["\u0275\u0275elementEnd"]()}if(2&e){var i=O["\u0275\u0275nextContext"]();O["\u0275\u0275property"]("title",O["\u0275\u0275pipeBind1"](1,3,i.allCollapse?"FULL_SCREEN_EXIT":"FULL_SCREEN")),O["\u0275\u0275advance"](2),O["\u0275\u0275classMap"](i.allCollapse?"icon-horizon-collapse":"icon-horizon-expand")}}function me(e,t){if(1&e&&(O["\u0275\u0275elementStart"](0,"div",59),O["\u0275\u0275elementStart"](1,"div",60),O["\u0275\u0275element"](2,"div",61),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()),2&e){O["\u0275\u0275nextContext"]();var n=O["\u0275\u0275reference"](38);O["\u0275\u0275advance"](2),O["\u0275\u0275property"]("nzPopoverContent",n)}}function he(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",68),O["\u0275\u0275elementStart"](1,"input",69),O["\u0275\u0275listener"]("ngModelChange",function(e){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().$implicit.title=e}),O["\u0275\u0275pipe"](2,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](3,"h1",70),O["\u0275\u0275text"](4),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()}if(2&e){var i=O["\u0275\u0275nextContext"]().$implicit,o=O["\u0275\u0275nextContext"]();O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("placeholder",O["\u0275\u0275pipeBind1"](2,6,"UNNAMED_PARAGRAPH"))("ngModel",i.title)("id",(null==i?null:i.uuid)+"-input")("hidden",i.isDeleted)("readonly","CLOUDDEVOPS_COE"===(null==o.articleDetails?null:o.articleDetails.source_system)),O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate"](i.title)}}function ge(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"vision-editor",71),O["\u0275\u0275listener"]("editorInit",function(e){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"](2).editorInitHandler(e)})("initInstanceCallback",function(){O["\u0275\u0275restoreView"](n);var e=O["\u0275\u0275nextContext"]().$implicit;return O["\u0275\u0275nextContext"]().initInstanceCallbackHandler(e)})("visionOnEditorChanged",function(e){O["\u0275\u0275restoreView"](n);var t=O["\u0275\u0275nextContext"]().$implicit,i=O["\u0275\u0275nextContext"]();return i.getArticleOutlineDelay(),i.descriptionChange(e,t)})("getEditorContent",function(e){O["\u0275\u0275restoreView"](n);var t=O["\u0275\u0275nextContext"]().$implicit;return O["\u0275\u0275nextContext"]().descriptionChange(e,t)})("focusOnEditor",function(e){O["\u0275\u0275restoreView"](n);var t=O["\u0275\u0275nextContext"]().$implicit;return O["\u0275\u0275nextContext"]().focusOnEditorHandler(e,t)})("saveContentEmit",function(){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"](2).saveAutomatic()})("fullTableEmit",function(e){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"](2).fullTableEmit(e)})("imgLoaded",function(e){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"](2).imgLoadedHanlder(e)}),O["\u0275\u0275elementEnd"]()}if(2&e){var i=O["\u0275\u0275nextContext"]().$implicit,o=O["\u0275\u0275nextContext"]();O["\u0275\u0275property"]("tab",i)("description",o.changeContentMode(i.description,"edit"))("hidden",i.isDeleted)("toolbarContailerSelector","#"+(null==i?null:i.uuid))("richTextId",null==i?null:i.editorID)("type","1"==(null==i?null:i.ui_source)?"rich-text":"markdown")("insertContentEvent",o.insertContentEventSubject.asObservable())("getContentEvent",i.getContentEventSubject.asObservable())("refreshContentEvent",i.refreshContentEventSubject.asObservable())("workitemInfo",o.isEventReport?null:o.workitemInfo)("username",o.currentUsername)("structuredTableInfo",!o.isEventReport&&i.structuredTableInfo&&i.structuredTableInfo.contentNumber?i.structuredTableInfo:null)("markdownOptions",o.mdOptions)("saveContent",!0)("tableConfigInfo",o.tableConfigInfo)("articleAttachmentInfo",o.articleAttachmentInfo)("tingDesignInfo",o.tingDesignInfo)("readonly",null==i?null:i.readonly)}}function fe(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",72),O["\u0275\u0275listener"]("dblclick",function(){O["\u0275\u0275restoreView"](n);var e=O["\u0275\u0275nextContext"]().$implicit;return O["\u0275\u0275nextContext"]().resetTab(e)}),O["\u0275\u0275elementStart"](1,"div",73),O["\u0275\u0275elementStart"](2,"span"),O["\u0275\u0275text"](3),O["\u0275\u0275pipe"](4,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](5,"span",74),O["\u0275\u0275text"](6),O["\u0275\u0275pipe"](7,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](8,"div",75),O["\u0275\u0275text"](9),O["\u0275\u0275pipe"](10,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()}if(2&e){var i=O["\u0275\u0275nextContext"]().$implicit;O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate"](i.title?i.title:O["\u0275\u0275pipeBind1"](4,3,"UNNAMED_PARAGRAPH")),O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate"](O["\u0275\u0275pipeBind1"](7,5,"TAB_DELETED_TIP")),O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate1"](" ",O["\u0275\u0275pipeBind1"](10,7,"DOUBLE_CLICK_RESET")," ")}}function ve(e,t){1&e&&(O["\u0275\u0275elementStart"](0,"div",76),O["\u0275\u0275elementStart"](1,"div",77),O["\u0275\u0275element"](2,"i",78),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](3,"div",79),O["\u0275\u0275elementStart"](4,"div",80),O["\u0275\u0275text"](5),O["\u0275\u0275pipe"](6,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](7,"div",81),O["\u0275\u0275text"](8),O["\u0275\u0275pipe"](9,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()),2&e&&(O["\u0275\u0275advance"](2),O["\u0275\u0275property"]("nzTheme","fill"),O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate"](O["\u0275\u0275pipeBind1"](6,3,"TAB_DELETE_CONFIRM_TITLE")),O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate"](O["\u0275\u0275pipeBind1"](9,5,"TAB_DELETE_CONFIRM_CONTENT")))}function be(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",62),O["\u0275\u0275listener"]("mouseover",function(){O["\u0275\u0275restoreView"](n);var e=t.$implicit,i=O["\u0275\u0275nextContext"]();return!i.strictTplSource.includes(null==i.articleDetails?null:i.articleDetails.source_system)&&(e.showDelete=!0)})("mouseout",function(){return t.$implicit.showDelete=!1}),O["\u0275\u0275template"](1,he,5,8,"div",63),O["\u0275\u0275template"](2,ge,1,18,"vision-editor",64),O["\u0275\u0275template"](3,fe,11,9,"div",65),O["\u0275\u0275elementStart"](4,"span",66),O["\u0275\u0275listener"]("nzOnConfirm",function(){O["\u0275\u0275restoreView"](n);var e=t.$implicit;return O["\u0275\u0275nextContext"]().deleteTab(e)}),O["\u0275\u0275pipe"](5,"translate"),O["\u0275\u0275pipe"](6,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275template"](7,ve,10,7,"ng-template",null,67,O["\u0275\u0275templateRefExtractor"]),O["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=O["\u0275\u0275reference"](8),r=O["\u0275\u0275nextContext"]();O["\u0275\u0275property"]("hidden",r.showPreview||!i.showEditor),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf","document"===r.categoryType&&"PRD"!==r.category.classify),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",r.workitemInfo),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",i.isDeleted&&!i.isCreated),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("hidden",!i.showDelete||i.isDeleted)("nzPopconfirmTitle",o)("nzOkText",O["\u0275\u0275pipeBind1"](5,8,"COMMON_BUTTON_CONFIRM"))("nzCancelText",O["\u0275\u0275pipeBind1"](6,10,"COMMON_BUTTON_CANCLE"))}}function Ce(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",82),O["\u0275\u0275listener"]("click",function(){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().createNewParagraph()}),O["\u0275\u0275element"](1,"span",83),O["\u0275\u0275elementStart"](2,"span"),O["\u0275\u0275text"](3),O["\u0275\u0275pipe"](4,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()}2&e&&(O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate"](O["\u0275\u0275pipeBind1"](4,1,"CREATE_NEW_PARAGRAPH")))}function ye(e,t){if(1&e&&(O["\u0275\u0275elementStart"](0,"div",84),O["\u0275\u0275element"](1,"html-render",85),O["\u0275\u0275elementEnd"]()),2&e){var n=O["\u0275\u0275nextContext"](),i=O["\u0275\u0275reference"](9);O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("scrollInEL",i)("docContent",n.articleDescription)("docType","rich-text")}}function xe(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"li",95),O["\u0275\u0275listener"]("click",function(){O["\u0275\u0275restoreView"](n);var e=t.$implicit;return O["\u0275\u0275nextContext"](3).gotoWikiDetail(e)}),O["\u0275\u0275elementStart"](1,"div",96),O["\u0275\u0275element"](2,"i",97),O["\u0275\u0275elementStart"](3,"span",54),O["\u0275\u0275text"](4),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](5,"div",98),O["\u0275\u0275elementStart"](6,"span",99),O["\u0275\u0275text"](7),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=O["\u0275\u0275nextContext"](3);O["\u0275\u0275classProp"]("hover-cursor-pointer",!(null!=o.wikiEditFunction&&o.wikiEditFunction.editFrom)),O["\u0275\u0275advance"](3),O["\u0275\u0275property"]("title",i.title),O["\u0275\u0275advance"](1),O["\u0275\u0275textInterpolate"](null==i?null:i.title),O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate"]("#"+(null==i?null:i.number))}}function we(e,t){if(1&e&&(O["\u0275\u0275elementStart"](0,"nz-tab",92),O["\u0275\u0275pipe"](1,"translate"),O["\u0275\u0275elementStart"](2,"div",93),O["\u0275\u0275elementStart"](3,"ul"),O["\u0275\u0275template"](4,xe,8,5,"li",94),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()),2&e){var n=O["\u0275\u0275nextContext"](2);O["\u0275\u0275property"]("nzTitle",O["\u0275\u0275pipeBind1"](1,2,"SELECTED_FEATURE_WORK")),O["\u0275\u0275advance"](4),O["\u0275\u0275property"]("ngForOf",n.workitemList)}}function _e(e,t){if(1&e&&O["\u0275\u0275element"](0,"article-wiki-comment",102),2&e){var n=O["\u0275\u0275nextContext"](3);O["\u0275\u0275property"]("isCoe",!1)("creatorId",n.creatorId)("articleId",n.id)("onlyShowAnnotation",!0)("currentDomain",n.currentDomain)}}function Oe(e,t){if(1&e&&(O["\u0275\u0275elementStart"](0,"nz-tab",100),O["\u0275\u0275pipe"](1,"translate"),O["\u0275\u0275template"](2,_e,1,5,"article-wiki-comment",101),O["\u0275\u0275elementEnd"]()),2&e){var n=O["\u0275\u0275nextContext"](2);O["\u0275\u0275property"]("nzTitle",O["\u0275\u0275pipeBind1"](1,2,"ANNOTATION")),O["\u0275\u0275advance"](2),O["\u0275\u0275property"]("ngIf","update-article"===n.model)}}function Se(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"nz-tab",92),O["\u0275\u0275elementStart"](1,"app-additive-attribute",103),O["\u0275\u0275listener"]("updateAttributeValue",function(e){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"](2).setAttributeValue(e)}),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()}if(2&e){var i=O["\u0275\u0275nextContext"](2);O["\u0275\u0275property"]("nzTitle","\u9644\u52a0\u5c5e\u6027"),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("wikiSn",i.sn)("model",i.model)("articleDetails",i.articleDetails)}}var Ee=function(){return["create-article","update-article"]};function Me(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",86),O["\u0275\u0275elementStart"](1,"div",87),O["\u0275\u0275elementStart"](2,"span",88),O["\u0275\u0275listener"]("click",function(){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().setShowTemplate(!1)}),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](3,"nz-tabset",89),O["\u0275\u0275listener"]("nzSelectedIndexChange",function(e){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().activeTabIndex=e}),O["\u0275\u0275template"](4,we,5,4,"nz-tab",90),O["\u0275\u0275template"](5,Oe,3,4,"nz-tab",91),O["\u0275\u0275template"](6,Se,2,4,"nz-tab",90),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()}if(2&e){var i=O["\u0275\u0275nextContext"]();O["\u0275\u0275classProp"]("hidden",!i.showTemplate),O["\u0275\u0275property"]("hidden",i.fullScreenCtrl)("ngStyle",O["\u0275\u0275pureFunction1"](8,le,i.showPreview?"hidden":"visible")),O["\u0275\u0275advance"](3),O["\u0275\u0275property"]("nzSelectedIndex",i.activeTabIndex),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf","CLOUDDEVOPS_CCB"!==(null==i.articleDetails?null:i.articleDetails.source_system)),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf","update-article"===i.model),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",O["\u0275\u0275pureFunction0"](10,Ee).includes(i.model)&&!i.strictTplSource.includes(null==i.articleDetails?null:i.articleDetails.source_system))}}function Pe(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",104),O["\u0275\u0275listener"]("click",function(){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().handleTemplate(1)}),O["\u0275\u0275pipe"](1,"translate"),O["\u0275\u0275element"](2,"i",105),O["\u0275\u0275elementEnd"]()}2&e&&O["\u0275\u0275property"]("title",O["\u0275\u0275pipeBind1"](1,1,"ANNOTATION"))}function Ie(e,t){1&e&&O["\u0275\u0275element"](0,"i",109)}function ke(e,t){if(1&e&&(O["\u0275\u0275elementStart"](0,"div",106),O["\u0275\u0275element"](1,"nz-spin",107),O["\u0275\u0275template"](2,Ie,1,0,"ng-template",null,108,O["\u0275\u0275templateRefExtractor"]),O["\u0275\u0275elementEnd"]()),2&e){var n=O["\u0275\u0275reference"](3);O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("nzIndicator",n)}}function Te(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",110),O["\u0275\u0275elementStart"](1,"div",111),O["\u0275\u0275element"](2,"i",112),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](3,"div",113),O["\u0275\u0275elementStart"](4,"div",114),O["\u0275\u0275text"](5),O["\u0275\u0275pipe"](6,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](7,"div",115),O["\u0275\u0275text"](8),O["\u0275\u0275pipe"](9,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](10,"div",116),O["\u0275\u0275elementStart"](11,"button",117),O["\u0275\u0275listener"]("click",function(){return t.$implicit.close()}),O["\u0275\u0275text"](12),O["\u0275\u0275pipe"](13,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](14,"button",118),O["\u0275\u0275listener"]("click",function(){O["\u0275\u0275restoreView"](n);var e=t.$implicit;return O["\u0275\u0275nextContext"]().unlockTipsOnCancle(e)}),O["\u0275\u0275text"](15),O["\u0275\u0275pipe"](16,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](17,"button",119),O["\u0275\u0275listener"]("click",function(){O["\u0275\u0275restoreView"](n);var e=t.$implicit;return O["\u0275\u0275nextContext"]().unlockTipsOnSave(e)}),O["\u0275\u0275text"](18),O["\u0275\u0275pipe"](19,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()}if(2&e){var i=t.data;O["\u0275\u0275advance"](5),O["\u0275\u0275textInterpolate3"](" ",null==i?null:i.name," ",null==i?null:i.username," ",O["\u0275\u0275pipeBind1"](6,7,"WIKI_REQUEST_UNLOCK")," "),O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate"](O["\u0275\u0275pipeBind1"](9,9,"WIKI_UNLOCK_TIPS")),O["\u0275\u0275advance"](4),O["\u0275\u0275textInterpolate"](O["\u0275\u0275pipeBind1"](13,11,"WIKI_UNLOCK_REFUSE")),O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate"](O["\u0275\u0275pipeBind1"](16,13,"WIKI_UNLOCK_NO_SAVE")),O["\u0275\u0275advance"](3),O["\u0275\u0275textInterpolate"](O["\u0275\u0275pipeBind1"](19,15,"WIKI_UNLOCK_SAVE"))}}function De(e,t){if(1&e){var n=O["\u0275\u0275getCurrentView"]();O["\u0275\u0275elementStart"](0,"div",120),O["\u0275\u0275elementStart"](1,"div",121),O["\u0275\u0275elementStart"](2,"div",122),O["\u0275\u0275text"](3,"\u77e5\u8bc6\u5e93\u6807\u7b7e\u5df2\u52a0\u81f3\u3010\u9644\u52a0\u5c5e\u6027\u3011\uff0c\u5728\u8fd9\u91cc\u60a8\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u6587\u7ae0\u7684\u5176\u4ed6\u9644\u52a0\u5c5e\u6027\u4fe1\u606f\u3002"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](4,"button",123),O["\u0275\u0275listener"]("click",function(){return O["\u0275\u0275restoreView"](n),O["\u0275\u0275nextContext"]().additiveAttributeTip()}),O["\u0275\u0275text"](5),O["\u0275\u0275pipe"](6,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"]()}2&e&&(O["\u0275\u0275advance"](5),O["\u0275\u0275textInterpolate"](O["\u0275\u0275pipeBind1"](6,1,"TIP_BUTTON_KNOW")))}var Ae,ze,Re=function(e){return{zoom:e}},Le=function(){return{padding:"0"}},Ne=function(){return{"margin-bottom":"10px"}},je=function(e){return{width:e}},Ve={"create-article":"\u521b\u5efa\u6587\u7ae0","update-article":"\u7f16\u8f91\u6587\u7ae0"},Fe=[],Be="\u65b9\u6848\u8bbe\u8ba1",Ue=function(e){function t(t,n,i,r,a,c,l,s,p,u){var m=e.call(this)||this;return m.wikiLockService=t,m.notification=n,m.router=i,m.activeRoute=r,m.knowledgeService=a,m.translate=c,m.emitService=l,m.resizeObserver=s,m.ngZone=p,m.visionEditorService=u,m.model="create-article",m.sn="",m.id="",m.mdOptions=y.c,m.articleTitle="\u7a7a\u767d\u6587\u6863",m.articleDescription="",m.articleOutlineArr=[],m.editContentScroll=!0,m.editorStyle={opacity:1},m.scrollMarginPaddingVal=30,m.marginPaddingVal=50,m.insertContentEventSubject=new d.a,m.hoverShowTip=!1,m.showOutlineOverCtrl=!1,m.outlineCollapse=!1,m.showTemplate=!0,m.activeTabIndex=2,m.showLoading=!1,m.showPreview=!1,m.navigatioList=[],m.origin="workitem-article",m.articleAttachmentInfo={sourceId:"",sourceType:"wiki_location"},m.tingDesignInfo=!0,m.tabArr=[],m.onDestroy$=new d.a,m.editorInit=!1,m.saveBool=!0,m.categoryType="document",m.isEventReport=!1,m.coeStatus="",m.isTimerSave=!1,m.clickSaveClose=!1,m.isFullTable=!1,m.fullTableDom=null,m.tableConfigInfo={fullTable:!0},m.editWideModeSwitch=!0,m.additiveAttributeTipShow=!1,m.attributeValueObj={id:null,tag:[],wiki_id:"",wiki_sn:"",icon_image:"",join_calendar:!0,start_time:null,end_time:null},m.strictTplSource=["CLOUDDEVOPS_COE","CLOUDDEVOPS_CCB"],m.isImgLazyLoaded=!1,m.onDestory$=new d.a,m.getArticleOutlineDelay=Object(o.a)(function(){var e,t;m.getArticleOutline("scroll-body",m.articleTitle),m.isFullTable||(null===(e=m.wikiEditFunction)||void 0===e?void 0:e.editFrom)&&["workitem","coe"].includes(null===(t=m.wikiEditFunction)||void 0===t?void 0:t.editFrom)||m.saveAutomatic(!0)},1e4),m.richTextRemoterShow=!1,m.richTextRemoterInnerWidth=100,m.activeEditor=null,m.imgLoadedHanlder=Object(o.a)(function(e){m.isImgLazyLoaded=!0,m.getArticleOutline("scroll-body",m.articleTitle)},2e3),m}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"isContentChanged",{get:function(){var e=Ae&&Ae!==this.articleTitle,t=ze&&ze.judgeTabArrChange();return e||t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reserveTitle",{get:function(){return this.translate.instant(this.outlineCollapse?"PIN_OUTLINE":"COLLAPSE_OUTLINE")},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e,t,n,o;return Object(i.b)(this,void 0,void 0,function(){var r,a,c,s=this;return Object(i.e)(this,function(i){switch(i.label){case 0:return location.pathname.includes("eventReport")?(this.isEventReport=!0,this.model="update-event-report",this.activeRoute.paramMap.pipe(Object(l.a)(this.onDestory$)).subscribe(function(e){var t=e.get("sn");s.getDetailsForEventReport(t)}),[3,6]):[3,1];case 1:if(null!==localStorage.getItem("workitemWikiOutlineCollapse")&&(this.outlineCollapse="true"===localStorage.getItem("workitemWikiOutlineCollapse")),null!==localStorage.getItem("workitemWikiShowTemplate")&&(this.showTemplate="true"===localStorage.getItem("workitemWikiShowTemplate")),(r=localStorage.getItem("wikiWideModeSwitch"))&&(this.editWideModeSwitch=JSON.parse(r)),this.title=Ve[this.model],"update-article"===this.model&&this.initNavigation(),this.emitService.eventEmit.subscribe(function(e){var t,n;if(e&&"wiki:doc-table-wide-edit"==e.type&&(s.editWideModeSwitch=e.obj,s.listenerContentWide()),e.origin===s.origin)if("outline-position"!==e.type){if(e&&"after-component-change-description"===e.type){if(s.isImgLazyLoaded){for(var i=null===(t=null==s?void 0:s.articleOutlineArr)||void 0===t?void 0:t.length,o=0;o<i;o++){var r=s.articleOutlineArr[o],a=null==e?void 0:e.arr[o];r.startTop=null==a?void 0:a.startTop,r.endTop=null==a?void 0:a.endTop}s.isImgLazyLoaded=!1}else s.articleOutlineArr=e.arr;s.scrollTitleId=null===(n=e.arr[0])||void 0===n?void 0:n.titleId}}else s.getOutlinePositionCommon(e.data.titleId)}),this.categoryId=this.categoryId&&Number(this.categoryId),!this.articleDetails)return[3,5];if(this.workitemInfo={productId:this.articleDetails.assigned_domain.id,sn:null===(e=this.workitemList[0])||void 0===e?void 0:e.number,itemName:"wiki-"+(null===(t=this.workitemList[0])||void 0===t?void 0:t.title),itemUrl:location.origin+"/domains/"+this.articleDetails.assigned_domain.id+"/workitem/kanban/"+(null===(n=this.workitemList[0])||void 0===n?void 0:n.number)},this.articleAttachmentInfo.sourceId=this.articleDetails.sn,this.categoryType=this.articleDetails.category,"CLOUDDEVOPS_COE"!==(null===(o=this.articleDetails)||void 0===o?void 0:o.source_system))return[3,5];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.knowledgeService.getCoeInfo(this.articleDetails.entity_sn).toPromise()];case 3:return a=i.sent(),this.coeStatus=a&&a.status,[3,5];case 4:return c=i.sent(),Object(_.b)(c),[3,5];case 5:"update-article"!==this.model?"PRD"===this.category.classify?this.getPrdTemplate():this.getTabArray():this.buildTabArrByUpdate(),this.requestArticleSn(),i.label=6;case 6:return ze=this,this.currentUsername=window.communicationService.currentUser.user_name,"update-article"===this.model&&this.initSocketListen(),this.isEventReport&&System.import("/shared-ui/knowledge-ui.ce.js"),this.additiveAttributeTipShow=!localStorage.getItem("additiveAttributeTip"),this.listenerContentWide(),[2]}})})},t.prototype.getPrdTemplate=function(){var e;return Object(i.b)(this,void 0,void 0,function(){var t,n,o,r,a,c=this;return Object(i.e)(this,function(l){switch(l.label){case 0:t={assigneDomainId:this.currentDomain,assignedDomainType:"DOMAIN",category:"PRD",type:"FEATURE"},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.knowledgeService.getTabTemplate(t).toPromise()];case 2:return n=l.sent(),o=n[0].detailInfo[0],r=n.map(function(e,t){var n=1===o.textFormat?marked:html2markdown;return{uuid:"tab"+t,editorID:"workitemTab"+t,title:e.title,id:e.id,description:n(o.templateValue)||"",isShowToolbar:!1,isCreated:!1,showDelete:!1,isDeleted:!1,ui_source:"1",showEditor:!0,getContentEndValue:!1,readonly:[c.translate.instant("BASIC_INFO"),c.translate.instant("CORRECTIVE_IMPROVEMENT_MEASURES")].includes(e.documentName),get getContentEnd(){return this.getContentEndValue},set getContentEnd(e){this.getContentEndValue=e,ze.judgeGetEditorContent()},getContentPreview:!1,get getContentPreviewEnd(){return this.getContentPreview},set getContentPreviewEnd(e){this.getContentPreview=e,ze.judgePreviewEditorContent()},getContentEventSubject:new d.a,refreshContentEventSubject:new d.a,structuredTableInfo:c.structuredTableInfoConfig(e),documentClassify:"PRD"}}),this.tabArr=Object(i.i)(r),this.tabArr.length&&(this.currentToolbarId=null===(e=this.tabArr[this.tabArr.length-1])||void 0===e?void 0:e.uuid),this.articleTitle=this.workitemList[0].title,this.setNumberToWorkitemContent(),[3,4];case 3:return a=l.sent(),Object(_.b)(a),[3,4];case 4:return[2]}})})},t.prototype.listenerContentWide=function(){var e=document.getElementById("edit-content-box");e&&(e.clientWidth>760&&!this.editWideModeSwitch?e.classList.add("edit-artical-wide"):e.classList.remove("edit-artical-wide"))},t.prototype.getOutlinePositionCommon=function(e){var t;if("wikiArticleTitleId"===e){var n=document.getElementById("scroll-body");n&&(n.scrollTop=0)}else this.positionActiveElement(e);(null===(t=this.wikiEditFunction)||void 0===t?void 0:t.editFrom)||this.router.navigate([],{relativeTo:this.activeRoute,queryParams:{title:"wikiArticleTitleId"===e?null:e},queryParamsHandling:"merge"})},t.prototype.getDetailsForEventReport=function(e){var t,n,i=this;this.knowledgeService.getEventReportDetails(e,null===(n=null===(t=null===window||void 0===window?void 0:window.communicationService)||void 0===t?void 0:t.currentUser)||void 0===n?void 0:n.huawei_id).subscribe(function(e){200==e.code&&(i.articleDetails=Object(r.a)(e.data),i.workitemInfo={productId:i.articleDetails.assigned_domain.id,sn:i.articleDetails.sn,itemName:"wiki-"+i.articleDetails.title,itemUrl:location.origin+"/domains/"+i.articleDetails.assigned_domain.id+"/wiki/"+i.articleDetails.sn},i.buildTabArrByUpdate())})},t.prototype.requestArticleSn=function(){var e=this;"create-article"===this.model&&this.knowledgeService.requestArticleSn().subscribe(function(t){e.createArticleSn=t,e.workitemInfo={productId:e.currentDomain,sn:e.createArticleSn,itemName:"wiki-"+e.articleTitle,itemUrl:location.origin+"/domains/"+e.currentDomain+"/wiki/"+e.createArticleSn},e.articleAttachmentInfo.sourceId=e.createArticleSn})},t.prototype.buildTabArrByUpdate=function(){var e,t,n=this;if("CLOUDDEVOPS_COE"===(null===(e=this.articleDetails)||void 0===e?void 0:e.source_system)){var o=this.articleDetails;window.sessionStorage.setItem("coe-doc-link",JSON.stringify({id:o.id,title:o.title,sn:o.sn,number:o.number,category:"coe",domain:{id:this.currentDomainInfo.id},created_by:{name:o.created_by.name},type:"coe",scene_type:"coe-document-link"}))}var r,c=Object(a.a)(this.articleDetails.paragraphs,{documentClassify:"COE_IMPROVE_WAY"});c>=0&&(r=this.articleDetails.paragraphs[c],this.articleDetails.paragraphs.splice(c,1),this.articleDetails.paragraphs.push(r));var l,s=Object(a.a)(this.articleDetails.paragraphs,{documentClassify:"COE_BASE_INFO"});s>0&&(l=this.articleDetails.paragraphs[s],this.articleDetails.paragraphs.splice(s,1),this.articleDetails.paragraphs.unshift(l));var p=this.articleDetails.paragraphs.map(function(e,t){return{uuid:"tab"+t,editorID:"workitemTab"+t,title:e.content_category,id:e.content_id,description:e.content,isShowToolbar:!1,isCreated:!1,showDelete:!1,isDeleted:!1,showEditor:!0,ui_source:e.ui_source,getContentEndValue:!1,readonly:["COE_IMPROVE_WAY","COE_BASE_INFO","CCB_STATISTICS","CCB_DETAIL"].includes(null==e?void 0:e.documentClassify)||["COE_STATUS_CLOSED","COE_STATUS_IMPROVE"].includes(n.coeStatus),get getContentEnd(){return this.getContentEndValue},set getContentEnd(e){this.getContentEndValue=e,ze.judgeGetEditorContent()},getContentPreview:!1,get getContentPreviewEnd(){return this.getContentPreview},set getContentPreviewEnd(e){this.getContentPreview=e,ze.judgePreviewEditorContent()},getContentEventSubject:new d.a,refreshContentEventSubject:new d.a,structuredTableInfo:n.structuredTableInfo(e),documentClassify:e.documentClassify}});this.tabArr=Object(i.i)(p),this.tabArr.length&&(this.currentToolbarId=null===(t=this.tabArr[this.tabArr.length-1])||void 0===t?void 0:t.uuid),this.articleTitle=this.articleDetails.title},t.prototype.structuredTableInfo=function(e){var t,n;return this.isEventReport?null:{domainId:this.currentDomainInfo.id,feture:{feture_number:null===(t=this.workitemList[0])||void 0===t?void 0:t.number,feture_id:this.workitemList[0].id},contentNumber:e.contentNumber,category:"CLOUDDEVOPS_COE"===(null===(n=this.articleDetails)||void 0===n?void 0:n.source_system)?"COE_IMPROVEMENT_MEASURE":"FEATURE_DECOMPOSITION",paragraphTitle:e.content_category}},t.prototype.judgeTabArrChange=function(){if((null==Fe?void 0:Fe.length)!=this.tabArr.length)return!0;for(var e=0;e<Fe.length;e++)if(Fe[e].title!==this.tabArr[e].title||this.changeContentMode(Fe[e].description,"edit")!==this.tabArr[e].description||Fe[e].isDeleted!==this.tabArr[e].isDeleted||Fe[e].ui_source!==this.tabArr[e].ui_source)return!0;return!1},t.prototype.ngAfterViewInit=function(){var e=this;this.saveInitData(),Object(y.d)(this,this.createWorkitemArticleWrapper,!0),this.initEditor(),this.isShowEditPage(!1),setTimeout(function(){if(document.getElementById("scroll-body")&&document.getElementById("scroll-body").addEventListener("keydown",function(){e.ngZone.run(function(){return Object(y.a)(e.saveAutomatic.bind(e))}),e.visionEditorService.enterScroll()}),e.additiveAttributeTip){var t=document.getElementById("additiveAttributeTip");t&&t.click()}},1e3),this.activeEditScrollTo(),this.visionEditorService.hiddenTableDragele()},t.prototype.activeEditScrollTo=function(){var e=this,t=JSON.parse(window.sessionStorage.getItem("active-edit-coe"));t&&setTimeout(function(){var n=e.tabArr.find(function(e){return e.title==t.category});if(null==n?void 0:n.editorID){var i=document.getElementById(null==n?void 0:n.editorID).getBoundingClientRect().top||0;document.getElementById("scroll-body").scrollTop=i}},2e3)},t.prototype.isShowEditPage=function(e){var t=document.querySelector(".page");t&&(t.style.opacity=e?"1":"0")},t.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},t.prototype.saveInitData=function(){Ae=this.articleTitle,Fe=Object(r.a)(this.tabArr)},t.prototype.initNavigation=function(){var e=this;Object(p.a)(this.knowledgeService.getArticleNavigation(this.currentDomain,this.sn),this.knowledgeService.getWikiCategories(this.currentDomain)).subscribe(function(t){var n=Object(i.g)(t,2),o=n[0],r=n[1].find(function(t){return t.id===Number(e.categoryId)});try{var a=JSON.parse(localStorage.getItem("currentDomain"));e.navigatioList=[{title:a.domainTitle}]}catch(c){console.error(c)}finally{e.navigatioList=Object(i.i)(e.navigatioList,[r],o)}})},t.prototype.saveArticleOrTemplateHandler=function(e){this.saveArticleOrTemplate(e),this.clickSaveClose=!0},t.prototype.saveArticleOrTemplate=function(e){if(!this.isEventReport){var t=e.dictionaryId,n=e.parentSn;this.categoryId=this.categoryId||e.categoryId,this.dictionaryId=this.dictionaryId||t,this.parentSn=this.parentSn||n}this.tabArr.forEach(function(e){e.getContentEnd=!1,e.getContentEventSubject.next({clearCache:!0,eventType:"save-data"})})},t.prototype.descriptionChange=function(e,t){(null==e?void 0:e.description)&&(t.description=e.description),(null==e?void 0:e.type)&&(t.ui_source="rich-text"===e.type?"1":"2"),"save-data"===(null==e?void 0:e.eventType)&&(t.getContentEnd=!0),"preview-click"===(null==e?void 0:e.eventType)&&(t.getContentPreviewEnd=!0),this.setRemoter(t)},t.prototype.updateRelatedTag=function(){var e=this;this.knowledgeService.addRelatedTag({wikiSn:this.sn,tagIds:this.tagManager.markedTag.map(function(e){return e.id})}).subscribe(function(t){e.router.navigateByUrl("/domains/"+e.currentDomain+"/wiki/"+e.categoryId+"/"+e.sn),e.emitService.emit({type:"article-add-finished"})})},t.prototype.getArticleOutline=function(e,t){this.isImgLazyLoaded||(this.articleOutlineArr=[]),this.emitService.emit({type:"article-outline-get-outline-arr",data:{id:e,articleRealTitle:t,firstChildDom:document.getElementById("topWorkitemPositionArticle")},origin:this.origin,isImgLazyLoaded:this.isImgLazyLoaded})},t.prototype.initEditor=function(){var e,t=this,n=0,i=1;if("update-article"===this.model){var o=document.getElementById("scrollParentArticle"),r=document.getElementById("wikiArticleTitleId");if(o){this.editorStyle={opacity:0};var a=r&&r.getBoundingClientRect().height;i=o.scrollHeight-a-this.marginPaddingVal,(n=o.scrollTop-a-this.scrollMarginPaddingVal)<0&&(n=0)}}var c=Object(u.a)(100).pipe(Object(s.a)(function(e){return Object(m.a)(2*e)})).subscribe(function(o){(e=document.getElementById("scroll-body"))&&(e.removeEventListener("scroll",null),e.addEventListener("scroll",t.articleEditScrollFunc.bind(t)),setTimeout(function(){var o=e.scrollHeight;e.scrollTop=n*o*o/(i*i),setTimeout(function(){t.editorStyle={opacity:1}})}),c.unsubscribe())})},t.prototype.articleEditScrollFunc=function(){this.editContentScroll&&this.articleScroll()},t.prototype.articleScroll=function(){var e=this.articleOutlineArr.length;this.articleOutlineArr&&e>0&&document.getElementById("scroll-body")&&this.findFinishedDom(this.articleOutlineArr[e-1].titleId)},t.prototype.positionActiveElement=function(e){var t=this;this.editContentScroll=!1;var n=document.getElementById("scroll-body"),i=document.getElementById("topWorkitemPositionArticle").getBoundingClientRect(),o=document.getElementById("bottomWorkitemPositionArticle"),r=o&&o.getBoundingClientRect(),a=document.getElementById(e).getBoundingClientRect(),c=n.getBoundingClientRect(),l=Math.abs(a.top-i.top),s=r.bottom-i.top-c.height;l>s&&(l=s),n.scrollTop=l,setTimeout(function(){t.editContentScroll=!0})},t.prototype.findFinishedDom=function(e){if(document.getElementById(e))for(var t=document.getElementById("scroll-body").scrollTop,n=JSON.parse(localStorage.getItem("outlineActiveTitle")),i=0;i<this.articleOutlineArr.length;i++){var o=this.articleOutlineArr[i];if(o.startTop<t&&t<o.endTop){if(n&&n.titleId!==o.titleId||!n){Object(w.c)("outlineActiveTitle",JSON.stringify(o));var r={type:"scroll-active-outline-title",data:o};this.scrollTitleId=r.data.titleId,this.emitService.emit(r)}return}}},t.prototype.showOutlineOver=function(e){this.showOutlineOverCtrl=!0,"showTip"===e&&(this.hoverShowTip=!0)},t.prototype.showOutlineOut=function(e){this.showOutlineOverCtrl=!1,"showTip"===e&&(this.hoverShowTip=!1)},t.prototype.outlineToggle=function(){this.outlineCollapse=!this.outlineCollapse,Object(w.c)("workitemWikiOutlineCollapse",String(this.outlineCollapse))},t.prototype.preview=function(e){e&&this.tabArr.forEach(function(e){e.getContentPreviewEnd=!1,e.getContentEventSubject.next({clearCache:!0,eventType:"preview-click"})}),this.showPreview=e},t.prototype.onRemoterScroll=function(){var e=this.richTextRemoterScroll.nativeElement,t=this.richTextWrapper;t.scrollLeft=e.scrollLeft/(e.scrollWidth-e.clientWidth)*(t.scrollWidth-t.clientWidth)},t.prototype.setShowTemplate=function(e){this.showTemplate=e,Object(w.c)("workitemWikiShowTemplate",String(this.showTemplate))},t.prototype.setRemoter=function(e){var t=this;if(1==(null==e?void 0:e.ui_source)){var n=document.querySelector("#"+e.editorID),i=(null==n?void 0:n.scrollWidth)>(null==n?void 0:n.clientWidth);this.richTextRemoterShow=i,this.richTextWrapper=n,i&&(this.wrapperScrollSubscription&&this.wrapperScrollSubscription.unsubscribe(),this.wrapperScrollSubscription=Object(h.a)(Object(g.a)(),this.resizeObserver.observe(n),Object(f.a)(window,"resize")).subscribe(function(){t.richTextRemoterInnerWidth=null==n?void 0:n.scrollWidth;var e=t.richTextRemoterScroll.nativeElement,i=null==n?void 0:n.getBoundingClientRect(),o=i.width;e.style.left=i.left+"px",e.style.width=o+"px",e.scrollLeft=null==n?void 0:n.scrollLeft}))}else this.richTextRemoterShow=!1},Object.defineProperty(t.prototype,"allCollapse",{get:function(){return this.outlineCollapse&&!this.showTemplate},enumerable:!1,configurable:!0}),t.prototype.onFullWidthToggle=function(){this.allCollapse?(this.outlineCollapse=!1,this.showTemplate=!0,Object(w.c)("workitemWikiOutlineCollapse",String(this.outlineCollapse)),Object(w.c)("workitemWikiShowTemplate",String(this.showTemplate))):(this.outlineCollapse=!0,this.showTemplate=!1,Object(w.c)("workitemWikiOutlineCollapse",String(this.outlineCollapse)),Object(w.c)("workitemWikiShowTemplate",String(this.showTemplate)))},t.prototype.focusOnEditorHandler=function(e,t){var n;this.currentToolbarId=null===(n=null==e?void 0:e.toolbarContainer)||void 0===n?void 0:n.substring(1),this.setRemoter(t),this.activeEditor=t},t.prototype.createNewParagraph=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n,o,r=this;return Object(i.e)(this,function(i){switch(i.label){case 0:this.tabArr.forEach(function(e){e.getContentEnd=!1,e.getContentEventSubject.next({eventType:"create-new-paragraph"})}),i.label=1;case 1:return i.trys.push([1,3,,4]),e=this,[4,this.knowledgeService.getWorkitemContentNumber(1).toPromise()];case 2:return e.workitemContentNumberList=i.sent(),[3,4];case 3:return t=i.sent(),Object(_.b)(t),[2];case 4:return n={uuid:"tab"+this.tabArr.length,editorID:"workitemTab"+this.tabArr.length,title:"",description:"",id:"",isShowToolbar:!1,isCreated:!0,showDelete:!1,isDeleted:!1,ui_source:"1",showEditor:!0,getContentEndValue:!1,get getContentEnd(){return this.getContentEndValue},set getContentEnd(e){this.getContentEndValue=e,ze.judgeGetEditorContent()},getContentPreview:!1,get getContentPreviewEnd(){return this.getContentPreview},set getContentPreviewEnd(e){this.getContentPreview=e,ze.judgePreviewEditorContent()},getContentEventSubject:new d.a,refreshContentEventSubject:new d.a,structuredTableInfo:this.structuredTableInfoFeture()},o=document.getElementById("toolbarWrapper"),new MutationObserver(function(){document.getElementById(n.uuid)&&setTimeout(function(){n.isShowToolbar=!0},100)}).observe(o,{childList:!0,subtree:!0}),setTimeout(function(){r.tabArr.push(n),1==r.tabArr.length&&(r.currentToolbarId=r.tabArr[0].uuid)}),[2]}})})},t.prototype.structuredTableInfoFeture=function(){return this.isEventReport?null:{domainId:this.currentDomainInfo.id,feture:{feture_number:this.workitemList[0].number,feture_id:this.workitemList[0].id},contentNumber:this.workitemContentNumberList[0]||null}},t.prototype.gotoWikiDetail=function(e){var t;if(!(this.wikiEditFunction&&["workitem","coe"].includes(this.wikiEditFunction.editFrom)||!e.number||"CLOUDDEVOPS_COE"===(null===(t=this.articleDetails)||void 0===t?void 0:t.source_system))){var n={type:"wiki::workitem-detail-open"};"update-article"==this.model&&(n.type="wiki::workitem-detail-open-update-article"),this.emitService.emit(n),this.router.navigate(["./workitem/"+e.number],{relativeTo:this.activeRoute})}},t.prototype.initInstanceCallbackHandler=function(e){var t=this;e.isCreated&&setTimeout(function(){document.querySelector("[id*="+e.uuid+"-input]").focus()},100),setTimeout(function(){t.editorInit&&t.tabArr.forEach(function(e){e.refreshContentEventSubject.next({refreshContent:t.changeContentMode(e.description,"edit")})}),t.editorInit=!1,t.isShowEditPage(!0)},200),this.getArticleOutline("scroll-body",this.articleTitle)},t.prototype.editorInitHandler=function(e){this.editorInit=!0},t.prototype.deleteTab=function(e){e.isDeleted=!0,e.description="",this.getArticleOutline("scroll-body",this.articleTitle)},t.prototype.resetTab=function(e){e.isDeleted=!1},t.prototype.setNumberToWorkitemContent=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n,o=this;return Object(i.e)(this,function(i){switch(i.label){case 0:e=this.tabArr.length||1,i.label=1;case 1:return i.trys.push([1,3,,4]),t=this,[4,this.knowledgeService.getWorkitemContentNumber(e).toPromise()];case 2:return t.workitemContentNumberList=i.sent(),[3,4];case 3:return n=i.sent(),Object(_.b)(n),[2];case 4:return this.tabArr.forEach(function(e,t){e.structuredTableInfo={domainId:o.currentDomainInfo.id,feture:{feture_number:o.workitemList[0].number,feture_id:o.workitemList[0].id},contentNumber:o.workitemContentNumberList[t]||null}}),[2]}})})},t.prototype.setWordContent=function(e){var t=e.find(function(e){return e.documentName===Be});t?(t.description=this.workitemList[0].wordContent,t.isWordContent=!0):e.unshift({documentClassify:"WORKITEM_DOC_CLASSIFY_SOLUTION_DESIGN",documentName:Be,description:this.workitemList[0].wordContent,workitemCategory:"FEATURE",workitemType:"DEFAULT_WORKITEM_TYPE",isWordContent:!0})},t.prototype.getWorkitemContentConfig=function(){var e,t=this;Object(v.a)([this.knowledgeService.getWorkitemContentConfig(this.currentDomain),this.knowledgeService.getDesignTemplate(null===(e=this.workitemList[0])||void 0===e?void 0:e.category,this.currentDomainInfo.id)]).subscribe(function(e){var n,o=Object(i.g)(e,2),r=o[1],a=o[0].filter(function(e){return"FEATURE_API_DESIGN"!=(null==e?void 0:e.documentClassify)});t.workitemList.length&&t.workitemList[0].wordContent&&t.setWordContent(a);var c=a.map(function(e,n){var i=r.detailInfo.find(function(t){return Number(t.relatedValue)===e.id});if(!e.isWordContent&&i){var o=1===i.textFormat?marked:html2markdown;e.description=o(i.templateValue)}return{uuid:"tab"+n,editorID:"workitemTab"+n,title:e.documentName,id:e.id,description:e.description||"",isShowToolbar:!1,isCreated:!1,showDelete:!1,isDeleted:!1,ui_source:"1",showEditor:!0,getContentEndValue:!1,readonly:[t.translate.instant("BASIC_INFO"),t.translate.instant("CORRECTIVE_IMPROVEMENT_MEASURES")].includes(e.documentName),get getContentEnd(){return this.getContentEndValue},set getContentEnd(e){this.getContentEndValue=e,ze.judgeGetEditorContent()},getContentPreview:!1,get getContentPreviewEnd(){return this.getContentPreview},set getContentPreviewEnd(e){this.getContentPreview=e,ze.judgePreviewEditorContent()},getContentEventSubject:new d.a,refreshContentEventSubject:new d.a,structuredTableInfo:t.structuredTableInfoConfig(e),documentClassify:e.documentClassify}});t.tabArr=Object(i.i)(c),t.tabArr.length&&(t.currentToolbarId=null===(n=t.tabArr[t.tabArr.length-1])||void 0===n?void 0:n.uuid),t.articleTitle=t.workitemList[0].title,t.setNumberToWorkitemContent()})},t.prototype.structuredTableInfoConfig=function(e){return this.isEventReport?null:{domainId:this.currentDomainInfo.id,feture:{feture_number:this.workitemList[0].number,feture_id:this.workitemList[0].id},contentNumber:e.contentNumber}},t.prototype.judgeGetEditorContent=function(){if(this.tabArr.every(function(e){return e.getContentEnd})){if(this.isEventReport)return void this.updateEventReportArticle();if("create-article"==this.model)this.saveWorkitemArticle();else{"document"===this.categoryType?this.updateWorkitemArticle():this.updateWorkitemDirectory();var e=this.categorySelector.versionDetail;e&&this.setArticleRevision(e)}}},t.prototype.judgePreviewEditorContent=function(){var e=this;this.articleDescription="",this.tabArr.every(function(e){return e.getContentPreview})&&this.tabArr.filter(function(e){return!e.isDeleted}).forEach(function(t){var n="1"==t.ui_source?t.description:marked(t.description);e.articleDescription+="<h1>"+t.title+"</h1><br> "+n})},t.prototype.buildSaveArticleCondition=function(){var e,t,n,i,o,r,a=this;return{domainId:this.currentDomain,entityId:this.workitemList[0].id,entitySn:this.workitemList[0].number,entityType:"PRD"===this.category.classify?"PRD":"workitem",wikiTitle:this.articleTitle,parentId:this.dictionaryId,wikiSn:this.createArticleSn,wikiClassify:"PRD"===this.category.classify?"PRD":null===(t=null===(e=this.workitemList[0])||void 0===e?void 0:e.category)||void 0===t?void 0:t.toLocaleLowerCase(),entityDomainId:(null===(i=null===(n=this.workitemList[0])||void 0===n?void 0:n.simple_domain)||void 0===i?void 0:i.id)||(null===(r=null===(o=this.workitemList[0])||void 0===o?void 0:o.domain)||void 0===r?void 0:r.id),addActivity:this.clickSaveClose||!this.clickSaveClose&&!this.isTimerSave,paragraphs:this.tabArr.filter(function(e){return!e.isDeleted}).map(function(e){var t;return{documentClassify:"PRD"===a.category.classify?"DEFAULT_VALUE":e.documentClassify,category:"PRD"===a.category.classify?"PRD":e.title,content:a.changeContentMode(e.description,"view"),uiSource:e.ui_source,order:"0",contentNumber:(null===(t=e.structuredTableInfo)||void 0===t?void 0:t.contentNumber)||""}})}},t.prototype.saveWorkitemArticle=function(){var e=this;if(this.articleTitle)if(this.tabArr.length){window.hwa("trackStructEvent",{label:"\u65b0\u5efa\u6587\u7ae0"});var t=this.buildSaveArticleCondition();this.showLoading=!0,this.knowledgeService.saveWorkitemArticle(t).subscribe(function(n){200===n.code&&(e.tabArr.forEach(function(e,t){var i,o;e.id=null===(o=null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.paragraphs[t])||void 0===o?void 0:o.content_id}),e.updateAttributeValue(n.data,t))},function(t){e.showLoading=!1})}else this.notification.error(this.translate.instant("EMPTY_ARTICLE_CONTENT"),"");else this.notification.error(this.translate.instant("EMPTY_ARTICLE_TITLE"),"")},t.prototype.updateAttributeValue=function(e,t){var n=this;this.emitService.emit({type:"update-article-attribute"});var o=this.attributeValueObj.tag,a=Object(i.a)({},this.attributeValueObj),c={wikiAdditionalAttribute:{id:a.id||null,wiki_id:e.id,wiki_sn:e.sn,icon_image:a.icon_image,join_calendar:a.join_calendar?1:0,start_time:a.start_time,end_time:a.end_time},tag:{wikiSn:e.sn,tagIds:o.map(function(e){return e.id})}};this.knowledgeService.updateWikiAttribute(c).subscribe(function(i){if(n.clickSaveClose?(n.emitService.emit({type:"article::wiki-closeModel"}),n.emitService.emit({type:"add-document",sn:e.sn,parentSn:n.parentSn,isCreateWorkitem:!0})):(Ae=n.articleTitle,Fe=Object(r.a)(n.tabArr),n.articleDetails=e,n.isCreatedOnce={type:"add-document",sn:e.sn,parentSn:n.parentSn,isCreateWorkitem:!0},n.model="update-article",n.isTimerSave||n.notification.success(n.translate.instant("UPDATE_SUCCESS"),"")),n.showLoading=!1,n.clickSaveClose&&n.wikiEditFunction&&["workitem","coe"].includes(n.wikiEditFunction.editFrom)){var o=new CustomEvent("knowledge_event_listener",{detail:{operation:"article_update_finished",content:t}});window.dispatchEvent(o)}})},t.prototype.handleRelatedTag=function(e){this.emitService.emit({type:"update-article-attribute"});var t=this.attributeValueObj.tag,n=Object(i.a)({},this.attributeValueObj),o={wikiAdditionalAttribute:{id:n.id||null,wiki_id:this.articleDetails.id,wiki_sn:this.sn,icon_image:n.icon_image,join_calendar:n.join_calendar?1:0,start_time:n.start_time,end_time:n.end_time},tag:{wikiSn:this.sn,tagIds:t.map(function(e){return e.id})}};this.knowledgeService.updateWikiAttribute(o).subscribe(function(e){},function(){})},t.prototype.updateWorkitemArticle=function(){var e=this;this.handleRelatedTag(this.sn);var t={wikiSn:this.articleDetails.sn,wikiTitle:this.articleTitle,sourceSystem:this.articleDetails.source_system,addActivity:this.clickSaveClose||!this.clickSaveClose&&!this.isTimerSave,paragraphs:this.tabArr.filter(function(e){return!e.isDeleted}).map(function(t){return{documentClassify:t.documentClassify,category:t.title,content:e.changeContentMode(t.description,"view"),uiSource:t.ui_source,order:"0",contentId:t.id}})};this.showLoading=!0,this.handleStructuredTableSave(t.paragraphs),this.knowledgeService.updateWorkitemArticle(t).subscribe(function(n){var i=n.failed;if(e.showLoading=!1,null==i?void 0:i.length)e.notification.error(e.translate.instant("SAVEED_FAILED"),"");else if(e.clickSaveClose?e.emitService.emit({type:"article-update-finished",title:e.articleTitle,sn:e.sn}):(e.saveBool=!0,Ae=e.articleTitle,Fe=Object(r.a)(e.tabArr),e.isTimerSave||e.notification.success(e.translate.instant("UPDATE_SUCCESS"),"")),e.clickSaveClose&&e.emitService.emit({type:"article::wiki-closeWorkitemEditModel"}),e.clickSaveClose&&e.wikiEditFunction&&["workitem","coe"].includes(e.wikiEditFunction.editFrom)){var o=new CustomEvent("knowledge_event_listener",{detail:{operation:"article_update_finished",content:t}});window.dispatchEvent(o)}},function(t){e.showLoading=!1})},t.prototype.updateWorkitemDirectory=function(){var e=this;this.emitService.emit({type:"update-article-attribute"});var t=this.attributeValueObj.tag,n=Object(i.a)({},this.attributeValueObj),o={wikiAdditionalAttribute:{id:n.id||null,wiki_id:this.articleDetails.id,wiki_sn:this.sn,icon_image:n.icon_image,join_calendar:n.join_calendar?1:0,start_time:n.start_time,end_time:n.end_time},tag:{wikiSn:this.sn,tagIds:t.map(function(e){return e.id})}};this.knowledgeService.updateWikiAttribute(o).subscribe(function(e){},function(){});var r={id:this.articleDetails.id,ui_source:this.tabArr[0].ui_source,kanban_id:this.articleDetails.kanban_id,title:this.articleTitle,addActivity:this.clickSaveClose||!this.clickSaveClose&&!this.isTimerSave,description:this.changeContentMode(this.tabArr[0].description,"view")};this.showLoading=!0,this.knowledgeService.saveArticle([r]).subscribe(function(t){var n=t.success,i=t.unmodify;e.showLoading=!1,(null==n?void 0:n.length)||(null==i?void 0:i.length)?e.clickSaveClose&&(e.emitService.emit({type:"article-update-finished",title:e.articleTitle,sn:e.sn}),e.emitService.emit({type:"article::wiki-closeWorkitemEditModel"})):e.notification.error(e.translate.instant("SAVEED_FAILED"),"")},function(t){e.showLoading=!1})},t.prototype.setArticleRevision=function(e){var t=this,n=Object(i.a)(Object(i.a)({},e),{category:"revision",entity_id:this.articleDetails.id,entity_sn:this.articleDetails.sn,entity_type:"wiki",title:this.articleDetails.title,paragraphs:this.tabArr.filter(function(e){return!e.isDeleted}).map(function(e){return{documentClassify:e.documentClassify,category:e.title,content:e.description,uiSource:e.ui_source,order:"0",contentId:e.id}})});this.knowledgeService.createBaseLine(n).subscribe(function(e){t.notification.success(t.translate.instant("UPDATE_SUCCESS",""),"")})},t.prototype.getTabArray=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.e)(this,function(e){switch(e.label){case 0:return[4,this.getWorkitemContentConfig()];case 1:return e.sent(),this.getTabTemplate(),[2]}})})},t.prototype.getTabTemplate=function(){var e=this;this.knowledgeService.getTabTemplate({assigneDomainId:this.currentDomainInfo.id,assignedDomainSn:this.currentDomainInfo.sn,assignedDomainType:"DOMAIN",category:"REQUIREMENT",type:"FEATURE"}).subscribe(function(t){if(t&&t.length&&t[0].detailInfo&&e.tabArr.forEach(function(e){var n=t[0].detailInfo.find(function(t){return t.relatedValue==e.id});if(n){var i=1===n.textFormat?marked:html2markdown;e.description=i(n.templateValue),e.ui_source="1"}}),e.wikiEditFunction&&e.wikiEditFunction.activeDocInfo){var n=e.tabArr.find(function(t){return t.title==e.wikiEditFunction.activeDocInfo.category});n&&(n.description=e.wikiEditFunction.activeDocInfo.content)}})},t.prototype.changeContentMode=function(e,t){return e?this.visionEditorService.changeContentMode(e,t):e},t.prototype.cancleEdit=function(){this.categorySelector.cancelCreate()},t.prototype.saveEdit=function(){this.categorySelector.save()},t.prototype.buildEventReportCondition=function(){var e,t;return{wikiSn:this.articleDetails.sn,wikiTitle:this.articleDetails.title,operator:null===(t=null===(e=null===window||void 0===window?void 0:window.communicationService)||void 0===e?void 0:e.currentUser)||void 0===t?void 0:t.huawei_id,sourceSystem:"CIM",paragraphs:this.tabArr.filter(function(e){return!e.isDeleted}).map(function(e){return{documentClassify:e.documentClassify,category:e.title,content:e.description,uiSource:e.ui_source,order:"0",contentId:e.id}})}},t.prototype.updateEventReportArticle=function(){var e=this,t=this.buildEventReportCondition();this.knowledgeService.updateEventReportArticle(t).subscribe(function(t){e.notification.success(e.translate.instant("UPDATE_SUCCESS",""),"")})},t.prototype.saveAutomatic=function(e){this.isFullTable||(this.isTimerSave=!!e,"update-article"==this.model?this.updateWorkitemArticleHandler():"create-article"==this.model&&(this.isCreatedOnce?this.updateWorkitemArticleHandler():e?this.saveArticleOrTemplate({categoryId:this.categoryId,dictionaryId:this.dictionaryId}):this.categorySelector.showSelectCategoryDirectory=!0))},t.prototype.updateWorkitemArticleHandler=function(){this.tabArr.forEach(function(e){e.getContentEnd=!1,e.getContentEventSubject.next({clearCache:!1,eventType:"save-data"})})},t.prototype.handleTemplate=function(e){this.showTemplate=!0,this.activeTabIndex=e,Object(w.c)("workitemWikiShowTemplate",String(this.showTemplate))},t.prototype.fullTableEmit=function(e){var t=this;this.fullTableDom=e.detail.tableDom,this.isFullTable=!this.isFullTable,document.getElementById("back-full-table").style.display="none",this.tabArr.forEach(function(e){e.showEditor=e.uuid==t.activeEditor.uuid})},t.prototype.closeFullTable=function(){this.visionEditorService.closeTableMode(this.fullTableDom,"edit"),this.isFullTable=!1,this.tabArr.forEach(function(e){e.showEditor=!0})},t.prototype.setAttributeValue=function(e){this.attributeValueObj=e},t.prototype.additiveAttributeTip=function(){this.additiveAttributeTipShow=!1,Object(w.c)("additiveAttributeTip",String(!0))},t.prototype.handleStructuredTableSave=function(e){var t=Object(c.a)(e,{documentClassify:"COE_IMPROVE_WAY"});if(t){var n=this.getStructuredTableNumber(t.content);n&&this.triggerStructuredTableSave(n)}},t.prototype.getStructuredTableNumber=function(e){if("string"!=typeof e)return null;var t=e.match(/structure-table-id="(\S+)"/);return t?t[1]:null},t.prototype.triggerStructuredTableSave=function(e){var t="save-structured-table-data:"+e,n="save-structured-table-data-completed:"+e;return new Promise(function(e){var i=function(t){e(t.detail),document.removeEventListener(n,i)};document.addEventListener(n,i),document.dispatchEvent(new CustomEvent(t,{detail:{key:n}}))})},t.\u0275fac=function(e){return new(e||t)(O["\u0275\u0275directiveInject"](S.a),O["\u0275\u0275directiveInject"](E.b),O["\u0275\u0275directiveInject"](M.f),O["\u0275\u0275directiveInject"](M.a),O["\u0275\u0275directiveInject"](x.b),O["\u0275\u0275directiveInject"](P.c),O["\u0275\u0275directiveInject"](I.a),O["\u0275\u0275directiveInject"](k.a),O["\u0275\u0275directiveInject"](O.NgZone),O["\u0275\u0275directiveInject"](T.a))},t.\u0275cmp=O["\u0275\u0275defineComponent"]({type:t,selectors:[["workitem-article-edit"]],viewQuery:function(e,t){if(1&e&&(O["\u0275\u0275viewQuery"](Y,1),O["\u0275\u0275viewQuery"](Q,1),O["\u0275\u0275viewQuery"](J,1),O["\u0275\u0275viewQuery"](Z,1),O["\u0275\u0275viewQuery"](ee,1)),2&e){var n=void 0;O["\u0275\u0275queryRefresh"](n=O["\u0275\u0275loadQuery"]())&&(t.tagManager=n.first),O["\u0275\u0275queryRefresh"](n=O["\u0275\u0275loadQuery"]())&&(t.createWorkitemArticleWrapper=n.first),O["\u0275\u0275queryRefresh"](n=O["\u0275\u0275loadQuery"]())&&(t.richTextRemoterScroll=n.first),O["\u0275\u0275queryRefresh"](n=O["\u0275\u0275loadQuery"]())&&(t.wikiUnlockTipsTemplateRef=n.first),O["\u0275\u0275queryRefresh"](n=O["\u0275\u0275loadQuery"]())&&(t.categorySelector=n.first)}},inputs:{model:"model",categoryId:"categoryId",parentSn:"parentSn",dictionaryId:"dictionaryId",currentDomain:"currentDomain",sn:"sn",id:"id",creatorId:"creatorId",articleDetails:"articleDetails",workitemList:"workitemList",currentDomainInfo:"currentDomainInfo",wikiEditFunction:"wikiEditFunction",fullScreenCtrl:"fullScreenCtrl",fullScreenZoomSize:"fullScreenZoomSize",category:"category"},features:[O["\u0275\u0275ProvidersFeature"]([x.b]),O["\u0275\u0275InheritDefinitionFeature"]],decls:39,vars:41,consts:[[1,"create-article-wrapper"],["createWorkitemArticleWrapper",""],[1,"header-shadow",3,"ngStyle"],["class","title m-l-12",4,"ngIf"],["class","doc-full-table",3,"click",4,"ngIf"],["id","toolbarWrapper",1,"toolbar"],[3,"id","class","hidden",4,"ngFor","ngForOf"],["class","buttons m-r-12",4,"ngIf"],["id","scroll-body",1,"doc-content","flex","slimScrollBar"],["scrollBody",""],["class","left m-l-12 position-r",3,"hidden","ngStyle","mouseover","mouseout",4,"ngIf"],["id","center-wrapper",1,"center",3,"ngStyle"],["id","topWorkitemPositionArticle",1,"top-position-styl"],[1,"knowledge-nav","text-omit",3,"ngStyle"],["class","knowledge-nav-item",3,"hidden",4,"ngFor","ngForOf"],["id","edit-content-box",1,"page"],[1,"title-input"],["type","text","maxlength","1000",1,"article-title","fe-wiki-title","p-l-20","p-r-20","t-a-l",3,"placeholder","ngModel","readOnly","ngModelChange"],["class","collapse-all-icon cursor-pointer",3,"title","click",4,"ngIf"],["class","tag-pop-box",4,"ngIf"],["class","position-r",3,"hidden","mouseover","mouseout",4,"ngFor","ngForOf"],["class","create-paragraph cursor-pointer p-b-20",3,"click",4,"ngIf"],["class","show-preview p-20",4,"ngIf"],["id","bottomWorkitemPositionArticle",1,"top-position-styl"],["class","right m-r-12",3,"hidden","ngStyle",4,"ngIf"],[1,"small-btn-warp",3,"hidden","ngStyle"],[1,"small-btn","annotation-btn","text-omit",3,"title","click"],[1,"iconfont","icon-template","f-14"],["class","small-btn template-btn",3,"title","click",4,"ngIf"],["class","loading-wrapper",4,"ngIf"],[1,"remote-scroll","slimScrollBar",3,"hidden","scroll"],["richTextRemoterScroll",""],[1,"remote-scroll-inner",3,"ngStyle"],["wikiUnlockTips",""],["popoverList",""],[1,"title","m-l-12"],[1,"doc-full-table",3,"click"],[1,"iconfont","icon-icon-crown"],[3,"id","hidden"],[1,"buttons","m-r-12"],[3,"model","categoryId","dictionaryId","currentDomain","contentChanged","showPreview","wikiEditFunction","saveBool","isCreatedOnce","fullScreenCtrl","selected","preview"],["categorySelector",""],[1,"left","m-l-12","position-r",3,"hidden","ngStyle","mouseover","mouseout"],[1,"article-outline-wrap","slimScrollBar"],["id","scrollParentOutline",1,"article-outline-show"],[3,"origin","needBorder"],["nz-tooltip","",1,"outline-toggle-icon","cursor-pointer","reserve-span-show",3,"nzTooltipPlacement","nzTooltipTitle","click"],[1,"iconfont","icon","f-16","txt-999"],["class","article-hidden-wrapper",4,"ngIf"],[1,"article-hidden-wrapper"],["class","outline-style",3,"active-li-styl","ngStyle",4,"ngFor","ngForOf"],[1,"outline-style",3,"ngStyle"],[1,"knowledge-nav-item",3,"hidden"],[1,"nav-item-width","text-omit"],[3,"title"],["class","split-line-top",4,"ngIf"],[1,"split-line-top"],[1,"collapse-all-icon","cursor-pointer",3,"title","click"],[1,"iconfont","icon"],[1,"tag-pop-box"],[1,"popover-item"],["id","additiveAttributeTip","nz-popover","","nzPopoverTrigger","click","nzPopoverPlacement","left",1,"popover-item1",3,"nzPopoverContent"],[1,"position-r",3,"hidden","mouseover","mouseout"],["class","title-input position-r",4,"ngIf"],["initEditor","","class","create-article-container",3,"tab","description","hidden","toolbarContailerSelector","richTextId","type","insertContentEvent","getContentEvent","refreshContentEvent","workitemInfo","username","structuredTableInfo","markdownOptions","saveContent","tableConfigInfo","articleAttachmentInfo","tingDesignInfo","readonly","editorInit","initInstanceCallback","visionOnEditorChanged","getEditorContent","focusOnEditor","saveContentEmit","fullTableEmit","imgLoaded",4,"ngIf"],["class","txt-999 p-l-20 p-b-20",3,"dblclick",4,"ngIf"],["nz-popconfirm","","nzPopconfirmPlacement","bottom","nzPopconfirmPlacement","leftTop",1,"delete-btn","iconfont","icon-delete","cursor-pointer","f-20",3,"hidden","nzPopconfirmTitle","nzOkText","nzCancelText","nzOnConfirm"],["deleteConfirmTemp",""],[1,"title-input","position-r"],["type","text","maxlength","1000","autocomplete","off",1,"article-title","p-l-20","p-r-20","t-a-l",3,"placeholder","ngModel","id","hidden","readonly","ngModelChange"],[1,"hidden-h1","position-a"],["initEditor","",1,"create-article-container",3,"tab","description","hidden","toolbarContailerSelector","richTextId","type","insertContentEvent","getContentEvent","refreshContentEvent","workitemInfo","username","structuredTableInfo","markdownOptions","saveContent","tableConfigInfo","articleAttachmentInfo","tingDesignInfo","readonly","editorInit","initInstanceCallback","visionOnEditorChanged","getEditorContent","focusOnEditor","saveContentEmit","fullTableEmit","imgLoaded"],[1,"txt-999","p-l-20","p-b-20",3,"dblclick"],[1,"tab-deleted-tip"],[1,"tab-deleted-tip-span","m-l-5","f-16"],[1,"double-click-reset","f-18"],[1,"flex-box"],[2,"flex","1"],["nz-icon","","nzType","exclamation-circle",2,"color","#faad14",3,"nzTheme"],[2,"flex","9"],[1,"txt-333","m-b-5"],[1,"txt-999"],[1,"create-paragraph","cursor-pointer","p-b-20",3,"click"],[1,"iconfont","icon-add","m-r-5","m-l-20"],[1,"show-preview","p-20"],[3,"scrollInEL","docContent","docType"],[1,"right","m-r-12",3,"hidden","ngStyle"],[1,"template-list","position-r"],[1,"iconfont","icon-to-right","position-a",3,"click"],[3,"nzSelectedIndex","nzSelectedIndexChange"],[3,"nzTitle",4,"ngIf"],["class","comment-wrapper",3,"nzTitle",4,"ngIf"],[3,"nzTitle"],[1,"feture-list-wrapper"],[3,"hover-cursor-pointer","click",4,"ngFor","ngForOf"],[3,"click"],[1,"img-wrapper-styl","flex-item-left"],[1,"iconfont","icon-cup","m-r-5"],[1,"flex-item-right"],[1,"m-r-5"],[1,"comment-wrapper",3,"nzTitle"],[3,"isCoe","creatorId","articleId","onlyShowAnnotation","currentDomain",4,"ngIf"],[3,"isCoe","creatorId","articleId","onlyShowAnnotation","currentDomain"],[3,"wikiSn","model","articleDetails","updateAttributeValue"],[1,"small-btn","template-btn",3,"title","click"],[1,"iconfont","icon-comment-left-tail","f-12"],[1,"loading-wrapper"],["nzSimple","",3,"nzIndicator"],["indicatorTemplate",""],["nz-icon","","nzType","loading",2,"font-size","24px"],[1,"unlock-tips"],[1,"tip-left"],[1,"iconfont","icon-warning","icon"],[1,"tip-right"],[1,"tip-title"],[1,"tip-content"],[1,"tip-buttons"],["nz-button","",1,"refuse",3,"click"],["nz-button","",1,"cancle",3,"click"],["nz-button","",1,"save-quit",3,"click"],[1,"menu-popover-list"],[1,"menu-popover-content"],[1,"menu-popover-div"],["nz-button","","nzType","primary",1,"menu-popover-submit",3,"click"]],template:function(e,t){1&e&&(O["\u0275\u0275elementStart"](0,"div",0,1),O["\u0275\u0275elementStart"](2,"div",2),O["\u0275\u0275template"](3,te,2,1,"div",3),O["\u0275\u0275template"](4,ne,5,3,"div",4),O["\u0275\u0275elementStart"](5,"div",5),O["\u0275\u0275template"](6,ie,1,4,"div",6),O["\u0275\u0275elementEnd"](),O["\u0275\u0275template"](7,oe,3,10,"div",7),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](8,"div",8,9),O["\u0275\u0275template"](10,se,7,18,"div",10),O["\u0275\u0275elementStart"](11,"div",11),O["\u0275\u0275element"](12,"div",12),O["\u0275\u0275elementStart"](13,"div",13),O["\u0275\u0275template"](14,pe,5,4,"div",14),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementStart"](15,"div",15),O["\u0275\u0275elementStart"](16,"div",16),O["\u0275\u0275elementStart"](17,"input",17),O["\u0275\u0275listener"]("ngModelChange",function(e){return t.articleTitle=e}),O["\u0275\u0275pipe"](18,"translate"),O["\u0275\u0275elementEnd"](),O["\u0275\u0275template"](19,ue,3,5,"div",18),O["\u0275\u0275elementEnd"](),O["\u0275\u0275template"](20,me,3,1,"div",19),O["\u0275\u0275template"](21,be,9,12,"div",20),O["\u0275\u0275template"](22,Ce,5,3,"div",21),O["\u0275\u0275template"](23,ye,2,3,"div",22),O["\u0275\u0275elementEnd"](),O["\u0275\u0275element"](24,"div",23),O["\u0275\u0275elementEnd"](),O["\u0275\u0275template"](25,Me,7,11,"div",24),O["\u0275\u0275elementStart"](26,"div",25),O["\u0275\u0275elementStart"](27,"div",26),O["\u0275\u0275listener"]("click",function(){return t.handleTemplate(0)}),O["\u0275\u0275pipe"](28,"translate"),O["\u0275\u0275element"](29,"i",27),O["\u0275\u0275elementEnd"](),O["\u0275\u0275template"](30,Pe,3,3,"div",28),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275elementEnd"](),O["\u0275\u0275template"](31,ke,4,1,"div",29),O["\u0275\u0275elementStart"](32,"div",30,31),O["\u0275\u0275listener"]("scroll",function(){return t.onRemoterScroll()}),O["\u0275\u0275element"](34,"div",32),O["\u0275\u0275elementEnd"](),O["\u0275\u0275template"](35,Te,20,17,"ng-template",null,33,O["\u0275\u0275templateRefExtractor"]),O["\u0275\u0275template"](37,De,7,3,"ng-template",null,34,O["\u0275\u0275templateRefExtractor"])),2&e&&(O["\u0275\u0275advance"](2),O["\u0275\u0275property"]("ngStyle",O["\u0275\u0275pureFunction1"](33,Re,t.fullScreenCtrl?1/t.fullScreenZoomSize:null)),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",!t.isEventReport&&!t.fullScreenCtrl&&!t.isFullTable),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",t.isFullTable),O["\u0275\u0275advance"](2),O["\u0275\u0275property"]("ngForOf",t.tabArr),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",!t.isFullTable),O["\u0275\u0275advance"](3),O["\u0275\u0275property"]("ngIf",!t.isEventReport),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngStyle",t.fullScreenCtrl?O["\u0275\u0275pureFunction0"](35,Le):null),O["\u0275\u0275advance"](2),O["\u0275\u0275classProp"]("hidden",t.showPreview),O["\u0275\u0275property"]("ngStyle",t.fullScreenCtrl?O["\u0275\u0275pureFunction0"](36,Ne):null),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngForOf",t.navigatioList),O["\u0275\u0275advance"](3),O["\u0275\u0275property"]("placeholder",O["\u0275\u0275pipeBind1"](18,29,"ARTICLE_TITLE_PLACEHOLDER"))("ngModel",t.articleTitle)("readOnly",t.showPreview),O["\u0275\u0275advance"](2),O["\u0275\u0275property"]("ngIf","update-event-report"!==t.model&&!t.fullScreenCtrl),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",t.additiveAttributeTipShow),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngForOf",t.tabArr),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",!t.showPreview&&"document"===t.categoryType&&!t.strictTplSource.includes(null==t.articleDetails?null:t.articleDetails.source_system)&&"PRD"!==(null==t.category?null:t.category.classify)),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",t.showPreview),O["\u0275\u0275advance"](2),O["\u0275\u0275property"]("ngIf",!t.isEventReport),O["\u0275\u0275advance"](1),O["\u0275\u0275classProp"]("hidden",t.showTemplate),O["\u0275\u0275property"]("hidden",t.fullScreenCtrl)("ngStyle",O["\u0275\u0275pureFunction1"](37,le,t.showPreview?"hidden":"visible")),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("title",O["\u0275\u0275pipeBind1"](28,31,"SELECTED_FEATURE_WORK")),O["\u0275\u0275advance"](3),O["\u0275\u0275property"]("ngIf","update-article"===t.model),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("ngIf",t.showLoading),O["\u0275\u0275advance"](1),O["\u0275\u0275property"]("hidden",!t.richTextRemoterShow),O["\u0275\u0275advance"](2),O["\u0275\u0275property"]("ngStyle",O["\u0275\u0275pureFunction1"](39,je,t.richTextRemoterInnerWidth+"px")))},directives:[D.o,D.n,D.m,A.d,A.h,A.k,A.l,z.a,R.a,L.d,N.a,j.a,V.a,F.a,B.a,U.a,W.a,H.b,H.a,G.a,q.a,$.a,K.a,X.a],pipes:[P.b],styles:['.locking-tip-box[_ngcontent-%COMP%]{width:280px;background-color:#fff;padding:16px;display:flex;flex-direction:column;justify-content:space-between;border-radius:4px;box-shadow:0 0 6px rgba(0,0,0,.14);position:relative}.locking-tip-box[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%]{color:#5f5f5f;font-size:16px;margin-right:8px}.locking-tip-box[_ngcontent-%COMP%]   .tip-button[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:row-reverse}.locking-tip-box[_ngcontent-%COMP%]   .tip-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;font-size:14px;color:#fff;background-color:#23c6c8;border:none;padding:0 9px;height:28px}.locking-tip-box[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;color:rgba(0,0,0,.45);padding:8px;top:0;right:0}  .locking-tooltip .ant-tooltip-arrow .ant-tooltip-arrow-content{background-color:#fff}  .locking-tooltip .ant-tooltip-inner{padding:0;background-color:#fff;box-shadow:none}.reload-tips[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]{display:flex;padding:16px}.reload-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]{margin-right:12px;flex:0 0 auto}.reload-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:20px;color:#fa0}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]{flex:1 1 auto}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%]{font-size:16px;color:#333}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-content[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-content[_ngcontent-%COMP%]{color:#5f5f5f;font-size:14px;margin:8px 0}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:28px;line-height:28px;border-radius:4px;padding:0 11px;margin-right:12px}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.cancle[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.cancle[_ngcontent-%COMP%]{color:#23c6c8;border-color:#23c6c8}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.reload[_ngcontent-%COMP%], .reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.save-quit[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.reload[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.save-quit[_ngcontent-%COMP%]{color:#fff;border:none;background-color:#23c6c8}.wait-collab-tips[_ngcontent-%COMP%]{color:#5f5f5f;padding:18px 16px;background-color:#fff;font-size:12px;box-shadow:0 0 6px rgba(0,0,0,.14);border-radius:4px}  .notification-box.ant-notification-notice{padding:0}.create-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 126px)}.update-markdown-height[_ngcontent-%COMP%]{height:calc(100vh - 164px)}[_nghost-%COMP%]     .vditor-toolbar{background-color:#fff;border-bottom:0}[_nghost-%COMP%]     .vditor, [_nghost-%COMP%]     .vditor-ir pre.vditor-reset{border:none}[_nghost-%COMP%]     .vditor-sv{background-color:#fff}[_nghost-%COMP%]     .vditor-toolbar--pin{padding-left:0!important}[_nghost-%COMP%]     .vditor-toolbar__divider{position:relative;top:3px}[_nghost-%COMP%]     .vditor-toolbar__item{top:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped{width:30px;height:30px;padding:5px;border-radius:3px}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped:hover{background:#dee0e2;color:#222f3e}[_nghost-%COMP%]     .vditor-toolbar__item .vditor-tooltipped input{width:30px;height:30px}[_nghost-%COMP%]     .vditor-hint button:not(.vditor-menu--disabled):hover{background-color:#dee0e2!important;color:#676a6c!important}[_nghost-%COMP%]     .vditor-menu--current{color:#23c6c8!important}[_nghost-%COMP%]     .vditor-reset h1, [_nghost-%COMP%]     .vditor-reset h2{border-bottom:0}[_nghost-%COMP%]     .vditor-ir .vditor-reset{padding:10px 35px!important}[_nghost-%COMP%]     .vditor-ir pre.vditor-reset:focus{background-color:#fff}[_nghost-%COMP%]     .toolbar .tox-editor-header{border:none}[_nghost-%COMP%]     .doc-cnt, [_nghost-%COMP%]     .md-editor textarea{min-height:900px}[_nghost-%COMP%]     .doc-cnt::-webkit-scrollbar{display:none}[_nghost-%COMP%]     .create-article-container .toolbar{position:fixed;top:10px;display:flex;justify-content:center;z-index:1}[_nghost-%COMP%]     .create-article-container .tox-toolbar__overflow{max-width:50px}[_nghost-%COMP%]     .create-article-container .box{height:100%}[_nghost-%COMP%]     .vditor-toolbar--pin{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info{position:fixed!important;top:50px;left:50%;transform:translateX(-50%);display:flex!important;justify-content:center;align-items:center;z-index:1;color:#8a6d3b;padding:2px 0;background-color:#fcf8e3;border-color:#faebcc;font-size:12px;height:36px}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info .fa-exclamation-triangle{margin-top:2px}[_nghost-%COMP%]     .MD-and-richtext-editor .localhost-info .icon-cancel{margin-top:2px;padding-left:20px}.create-article-wrapper[_ngcontent-%COMP%]   .md-toolbar[_ngcontent-%COMP%]{position:relative;top:-5px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .reserve-span-show[_ngcontent-%COMP%]{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]{min-width:24px;max-width:340px;max-height:calc(100vh - 100px);position:fixed;overflow-y:auto;margin-top:24px;padding:12px;border-radius:4px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-index[_ngcontent-%COMP%]{z-index:100}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-show[_ngcontent-%COMP%]{min-width:300px;min-height:160px;background:#fff;padding:12px;box-shadow:0 0 6px rgba(0,0,0,.08)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-show-wrapper[_ngcontent-%COMP%]{background:#f9f9f9;box-shadow:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]:hover   .reserve-span-show[_ngcontent-%COMP%]{display:block}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-outline-wrap[_ngcontent-%COMP%]:hover   .article-hidden-wrapper[_ngcontent-%COMP%]{display:none}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .article-hidden-wrapper[_ngcontent-%COMP%]{transform:rotateY(180deg);display:block;position:fixed;top:70px;left:15px;width:24px;max-height:calc(100vh - 280px);padding:12px 0;color:#e5e5e5;overflow:hidden;z-index:1;cursor:pointer}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-style[_ngcontent-%COMP%]{display:flex;height:20px;width:100%;margin-bottom:8px;line-height:20px;font-size:12px;font-weight:400}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-style[_ngcontent-%COMP%]:before{content:"";flex:0 0 auto;margin:auto 7px auto 0;height:2px;width:24px;padding-left:1px;background:currentColor}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]{color:#23c6c8!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon[_ngcontent-%COMP%]{position:absolute;top:25px;right:30px;z-index:10}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon.collapsed[_ngcontent-%COMP%]{transform:rotate(0deg)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-toggle-icon[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]{position:absolute;top:55px;left:-40px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]{background:#23c6c8!important;height:4px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-content-styl[_ngcontent-%COMP%]{width:100%}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]{list-style:none;height:26px;line-height:26px;color:#999;font-size:12px;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%]   .li-word-styl[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .outline-ul-styl-hidden[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]   .li-word-styl[_ngcontent-%COMP%]{position:absolute;min-width:8px;top:12px;height:2px;left:0;background:#676a6c6e;max-width:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]{color:#aaa;font-size:14px;margin-left:20px;line-height:36px;display:flex}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]{display:flex}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   .nav-item-width[_ngcontent-%COMP%]{max-width:140px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   .nav-item-width[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 6px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .page[_ngcontent-%COMP%]{padding-top:12px;background-color:#fff;border:1px solid #e8e8e8;box-shadow:0 2px 8px #73737314}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .page-style[_ngcontent-%COMP%]{padding-top:0}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .create-article-height[_ngcontent-%COMP%]{min-height:calc(100vh - 62px)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .update-article-height[_ngcontent-%COMP%]{min-height:calc(100vh - 100px)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .sv-markdown-title[_ngcontent-%COMP%]{display:flex;background:#fafbfc;margin-bottom:-2px;flex:1;padding-top:12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .input-color[_ngcontent-%COMP%]{background:#fafbfc;max-width:800px;margin:0 auto;color:#434343!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1 1 auto;border:none;outline:none;font-weight:700;font-style:normal;font-size:32px;color:#23c6c8;margin-bottom:0;margin-top:0}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .input-style[_ngcontent-%COMP%]{flex:1;padding-right:0;padding-top:12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]{margin-right:18px;text-align:center;line-height:30px;flex:0 0 30px;height:30px;position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .collapse-all-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:24px;vertical-align:top;transition:all .2s}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .position-child-div[_ngcontent-%COMP%]{height:1px;width:100%;background:#fff}.header-shadow[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-shadow[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%], .header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:0 0 280px}.header-shadow[_ngcontent-%COMP%]   .markdown-title[_ngcontent-%COMP%]{flex:0 0 120px}.header-shadow[_ngcontent-%COMP%]   .markdown-buttons[_ngcontent-%COMP%]{flex:0 0 280px}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{flex:1 1 auto}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .tox-toolbar__primary{display:flex;justify-content:center}.header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;font-weight:700;font-style:normal;font-size:16px;color:#676a6c}.header-shadow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .collab-users[_ngcontent-%COMP%]{margin-left:22px}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header{display:flex;align-items:center;justify-content:center}.header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header .md-controls{width:30px;text-align:center}.template-list[_ngcontent-%COMP%]{margin-top:20px;height:calc(100% - 40px)}.template-list[_ngcontent-%COMP%]   .icon-to-right[_ngcontent-%COMP%]{cursor:pointer;top:16px;z-index:1}.create-article-wrapper[_ngcontent-%COMP%]   .active-full-screen[_ngcontent-%COMP%]{width:100%!important;height:100%;top:0;margin-top:0!important;overflow:hidden}.create-article-wrapper[_ngcontent-%COMP%]   .content.flex-j-c[_ngcontent-%COMP%]{justify-content:center!important}.create-article-wrapper[_ngcontent-%COMP%]   .right.non-width[_ngcontent-%COMP%]{flex:0}.tag-list[_ngcontent-%COMP%]{background:#fff}.tag-manager[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;display:inline-block;width:100%;padding-bottom:12px}.small-btn-warp[_ngcontent-%COMP%]{top:0;padding-top:36px;height:100%;position:-webkit-sticky;position:sticky}.small-btn-warp[_ngcontent-%COMP%]   .small-btn[_ngcontent-%COMP%]{margin-bottom:8px;width:26px;height:22px;line-height:22px;display:flex;justify-content:center;background:#eee;color:#676a6c;cursor:pointer;border-radius:11px;position:relative;left:-4px}[_nghost-%COMP%]     .tag-list .ant-dropdown-link{margin-left:0!important}[_nghost-%COMP%]     .template-list .ant-tabs{height:100%}[_nghost-%COMP%]     .template-list .ant-tabs-content{height:100%}[_nghost-%COMP%]     .template-list #scrollParentWikiComment{height:100%;padding:0}[_nghost-%COMP%]     .template-list .comment-input{display:none}[_nghost-%COMP%]     .template-list .select-wrapper{display:none!important}[_nghost-%COMP%]     .template-list .ant-tabs-tab-active .ant-tabs-tab-btn{color:#23c6c8!important}[_nghost-%COMP%]     .template-list .ant-tabs-ink-bar{background-color:#23c6c8!important}[_nghost-%COMP%]     .template-list .ant-tabs-nav{position:relative;left:40px}[_nghost-%COMP%]     .template-list .comment-wrapper #bottomPositionWikiComment, [_nghost-%COMP%]     .template-list .comment-wrapper #topPositionWikiComment{background:transparent}[_nghost-%COMP%]     .template-list .comment-wrapper .annotation-item{background:#fff}[_nghost-%COMP%]     #previewWrapper, [_nghost-%COMP%]     .doc-cnt, [_nghost-%COMP%]     .md-editor .auto-growing:after, [_nghost-%COMP%]     .md-input{padding:20px!important}  .confirm-cancel-modal .ant-modal-content{border-radius:4px;height:160px;position:relative;box-shadow:0 0 8px rgba(0,0,0,.2)}  .confirm-cancel-modal .ant-modal-header{padding:20px 0 16px 20px;border-bottom:none}  .confirm-cancel-modal .ant-modal-header .ant-modal-title{font-size:20px;color:#333}  .confirm-cancel-modal .ant-modal-body{padding-left:20px;font-size:14px;color:#676a6c}  .confirm-cancel-modal .ant-modal-footer{position:absolute;bottom:32px;right:32px;padding:0;border-top:none}  .confirm-cancel-modal .ant-modal-footer button{margin-right:12px;margin-left:0}  .confirm-cancel-modal .ant-modal-footer button:first-child{background:#23c6c8;color:#fff}  .confirm-cancel-modal .ant-modal-footer button:last-child{margin-right:0}.loading-wrapper[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;background:hsla(0,0%,100%,.7)}.loading-wrapper[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.remote-scroll[_ngcontent-%COMP%]{position:fixed;left:0;right:0;z-index:100;bottom:0;overflow:scroll hidden}.remote-scroll[_ngcontent-%COMP%]   .remote-scroll-inner[_ngcontent-%COMP%]{width:150%;height:1px}.converting-mask[_ngcontent-%COMP%]{z-index:5000;position:fixed;left:0;right:0;top:0;bottom:0;background-color:hsla(0,0%,100%,.7)}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin-top:20px;margin-right:20px;width:330px;height:78px;display:flex;background-color:#fff;border:1px solid #eaeaea;filter:drop-shadow(rgba(0,0,0,.1) 0 2px 12px);border-radius:5px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{flex:50px 0 0;text-align:center;line-height:52px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:20px;color:#aaa}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:auto 1 1}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;color:#333;font-size:16px;line-height:50px}.converting-mask[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{color:#5f5f5f;font-size:12px;line-height:1}.doc-full-table[_ngcontent-%COMP%]{cursor:pointer;padding:10px 0;font-weight:400}.doc-full-table[_ngcontent-%COMP%]:hover{color:#23c6c8}.doc-full-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:rotate(90deg);display:inline-block}.doc-full-table[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}  .edit-artical-wide input.article-title{max-width:736px;padding:5px}[_nghost-%COMP%]     .doc-cnt, [_nghost-%COMP%]     .md-editor textarea{min-height:200px}[_nghost-%COMP%]     .ant-tabs-tab+.ant-tabs-tab{margin:0}.create-article-wrapper[_ngcontent-%COMP%]{overflow-y:hidden;z-index:99;position:fixed;left:0;right:0;top:0;bottom:0;overflow:hidden;background:#f9f9f9}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]{position:absolute;z-index:1;left:0;right:0;width:100%;height:50px;background:#fff;box-shadow:0 4px 6px rgba(0,0,0,.04)}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:50px;bottom:0;display:flex;overflow:auto;padding-bottom:10px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{align-self:flex-start;top:0;position:-webkit-sticky;position:sticky;flex:2 1 100px;max-width:340px;min-width:300px;overflow:hidden;height:100%}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .position-r[_ngcontent-%COMP%]{position:relative!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]{height:100%;position:-webkit-sticky;position:sticky;top:0;flex:0 0 0px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{top:36px;right:16px;font-size:18px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .collapse-all[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1 1 900px;overflow-x:hidden;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:0 12px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .create-paragraph[_ngcontent-%COMP%]{color:#23c6c8;font-weight:700}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-weight:700;font-style:normal;font-size:32px;color:#999}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]   .article-title[_ngcontent-%COMP%]{color:#999!important}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{position:absolute;right:20px;top:6px;font-size:18px}.create-article-wrapper[_ngcontent-%COMP%]   .doc-content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .tab-deleted-tip[_ngcontent-%COMP%]{height:42px;line-height:42px;font-size:26px}.hidden-h1[_ngcontent-%COMP%]{opacity:0;right:-100%;top:0;z-index:0}.img-wrapper-styl[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#8d71c6}.flex-item-left[_ngcontent-%COMP%]{display:inline-block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.flex-item-right[_ngcontent-%COMP%]{color:#999;margin-top:-5px;margin-left:20px}.feture-list-wrapper[_ngcontent-%COMP%]{background:#fff;height:100%;padding:10px}.hover-cursor-pointer[_ngcontent-%COMP%]{border-radius:3px}.hover-cursor-pointer[_ngcontent-%COMP%]:hover{cursor:pointer;background:#f5f5f5}li[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{padding:5px;margin:0 0 5px;list-style-type:none}.tag-pop-box[_ngcontent-%COMP%]{position:relative}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#afe8e9;position:absolute;right:-11px;top:90px}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item1[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;background-color:#23c6c8;margin:3px;position:relative}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item1[_ngcontent-%COMP%]:after{content:"";display:block;width:12px;height:12px;border-radius:50%;background-color:#fff;position:absolute;top:2px;left:2px}.tag-pop-box[_ngcontent-%COMP%]   .popover-item[_ngcontent-%COMP%]   .popover-item2[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background-color:#fff;position:absolute;top:3px;left:3px;cursor:pointer}.menu-popover-list[_ngcontent-%COMP%]{width:260px;overflow:hidden}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-content[_ngcontent-%COMP%]{width:100%;overflow:hidden;margin-bottom:10px}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-content[_ngcontent-%COMP%]   .menu-popover-div[_ngcontent-%COMP%]{line-height:26px;margin:0;font-size:14px;cursor:pointer;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{position:relative;background:transparent;text-shadow:none;border-radius:4px}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:focus, .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:hover{outline:none}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{color:#23c6c8;border:1px solid #23c6c8}  .edit-artical-wide .mce-content-body>*{max-width:760px;margin:auto!important}  .edit-artical-wide input.article-title{max-width:760px;margin:auto;padding:0}  .edit-artical-wide input.fe-wiki-title{max-width:718px;padding:0}  .edit-artical-wide .width-table{max-width:100%!important}'],data:{animation:[Object(b.l)("outlineToggle",[Object(b.i)("open",Object(b.j)({flex:"2 1 100px","min-width":"300px"})),Object(b.i)("closed",Object(b.j)({flex:"0 0 20px","min-width":"0px"})),Object(b.k)("open => closed",[Object(b.e)("0.2s ease-out")]),Object(b.k)("closed => open",[Object(b.e)("0.2s ease-out")])]),Object(b.l)("enterAnimation2",[Object(b.i)("open",Object(b.j)({opacity:1})),Object(b.i)("closed",Object(b.j)({opacity:0})),Object(b.k)("open => closed",[Object(b.e)("0s")]),Object(b.k)("closed => open",[Object(b.e)("1s ease-in")])])]}}),t}(C.a)},UJq8:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){this.eventEmit=new i.EventEmitter}return e.prototype.emit=function(e,t){this.eventEmit.emit(e,t)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}()},Vuwd:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("mrSG"),o=n("lJxs"),r=n("vNWM"),a=n("fXoL"),c=n("tk/3"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.http=t,n}return Object(i.d)(t,e),t.prototype.querySelectData=function(e){return this.http.get("/vision-defect-management/api/query/issue_custom_attr?domain_id="+e.domain_id+"&attr_key="+e.attr_key).pipe(Object(o.a)(function(e){return e.data}))},t.prototype.getNumber=function(){return this.http.get("/devops-vulnerabilityV2/api/vul/visionId").pipe(Object(o.a)(function(e){return e.data}))},t.prototype.create=function(e){return this.http.post("/devops-vulnerabilityV2/api/vulnerability",e).pipe(Object(o.a)(function(e){return e.data}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275inject"](c.c))},t.\u0275prov=a["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(r.a)},Vz0L:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("ofXK"),o=n("3Pt+"),r=n("PTRe"),a=n("0lU3"),c=n("z4wI"),l=n("Nqz0"),s=n("FwiY"),d=n("sYmb"),p=n("ZfuR"),u=n("fXoL"),m=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[i.c,r.e,c.b,o.g,l.c,p.a,a.b,s.b,d.a.forRoot()]]}),e}()},WM4a:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("ofXK"),o=n("BbD4"),r=n("3Pt+"),a=n("sYmb"),c=n("dEAy"),l=n("Nqz0"),s=n("PTRe"),d=n("rMZv"),p=n("fXoL"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[o.a,i.c,r.g,a.a.forRoot(),l.c,c.b,s.e,d.d]]}),e}()},X72n:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},XUBH:function(e,t){!function(e){"use strict";var t=function(t,n){e.each(["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"],function(i,o){void 0!==e(t).data(o)&&((n="object"==typeof n?n:{})[o]=e(t).data(o))}),this.$ns="bootstrap-markdown",this.$element=e(t),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=e.extend(!0,{},e.fn.markdown.defaults,n,this.$element.data("options")),this.$oldContent=null,this.$isPreview=!1,this.$isFullscreen=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()};t.prototype={constructor:t,__alterButtons:function(t,n){var i="all"==t,o=this;e.each(this.$handler,function(e,r){0==(!i&&r.indexOf(t)<0)&&n(o.$editor.find('button[data-handler="'+r+'"]'))})},__buildButtons:function(t,n){var i,o=this.$ns,r=this.$handler,a=this.$callback;for(i=0;i<t.length;i++){var c,l=t[i];for(c=0;c<l.length;c++){var s,d=l[c].data,p=e("<div/>",{class:"btn-group"});for(s=0;s<d.length;s++){var u,m,h=d[s],g=o+"-"+h.name,f=this.__getIcon(h.icon),v=h.btnText?h.btnText:"",b=h.btnClass?h.btnClass:"btn",C=h.tabIndex?h.tabIndex:"-1",y=void 0!==h.hotkey?h.hotkey:"",x=void 0!==jQuery.hotkeys&&""!==y?" ("+y+")":"";(u=e("<button></button>")).text(" "+this.__localize(v)).addClass("btn-default btn-sm").addClass(b),b.match(/btn\-(primary|success|info|warning|danger|link)/)&&u.removeClass("btn-default"),u.attr({type:"button",title:this.__localize(h.title)+x,tabindex:C,"data-provider":o,"data-handler":g,"data-hotkey":y}),!0===h.toggle&&u.attr("data-toggle","button"),(m=e("<span/>")).addClass(f),m.prependTo(u),p.append(u),r.push(g),a.push(h.callback)}n.append(p)}}return n},__setListener:function(){var t=void 0!==this.$textarea.attr("rows"),n=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",i=t?this.$textarea.attr("rows"):n;this.$textarea.attr("rows",i),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on({focus:e.proxy(this.focus,this),keyup:e.proxy(this.keyup,this),change:e.proxy(this.change,this),select:e.proxy(this.select,this),drop:e.proxy(this.drop,this),paste:e.proxy(this.paste,this)}),this.eventSupported("keydown")&&this.$textarea.on("keydown",e.proxy(this.keydown,this)),this.eventSupported("keypress")&&this.$textarea.on("keypress",e.proxy(this.keypress,this)),this.$textarea.data("markdown",this)},__handle:function(t){var n=e(t.currentTarget),i=this.$handler,o=this.$callback,r=n.attr("data-handler"),a=o[i.indexOf(r)];e(t.currentTarget).focus(),a(this),this.change(this),this.paste(this),this.drop(this),r.indexOf("cmdSave")<0&&this.$textarea.focus(),t.preventDefault()},__localize:function(t){var n=e.fn.markdown.messages,i=this.$options.language;return void 0!==n&&void 0!==n[i]&&void 0!==n[i][t]?n[i][t]:t},__getIcon:function(e){return"object"==typeof e?e[this.$options.iconlibrary]:e},setFullscreen:function(t){var n=this.$editor,i=this.$textarea;!0===t?(n.addClass("md-fullscreen-mode"),e("body").addClass("md-nooverflow"),this.$options.onFullscreen(this)):(n.removeClass("md-fullscreen-mode"),e("body").removeClass("md-nooverflow"),this.$options.onFullscreenExit(this),!0===this.$isPreview&&this.hidePreview().showPreview()),this.$isFullscreen=t,i.focus()},showEditor:function(){var t,n=this,i=this.$ns,o=this.$element,r=(o.css("height"),o.css("width"),this.$editable),a=this.$handler,c=this.$callback,l=this.$options,s=e("<div/>",{class:"md-editor",click:function(){n.focus()}});if(null===this.$editor){var d=e("<div/>",{class:"md-header btn-toolbar"}),p=[];if(l.buttons.length>0&&(p=p.concat(l.buttons[0])),l.additionalButtons.length>0&&e.each(l.additionalButtons[0],function(t,n){var i=e.grep(p,function(e,t){return e.name===n.name});i.length>0?i[0].data=i[0].data.concat(n.data):p.push(l.additionalButtons[0][t])}),l.reorderButtonGroups.length>0&&(p=p.filter(function(e){return l.reorderButtonGroups.indexOf(e.name)>-1}).sort(function(e,t){return l.reorderButtonGroups.indexOf(e.name)<l.reorderButtonGroups.indexOf(t.name)?-1:l.reorderButtonGroups.indexOf(e.name)>l.reorderButtonGroups.indexOf(t.name)?1:0})),p.length>0&&(d=this.__buildButtons([p],d)),l.fullscreen.enable&&d.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",function(e){e.preventDefault(),n.setFullscreen(!0)}),l.guidance.enables&&d.append('<div class="md-controls"><a class="md-control guidance" title="Guidance" href="#"><i class="iconfont icon-editor-question cursor-pointer"></i></a></div>').on("click",".guidance",function(e){e.preventDefault(),window.open("http://www.jianshu.com/p/q81RER")}),l.saveContent&&d.prepend('<div class="md-controls"><i class="iconfont icon-editor-save cursor-pointer f-14" title="\u4fdd\u5b58"></i></div>').on("click",".icon-editor-save",function(){l.onSaveContentEmit()}),l.enableSwitchRTF&&d.append('<div class="md-controls" style="margin-top: 2px"><i class="iconfont icon-editor-rich-text cursor-pointer" title="\u5207\u6362\u5bcc\u6587\u672c\u7f16\u8f91\u5668"></i></div>').on("click",".icon-editor-rich-text",function(){l.onSwitchToRTF()}),s.append(d),o.is("textarea"))o.before(s),(t=o).addClass("md-input"),s.append(t);else{var u="function"==typeof toMarkdown?toMarkdown(o.html()):o.html(),m=e.trim(u);t=e("<textarea/>",{class:"md-input",val:m}),s.append(t),r.el=o,r.type=o.prop("tagName").toLowerCase(),r.content=o.html(),e(o[0].attributes).each(function(){r.attrKeys.push(this.nodeName),r.attrValues.push(this.nodeValue)}),o.replaceWith(s)}var h,g=e("<div/>",{class:"md-footer"}),f=!1;if(l.savable&&(f=!0,a.push("cmdSave"),c.push(l.onSave),g.append('<button class="btn btn-success" data-provider="'+i+'" data-handler="cmdSave"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")),h="function"==typeof l.footer?l.footer(this):l.footer,""!==e.trim(h)&&(f=!0,g.append(h)),f&&s.append(g),l.width&&"inherit"!==l.width&&(jQuery.isNumeric(l.width)?(s.css("display","table"),t.css("width",l.width+"px")):s.addClass(l.width)),l.height&&"inherit"!==l.height)if(jQuery.isNumeric(l.height)){var v=l.height;d&&(v=Math.max(0,v-d.outerHeight())),g&&(v=Math.max(0,v-g.outerHeight())),t.css("height",v+"px")}else l.height&&"markdownHeightAdaptive"===l.height?t.addClass(l.height):s.addClass(l.height);this.$editor=s,this.$textarea=t,this.$editable=r,this.$oldContent=this.getContent(),this.__setListener(),this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',e.proxy(this.__handle,this)),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this.eventSupported("keydown")&&"object"==typeof jQuery.hotkeys&&d.find('[data-provider="bootstrap-markdown"]').each(function(){var n=e(this),i=n.attr("data-hotkey");""!==i.toLowerCase()&&t.bind("keydown",i,function(){return n.trigger("click"),!1})}),"preview"===l.initialstate?this.showPreview():"fullscreen"===l.initialstate&&l.fullscreen.enable&&this.setFullscreen(!0)}else this.$editor.show();return l.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),l.fullscreen.enable&&!1!==l.fullscreen&&(this.$editor.append('<div class="md-fullscreen-controls"><a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOff)+'"></span></a></div>'),this.$editor.on("click",".exit-fullscreen",function(e){e.preventDefault(),n.setFullscreen(!1)}),this.$editor.append('<div class="md-fullscreen-controls" style="right: 50px;"><a class="md-control guidance" target="_blank" title="Guidance" href="http://www.jianshu.com/p/q81RER"><i class="iconfont icon-editor-question cursor-pointer"></i></a></div>')),this.hideButtons(l.hiddenButtons),this.disableButtons(l.disabledButtons),l.dropZoneOptions&&(this.$editor.dropzone?(l.dropZoneOptions.init||(l.dropZoneOptions.init=function(){var e=0;this.on("drop",function(n){e=t.prop("selectionStart")}),this.on("success",function(n,i){var o=t.val();t.val(o.substring(0,e)+"\n![description]("+i+")\n"+o.substring(e))}),this.on("error",function(e,t,n){console.log("Error:",t)})}),this.$textarea.addClass("dropzone"),this.$editor.dropzone(l.dropZoneOptions)):console.log("dropZoneOptions was configured, but DropZone was not detected.")),l.onShow(this),this},parseContent:function(e){return e=e||this.$textarea.val(),this.$options.parser?this.$options.parser(e):"object"==typeof markdown?markdown.toHTML(e):"function"==typeof markedImg?markedImg(e):e},showPreview:function(){var t,n,i=this.$options,o=this.$textarea,r=o.next(),a=e("<div/>",{class:"md-preview","data-provider":"markdown-preview"});return!0===this.$isPreview||(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview").enableButtons("cmdSave"),t="string"==typeof(n=i.onPreview(this))?n:this.parseContent(),a.html(filterXSS(t)),r&&"md-footer"==r.attr("class")?a.insertBefore(r):o.parent().append(a),a.css({width:o.outerWidth()+"px",height:o.outerHeight()+"px"}),this.$options.resize&&a.css("resize",this.$options.resize),o.hide(),a.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all"))),this},hidePreview:function(){return this.$isPreview=!1,this.$editor.find('div[data-provider="markdown-preview"]').remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(e){return this.$textarea.val(e),this},findSelection:function(e){var t;if((t=this.getContent().indexOf(e))>=0&&e.length>0){var n,i=this.getSelection();return this.setSelection(t,t+e.length),n=this.getSelection(),this.setSelection(i.start,i.end),n}return null},getSelection:function(){var e=this.$textarea[0];return("selectionStart"in e&&function(){var t=e.selectionEnd-e.selectionStart;return{start:e.selectionStart,end:e.selectionEnd,length:t,text:e.value.substr(e.selectionStart,t)}}||function(){return null})()},setSelection:function(e,t){var n=this.$textarea[0];return("selectionStart"in n&&function(){n.selectionStart=e,n.selectionEnd=t}||function(){return null})()},replaceSelection:function(e){var t=this.$textarea[0];return("selectionStart"in t&&function(){return t.value=t.value.substr(0,t.selectionStart)+e+t.value.substr(t.selectionEnd,t.value.length),t.selectionStart=t.value.length,this}||function(){return t.value+=e,jQuery(t)})()},getNextTab:function(){if(0===this.$nextTab.length)return null;var e,t=this.$nextTab.shift();return"function"==typeof t?e=t():"object"==typeof t&&t.length>0&&(e=t),e},setNextTab:function(e,t){if("string"==typeof e){var n=this;this.$nextTab.push(function(){return n.findSelection(e)})}else if("number"==typeof e&&"number"==typeof t){var i=this.getSelection();this.setSelection(e,t),this.$nextTab.push(this.getSelection()),this.setSelection(i.start,i.end)}},__parseButtonNameParam:function(e){return"string"==typeof e?e.split(" "):e},enableButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.removeAttr("disabled")})}),this},disableButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.attr("disabled","disabled")})}),this},hideButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.addClass("hidden")})}),this},showButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.removeClass("hidden")})}),this},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},keyup:function(e){var t=!1;switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var n;if(null!==(n=this.getNextTab())){var i=this;setTimeout(function(){i.setSelection(n.start,n.end)},500),t=!0}else{var o=this.getSelection();o.start==o.end&&o.end==this.getContent().length?t=!1:(this.setSelection(this.getContent().length,this.getContent().length),t=!0)}break;case 13:t=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1),t=!1;break;default:t=!1}t&&(e.stopPropagation(),e.preventDefault()),this.$options.onChange(this)},change:function(e){return this.$options.onChange(this),this},select:function(e){return this.$options.onSelect(this),this},focus:function(t){var n=this.$options,i=this.$editor;return i.addClass("active"),e(document).find(".md-editor").each(function(){var t;e(this).attr("id")!==i.attr("id")&&(null===(t=e(this).find("textarea").data("markdown"))&&(t=e(this).find('div[data-provider="markdown-preview"]').data("markdown")),t&&t.blur())}),n.onFocus(this),this},blur:function(t){var n=this.$options,i=n.hideable,o=this.$editor,r=this.$editable;if(o.hasClass("active")||0===this.$element.parent().length){if(o.removeClass("active"),i)if(null!==r.el){var a=e("<"+r.type+"/>"),c=this.getContent(),l=this.parseContent(c);e(r.attrKeys).each(function(e,t){a.attr(r.attrKeys[e],r.attrValues[e])}),a.html(l),o.replaceWith(a)}else o.hide();n.onBlur(this)}return this},drop:function(e){if(!e.$ns)return e.stopPropagation(),e.preventDefault(),this.$textarea.originalEvent=e.originalEvent,this.$options.onDrop(this),this},paste:function(e){return this.$textarea.originalEvent=e.originalEvent,this.$options.onPaste(this),this}};var n=e.fn.markdown,i="iconfont cursor-pointer f-14";e.fn.markdown=function(n){return this.each(function(){var i=e(this),o=i.data("markdown");o||i.data("markdown",o=new t(this,"object"==typeof n&&n))})},e.fn.markdown.messages={},e.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",parser:null,dropZoneOptions:null,enableDropDataUri:!1,buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:i+" icon-editor-bold",fa:"fa fa-bold","fa-3":"icon-bold",octicons:"octicon octicon-bold"},callback:function(e){var t,n,i=e.getSelection(),o=e.getContent();t=0===i.length?e.__localize("strong text"):i.text,"**"===o.substr(i.start-2,2)&&"**"===o.substr(i.end,2)?(e.setSelection(i.start-2,i.end+2),e.replaceSelection(t),n=i.start-2):(e.replaceSelection("**"+t+"**"),n=i.start+2),e.setSelection(n,n+t.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:i+" icon-editor-italic",fa:"fa fa-italic","fa-3":"icon-italic",octicons:"octicon octicon-italic"},callback:function(e){var t,n,i=e.getSelection(),o=e.getContent();t=0===i.length?e.__localize("emphasized text"):i.text,"_"===o.substr(i.start-1,1)&&"_"===o.substr(i.end,1)?(e.setSelection(i.start-1,i.end+1),e.replaceSelection(t),n=i.start-1):(e.replaceSelection("_"+t+"_"),n=i.start+1),e.setSelection(n,n+t.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:i+" icon-editor-heading",fa:"fa fa-header","fa-3":"icon-font",octicons:"octicon octicon-text-size"},callback:function(e){var t,n,i,o,r=e.getSelection(),a=e.getContent();t=0===r.length?e.__localize("heading text"):r.text+"\n","### "===a.substr(r.start-(i=4),i)||"###"===a.substr(r.start-(i=3),i)?(e.setSelection(r.start-i,r.end),e.replaceSelection(t),n=r.start-i):r.start>0&&(o=a.substr(r.start-1,1))&&"\n"!=o?(e.replaceSelection("\n\n### "+t),n=r.start+6):(e.replaceSelection("### "+t),n=r.start+4),e.setSelection(n,n+t.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:i+" icon-editor-link",fa:"fa fa-link","fa-3":"icon-link",octicons:"octicon octicon-link"},callback:function(t){var n,i,o,r=t.getSelection();t.getContent(),n=0===r.length?t.__localize("enter link description here"):r.text,o=prompt(t.__localize("Insert Hyperlink"),"http://");var a=new RegExp("^((http|https)://|(mailto:)|(//))[a-z0-9]","i");if(null!==o&&""!==o&&"http://"!==o&&a.test(o)){var c=e("<div>"+o+"</div>").text();t.replaceSelection("["+n+"]("+c+")"),t.setSelection(i=r.start+1,i+n.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:i+" icon-editor-list",fa:"fa fa-list","fa-3":"icon-list-ul",octicons:"octicon octicon-list-unordered"},callback:function(t){var n,i,o=t.getSelection();if(t.getContent(),0===o.length)n=t.__localize("list text here"),t.replaceSelection("- "+n),i=o.start+2;else if(o.text.indexOf("\n")<0)t.replaceSelection("- "+(n=o.text)),i=o.start+2;else{var r=[];n=(r=o.text.split("\n"))[0],e.each(r,function(e,t){r[e]="- "+t}),t.replaceSelection("\n\n"+r.join("\n")),i=o.start+4}t.setSelection(i,i+n.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:i+" icon-editor-order-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol",octicons:"octicon octicon-list-ordered"},callback:function(t){var n,i,o=t.getSelection();if(t.getContent(),0===o.length)n=t.__localize("list text here"),t.replaceSelection("1. "+n),i=o.start+3;else if(o.text.indexOf("\n")<0)t.replaceSelection("1. "+(n=o.text)),i=o.start+3;else{var r=1,a=[];n=(a=o.text.split("\n"))[0],e.each(a,function(e,t){a[e]=r+". "+t,r++}),t.replaceSelection("\n\n"+a.join("\n")),i=o.start+5}t.setSelection(i,i+n.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:i+" icon-editor-code",fa:"fa fa-code","fa-3":"icon-code",octicons:"octicon octicon-code"},callback:function(e){var t,n,i=e.getSelection(),o=e.getContent();t=0===i.length?e.__localize("code text here"):i.text,"```\n"===o.substr(i.start-4,4)&&"\n```"===o.substr(i.end,4)?(e.setSelection(i.start-4,i.end+4),e.replaceSelection(t),n=i.start-4):"`"===o.substr(i.start-1,1)&&"`"===o.substr(i.end,1)?(e.setSelection(i.start-1,i.end+1),e.replaceSelection(t),n=i.start-1):o.indexOf("\n")>-1?(e.replaceSelection("```\n"+t+"\n```"),n=i.start+4):(e.replaceSelection("`"+t+"`"),n=i.start+1),e.setSelection(n,n+t.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:i+" icon-editor-quotation",fa:"fa fa-quote-left","fa-3":"icon-quote-left",octicons:"octicon octicon-quote"},callback:function(t){var n,i,o=t.getSelection();if(t.getContent(),0===o.length)n=t.__localize("quote here"),t.replaceSelection("> "+n),i=o.start+2;else if(o.text.indexOf("\n")<0)t.replaceSelection("> "+(n=o.text)),i=o.start+2;else{var r=[];n=(r=o.text.split("\n"))[0],e.each(r,function(e,t){r[e]="> "+t}),t.replaceSelection("\n\n"+r.join("\n")),i=o.start+4}t.setSelection(i,i+n.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search",octicons:"octicon octicon-search"},callback:function(e){!1===e.$isPreview?e.showPreview():e.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full",octicons:"octicon octicon-link-external"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small",octicons:"octicon octicon-browser"}}},guidance:{enables:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"fa fa-question","fa-3":"icon-resize-full",octicons:"octicon octicon-link-external"},fullscreenOff:{fa:"fa fa-compress",glyph:"fa fa-question","fa-3":"icon-resize-small",octicons:"octicon octicon-browser"}}},onShow:function(e){},onPreview:function(e){},onSave:function(e){},onBlur:function(e){},onFocus:function(e){},onChange:function(e){},onPaste:function(e){},onDrop:function(e){},onFullscreen:function(e){},onFullscreenExit:function(e){},onSelect:function(e){}},e.fn.markdown.Constructor=t,e.fn.markdown.noConflict=function(){return e.fn.markdown=n,this};var o=function(e){var t=e;t.data("markdown")?t.data("markdown").showEditor():t.markdown()};e(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(t){o(e(this)),t.preventDefault()}).on("click focusin",function(t){var n;n=e(document.activeElement),e(document).find(".md-editor").each(function(){var t=e(this),i=n.closest(".md-editor")[0]===this,o=t.find("textarea").data("markdown")||t.find('div[data-provider="markdown-preview"]').data("markdown");o&&!i&&o.blur()})}).ready(function(){e('textarea[data-provide="markdown"]').each(function(){o(e(this))})})}(jQuery)},YuSE:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){}return e.prototype.transform=function(e,t){if(null==e)return!1;switch(Object.prototype.toString.call(e).slice(8,-1)){case"String":case"Array":return!!e.length;case"Object":return!!Object.keys(e).length;case"Number":return!isNaN(e);default:return!0}},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"isNotEmpty",type:e,pure:!0}),e}()},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},YwpR:function(e,t,n){var i=n("ISQy"),o=n("u7Jb"),r=n("AlH/"),a=n("F5Ax"),c=n("TVyn"),l=n("3giW");e.exports=function(e,t){var n={};!function(n,s,d){!function(){var p={5836:function(e,t,n){var i={"./assets":1411,"./assets.js":1411,"./author_tip":4858,"./author_tip.js":4858,"./clientManager":7787,"./clientManager.js":7787,"./connectionEvents":9612,"./connectionEvents.js":9612,"./cookies":348,"./cookies.js":348,"./coreConfig":339,"./coreConfig.js":339,"./coreDOM":704,"./coreDOM.js":704,"./coreDatabase":1528,"./coreDatabase.js":1528,"./coreEvents":9948,"./coreEvents.js":9948,"./coreJsonML":178,"./coreJsonML.js":178,"./coreMutation":2131,"./coreMutation.js":2131,"./coreOpApplier":3143,"./coreOpApplier.js":3143,"./coreOpCreator":289,"./coreOpCreator.js":289,"./corePathTree":2562,"./corePathTree.js":2562,"./corePopulator":5822,"./corePopulator.js":5822,"./coreUtils":6068,"./coreUtils.js":6068,"./coreWebsocket":2445,"./coreWebsocket.js":2445,"./dataSavedEvent":9599,"./dataSavedEvent.js":9599,"./databaseErrors":4599,"./databaseErrors.js":4599,"./domEvents":6636,"./domEvents.js":6636,"./globalObject":1366,"./globalObject.js":1366,"./keepAlive":7991,"./keepAlive.js":7991,"./loadedEvent":8170,"./loadedEvent.js":8170,"./messages":827,"./messages.js":827,"./newWebstrates":886,"./newWebstrates.js":886,"./nodeObjects":1347,"./nodeObjects.js":1347,"./permissions":388,"./permissions.js":388,"./protectedMode":7941,"./protectedMode.js":7941,"./signalStream":1049,"./signalStream.js":1049,"./signaling":6455,"./signaling.js":6455,"./tagging":6701,"./tagging.js":6701,"./tracer":7481,"./tracer.js":7481,"./transclusionEvent":2527,"./transclusionEvent.js":2527,"./userHistory":7517,"./userHistory.js":7517,"./userObject":7385,"./userObject.js":7385,"./userObjectSignaling":8012,"./userObjectSignaling.js":8012};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=5836},1889:function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1;t.Diff=function(e,t){return[e,t]},t.prototype.diff_main=function(e,n,i,o){void 0===o&&(o=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=o;if(null==e||null==n)throw new Error("Null input. (diff_main)");if(e==n)return e?[new t.Diff(0,e)]:[];void 0===i&&(i=!0);var a=i,c=this.diff_commonPrefix(e,n),l=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var s=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var d=this.diff_compute_(e,n,a,r);return l&&d.unshift(new t.Diff(0,l)),s&&d.push(new t.Diff(0,s)),this.diff_cleanupMerge(d),d},t.prototype.diff_compute_=function(e,i,o,r){var a;if(!e)return[new t.Diff(1,i)];if(!i)return[new t.Diff(n,e)];var c=e.length>i.length?e:i,l=e.length>i.length?i:e,s=c.indexOf(l);if(-1!=s)return a=[new t.Diff(1,c.substring(0,s)),new t.Diff(0,l),new t.Diff(1,c.substring(s+l.length))],e.length>i.length&&(a[0][0]=a[2][0]=n),a;if(1==l.length)return[new t.Diff(n,e),new t.Diff(1,i)];var d=this.diff_halfMatch_(e,i);if(d){var p=d[1],u=d[3],m=d[4],h=this.diff_main(d[0],d[2],o,r),g=this.diff_main(p,u,o,r);return h.concat([new t.Diff(0,m)],g)}return o&&e.length>100&&i.length>100?this.diff_lineMode_(e,i,r):this.diff_bisect_(e,i,r)},t.prototype.diff_lineMode_=function(e,i,o){var r=this.diff_linesToChars_(e,i),a=r.lineArray,c=this.diff_main(e=r.chars1,i=r.chars2,!1,o);this.diff_charsToLines_(c,a),this.diff_cleanupSemantic(c),c.push(new t.Diff(0,""));for(var l=0,s=0,d=0,p="",u="";l<c.length;){switch(c[l][0]){case 1:d++,u+=c[l][1];break;case n:s++,p+=c[l][1];break;case 0:if(s>=1&&d>=1){c.splice(l-s-d,s+d),l=l-s-d;for(var m=this.diff_main(p,u,!1,o),h=m.length-1;h>=0;h--)c.splice(l,0,m[h]);l+=m.length}d=0,s=0,p="",u=""}l++}return c.pop(),c},t.prototype.diff_bisect_=function(e,i,o){for(var r=e.length,a=i.length,c=Math.ceil((r+a)/2),l=c,s=2*c,d=new Array(s),p=new Array(s),u=0;u<s;u++)d[u]=-1,p[u]=-1;d[l+1]=0,p[l+1]=0;for(var m=r-a,h=m%2!=0,g=0,f=0,v=0,b=0,C=0;C<c&&!((new Date).getTime()>o);C++){for(var y=-C+g;y<=C-f;y+=2){for(var x=l+y,w=(M=y==-C||y!=C&&d[x-1]<d[x+1]?d[x+1]:d[x-1]+1)-y;M<r&&w<a&&e.charAt(M)==i.charAt(w);)M++,w++;if(d[x]=M,M>r)f+=2;else if(w>a)g+=2;else if(h&&(S=l+m-y)>=0&&S<s&&-1!=p[S]&&M>=(O=r-p[S]))return this.diff_bisectSplit_(e,i,M,w,o)}for(var _=-C+v;_<=C-b;_+=2){for(var O,S=l+_,E=(O=_==-C||_!=C&&p[S-1]<p[S+1]?p[S+1]:p[S-1]+1)-_;O<r&&E<a&&e.charAt(r-O-1)==i.charAt(a-E-1);)O++,E++;if(p[S]=O,O>r)b+=2;else if(E>a)v+=2;else if(!h){var M;if((x=l+m-_)>=0&&x<s&&-1!=d[x]&&(w=l+(M=d[x])-x,M>=(O=r-O)))return this.diff_bisectSplit_(e,i,M,w,o)}}}return[new t.Diff(n,e),new t.Diff(1,i)]},t.prototype.diff_bisectSplit_=function(e,t,n,i,o){var r=e.substring(0,n),a=t.substring(0,i),c=e.substring(n),l=t.substring(i),s=this.diff_main(r,a,!1,o),d=this.diff_main(c,l,!1,o);return s.concat(d)},t.prototype.diff_linesToChars_=function(e,t){var n=[],i={};function o(e){for(var t="",o=0,a=-1,c=n.length;a<e.length-1;){-1==(a=e.indexOf("\n",o))&&(a=e.length-1);var l=e.substring(o,a+1);(i.hasOwnProperty?i.hasOwnProperty(l):void 0!==i[l])?t+=String.fromCharCode(i[l]):(c==r&&(l=e.substring(o),a=e.length),t+=String.fromCharCode(c),i[l]=c,n[c++]=l),o=a+1}return t}n[0]="";var r=4e4,a=o(e);return r=65535,{chars1:a,chars2:o(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],o=[],r=0;r<i.length;r++)o[r]=t[i.charCodeAt(r)];e[n][1]=o.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,r=0;n<o;)e.substring(r,o)==t.substring(r,o)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,r=0;n<o;)e.substring(e.length-o,e.length-r)==t.substring(t.length-o,t.length-r)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var o=Math.min(n,i);if(e==t)return o;for(var r=0,a=1;;){var c=e.substring(o-a),l=t.indexOf(c);if(-1==l)return r;a+=l,0!=l&&e.substring(o-a)!=t.substring(0,a)||(r=a,a++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var o=this;function r(e,t,n){for(var i,r,a,c,l=e.substring(n,n+Math.floor(e.length/4)),s=-1,d="";-1!=(s=t.indexOf(l,s+1));){var p=o.diff_commonPrefix(e.substring(n),t.substring(s)),u=o.diff_commonSuffix(e.substring(0,n),t.substring(0,s));d.length<u+p&&(d=t.substring(s-u,s)+t.substring(s,s+p),i=e.substring(0,n-u),r=e.substring(n+p),a=t.substring(0,s-u),c=t.substring(s+p))}return 2*d.length>=e.length?[i,r,a,c,d]:null}var a,c,l,s,d,p=r(n,i,Math.ceil(n.length/4)),u=r(n,i,Math.ceil(n.length/2));return p||u?(a=u?p&&p[4].length>u[4].length?p:u:p,e.length>t.length?(c=a[0],l=a[1],s=a[2],d=a[3]):(s=a[0],d=a[1],c=a[2],l=a[3]),[c,l,s,d,a[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var i=!1,o=[],r=0,a=null,c=0,l=0,s=0,d=0,p=0;c<e.length;)0==e[c][0]?(o[r++]=c,l=d,s=p,d=0,p=0,a=e[c][1]):(1==e[c][0]?d+=e[c][1].length:p+=e[c][1].length,a&&a.length<=Math.max(l,s)&&a.length<=Math.max(d,p)&&(e.splice(o[r-1],0,new t.Diff(n,a)),e[o[r-1]+1][0]=1,r--,c=--r>0?o[r-1]:-1,l=0,s=0,d=0,p=0,a=null,i=!0)),c++;for(i&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),c=1;c<e.length;){if(e[c-1][0]==n&&1==e[c][0]){var u=e[c-1][1],m=e[c][1],h=this.diff_commonOverlap_(u,m),g=this.diff_commonOverlap_(m,u);h>=g?(h>=u.length/2||h>=m.length/2)&&(e.splice(c,0,new t.Diff(0,m.substring(0,h))),e[c-1][1]=u.substring(0,u.length-h),e[c+1][1]=m.substring(h),c++):(g>=u.length/2||g>=m.length/2)&&(e.splice(c,0,new t.Diff(0,u.substring(0,g))),e[c-1][0]=1,e[c-1][1]=m.substring(0,m.length-g),e[c+1][0]=n,e[c+1][1]=u.substring(g),c++),c++}c++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),o=n.charAt(0),r=i.match(t.nonAlphaNumericRegex_),a=o.match(t.nonAlphaNumericRegex_),c=r&&i.match(t.whitespaceRegex_),l=a&&o.match(t.whitespaceRegex_),s=c&&i.match(t.linebreakRegex_),d=l&&o.match(t.linebreakRegex_),p=s&&e.match(t.blanklineEndRegex_),u=d&&n.match(t.blanklineStartRegex_);return p||u?5:s||d?4:r&&!c&&l?3:c||l?2:r||a?1:0}for(var i=1;i<e.length-1;){if(0==e[i-1][0]&&0==e[i+1][0]){var o=e[i-1][1],r=e[i][1],a=e[i+1][1],c=this.diff_commonSuffix(o,r);if(c){var l=r.substring(r.length-c);o=o.substring(0,o.length-c),r=l+r.substring(0,r.length-c),a=l+a}for(var s=o,d=r,p=a,u=n(o,r)+n(r,a);r.charAt(0)===a.charAt(0);){o+=r.charAt(0),r=r.substring(1)+a.charAt(0),a=a.substring(1);var m=n(o,r)+n(r,a);m>=u&&(u=m,s=o,d=r,p=a)}e[i-1][1]!=s&&(s?e[i-1][1]=s:(e.splice(i-1,1),i--),e[i][1]=d,p?e[i+1][1]=p:(e.splice(i+1,1),i--))}i++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var i=!1,o=[],r=0,a=null,c=0,l=!1,s=!1,d=!1,p=!1;c<e.length;)0==e[c][0]?(e[c][1].length<this.Diff_EditCost&&(d||p)?(o[r++]=c,l=d,s=p,a=e[c][1]):(r=0,a=null),d=p=!1):(e[c][0]==n?p=!0:d=!0,a&&(l&&s&&d&&p||a.length<this.Diff_EditCost/2&&l+s+d+p==3)&&(e.splice(o[r-1],0,new t.Diff(n,a)),e[o[r-1]+1][0]=1,r--,a=null,l&&s?(d=p=!0,r=0):(c=--r>0?o[r-1]:-1,d=p=!1),i=!0)),c++;i&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push(new t.Diff(0,""));for(var i,o=0,r=0,a=0,c="",l="";o<e.length;)switch(e[o][0]){case 1:a++,l+=e[o][1],o++;break;case n:r++,c+=e[o][1],o++;break;case 0:r+a>1?(0!==r&&0!==a&&(0!==(i=this.diff_commonPrefix(l,c))&&(o-r-a>0&&0==e[o-r-a-1][0]?e[o-r-a-1][1]+=l.substring(0,i):(e.splice(0,0,new t.Diff(0,l.substring(0,i))),o++),l=l.substring(i),c=c.substring(i)),0!==(i=this.diff_commonSuffix(l,c))&&(e[o][1]=l.substring(l.length-i)+e[o][1],l=l.substring(0,l.length-i),c=c.substring(0,c.length-i))),e.splice(o-=r+a,r+a),c.length&&(e.splice(o,0,new t.Diff(n,c)),o++),l.length&&(e.splice(o,0,new t.Diff(1,l)),o++),o++):0!==o&&0==e[o-1][0]?(e[o-1][1]+=e[o][1],e.splice(o,1)):o++,a=0,r=0,c="",l=""}""===e[e.length-1][1]&&e.pop();var s=!1;for(o=1;o<e.length-1;)0==e[o-1][0]&&0==e[o+1][0]&&(e[o][1].substring(e[o][1].length-e[o-1][1].length)==e[o-1][1]?(e[o][1]=e[o-1][1]+e[o][1].substring(0,e[o][1].length-e[o-1][1].length),e[o+1][1]=e[o-1][1]+e[o+1][1],e.splice(o-1,1),s=!0):e[o][1].substring(0,e[o+1][1].length)==e[o+1][1]&&(e[o-1][1]+=e[o+1][1],e[o][1]=e[o][1].substring(e[o+1][1].length)+e[o+1][1],e.splice(o+1,1),s=!0)),o++;s&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var i,o=0,r=0,a=0,c=0;for(i=0;i<e.length&&(1!==e[i][0]&&(o+=e[i][1].length),e[i][0]!==n&&(r+=e[i][1].length),!(o>t));i++)a=o,c=r;return e.length!=i&&e[i][0]===n?c:c+(t-a)},t.prototype.diff_prettyHtml=function(e){for(var t=[],i=/&/g,o=/</g,r=/>/g,a=/\n/g,c=0;c<e.length;c++){var l=e[c][0],s=e[c][1].replace(i,"&amp;").replace(o,"&lt;").replace(r,"&gt;").replace(a,"&para;<br>");switch(l){case 1:t[c]='<ins style="background:#e6ffe6;">'+s+"</ins>";break;case n:t[c]='<del style="background:#ffe6e6;">'+s+"</del>";break;case 0:t[c]="<span>"+s+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],i=0;i<e.length;i++)e[i][0]!==n&&(t[i]=e[i][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,i=0,o=0,r=0;r<e.length;r++){var a=e[r][1];switch(e[r][0]){case 1:i+=a.length;break;case n:o+=a.length;break;case 0:t+=Math.max(i,o),i=0,o=0}}return t+Math.max(i,o)},t.prototype.diff_toDelta=function(e){for(var t=[],i=0;i<e.length;i++)switch(e[i][0]){case 1:t[i]="+"+encodeURI(e[i][1]);break;case n:t[i]="-"+e[i][1].length;break;case 0:t[i]="="+e[i][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,i){for(var o=[],r=0,a=0,c=i.split(/\t/g),l=0;l<c.length;l++){var s=c[l].substring(1);switch(c[l].charAt(0)){case"+":try{o[r++]=new t.Diff(1,decodeURI(s))}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var d=parseInt(s,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+s);var p=e.substring(a,a+=d);"="==c[l].charAt(0)?o[r++]=new t.Diff(0,p):o[r++]=new t.Diff(n,p);break;default:if(c[l])throw new Error("Invalid diff operation in diff_fromDelta: "+c[l])}}if(a!=e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return o},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),o=this;function r(e,i){var r=e/t.length,a=Math.abs(n-i);return o.Match_Distance?r+a/o.Match_Distance:a?1:r}var a=this.Match_Threshold,c=e.indexOf(t,n);-1!=c&&(a=Math.min(r(0,c),a),-1!=(c=e.lastIndexOf(t,n+t.length))&&(a=Math.min(r(0,c),a)));var l,s,d=1<<t.length-1;c=-1;for(var p,u=t.length+e.length,m=0;m<t.length;m++){for(l=0,s=u;l<s;)r(m,n+s)<=a?l=s:u=s,s=Math.floor((u-l)/2+l);u=s;var h=Math.max(1,n-s+1),g=Math.min(n+s,e.length)+t.length,f=Array(g+2);f[g+1]=(1<<m)-1;for(var v=g;v>=h;v--){var b=i[e.charAt(v-1)];if(f[v]=0===m?(f[v+1]<<1|1)&b:(f[v+1]<<1|1)&b|(p[v+1]|p[v])<<1|1|p[v+1],f[v]&d){var C=r(m,v-1);if(C<=a){if(a=C,!((c=v-1)>n))break;h=Math.max(1,2*n-c)}}}if(r(m+1,n)>a)break;p=f}return c},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,n){if(0!=n.length){if(null===e.start2)throw Error("patch not initialized");for(var i=n.substring(e.start2,e.start2+e.length1),o=0;n.indexOf(i)!=n.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i=n.substring(e.start2-(o+=this.Patch_Margin),e.start2+e.length1+o);var r=n.substring(e.start2-(o+=this.Patch_Margin),e.start2);r&&e.diffs.unshift(new t.Diff(0,r));var a=n.substring(e.start2+e.length1,e.start2+e.length1+o);a&&e.diffs.push(new t.Diff(0,a)),e.start1-=r.length,e.start2-=r.length,e.length1+=r.length+a.length,e.length2+=r.length+a.length}},t.prototype.patch_make=function(e,i,o){var r,a;if("string"==typeof e&&"string"==typeof i&&void 0===o)(a=this.diff_main(r=e,i,!0)).length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&"object"==typeof e&&void 0===i&&void 0===o)r=this.diff_text1(a=e);else if("string"==typeof e&&i&&"object"==typeof i&&void 0===o)r=e,a=i;else{if("string"!=typeof e||"string"!=typeof i||!o||"object"!=typeof o)throw new Error("Unknown call format to patch_make.");r=e,a=o}if(0===a.length)return[];for(var c=[],l=new t.patch_obj,s=0,d=0,p=0,u=r,m=r,h=0;h<a.length;h++){var g=a[h][0],f=a[h][1];switch(s||0===g||(l.start1=d,l.start2=p),g){case 1:l.diffs[s++]=a[h],l.length2+=f.length,m=m.substring(0,p)+f+m.substring(p);break;case n:l.length1+=f.length,l.diffs[s++]=a[h],m=m.substring(0,p)+m.substring(p+f.length);break;case 0:f.length<=2*this.Patch_Margin&&s&&a.length!=h+1?(l.diffs[s++]=a[h],l.length1+=f.length,l.length2+=f.length):f.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(l,u),c.push(l),l=new t.patch_obj,s=0,u=m,d=p)}1!==g&&(d+=f.length),g!==n&&(p+=f.length)}return s&&(this.patch_addContext_(l,u),c.push(l)),c},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){var o=e[i],r=new t.patch_obj;r.diffs=[];for(var a=0;a<o.diffs.length;a++)r.diffs[a]=new t.Diff(o.diffs[a][0],o.diffs[a][1]);r.start1=o.start1,r.start2=o.start2,r.length1=o.length1,r.length2=o.length2,n[i]=r}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var i=this.patch_addPadding(e);t=i+t+i,this.patch_splitMax(e);for(var o=0,r=[],a=0;a<e.length;a++){var c,l,s=e[a].start2+o,d=this.diff_text1(e[a].diffs),p=-1;if(d.length>this.Match_MaxBits?-1!=(c=this.match_main(t,d.substring(0,this.Match_MaxBits),s))&&(-1==(p=this.match_main(t,d.substring(d.length-this.Match_MaxBits),s+d.length-this.Match_MaxBits))||c>=p)&&(c=-1):c=this.match_main(t,d,s),-1==c)r[a]=!1,o-=e[a].length2-e[a].length1;else if(r[a]=!0,o=c-s,d==(l=t.substring(c,-1==p?c+d.length:p+this.Match_MaxBits)))t=t.substring(0,c)+this.diff_text2(e[a].diffs)+t.substring(c+d.length);else{var u=this.diff_main(d,l,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(u)/d.length>this.Patch_DeleteThreshold)r[a]=!1;else{this.diff_cleanupSemanticLossless(u);for(var m,h=0,g=0;g<e[a].diffs.length;g++){var f=e[a].diffs[g];0!==f[0]&&(m=this.diff_xIndex(u,h)),1===f[0]?t=t.substring(0,c+m)+f[1]+t.substring(c+m):f[0]===n&&(t=t.substring(0,c+m)+t.substring(c+this.diff_xIndex(u,h+f[1].length))),f[0]!==n&&(h+=f[1].length)}}}}return[t=t.substring(i.length,t.length-i.length),r]},t.prototype.patch_addPadding=function(e){for(var n=this.Patch_Margin,i="",o=1;o<=n;o++)i+=String.fromCharCode(o);for(o=0;o<e.length;o++)e[o].start1+=n,e[o].start2+=n;var r=e[0],a=r.diffs;if(0==a.length||0!=a[0][0])a.unshift(new t.Diff(0,i)),r.start1-=n,r.start2-=n,r.length1+=n,r.length2+=n;else if(n>a[0][1].length){var c=n-a[0][1].length;a[0][1]=i.substring(a[0][1].length)+a[0][1],r.start1-=c,r.start2-=c,r.length1+=c,r.length2+=c}return 0==(a=(r=e[e.length-1]).diffs).length||0!=a[a.length-1][0]?(a.push(new t.Diff(0,i)),r.length1+=n,r.length2+=n):n>a[a.length-1][1].length&&(a[a.length-1][1]+=i.substring(0,c=n-a[a.length-1][1].length),r.length1+=c,r.length2+=c),i},t.prototype.patch_splitMax=function(e){for(var i=this.Match_MaxBits,o=0;o<e.length;o++)if(!(e[o].length1<=i)){var r=e[o];e.splice(o--,1);for(var a=r.start1,c=r.start2,l="";0!==r.diffs.length;){var s=new t.patch_obj,d=!0;for(s.start1=a-l.length,s.start2=c-l.length,""!==l&&(s.length1=s.length2=l.length,s.diffs.push(new t.Diff(0,l)));0!==r.diffs.length&&s.length1<i-this.Patch_Margin;){var p=r.diffs[0][0],u=r.diffs[0][1];1===p?(s.length2+=u.length,c+=u.length,s.diffs.push(r.diffs.shift()),d=!1):p===n&&1==s.diffs.length&&0==s.diffs[0][0]&&u.length>2*i?(s.length1+=u.length,a+=u.length,d=!1,s.diffs.push(new t.Diff(p,u)),r.diffs.shift()):(u=u.substring(0,i-s.length1-this.Patch_Margin),s.length1+=u.length,a+=u.length,0===p?(s.length2+=u.length,c+=u.length):d=!1,s.diffs.push(new t.Diff(p,u)),u==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(u.length))}l=(l=this.diff_text2(s.diffs)).substring(l.length-this.Patch_Margin);var m=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==m&&(s.length1+=m.length,s.length2+=m.length,0!==s.diffs.length&&0===s.diffs[s.diffs.length-1][0]?s.diffs[s.diffs.length-1][1]+=m:s.diffs.push(new t.Diff(0,m))),d||e.splice(++o,0,s)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var i=[];if(!e)return i;for(var o=e.split("\n"),r=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<o.length;){var c=o[r].match(a);if(!c)throw new Error("Invalid patch string: "+o[r]);var l=new t.patch_obj;for(i.push(l),l.start1=parseInt(c[1],10),""===c[2]?(l.start1--,l.length1=1):"0"==c[2]?l.length1=0:(l.start1--,l.length1=parseInt(c[2],10)),l.start2=parseInt(c[3],10),""===c[4]?(l.start2--,l.length2=1):"0"==c[4]?l.length2=0:(l.start2--,l.length2=parseInt(c[4],10)),r++;r<o.length;){var s=o[r].charAt(0);try{var d=decodeURI(o[r].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+d)}if("-"==s)l.diffs.push(new t.Diff(n,d));else if("+"==s)l.diffs.push(new t.Diff(1,d));else if(" "==s)l.diffs.push(new t.Diff(0,d));else{if("@"==s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+d)}r++}}return i},(t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:e="+";break;case n:e="-";break;case 0:e=" "}t[i+1]=e+encodeURI(this.diffs[i][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},1590:function(e){"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise(function(n,i){function o(n){e.removeListener(t,r),i(n)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}g(e,t,r,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,o)})},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var a=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function s(e,t,n,i){var o,r,a;if(c(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),a=r[t]),void 0===a)a=r[t]=n,++e._eventsCount;else if("function"==typeof a?a=r[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(o=l(e))>0&&a.length>o&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,console&&console.warn&&console.warn(s)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=d.bind(i);return o.listener=n,i.wrapFn=o,o}function u(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):h(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function o(r){i.once&&e.removeEventListener(t,o),n(r)})}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var s=l.length,d=h(l,s);for(n=0;n<s;++n)i(d[n],this,t)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return s(this,e,t,!1)},r.prototype.prependListener=function(e,t){return s(this,e,t,!0)},r.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,i,o,r,a;if(c(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){a=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},r.prototype.listeners=function(e){return u(this,e,!0)},r.prototype.rawListeners=function(e){return u(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},r.prototype.listenerCount=m,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},2538:function(e){e.exports=function(e,t,n,i){var o=e.transformX=function(e,r){n(e),n(r);for(var a,c,l,s=[],d=0;d<r.length;d++){for(var p=r[d],u=[],m=0;m<e.length;){var h=[];if(l=h,t(u,a=e[m],c=p,"left"),t(l,c,a,"right"),m++,1!==h.length){if(0===h.length){for(var g=m;g<e.length;g++)i(u,e[g]);p=null;break}for(var f=o(e.slice(m),h),v=0;v<f[0].length;v++)i(u,f[0][v]);for(var b=0;b<f[1].length;b++)i(s,f[1][b]);p=null;break}p=h[0]}null!=p&&i(s,p),e=u}return[e,s]};e.transform=function(e,n,i){if("left"!==i&&"right"!==i)throw new Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?t([],e[0],n[0],i):"left"===i?o(e,n)[0]:o(n,e)[1]}}},8912:function(e,t,n){e.exports={type:n(6232)}},6232:function(e,t,n){var i=function(e){return"[object Array]"==Object.prototype.toString.call(e)},o=function(e){return JSON.parse(JSON.stringify(e))},r={name:"json0",uri:"http://sharejs.org/types/JSONv0"},a={};function c(e){e.t="text0";var t={p:e.p.pop()};null!=e.si&&(t.i=e.si),null!=e.sd&&(t.d=e.sd),e.o=[t]}function l(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}r.registerSubtype=function(e){a[e.name]=e},r.create=function(e){return void 0===e?null:o(e)},r.invertComponent=function(e){var t={p:e.p};return e.t&&a[e.t]&&(t.t=e.t,t.o=a[e.t].invert(e.o)),void 0!==e.si&&(t.sd=e.si),void 0!==e.sd&&(t.si=e.sd),void 0!==e.oi&&(t.od=e.oi),void 0!==e.od&&(t.oi=e.od),void 0!==e.li&&(t.ld=e.li),void 0!==e.ld&&(t.li=e.ld),void 0!==e.na&&(t.na=-e.na),void 0!==e.lm&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t},r.invert=function(e){for(var t=e.slice().reverse(),n=[],i=0;i<t.length;i++)n.push(r.invertComponent(t[i]));return n},r.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!i(e[t].p))throw new Error("Missing path")},r.checkList=function(e){if(!i(e))throw new Error("Referenced element not a list")},r.checkObj=function(e){if(!(t=e)||t.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")");var t},r.apply=function(e,t){r.checkValidOp(t),t=o(t);for(var n={data:e},i=0;i<t.length;i++){var l=t[i];null==l.si&&null==l.sd||c(l);for(var s=null,d=n,p="data",u=0;u<l.p.length;u++)if(s=d,d=d[p],p=l.p[u],null==s)throw new Error("Path invalid");if(l.t&&void 0!==l.o&&a[l.t])d[p]=a[l.t].apply(d[p],l.o);else if(void 0!==l.na){if("number"!=typeof d[p])throw new Error("Referenced element not a number");d[p]+=l.na}else if(void 0!==l.li&&void 0!==l.ld)r.checkList(d),d[p]=l.li;else if(void 0!==l.li)r.checkList(d),d.splice(p,0,l.li);else if(void 0!==l.ld)r.checkList(d),d.splice(p,1);else if(void 0!==l.lm){if(r.checkList(d),l.lm!=p){var m=d[p];d.splice(p,1),d.splice(l.lm,0,m)}}else if(void 0!==l.oi)r.checkObj(d),d[p]=l.oi;else{if(void 0===l.od)throw new Error("invalid / missing instruction in op");r.checkObj(d),delete d[p]}}return n.data},r.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t},r.incrementalApply=function(e,t,n){for(var i=0;i<t.length;i++){var o=[t[i]];n(o,e=r.apply(e,o))}return e};var s=r.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i]&&(!n||i!==e.length-1))return!1;return!0};r.append=function(e,t){if(t=o(t),0!==e.length){var n=e[e.length-1];if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(c(t),c(n)),s(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&a[t.t]){if(n.o=a[t.t].compose(n.o,t.o),null!=t.si||null!=t.sd){for(var i=t.p,r=0;r<n.o.length-1;r++)t.o=[n.o.pop()],t.p=i.slice(),l(t),e.push(t);l(n)}}else null!=n.na&&null!=t.na?e[e.length-1]={p:n.p,na:n.na+t.na}:void 0!==n.li&&void 0===t.li&&t.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==t.oi&&void 0===t.od?n.oi=t.oi:void 0!==n.oi&&void 0!==t.od?void 0!==t.oi?n.oi=t.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==t.lm&&t.p[t.p.length-1]===t.lm||e.push(t);else null==t.si&&null==t.sd||null==n.si&&null==n.sd||(l(t),l(n)),e.push(t)}else e.push(t)},r.compose=function(e,t){r.checkValidOp(e),r.checkValidOp(t);for(var n=o(e),i=0;i<t.length;i++)r.append(n,t[i]);return n},r.normalize=function(e){var t=[];e=i(e)?e:[e];for(var n=0;n<e.length;n++){var o=e[n];null==o.p&&(o.p=[]),r.append(t,o)}return t},r.commonLengthForOps=function(e,t){var n=e.p.length,i=t.p.length;if((null!=e.na||e.t)&&n++,(null!=t.na||t.t)&&i++,0===n)return-1;if(0===i)return null;n--,i--;for(var o=0;o<n;o++)if(o>=i||e.p[o]!==t.p[o])return null;return n},r.canOpAffectPath=function(e,t){return null!=r.commonLengthForOps({p:t},e)},r.transformComponent=function(e,t,n,s){t=o(t);var d=r.commonLengthForOps(n,t),p=r.commonLengthForOps(t,n),u=t.p.length,m=n.p.length;if((null!=t.na||t.t)&&u++,(null!=n.na||n.t)&&m++,null!=p&&m>u&&t.p[p]==n.p[p]&&(void 0!==t.ld?((g=o(n)).p=g.p.slice(u),t.ld=r.apply(o(t.ld),[g])):void 0!==t.od&&((g=o(n)).p=g.p.slice(u),t.od=r.apply(o(t.od),[g]))),null!=d){var h=u==m,g=n;if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(c(t),c(g=o(n))),g.t&&a[g.t]){if(t.t&&t.t===g.t){var f=a[t.t].transform(t.o,g.o,s);if(null!=t.si||null!=t.sd)for(var v=t.p,b=0;b<f.length;b++)t.o=[f[b]],t.p=v.slice(),l(t),r.append(e,t);else(!i(f)||f.length>0)&&(t.o=f,r.append(e,t));return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[d]===t.p[d]){if(!h)return e;if(void 0!==t.ld){if(void 0===t.li||"left"!==s)return e;t.ld=o(n.li)}}}else if(void 0!==n.li)void 0!==t.li&&void 0===t.ld&&h&&t.p[d]===n.p[d]?"right"===s&&t.p[d]++:n.p[d]<=t.p[d]&&t.p[d]++,void 0!==t.lm&&h&&n.p[d]<=t.lm&&t.lm++;else if(void 0!==n.ld){if(void 0!==t.lm&&h){if(n.p[d]===t.p[d])return e;var C=t.p[d];((v=n.p[d])<(y=t.lm)||v===y&&C<y)&&t.lm--}if(n.p[d]<t.p[d])t.p[d]--;else if(n.p[d]===t.p[d]){if(m<u)return e;if(void 0!==t.ld){if(void 0===t.li)return e;delete t.ld}}}else if(void 0!==n.lm)if(void 0!==t.lm&&u===m){C=t.p[d];var y=t.lm,x=n.p[d],w=n.lm;if(x!==w)if(C===x){if("left"!==s)return e;t.p[d]=w,C===y&&(t.lm=w)}else C>x&&t.p[d]--,C>w?t.p[d]++:C===w&&x>w&&(t.p[d]++,C===y&&t.lm++),(y>x||y===x&&y>C)&&t.lm--,y>w?t.lm++:y===w&&(w>x&&y>C||w<x&&y<C?"right"===s&&t.lm++:y>C?t.lm++:y===x&&t.lm--)}else void 0!==t.li&&void 0===t.ld&&h?(y=n.lm,(v=t.p[d])>(C=n.p[d])&&t.p[d]--,v>y&&t.p[d]++):(y=n.lm,(v=t.p[d])===(C=n.p[d])?t.p[d]=y:(v>C&&t.p[d]--,(v>y||v===y&&C>y)&&t.p[d]++));else if(void 0!==n.oi&&void 0!==n.od){if(t.p[d]===n.p[d]){if(void 0===t.oi||!h)return e;if("right"===s)return e;t.od=n.oi}}else if(void 0!==n.oi){if(void 0!==t.oi&&t.p[d]===n.p[d]){if("left"!==s)return e;r.append(e,{p:t.p,od:n.oi})}}else if(void 0!==n.od&&t.p[d]==n.p[d]){if(!h)return e;if(void 0===t.oi)return e;delete t.od}}return r.append(e,t),e},n(2538)(r,r.transformComponent,r.checkValidOp,r.append);var d=n(420);r.registerSubtype(d),e.exports=r},420:function(e,t,n){var i=e.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw new Error("Initial data must be a string");return e||""}},o=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},r=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},a=function(e){for(var t=0;t<e.length;t++)r(e[t])};i.apply=function(e,t){var n;a(t);for(var i=0;i<t.length;i++){var r=t[i];if(null!=r.i)e=o(e,r.p,r.i);else{if(n=e.slice(r.p,r.p+r.d.length),r.d!==n)throw new Error("Delete component '"+r.d+"' does not match deleted text '"+n+"'");e=e.slice(0,r.p)+e.slice(r.p+r.d.length)}}return e};var c=i._append=function(e,t){if(""!==t.i&&""!==t.d)if(0===e.length)e.push(t);else{var n=e[e.length-1];null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:o(n.i,t.p-n.p,t.i),p:n.p}:null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:o(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};i.compose=function(e,t){a(e),a(t);for(var n=e.slice(),i=0;i<t.length;i++)c(n,t[i]);return n},i.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];null==i.p&&(i.p=0),c(t,i)}return t};var l=function(e,t,n){return null!=t.i?t.p<e||t.p===e&&n?e+t.i.length:e:e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};i.transformCursor=function(e,t,n){for(var i="right"===n,o=0;o<t.length;o++)e=l(e,t[o],i);return e};var s=i._tc=function(e,t,n,i){if(r(t),r(n),null!=t.i)c(e,{i:t.i,p:l(t.p,n,"right"===i)});else if(null!=n.i){var o=t.d;t.p<n.p&&(c(e,{d:o.slice(0,n.p-t.p),p:t.p}),o=o.slice(n.p-t.p)),""!==o&&c(e,{d:o,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)c(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)c(e,t);else{var a={d:"",p:t.p};t.p<n.p&&(a.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(a.d+=t.d.slice(n.p+n.d.length-t.p));var s=Math.max(t.p,n.p),d=Math.min(t.p+t.d.length,n.p+n.d.length);if(t.d.slice(s-t.p,d-t.p)!==n.d.slice(s-n.p,d-n.p))throw new Error("Delete ops delete different text in the same region of the document");""!==a.d&&(a.p=l(a.p,n),c(e,a))}return e};i.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=null!=(n=e[t]).i?{d:n.i,p:n.p}:{i:n.d,p:n.p};var n;return e},n(2538)(i,s,a,c)},2376:function(e,t,n){var i=n(6724),o=n(3131),r=n(3133),a=n(8020),c=n(8949),l=n(8186),s=n(8845),d=n(8998),p=n(1145),u=l.CODES;function m(e){return 0===e.readyState||1===e.readyState?"connecting":"disconnected"}function h(e){c.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._snapshotRequests={},this.seq=1,this.id=null,this.agent=null,this.debug=!1,this.state=m(e),this.bindToSocket(e)}function g(e,t){var n=new Error(e.message);return n.code=e.code,t&&(n.data=t),n}function f(e){return e.hasPending()}function v(e){return e.hasWritePending()}e.exports=h,c.mixin(h),h.prototype.bindToSocket=function(e){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=e;var t=m(e);this._setState(t),this.canSend=!1;var n=this;e.onmessage=function(e){try{var t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(t){return void p.warn("Failed to parse message",e)}n.debug&&p.info("RECV",JSON.stringify(t));var i={data:t};if(n.emit("receive",i),i.data)try{n.handleMessage(i.data)}catch(e){process.nextTick(function(){n.emit("error",e)})}},e.onopen=function(){n._setState("connecting")},e.onerror=function(e){n.emit("connection error",e)},e.onclose=function(e){n._setState("closed"===e||"Closed"===e?"closed":"stopped"===e||"Stopped by server"===e?"stopped":"disconnected",e)}},h.prototype.handleMessage=function(e){var t=null;switch(e.error&&(t=g(e.error,e),delete e.error),e.a){case"init":return 1!==e.protocol?(t=new l(u.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,"Unsupported protocol version: "+e.protocol),this.emit("error",t)):s.map[e.type]!==s.defaultType?(t=new l(u.ERR_DEFAULT_TYPE_MISMATCH,e.type+" does not match the server default type"),this.emit("error",t)):"string"!=typeof e.id?(t=new l(u.ERR_CLIENT_ID_BADLY_FORMED,"Client id must be a string"),this.emit("error",t)):(this.id=e.id,void this._setState("connected"));case"qf":return void((n=this.queries[e.id])&&n._handleFetch(t,e.data,e.extra));case"qs":return void((n=this.queries[e.id])&&n._handleSubscribe(t,e.data,e.extra));case"qu":return;case"q":var n;if(!(n=this.queries[e.id]))return;return t?n._handleError(t):(e.diff&&n._handleDiff(e.diff),void(e.hasOwnProperty("extra")&&n._handleExtra(e.extra)));case"bf":return this._handleBulkMessage(t,e,"_handleFetch");case"bs":return this._handleBulkMessage(t,e,"_handleSubscribe");case"bu":return this._handleBulkMessage(t,e,"_handleUnsubscribe");case"nf":case"nt":return this._handleSnapshotFetch(t,e);case"f":return void((i=this.getExisting(e.c,e.d))&&i._handleFetch(t,e.data));case"s":return void((i=this.getExisting(e.c,e.d))&&i._handleSubscribe(t,e.data));case"u":return void((i=this.getExisting(e.c,e.d))&&i._handleUnsubscribe(t));case"op":var i;return void((i=this.getExisting(e.c,e.d))&&i._handleOp(t,e));default:p.warn("Ignoring unrecognized message",e)}},h.prototype._handleBulkMessage=function(e,t,n){if(t.data)for(var i in t.data){var o=t.data[i];(a=this.getExisting(t.c,i))&&(e?a[n](e):o.error?a[n](g(o.error)):a[n](null,o))}else if(Array.isArray(t.b))for(var r=0;r<t.b.length;r++)(a=this.getExisting(t.c,i=t.b[r]))&&a[n](e);else if(t.b)for(var i in t.b){var a;(a=this.getExisting(t.c,i))&&a[n](e)}else p.error("Invalid bulk message",t)},h.prototype._reset=function(){this.seq=1,this.id=null,this.agent=null},h.prototype._setState=function(e,t){if(this.state!==e){if("connecting"===e&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===e&&"connecting"!==this.state){var n=new l(u.ERR_CONNECTION_STATE_TRANSITION_INVALID,"Cannot transition directly from "+this.state+" to "+e);return this.emit("error",n)}for(var i in this.state=e,this.canSend="connected"===e,"disconnected"!==e&&"stopped"!==e&&"closed"!==e||this._reset(),this.startBulk(),this.queries)this.queries[i]._onConnectionStateChanged();for(var o in this.collections){var r=this.collections[o];for(var i in r)r[i]._onConnectionStateChanged()}for(var i in this._snapshotRequests)this._snapshotRequests[i]._onConnectionStateChanged();this.endBulk(),this.emit(e,t),this.emit("state",e,t)}},h.prototype.startBulk=function(){this.bulk||(this.bulk={})},h.prototype.endBulk=function(){if(this.bulk)for(var e in this.bulk){var t=this.bulk[e];this._sendBulk("f",e,t.f),this._sendBulk("s",e,t.s),this._sendBulk("u",e,t.u)}this.bulk=null},h.prototype._sendBulk=function(e,t,n){if(n){var i,o=[],r={},a=0;for(var c in n){var l=n[c];null==l?o.push(c):(r[c]=l,i=c,a++)}1===o.length?this.send({a:e,c:t,d:c=o[0]}):o.length&&this.send({a:"b"+e,c:t,b:o}),1===a?this.send({a:e,c:t,d:i,v:r[i]}):a&&this.send({a:"b"+e,c:t,b:r})}},h.prototype._sendAction=function(e,t,n){if(this._addDoc(t),this.bulk){var i=this.bulk[t.collection]||(this.bulk[t.collection]={}),o=i[e]||(i[e]={}),r=o.hasOwnProperty(t.id);return o[t.id]=n,r}this.send({a:e,c:t.collection,d:t.id,v:n})},h.prototype.sendFetch=function(e){return this._sendAction("f",e,e.version)},h.prototype.sendSubscribe=function(e){return this._sendAction("s",e,e.version)},h.prototype.sendUnsubscribe=function(e){return this._sendAction("u",e)},h.prototype.sendOp=function(e,t){this._addDoc(e);var n={a:"op",c:e.collection,d:e.id,v:e.version,src:t.src,seq:t.seq};t.op&&(n.op=t.op),t.create&&(n.create=t.create),t.del&&(n.del=t.del),this.send(n)},h.prototype.send=function(e){this.debug&&p.info("SEND",JSON.stringify(e)),this.emit("send",e),this.socket.send(JSON.stringify(e))},h.prototype.close=function(){this.socket.close()},h.prototype.getExisting=function(e,t){if(this.collections[e])return this.collections[e][t]},h.prototype.get=function(e,t){var n=this.collections[e]||(this.collections[e]={}),o=n[t];return o||(o=n[t]=new i(this,e,t),this.emit("doc",o)),o},h.prototype._destroyDoc=function(e){var t=this.collections[e.collection];t&&(delete t[e.id],d.hasKeys(t)||delete this.collections[e.collection])},h.prototype._addDoc=function(e){var t=this.collections[e.collection];t||(t=this.collections[e.collection]={}),t[e.id]!==e&&(t[e.id]=e)},h.prototype._createQuery=function(e,t,n,i,r){var a=this.nextQueryId++,c=new o(e,this,a,t,n,i,r);return this.queries[a]=c,c.send(),c},h.prototype._destroyQuery=function(e){delete this.queries[e.id]},h.prototype.createFetchQuery=function(e,t,n,i){return this._createQuery("qf",e,t,n,i)},h.prototype.createSubscribeQuery=function(e,t,n,i){return this._createQuery("qs",e,t,n,i)},h.prototype.hasPending=function(){return!!(this._firstDoc(f)||this._firstQuery(f)||this._firstSnapshotRequest())},h.prototype.hasWritePending=function(){return!!this._firstDoc(v)},h.prototype.whenNothingPending=function(e){var t=this._firstDoc(f);if(t)t.once("nothing pending",this._nothingPendingRetry(e));else{var n=this._firstQuery(f);if(n)n.once("ready",this._nothingPendingRetry(e));else{var i=this._firstSnapshotRequest();i?i.once("ready",this._nothingPendingRetry(e)):process.nextTick(e)}}},h.prototype._nothingPendingRetry=function(e){var t=this;return function(){process.nextTick(function(){t.whenNothingPending(e)})}},h.prototype._firstDoc=function(e){for(var t in this.collections){var n=this.collections[t];for(var i in n){var o=n[i];if(e(o))return o}}},h.prototype._firstQuery=function(e){for(var t in this.queries){var n=this.queries[t];if(e(n))return n}},h.prototype._firstSnapshotRequest=function(){for(var e in this._snapshotRequests)return this._snapshotRequests[e]},h.prototype.fetchSnapshot=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);var o=this.nextSnapshotRequestId++,a=new r(this,o,e,t,n,i);this._snapshotRequests[a.requestId]=a,a.send()},h.prototype.fetchSnapshotByTimestamp=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);var o=this.nextSnapshotRequestId++,r=new a(this,o,e,t,n,i);this._snapshotRequests[r.requestId]=r,r.send()},h.prototype._handleSnapshotFetch=function(e,t){var n=this._snapshotRequests[t.id];n&&(delete this._snapshotRequests[t.id],n._handleResponse(e,t))}},6724:function(e,t,n){var i=n(8949),o=n(1145),r=n(8186),a=n(8845),c=r.CODES;function l(e,t,n){i.EventEmitter.call(this),this.connection=e,this.collection=t,this.id=n,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=[],this.inflightUnsubscribe=[],this.pendingFetch=[],this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1}function s(e,t,n){if(t){var i=e.pop();e.push(function(e){i&&i(e),n&&n(e)})}else e.push(n)}function d(e,t){if(e.del)return delete(n=t).op,delete n.create,void delete n.del;var n;if(t.del)return new r(c.ERR_DOC_WAS_DELETED,"Document was deleted");if(t.create)return new r(c.ERR_DOC_ALREADY_CREATED,"Document already created");if(t.op){if(e.create)return new r(c.ERR_DOC_ALREADY_CREATED,"Document already created");if(e.type.transformX){var i=e.type.transformX(e.op,t.op);e.op=i[0],t.op=i[1]}else{var o=e.type.transform(e.op,t.op,"left"),a=e.type.transform(t.op,e.op,"right");e.op=o,t.op=a}}}function p(e,t){for(var n=!1,i=0;i<e.length;i++){var o=e[i];o&&(o(t),n=!0)}return n}e.exports=l,i.mixin(l),l.prototype.destroy=function(e){var t=this;t.whenNothingPending(function(){t.wantSubscribe?t.unsubscribe(function(n){if(n)return e?e(n):t.emit("error",n);t.connection._destroyDoc(t),e&&e()}):(t.connection._destroyDoc(t),e&&e())})},l.prototype._setType=function(e){if("string"==typeof e&&(e=a.map[e]),e)this.type=e;else{if(null!==e){var t=new r(c.ERR_DOC_TYPE_NOT_RECOGNIZED,"Missing type "+e);return this.emit("error",t)}this.type=e,this.data=void 0}},l.prototype.ingestSnapshot=function(e,t){if(!e)return t&&t();if("number"!=typeof e.v){var n=new r(c.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}return this.type||this.hasWritePending()?null==this.version?this.hasWritePending()?t&&this.once("no write pending",t):(n=new r(c.ERR_DOC_MISSING_VERSION,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id),t?t(n):this.emit("error",n)):e.v>this.version?this.fetch(t):t&&t():this.version>e.v?t&&t():(this.version=e.v,this._setType(void 0===e.type?a.defaultType:e.type),this.data=this.type&&this.type.deserialize?this.type.deserialize(e.data):e.data,this.emit("load"),void(t&&t()))},l.prototype.whenNothingPending=function(e){var t=this;process.nextTick(function(){t.hasPending()?t.once("nothing pending",e):e()})},l.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe.length||this.inflightUnsubscribe.length||this.pendingFetch.length)},l.prototype.hasWritePending=function(){return!(!this.inflightOp&&!this.pendingOps.length)},l.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},l.prototype._emitResponseError=function(e,t){return e&&e.code===c.ERR_SNAPSHOT_READ_SILENT_REJECTION?(this.wantSubscribe=!1,t&&t(),void this._emitNothingPending()):t?(t(e),void this._emitNothingPending()):(this._emitNothingPending(),void this.emit("error",e))},l.prototype._handleFetch=function(e,t){var n=this.inflightFetch.shift();if(e)return this._emitResponseError(e,n);this.ingestSnapshot(t,n),this._emitNothingPending()},l.prototype._handleSubscribe=function(e,t){var n=this.inflightSubscribe.shift();if(e)return this._emitResponseError(e,n);this.wantSubscribe&&(this.subscribed=!0),this.ingestSnapshot(t,n),this._emitNothingPending()},l.prototype._handleUnsubscribe=function(e){var t=this.inflightUnsubscribe.shift();if(e)return this._emitResponseError(e,t);t&&t(),this._emitNothingPending()},l.prototype._handleOp=function(e,t){if(e)return this.inflightOp?(e.code===c.ERR_OP_SUBMIT_REJECTED&&(e=null),this._rollback(e)):this.emit("error",e);if(this.inflightOp&&t.src===this.inflightOp.src&&t.seq===this.inflightOp.seq)this._opAcknowledged(t);else if(null==this.version||t.v>this.version)this.fetch();else if(!(t.v<this.version)){if(this.inflightOp&&(i=d(this.inflightOp,t)))return this._hardRollback(i);for(var n=0;n<this.pendingOps.length;n++){var i;if(i=d(this.pendingOps[n],t))return this._hardRollback(i)}this.version++;try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}}},l.prototype._onConnectionStateChanged=function(){if(this.connection.canSend)this.flush(),this._resubscribe();else if(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,(this.inflightFetch.length||this.inflightSubscribe.length)&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch,this.inflightSubscribe),this.inflightFetch.length=0,this.inflightSubscribe.length=0),this.inflightUnsubscribe.length){var e=this.inflightUnsubscribe;this.inflightUnsubscribe=[],p(e)}},l.prototype._resubscribe=function(){var e=this.pendingFetch;if(this.pendingFetch=[],this.wantSubscribe)return e.length?void this.subscribe(function(t){p(e,t)}):void this.subscribe();e.length&&this.fetch(function(t){p(e,t)})},l.prototype.fetch=function(e){if(this.connection.canSend){var t=this.connection.sendFetch(this);s(this.inflightFetch,t,e)}else this.pendingFetch.push(e)},l.prototype.subscribe=function(e){if(this.wantSubscribe=!0,this.connection.canSend){var t=this.connection.sendSubscribe(this);s(this.inflightSubscribe,t,e)}else this.pendingFetch.push(e)},l.prototype.unsubscribe=function(e){if(this.wantSubscribe=!1,this.subscribed=!1,this.connection.canSend){var t=this.connection.sendUnsubscribe(this);s(this.inflightUnsubscribe,t,e)}else e&&process.nextTick(e)},l.prototype.flush=function(){this.connection.canSend&&!this.inflightOp&&!this.paused&&this.pendingOps.length&&this._sendOp()},l.prototype._otApply=function(e,t){if(e.op){if(!this.type)throw new r(c.ERR_DOC_DOES_NOT_EXIST,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(!t&&this.type===a.defaultType&&e.op.length>1){this.applyStack||(this.applyStack=[]);for(var n=this.applyStack.length,i=0;i<e.op.length;i++){for(var o={op:[e.op[i]]},l=n;l<this.applyStack.length;l++){var s=d(this.applyStack[l],o);if(s)return this._hardRollback(s)}this.emit("before op",o.op,t),this.data=this.type.apply(this.data,o.op),this.emit("op",o.op,t)}return void this._popApplyStack(n)}return this.emit("before op",e.op,t),this.data=this.type.apply(this.data,e.op),void this.emit("op",e.op,t)}if(e.create)return this._setType(e.create.type),this.data=this.type.deserialize?this.type.createDeserialized?this.type.createDeserialized(e.create.data):this.type.deserialize(this.type.create(e.create.data)):this.type.create(e.create.data),void this.emit("create",t);if(e.del){var p=this.data;return this._setType(null),void this.emit("del",p,t)}},l.prototype._sendOp=function(){var e=this.connection.id;if(e){this.inflightOp||(this.inflightOp=this.pendingOps.shift());var t=this.inflightOp;if(!t){var n=new r(c.ERR_INFLIGHT_OP_MISSING,"No op to send on call to _sendOp");return this.emit("error",n)}t.sentAt=Date.now(),t.retries=null==t.retries?0:t.retries+1,null==t.seq&&(t.seq=this.connection.seq++),this.connection.sendOp(this,t),null==t.src&&(t.src=e)}},l.prototype._submit=function(e,t,n){if(t||(t=!0),e.op){if(!this.type){var i=new r(c.ERR_DOC_DOES_NOT_EXIST,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return n?n(i):this.emit("error",i)}this.type.normalize&&(e.op=this.type.normalize(e.op))}try{this._pushOp(e,n),this._otApply(e,t)}catch(e){return this._hardRollback(e)}var o=this;process.nextTick(function(){o.flush()})},l.prototype._pushOp=function(e,t){if(this.applyStack)this.applyStack.push(e);else{var n=this._tryCompose(e);if(n)return void n.callbacks.push(t)}e.type=this.type,e.callbacks=[t],this.pendingOps.push(e)},l.prototype._popApplyStack=function(e){if(e>0)this.applyStack.length=e;else{var t=this.applyStack[0];if(this.applyStack=null,t&&-1!==(i=this.pendingOps.indexOf(t)))for(var n=this.pendingOps.splice(i),i=0;i<n.length;i++){var o=this._tryCompose(t=n[i]);o?o.callbacks=o.callbacks.concat(t.callbacks):this.pendingOps.push(t)}}},l.prototype._tryCompose=function(e){if(!this.preventCompose){var t=this.pendingOps[this.pendingOps.length-1];if(t&&!t.sentAt)return t.create&&e.op?(t.create.data=this.type.apply(t.create.data,e.op),t):t.op&&e.op&&this.type.compose?(t.op=this.type.compose(t.op,e.op),t):void 0}},l.prototype.submitOp=function(e,t,n){"function"==typeof t&&(n=t,t=null),this._submit({op:e},t&&t.source,n)},l.prototype.create=function(e,t,n,i){if("function"==typeof t?(i=t,n=null,t=null):"function"==typeof n&&(i=n,n=null),t||(t=a.defaultType.uri),this.type){var o=new r(c.ERR_DOC_ALREADY_CREATED,"Document already exists");return i?i(o):this.emit("error",o)}this._submit({create:{type:t,data:e}},n&&n.source,i)},l.prototype.del=function(e,t){if("function"==typeof e&&(t=e,e=null),!this.type){var n=new r(c.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");return t?t(n):this.emit("error",n)}this._submit({del:!0},e&&e.source,t)},l.prototype.pause=function(){this.paused=!0},l.prototype.resume=function(){this.paused=!1,this.flush()},l.prototype._opAcknowledged=function(e){if(this.inflightOp.create)this.version=e.v;else if(e.v!==this.version)return o.warn("Invalid version from server. Expected: "+this.version+" Received: "+e.v,e),this.fetch();this.version++,this._clearInflightOp()},l.prototype._rollback=function(e){var t=this.inflightOp;if(t.op&&t.type.invert){t.op=t.type.invert(t.op);for(var n=0;n<this.pendingOps.length;n++){var i=d(this.pendingOps[n],t);if(i)return this._hardRollback(i)}try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}this._clearInflightOp(e)}else this._hardRollback(e)},l.prototype._hardRollback=function(e){var t=[];this.inflightOp&&t.push(this.inflightOp),t=t.concat(this.pendingOps),this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var n=this;this.fetch(function(){for(var i=!!t.length,o=0;o<t.length;o++)i=p(t[o].callbacks,e)&&i;if(e&&!i)return n.emit("error",e)})},l.prototype._clearInflightOp=function(e){var t=this.inflightOp;this.inflightOp=null;var n=p(t.callbacks,e);if(this.flush(),this._emitNothingPending(),e&&!n)return this.emit("error",e)}},3233:function(e,t,n){t.Connection=n(2376),t.Doc=n(6724),t.Error=n(8186),t.Query=n(3131),t.types=n(8845),t.logger=n(1145)},3131:function(e,t,n){var i=n(8949);function o(e,t,n,o,r,a,c){i.EventEmitter.call(this),this.action=e,this.connection=t,this.id=n,this.collection=o,this.query=r,this.results=null,a&&a.results&&(this.results=a.results,delete a.results),this.extra=void 0,this.options=a,this.callback=c,this.ready=!1,this.sent=!1}e.exports=o,i.mixin(o),o.prototype.hasPending=function(){return!this.ready},o.prototype.send=function(){if(this.connection.canSend){var e={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(e.o=this.options),this.results){for(var t=[],n=0;n<this.results.length;n++){var i=this.results[n];t.push([i.id,i.version])}e.r=t}this.connection.send(e),this.sent=!0}},o.prototype.destroy=function(e){this.connection.canSend&&"qs"===this.action&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),e&&process.nextTick(e)},o.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},o.prototype._handleFetch=function(e,t,n){this.connection._destroyQuery(this),this._handleResponse(e,t,n)},o.prototype._handleSubscribe=function(e,t,n){this._handleResponse(e,t,n)},o.prototype._handleResponse=function(e,t,n){var i=this.callback;if(this.callback=null,e)return this._finishResponse(e,i);if(!t)return this._finishResponse(null,i);var o=this,r=1,a=function(e){if(e)return o._finishResponse(e,i);--r||o._finishResponse(null,i)};if(Array.isArray(t))r+=t.length,this.results=this._ingestSnapshots(t,a),this.extra=n;else for(var c in t){r++;var l=t[c];this.connection.get(l.c||this.collection,c).ingestSnapshot(l,a)}a()},o.prototype._ingestSnapshots=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i],r=this.connection.get(o.c||this.collection,o.d);r.ingestSnapshot(o,t),n.push(r)}return n},o.prototype._finishResponse=function(e,t){if(this.emit("ready"),this.ready=!0,e)return this.connection._destroyQuery(this),t?t(e):this.emit("error",e);t&&t(null,this.results,this.extra)},o.prototype._handleError=function(e){this.emit("error",e)},o.prototype._handleDiff=function(e){for(var t=0;t<e.length;t++)"insert"===(n=e[t]).type&&(n.values=this._ingestSnapshots(n.values));for(t=0;t<e.length;t++){var n;switch((n=e[t]).type){case"insert":var i=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(i)),this.emit("insert",i,n.index);break;case"remove":var o=n.howMany||1,r=this.results.splice(n.index,o);this.emit("remove",r,n.index);break;case"move":var a=this.results.splice(n.from,o=n.howMany||1);Array.prototype.splice.apply(this.results,[n.to,0].concat(a)),this.emit("move",a,n.from,n.to)}}this.emit("changed",this.results)},o.prototype._handleExtra=function(e){this.extra=e,this.emit("extra",e)}},4660:function(e,t,n){var i=n(6364),o=n(8949);function r(e,t,n,i,r){if(o.EventEmitter.call(this),"function"!=typeof r)throw new Error("Callback is required for SnapshotRequest");this.requestId=t,this.connection=e,this.id=i,this.collection=n,this.callback=r,this.sent=!1}e.exports=r,o.mixin(r),r.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)},r.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1},r.prototype._handleResponse=function(e,t){if(this.emit("ready"),e)return this.callback(e);var n=new i(this.id,t.v,t.type,t.data,t.meta?t.meta:null);this.callback(null,n)}},8020:function(e,t,n){var i=n(4660),o=n(8998);function r(e,t,n,r,a,c){if(i.call(this,e,t,n,r,c),!o.isValidTimestamp(a))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=a}e.exports=r,(r.prototype=Object.create(i.prototype))._message=function(){return{a:"nt",id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}}},3133:function(e,t,n){var i=n(4660),o=n(8998);function r(e,t,n,r,a,c){if(i.call(this,e,t,n,r,c),!o.isValidVersion(a))throw new Error("Snapshot version must be a positive integer or null");this.version=a}e.exports=r,(r.prototype=Object.create(i.prototype))._message=function(){return{a:"nf",id:this.requestId,c:this.collection,d:this.id,v:this.version}}},8949:function(e,t,n){var i=n(1590).EventEmitter;t.EventEmitter=i,t.mixin=function(e){for(var t in i.prototype)e.prototype[t]=i.prototype[t]}},8186:function(e){function t(e,n){this.code=e,this.message=n||"",Error.captureStackTrace?Error.captureStackTrace(this,t):this.stack=(new Error).stack}(t.prototype=Object.create(Error.prototype)).constructor=t,t.prototype.name="ShareDBError",t.CODES={ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT:"ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",ERR_APPLY_SNAPSHOT_NOT_PROVIDED:"ERR_APPLY_SNAPSHOT_NOT_PROVIDED",ERR_CLIENT_ID_BADLY_FORMED:"ERR_CLIENT_ID_BADLY_FORMED",ERR_CONNECTION_STATE_TRANSITION_INVALID:"ERR_CONNECTION_STATE_TRANSITION_INVALID",ERR_DATABASE_ADAPTER_NOT_FOUND:"ERR_DATABASE_ADAPTER_NOT_FOUND",ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE:"ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",ERR_DATABASE_METHOD_NOT_IMPLEMENTED:"ERR_DATABASE_METHOD_NOT_IMPLEMENTED",ERR_DEFAULT_TYPE_MISMATCH:"ERR_DEFAULT_TYPE_MISMATCH",ERR_DOC_MISSING_VERSION:"ERR_DOC_MISSING_VERSION",ERR_DOC_ALREADY_CREATED:"ERR_DOC_ALREADY_CREATED",ERR_DOC_DOES_NOT_EXIST:"ERR_DOC_DOES_NOT_EXIST",ERR_DOC_TYPE_NOT_RECOGNIZED:"ERR_DOC_TYPE_NOT_RECOGNIZED",ERR_DOC_WAS_DELETED:"ERR_DOC_WAS_DELETED",ERR_INFLIGHT_OP_MISSING:"ERR_INFLIGHT_OP_MISSING",ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION:"ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",ERR_MAX_SUBMIT_RETRIES_EXCEEDED:"ERR_MAX_SUBMIT_RETRIES_EXCEEDED",ERR_MESSAGE_BADLY_FORMED:"ERR_MESSAGE_BADLY_FORMED",ERR_MILESTONE_ARGUMENT_INVALID:"ERR_MILESTONE_ARGUMENT_INVALID",ERR_OP_ALREADY_SUBMITTED:"ERR_OP_ALREADY_SUBMITTED",ERR_OP_NOT_ALLOWED_IN_PROJECTION:"ERR_OP_NOT_ALLOWED_IN_PROJECTION",ERR_OP_SUBMIT_REJECTED:"ERR_OP_SUBMIT_REJECTED",ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM:"ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM:"ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT:"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",ERR_OT_OP_BADLY_FORMED:"ERR_OT_OP_BADLY_FORMED",ERR_OT_OP_NOT_PROVIDED:"ERR_OT_OP_NOT_PROVIDED",ERR_PROTOCOL_VERSION_NOT_SUPPORTED:"ERR_PROTOCOL_VERSION_NOT_SUPPORTED",ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED:"ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",ERR_SNAPSHOT_READ_SILENT_REJECTION:"ERR_SNAPSHOT_READ_SILENT_REJECTION",ERR_SNAPSHOT_READS_REJECTED:"ERR_SNAPSHOT_READS_REJECTED",ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND:"ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",ERR_TYPE_CANNOT_BE_PROJECTED:"ERR_TYPE_CANNOT_BE_PROJECTED",ERR_UNKNOWN_ERROR:"ERR_UNKNOWN_ERROR"},e.exports=t},1145:function(e,t,n){var i=new(n(3015));e.exports=i},3015:function(e){var t=["info","warn","error"];function n(){var e={};t.forEach(function(t){e[t]=console[t].bind(console)}),this.setMethods(e)}e.exports=n,n.prototype.setMethods=function(e){e=e||{};var n=this;t.forEach(function(t){"function"==typeof e[t]&&(n[t]=e[t])})}},6364:function(e){e.exports=function(e,t,n,i,o){this.id=e,this.v=t,this.type=n,this.data=i,this.m=o}},8845:function(e,t,n){t.defaultType=n(8912).type,t.map={},t.register=function(e){e.name&&(t.map[e.name]=e),e.uri&&(t.map[e.uri]=e)},t.register(t.defaultType)},8998:function(e,t){t.doNothing=function(){},t.hasKeys=function(e){for(var t in e)return!0;return!1},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isValidVersion=function(e){return null===e||t.isInteger(e)&&e>=0},t.isValidTimestamp=function(e){return t.isValidVersion(e)}},2213:function(e){e.exports={VERBOSE_MODE:!1,modules:["globalObject","loadedEvent","userObject","cookies","nodeObjects","protectedMode","databaseErrors","dataSavedEvent","domEvents","transclusionEvent","connectionEvents","permissions","tagging","clientManager","newWebstrates","signaling","signalStream","userObjectSignaling","userHistory","assets","messages","keepAlive"],reuseWebsocket:!1,keepAliveInterval:25,isTransientElement:function(e){return!!e.matches("transient")||!!e.classList.contains("author-tip")||!!t.isTransientElement&&t.isTransientElement(e)},isTransientAttribute:function(e,n){return!!n.startsWith("transient-")||!!t.isTransientAttribute&&t.isTransientAttribute(e,n)},peerConnectionConfig:{iceServers:[{urls:"stun:stun.services.mozilla.com"},{urls:"stun:stun.l.google.com:19302"}]}}},1411:function(e,t,i){var o=i(9948),r=i(6068),a=i(2445),c=i(1366);o.createEvent("asset"),o.createEvent("receivedAssets");var s,d=!1;c.createEvent("asset");var p=a.copy(function(e){return e.data.startsWith('{"wa":')}),u=r.getLocationObject().webstrateId;p.onjsonmessage=function(e){if(e.d===u)switch(e.wa){case"assets":o.triggerEvent("receivedAssets",s=e.assets),d=!0;break;case"asset":new Promise(function(e){d?e():o.addEventListener("receivedAssets",function t(){o.removeEventListener("receivedAssets",t),d=!0,e()})}).then(function(){s.push(e.asset),o.triggerEvent("asset",e.asset),c.triggerEvent("asset",e.asset)})}},Object.defineProperty(c.publicObject,"assets",{get:function(){return Object.freeze(r.objectClone(s))}}),c.publicObject.uploadAsset=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(i,o){var r=n.createElement("input");r.setAttribute("multiple",!0),r.setAttribute("type","file"),r.addEventListener("change",function(n){var a=new FormData;Object.entries(t).forEach(function(e){var t=l(e,2);return a.append(t[0],t[1])});for(var c=0;c<r.files.length;c++)a.append("file[]",r.files.item(c));fetch("",{method:"post",credentials:"include",body:a}).then(function(t){return t.json().then(function(n){t.ok?(i(n),e(null,n)):(o(n.error),e(n.error))}).catch(function(t){o(t),e(t)})}).catch(function(t){o(t),e(t)})}),r.click()})},c.publicObject.deleteAsset=function(e,t){p.send({wa:"deleteAsset",d:u,assetName:e},function(e,n){return t&&t(e,n)})},c.publicObject.searchAsset=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if("function"!=typeof n)throw new Error("Must provide callback function");var i=e.split("/"),o=l(i,2),r=o[0],a=o[1];p.send({wa:"assetSearch",d:u,assetName:r,assetVersion:Number(a),query:t.query,sort:t.sort,limit:t.limit,skip:t.skip},function(e,t){return n(e,t.records,t.count)})},e.exports={}},4858:function(t,i){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(){"use strict";function t(n){a(this,t),this.author=n,this.defaultColor="#369CD0",this.container=this.generateAuthorContainer(n.color),this.setTextDisplay(n.name,n.color),e.append(this.container),this.hideTimer=null}return c(t,[{key:"generateAuthorContainer",value:function(e){var i=n.createElement("div"),o=this.authorBox=n.createElement("span");return i.setAttribute("unselectable","true"),i.setAttribute("contenteditable","false"),i.style.pointerEvents="none",i.classList.add("author-tip"),i.style.display="none",i.style.borderLeft="2px solid ".concat(e||this.defaultColor),i.style.position="absolute",i.append(o),o.style.padding="0 4px",o.style.position="absolute",o.style.top="-".concat(t.BOX_HEIGHT,"px"),o.style.left="50%",o.style.height="".concat(t.BOX_HEIGHT,"px"),o.style.fontSize="14px",o.style.lineHeight="".concat(t.BOX_HEIGHT,"px"),o.style.whiteSpace="nowrap",o.style.opacity="0.85",o.style.transform="translate(-5%)",o.style.background=e||"#dcdcdc",o.style.color="#fff",i}},{key:"setTextDisplay",value:function(e){this.container.firstChild.innerText=e}},{key:"setDisplayPosition",value:function(e,t,n){this.container.style.display="block",this.container.style.height=n+"px",this.container.style.left=t+"px",this.container.style.top=e+"px"}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"destroy",value:function(){this.container.remove()}}]),t}();o(r,"BOX_HEIGHT",25),o(r,"FADE_OUT_TIME",50),i.AuthorTip=r},7787:function(e,t,n){var i=n(9948),o=n(2445),r=n(1366),a=n(8170),c=n(6068);if(!c.getLocationObject().staticMode){i.createEvent("clientsReceived"),i.createEvent("clientJoin"),i.createEvent("clientPart"),a.delayUntil("clientsReceived"),r.createEvent("clientJoin"),r.createEvent("clientJoin*"),r.createEvent("clientPart"),r.createEvent("clientPart*");var l,s=o.copy(function(e){return e.data.startsWith('{"wa":')}),d=c.getLocationObject().webstrateId,p=[];Object.defineProperty(r.publicObject,"clients",{get:function(){return c.objectCloneAndLock(p)}}),Object.defineProperty(r.publicObject,"clientId",{get:function(){return l}}),s.onjsonmessage=function(e){if(e.d===d)switch(e.wa){case"hello":p=e.clients,l=e.id,i.triggerEvent("clientsReceived");break;case"clientJoin":var t=e.id,n=l===t;n||p.push(t),i.triggerEvent("clientJoin",t),n||r.triggerEvent("clientJoin",t,n),r.triggerEvent("clientJoin*",t,n);break;case"clientPart":var o=e.id,a=p.indexOf(o);if(-1===a)return;p.splice(a,1),i.triggerEvent("clientPart",o);var c=l===o;c||r.triggerEvent("clientPart",o,c),r.triggerEvent("clientPart*",o,c)}},i.addEventListener("loadedTriggered",function(){s.send({wa:"ready",d:d})})}e.exports={}},9612:function(e,t,n){var i=n(9948),o=n(2445),r=n(1366);i.createEvent("connect"),i.createEvent("disconnect"),i.createEvent("reconnect"),r.createEvent("disconnect"),r.createEvent("reconnect");var a=o.copy(),c=a.readyState;a.onopen=function(e){c===WebSocket.CONNECTING?i.triggerEvent("connect"):c===WebSocket.CLOSED&&(i.triggerEvent("reconnect"),r.triggerEvent("reconnect")),c=a.readyState},a.onerror=a.onclose=function(e){c!==a.readyState&&(c=a.readyState,i.triggerEvent("disconnect"),r.triggerEvent("disconnect"))}},348:function(e,t,n){var i,o=n(2445),r=n(1366),a=n(7385),c=n(6068),l=o.copy(function(e){return e.data.startsWith('{"wa":')}),s=c.getLocationObject().webstrateId;function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={wa:"cookieUpdate",update:{key:e,value:t}};n||(i.d=r.publicObject.webstrateId),l.send(i)}r.createEvent("cookieUpdateHere"),r.createEvent("cookieUpdateAnywhere"),l.onjsonmessage=function(e){switch(e.wa){case"hello":if(e.d!==s)return;i=e.cookies||{here:{},anywhere:{}},a.publicObject.userId&&"anonymous:"!==a.publicObject.userId&&(a.publicObject.cookies={anywhere:{get:function(e){return e?i.anywhere[e]:i.anywhere},set:function(e,t){i.anywhere[e]=t,d(e,t,!0)}},here:{get:function(e){return e?i.here[e]:i.here},set:function(e,t,n){i.here[e]=t,d(e,t,!1)}}});break;case"cookieUpdate":if(void 0!==e.d&&e.d!==s)return;var t=[e.update.key,e.update.value],n=t[0],o=t[1];e.d?(i.here[n]=o,r.triggerEvent("cookieUpdateHere",n,o)):(i.anywhere[n]=o,r.triggerEvent("cookieUpdateAnywhere",n,o))}},e.exports={}},339:function(e,t,n){var i=n(2213),o={attributeValueDiffing:!0};Object.defineProperty(o,"isTransientElement",{get:function(){return i.isTransientElement},set:function(e){if("function"!=typeof e)throw new Error("isTransientElement must be a function");return i.isTransientElement=e}}),Object.defineProperty(o,"isTransientAttribute",{get:function(){return i.isTransientAttribute},set:function(e){if("function"!=typeof e)throw new Error("isTransientAttribute must be a function");return i.isTransientAttribute=e}}),Object.defineProperty(o,"peerConnectionConfig",{get:function(){return i.peerConnectionConfig},set:function(e){if("object"!=typeof e)throw new Error("peerConnectionConfig must be an object");return i.peerConnectionConfig=e}}),Object.defineProperty(o,"serverConfig",{get:function(){return{niceWebstrateIds:!1,maxAssetSize:100,gitCommit:"9538b1a merge 'dev-WI2022033198774' into 'master'",nodeVersion:"v14.17.3"}},set:function(){throw new Error("Server config is read-only")}}),e.exports=o},704:function(e){var t={elementOptions:{}};t.internalDocument=n,t.externalDocument=s,t.CONTEXT=new Proxy({INTERNAL:0,BOTH:1},{get:function(e,t){if(t in e)return e[t];throw new Error("Invalid context ".concat(t,", must be INTERNAL or BOTH"))}});var i=new Map;t.overrideDocument=function(e,n,o){if(n===t.CONTEXT.INTERNAL){if(i.has(e))throw new Error("Property has already been overriden");return i.set(e,o)}if(n!==t.CONTEXT.BOTH)throw new Error("Invalid context",n);if("function"==typeof o){var r=t.externalDocument[e].bind(t.externalDocument);t.externalDocument[e]=o.bind(t.externalDocument,r)}else t.externalDocument[e]=o},d.get=function(e,n){return"PROXY_DOCUMENT"===n||(i.has(n)?"function"==typeof i.get(n)?i.get(n).bind(e,t.externalDocument[n]):i.get(n):"function"==typeof e[n]?e[n].bind(e):e[n])},e.exports=t},1528:function(e,t,n){var i,o,a=n(2213),c=n(9948),l=n(6068),s=n(2445),d=n(1366),p=n(3233),u="webstrates";c.createEvent("receivedDocument"),c.createEvent("receivedOps"),c.createEvent("databaseError"),c.createEvent("opsAcknowledged"),t.getDocument=function(e){return e&&Array.isArray(e)?e.reduce(function(e,t){return e&&e[t]},i.data):i},t.elementAtPath=function(e,n){if(n||(n=e,e=i.data),n.length>0&&"string"==typeof n[n.length-1])return null;var o=r(n),a=o[0],c=o.slice(1);return a&&e[a]?t.elementAtPath(e[a],c):e};var m=new Set;Object.defineProperty(d.publicObject,"getDocument",{value:function(e){return o?m.has(e)?void 0:(m.add(e),o.get(u,e)):window.parent.window.webstrate.getDocument(e)}}),t.subscribe=function(e){return new Promise(function(t,n){if(l.isTranscluded()&&l.sameParentDomain()&&a.reuseWebsocket&&(i=window.parent.window.webstrate.getDocument(e)),!i){var r=s.copy(function(e){return!e.data.startsWith('{"wa":')});o=new p.Connection(r),i=o.get(u,e)}i.subscribe(function(e){if(e)return n(e);c.triggerEvent("receivedDocument",i,{static:!1});var o=l.randomString();c.addEventListener("createdOps",function(e){i.submitOp(e,{source:o})},c.PRIORITY.IMMEDIATE),i.on("op",function(e,t){t!==o&&c.triggerEvent("receivedOps",e)}),i.on("nothing pending",function(){c.triggerEvent("opsAcknowledged")}),i.on("error",function(e){4018!==e.code&&c.triggerEvent("databaseError",e)}),t(i)})})},t.fetch=function(e,t){return new Promise(function(n,i){var o={wa:"fetchdoc",d:e};/^\d/.test(t)&&Number(t)?o.v=Number(t):o.l=t,s.send(o,function(e,t){if(e)return i(e);c.triggerEvent("receivedDocument",t,{static:!0}),n(t)},{waitForOpen:!0})})},t.restore=function(e,t,n){var i={wa:"restore",d:e};/^\d/.test(t)?i.v=t:i.l=t,s.send(i,n)},t.getOps=function(e,t,n,i){s.send({wa:"getOps",d:e,from:t,to:n},i)}},9948:function(e){var t={},n={},i={},o={};t.PRIORITY=new Proxy({IMMEDIATE:0,HIGH:1,MEDIUM:2,LOW:3,LAST:4},{get:function(e,t){if(t in e)return e[t];throw new Error("Invalid priority ".concat(t))}}),t.createEvent=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.eventExists(e)&&!r.idempotent)throw new Error("Event ".concat(e," already exists."));if(void 0!==r.addListener){if("function"!=typeof r.addListener)throw new Error("addListener must be a function, received: ".concat(r.addListener,"."));i[e]=r.addListener}if(void 0!==r.removeListener){if("function"!=typeof r.removeListener)throw new Error("removeListener must be a function, received: ".concat(r.removeListener,"."));o[e]=r.removeListener}n[e]||(n[e]=new Set)},t.eventExists=function(e){return Object.prototype.hasOwnProperty.call(n,e)},t.addEventListener=function(e,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PRIORITY.LOW;if(o.priority=r,!t.eventExists(e))throw new Error("Event ".concat(e," doesn't exist."));if(n[e].has(o))throw new Error("EventListener already attacehd to ".concat(e,"."));n[e].add(o),i[e]&&i[e](o)},t.removeEventListener=function(e,i){if(!t.eventExists(e))throw new Error("Event ".concat(e," doesn't exist."));n[e].delete(i),o[e]&&o[e](i)},t.triggerEvent=function(e){for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];if(!t.eventExists(e))throw new Error("Event ".concat(e," doesn't exist."));var a=Array.from(n[e]);a.sort(function(e,t){return e.priority-t.priority}),a.forEach(function(e){try{e.priority===t.PRIORITY.IMMEDIATE?e.apply(void 0,o):setImmediate.apply(void 0,[e].concat(o))}catch(e){}})},e.exports=t},178:function(e,t,i){var o=i(2213),r=i(6068),a=i(704),c={};function l(e,t,n,i){var o=r.unescape(e[i]);i=r.sanitizeString(i),"http://www.w3.org/2000/svg"===n&&("href"!==i&&"xlink:href"!==i||t.setAttributeNS("http://www.w3.org/1999/xlink",i,o,a.elementOptions)),"path"===t.tagName.toLowerCase()&&"d"===i&&(t.__d=o),t.setAttribute(r.unescapeDots(i),o,a.elementOptions)}function s(e,t,n,i){for(var o in e)"__wid"===o.toLowerCase()?r.setWidOnElement(t,e[o]):l(e,t,n,o);"script"===t.tagName.toLowerCase()&&(t.async=!1,i&&i.push(t))}function d(e,t,n){var i=r.getChildNodes(e);if(0===i.length)return!1;for(var o=0;o<i.length;o++){var a=p(i[o],t);a&&n.push(a)}return!0}function p(e,t){if(!e||!e.nodeType||!e.__pathNodes||0===e.__pathNodes.length)return null;var i,a;switch(e.nodeType){case n.ELEMENT_NODE:case n.DOCUMENT_NODE:case n.DOCUMENT_FRAGMENT_NODE:a=[e.tagName||""];var c={},l=!1,s=function(e,t,n,i){var r;for(r=0;r<e.length;r++)o.isTransientAttribute(i,e[r].name)||e[r].specified&&("style"===e[r].name?t.style=i.style.cssText||e[r].value:"string"==typeof e[r].value&&(t["http://www.w3.org/2000/svg"===i.namespaceURI?e[r].name.toLowerCase():e[r].name]=e[r].value),n=!0);return i.__wid&&(t.__wid=i.__wid,n=!0),{hasAttrib:n,i:r}}(e.attributes||[],c,l,e);return l=s.hasAttrib,i=s.i,a.push(c),c=function(e){var t,n,i=e.elem,o=e.jml,a=e.filter,c=e.i,l=e.hasAttrib,s=e.props;switch(o[0].toLowerCase()){case"frame":case"iframe":break;case"style":if((t=i.styleSheet&&i.styleSheet.cssText)&&"string"==typeof t)t=t.replace("\x3c!--","").replace("--\x3e",""),o.push(t);else if(n=r.getChildNodes(i))for(c=0;c<n.length;c++)(t=p(t=n[c],a))&&"string"==typeof t&&o.push(t.replace("\x3c!--","").replace("--\x3e",""));break;case"input":d(i,a,o),s=function(e){var t=e.elem,n=e.jml,i=e.child,o=e.props;return i&&(e.hasAttrib||(n.shift(),n.unshift(o={}),n.unshift(t.tagName||"")),o.value=i),o}({elem:i,jml:o,child:t="password"!==i.type&&i.value,hasAttrib:l,props:s});break;case"textarea":d(i,a,o)||(t=i.value||i.innerHTML)&&"string"==typeof t&&o.push(t);break;default:d(i,a,o)}return s}({elem:e,jml:a,filter:t,i:i,hasAttrib:l,props:c}),"function"==typeof t&&(a=t(a,e)),e=null,a;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:var u=String(e.nodeValue);return e=null,u;case Node.DOCUMENT_TYPE_NODE:return a=function(e,t,n){var i=["!"],o=["DOCTYPE",(e.name||"html").toLowerCase()];return e.publicId&&o.push("PUBLIC",'"'+e.publicId+'"'),e.systemId&&o.push('"'+e.systemId+'"'),i.push(o.join(" ")),"function"==typeof t&&(i=t(i,e)),i}(e,t),e=null,a;case Node.COMMENT_NODE:return-1!==(e.nodeValue||"").indexOf("DOCTYPE")?(e=null,null):(a=function(e,t){var n=["!",e.nodeValue];return"function"==typeof t&&(n=t(n,e)),n}(e,t),e=null,a);default:return null}}c.toHTML=function e(t,i,o){var a,c,l=n.createDocumentFragment(),d=0,p=null;if("string"==typeof t[0]&&(p=t[0],d=1),"!"===t[0]||"#comment"===t[0])return n.createComment(t.slice("string"==typeof t[1]?1:2).join(""));for(;d<t.length;d++)Array.isArray(t[d])?("foreignobject"===p.toLowerCase()&&(i=void 0),l.appendChild(e(t[d],i,o))):(c=t[d])&&"object"==typeof c&&"[object Object]"===Object.prototype.toString.call(c)?p&&(a=(i="svg"===(p=r.sanitizeString(p)).toLowerCase()&&"http://www.w3.org/2000/svg")&&"http://www.w3.org/1999/xhtml"!==i?n.createElementNS(i,p):n.createElement(p),s(t[d],a,i,o)):"number"==typeof t[d]||"string"==typeof t[d]?l.appendChild(n.createTextNode(t[d])):t[d].nodeType&&l.appendChild(t[d]);return!a&&p&&(p=r.sanitizeString(p),a=n.createElement(p)),"html"===p?l:a?function(e,t){return e.content&&e.content.nodeType===n.DOCUMENT_FRAGMENT_NODE?e.content.appendChild(t):e.appendChild(t),e}(a,l):void 0},c.fromHTML=p,e.exports=c},2131:function(e,t,i){var o=i(9948),r=i(6068),a={};o.createEvent("mutation");var c,s={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},d={},p={};function u(e){e.forEach(function(e){e.target.nodeType===n.DOCUMENT_FRAGMENT_NODE&&Object.defineProperty(e,"target",{value:p[e.target.id]}),o.triggerEvent("mutation",e)})}var m=new MutationObserver(u);function h(e,t){if(!e.id){e.id=r.randomString();var n=new MutationObserver(u);n.observe(e,s),d[e.id]=[e,n],p[e.id]=t}}a.emitMutationsFrom=function(e){m.observe(c=e,s),r.recursiveForEach(c,function(e){e.content&&e.content.nodeType===n.DOCUMENT_FRAGMENT_NODE&&h(e.content,e)}),g=!1},o.createEvent("DOMNodeInserted",{idempotent:!0}),o.createEvent("DOMNodeDeleted",{idempotent:!0}),o.addEventListener("DOMNodeInserted",function(e){r.recursiveForEach(e,function(e){e.content&&e.content.nodeType===n.DOCUMENT_FRAGMENT_NODE&&h(e.content,e)})},o.PRIORITY.IMMEDIATE),o.addEventListener("DOMNodeDeleted",function(e){r.recursiveForEach(e,function(e){e.content&&e.content.nodeType===n.DOCUMENT_FRAGMENT_NODE&&function(e){var t;e.id&&p[e.id]&&(e=(t=l(d[e.id],2))[0],t[1].disconnect(),delete d[e.id],delete p[e.id])}(e.content)})},o.PRIORITY.IMMEDIATE);var g=!0;Object.defineProperty(a,"isPaused",{get:function(){return g}}),a.pause=function(){g||(Object.keys(d).forEach(function(e){l(d[e],2)[1].disconnect()}),m.disconnect(),g=!0)},a.resume=function(){g&&(Object.keys(d).forEach(function(e){var t=l(d[e],2);t[1].observe(t[0],s)}),m.observe(c,s),g=!1)},a.disconnect=function(){m.disconnect()},e.exports=a},3143:function(e,t,i){var r=i(2213),a=i(9948),c=i(6068),s=i(2562),d=i(2131),p=i(178),u=i(704),m=new(0,i(7481).AuthorTracer),h={};function g(e){if(e&&e.getAttribute)return!e.closest("foreignObject")||e instanceof SVGForeignObjectElement?e.getAttribute("xmlns")?e.getAttribute("xmlns"):e.namespaceURI:n.body.namespaceURI}function f(e,t,i){var o=s.elementAtPath(e,t),r=l(o,3),d=r[0],u=r[1],m=r[2],h=g(m),f="string"==typeof i?n.createTextNode(i):p.toHTML(i,h);c.appendChildWithoutScriptExecution(m,f,d);var v=s.getPathNode(m),b=s.create(f,v);b&&v.children.splice(u,0,b),a.triggerEvent("DOMNodeInserted",f,m,!1)}function v(e){if(window.getSelection()&&0!==window.getSelection().rangeCount){var t=window.getSelection().getRangeAt(0);if(t.commonAncestorContainer===e)return{startOffset:t.startOffset,startContainer:t.startContainer,endOffset:t.endOffset,endContainer:t.endContainer}}}function b(e,t){return t>=0?[e,t]:e.lastChild?b(e.lastChild,t=e.lastChild.nodeType===n.TEXT_NODE?t+e.lastChild.length:t):e.previousSibling?e.previousSibling.nodeType===n.TEXT_NODE?b(e.previousSibling,t+e.previousSibling.nodeValue.length):void 0:b(e.parentNode,t=e.parentNode.nodeType===n.TEXT_NODE?t+e.parentNode.length:t)}function C(e,t){var i=n.createRange();if(t.startOffset<0){var o=b(t.startContainer,t.startOffset),r=l(o,2),a=r[1];t.startContainer=r[0],t.startOffset=a}if(t.endOffset<0){var c=b(t.endContainer,t.endOffset),s=l(c,2),d=s[1];t.endContainer=s[0],t.endOffset=d}i.setStart(t.startContainer,t.startOffset),i.setEnd(t.endContainer,t.endOffset),window.getSelection().removeAllRanges(),window.getSelection().addRange(i)}function y(e,t){var i,o=s.elementAtPath(e,t),r=l(o,3),c=r[0],d=r[1],p=r[2],u=v(c);c.nextSibling&&c.nextSibling.nodeType===n.TEXT_NODE?i=c.nextSibling:c.nextElementSibling&&c.nextElementSibling.firstChild&&c.nextElementSibling.firstChild.nodeType===n.TEXT_NODE?i=c.nextElementSibling.firstChild:p.nextSibling&&p.nextSibling.nodeType===n.TEXT_NODE?i=p.nextSibling:p.nextElementSibling&&p.nextElementSibling.firstChild&&p.nextElementSibling.firstChild.nodeType===n.TEXT_NODE&&(i=p.nextElementSibling.firstChild),u&&c.data&&i&&i.data===c.data&&(u.startContainer===c&&(u.startContainer=i),u.endContainer===c&&(u.endContainer=i),C(0,u)),s.getPathNode(p).children.splice(d,1),c.remove(),a.triggerEvent("DOMNodeDeleted",c,p,!1)}function x(e,t,n){var i=[];i.push({author:n,offset:t}),m.updateTracer(e,i)}function w(e,t,i,o,r){var c=s.elementAtPath(e,t),d=l(c,4),p=d[0],u=d[2],m="string"==typeof t[t.length-1]?t[t.length-1]:void 0;switch(d[3]){case 0:throw Error("Unsupported indexType jsonml.TAGNAME_INDEX (0)");case 1:if(m){m=t.pop();var h="path"===p.tagName.toLowerCase()&&"d"===m,g=p.getAttribute(m);h&&(g=p.__d);var f=g.substring(0,i)+o+g.substring(i);h&&(p.__d=f),p.setAttribute(m,f),a.triggerEvent("DOMAttributeSet",p,m,g,f,!1),a.triggerEvent("DOMAttributeTextInsertion",p,m,i,o,!1);break}default:var b=(u=u.nodeType===n.COMMENT_NODE?u:p).data,y=b.substring(0,i)+o+b.substring(i),w=v(u);u.data=y,function(e,t,n,i){e&&(e.endContainer===t&&e.endOffset>n&&(e.endOffset+=i.length,e.startContainer===t&&e.startOffset>=n&&(e.startOffset+=i.length)),C(0,e))}(w,u,i,o),a.triggerEvent("DOMTextNodeInsertion",p,u,i,o)}var _=new CustomEvent("insertText",{detail:{position:i,value:o,attributeName:m}});u.dispatchEvent(_),x(u,i+o.length,r)}function _(e,t,i,o,r){var c=s.elementAtPath(e,t),d=l(c,4),p=d[0],u=d[2],m="string"==typeof t[t.length-1]?t[t.length-1]:void 0;switch(d[3]){case 0:throw Error("Unsupported indexType jsonml.TAGNAME_INDEX (1)");case 1:if(m){m=t.pop();var h="path"===p.tagName.toLowerCase()&&"d"===m,g=p.getAttribute(m);h&&(g=p.__d);var f=g.substring(0,i)+g.substring(i+o.length);h&&(p.__d=f),p.setAttribute(m,f),a.triggerEvent("DOMAttributeSet",p,m,g,f,!1),a.triggerEvent("DOMAttributeTextDeletion",p,m,i,o,!1);break}default:var b=v(u=u.nodeType===n.COMMENT_NODE?u:p),y=u.data,w=y.substring(0,i)+y.substring(i+o.length);u.data=w,function(e,t,n,i){e&&(e.endContainer===t&&e.endOffset>n&&(e.endOffset-=i.length,e.startContainer===t&&e.startOffset>=n&&(e.startOffset-=i.length)),C(0,e))}(b,u,i,o),a.triggerEvent("DOMTextNodeDeletion",p,u,i,o)}var _=new CustomEvent("deleteText",{detail:{position:i,value:o,attributeName:m}});u.dispatchEvent(_),x(u,i,r)}a.createEvent("DOMAttributeSet",{idempotent:!0}),a.createEvent("DOMAttributeRemoved",{idempotent:!0}),a.createEvent("DOMNodeInserted",{idempotent:!0}),a.createEvent("DOMNodeDeleted",{idempotent:!0}),a.createEvent("DOMAttributeTextInsertion",{idempotent:!0}),a.createEvent("DOMTextNodeInsertion",{idempotent:!0}),a.createEvent("DOMAttributeTextDeletion",{idempotent:!0}),a.createEvent("DOMTextNodeDeletion",{idempotent:!0}),h.listenForOpsAndApplyOn=function(e){a.addEventListener("receivedOps",function(t){d.pause(),t.forEach(function(t){!function(e,t){var n,i,d=e.p;0!==d.length&&(("si"in e||"sd"in e)&&(n=d.pop()),("oi"in e||"od"in e)&&(i=d.pop()),"oi"in e?function(e,t,n,i){var o=s.elementAtPath(e,t),r=l(o,1)[0];if("__wid"!==n){var d=c.unescapeDots(n);i=c.unescape(i),"path"===r.tagName.toLowerCase()&&"d"===d&&(r.__d=i);var p=r.getAttribute(d);r.setAttribute(d,i,u.elementOptions),a.triggerEvent("DOMAttributeSet",r,d,p,i,!1)}else c.setWidOnElement(r,i)}(t,d,i,e.oi):"od"in e?function(e,t,n){var i=s.elementAtPath(e,t),o=l(i,1)[0];if(!r.isTransientAttribute(o,n)){"path"===o.tagName.toLowerCase()&&"d"===n&&delete o.__d;var c=o.getAttribute(n);o.removeAttribute(n),a.triggerEvent("DOMAttributeRemoved",o,n,c,!1)}}(t,d,i):"sd"in e?_(t,d,n,e.sd,e.au):"si"in e?w(t,d,n,e.si,e.au):"li"in e&&"ld"in e?function(e,t,n){var i=s.elementAtPath(e,t),r=l(i,4),d=r[0],u=r[1],m=r[2];if(d)switch(r[3]){case 0:var h=d,v=g(h),b=p.toHTML([n],v),C=s.getPathNode(m);if(!C)return;!function(e,t,n,i){for(;e.firstChild;)c.appendChildWithoutScriptExecution(t,e.firstChild);for(var o=0;o<e.attributes.length;o++){var r=e.attributes.item(o),a=r.nodeName;"path"===n.tagName.toLowerCase()&&"d"===a&&(t.__d=r.nodeValue),t.setAttribute(a,r.nodeValue)}c.appendChildWithoutScriptExecution(i,t,e),e.remove()}(h,b,d,m);var x=s.create(b,C,!0);if(!x)break;C.children.splice(u,1,x),a.triggerEvent("DOMNodeDeleted",h,m,!1),a.triggerEvent("DOMNodeInserted",b,m,!1);break;case 1:var w=n,_=Array.from(d.attributes).map(function(e){return e.name});!function(e,t,n){e.forEach(function(e){var i="path"===t.tagName.toLowerCase()&&"d"===e;e in n?(i&&(t.__d=n[e]),t.setAttribute(e,n[e])):(i&&delete t.__d,t.removeAttribute(e))})}(new Set([].concat(o(Object.keys(w)),o(_))),d,w);break;default:y(e,t),f(e,t,n)}}(t,d,e.li):"ld"in e?y(t,d):"li"in e&&f(t,d,e.li))}(t,e)}),d.resume()},a.PRIORITY.IMMEDIATE)},e.exports=h},289:function(e,i,r){var a=r(2213),c=r(339),s=r(9948),d=r(1528),p=r(2562),u=r(6068),m=r(178),h=r(1889),g=r(6232),f={};s.createEvent("createdOps"),s.createEvent("DOMAttributeSet",{idempotent:!0}),s.createEvent("DOMAttributeRemoved",{idempotent:!0}),s.createEvent("DOMNodeInserted",{idempotent:!0}),s.createEvent("DOMNodeDeleted",{idempotent:!0}),s.createEvent("DOMAttributeTextInsertion",{idempotent:!0}),s.createEvent("DOMTextNodeInsertion",{idempotent:!0}),s.createEvent("DOMAttributeTextDeletion",{idempotent:!0}),s.createEvent("DOMTextNodeDeletion",{idempotent:!0});var v=new h;function b(e,n,i){var r=[],a=v.patch_make(n,i);return Object.keys(a).forEach(function(n){var i=a[n],c=i.start1;i.diffs.forEach(function(n){var i=l(n,2),a=i[0],s=i[1];switch(a){case h.DIFF_DELETE:r.push({sd:s,p:[].concat(o(e),[c]),au:t.author.user_name_zh});break;case h.DIFF_INSERT:r.push({si:s,p:[].concat(o(e),[c]),au:t.author.user_name_zh});case h.DIFF_EQUAL:c+=s.length;break;default:throw Error("Unsupported operation type: ".concat(a))}})}),r}function C(e,t,i){u.recursiveForEach(e,function(e){if(e.nodeType===n.ELEMENT_NODE&&!(e=function(e,t){if(e!==t.tagName){for(var i=n.createElementNS(t.tagName.namespaceURI,e);t.firstChild;)u.appendChildWithoutScriptExecution(i,t.firstChild);for(var o=0;o<t.attributes.length;o++){var r=t.attributes[o];i.setAttribute(u.sanitizeString(r.nodeName),r.nodeValue)}u.appendChildWithoutScriptExecution(t.parentElement,i,t),t.remove(),t=i}else for(var a=0;a<t.attributes.length;a++){var c=t.attributes[a],l=u.sanitizeString(c.nodeName);l!==c.nodeName&&(t.removeAttribute(c.nodeName),t.setAttribute(l,c.nodeValue))}return t}(u.sanitizeString(e.tagName),e)).__wid&&i&&!a.isTransientElement(e)){var t=u.randomString();u.setWidOnElement(e,t)}},t)}f.emitOpsFromMutations=function(){s.addEventListener("mutation",function(e){var t,i=p.getPathNode(e.target),r=e.target.nodeType===n.ELEMENT_NODE?e.target:e.target.parentElement,l=p.getPathNode(r);switch(e.type){case"attributes":t=function(e,t){if(t&&!a.isTransientAttribute(e.target,e.attributeName)){var n,i=u.escapeDots(e.attributeName),r=t.toPath(),l=[].concat(o(r),[1,i]),p=e.oldValue,m=u.escape(e.target.getAttribute(e.attributeName)),h=d.elementAtPath([].concat(o(r),[1]));return null===m?(s.triggerEvent("DOMAttributeRemoved",e.target,e.attributeName,p,m,!0),[{od:p,p:l}]):m===h[i]?[]:(n=null===p||m.length<50||!h[i]||!c.attributeValueDiffing||e.target.hasAttribute("op-throttle")?[{od:p,oi:m,p:l}]:b(l,h[i],m),s.triggerEvent("DOMAttributeSet",e.target,e.attributeName,p,m,!0),n)}}(e,i);break;case"characterData":t=function(e,t){if(t){var i,o=e.target.nodeType===n.COMMENT_NODE,r=t.toPath(),a=d.elementAtPath(r),c="string"==typeof a&&a||"",l=e.target.data.replace(/\u00a0/g," ");e.target.parentElement&&e.target.parentElement.hasAttribute("op-compose")&&(c=e.target.futureContents||c,e.target.futureContents=l),i=b(r,c,l),o&&i[0].p.splice(i[0].p.length-1,0,1);var p=t.parent.DOMNode;return i.forEach(function(t){var n,i;"si"in t?(n="DOMTextNodeInsertion",i=t.si):"sd"in t?(n="DOMTextNodeDeletion",i=t.sd):"od"in t&&(n="DOMNodeDeleted",i=t.od),"oi"in t&&(n="DOMNodeInserted",i=t.oi),s.triggerEvent(n,e.target,p,t.p[t.p.length-1],i,!0)}),i}}(e,i);break;case"childList":t=function(e,t){var n=[];if(t)return Array.from(e.addedNodes).forEach(function(i){var o=e.target,r=p.getPathNode(i,o);if(!r||t.id!==r.parent.id){C(i,o,t);var a=p.create(i,t);if(a){for(var c=i.previousSibling,l=p.getPathNode(c,o);c&&!l;)l=p.getPathNode(c=c.previousSibling,o);!function(e){var t=e.targetPathNode,n=e.newPathNode,i=e.addedNode;if(e.previousSibling){var o=t.children.indexOf(e.previousSiblingPathNode);t.children.splice(o+1,0,n)}else i.nextSibling?t.children.unshift(n):t.children.push(n)}({previousSibling:c,previousSiblingPathNode:l,targetPathNode:t,newPathNode:a,addedNode:i});var d=p.getPathNode(i,o).toPath(),u={li:m.fromHTML(i),p:d};n.push(u),s.triggerEvent("DOMNodeInserted",i,e.target,!0)}else s.triggerEvent("DOMNodeInserted",i,e.target,!0)}}),Array.from(e.removedNodes).forEach(function(t){var i=p.getPathNode(t,e.target);if(i){var o=i.toPath();i.remove();var r=d.elementAtPath(o);r&&(n.push({ld:r,p:o}),s.triggerEvent("DOMNodeDeleted",t,e.target,!0))}else s.triggerEvent("DOMNodeDeleted",t,e.target,!0)}),n}(e,i)}if(t&&0!==t.length){if(r&&r.hasAttribute("op-throttle")){var h=Number(r.getAttribute("op-throttle"));return i.throttleFn&&i.throttleDelay===h||(i.throttleDelay=h,i.throttleFn=u.throttleFn(s.triggerEvent.bind(s),h)),void i.throttleFn("createdOps",t)}if(i&&(i.throttleFn=null),r&&r.hasAttribute("op-compose")){var f=Number(r.getAttribute("op-compose"));return i.composedOps=i.composedOps?g.compose(i.composedOps,t):t,l.composeFn&&l.composeDelay===f||(l.composeDelay=f,i.composedOps=t,l.composeFn=u.throttleFn(function(e){e.composedOps&&(s.triggerEvent("createdOps",u.objectClone(e.composedOps)),e.composedOps=null)},f)),void l.composeFn(i)}l&&(l.composeFn=null),s.triggerEvent("createdOps",t)}},s.PRIORITY.IMMEDIATE)},f.addWidToElement=function(e){if(e.nodeType===n.ELEMENT_NODE&&!e.__wid){var t=p.getPathNode(e);if(!t)return;var i=t.toPath(),r=d.getDocument(i);if(!Array.isArray(r))return;var a=u.randomString();u.setWidOnElement(e,a);var c=[{oi:a,p:[].concat(o(i),[1,"__wid"])}];s.triggerEvent("createdOps",c)}},f.ensureExistenceOfWids=function(e){u.recursiveForEach(e,function(e){return f.addWidToElement(e)})},s.addEventListener("DOMNodeInserted",function(e,t,n){n||f.addWidToElement(e)},s.PRIORITY.IMMEDIATE),s.addEventListener("DOMNodeDeleted",function(e){e.__wid&&u.removeWidFromElement(e.__wid)}),e.exports=f},2562:function(e,t,i){var r=i(2213),a=i(6068),c=i(7579);function l(e,t,n){this.id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*c.getSafeRandom()|0;return("x"===e?t:3&t|8).toString(16)}),this.children=[],this.parent=t,this.DOMNode=e,n||!e.__pathNodes||0===e.__pathNodes.length?e.__pathNodes=[this]:e.__pathNodes.push(this);var i=e.hasChildNodes()?e.childNodes:e.content&&e.content.childNodes||[];Array.from(i).forEach((function(e){var t=l.create(e,this,n);t&&this.children.push(t)}).bind(this))}l.create=function(e,t,i){if(!function(e){return e.nodeType===n.ELEMENT_NODE&&!a.elementIsTemplateDescendant(e)&&r.isTransientElement&&r.isTransientElement(e)}(e))return new l(e,t,i)},l.prototype.toPath=function(){if(!this.parent)return[];var e=this.parent.children.findIndex((function(e){return e.id===this.id}).bind(this));return[].concat(o(this.parent.toPath()),[2+e])},l.prototype.remove=function(e){e||this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent=null,this.DOMNode.__pathNodes.splice(this.DOMNode.__pathNodes.indexOf(this),1),this.DOMNode=null,this.children.forEach(function(e){e.remove(!0)}),this.children=null},l.prototype.check=function(){if(this.DOMNode.__pathNodes.length>1)throw"Node has multiple paths";if(this.DOMNode.__pathNodes[0].id!==this.id)throw"No id match";var e=(function(){for(var e,t,n=[],i=0,o=(e=this.DOMNode.hasChildNodes()?this.DOMNode.childNodes:this.DOMNode.content&&this.DOMNode.content.childNodes||[]).length;i<o;i++){var r=e[i];(null!=(t=r.__pathNodes)?t.length:void 0)>0&&n.push(r)}return n}).bind(this)();if(e.length!==this.children.length)throw"Different amount of children";for(var t=[],n=0,i=0,o=e.length;i<o;n=++i)t.push(this.children[n].check());return t},l.getPathNode=function(e,t){if(!e||!e.__pathNodes)return null;if(!t||!t.__pathNodes)return e.__pathNodes[e.__pathNodes.length-1];var n=null;return t.__pathNodes.some(function(t){return n=e.__pathNodes.find(function(e){return e.parent.id===t.id})}),n},l.elementAtPath=function(e,t){var n=e instanceof l?e:l.getPathNode(e),i=t[0];if(1===i)return[e,void 0,e,i];var o=i-2,r=n&&n.children[o],a=t[1];return 1===t.length||0===a||1===a?[r&&r.DOMNode,o,e=n.DOMNode,a]:l.elementAtPath(r,t.slice(1))},e.exports=l},5822:function(e,t,n){var i=n(9948),o=n(6068),r=n(178),a=n(2562),c={};i.createEvent("populated"),c.populate=function(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);var n=t.id,c=o.getLocationObject().staticMode;if(t.type&&0!==t.data.length||c||(t.type||t.create("json0"),t.submitOp([{p:[],oi:["html",{},"\n",["head",{},"\n",["title",{},n],"\n"],"\n",["body",{},"\n"]]}])),!c&&"json0"!==t.type.name||c&&"http://sharejs.org/types/JSONv0"!==t.type)throw"Unsupported document type: ".concat(t.type.name);var l=[],s=r.toHTML(t.data,void 0,l);return o.appendChildWithoutScriptExecution(e,s),new Promise(function(t){o.executeScripts(l,function(){var o=e;a.create(o,null,!0).check(),t(),i.triggerEvent("populated",o,n)})})},e.exports=c},6068:function(e,r,a){var c,s={},d=a(7579);s.getLocationObject=function(){if(c)return c;if(t.webstrateId)return c={webstrateId:t.webstrateId,parameters:{},staticMode:!1};for(var e,n,i,o=/^\/([A-Z0-9._-]+)\/(?:([A-Z0-9_-]+)\/)?/i.exec(window.location.pathname),r=l(o,3),a=r[1],s=r[2],d={},p=/([^&=]+)=?([^&]*)/g,u=window.location.search.substring(1);e=p.exec(u);){var m=l(e,3);d[m[1]]=decodeURIComponent(m[2])}return/^\d/.test(s)&&Number(s)?i=Number(s):n=s,c={webstrateId:a,staticMode:!!s,tagOrVersion:s,tag:n,version:i,parameters:d}},s.throttleFn=function(e,t){var n,i=0;return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];var c=Date.now(),l=i+t-c;l<=0?(e.apply(void 0,r),i=c):(clearTimeout(n),n=setTimeout(function(){e.apply(void 0,r),i=c},l))}},s.objectEquals=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},s.objectClone=function(e){return Array.isArray(e)?e.slice(0):i({},e)},s.objectCloneAndLock=function(e){return Object.freeze(s.objectClone(e))},s.random=function(e,t){return Math.floor(e+d.getSafeRandom()*(t-e))},s.randomString=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"23456789abcdefghijkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",n=t.length,i="";e--;)i+=t[s.random(0,n)];return i},s.getChildNodes=function(e){return e.content&&e.content.nodeType===n.DOCUMENT_FRAGMENT_NODE&&(e=e.content),e.childNodes},s.recursiveForEach=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t(e,n),Array.from(s.getChildNodes(e)).forEach(function(n){s.recursiveForEach(n,t,e)})},s.appendChildWithoutScriptExecution=function(e,t,n){if(!(t instanceof HTMLElement))return e.insertBefore(t,n||null);var i=new Map,r=t instanceof HTMLScriptElement?[t]:o(t.querySelectorAll("script"));r.forEach(function(e){var t=[];Array.from(e.attributes).forEach(function(n){t.push([n.nodeName,n.nodeValue]),e.removeAttribute(n.nodeName)});var n=e.innerHTML;e.innerHTML="// Execution prevention",i.set(e,[t,n])}),e.insertBefore(t,n||null),r.forEach(function(e){var t=i.get(e),n=l(t,2),o=n[1];n[0].forEach(function(t){var n=l(t,2);e.setAttribute(n[0],n[1])}),e.innerHTML=o})},s.executeScripts=function(e,t){var i=e.shift();if(!i)return t();if(s.elementIsTemplateDescendant(i))return s.executeScripts(e,t);var o=!i.src,r=n.createElementNS(i.namespaceURI,"script");o||(r.onload=r.onerror=function(){s.executeScripts(e,t)});for(var a=0;a<i.attributes.length;a++){var c=i.attributes[a];r.setAttribute(c.nodeName,c.nodeValue)}Object.assign(r,i),s.setWidOnElement(r,i.__wid),r.innerHTML=i.innerHTML,i.parentElement.insertBefore(r,i),i.remove(),o&&s.executeScripts(e,t)},s.elementIsTemplateDescendant=function(e){return n.documentElement.ownerDocument!==e.ownerDocument},s.isTranscluded=function(){return window.frameElement&&window.parent!==window},s.sameParentDomain=function(){var e=n.createElement("a");return e.setAttribute("href",n.referrer),e.host===location.host},s.sanitizeString=function(e){var t=/:|[A-Z]|_|[a-z]/,n=/-|\.|[0-9]/;return e.split("").map(function(e,i){return t.test(e)||i>0&&n.test(e)?e:"_"}).join("")},s.escape=function(e){return e&&e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")},s.unescape=function(e){return e&&e.replace(/&amp;/g,"&").replace(/&quot;/g,'"')},s.escapeDots=function(e){return e&&e.replace(/\./g,"&dot;")},s.unescapeDots=function(e){return e&&e.replace(/&dot;/g,".")};var p=new Map;s.setWidOnElement=function(e,t){p.set(t,e),Object.defineProperty(e,"__wid",{value:t,writable:!1,enumerable:!0,configurable:!0})},s.removeWidFromElement=function(e){return p.delete(e)},s.getElementByWid=function(e){return p.get(e)},e.exports=s},2445:function(e,t,n){var i,o,r,a,c,l=n(2213),s=n(6068),d=n(1366),p={},u=s.getLocationObject().webstrateId,m=[],h=[],g=new Map,f=new Set;Object.defineProperty(d.publicObject,"getWebsocket",{value:function(e,t){if("string"==typeof e&&(t=e),!f.has(t))return f.add(t),p.copy()}}),p.setup=function(e,t){i=e,o=t,s.isTranscluded()&&s.sameParentDomain()&&l.reuseWebsocket&&(r=window.parent.window.webstrate.getWebsocket(u)),r&&r.readyState!==WebSocket.CLOSED||(r=new WebSocket(i,o)),a=!1,r.onopen=function(e){h.forEach(function(e){return r.send(e)}),h=[],c=0,m.forEach(function(t){var n=t.websocket;return"function"==typeof n.onopen&&n.onopen(e)})},r.onclose=function(e){m.forEach(function(t){var n=t.websocket;return"function"==typeof n.onclose&&n.onclose(e)}),a||(c++,setTimeout(function(){p.setup(i,o)},1e3*Math.pow(1.5,c++)))},r.onconnecting=function(e){m.forEach(function(t){var n=t.websocket;return"function"==typeof n.onconnecting&&n.onconnecting(e)})},r.onmessage=function(e){var t;if(e.data.startsWith('{"wa":"reply"')){var n=(t=JSON.parse(e.data)).token;if(n&&g.has(n)){var i=g.get(n);g.delete(n),i(t.error,t.reply)}}else m.forEach(function(n){var i=n.websocket,o=n.filter;o&&!o(e)||("function"==typeof i.onmessage&&i.onmessage(e),"function"==typeof i.onjsonmessage&&(void 0===t&&(t=Object.freeze(JSON.parse(e.data))),i.onjsonmessage(t)))})},r.onerror=function(e){m.forEach(function(t){var n=t.websocket;return"function"==typeof n.onerror&&n.onerror(e)})}},p.close=function(){a=!0,r.close()},p.copy=function(e){var t={send:p.send,close:function(){a=!0,r.close()},refresh:function(){r.close()},url:i,URL:i,protocols:o,get readyState(){return r.readyState}};return m.push({websocket:t,filter:e}),t},p.send=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("function"==typeof t){"string"==typeof e&&(e=JSON.parse(e));var i=s.randomString();e.token=i,g.set(i,t)}"object"==typeof e&&(e=JSON.stringify(e)),r.readyState!==WebSocket.OPEN&&n.waitForOpen?h.push(e):r.send(e)},e.exports=p},9599:function(e,t,n){var i=n(9948),o=n(1366),r=n(1528),a=[];Object.defineProperty(o.publicObject,"dataSaved",{get:function(){return function(){return new Promise(function(e,t){setTimeout(function(){r.getDocument().hasPending()?a.push(e):e()},0)})}},set:function(){throw new Error("dataSaved cannot be overwritten")},enumerable:!0}),i.addEventListener("opsAcknowledged",function(){a.forEach(function(e){return e()}),a=[]},i.PRIORITY.LAST)},4599:function(e,t,i){var o=i(9948),r=i(1366),a=i(2562);r.createEvent("editingError"),o.addEventListener("databaseError",function(e){"op"===e.data.a&&e.data.op.forEach(function(e){var t=a.elementAtPath(n.documentElement,e.p),i=l(t,3)[2],o=["si","sd","oi","od","li","ld"].find(function(t){return t in e});r.triggerEvent("editingError",o,i)})})},6636:function(e,t,i){var o=i(9948),r=i(6068),a=i(1347);function c(e,t){switch(e.nodeType){case n.ELEMENT_NODE:t.createEvent("attributeChanged"),t.createEvent("attributeChanged*"),t.createEvent("nodeAdded"),t.createEvent("nodeAdded*"),t.createEvent("nodeRemoved"),t.createEvent("nodeRemoved*");case n.TEXT_NODE:t.createEvent("insertText"),t.createEvent("insertText*"),t.createEvent("deleteText"),t.createEvent("deleteText*")}}o.addEventListener("webstrateObjectsAdded",function(e){r.recursiveForEach(e,function(e){c(e,a.getEventObject(e))}),o.addEventListener("DOMAttributeSet",function(e,t,n,i,o){!function(e){var t=e.attributeName,n=e.oldValue,i=e.newValue,o=e.local,r=a.getEventObject(e.node);o||r.triggerEvent("attributeChanged",t,n,i,Boolean(o)),r.triggerEvent("attributeChanged*",t,n,i,Boolean(o))}({node:e,attributeName:t,oldValue:n,newValue:i,local:o})}),o.addEventListener("DOMAttributeRemoved",function(e,t,n,i){!function(e,t,n,i){var o=a.getEventObject(e);i||o.triggerEvent("attributeChanged",t,n,void 0,Boolean(i)),o.triggerEvent("attributeChanged*",t,n,void 0,Boolean(i))}(e,t,n,i)}),o.addEventListener("DOMNodeInserted",function(e,t,n){!function(e,t,n){var i=a.getEventObject(t);i&&(n||i.triggerEvent("nodeAdded",e,Boolean(n)),i.triggerEvent("nodeAdded*",e,Boolean(n)))}(e,t,n)}),o.addEventListener("DOMNodeDeleted",function(e,t,n){!function(e,t,n){var i=a.getEventObject(t);i&&(n||i.triggerEvent("nodeRemoved",e,Boolean(n)),i.triggerEvent("nodeRemoved*",e,Boolean(n)))}(e,t,n)}),o.addEventListener("DOMAttributeTextInsertion",function(e,t,n,i,o){!function(e){var t=e.attributeName,n=e.position,i=e.value,o=e.local,r=a.getEventObject(e.node);o||r.triggerEvent("insertText",n,i,t,Boolean(o)),r.triggerEvent("insertText*",n,i,t,Boolean(o))}({node:e,attributeName:t,position:n,value:i,local:o})}),o.addEventListener("DOMTextNodeInsertion",function(e,t,i,o,r){!function(e){var t=e.parentElement,i=e.position,o=e.value,r=e.local,c=a.getEventObject(e.node);r||c.triggerEvent("insertText",i,o,Boolean(r)),c.triggerEvent("insertText*",i,o,Boolean(r)),t.nodeType===n.ELEMENT_NODE&&(c=a.getEventObject(t),r||c.triggerEvent("insertText",i,o,Boolean(r)),c.triggerEvent("insertText*",i,o,Boolean(r)))}({node:e,parentElement:t,position:i,value:o,local:r})}),o.addEventListener("DOMAttributeTextDeletion",function(e,t,n,i,o){!function(e){var t=e.attributeName,n=e.position,i=e.value,o=e.local,r=a.getEventObject(e.node);o||r.triggerEvent("deleteText",n,i,t,Boolean(o)),r.triggerEvent("deleteText*",n,i,t,Boolean(o))}({node:e,attributeName:t,position:n,value:i,local:o})}),o.addEventListener("DOMTextNodeDeletion",function(e,t,i,o,r){!function(e){var t=e.parentElement,i=e.position,o=e.value,r=e.local,c=a.getEventObject(e.node);c&&(r||c.triggerEvent("deleteText",i,o,Boolean(r)),c.triggerEvent("deleteText*",i,o,Boolean(r))),t.nodeType===n.ELEMENT_NODE&&(c=a.getEventObject(t),r||c.triggerEvent("deleteText",i,o,Boolean(r)),c.triggerEvent("deleteText*",i,o,Boolean(r)))}({node:e,parentElement:t,position:i,value:o,local:r})})},o.PRIORITY.IMMEDIATE),o.addEventListener("webstrateObjectAdded",function(e,t){c(e,t)},o.PRIORITY.IMMEDIATE)},1366:function(e,t,i){var o=i(339),r=i(1528),a=i(5822),c=i(6068),l={},s={};Object.defineProperty(s,"window",{get:function(){return window},set:function(){throw new Error("Internal window object should not be modified")},enumerable:!1}),Object.defineProperty(s,"document",{get:function(){return n},set:function(){throw new Error("Internal document object should not be modified")},enumerable:!0}),Object.defineProperty(s,"webstrateId",{get:function(){return c.getLocationObject().webstrateId},set:function(){throw new Error("webstrate ID should not be modified")},enumerable:!0}),Object.defineProperty(s,"id",{get:function(){return"document"},set:function(){throw new Error("node ID should not be modified")},enumerable:!0}),Object.defineProperty(s,"isStatic",{get:function(){return c.getLocationObject().staticMode},set:function(){throw new Error("isStatic cannot be modified.")},enumerable:!0}),Object.defineProperty(s,"config",{value:o}),l.publicObject=s;var d={},p={},u={};function m(e){return Object.prototype.hasOwnProperty.call(d,e)}l.createEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(m(e)&&!t.idempotent)throw new Error("Event ".concat(e," already exists."));if(void 0!==t.addListener){if("function"!=typeof t.addListener)throw new Error("addListener must be a function, received: ".concat(t.addListener));p[e]=t.addListener}if(void 0!==t.removeListener){if("function"!=typeof t.removeListener)throw new Error("removeListener must be a function, received: ".concat(t.removeListener));u[e]=t.removeListener}m(e)||(d[e]=new Set)},l.triggerEvent=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!m(e))throw new Error("Event ".concat(e," doesn't exist."));d[e].forEach(function(e){setImmediate.apply(void 0,[e].concat(n))})},s.on=function(e,t){if(!m(e))throw new Error("Event ".concat(e," doesn't exist."));d[e].add(t),p[e]&&p[e](t)},s.off=function(e,t){if(!m(e))throw new Error("Event ".concat(e," doesn't exist."));d[e].delete(t),u[e]&&u[e](t)},s.restore=function(e,t){s.isStatic?r.fetch(s.webstrateId,e).then(function(e){a.populate(n,e),t()}):r.restore(s.webstrateId,e,t)},s.getOps=function(e,t,n){r.getOps(s.webstrateId,e,t,n)},window.webstrate=s,e.exports=l},7991:function(e,t,n){var i=n(2213);if(i.keepAliveInterval){var o,r=n(2445).copy();r.onopen=function(e){o=setInterval(function(){r.send({type:"alive"})},1e3*i.keepAliveInterval)},r.onclose=r.onerror=function(e){clearInterval(o)}}},8170:function(e,t,n){var i=n(9948),r=n(1366),a={},c=!1;Object.defineProperty(r.publicObject,"loaded",{get:function(){return c}});var l=[];a.delayUntil=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],c=t.slice(1);r&&(l.push(new Promise(function(e){i.addEventListener(r,e,i.PRIORITY.LOW)})),a.delayUntil.apply(a,o(c)))},a.delayUntil("populated"),r.createEvent("loaded",{addListener:function(e){c&&setImmediate(e,r.publicObject.webstrateId,r.publicObject.clientId,r.publicObject.user)}}),i.createEvent("loadedTriggered",{addListener:function(e){c&&setImmediate(e,r.publicObject.webstrateId,r.publicObject.clientId,r.publicObject.user)}}),i.addEventListener("allModulesLoaded",function(){Promise.all(l).then(function(){c=!0,r.triggerEvent("loaded",r.publicObject.webstrateId,r.publicObject.clientId,r.publicObject.user),i.triggerEvent("loadedTriggered",r.publicObject.webstrateId,r.publicObject.clientId,r.publicObject.user)})}),e.exports=a},827:function(e,t,n){var i=n(9948),o=n(6068),r=n(2445),a=n(1366);if(!o.getLocationObject().staticMode){i.createEvent("messageReceived"),i.createEvent("messageSent"),i.createEvent("messageDeleted"),i.createEvent("allMessagesDeleted"),a.createEvent("messageReceived"),a.createEvent("messageDeleted");var c,l=r.copy(function(e){return e.data.startsWith('{"wa":')});l.onjsonmessage=function(e){switch(e.wa){case"hello":(c=e.messages||[]).forEach(function(e){return Object.freeze(e)}),"anonymous:"!==e.user.userId&&(a.publicObject.messages||(Object.defineProperty(a.publicObject,"messages",{get:function(){return o.objectCloneAndLock(c)},set:function(){throw new Error("webstrate.messages is read-only. Use webstrate.deleteMessage(messageId) or webstrate.deleteMessages() to delete a message")}}),Object.defineProperty(a.publicObject,"message",{value:function(e,t){l.send({wa:"sendMessage",m:e,recipients:t})},writable:!1}),Object.defineProperty(a.publicObject,"deleteMessage",{value:function(e){return l.send({wa:"deleteMessage",messageId:e}),!!c.find(function(t){return t.messageId===e})},writable:!1}),Object.defineProperty(a.publicObject,"deleteAllMessages",{value:function(){return c=[],l.send({wa:"deleteAllMessages"}),!0},writable:!1})));break;case"message":e={messageId:e.messageId,message:e.message,senderId:e.senderId},Object.freeze(e),c.push(e),i.triggerEvent("messageReceived",e),a.triggerEvent("messageReceived",e.message,e.senderId,e.messageId);break;case"messageDeleted":var t=c.findIndex(function(t){return t.messageId===e.messageId});if(-1===t)return;c.splice(t,1),i.triggerEvent("messageDeleted",e),a.triggerEvent("messageDeleted",e.messageId);break;case"allMessagesDeleted":var n=c;c=[],i.triggerEvent("allMessagesDeleted",e),n.forEach(function(e){return a.triggerEvent("messageDeleted",e.messageId)})}},i.addEventListener("loadedTriggered",function(){c.length>0&&c.forEach(function(e){i.triggerEvent("messageReceived",e),a.triggerEvent("messageReceived",e.message,e.senderId,e.messageId)})})}e.exports={}},886:function(e,t,i){var o=i(6068),r=i(1366),a=o.getLocationObject().webstrateId;r.publicObject.newFromPrototypeFile=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=e||a,new Promise(function(i,o){var r=n.createElement("input");r.setAttribute("name","file"),r.setAttribute("type","file"),r.setAttribute("accept",".zip,.wsa"),r.addEventListener("change",function(c){var l=new FormData;l.append("file",r.files.item(0)),l.append("apiCall",!0),l.append("id",e),fetch("/new",{method:"post",credentials:"include",body:l}).then(function(r){return r.json().then(function(c){r.ok?(i(c),a!==e||t.noreload||n.location.reload()):o(c.error)}).catch(function(e){o(e)})}).catch(function(e){o(e)})}),r.click()})},r.publicObject.newFromPrototypeURL=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t||a,e=new URL(e,location.href),new Promise(function(o,r){fetch("/new?prototypeUrl=".concat(e,"&id=").concat(t),{method:"get",credentials:"include"}).then(function(e){return e.text().then(function(c){e.ok?(o(c),a!==t||i.noreload||n.location.reload()):r(c.error)}).catch(function(e){r(e)})}).catch(function(e){r(e)})})}},1347:function(e,t,n){var i=n(9948),o=n(704),r=n(289),a=n(6068),c=n(8170),l={};function s(e){var t=e.eventExists,n=e.eventName,i=e.options,o=e.node,r=e.addEventListenerListeners,a=e.removeEventListenerListeners,c=e.eventListeners;if(t(n)&&!i.idempotent)throw new Error("Event ".concat(n," already exists on ").concat(o,"."));if(void 0!==i.addListener){if("function"!=typeof i.addListener)throw new Error("addListener must be a function, received: ".concat(i.addListener));r[n]=i.addListener}if(void 0!==i.removeListener){if("function"!=typeof i.removeListener)throw new Error("removeListener must be a function, received: ".concat(i.removeListener));a[n]=i.removeListener}t(n)||(c[n]=new Set)}function d(e,t,n){if(!e(t))throw new Error("Event ".concat(t," doesn't exist on ").concat(n,"."))}function p(e,t){var n=l.getEventObject(e);n||(e.webstrate={});var o=!1;if(e.__wid&&!e.webstrate.id&&(Object.defineProperty(e.webstrate,"id",{get:function(){return e.__wid},set:function(){throw new TypeError("Cannot redefine property: id")},enumerable:!0}),o=!0),n)t&&o&&i.triggerEvent("webstrateObjectAddedId",e,n);else{var r={},a={},c={};e.webstrate.on=function(t,n){!function(e){var t=e.eventName,n=e.eventListener,i=e.node,o=e.eventListeners,r=e.addEventListenerListeners;if(!(0,e.eventExists)(t))throw new Error("Event ".concat(t," doesn't exist on ").concat(i,"."));o[t].add(n),r[t]&&r[t](n)}({eventExists:u,eventName:t,eventListener:n,node:e,eventListeners:r,addEventListenerListeners:a})},e.webstrate.off=function(e,t){!function(e){var t=e.eventName,n=e.eventListener,i=e.eventListeners,o=e.removeEventListenerListeners;if(!(0,e.eventExists)(t))throw new Error("Event ".concat(t," doesn't exist."));i[t].delete(n),o[t]&&o[t](n)}({eventExists:u,eventName:e,eventListener:t,eventListeners:r,removeEventListenerListeners:c})};var p={createEvent:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s({eventExists:u,eventName:t,options:n,node:e,addEventListenerListeners:a,removeEventListenerListeners:c,eventListeners:r})},triggerEvent:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];d(u,t,e),r[t].forEach(function(e){setImmediate.apply(void 0,[e].concat(i))})}};l.setEventObject(e,p),t&&i.triggerEvent("webstrateObjectAdded",e,p)}function u(e){return Object.prototype.hasOwnProperty.call(r,e)}}l.getEventObject=function(e){return e&&e.__eventObject},l.setEventObject=function(e,t){return e.__eventObject=t,t},i.createEvent("webstrateObjectsAdded"),i.createEvent("webstrateObjectAdded"),i.createEvent("webstrateObjectAddedId"),c.delayUntil("webstrateObjectsAdded"),i.addEventListener("populated",function(e){a.recursiveForEach(e,function(e){r.addWidToElement(e),p(e,!1)},i.PRIORITY.IMMEDIATE),o.overrideDocument("createElementNS",o.CONTEXT.INTERNAL,function(e,t,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length,r=new Array(o>4?o-4:0),a=4;a<o;a++)r[a-4]=arguments[a];var c=e.bind(this).apply(void 0,[t,n,i].concat(r));return p(c,!0),c}),o.overrideDocument("createElement",o.CONTEXT.INTERNAL,function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];var a=e.bind(this).apply(void 0,[t,n].concat(o));return p(a,!0),a}),o.overrideDocument("importNode",o.CONTEXT.INTERNAL,function(e,t,n){for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];var c=e.bind(this).apply(void 0,[t,n].concat(o));return a.recursiveForEach(c,function(e){p(e,!0)}),c});var t=Element.prototype.cloneNode;Element.prototype.cloneNode=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var r=t.call.apply(t,[this,e].concat(i));return a.recursiveForEach(r,function(e){p(e,!0)}),r},i.triggerEvent("webstrateObjectsAdded",e)},i.PRIORITY.IMMEDIATE),i.addEventListener("DOMNodeInserted",function(e){a.recursiveForEach(e,function(e){p(e,!0)})},i.PRIORITY.IMMEDIATE),i.addEventListener("DOMTextNodeInsertion",function(e){p(e,!0)},i.PRIORITY.IMMEDIATE),e.exports=l},388:function(e,t,n){var i=n(9948),o=n(6068),r=n(2445),a=n(1366),c=n(7385),l=n(8170),s={},d=o.getLocationObject().webstrateId;if(!o.getLocationObject().staticMode){i.createEvent("globalPermissions"),i.createEvent("userPermissions"),a.createEvent("permissionsChanged"),l.delayUntil("globalPermissions","userPermissions");var p,u,m,h,g,f,v=r.copy(function(e){return e.data.startsWith('{"wa":')});Object.defineProperty(c.publicObject,"permissions",{get:function(){return h},set:function(e){throw new Error("Permissions must be changed through the data-auth attribute")},enumerable:!0}),Object.defineProperty(a.publicObject,"permissions",{get:function(){return f},set:function(e){throw new Error("Permissions must be changed through the data-auth attribute")},enumerable:!0}),s.getUserPermissions=function(e,t){var n=f;if(!f||0===Object.keys(f).length){if(!g)return"rw?";n=g}var i=n.find(function(n){return n.username===e&&n.provider===t});if(i)return i.permissions;var o=n.find(function(e){return"anonymous"===e.username&&""===e.provider});return o?o.permissions:""},s.getPermissionsFromDocument=function(e){if(e&&e.data&&e.data[0]&&"html"===e.data[0]&&e.data[1]&&e.data[1]["data-auth"])try{var t=JSON.parse(e.data[1]["data-auth"].replace(/'/g,'"').replace(/&quot;/g,'"').replace(/&amp;/g,"&"));return Array.isArray(t)?t:[]}catch(e){}return[]};var b=new Promise(function(e){i.addEventListener("receivedDocument",function(t){f=s.getPermissionsFromDocument(p=t),i.triggerEvent("globalPermissions",f),h=s.getUserPermissions(u,m),i.triggerEvent("userPermissions",h),e()})}),C=new Promise(function(e){v.onjsonmessage=function(t){"hello"===t.wa&&t.d===d&&(u=t.user.username,m=t.user.provider,g=t.defaultPermissions,e())}}),y=function(e){if(function(e){return e.some(function(e){return e.p[0]&&1===e.p[0]&&e.p[1]&&"data-auth"===e.p[1]})}(e)){var t=f;f=s.getPermissionsFromDocument(p),i.triggerEvent("globalPermissions",f),a.triggerEvent("permissionsChanged",f,t);var n=s.getUserPermissions(u,m);o.objectEquals(h,n)||i.triggerEvent("userPermissions",h=n)}};Promise.all([b,C]).then(function(){i.addEventListener("receivedOps",y),i.addEventListener("createdOps",y)})}e.exports=s},7941:function(e,t,i){var o=i(2213),r=i(9948),a=i(6068),c=i(704),l=i(1366);function s(e,t){var n=o.isTransientElement;o.isTransientElement=function(t){return n(t)||!(function(t){return!e||Boolean(t.__approved)}(t)||t.closest("[contenteditable]"))};var i=o.isTransientAttribute;o.isTransientAttribute=function(e,n){return!(function(e,n){return!t||e.__approvedAttributes&&e.__approvedAttributes.has(n)}(e,n)&&!i(e,n))}}var d=function e(t){if(!t.__approved&&(Object.defineProperty(t,"__approved",{get:function(){return!0},enumerable:!1}),t.nodeType===Node.ELEMENT_NODE)){var n=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML");Object.defineProperty(t,"innerHTML",{set:function(i){n.set.call(t,i),a.recursiveForEach(t,function(t){e(t),t.nodeType===Node.ELEMENT_NODE&&Array.from(t.attributes).forEach(function(e){p(t,e.name)})})},get:function(){return n.get.call(t)},configurable:!0})}},p=function(e,t){if(!e.__approvedAttributes){var n=new Set;Object.defineProperty(e,"__approvedAttributes",{get:function(){return n},enumerable:!1})}e.__approvedAttributes.has(t)||e.__approvedAttributes.add(t)},u=function(e,t){e.__approvedAttributes&&e.__approvedAttributes.delete(t)},m=function(e,t){t.forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);n.configurable&&"function"==typeof n.set&&Object.defineProperty(e,t,{configurable:n.configurable,enumerable:n.enumerable,set:function(e){return this.__approved&&p(this,t.toLowerCase()),n.set.call(this,e)},get:n.get})})},h=function(e,t,n){var i=t[n];if("function"==typeof i){var o=this.functions[n];if(o){var r=o.call(e,i,t,n);r&&(i=r)}return i.bind(t)}return i},g=[{propertyName:"classList",prototype:Element.prototype,get:function(e,t,n){return h.call(this,e,t,n)},functions:{add:function(e,t){var n=this;return function(){n.__approved&&p(n,"class");for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e.call.apply(e,[t].concat(o))}},toggle:function(e,t){var n=this;return function(i,o){n.__approved&&p(n,"class");for(var r=arguments.length,a=new Array(r>2?r-2:0),c=2;c<r;c++)a[c-2]=arguments[c];return e.call.apply(e,[t,i,o].concat(a))}},replace:function(e,t){var n=this;return function(i,o){n.__approved&&p(n,"class");for(var r=arguments.length,a=new Array(r>2?r-2:0),c=2;c<r;c++)a[c-2]=arguments[c];return e.call.apply(e,[t,i,o].concat(a))}}}},{propertyName:"dataset",prototype:HTMLElement.prototype,set:function(e,t,n,i){t[n]=i;var o=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return e.__approved&&p(e,"data-".concat(o)),!0}},{propertyName:"style",prototype:HTMLElement.prototype,get:function(e,t,n){return h.call(this,e,t,n)},set:function(e,t,n,i){return t[n]=i,e.__approved&&p(e,"style"),!0},functions:{setProperty:function(e,t){var n=this;return function(i,o,r){n.__approved&&p(n,"style");for(var a=arguments.length,c=new Array(a>3?a-3:0),l=3;l<a;l++)c[l-3]=arguments[l];return e.call.apply(e,[t,i,o,r].concat(c))}}}}];r.addEventListener("receivedDocument",function(e,t){var i=e.data&&e.data[1]&&e.data[1]["data-protected"],o=["all","elements",""].includes(i),r=["all","attributes",""].includes(i);if(!t.static){var h=o||r;Object.defineProperty(l.publicObject,"isProtected",{get:function(){return h},set:function(){throw new Error("isProtected cannot be modified.")},enumerable:!0}),h&&(s(o,r),function(e,t){c.overrideDocument("createElementNS",c.CONTEXT.INTERNAL,function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i.approved=!0;for(var o=arguments.length,r=new Array(o>4?o-4:0),a=4;a<o;a++)r[a-4]=arguments[a];return e.apply(void 0,[t,n,i].concat(r))}),c.overrideDocument("createElement",c.CONTEXT.INTERNAL,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.approved=!0;for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];return e.apply(void 0,[t,n].concat(o))}),c.overrideDocument("importNode",c.CONTEXT.INTERNAL,function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i.approved=!0;for(var o=arguments.length,r=new Array(o>4?o-4:0),a=4;a<o;a++)r[a-4]=arguments[a];return e.apply(void 0,[t,n,i].concat(r))}),c.overrideDocument("createElementNS",c.CONTEXT.BOTH,function(t,n,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length,a=new Array(r>4?r-4:0),c=4;c<r;c++)a[c-4]=arguments[c];var l=t.apply(void 0,[n,i,o].concat(a));return o&&o.approved?e(l):l.setAttribute("unapproved",""),l}),c.overrideDocument("createElement",c.CONTEXT.BOTH,function(t,n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length,r=new Array(o>3?o-3:0),a=3;a<o;a++)r[a-3]=arguments[a];var c=t.apply(void 0,[n,i].concat(r));return i&&i.approved?e(c):c.setAttribute("unapproved",""),c}),c.overrideDocument("importNode",c.CONTEXT.BOTH,function(i,o,r){for(var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length,s=new Array(l>4?l-4:0),d=4;d<l;d++)s[d-4]=arguments[d];var p=i.apply(void 0,[o,r].concat(s));return a.recursiveForEach(p,function(i){c&&c.approved?(e(i),i.nodeType===Node.ELEMENT_NODE&&Array.from(i.attributes).forEach(function(e){t(i,e.name)})):i.nodeType===n.ELEMENT_NODE&&i.setAttribute("unapproved","")}),p}),c.elementOptions.approved=!0}(d,p),function(e,t,n){var i=Node.prototype.cloneNode;Node.prototype.cloneNode=function(t,n){for(var o=arguments.length,r=new Array(o>2?o-2:0),a=2;a<o;a++)r[a-2]=arguments[a];var c=i.call.apply(i,[this,t].concat(r));return delete c.approved,n&&n.approved&&e(c),c};var o=Element.prototype.setAttributeNS;Element.prototype.setAttributeNS=function(e,n,i,r){r&&r.approved&&t(this,n);for(var a=arguments.length,c=new Array(a>4?a-4:0),l=4;l<a;l++)c[l-4]=arguments[l];o.call.apply(o,[this,e,n,i,r].concat(c))};var r=Element.prototype.setAttribute;Element.prototype.setAttribute=function(e,n,i){(this.__approved||i&&i.approved)&&t(this,e);for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];r.call.apply(r,[this,e,n,i].concat(a))};var a=Element.prototype.removeAttribute;Element.prototype.removeAttribute=function(e,t){for(var i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];a.call.apply(a,[this,e,t].concat(o)),t&&t.approved&&n(this,e)}}(d,p,u),m(Element.prototype,["id"]),m(HTMLElement.prototype,["accessKey","contentEditable","dir","draggable","hidden","lang","tabIndex","title","translate"]),function(e){e.forEach(function(e){var t=Object.getOwnPropertyDescriptor(e.prototype,e.propertyName);Object.defineProperty(e.prototype,e.propertyName,{configurable:t.configurable,enumerable:t.enumerable,set:function(e){return t.set.call(this,e)},get:function(){var n=this,i=t.get.call(n);return e.get||e.set?new Proxy(i,{get:function(t,i){return e.get?e.get.call(e,n,t,i):t[i]},set:function(t,i,o){return e.set?e.set.call(e,n,t,i,o):(t[i]=o,!0)}}):i}})})}(g))}},r.PRIORITY.IMMEDIATE),e.exports={}},1049:function(e,t,n){var i,o=n(2213),r=n(6068),a=n(9948),c=n(1366),s=n(1347),d=n(6455),p=new Map,u=new Map,m=new Map;function h(e,t,n,i,r){var a,c,l,s,d=r.listener,p=r.streamer,u=!1,h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]},g=function(e){c(e.streams[0])},f=function(o){!function(e){var t=e.node,n=e.peerConnection,i=e.ownId,o=e.recipientId,r=e.clientRecipientId,a=e.errorHandler;n.setLocalDescription(e.description).then(function(){t.webstrate.signal({sdp:n.localDescription,__internal_webrtc:!0,senderId:i,recipientId:o},r)}).catch(a)}({description:o,node:i,peerConnection:a,ownId:e,recipientId:t,clientRecipientId:n,errorHandler:h})},v=function(o){!function(e){var t=e.event;null===t.candidate&&void 0===t.candidate||e.node.webstrate.signal({ice:t.candidate,__internal_webrtc:!0,senderId:e.ownId,recipientId:e.recipientId},e.clientRecipientId)}({event:o,node:i,ownId:e,recipientId:t,clientRecipientId:n})},b=function(t){!function(e){var t=e.event,n=e.onConnectCallback,i=e.onCloseCallback,o=e.ownId;switch(e.peerConnection.iceConnectionState){case"connected":n&&n(t);break;case"closed":case"disconnected":case"failed":i&&i(t),m.delete(o)}}({event:t,peerConnection:a,onConnectCallback:l,onCloseCallback:s,ownId:e})},C=function(e){u=!0,function(e){var t=e.localStream,n=e.peerConnection,i=e.streamer,o=e.gotStateChange,r=e.createdDescription,a=e.errorHandler,c=e.listener,l=e.gotRemoteStream;n.onicecandidate=e.gotIceCandidate,n.oniceconnectionstatechange=o,i&&(t.getTracks().forEach(function(e){n.addTrack(e,t)}),n.createOffer().then(r).catch(a)),c&&(n.ontrack=l)}({localStream:e,peerConnection:a=new RTCPeerConnection(o.peerConnectionConfig),gotIceCandidate:v,gotStateChange:b,streamer:p,createdDescription:f,errorHandler:h,listener:d,gotRemoteStream:g})};return{id:e,active:u,listener:d,streamer:p,peerConnection:a,onRemoteStream:function(e){return c=e,e},onConnect:function(e){return l=e,e},stub:{isConnected:function(){return Boolean(a)&&["checking","connected","completed"].includes(a.iceConnectionState)},close:function(){return a.close()},onclose:function(e){return s=e,e}},start:C,handleMessage:function(e){a||C(),function(e){var t=e.message,n=e.peerConnection,i=e.createdDescription,o=e.errorHandler;t.sdp?n.setRemoteDescription(new RTCSessionDescription(t.sdp)).then(function(){"offer"==t.sdp.type&&n.createAnswer().then(i).catch(o)}).catch(o):t.ice&&n.addIceCandidate(new RTCIceCandidate(t.ice)).catch(o)}({message:e,peerConnection:a,createdDescription:f,errorHandler:h})}}}function g(e,t,n){var i=r.getElementByWid(e);if(n.requestForStreams)!function(e,t,n,i){Array.from(p.get(e).keys()).forEach(function(e){i.webstrate.signal({__internal_webrtc:!0,wantToStream:!0,senderId:e,recipientId:n.senderId},t)})}(e,t,n,i);else if(n.wantToStream)Array.from(u.get(e).values()).forEach(function(o){var a=r.randomString(),c=r.randomString(),l=new h(a,c,t,i,{listener:!0});m.get(e).set(a,l),setTimeout(function(){l.stub.isConnected()||m.get(e).delete(a)},3e4),o(t,"META_DATA_IS_DEPRECATED",function(e){return function(e){var t=e.node,n=e.senderClientId,i=e.message,o=e.newRecipientId,r=e.ownId;e.webrtcClient.onRemoteStream(e.clientAcceptCallback),t.webstrate.signal({__internal_webrtc:!0,wantToListen:!0,recipientId:i.senderId,newRecipientId:o,senderId:r},n)}({webrtcClient:l,node:i,senderClientId:t,clientAcceptCallback:e,message:n,newRecipientId:c,ownId:a}),l.stub})});else if(n.wantToListen){var o=p.get(e).get(n.recipientId);o&&o(t,function(o,r,a){var c=new h(n.newRecipientId,n.senderId,t,i,{streamer:!0});return c.onConnect(a),m.get(e).set(n.newRecipientId,c),c.start(o),c.stub})}else if(n.sdp||n.ice){var a=m.get(e).get(n.recipientId);a&&a.handleMessage(n)}}function f(e,t){var n=e.id;if(n&&null===e.signalStream&&void 0===e.signalStream){m.set(n,new Map),p.set(n,new Map),u.set(n,new Map);var i=r.getElementByWid(n);Object.defineProperty(e,"signalStream",{value:function(e){d.subscribe(n);var t=r.randomString();!function(e,t,n,i){p.get(e).set(t,n),i.webstrate.signal({__internal_webrtc:!0,wantToStream:!0,senderId:t})}(n,t,e,i)},writable:!1}),Object.defineProperty(e,"stopStreamSignal",{value:function(){var e=Array.from(p.get(n).entries()),t=l(e[0],1)[0];t&&p.get(n).delete(t),d.unsubscribe(n)},writable:!1}),t.createEvent("signalStream",{addListener:function(e){0===u.get(n).size&&d.subscribe(n);var t=r.randomString();!function(e,t,n,i){u.get(e).set(t,n),i.webstrate.signal({__internal_webrtc:!0,requestForStreams:!0,senderId:t})}(n,t,e,i)},removeListener:function(){var e=Array.from(u.get(n).entries()),t=l(e[0],1)[0];t&&u.get(n).delete(t),d.unsubscribe(n)}})}}a.addEventListener("populated",function(){i=c.publicObject.clientId}),d.addInterceptor(function(e){var t=e.m,n=e.s;return void 0!==t.__internal_webrtc&&n!==i&&(setImmediate(g,e.id,n,t),!0)}),f(c.publicObject,c),a.addEventListener("webstrateObjectsAdded",function(e){r.recursiveForEach(e,function(e){var t=s.getEventObject(e);f(e.webstrate,t)})},a.PRIORITY.IMMEDIATE),a.addEventListener("webstrateObjectAdded",function(e,t){f(e.webstrate,t)},a.PRIORITY.IMMEDIATE),a.addEventListener("webstrateObjectAddedId",function(e,t){f(e.webstrate,t)},a.PRIORITY.IMMEDIATE),e.exports={}},6455:function(e,t,i){var o=i(6068),r=i(9948),a=i(2445),c=i(1366),l=i(1347),s={};r.createEvent("receivedSignal");var d=a.copy(function(e){return e.data.startsWith('{"wa":"publish"')}),p=o.getLocationObject().webstrateId,u=new Set;s.addInterceptor=function(e){return u.add(e)},s.removeInterceptor=function(e){return u.delete(e)},s.subscribe=function(e){return h(e)},s.unsubscribe=function(e){return g(e)},d.onjsonmessage=function(e){if(e.d===p){var t=!1;if(u.forEach(function(n){t|=n(e)}),!t){var n=e.id,i=o.getElementByWid(n);if(i||"document"===n){var a=e.s,s=e.m,d=l.getEventObject(i);(i?d:c).triggerEvent("signal",s,a,i),r.triggerEvent("receivedSignal",s,a,i)}}}};var m={};function h(e){d.send({wa:"subscribe",d:p,id:e}),m[e]=(m[e]||0)+1}function g(e){m[e]=(m[e]||0)-1,m[e]<1&&(d.send({wa:"unsubscribe",d:p,id:e}),delete m[e])}function f(e,t,i){e.nodeType!==n.TEXT_NODE&&(i.createEvent("signal",{addListener:function(){var e=t.id;e?h(e):setImmediate(function(){var e=t.id;e&&h(e)})},removeListener:function(){g(t.id)}}),Object.defineProperty(t,"signal",{value:function(n,i){var o=t.id;if(!o)throw new Error("Can't signal on ".concat(e.outerHTML,", because it's not in the DOM or is")+" transient.");!function(e,t,n){var i={wa:"publish",d:p,id:e,m:t};n&&(i.recipients=n),d.send(i)}(o,n,i)},writable:!1}))}r.addEventListener("populated",function(e){f(e,c.publicObject,c)}),r.addEventListener("webstrateObjectsAdded",function(e){o.recursiveForEach(e,function(e){var t=l.getEventObject(e);f(e,e.webstrate,t)})},r.PRIORITY.IMMEDIATE),r.addEventListener("webstrateObjectAdded",function(e,t){f(e,e.webstrate,t)},r.PRIORITY.IMMEDIATE),r.addEventListener("reconnect",function(){return Object.keys(m).forEach(h)}),e.exports=s},6701:function(e,t,n){var i=n(6068),o=n(9948),r=n(2445),a=n(1366);o.createEvent("receivedTags"),a.createEvent("tag"),a.createEvent("untag");var c,s,d={},p={},u=r.copy(function(e){return e.data.startsWith('{"wa":')}),m=i.getLocationObject().webstrateId;function h(){s=p[c.version],Object.keys(p).forEach(function(e){e<=c.version&&(d[e]=p[e],delete p[e])})}u.onjsonmessage=function(e){if(e.d===m)switch(e.wa){case"tags":e.tags.forEach(function(e){d[e.v]=e.label}),o.triggerEvent("receivedTags",d);break;case"tag":var t=e.l,n=e.v,i=Object.keys(d).find(function(e){return d[e]===t});i&&delete d[i],d[n]=t,c.version===n?s=t:n>c.version&&(p[n]=t),a.triggerEvent("tag",n,t);break;case"untag":var r=e.l,l=e.v;!l&&r&&(l=Object.keys(d).find(function(e){return d[e]===r})),delete d[l],a.triggerEvent("untag",l)}};var g=new Promise(function(e){o.addEventListener("receivedDocument",function(t){return e(t)})}),f=new Promise(function(e){o.addEventListener("receivedTags",function(t){return e(t)})});g.then(function(e){c=e}),Promise.all([g,f]).then(function(e){var t=l(e,2);s=t[1][c.version],o.addEventListener("receivedOps",h),o.addEventListener("createdOps",h)}),a.publicObject.tag=function(e,t,n){if(!e&&!t)return s;if(/^\d/.test(e))throw new Error("Tag name should not begin with a number");if(e.includes("."))throw new Error("Tag name should not contain periods");if("function"==typeof t&&(n=t,t=void 0),t||(t=c.version),isNaN(t))throw new Error("Version must be a number");d[c.version]!==e&&(d[c.version]=e,u.send({wa:"tag",d:c.id,v:t,l:e},n))},a.publicObject.untag=function(e){if(!e)throw new Error("Tag label or version number must he provided");var t,n={wa:"untag",d:c.id};if(t=/^\d/.test(e)?e:Object.keys(d).find(function(t){return d[t]===e}),n.v=t,!t)throw new Error("Provided tag does not exist");delete d[t],u.send(n)},Object.defineProperty(a.publicObject,"version",{get:function(){return c.version||c.v},set:function(e){throw new Error("Version is read-only")}}),a.publicObject.tags=function(){return Object.freeze(i.objectClone(d))},e.exports={}},7481:function(t,n,i){var o,r,l=i(4858).AuthorTip,s=function(){"use strict";function t(){a(this,t),this.tracerMap=new Map,this.colorVector=["#369CD0","#F25656","#4FB5EE","#F27F2E","#5C9EED","#7560C6","#3176C6","#7560C6","#47B51D","#EC7E69"],this.disabled=!1,this.setBoundary()}return c(t,[{key:"setBoundary",value:function(){this.boundL=e.getBoundingClientRect().left,this.boundR=e.getBoundingClientRect().left+e.getBoundingClientRect().width}},{key:"ifOutOfBoundary",value:function(e){return e<this.boundL||e>this.boundR}},{key:"deleteTracer",value:function(e){var t=this.tracerMap.get(e);t&&(t.destroy(),this.tracerMap.delete(e))}},{key:"updateBasePosIfNeed",value:function(){this.baseLeft=e.getBoundingClientRect().left,this.baseTop=e.getBoundingClientRect().top}},{key:"setTracerDisplay",value:function(e,n,i){var o=this;n&&(n.hideTimer&&clearTimeout(n.hideTimer),i?(n.setDisplayPosition(i.top-this.baseTop,i.left-this.baseLeft,i.lineHeight),n.hideTimer=setTimeout(function(){o.hideTip(n,e)},t.TIP_DISPLAY_TIME)):this.hideTip(n,e,!0))}},{key:"updateTracer",value:function(e,t){var n=this;if(!this.disabled){var i=[];t.forEach(function(t){var o=t.author,r=n.getPointForLineAndChar(e,t.offset),a=n.getPositionOfRepLineAtOffset(r.node,r.index,o);a&&i.push(a)}),i&&i.length&&(this.setBoundary(),this.updateBasePosIfNeed(),i.forEach(function(e){var t=n.tracerMap.get(e.author);t||(t=new l({name:e.author,color:n.colorVector[(void 0===n.tracerMap?0:n.tracerMap.size)%n.colorVector.length]}),n.tracerMap.set(e.author,t)),t&&(0===e.lineHeight||n.ifOutOfBoundary(e.left)?n.setTracerDisplay(e.author,t,null):n.setTracerDisplay(e.author,t,e))}))}}},{key:"hideTracers",value:function(e){var t=this;e.forEach(function(e){var n=t.tracerMap.get(e);n&&t.hideTip(n,e,!0)})}},{key:"hideTip",value:function(e,t,n){try{e.hide(n),e.hideTimer=null}catch(e){}finally{e.hideTimer=null}}},{key:"getPositionOfUserInput",value:function(e,t){var n=this;t.sort(function(e,t){return t.offset-e.offset});var i=[];if(this.getTextOfUserInput(i,e,t),i.length)return i.map(function(e){return n.getPositionOfRepLineAtOffset(e.node,e.offset,e.author)})}},{key:"getTextOfUserInput",value:function(e,t,n){var i=this,o=n[n.length-1].offset;if(t.nodeType===Node.TEXT_NODE)e.push({node:t,offset:o,author:n[n.length-1].author}),n.length-=1;else{var r=0,a=t.childNodes;if(!a.length)return;for(var c=function(t,c){var l=a[t],s=r;(r+=l.textContent.length)>=o&&(n.forEach(function(e){e.offset-=s}),i.getTextOfUserInput(e,l,n))},l=0,s=a.length;l<s&&0!==n.length;l++)c(l)}}},{key:"getPositionOfRepLineAtOffset",value:function(e,t,n){try{var i=new Range;i.setStart(e,t),i.setEnd(e,t);var o=this.getPositionOfElementOrSelection(i);return i.detach(),o.author=n,o}catch(e){}}},{key:"getPositionOfElementOrSelection",value:function(e){var t=e.getBoundingClientRect();return{left:t.left+t.width,lineHeight:t.height,top:t.top}}},{key:"getPointForLineAndChar",value:function(e,t){var n=e,i=!1;if(0===t)return{node:e,index:0,maxIndex:1};for(;n!=e||!i;)if(i)n.nextSibling?(n=n.nextSibling,i=!1):n=n.parentNode;else{var o=this.textNodeLogic(n,t,i);if(i=o.after,n=o.node,t=o.index,!o.continueFlag)return o}return{node:e,index:1,maxIndex:1}}},{key:"textNodeLogic",value:function(e,t,n){if(e.nodeType===Node.TEXT_NODE){var i=e.nodeValue.length;if(t<=i)return{node:e,index:t,maxIndex:i,after:n};t-=i,n=!0}else e.firstChild?e=e.firstChild:n=!0;return{node:e,index:t,continueFlag:!0,after:n}}}]),t}();(r="TIP_DISPLAY_TIME")in(o=s)?Object.defineProperty(o,r,{value:1e4,enumerable:!0,configurable:!0,writable:!0}):o[r]=1e4,n.AuthorTracer=s,n.AuthorChangeInfo=function(){"use strict";function e(){a(this,e),this.lineChangesMap={},this.authInLine={}}return c(e,[{key:"addChange",value:function(e){Array.isArray(this.lineChangesMap[e.lines])||(this.lineChangesMap[e.lines]=[]);var t=this.authInLine[e.author],n=this.lineChangesMap[t];t>=0&&Array.isArray(n)&&(this.lineChangesMap[t]=n.filter(function(t){return t.author!==e.author})),this.lineChangesMap[e.lines].push(e),this.authInLine[e.author]=e.lines}},{key:"removeLineChanges",value:function(e,t){var n=this,i={},o=this.lineChangesMap[e];t.forEach(function(e){i[e.author]=e,n.authInLine[e.author]=-1}),Array.isArray(o)&&(this.lineChangesMap[e]=o.filter(function(e){return!i[e.author]}))}}]),e}()},2527:function(e,t,i){var r=i(9948),a=i(6068),c=i(1366),l=i(1347);function s(e,t){if(e instanceof HTMLIFrameElement){var i,r=!1;t.createEvent("transcluded",{addListener:function(e){r&&setImmediate.apply(void 0,[e].concat(o(i)))}}),n.addEventListener("transcluded",function(n){n.target===e&&(r=!0,t.triggerEvent.apply(t,["transcluded"].concat(o(i=n.detail))))})}}a.isTranscluded()&&a.sameParentDomain()&&r.addEventListener("loadedTriggered",function(){window.frameElement.dispatchEvent(new CustomEvent("transcluded",{detail:[c.publicObject.webstrateId,c.publicObject.clientId,c.publicObject.user],bubbles:!0,cancelable:!0}))},r.PRIORITY.LAST),r.addEventListener("webstrateObjectsAdded",function(e){a.recursiveForEach(e,function(e){s(e,l.getEventObject(e))})},r.PRIORITY.IMMEDIATE),r.addEventListener("webstrateObjectAdded",function(e,t){s(e,t)},r.PRIORITY.IMMEDIATE)},7517:function(e,t,n){var i=n(2445),o=n(7385);if(!n(6068).getLocationObject().staticMode&&o.publicObject){var r=i.copy(function(e){return e.data.startsWith('{"wa":')});o.publicObject.history=function(e){return new Promise(function(t,n){r.send({wa:"userHistory",options:e},function(e,i){e?n(e):t(i)})})}}e.exports={}},7385:function(e,t,n){var i=n(9948),o=n(2445),r=n(1366),a=n(8170),c=n(6068),l={};if(!c.getLocationObject().staticMode){i.createEvent("userObjectAdded"),a.delayUntil("userObjectAdded");var s,d=o.copy(function(e){return e.data.startsWith('{"wa":')}),p={};l.publicObject=p,r.publicObject.user=p,d.onjsonmessage=function(e){switch(e.wa){case"hello":Object.assign(p,e.user),s=e.id,i.triggerEvent("userObjectAdded");break;case"userClientJoin":var t=e.id;!(s===t)&&p.clients&&p.clients.push(t),e.userClient&&p.allClients&&(p.allClients[e.id]=e.userClient);break;case"clientPart":var n=e.id;if(p.clients){var o=p.clients.indexOf(n);-1!==o&&p.clients.splice(o,1)}p.allClients&&delete p.allClients[n]}};var u={},m={},h={};l.eventExists=function(e){return Object.prototype.hasOwnProperty.call(u,e)},l.createEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l.eventExists(e)&&!t.idempotent)throw new Error("Event ".concat(e," already exists."));if(void 0!==t.addListener){if("function"!=typeof t.addListener)throw new Error("addListener must be a function, received: ".concat(t.addListener));m[e]=t.addListener}if(void 0!==t.removeListener){if("function"!=typeof t.removeListener)throw new Error("removeListener must be a function, received: ".concat(t.removeListener));h[e]=t.removeListener}l.eventExists(e)||(u[e]=new Set)},l.triggerEvent=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!l.eventExists(e))throw new Error("Event ".concat(e," doesn't exist."));u[e].forEach(function(e){setImmediate.apply(void 0,[e].concat(n))})},p.on=function(e,t){if(!l.eventExists(e))throw new Error("Event ".concat(e," doesn't exist."));u[e].add(t),m[e]&&m[e](t)},p.off=function(e,t){if(!l.eventExists(e))throw new Error("Event ".concat(e," doesn't exist."));u[e].delete(t),h[e]&&h[e](t)}}e.exports=l},8012:function(e,t,n){var i=n(6068),o=n(9948),r=n(2445),a=n(7385);if(!i.getLocationObject().staticMode){o.createEvent("userObjectSignal"),a.createEvent("signal");var c=r.copy(function(e){return e.data.startsWith('{"wa":"signalUserObject"')}),l=i.getLocationObject().webstrateId;c.onjsonmessage=function(e){var t=e.m,n=e.s,i=e.sw;o.triggerEvent("userObjectSignal",t,n,i),a.triggerEvent("signal",t,n,i)},Object.defineProperty(a.publicObject,"signal",{value:function(e){if(!a.publicObject.userId||"anonymous:"===a.publicObject.userId)throw new Error("User must be logged in to signal on user object.");c.send({wa:"signalUserObject",d:l,m:e})}})}e.exports={}},4739:function(e){var t,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t(e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var c,l=[],s=!1,d=-1;function p(){s&&c&&(s=!1,c.length?l=c.concat(l):d=-1,l.length&&u())}function u(){if(!s){var e=a(p);s=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,s=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n(e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||s||a(u)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},7579:function(e,t){t.getSafeRandom=function(){return(window.crypto||window.webkitCrypto||window.mozCrypto||window.oCrypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/4294967296}},8018:function(e,t,n){!function(e,t){if(!e.setImmediate){var n,i,o,r,a,c=1,l={},s=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick(function(){m(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("",location.href),e.onmessage=n,t}}()?(r="setImmediate$"+window.crypto.getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&m(Number(t.data.slice(r.length)))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(t){e.postMessage(r+t,location.href)}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){m(e.data)},n=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,n=function(e){var t=d.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):n=function(e){setTimeout(m,0,e)},p.setImmediate=function(e){for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var o={callback:e,args:t};return l[c]=o,n(c),c++},p.clearImmediate=u}function u(e){delete l[e]}function m(e){if(s)setTimeout(m,0,e);else{var t=l[e];if(t){s=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{u(e),s=!1}}}}}("undefined"==typeof self?void 0===n.g?this:n.g:self)}},u={};function m(e){if(u[e])return u[e].exports;var t=u[e]={exports:{}};return p[e].call(t.exports,t,t.exports,m),t.exports}m.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),m.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var n=m(2213),i=m(9948),o=m(704),r=m(1528),a=m(2131),c=m(3143),l=m(289),s=m(5822),d=m(6068),p=m(2445);m(8018),window.process=m(4739),i.createEvent("allModulesLoaded");var u=d.getLocationObject(),h="http:"===location.protocol?"ws:":"wss:";p.setup("".concat(h,"//").concat(t.server||location.host,"/").concat(u.webstrateId,"/").concat(location.search)),t.destory=function(){p.close(),a.disconnect()},n.modules.forEach(function(e){return m(5836)("./"+e)}),i.triggerEvent("allModulesLoaded"),u.staticMode?r.fetch(u.webstrateId,u.tagOrVersion).then(function(e){s.populate(o.externalDocument,e)}):r.subscribe(u.webstrateId).then(function(n){s.populate(e,n).then(function(){t.onPopulate&&t.onPopulate(),a.emitMutationsFrom(e),l.emitOpsFromMutations(),c.listenForOpsAndApplyOn(e)})})}()}()}(new Proxy(document,n),document,n)}},Ywyv:function(e,t,n){"use strict";n.r(t),n.d(t,"KnowledgeManageModule",function(){return ue});var i=n("ofXK"),o=n("tyNb"),r=n("3Pt+"),a=n("sYmb"),c=n("qAZ0"),l=n("iw3d"),s=n("bBxm"),d=n("6J3s"),p=n("rZHr"),u=n("XNiG"),m=n("1G5W"),h=n("8oxB"),g=n("hbEN"),f=n("IzLi"),v=n("fXoL"),b=n("UJq8"),C=n("A/Mn"),y=n("25hl"),x=n("EcwE");function w(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",6),v["\u0275\u0275elementStart"](1,"div",7),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](2).toggleCatalogShowCtrl()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](2,"div",8),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](2).toggleCatalogShowCtrl()}),v["\u0275\u0275element"](3,"i",9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}}function _(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",3),v["\u0275\u0275template"](1,w,4,0,"div",4),v["\u0275\u0275elementStart"](2,"draggable-div",5),v["\u0275\u0275listener"]("widthChange",function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().draggableChange(e)}),v["\u0275\u0275element"](3,"catalog"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",i.catalogShowCtrl),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("hidden",i.catalogShowCtrl)("position","right")("maxWidth",i.maxWidth)("minWidth",i.minWidth)("inputWidth",275)}}var O=function(){function e(e,t,n){var i,o,r,a,c=this;this.emitService=e,this.activeRoute=t,this.knowledgeService=n,this.catalogShowCtrl=!1,this.onDestory$=new u.a,this.showNewTableContents=null,this.coeKanbanId=6,this.excelResize=(i=function(){c.emitService.emit({type:"dragge-div-width-change"})},r=!0,a=!0,Object(f.a)(o)&&(r="leading"in o?!!o.leading:r,a="trailing"in o?!!o.trailing:a),Object(g.a)(i,100,{leading:r,maxWait:100,trailing:a})),System.import("/shared-ui/knowledge-ui.ce.js"),System.import("sketchpad-chunk").then(function(e){System.import("sketchpad")})}return e.prototype.ngOnInit=function(){var e=this;this.activeRoute.paramMap.pipe(Object(m.a)(this.onDestory$)).subscribe(function(t){e.selectCategory=Number(t.get("categoryId"))},function(){}),this.emitService.eventEmit.subscribe(function(t){t&&"wiki:catalog-collpase"==t.type&&(e.catalogShowCtrl=!0),t&&"wiki:catalog-open"==t.type&&(e.catalogShowCtrl=!1),t&&"new-coe-content"===t.type&&(e.showNewTableContents=t.coeContent)},function(){})},e.prototype.toggleCatalogShowCtrl=function(){this.catalogShowCtrl=!1,this.emitService.emit({type:"wiki:catalog-open"}),Object(h.nextTick)(this.excelResize)},e.prototype.draggableChange=function(e){"dragge-div-width-change"===e.type&&this.excelResize()},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){var t=window.innerWidth;e.inputWidth=window.innerWidth/5,e.maxWidth=t/3,e.minWidth=t/8})},e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](b.a),v["\u0275\u0275directiveInject"](o.a),v["\u0275\u0275directiveInject"](C.b))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["knowledge-manage"]],decls:4,vars:1,consts:[["id","sprint-workitem-container",1,"wiki-wrapper"],["class","right-wrapper-styl",4,"ngIf"],[1,"right-oprate-styl"],[1,"right-wrapper-styl"],["class","hidden-menu-btn",4,"ngIf"],[1,"comment-wrapper",3,"hidden","position","maxWidth","minWidth","inputWidth","widthChange"],[1,"hidden-menu-btn"],[1,"catalog-ctrl-wrapper",3,"click"],[1,"catelog-circle-btn","pointer-cursor",3,"click"],[1,"pointer-cursor","fa","fa-angle-double-right","f-18"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275template"](1,_,4,6,"div",1),v["\u0275\u0275elementStart"](2,"div",2),v["\u0275\u0275element"](3,"router-outlet"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.selectCategory!==t.coeKanbanId||!1===t.showNewTableContents))},directives:[i.n,o.j,y.a,x.a],styles:[".wiki-wrapper[_ngcontent-%COMP%]{display:flex;height:100%}.wiki-wrapper[_ngcontent-%COMP%]   .right-wrapper-styl[_ngcontent-%COMP%]{flex:0 0 auto;height:100%}.wiki-wrapper[_ngcontent-%COMP%]   .right-wrapper-styl[_ngcontent-%COMP%]   .hidden-menu-btn[_ngcontent-%COMP%]{width:45px;position:absolute;z-index:1}.wiki-wrapper[_ngcontent-%COMP%]   .right-wrapper-styl[_ngcontent-%COMP%]   .hidden-menu-btn[_ngcontent-%COMP%]   .catalog-ctrl-wrapper[_ngcontent-%COMP%]{width:20px;height:100%}.wiki-wrapper[_ngcontent-%COMP%]   .right-wrapper-styl[_ngcontent-%COMP%]   .hidden-menu-btn[_ngcontent-%COMP%]   .catelog-circle-btn[_ngcontent-%COMP%]{width:35px;height:35px;position:absolute;top:15px;display:flex;align-items:center;justify-content:center;color:#999;border-top-right-radius:8px;border-bottom-right-radius:8px;background:#fff;border-right:1px solid #e5e5e5;border-top:1px solid #e5e5e5;border-bottom:1px solid #e5e5e5;box-shadow:0 0 6px rgba(0,0,0,.08)}.wiki-wrapper[_ngcontent-%COMP%]   .right-oprate-styl[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden;margin-left:3px}.more-level-index[_ngcontent-%COMP%]{position:fixed;margin:auto;top:0;bottom:0;left:0;right:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.4)}.more-level-index[_ngcontent-%COMP%]   .img-btn-wrapper[_ngcontent-%COMP%]{position:relative}.more-level-index[_ngcontent-%COMP%]   .btn-img[_ngcontent-%COMP%]{width:17px;height:17px;z-index:3}.more-level-index[_ngcontent-%COMP%]   .right-close-btn[_ngcontent-%COMP%]{position:absolute;top:-16px;right:-3vw;color:#fff;font-size:37px}"]}),e}(),S=n("TTUg"),E=n("+oEP"),M=n("mOC4"),P=n("oFdG"),I=n("tk/3"),k=function(){function e(e){this.http=e,this.head=[{name:"\u8fd0\u8425\u4e13\u9898"},{name:"\u603b\u4f53"},{name:"\u8ba1\u7b97"},{name:"\u5b58\u50a8"},{name:"\u5b89\u5168"},{name:"PaaS"},{name:"EI"},{name:"\u6570\u636e\u5e93"},{name:"IoT"},{name:"HCC"},{name:"\u5a92\u4f53"},{name:"CDN"},{name:"\u6570\u5b57\u5316\u5e73\u53f0"},{name:"\u67b6\u8bbe\u90e8"},{name:"\u4e91\u7cfb\u7edf\u5de5\u7a0b"},{name:"\u751f\u6001"},{name:"\u4f19\u4f34\u4e91"},{name:"HCS"},{name:"SRE"},{name:"\u6570\u636e\u4e2d\u5fc3"}],this.tableConfigData={head:this.head,body:[[{name:"\u4ea7\u4e1a\u8d1f\u8d23\u4eba",username:""},{name:"\u4e25\u5149\u5175",username:"y00339051"},{name:"\u674e\u65b0\u5cf0",username:"l00631796"},{name:"\u5510\u5fb7\u5e73",username:"t00509066"},{name:"\u9648\u701a",username:"c00478310"},{name:"\u5b89\u95fb",username:"a00388673"},{name:"\u5ed6\u5b87\u8f69",username:"l00333093"},{name:"\u5f20\u4fca",username:"z00499068"},{name:"\u5468\u82cf\u654f",username:"z00630106"},{name:"\u5218\u632f\u5174",username:"l00468572"},{name:"\u4ef2\u6797\u56fd",username:"z00616450"},{name:"\u738b\u53cb\u98de",username:"w00521884"},{name:"\u90ed\u4f0d\u5f97",username:"g00645962"},{name:"\u90b9\u6653\u78ca",username:"z00343696"},{name:"\u5f6d\u6797",username:"p00603852"},{name:"\u5f90\u8eab\u8fdb",username:"x00421862"},{name:"\u90b9\u6d77\u6ce2",username:"z00322996"},{name:"\u8d75\u5b50\u6b66",username:"z00499963"},{name:"\u767d\u5f3a",username:"b00314711"},{name:"\u9ece\u51b2",username:"l00481616"}],[{name:"\u4ea7\u54c1\u90e8PMO",username:"",rowspan:"4"},{name:"\u5de6\u53d1\u4eae",username:"z00398639",rowspan:"4"},{name:"\u738b\u6587\u5a1c",username:"w00560177",rowspan:"4"},{name:"\u7533\u537f",username:"s00509230",rowspan:"4"},{name:"\u5f90\u79c0\u5170",username:"x00301387",rowspan:"4"},{name:"\u5168\u6653\u660e",username:"q00322314",rowspan:"4"},{name:"\u674e\u56fd\u519b",username:"l00407498",rowspan:"4"},{name:"\u59dc\u4f1f",username:"j00629481",rowspan:"4"},{name:"\u590f\u52c7",username:"x00533140",rowspan:"4"},{name:"\u4e50\u4e50",username:"y00389531",rowspan:"4"},{name:"\u8c22\u98de",username:"x00284674",rowspan:"4"},{name:"\u9ad8\u9e4f",username:"g00619021",rowspan:"4"},{name:"\u77f3\u7ea2\u4f1f",username:"s00314733"},{name:"/",username:"",rowspan:"4"},{name:"\u674e\u660e\u661f",username:"l00468096",rowspan:"4"},{name:"\u5f90\u8eab\u8fdb",username:"x00421863",rowspan:"4"},{name:"/",username:"",rowspan:"4"},{name:"/",username:"",rowspan:"4"},{name:"/",username:"",rowspan:"4"},{name:"/",username:"",rowspan:"4"}],[{name:"\u738b\u840c",username:"w00584012"}],[{name:"\u90ed\u4f0d\u5f97",username:"g00645962"}],[{name:"\u5510\u51ef",username:"t00615155"}],[{name:"\u4e1a\u52a1\u5b89\u5168\u4e13\u5bb6",username:""},{name:"/",username:""},{name:"\u674e\u4fca ",username:"l00537521"},{name:"",username:""},{name:"",username:""},{name:"\u6bdb\u54f2\u6587",username:"m00362047"},{name:"\u5ed6\u5b87\u8f69",username:"l00333093"},{name:"",username:""},{name:"",username:""},{name:"",username:""},{name:"",username:""},{name:"",username:""},{name:"",username:""},{name:"\u9976\u71ce\u539f",username:"r00407920"},{name:"",username:""},{name:"",username:""},{name:"/",username:""},{name:"/",username:""},{name:"/",username:""},{name:"/",username:""}],[{name:"\u53ef\u4fe1\u5b9a\u4e49",username:""},{name:"\u91d1\u4f1f",username:"j00603910"},{name:"\u5218\u4fdd\u7ea2",username:"l00342860"},{name:"\u738b\u601d\u5b87",username:"w00334954"},{name:"\u80e1\u5dcd",username:"h00286784"},{name:"\u5218\u7693",username:"l00516466"},{name:"\u9648\u7965",username:"c00302786"},{name:"\u66fe\u5e86\u806a",username:"z00645055"},{name:"\u8d3a\u4f38\u660c",username:"h00287325"},{name:"\u5434\u5f00\u5143",username:"w00393090"},{name:"\u9ec4\u8d85",username:"h00544073"},{name:"\u9648\u7167\u752b",username:"c00419522"},{name:"\u90ed\u4f0d\u5f97",username:"g00645962"},{name:"",username:""},{name:"\u76ae\u5148\u6587",username:"b00317429"},{name:"\u5305\u5b9c\u5f3a",username:"b00288206"},{name:"/",username:""},{name:"\u8d75\u5764",username:"z00477325"},{name:"/",username:""},{name:"/",username:""}],[{name:"\u53ef\u4fe1\u7cfb\u7edf\u8bbe\u8ba1",username:"",rowspan:"2"},{name:"\u7530\u5b87",username:"t00452025",rowspan:"2"},{name:"\u738b\u6587\u5a1c",username:"w00560177",rowspan:"2"},{name:"\u5510\u5fb7\u5e73",username:"t00509066",rowspan:"2"},{name:"\u5f90\u79c0\u5170",username:"x00301387",rowspan:"2"},{name:"\u66fe\u6b63\u9633",username:"z00308223",rowspan:"2"},{name:"\u9ec4\u6d77\u71d5",username:"h00544742",rowspan:"2"},{name:"\u5f20\u7389\u9633",username:"z00427394",rowspan:"2"},{name:"\u848b\u5929\u7fd4",username:"j00606188",rowspan:"2"},{name:"\u9648\u6653\u5cf0",username:"c00435427"},{name:"\u674e\u8000\u8f89",username:"l00413915",rowspan:"2"},{name:"\u674e\u667a",username:"l00521713",rowspan:"2"},{name:"\u90ed\u4f0d\u5f97",username:"g00645962",rowspan:"2"},{name:"\u9976\u71ce\u539f",username:"r00407920",rowspan:"2"},{name:"\u5f6d\u8d22\u5143",username:"p00391932"},{name:"\u9648\u661f\u4eae",username:"c00274620",rowspan:"2"},{name:"/",username:"",rowspan:"2"},{name:"\u9648\u6653\u5cf0",username:"c00435427"},{name:"\u767d\u5f3a",username:"b00314711",rowspan:"2"},{name:"/",username:"",rowspan:"2"}],[{name:"\u4f55\u745e",username:"h00382155"},{name:"\u6f58\u5176\u541b",username:"p00397927"},{name:"\u4f55\u745e",username:"h00382155"}],[{name:"Clean Code",username:"",rowspan:"3"},{name:"\u6881\u6587\u4e49",username:"l00276253",rowspan:"3"},{name:"\u53f2\u6d77",username:"s00424258",rowspan:"3"},{name:"\u80e1\u5174\u54f2",username:"h00298333",rowspan:"3"},{name:"\u4e01\u6625\u971e",username:"d00559674",rowspan:"3"},{name:"\u4fde\u71d5\u5fe0",username:"y00416922",rowspan:"3"},{name:"\u5f6d\u745e\u6797",username:"p00645721",rowspan:"3"},{name:"\u59dc\u4f1f",username:"j00629481",rowspan:"3"},{name:"\u9648\u901a",username:"c00382802",rowspan:"3"},{name:"\u5f20\u78ca\u5f3a",username:"z00567406",rowspan:"3"},{name:"\u8d75\u5468\u519b",username:"z00527063",rowspan:"3"},{name:"\u9ec4\u51cc\u4e91",username:"h00449740",rowspan:"3"},{name:"\u674e\u6c5f\u5e73",username:"l00400828",rowspan:""},{name:"\u65bd\u4fdd\u7ae5",username:"s00563630",rowspan:"3"},{name:"\u6f58\u5176\u541b",username:"p00397927",rowspan:"3"},{name:"\u5362\u5e86\u9f99",username:"l00644612",rowspan:""},{name:"/",username:"",rowspan:"3"},{name:"\u5f20\u78ca\u5f3a",username:"z00567406",rowspan:"3"},{name:"\u767d\u5f3a",username:"b00314711",rowspan:"3"},{name:"/",username:"",rowspan:"3"}],[{name:"\u5468\u4f73\u5bb8",username:"z00494852",rowspan:""},{name:"\u5434\u6d77\u4eae",username:"w00376255",rowspan:""}],[{name:"\u77f3\u7ea2\u4f1f",username:"s00314733",rowspan:""},{name:"\u515a\u7426",username:"d00415228",rowspan:""}],[{name:"\u53ef\u4fe1\u6d4b\u8bd5",username:"",rowspan:"2"},{name:"\u5f20\u5efa\u52cb",username:"z00436050",rowspan:"2"},{name:"\u90b1\u8ff0\u519b",username:"q00280590",rowspan:"2"},{name:"\u5f90\u7d20\u59ae",username:"x00285656",rowspan:"2"},{name:"\u725b\u91d1\u56fd",username:"n00335432",rowspan:"2"},{name:"\u674e\u8d3a\u677e",username:"l00544193",rowspan:"2"},{name:"\u675c\u6811\u9e4f",username:"d00309232",rowspan:"2"},{name:"\u5f20\u6d69",username:"z00562671",rowspan:"2"},{name:"\u949f\u9526\u950b",username:"z00597999",rowspan:"2"},{name:"\u7530\u82d7",username:"t00372828",rowspan:"2"},{name:"\u6731\u53cc\u71d5",username:"z00371606",rowspan:"2"},{name:"\u80e5\u6267\u4fca",username:"x00542114",rowspan:"2"},{name:"\u5f20\u5fd7\u9e4f",username:"z00375430",rowspan:""},{name:"\u502a\u4f1f\u4ec1",username:"n00645739",rowspan:"2"},{name:"\u5f20\u53e0\u7fe0",username:"z00602543",rowspan:"2"},{name:"\u5218\u68a6\u6210",username:"l00638812",rowspan:"2"},{name:"/",username:"",rowspan:"2"},{name:"\u7530\u82d7",username:"t00372828",rowspan:"2"},{name:"\u6768\u4e50",username:"y00356323",rowspan:"2"},{name:"/",username:"",rowspan:"2"}],[{name:"\u8c22\u51ac\u6885",username:"x00387852"}],[{name:"\u5b89\u5168\u9a8c\u8bc1",username:"",rowspan:"2"},{name:"\u5355\u9e4f\u98de",username:"s00438385",rowspan:"2"},{name:"\u5f20\u541b ",username:"z00505374",rowspan:"2"},{name:"\u66fe\u51e1\u5a1f",username:"z00431488",rowspan:"2"},{name:"\u725b\u91d1\u56fd",username:"n00335432",rowspan:"2"},{name:"\u6881\u9704",username:"l00317363",rowspan:"2"},{name:"\u5d14\u6587\u901a",username:"c00398120",rowspan:"2"},{name:"\u9648\u7fa4",username:"c00584046",rowspan:"2"},{name:"\u4e01\u96f7\u96f7 ",username:"d00391400",rowspan:"2"},{name:"\u674e\u4e39\u4e39",username:"l00292391",rowspan:"2"},{name:"\u6768\u6d69\u5929",username:"y00589360",rowspan:"2"},{name:"\u80e5\u6267\u4fca",username:"x00542114",rowspan:"2"},{name:"\u674e\u6770",username:"l00527483",rowspan:""},{name:"\u502a\u4f1f\u4ec1",username:"n00645739",rowspan:"2"},{name:"\u5f20\u53e0\u7fe0",username:"z00602543",rowspan:"2"},{name:"\u8bb8\u4e16\u6052",username:"x00377290",rowspan:"2"},{name:"/",username:"",rowspan:"2"},{name:"\u674e\u4e39\u4e39 ",username:"l00292391",rowspan:"2"},{name:"/",username:"",rowspan:"2"},{name:"/",username:"/",rowspan:"2"}],[{name:"\u738b\u7fa4",username:"w00496189"}],[{name:"\u767d\u76d2\u5b89\u5168\u9a8c\u8bc1",username:"",rowspan:"2"},{name:"\u80e1\u6653\u5143",username:"h00603751",rowspan:""},{name:"\u5f20\u541b ",username:"z00505374",rowspan:"2"},{name:"\u66fe\u51e1\u5a1f",username:"z00431488",rowspan:"2"},{name:"\u725b\u91d1\u56fd",username:"n00335432",rowspan:"2"},{name:"\u5468\u6021",username:"z00423228",rowspan:"2"},{name:"\u6bb7\u7231\u519b ",username:"y00306711",rowspan:"2"},{name:"\u9648\u7fa4",username:"c00584046",rowspan:"2"},{name:"\u4e01\u96f7\u96f7 ",username:"d00391400",rowspan:"2"},{name:"\u674e\u4e39\u4e39",username:"l00292391",rowspan:"2"},{name:"\u8d75\u9e4f\u7a0b",username:"z00303561",rowspan:"2"},{name:"\u6768\u5f6c",username:"y00621821",rowspan:"2"},{name:"\u674e\u6770",username:"l00527483",rowspan:""},{name:"\u502a\u4f1f\u4ec1",username:"n00645739",rowspan:"2"},{name:"\u5f20\u53e0\u7fe0",username:"z00602543",rowspan:"2"},{name:"\u8bb8\u4e16\u6052",username:"x00377290",rowspan:"2"},{name:"/",username:"",rowspan:"2"},{name:"\u674e\u4e39\u4e39 ",username:"l00292391",rowspan:"2"},{name:"/",username:"",rowspan:"2"},{name:"/",username:"/",rowspan:"2"}],[{name:"\u4ed8\u4e3d\u5a1f",username:"f00290478"},{name:"\u738b\u7fa4",username:"w00496189"}],[{name:"\u53ef\u4fe1\u6784\u5efa",username:"",rowspan:"4"},{name:"\u738b\u5c0f\u82b3",username:"w00300523",rowspan:"4"},{name:"\u738b\u4fca\u5cf0",username:"w00302453",rowspan:"4"},{name:"\u5510\u5fb7\u5e73",username:"t00509066",rowspan:"2"},{name:"\u4e01\u6625\u971e ",username:"d00559674",rowspan:"4"},{name:"\u5415\u7b11\u5bb9 ",username:"l00391808",rowspan:"4"},{name:"\u674e\u4fca",username:"l00526671",rowspan:"4"},{name:"\u59dc\u4f1f",username:"j00629481",rowspan:"4"},{name:"\u7126\u6ce2",username:"j00470652",rowspan:"4"},{name:"/",username:"",rowspan:"4"},{name:"\u8d75\u5468\u519b",username:"z00527063",rowspan:"4"},{name:"\u9648\u51e1",username:"c00453001",rowspan:"4"},{name:"\u674e\u6c5f\u5e73",username:"l00400828"},{name:"\u5e08\u6c11\u5f3a",username:"s00294381",rowspan:"4"},{name:"\u5f20\u601d\u74ef",username:"z00330397",rowspan:"4"},{name:"\u674e\u96ea",username:"l00588998",rowspan:"4"},{name:"/",username:"",rowspan:"4"},{name:"\u7fdf\u519b",username:"z00507180",rowspan:"4"},{name:"/",username:"",rowspan:"4"},{name:"/",username:"",rowspan:"4"}],[{name:"\u848b\u6d9b",username:"j00526039",rowspan:""}],[{name:"\u80e1\u5174\u54f2",username:"h00298333",rowspan:"2"},{name:"\u77f3\u7ea2\u4f1f",username:"s00314733",rowspan:""}],[{name:"\u738b\u840c",username:"w00584012",rowspan:""}],[{name:"E2E\u53ef\u8ffd\u6eaf",username:""},{name:"\u5546\u6d2a\u4f1f",username:"s00619016"},{name:"\u738b\u6587\u5a1c",username:"w00560177"},{name:"\u5510\u6cfd\u7693",username:"t30015890"},{name:"\u4e01\u6625\u971e ",username:"d00559674"},{name:"\u718a\u96e8\u51ef ",username:"x00297949"},{name:"\u9a6c\u6d77\u6ce2",username:"m84225928"},{name:"\u5321\u5168\u5e73",username:"k00449383"},{name:"\u674e\u96ea",username:"l00588998"},{name:"\u674e\u5c0f\u8273",username:"l00417229"},{name:"\u8d75\u5468\u519b",username:"z00527063"},{name:"\u90ed\u4f1f",username:"g00575429"},{name:"\u674e\u6c5f\u5e73",username:"l00400828"},{name:"\u90b9\u6653\u78ca",username:"z00343696"},{name:"\u5f20\u601d\u74ef",username:"z00330397"},{name:"\u845b\u9e4f\u98de",username:"g00509097"},{name:"/",username:""},{name:"/",username:""},{name:"\u674e\u6c5f\u5e73",username:"l00400828"},{name:"/",username:""}],[{name:"\u5f00\u6e90\u53ca\u4e09\u65b9\u4ef6\u7ba1\u7406",username:"",rowspan:"2"},{name:"\u5e38\u8587",username:"c00604115"},{name:"\u738b\u4fca\u5cf0",username:"w00302453",rowspan:"2"},{name:"\u674e\u9633",username:"l30003924",rowspan:"2"},{name:"\u725b\u91d1\u56fd ",username:"n00335432",rowspan:"2"},{name:"\u5168\u6653\u660e ",username:"q00322314",rowspan:"2"},{name:"\u53f6\u6881\u67ab",username:"y00353904",rowspan:"2"},{name:"\u5321\u5168\u5e73",username:"k00449383",rowspan:"2"},{name:"\u8d3a\u5f20\u4fed",username:"h00421961",rowspan:"2"},{name:"\u6768\u78ca",username:"y00365357",rowspan:"2"},{name:"\u8d75\u5468\u519b",username:"z00527063",rowspan:"2"},{name:"\u848b\u677e\u6797",username:"j00413452",rowspan:"2"},{name:"\u674e\u6c5f\u5e73",username:"l00400828",rowspan:"2"},{name:"\u8d75\u5dcd\u51ef",username:"z00274070",rowspan:"2"},{name:"\u5218\u6709\u65f6",username:"l00606529",rowspan:"2"},{name:"\u5434\u6d77\u4eae",username:"w00376255",rowspan:"2"},{name:"/",username:"",rowspan:"2"},{name:"\u6768\u78ca",username:"y00365357",rowspan:"2"},{name:"\u767d\u5f3a",username:"b00314711",rowspan:"2"},{name:"/",username:"",rowspan:"2"}],[{name:"\u738b\u6676",username:"w00629874"}],[{name:"\u53d1\u5e03\u4e0e\u90e8\u7f72",username:"",rowspan:"4"},{name:"\u5f20\u4e09\u534e",username:"z00333356",rowspan:"4"},{name:"\u53f2\u6d77",username:"s00424258",rowspan:"4"},{name:"\u59da\u674e\u9633",username:"y00365868",rowspan:"4"},{name:"\u4e01\u6625\u971e",username:"d00559674",rowspan:"4"},{name:"\u718a\u96e8\u51ef",username:"x00297949",rowspan:"4"},{name:"\u674e\u56fd\u519b",username:"l00407498",rowspan:"2"},{name:"\u5218\u6c60",username:"l00604078",rowspan:"4"},{name:"\u7126\u6ce2",username:"j00470652",rowspan:"4"},{name:"\u5305\u5854\u6797",username:"b00405127",rowspan:"4"},{name:"\u5468\u56ed\u5e73",username:"z00398419",rowspan:"4"},{name:"\u9648\u51e1",username:"c00453001",rowspan:"4"},{name:"\u674e\u6c5f\u5e73",username:"l00400828",rowspan:""},{name:"\u90b9\u6653\u78ca",username:"z00343696",rowspan:"4"},{name:"\u5f20\u601d\u74ef",username:"z00330397",rowspan:"4"},{name:"\u9ad8\u7389\u8d85",username:"g00345935",rowspan:"4"},{name:"\u90b9\u6d77\u6ce2",username:"z00322996",rowspan:"4"},{name:"\u7941\u6cfd\u5b87",username:"q00581049",rowspan:"4"},{name:"/",username:"",rowspan:"4"},{name:"/",username:"",rowspan:"4"}],[{name:"\u848b\u6d9b",username:"j00526039",rowspan:""}],[{name:"\u9a6c\u6d77\u6ce2",username:"m84225928",rowspan:"2"},{name:"\u77f3\u7ea2\u4f1f",username:"s00314733",rowspan:""}],[{name:"\u738b\u840c",username:"w00584012",rowspan:""}],[{name:"\u53ef\u4fe1\u8fd0\u7ef4",username:"",rowspan:"4"},{name:"\u5f20\u4e09\u534e",username:"z00333356",rowspan:"4"},{name:"\u53f2\u6d77",username:"s00424258",rowspan:"4"},{name:"\u6731\u5065",username:"z00279453",rowspan:"4"},{name:"\u9a6c\u514b\u660e",username:"m00526716",rowspan:"4"},{name:"\u5f90\u6770",username:"x00370714",rowspan:"4"},{name:"\u4e8e\u4f1f\u5f3a",username:"y00345215",rowspan:"4"},{name:"\u5218\u6c60",username:"l00604078",rowspan:"4"},{name:"\u6768\u4e8c\u6770",username:"y00521901",rowspan:"4"},{name:"/",username:"",rowspan:"4"},{name:"\u5468\u56ed\u5e73",username:"z00398419",rowspan:"4"},{name:"\u5f20\u52c7",username:"z00375773",rowspan:"4"},{name:"\u674e\u6c5f\u5e73",username:"l00400828",rowspan:""},{name:"\u90b9\u6653\u78ca",username:"z00343696",rowspan:"4"},{name:"/",username:"",rowspan:"4"},{name:"\u6768\u4e8c\u6770",username:"y00521901",rowspan:"4"},{name:"/",username:"",rowspan:"4"},{name:"\u674e\u594e",username:"l00495809",rowspan:"4"},{name:"/",username:"",rowspan:"4"},{name:"/",username:"",rowspan:"4"}],[{name:"\u848b\u6d9b",username:"j00526039",rowspan:""}],[{name:"\u77f3\u7ea2\u4f1f",username:"s00314733",rowspan:""}],[{name:"\u738b\u840c",username:"w00584012",rowspan:""}],[{name:"\u53ef\u4fe1\u7ec4\u7ec7\u4e0e\u6587\u5316",username:""},{name:"\u5b5f\u8f69",username:"m00593211"},{name:"\u9648\u9e4f\u9e4f",username:"c00398823"},{name:"\u738b\u5c11\u5a77",username:"w00516609"},{name:"\u4f55\u5b66\u6587",username:"h00566936"},{name:"\u8463\u8fb0",username:"d00546547"},{name:"\u738b\u4e3d\u5a1f",username:"w00372442"},{name:"\u5f20\u9704\u9e3e",username:"z00587827"},{name:"\u4e25\u4eae",username:"y00311946"},{name:"\u6768\u7490",username:"y00386630"},{name:"\u8d75\u80dc",username:"z00485911"},{name:"\u738b\u4e2d\u8fbe",username:"z00382937"},{name:"\u8d75\u7434",username:"z00326424"},{name:"\u7a0b\u723d",username:"c00589783"},{name:"\u6c6a\u5468\u6797",username:"w00516697"},{name:"\u66f9  \u6c9b",username:"c00338563"},{name:"/",username:""},{name:"\u8fb9\u9e4f\u98de",username:"b00421223"},{name:"\u79e6\u7fe0\u8292",username:"q00388048"},{name:"\u50a8\u8d85",username:"c00631716"}],[{name:"\u6f0f\u6d1e\u7ba1\u7406",username:"",rowspan:"3"},{name:"\u67f3\u656c\u6b66",username:"l00449797",rowspan:""},{name:"\u8d3a\u5251",username:"h00577592",rowspan:"3"},{name:"\u5f20\u6625\u4e3d",username:"z00426160",rowspan:"3"},{name:"\u725b\u91d1\u56fd",username:"n00335432",rowspan:"3"},{name:"\u5f90\u5fb7\u6d77",username:"x00324678",rowspan:"3"},{name:"\u90dd\u884c\u519b",username:"h00424960",rowspan:"3"},{name:"\u4e8e\u7ee7\u4e07",username:"y00274338",rowspan:"3"},{name:"\u8c2d\u8fd0\u521a",username:"t00307047",rowspan:"3"},{name:"\u5f20\u8363\u8f89",username:"z00421216",rowspan:"3"},{name:"\u6768\u6d69\u5929",username:"y00589360",rowspan:""},{name:"\u6768\u5f6c",username:"y00621821",rowspan:"3"},{name:"\u4f55\u51ef",username:"h00374388",rowspan:""},{name:"\u90b9\u6653\u78ca",username:"z00343696",rowspan:"3"},{name:"\u5218\u6709\u65f6",username:"l00606529",rowspan:"3"},{name:"\u8c2d\u8fd0\u521a",username:"t00307047",rowspan:"3"},{name:"/",username:"",rowspan:"3"},{name:"\u5f20\u8363\u8f89",username:"z00421216",rowspan:"3"},{name:"\u4f55\u51ef",username:"h00374388",rowspan:"3"},{name:"\u4e54\u9f99\u98de ",username:"q00318986",rowspan:"3"}],[{name:"\u90d1\u7167\u5b87",username:"z00295181",rowspan:"2"},{name:"\u8d75\u9e4f\u7a0b",username:"z00303561",rowspan:"2"},{name:"\u77f3\u7ea2\u4f1f ",username:"s00314733",rowspan:""}],[{name:"\u5c27\u5e94\u6743 ",username:"y00534817",rowspan:""}],[{name:"\u5408\u540c\u751f\u547d\u5468\u671f\u7ba1\u7406 ",username:"",rowspan:"2"},{name:"\u91d1\u4f1f ",username:"j00603910",rowspan:""},{name:"\u5f85\u8fd0\u8425 ",username:"",rowspan:"2",colspan:"18"}],[{name:"\u5468\u9a70 ",username:"z00629239",rowspan:""}],[{name:"\u5916\u90e8\u8ba4\u8bc1 ",username:"",rowspan:""},{name:"ZOU FENG ",username:"z00297281",rowspan:""},{name:"/",username:"",rowspan:"10",colspan:"18"}],[{name:"\u5b89\u5168\u8fd0\u7ef4\u4e0e\u8fd0\u8425 ",username:"",rowspan:""},{name:"\u9ec4\u5a01",username:"h00333948",rowspan:""}],[{name:"\u5916\u5305\u7ba1\u7406 ",username:"",rowspan:""},{name:"\u5f6d\u5e7c\u6b66",username:"p00431553",rowspan:""}],[{name:"\u53ef\u4fe1\u8fd0\u8425 ",username:"",rowspan:""},{name:"\u5f20\u79d1",username:"z00419129",rowspan:""}],[{name:"\u6570\u636e\u9690\u79c1\u4e0e\u5b89\u5168 ",username:"",rowspan:""},{name:"ZOU FENG",username:"z00297281",rowspan:""}],[{name:"\u57fa\u7840\u8bbe\u65bd\u53ef\u4fe1\u4e13\u9898 ",username:"",rowspan:""},{name:"\u9ece\u51b2",username:"l00481616",rowspan:""}],[{name:"\u8bc1\u4e66\u7ba1\u7406 ",username:"",rowspan:""},{name:"\u90b9\u7ee7\u5bcc",username:"z00481889",rowspan:""}],[{name:"\u5b89\u5168\u914d\u7f6e\u7aef\u5230\u7aef ",username:"",rowspan:""},{name:"\u6768\u677e",username:"y00340313",rowspan:""}],[{name:"\u53ef\u4fe1\u91c7\u8d2d ",username:"",rowspan:""},{name:"\u675c\u7ee7\u4e1c",username:"d00435444",rowspan:""}],[{name:"\u6027\u80fd\u63d0\u5347 ",username:"",rowspan:""},{name:"\u5355\u95ef",username:"s00499682",rowspan:""}]]}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275inject"](I.c))},e.\u0275prov=v["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),T=n("hANM"),D=n("bNXi"),A=function(e){return{fontSize:e}};function z(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"i",2),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().showImDialog()}),v["\u0275\u0275pipe"](1,"translate"),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275propertyInterpolate"]("title",v["\u0275\u0275pipeBind1"](1,2,"Initiating_An_IM")),v["\u0275\u0275property"]("ngStyle",v["\u0275\u0275pureFunction1"](4,A,i.iconSize))}}function R(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"i",3),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().eSpaceCallByAccount()}),v["\u0275\u0275pipe"](1,"translate"),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275propertyInterpolate"]("title",v["\u0275\u0275pipeBind1"](1,2,"Initiating_An_CALL")),v["\u0275\u0275property"]("ngStyle",v["\u0275\u0275pureFunction1"](4,A,i.iconSize))}}var L=function(){function e(e,t,n){this.espaceCtrlService=e,this.notification=t,this.translate=n,this.espaceConfig={iM:!0,call:!0}}return e.prototype.ngOnInit=function(){},e.prototype.showImDialog=function(){var e=this;this.espaceCtrlService.showImDialogOut(this.username,function(t,n){t&&e.notification.error("\u62c9\u8d77\u5355\u804aIM\u7a97\u53e3\u51fa\u9519","")})},e.prototype.eSpaceCallByAccount=function(){this.espaceCtrlService.eSpaceCallByAccountOut(this.username,function(e,t){e&&this.notification.error("\u62c9\u8d77\u8bed\u97f3\u901a\u8bdd\u51fa\u9519","")})},e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](T.a),v["\u0275\u0275directiveInject"](D.b),v["\u0275\u0275directiveInject"](a.c))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["workitem-espace-ctrl"]],inputs:{username:"username",iconSize:"iconSize",espaceConfig:"espaceConfig"},decls:3,vars:2,consts:[["class","iconfont icon-espace m-l-5 cur-pointer",3,"title","ngStyle","click",4,"ngIf"],["class","fa fa-phone-square m-l-5 cur-pointer",3,"title","ngStyle","click",4,"ngIf"],[1,"iconfont","icon-espace","m-l-5","cur-pointer",3,"title","ngStyle","click"],[1,"fa","fa-phone-square","m-l-5","cur-pointer",3,"title","ngStyle","click"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div"),v["\u0275\u0275template"](1,z,2,6,"i",0),v["\u0275\u0275template"](2,R,2,6,"i",1),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.espaceConfig.iM),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.espaceConfig.call))},directives:[i.n,i.o],pipes:[a.b],styles:[".fa-phone-square[_ngcontent-%COMP%]:hover{color:#227cd1}"]}),e}();function N(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"td"),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](n.name)}}function j(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275template"](1,N,2,1,"td",4),v["\u0275\u0275elementContainerEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",n.tableConfigData.head)}}function V(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span"),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](n.name)}}function F(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"span",8),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](n);var e=v["\u0275\u0275nextContext"]().$implicit;return v["\u0275\u0275nextContext"](3).toNewPage(e)}),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",i.name," ")}}function B(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",9),v["\u0275\u0275elementStart"](1,"div",10),v["\u0275\u0275element"](2,"workitem-espace-ctrl",11),v["\u0275\u0275elementStart"](3,"span"),v["\u0275\u0275text"](4,"WeLink"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]().$implicit,i=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("username",n.username)("espaceConfig",i.espaceConfig)}}function U(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"td",5),v["\u0275\u0275template"](2,V,2,1,"span",3),v["\u0275\u0275template"](3,F,2,1,"span",6),v["\u0275\u0275template"](4,B,5,2,"div",7),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("rowSpan",n.rowspan||1)("colSpan",n.colspan||1),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!n.link),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.link),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.username)}}function W(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"tr"),v["\u0275\u0275template"](1,U,5,5,"ng-container",4),v["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",n)}}function H(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"table",2),v["\u0275\u0275elementStart"](1,"thead"),v["\u0275\u0275elementStart"](2,"tr"),v["\u0275\u0275template"](3,j,2,1,"ng-container",3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"tbody"),v["\u0275\u0275template"](5,W,2,1,"tr",4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",n.tableConfigData.head.length),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngForOf",n.tableConfigData.body)}}var G=function(){function e(e,t){this.knowledgeService=e,this.expertMapContentService=t,this.focusArr=[],this.espaceConfig={iM:!0,call:!1}}return e.prototype.ngOnInit=function(){this.tableConfigData=this.expertMapContentService.tableConfigData},e.prototype.toNewPage=function(e){window.open(e.url,"_blank")},e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](C.b),v["\u0275\u0275directiveInject"](k))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["expert-map-content"]],features:[v["\u0275\u0275ProvidersFeature"]([k])],decls:2,vars:1,consts:[[1,"expert-map-content","m-t-30","p-b-20"],["class","table-content",4,"ngIf"],[1,"table-content"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"content-td",3,"rowSpan","colSpan"],["class","content-link-item text-underline cursor-pointer",3,"click",4,"ngIf"],["class","content-wiki",4,"ngIf"],[1,"content-link-item","text-underline","cursor-pointer",3,"click"],[1,"content-wiki"],[1,"content-wiki-box"],["iconSize","14px",3,"username","espaceConfig"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275template"](1,H,6,2,"table",1),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.tableConfigData))},directives:[i.n,i.m,L],styles:[".expert-map-content[_ngcontent-%COMP%]   .table-content[_ngcontent-%COMP%]{width:100%}.expert-map-content[_ngcontent-%COMP%]   .table-content[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#ebf2fd}.expert-map-content[_ngcontent-%COMP%]   .table-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;text-align:center;border:1px solid #cad9f0}.expert-map-content[_ngcontent-%COMP%]   .content-td[_ngcontent-%COMP%]{position:relative}.expert-map-content[_ngcontent-%COMP%]   .content-td[_ngcontent-%COMP%]:hover   .content-wiki[_ngcontent-%COMP%]{display:flex}.expert-map-content[_ngcontent-%COMP%]   .content-wiki[_ngcontent-%COMP%]{display:none;position:absolute;width:100%;height:100%;top:0;left:0;background-color:rgba(0,0,0,.5);color:#f04b3d;justify-content:center;align-items:center}.expert-map-content[_ngcontent-%COMP%]   .content-link-item[_ngcontent-%COMP%]{color:#23c6c8}"]}),e}(),q=n("mrSG"),$=n("nJia");function K(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"div",10),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](n);var e=t.$implicit;return v["\u0275\u0275nextContext"](2).goRouter(e)}),v["\u0275\u0275element"](2,"img",11),v["\u0275\u0275elementStart"](3,"div",12),v["\u0275\u0275elementStart"](4,"div",13),v["\u0275\u0275text"](5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",14),v["\u0275\u0275element"](7,"span",15),v["\u0275\u0275elementStart"](8,"span",16),v["\u0275\u0275text"](9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](10,"span",16),v["\u0275\u0275text"](11,"|"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](12,"span"),v["\u0275\u0275text"](13),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=t.$implicit,o=t.index;v["\u0275\u0275advance"](1),v["\u0275\u0275classProp"]("margin-item",(o+1)%4!=0),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("src",null==i?null:i.icon_image,v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("nzTooltipTitle",i.title),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",i.title," "),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](null==i?null:i.reading_amount),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](null==i?null:i.last_update_time)}}function X(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",8),v["\u0275\u0275template"](1,K,14,7,"ng-container",9),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",n.cardArr)}}function Y(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"div",18),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](n);var e=t.$implicit;return v["\u0275\u0275nextContext"](2).goRouter(e)}),v["\u0275\u0275element"](2,"img",19),v["\u0275\u0275elementStart"](3,"div",20),v["\u0275\u0275elementStart"](4,"div",21),v["\u0275\u0275text"](5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",22),v["\u0275\u0275text"](7),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"div",14),v["\u0275\u0275element"](9,"span",15),v["\u0275\u0275elementStart"](10,"span",16),v["\u0275\u0275text"](11),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](12,"span",16),v["\u0275\u0275text"](13,"|"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](14,"span"),v["\u0275\u0275text"](15),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=t.$implicit;v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("src",null==i?null:i.icon_image,v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"](" ",null==i?null:i.title," "),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",null==i?null:i.simple_description," "),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](null==i?null:i.reading_amount),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](null==i?null:i.last_update_time)}}function Q(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",17),v["\u0275\u0275template"](1,Y,16,5,"ng-container",9),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",n.cardArr)}}function J(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",23),v["\u0275\u0275elementStart"](1,"div",24),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().loadMore()}),v["\u0275\u0275elementStart"](2,"span"),v["\u0275\u0275text"](3),v["\u0275\u0275pipe"](4,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](5,"span",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](4,1,"LOAD_MORE")))}var Z=function(){function e(e,t,n){this.knowledgeService=e,this.router=t,this.emitService=n,this.isCardType=!0,this.cardArr=[],this.tabArr=[],this.currentPageNum=1,this.isShowLoadBtn=!0}return e.prototype.ngOnInit=function(){},e.prototype.cardTypeChange=function(e){this.isCardType=e},e.prototype.ngOnChanges=function(e){var t,n,i,o;e.classifyType&&(this.isShowLoadBtn=!0,this.currentPageNum=1,this.cardArr=[],null!==(null===(n=null===(t=e.classifyType)||void 0===t?void 0:t.currentValue)||void 0===n?void 0:n.id)&&void 0!==(null===(o=null===(i=e.classifyType)||void 0===i?void 0:i.currentValue)||void 0===o?void 0:o.id)&&this.getArrData())},e.prototype.getArrData=function(){var e=this;this.knowledgeService.getPageModule({category_ids:[this.classifyType.id],page:{current_page:this.currentPageNum,page_size:8},theme_page_sn:this.pageId}).subscribe(function(t){var n,i=(null===(n=t[0])||void 0===n?void 0:n.theme_category_wiki)||[];e.isShowLoadBtn=!(i.length<8),e.cardArr=Object(q.i)(e.cardArr,i)},function(){})},e.prototype.loadMore=function(){this.currentPageNum++,this.getArrData()},e.prototype.goRouter=function(e){var t=this;this.router.navigateByUrl("/domains/"+e.assigned_domain+"/wiki/"+e.kanban_id+"/"+e.sn),setTimeout(function(){t.emitService.emit({type:"nav-updata",sn:e.sn})})},e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](C.b),v["\u0275\u0275directiveInject"](o.f),v["\u0275\u0275directiveInject"](b.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-lecture-hall"]],inputs:{classifyType:"classifyType",pageId:"pageId"},features:[v["\u0275\u0275NgOnChangesFeature"]],decls:11,vars:13,consts:[[1,"change-display"],[1,"btn-list","flex-box"],["nz-tooltip","",1,"iconfont","icon-four-square","m-r-8","common-icon","cursor-pointer",3,"nzTooltipTitle","click"],[1,"vertical-line","m-r-8"],["nz-tooltip","",1,"iconfont","icon-types","common-icon","cursor-pointer",3,"nzTooltipTitle","click"],["class","flex-item",4,"ngIf"],["class","full-width",4,"ngIf"],["class","bottom-load-wrapper",4,"ngIf"],[1,"flex-item"],[4,"ngFor","ngForOf"],[1,"card-item","cursor-pointer",3,"click"],[3,"src"],[1,"desc-wrapper"],["nz-tooltip","",1,"desc-title","text-ellipsis",3,"nzTooltipTitle"],[1,"view-date"],[1,"iconfont","icon-eye","m-r-3","f-14"],[1,"m-r-8"],[1,"full-width"],[1,"full-width","flex-box","tab-item","cursor-pointer",3,"click"],[1,"tab-img",3,"src"],[1,"tab-desc"],[1,"desc-title","text-ellipsis","hover-active"],[1,"desc_simple","text-ellipsis","hover-active"],[1,"bottom-load-wrapper"],[1,"load-more",3,"click"],[1,"iconfont","icon-packup","traverse","m-l-8","f-14"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"span",2),v["\u0275\u0275listener"]("click",function(){return t.cardTypeChange(!0)}),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"span",3),v["\u0275\u0275text"](5,"|"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"span",4),v["\u0275\u0275listener"]("click",function(){return t.cardTypeChange(!1)}),v["\u0275\u0275pipe"](7,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](8,X,2,1,"div",5),v["\u0275\u0275template"](9,Q,2,1,"div",6),v["\u0275\u0275template"](10,J,6,3,"div",7)),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275classProp"]("active-span",t.isCardType),v["\u0275\u0275property"]("nzTooltipTitle",v["\u0275\u0275pipeBind1"](3,9,"CARD_VIEW")),v["\u0275\u0275advance"](4),v["\u0275\u0275classProp"]("active-span",!t.isCardType),v["\u0275\u0275property"]("nzTooltipTitle",v["\u0275\u0275pipeBind1"](7,11,"LIST_VIEW")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.isCardType),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!t.isCardType),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.isShowLoadBtn))},directives:[$.d,i.n,i.m],pipes:[a.b],styles:[".change-display[_ngcontent-%COMP%]{margin:15px 0;height:30px;position:relative}.change-display[_ngcontent-%COMP%]   .btn-list[_ngcontent-%COMP%]{position:absolute;right:0;align-items:center}.change-display[_ngcontent-%COMP%]   .btn-list[_ngcontent-%COMP%]   .common-icon[_ngcontent-%COMP%]{font-size:16px;color:#494949;height:30px;width:30px;border-radius:4px;display:flex;align-items:center;justify-content:center}.change-display[_ngcontent-%COMP%]   .btn-list[_ngcontent-%COMP%]   .common-icon[_ngcontent-%COMP%]:hover{background-color:#f1f4f6}.change-display[_ngcontent-%COMP%]   .btn-list[_ngcontent-%COMP%]   .vertical-line[_ngcontent-%COMP%]{color:#dbdbdb;font-size:14px;position:relative;top:-1px}.active-span[_ngcontent-%COMP%]{background:rgba(35,198,200,.1);color:#23c6c8!important}.active-span[_ngcontent-%COMP%]:hover{background:rgba(35,198,200,.1)!important}.flex-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row}.flex-item[_ngcontent-%COMP%]   .margin-item[_ngcontent-%COMP%]{margin-right:2.22%}.flex-item[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]{width:23.33%;margin-bottom:17px;border:1px solid #eee;background:#fff;filter:drop-shadow(rgba(0,0,0,.15) 0 2px 12px)}.flex-item[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]:hover{filter:drop-shadow(rgba(0,0,0,.3) 0 2px 12px)}.flex-item[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:152px}.flex-item[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   .desc-wrapper[_ngcontent-%COMP%]{padding:9px}.flex-item[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   .desc-wrapper[_ngcontent-%COMP%]   .desc-title[_ngcontent-%COMP%]{color:#494949;font-size:16px;margin-bottom:10px;line-height:20px;height:40px;white-space:normal}.view-date[_ngcontent-%COMP%]{display:flex;color:#aaa;font-size:14px}.tab-item[_ngcontent-%COMP%]{padding-bottom:16px;border-bottom:1px solid #eaeaea;margin-bottom:18px}.tab-item[_ngcontent-%COMP%]   .tab-img[_ngcontent-%COMP%]{width:184px;height:100px;border-radius:4px;margin-right:30px}.tab-item[_ngcontent-%COMP%]   .desc-title[_ngcontent-%COMP%]{color:#494949;font-size:16px;height:21px;line-height:21px;margin-bottom:10px}.tab-item[_ngcontent-%COMP%]   .desc_simple[_ngcontent-%COMP%]{height:22px;line-height:22px;color:#999;font-size:14px;margin-bottom:27px}.tab-item[_ngcontent-%COMP%]   .hover-active[_ngcontent-%COMP%]:hover{color:#23c6c8}.bottom-load-wrapper[_ngcontent-%COMP%]{padding-top:20px;display:flex;justify-content:center}.bottom-load-wrapper[_ngcontent-%COMP%]   .load-more[_ngcontent-%COMP%]{width:120px;padding:0 20px;height:36px;border-radius:18px;background:#f0f0f0;display:flex;align-items:center;color:#494949;font-size:14px}.bottom-load-wrapper[_ngcontent-%COMP%]   .load-more[_ngcontent-%COMP%]:hover{color:#fff;background:#23c6c8}.bottom-load-wrapper[_ngcontent-%COMP%]   .load-more[_ngcontent-%COMP%]   .traverse[_ngcontent-%COMP%]{transform:rotate(180deg);position:relative;top:-2px}"]}),e}();function ee(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",9),v["\u0275\u0275elementStart"](1,"span",10),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div",11),v["\u0275\u0275element"](5,"wiki-search-input",12),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,5,"CLASSIFICATION")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("customStyle",n.customStyle)("inputStyle",n.inputStyle)("kanbanId",n.selectCategory)("pageForm","category")}}function te(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"div",15),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](n);var e=t.index;return v["\u0275\u0275nextContext"](3).activeItem(e)}),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=t.$implicit,o=t.index,r=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](1),v["\u0275\u0275classMap"](r.isActiveItem==o?"active-span":""),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",i.theme_title," ")}}function ne(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",13),v["\u0275\u0275template"](1,te,3,3,"ng-container",14),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",n.classifyArr)}}function ie(e,t){1&e&&v["\u0275\u0275element"](0,"expert-map-content")}function oe(e,t){if(1&e&&v["\u0275\u0275element"](0,"app-lecture-hall",16),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275property"]("classifyType",n.classifyArr[n.isActiveItem])("pageId",n.pageId)}}function re(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",1),v["\u0275\u0275elementStart"](1,"div",2),v["\u0275\u0275element"](2,"img",3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"div",4),v["\u0275\u0275template"](4,ee,6,7,"div",5),v["\u0275\u0275template"](5,ne,2,1,"div",6),v["\u0275\u0275template"](6,ie,1,0,"expert-map-content",7),v["\u0275\u0275template"](7,oe,1,2,"app-lecture-hall",8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("src",n.imgUrl,v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf","PAGE2022030100052"===n.pageId),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf","PAGE2022030100052"===n.pageId),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf","PAGE2022030100053"===n.pageId),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf","PAGE2022030100052"===n.pageId)}}var ae=function(){function e(e,t,n){this.activeRoute=e,this.knowledgeService=t,this.translate=n,this.isActiveItem=0}return e.prototype.ngOnInit=function(){var e=this;this.customStyle={top:"44px",left:"0px",width:"300px"},this.inputStyle={width:"300px",height:"40px","border-radius":"20px",border:"1px solid #fff",filter:"drop-shadow(rgba(0, 0, 0, 0.1) 0px 4px 8px)",opacity:"0.95"},this.activeRoute.paramMap.subscribe(function(t){e.pageId=t.get("sn"),e.selectCategory=Number(t.get("categoryId")),e.isActiveItem=0,e.knowledgeService.getTrustedDesignPage([e.pageId]).subscribe(function(t){t&&t.length&&(e.trustedDesignInfo=t[0],e.trustedDesignInfo.theme_view_categories.length&&e.trustedDesignInfo.theme_view_categories.unshift({theme_title:e.translate.instant("ALL"),id:0}),e.classifyArr="PAGE2022030100052"==e.pageId?e.trustedDesignInfo.theme_view_categories:[],e.imgUrl=e.trustedDesignInfo.banner_image)},function(){})})},e.prototype.activeItem=function(e){this.isActiveItem=e},e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](o.a),v["\u0275\u0275directiveInject"](C.b),v["\u0275\u0275directiveInject"](a.c))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-secondary-page"]],decls:1,vars:1,consts:[["class","full-width ov-a secondary-page",4,"ngIf"],[1,"full-width","ov-a","secondary-page"],[1,"img-wrapper"],[3,"src"],[1,"content-wrapper"],["class","classification-title",4,"ngIf"],["class","classification-wrapper",4,"ngIf"],[4,"ngIf"],[3,"classifyType","pageId",4,"ngIf"],[1,"classification-title"],[1,"title-desc"],[1,"search-input-wrapper"],[3,"customStyle","inputStyle","kanbanId","pageForm"],[1,"classification-wrapper"],[4,"ngFor","ngForOf"],[1,"class-item","cursor-pointer",3,"click"],[3,"classifyType","pageId"]],template:function(e,t){1&e&&v["\u0275\u0275template"](0,re,8,5,"div",0),2&e&&v["\u0275\u0275property"]("ngIf",t.imgUrl)},directives:[i.n,P.a,i.m,G,Z],pipes:[a.b],styles:[".img-wrapper[_ngcontent-%COMP%]{width:100%;height:135px;overflow:hidden}.img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.content-wrapper[_ngcontent-%COMP%]{width:100%;padding:0 15% 40px}.content-wrapper[_ngcontent-%COMP%]   .classification-title[_ngcontent-%COMP%]{padding:0 12px;height:68px;align-items:center;justify-content:space-between;display:flex}.content-wrapper[_ngcontent-%COMP%]   .classification-title[_ngcontent-%COMP%]   .title-desc[_ngcontent-%COMP%]{color:#494949;font-size:20px;font-weight:700}.content-wrapper[_ngcontent-%COMP%]   .classification-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;justify-content:flex-start;border-bottom:1px solid #eaeaea}.content-wrapper[_ngcontent-%COMP%]   .classification-wrapper[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]{padding:7px 12px;border-radius:4px;color:#494949;font-size:16px;margin-bottom:4px;margin-right:16px}.content-wrapper[_ngcontent-%COMP%]   .classification-wrapper[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]:hover{background-color:#f1f4f6}.content-wrapper[_ngcontent-%COMP%]   .classification-wrapper[_ngcontent-%COMP%]   .active-span[_ngcontent-%COMP%]{background:rgba(35,198,200,.1);color:#23c6c8;font-weight:700}.content-wrapper[_ngcontent-%COMP%]   .classification-wrapper[_ngcontent-%COMP%]   .active-span[_ngcontent-%COMP%]:hover{background:rgba(35,198,200,.1)}.secondary-page[_ngcontent-%COMP%]{height:100%}.secondary-page[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.secondary-page[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;background-color:#aaa}.secondary-page[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}"]}),e}(),ce=n("tiOB");function le(e,t){1&e&&v["\u0275\u0275element"](0,"app-secondary-page")}function se(e,t){1&e&&v["\u0275\u0275element"](0,"main-content")}var de=function(){function e(e){this.activeRoute=e}return e.prototype.ngOnInit=function(){var e=this;this.activeRoute.paramMap.subscribe(function(t){e.sn=t.get("sn")})},e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-page-detail"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mainPage",""]],template:function(e,t){if(1&e&&(v["\u0275\u0275template"](0,le,1,0,"app-secondary-page",0),v["\u0275\u0275template"](1,se,1,0,"ng-template",null,1,v["\u0275\u0275templateRefExtractor"])),2&e){var n=v["\u0275\u0275reference"](2);v["\u0275\u0275property"]("ngIf",t.sn.startsWith("PAGE"))("ngIfElse",n)}},directives:[i.n,ae,ce.a],styles:[""]}),e}(),pe=n("KmK3"),ue=function(){function e(e){Object(s.a)(e)}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275inject"](a.c))},e.\u0275mod=v["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[i.c,d.a,a.a,c.b,l.a,p.a,E.b,r.g,M.a,pe.a,o.i.forChild([{path:"",component:O,children:[{path:"",loadChildren:function(){return Promise.all([n.e(16),n.e(4),n.e(18)]).then(n.bind(null,"Eg1e")).then(function(e){return e.CategoryDetialModule})}},{path:":sn",component:de,children:[{path:"workitem/:workitemNumber",component:S.a}]}]}])]]}),e}()},Z9Gr:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("ofXK"),o=n("sYmb"),r=n("3Pt+"),a=n("cAPe"),c=n("+jTH"),l=n("fXoL"),s=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[i.c,o.a,r.g,a.a,c.a]]}),e}()},ZV1T:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL"),o=n("jhN1"),r=function(){function e(e){this.sanitizer=e}return e.prototype.transform=function(e){return this.sanitizer.bypassSecurityTrustHtml(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.b))},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"to_trusted",type:e,pure:!0}),e}()},ZVgC:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("fXoL");function o(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",8),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](", ",n.workitem.owners[0].name,"")}}function r(e,t){if(1&e&&i["\u0275\u0275element"](0,"create-change",11),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("workitem",n.workitem)}}function a(e,t){if(1&e&&i["\u0275\u0275element"](0,"link-change",11),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("workitem",n.workitem)}}var c=function(e){return{color:e}},l=function(){function e(){}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["change-modal"]],inputs:{workitem:"workitem",category:"category"},decls:20,vars:21,consts:[[1,"change-wrapper"],[1,"item-info"],[1,"m-b-5"],[1,"flex-box","flex-a-c"],[1,"flex-1","text-omit"],[1,"m-r-5",3,"ngStyle","title"],[1,"f-bold","f-15"],[1,"addition-info"],[1,"m-l-3"],["class","m-l-3",4,"ngIf"],[3,"workitem",4,"ngIf"],[3,"workitem"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"div",4),i["\u0275\u0275elementStart"](7,"i",5),i["\u0275\u0275pipe"](8,"iconMap"),i["\u0275\u0275pipe"](9,"colorMap"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"span",6),i["\u0275\u0275text"](11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",7),i["\u0275\u0275elementStart"](13,"span"),i["\u0275\u0275text"](14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"span",8),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,o,2,1,"span",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](18,r,1,1,"create-change",10),i["\u0275\u0275template"](19,a,1,1,"link-change",10),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,11,"ADDING_CHANGES_TO_FOLLOWING_WORKS")),i["\u0275\u0275advance"](4),i["\u0275\u0275classMap"](i["\u0275\u0275pipeBind2"](8,13,t.workitem.category,"workitem_category")),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](19,c,i["\u0275\u0275pipeBind2"](9,16,t.workitem.category,"workitem_category")))("title",t.workitem.category),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](t.workitem.title),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("#",t.workitem.number,""),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](", \u25cf ",t.workitem.status,""),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",0!=t.workitem.owners.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","create-change"===t.category),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","relate-change"===t.category))},styles:[".change-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:10px 15px;margin:3px;font-size:14px;color:#666}.change-wrapper[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{margin-top:3px;padding:0}.change-wrapper[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .addition-info[_ngcontent-%COMP%]{color:#999;font-size:12px}.change-wrapper[_ngcontent-%COMP%]   .change-operate[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:5px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:4px}"]}),e}()},ZXE5:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var i=n("fXoL"),o=n("6eBy"),r=n("hbEN"),a=n("XNiG"),c=n("l5mm"),l=n("PqYM"),s=n("VRyK"),d=n("LRne"),p=n("xgIS"),u=n("y7eE"),m=n("A/Mn"),h=n("sYmb"),g=n("bNXi"),f=n("UJq8"),v=n("/Kk4"),b=n("cbLU"),C=n("3Pt+"),y=n("JXZa"),x=n("ofXK"),w=["richTextRemoterScroll"],_=function(e){return{width:e}},O=function(){function e(e,t,n,o,c){var l=this;this.knowledgeService=e,this.translate=t,this.notification=n,this.emitService=o,this.resizeObserver=c,this.model="create-template",this.articleTitle="",this.articleUiSource="rich-text",this.articleDescription="",this.templateEmitter=new i.EventEmitter,this.origin="template",this.getContentEventSubject=new a.a,this.articleOutlineArr=[],this.editContentScroll=!0,this.editScrollMarPadd=10,this.articlePaddingVal=90,this.mdOptions={hiddenButtons:["cmdPreview"],fullscreen:{enable:!1,icons:{}},autoGrowing:!0},this.getArticleOutlineDelay=Object(r.a)(function(){l.getArticleOutline("create-template",l.articleTitle)},1e4),this.richTextEditorId="create-template",this.richTextRemoterShow=!1,this.richTextRemoterInnerWidth=100,this.isImgLazyLoaded=!1,this.imgLoadedHanlder=Object(r.a)(function(e){l.isImgLazyLoaded=!0,l.getArticleOutline("create-template",l.articleTitle)},2e3),System.import("/shared-ui/knowledge-ui.ce.js")}return Object.defineProperty(e.prototype,"editorToolbarId",{get:function(){return this.richTextEditorId+"-toolbar"},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.emitService.eventEmit.subscribe(function(t){var n;if(t.origin===e.origin)if("outline-position"===t.type)e.positionActiveElement(t.data.titleId);else if(t&&"after-component-change-description"===t.type)if(e.isImgLazyLoaded){for(var i=null===(n=null==e?void 0:e.articleOutlineArr)||void 0===n?void 0:n.length,o=0;o<i;o++){var r=e.articleOutlineArr[o],a=null==t?void 0:t.arr[o];r.startTop=null==a?void 0:a.startTop,r.endTop=null==a?void 0:a.endTop}e.isImgLazyLoaded=!1}else e.articleOutlineArr=t.arr})},e.prototype.ngAfterViewInit=function(){this.initEditor()},e.prototype.beforeUpdateTemplate=function(){this.getContentEventSubject.next({clearCache:!0,eventType:"save-data"})},e.prototype.closeModal=function(){this.emitService.emit({type:"close-create-template"})},e.prototype.descriptionChange=function(e){if(this.setRemoter(e),"save-data"===e.eventType){if(this.articleDescription=e.description,this.articleUiSource=e.type,this.articleTitle=e.title?e.title:this.articleTitle,!this.articleDescription)return void this.notification.error(this.translate.instant("EMPTY_TEMPLATE_TITLE"),"");if(!this.articleTitle)return void this.notification.success(this.translate.instant("EMPTY_TEMPLATE_CONTENT"),"");"update-template"===this.model?this.updateTemplate():"create-template"===this.model&&this.createTemplate()}},e.prototype.getChangedEditorType=function(e){(null==e?void 0:e.type)&&(this.articleUiSource=e.type,"rich-text"===this.articleUiSource&&this.initEditor())},e.prototype.emitEvent=function(e){this.templateEmitter.emit(e)},e.prototype.createTemplate=function(){var e=this;this.knowledgeService.createWikiTemplate([{title:this.articleTitle,description:this.articleDescription,ui_source:"rich-text"===this.articleUiSource?1:2,assigned_domain:this.currentDomain?this.currentDomain:"",type:"team"}]).subscribe(function(t){0===t.success.length&&0!==t.failed.length?e.notification.success(e.translate.instant("CREATE_FAILED"),""):0!==t.success.length&&(e.notification.success(e.translate.instant("CREATE_SUCCESS"),""),e.emitService.emit({type:"create-template-success"}))},function(){})},e.prototype.updateTemplate=function(){var e=this;this.knowledgeService.updateWikiTemplate({number:this.number,title:this.articleTitle,description:this.articleDescription,ui_source:"rich-text"===this.articleUiSource?1:2}).subscribe(function(t){e.notification.success(e.translate.instant("UPDATE_SUCCESS"),""),e.emitService.emit({type:"update-template-success"})},function(){})},e.prototype.getArticleOutline=function(e,t){this.isImgLazyLoaded||(this.articleOutlineArr=[]),this.emitService.emit({type:"article-outline-get-outline-arr",data:{id:e,articleRealTitle:t,firstChildDom:document.getElementById("create-template").firstChild},origin:this.origin,isImgLazyLoaded:this.isImgLazyLoaded})},e.prototype.initEditor=function(){var e=this;if("rich-text"===this.articleUiSource)var t=Object(c.a)(100).pipe(Object(o.a)(function(e){return Object(l.a)(2*e)})).subscribe(function(n){var i=document.getElementById("template-scroll-body");i&&(i.removeEventListener("scroll",null),i.addEventListener("scroll",e.articleEditScrollFunc.bind(e)),t.unsubscribe())})},e.prototype.articleEditScrollFunc=function(){this.editContentScroll&&this.articleScroll()},e.prototype.articleScroll=function(){var e=this.articleOutlineArr.length;this.articleOutlineArr&&e>0&&document.getElementById("create-template")&&this.findFinishedDom(this.articleOutlineArr[e-1].titleId)},e.prototype.positionActiveElement=function(e){var t=this;this.editContentScroll=!1;var n=document.getElementById("template-scroll-body"),i=document.getElementById("create-template"),o=i.firstChild.getBoundingClientRect(),r=i.lastChild,a=r&&r.getBoundingClientRect(),c=document.getElementById(e).getBoundingClientRect(),l=n.getBoundingClientRect(),s=Math.abs(c.top-o.top)+10,d=a.bottom-o.top-l.height+20;s>d&&(s=d),n.scrollTop=s+this.articlePaddingVal,setTimeout(function(){t.editContentScroll=!0})},e.prototype.findFinishedDom=function(e){if(document.getElementById(e))for(var t=document.getElementById("template-scroll-body").scrollTop-this.articlePaddingVal,n=JSON.parse(localStorage.getItem("outlineActiveTitle")),i=0;i<this.articleOutlineArr.length;i++){var o=this.articleOutlineArr[i];if(o.startTop<t&&t<o.endTop){if(n&&n.titleId!==o.titleId||!n){Object(u.c)("outlineActiveTitle",JSON.stringify(o));var r={type:"scroll-active-outline-title",data:o};this.scrollTitleId=r.data.titleId,this.emitService.emit(r)}return}}},e.prototype.getElementTopVal=function(e,t){var n,i=document.getElementById(e),o=i&&i.getBoundingClientRect();return o&&t&&(n=Math.abs(o.top-t.top)),n},e.prototype.ngOnDestroy=function(){document.getElementById("template-scroll-body").removeEventListener("scroll",null)},e.prototype.onRemoterScroll=function(){var e=this.richTextRemoterScroll.nativeElement,t=this.richTextWrapper;t.scrollLeft=e.scrollLeft/(e.scrollWidth-e.clientWidth)*(t.scrollWidth-t.clientWidth)},e.prototype.setRemoter=function(e){var t=this;if("rich-text"===e.type){var n=document.querySelector("#"+this.richTextEditorId+".doc-cnt"),i=n.scrollWidth>n.clientWidth;this.richTextRemoterShow=i,this.richTextWrapper=n,i&&(this.wrapperScrollSubscription&&this.wrapperScrollSubscription.unsubscribe(),this.wrapperScrollSubscription=Object(s.a)(Object(d.a)(),this.resizeObserver.observe(n),Object(p.a)(window,"resize")).subscribe(function(){t.richTextRemoterInnerWidth=n.scrollWidth,t.richTextRemoterScroll.nativeElement.scrollLeft=n.scrollLeft}))}else this.richTextRemoterShow=!1},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](m.b),i["\u0275\u0275directiveInject"](h.c),i["\u0275\u0275directiveInject"](g.b),i["\u0275\u0275directiveInject"](f.a),i["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-create-template"]],viewQuery:function(e,t){var n;1&e&&i["\u0275\u0275viewQuery"](w,1),2&e&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.richTextRemoterScroll=n.first)},inputs:{model:"model",articleTitle:"articleTitle",articleUiSource:"articleUiSource",articleDescription:"articleDescription",number:"number",currentDomain:"currentDomain"},outputs:{templateEmitter:"templateEmitter"},decls:29,vars:19,consts:[[1,"create-article-wrapper"],[1,"header-shadow"],[1,"toolbar",3,"id"],[1,"article-wrapper","active-full-screen"],[1,"create-article-header","flex-j-sb"],[1,"title","position-r",3,"textContent"],[1,"other-span-container"],[1,"cursor-pointer","create-to",3,"click"],[1,"iconfont","icon-save","cursor-pointer",2,"margin-right","0"],[3,"textContent"],[1,"iconfont","icon-close","cursor-pointer","f-20",3,"click"],[1,"content","flex","flex-j-sb","m-t-20"],[1,"left"],["id","scrollParentOutline",1,"article-outline-wrap","slimScrollBar"],["id","topPositionOutline",1,"top-position-styl"],[3,"origin"],["id","bottomPositionOutline",1,"top-position-styl"],[1,"center"],[1,"create-template-box","full-height"],[1,"create-article-body","full-height","position-r"],["id","template-scroll-body",1,"slimScrollBar","scroll-body","full-width","full-height"],["type","text","placeholder","\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898...",1,"article-title","p-l-20","p-r-20","t-a-l",3,"ngModel","ngModelChange"],[1,"create-template-container",3,"toolbarContailerSelector","richTextId","type","description","getContentEvent","markdownOptions","visionOnEditorChanged","getEditorContent","imgLoaded"],[1,"remote-scroll","slimScrollBar",3,"hidden","scroll"],["richTextRemoterScroll",""],[1,"remote-scroll-inner",3,"ngStyle"],[1,"right"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275element"](2,"div",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275element"](5,"div",5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275elementStart"](8,"span",7),i["\u0275\u0275listener"]("click",function(){return t.beforeUpdateTemplate()}),i["\u0275\u0275element"](9,"span",8),i["\u0275\u0275element"](10,"span",9),i["\u0275\u0275pipe"](11,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"span",10),i["\u0275\u0275listener"]("click",function(){return t.closeModal()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",11),i["\u0275\u0275elementStart"](14,"div",12),i["\u0275\u0275elementStart"](15,"div",13),i["\u0275\u0275element"](16,"div",14),i["\u0275\u0275element"](17,"article-outline",15),i["\u0275\u0275element"](18,"div",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"div",17),i["\u0275\u0275elementStart"](20,"div",18),i["\u0275\u0275elementStart"](21,"div",19),i["\u0275\u0275elementStart"](22,"div",20),i["\u0275\u0275elementStart"](23,"input",21),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.articleTitle=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"vision-editor",22),i["\u0275\u0275listener"]("visionOnEditorChanged",function(e){return t.getArticleOutlineDelay(),t.getChangedEditorType(e)})("getEditorContent",function(e){return t.descriptionChange(e)})("imgLoaded",function(e){return t.imgLoadedHanlder(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"div",23,24),i["\u0275\u0275listener"]("scroll",function(){return t.onRemoterScroll()}),i["\u0275\u0275element"](27,"div",25),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](28,"div",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("id",t.editorToolbarId),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](6,13,"update-template"==t.model?"UPDATE_TEMPLATE":"CREATE_NEW_TEMPLATE")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](11,15,"COMMON_BTN_SAVE")),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("origin",t.origin),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",t.articleTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("toolbarContailerSelector","#"+t.editorToolbarId)("richTextId",t.richTextEditorId)("type",t.articleUiSource)("description",t.articleDescription)("getContentEvent",t.getContentEventSubject.asObservable())("markdownOptions",t.mdOptions),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hidden",!t.richTextRemoterShow),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](17,_,t.richTextRemoterInnerWidth+"px")))},directives:[b.a,C.d,C.k,C.l,y.a,x.o],pipes:[h.b],styles:[".create-article-wrapper[_ngcontent-%COMP%]{z-index:99;position:fixed;top:0;right:0;bottom:0;width:100%;background:#f9f9f9;overflow:auto}.create-article-wrapper[_ngcontent-%COMP%]   .active-full-screen[_ngcontent-%COMP%]{width:100%!important;height:100%;top:0;margin-top:0!important}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]{position:absolute;height:50px;background:#fff;width:100%;box-shadow:0 4px 6px rgba(0,0,0,.04);display:flex;justify-content:center;align-items:center}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]    {z-index:1;flex:0 1 60%}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header{display:flex;align-items:center}.create-article-wrapper[_ngcontent-%COMP%]   .header-shadow[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]     .md-header .md-controls{width:30px;text-align:center}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]{width:1150px;background:#f9f9f9;padding:0 15px;margin:50px auto auto}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]{color:#676a6c;display:flex;align-items:center;height:50px}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-style:normal;font-size:16px;color:#676a6c}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]   .header-new[_ngcontent-%COMP%]{flex:1}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]   .other-span-container[_ngcontent-%COMP%]{position:relative}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]   .other-span-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px;vertical-align:middle}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-article-header[_ngcontent-%COMP%]   .other-span-container[_ngcontent-%COMP%]   .create-to[_ngcontent-%COMP%]{padding:4px;background-color:#23c6c8f8;color:#fff;border-radius:4px;display:inline-flex;align-items:center}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]{margin:auto}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;margin:10px 0 0;height:70px;outline:none;font-weight:700;font-style:normal;font-size:26px;color:#23c6c8}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   .scroll-body[_ngcontent-%COMP%]{margin:auto;height:100%;overflow-y:auto;box-shadow:0 0 8px rgba(0,0,0,.02);background:#fff}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   .input-shadow[_ngcontent-%COMP%]{background:#fff;box-shadow:0 -2px 4px 0 rgba(0,0,0,.04)}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#00000099;font-size:16px}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc;font-size:12px;margin:5px 0}.create-article-wrapper[_ngcontent-%COMP%]   .article-wrapper[_ngcontent-%COMP%]   .create-template-box[_ngcontent-%COMP%]   .create-article-body[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]   .pull-right[_ngcontent-%COMP%]{float:right}.content[_ngcontent-%COMP%]{height:calc(100% - 70px)}.content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{flex:1;overflow:hidden}.content[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{width:60%}.content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]     .create-template-box .MD-and-richtext-editor{border-top:1px solid #ddd}[_nghost-%COMP%]     .create-template-box .box{background:#fff;box-shadow:0 0 6px rgba(0,0,0,.04)}[_nghost-%COMP%]     .create-template-box .tag-list .ant-dropdown-link{margin-left:0!important}.create-template-box[_ngcontent-%COMP%]   .remote-scroll[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;overflow:scroll hidden}.create-template-box[_ngcontent-%COMP%]   .remote-scroll[_ngcontent-%COMP%]   .remote-scroll-inner[_ngcontent-%COMP%]{width:150%;height:1px}"]}),e}()},ZfuR:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("ofXK"),o=n("3Pt+"),r=n("sYmb"),a=n("qAZ0"),c=n("FwiY"),l=n("PTRe"),s=n("OzZK"),d=n("mOC4"),p=n("fXoL"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[i.c,o.g,d.a,a.b,c.b,l.e,s.c,r.a.forRoot()]]}),e}()},ZncU:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("fXoL"),o=n("ofXK"),r=n("qAZ0"),a=n("FwiY");function c(e,t){1&e&&i["\u0275\u0275element"](0,"i",4)}function l(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275element"](1,"nz-spin",2),i["\u0275\u0275template"](2,c,1,0,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](3),o=i["\u0275\u0275nextContext"]();i["\u0275\u0275styleProp"]("z-index",o.zIndex),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzIndicator",n)}}var s=function(){function e(){this.zIndex=999}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["workitem-loading-modal"]],inputs:{isLoaded:"isLoaded",zIndex:"zIndex"},decls:1,vars:1,consts:[["class","loading-wrapper",3,"z-index",4,"ngIf"],[1,"loading-wrapper"],["nzSimple","",3,"nzIndicator"],["indicatorTemplate",""],["nz-icon","","nzType","loading",2,"font-size","24px"]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,l,4,3,"div",0),2&e&&i["\u0275\u0275property"]("ngIf",!t.isLoaded)},directives:[o.n,r.a,a.a],styles:[".loading-wrapper[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;right:0;background:hsla(0,0%,100%,.7)}.loading-wrapper[_ngcontent-%COMP%]   nz-spin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"]}),e}()},aDQL:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var i=n("jifJ"),o=n("AytR");function r(){var e;return window.communicationService.socket||(e=Object(i.io)(o.a.socketUIHost,{path:"/socket-ui",transports:["websocket"],reconnectionAttempts:10,reconnectionDelayMax:1e4}),window.communicationService.socket=e),window.communicationService.socket}function a(e,t){return r().on(e,t),{off:function(){r().off(e,t)}}}},ayLg:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){}return e.prototype.transform=function(e){return"zh"===(localStorage.getItem("NG_TRANSLATE_LANG_KEY")||"zh")?(null==e?void 0:e.name)+" "+(null==e?void 0:e.account):null==e?void 0:e.name_full},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"userInfo",type:e,pure:!0}),e}()},bBxm:function(e,t,n){"use strict";function i(e){var t=localStorage.getItem("NG_TRANSLATE_LANG_KEY")||"zh";e.use(t);var i=n("nOq7")("./"+t+".json");e.setTranslation(t,i,!0)}n.d(t,"a",function(){return i})},bWbh:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("ofXK"),o=n("nJia"),r=n("sYmb"),a=n("fXoL"),c=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[i.c,o.b,r.a]]}),e}()},cAPe:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("ofXK"),o=n("3Pt+"),r=n("dEAy"),a=n("nxWG"),c=n("PTRe"),l=n("FwiY"),s=(n("1Eq8"),n("+2qM"),n("fXoL")),d=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[{provide:"config",useValue:t}]}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[i.c]]}),e}(),p=n("sYmb"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[i.c,p.a]]}),e}(),m=n("Fpfz"),h=n("iw3d"),g=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[i.c,p.a,o.g,p.a]]}),e}(),f=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({providers:[m.a,p.c],imports:[[i.c,o.g,d.forRoot({iconlibrary:"glyph"}),u,r.b,p.a.forChild(),a.b,c.e,l.b,h.a,g]]}),e}()},cbLU:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("mrSG"),o=n("vRWp"),r=n("y7eE"),a=n("fXoL"),c=n("UJq8"),l=n("tyNb"),s=n("e49q"),d=n("ofXK"),p=function(e){return{"padding-left":e}};function u(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"li",3),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"](2).positionTitle(e)}),a["\u0275\u0275elementStart"](1,"div",4),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=a["\u0275\u0275nextContext"](2);a["\u0275\u0275classProp"]("active-li-styl",i.titleId==o.scrollTitleId)("title-no-li-dot","wikiArticleTitleId"==i.titleId)("active-li-border",!o.needBorder),a["\u0275\u0275property"]("id",i.outlineTitleId)("ngStyle",a["\u0275\u0275pureFunction1"](12,p,12*i.indentationLevel+"px"))("title",i.realTitle),a["\u0275\u0275advance"](1),a["\u0275\u0275classProp"]("outline-li-title-styl",!i.indentationLevel),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](i.realTitle)}}function m(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"ul",1),a["\u0275\u0275template"](2,u,3,14,"li",2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275classProp"]("article-wrapper",n.needBorder),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.isEdit?n.articleOutlineList:n.articleOutlineArr)}}var h=function(){function e(e,t,n){this.emitService=e,this.activeRoute=t,this.globalVariablesService=n,this.desLevel=0,this.origin="",this.needBorder=!1,this.isEdit=!1,this.articleOutlineArr=[],this.articleIdArr=[],this.scrollTitleId="wikiArticleTitleId",this.tagList=["H1","H2","H3","H4","H5","H6"],this.articleOutlineList=[]}return e.prototype.ngOnInit=function(){var e=this,t=this.activeRoute.snapshot.queryParamMap.get("title");t&&(this.scrollTitleId=t),this.emitServiceSub=this.emitService.eventEmit.subscribe(function(t){var n,i;t&&"scroll-active-outline-title"==t.type?e.scrollTitleId=t.data.titleId:t&&"article-outline-get-outline-arr"==t.type&&t.origin===e.origin&&(e.awaitToChangeDesc=t.data,e.isImgLazyLoaded=t.isImgLazyLoaded,e.isImgLazyLoaded?e.imgLoadedPositionVal():e.replaceStrCreateObj()),t&&(null===(n=t.type)||void 0===n?void 0:n.includes("markdown-mode"))&&(e.scrollTitleId=null===(i=e.articleOutlineArr[0])||void 0===i?void 0:i.titleId)})},e.prototype.imgLoadedPositionVal=function(){var e=this;this.articleOutlineArr.forEach(function(t,n){var i=document.getElementById(t.titleId),o=e.getElementTopVal(i);n&&(e.articleOutlineArr[n-1].endTop=o),e.articleOutlineArr[n].startTop=o}),this.emitService.emit({arr:this.articleOutlineArr,type:"after-component-change-description",origin:this.origin})},e.prototype.positionTitle=function(e){this.scrollTitleId=e.titleId,this.emitService.emit({type:"outline-position",data:e,origin:this.origin})},e.prototype.positionActiveElement=function(e){this.parent||(this.parent=document.getElementById("scrollParentOutline")),this.topElementDom||(this.topElementDom=document.getElementById("topPositionOutline"));var t=this.topElementDom&&this.topElementDom.getBoundingClientRect();this.element||(this.element=document.getElementById("bottomPositionOutline"));var n=this.element&&this.element.getBoundingClientRect(),i=document.getElementById(e),o=i&&i.getBoundingClientRect(),r=(this.parent&&this.parent.getBoundingClientRect()).height,a=n.top-t.top-r+30,c=Math.abs(o.top-t.top)-r/2;Math.abs(o.top-t.top)<=r/2&&(c=0),Math.abs(o.top-n.top)<=r/2&&(c=a),c>a&&(c=a),this.parent.scrollTop=c},e.prototype.DepthTraversalCallback=function(e,t){var n=this;setTimeout(function(){var o;if(e&&t){var r=document.getElementById(t);(null===(o=null==r?void 0:r.childNodes)||void 0===o?void 0:o.length)&&n.DepthTraversal(r,t),n.articleOutlineList=Object(i.i)(n.articleOutlineArr),n.emitService.emit({arr:n.articleOutlineArr,type:"after-component-change-description",origin:n.origin})}},100)},e.prototype.DepthTraversal=function(e,t){if(e){if(this.tagList.includes(e.tagName)&&""!=e.innerText.trim()){var n={realTitle:"",labelTitle:"",indentationLevel:0,titleId:"",outlineTitleId:"",tagLabel:"",startTop:0,endTop:0};if(e.getAttribute("id"))n.realTitle="vditorReset"===t?e.innerText.replace(/#/g,""):e.innerText,n.tagLabel=e.tagName.substring(1,2),e.className.includes("max-level")||(n.tagLabel=String(Number(n.tagLabel)+this.desLevel)),n.titleId=e.getAttribute("id"),(this.articleIdArr.includes(n.titleId)||["vditorScrollParent","vditorReset","previewNewMD"].includes(t))&&(i=this.createUUID(),n.titleId=String(i),e.setAttribute("id","vditorReset"===t?"ir_"+i:i)),n.labelTitle=e.innerHTML,n.outlineTitleId="outline"+n.titleId,o=this.getElementTopVal(e),(a=this.articleOutlineArr.length)&&(this.articleOutlineArr[a-1].endTop=o),n.startTop=o,this.articleOutlineArr.push(n),this.articleIdArr.push(n.titleId),n.indentationLevel=Number(n.tagLabel)+1;else{var i=this.createUUID();e.setAttribute("id",i),n.realTitle=e.innerText,n.labelTitle=e.innerHTML,n.tagLabel=e.tagName.substring(1,2),e.className.includes("max-level")||(n.tagLabel=String(Number(n.tagLabel)+this.desLevel)),n.titleId=String(i),n.outlineTitleId="outline"+i;var o=this.getElementTopVal(e);(a=this.articleOutlineArr.length)&&(this.articleOutlineArr[a-1].endTop=o),n.startTop=o,this.articleOutlineArr.push(n),this.articleIdArr.push(n.titleId),n.indentationLevel=Number(n.tagLabel)+1}}if(e.childNodes&&e.childNodes.length)for(var r=0,a=e.childNodes.length;r<a;r++)this.DepthTraversal(e.childNodes[r],t)}},e.prototype.getElementTopVal=function(e){var t,n=this.awaitToChangeDesc.firstChildDom,i=n&&n.getBoundingClientRect(),o=e&&e.getBoundingClientRect();return o&&i&&(t=Math.abs(o.top-i.top)),t},e.prototype.replaceStrCreateObj=function(){this.articleRealTitle=this.awaitToChangeDesc.articleRealTitle,this.articleOutlineArr=[],this.articleIdArr=[],this.articleOutlineArr.unshift({realTitle:this.articleRealTitle,labelTitle:"",indentationLevel:0,titleId:"wikiArticleTitleId",outlineTitleId:"outlinewikiArticleTitleId",tagLabel:"0",startTop:0,endTop:0}),this.queryDomObservable&&this.queryDomObservable.unsubscribe(),this.queryDomObservable=Object(r.b)(this.awaitToChangeDesc.id,this.DepthTraversalCallback.bind(this))},e.prototype.getRandomNum=function(){return(65536*(1+Object(o.a)())|0).toString(16).substring(1)},e.prototype.createUUID=function(){return this.getRandomNum()+this.getRandomNum()+"-"+this.getRandomNum()+"-"+this.getRandomNum()+"-"+this.getRandomNum()+"-"+this.getRandomNum()+this.getRandomNum()+this.getRandomNum()},e.prototype.ngOnDestroy=function(){this.emitServiceSub.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["article-outline"]],inputs:{desLevel:"desLevel",origin:"origin",needBorder:"needBorder",isEdit:"isEdit"},decls:1,vars:1,consts:[[3,"article-wrapper",4,"ngIf"],[1,"outline-ul-styl"],["class","outline-li-styl",3,"id","ngStyle","active-li-styl","title-no-li-dot","active-li-border","title","click",4,"ngFor","ngForOf"],[1,"outline-li-styl",3,"id","ngStyle","title","click"],[1,"overfolw-eclipis","outline-li-content-styl"]],template:function(e,t){1&e&&a["\u0275\u0275template"](0,m,3,3,"div",0),2&e&&a["\u0275\u0275property"]("ngIf",t.isEdit?t.articleOutlineList.length:t.articleOutlineArr.length)},directives:[d.n,d.m,d.o],styles:['.outline-ul-styl[_ngcontent-%COMP%]{padding:0}.outline-ul-styl[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]{font-weight:700;border-left:2px solid #23c6c8;margin-left:-2px!important;position:relative;z-index:2}.outline-ul-styl[_ngcontent-%COMP%]   .active-li-border[_ngcontent-%COMP%]{border:0}.outline-ul-styl[_ngcontent-%COMP%]   .active-li-styl[_ngcontent-%COMP%]:before{background:#23c6c8!important}.outline-ul-styl[_ngcontent-%COMP%]   .outline-li-content-styl[_ngcontent-%COMP%]{width:100%;padding-left:10px}.outline-ul-styl[_ngcontent-%COMP%]   .outline-li-title-styl[_ngcontent-%COMP%]{width:82%}.outline-ul-styl[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%], .outline-ul-styl[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]{list-style:none;cursor:pointer;height:26px;color:#686868;font-size:14px;position:relative}.outline-ul-styl[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%]:before{width:4px;height:4px;border-radius:50%;position:absolute;background:#999;content:"";top:10px}.outline-ul-styl[_ngcontent-%COMP%]   .outline-li-styl[_ngcontent-%COMP%]:hover{font-weight:700}.outline-ul-styl[_ngcontent-%COMP%]   .title-no-li-dot[_ngcontent-%COMP%]:before{background:#fff!important}.overfolw-eclipis[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.article-wrapper[_ngcontent-%COMP%]{border-left:2px solid #ddd}']}),e}()},chJY:function(e,t,n){"use strict";n.d(t,"a",function(){return wt});var i=n("mrSG"),o=n("XNiG"),r=n("Cfvw"),a=n("LRne"),c=n("fXoL"),l=n("eIep"),s=n("1G5W"),d=n("vkgz"),p=n("Kj3r"),u=n("pLZG"),m=n("AA4e"),h=n("eJlN"),g=n("PScX"),f=n("sYmb"),v=n("UJq8"),b=n("ofXK"),C=n("nJia"),y=n("KupA"),x=n("4P1S");function w(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",11),c["\u0275\u0275element"](1,"i",12),c["\u0275\u0275elementStart"](2,"span"),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](n.domainSelectorService.domainTitle(n.cloudInfo))}}var _=function(){function e(e,t){this.domainSelectorService=e,this.emitService=t,this.confirmVisiable=!1}return Object.defineProperty(e.prototype,"selected",{get:function(){return Boolean(this.domainSelectorService.selectDomainIdMap["Cloud_Service"===this.item.domain_type?this.cloudInfo.id:this.item.domain_id])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDisable",{get:function(){var e=this.item,t="Cloud_Service"===e.domain_type?e.product_info.related_domain:Object(i.a)(Object(i.a)({},e),{id:e.domain_id});return{disabled:this.domainSelectorService.domainDisabled(t),tooltip:this.domainSelectorService.disabledToolTip(t)}},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.item;if("Cloud_Service"===e.domain_type){var t=e.product_info.related_domain;this.title=e.product_info.title,this.owner=e.product_info.owner,this.sponsor=e.product_info.sponsor,this.cloudInfo=t}else this.title=this.domainSelectorService.domainTitle(e),this.owner=e.owner,this.sponsor=e.sponsor},e.prototype.onFavouriteRemove=function(){this.domainSelectorService.removeFavourite(this.item.id)},e.prototype.onSelected=function(){this.isDisable.disabled||(this.emitService.emit({event:"selectDomian:success"}),this.domainSelectorService.onFavouriteSelected(this.item))},e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["favourite-item"]],inputs:{item:"item"},decls:17,vars:19,consts:[[1,"item","border-ra-3"],[1,"radio-area"],[1,"iconfont",3,"ngClass","click"],["nz-tooltip","",1,"info-area",3,"ngClass","nzTooltipTitle","click"],[1,"title",3,"ngClass"],[1,"owner","txt-999","f-12"],[1,"iconfont","icon-owner","f-14"],["class","cloud txt-999 f-12",4,"ngIf"],["nz-popconfirm","",1,"remove","cursor-pointer",3,"ngClass","nzPopconfirmTitle","nzPopconfirmOrigin","nzPopconfirmTrigger","nzPopconfirmVisible","nzOnConfirm"],[1,"iconfont","icon-delete"],["deleteIcon",""],[1,"cloud","txt-999","f-12"],[1,"iconfont","icon-team","f-14"]],template:function(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"i",2),c["\u0275\u0275listener"]("click",function(){return t.onSelected()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275listener"]("click",function(){return t.onSelected()}),c["\u0275\u0275pipe"](4,"translate"),c["\u0275\u0275elementStart"](5,"div",4),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",5),c["\u0275\u0275element"](8,"i",6),c["\u0275\u0275elementStart"](9,"span"),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"workitemAttr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](12,w,4,1,"div",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",8),c["\u0275\u0275listener"]("nzOnConfirm",function(){return t.onFavouriteRemove()}),c["\u0275\u0275pipe"](14,"translate"),c["\u0275\u0275element"](15,"i",9,10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275reference"](16);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass",t.selected?"icon-choose-end checked":"icon-nochoice"),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",t.isDisable.disabled?"cursor-disabled":"cursor-pointer")("nzTooltipTitle",c["\u0275\u0275pipeBind1"](4,12,t.isDisable.tooltip)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass",t.isDisable.disabled?"disabled":""),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](t.title),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](11,14,t.sponsor||t.owner,"person")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.cloudInfo),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",t.confirmVisiable?"no-hidden":"")("nzPopconfirmTitle",c["\u0275\u0275pipeBind1"](14,17,"ARE_YOU_SURE_DELETE"))("nzPopconfirmOrigin",n)("nzPopconfirmTrigger","click")("nzPopconfirmVisible",t.confirmVisiable)}},directives:[b.l,C.d,b.n,y.a],pipes:[f.b,x.a],styles:[".item[_ngcontent-%COMP%]{padding:4px 0 4px 4px;margin-right:4px;display:flex}.item[_ngcontent-%COMP%]:hover{background-color:#f2f2f2;transition:all .2s}.item[_ngcontent-%COMP%]:hover   .remove[_ngcontent-%COMP%]{visibility:visible}.item[_ngcontent-%COMP%]   .radio-area[_ngcontent-%COMP%]{flex:0 0 32px;display:flex;align-items:center}.item[_ngcontent-%COMP%]   .radio-area[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{font-size:14px}.item[_ngcontent-%COMP%]   .radio-area[_ngcontent-%COMP%]   .iconfont.checked[_ngcontent-%COMP%]{color:#23c6c8}.item[_ngcontent-%COMP%]   .info-area[_ngcontent-%COMP%]{flex:1 1 auto}.item[_ngcontent-%COMP%]   .info-area[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px}.item[_ngcontent-%COMP%]   .info-area[_ngcontent-%COMP%]   .cloud[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]   .info-area[_ngcontent-%COMP%]   .owner[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{margin-right:8px}.item[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center;visibility:hidden}.item[_ngcontent-%COMP%]   .remove.no-hidden[_ngcontent-%COMP%]{visibility:visible}.item[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{font-size:14px}.item[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]:hover{color:#23c6c8}"]}),e}();function O(e,t){1&e&&c["\u0275\u0275element"](0,"favourite-item",6),2&e&&c["\u0275\u0275property"]("item",t.$implicit)}var S=function(){function e(e){this.domainSelectorService=e}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["favourite-card"]],decls:9,vars:4,consts:[[1,"title","f-14"],[1,"left"],[1,"iconfont","icon-star-outline"],[1,"right"],[1,"card-content","slimScrollBar"],[3,"item",4,"ngFor","ngForOf"],[3,"item"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275element"](2,"i",2),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](6,"div",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",4),c["\u0275\u0275template"](8,O,1,1,"favourite-item",5),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](5,2,"DOMAIN_SELECTOR_MY_FAVOURITES")),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngForOf",t.domainSelectorService.favourites))},directives:[b.m,_],pipes:[f.b],styles:["[_nghost-%COMP%]{height:100%;overflow:hidden;display:flex;flex-direction:column}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{flex:0 0 30px;line-height:36px;font-weight:700;padding:0 12px;display:flex;justify-content:space-between}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{margin-right:8px}[_nghost-%COMP%]   .card-content[_ngcontent-%COMP%]{margin:0 4px 0 12px;flex:1 1 auto;overflow:hidden auto}",""]}),e}(),E=n("1JWf"),M=n("3Pt+"),P=n("Nqz0"),I=n("oyxB"),k=n("OzZK"),T=n("RwU8"),D=n("C2AL"),A=n("QlLE"),z=n("AWuS"),R=n("Q8cG"),L=["nameInput"];function N(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"input",16,17),c["\u0275\u0275listener"]("keyup.enter",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().onEditSave()})("ngModelChange",function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().newName=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",i.newName)}}function j(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",18),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](2,"div",19),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](n.item.groupName),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("(",n.item.domains.length,")")}}function V(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",22),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"i",2),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](2).onDomainCheck(e)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",23),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](2).onDomainCheck(e)}),c["\u0275\u0275pipe"](4,"translate"),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",24),c["\u0275\u0275elementStart"](7,"i",25),c["\u0275\u0275listener"]("nzOnConfirm",function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](2).onChildRemove(e)}),c["\u0275\u0275pipe"](8,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass",o.isSelected(i)?"icon-choose-end checked":"icon-nochoice"),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("nzTooltipTitle",c["\u0275\u0275pipeBind1"](4,6,o.domainSelectorService.disabledToolTip(i)))("ngClass",o.domainSelectorService.domainDisabled(i)?"disabled cursor-disabled":"cursor-pointer"),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](o.domainSelectorService.domainTitle(i)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("nzPopconfirmTitle",c["\u0275\u0275pipeBind1"](8,8,"ARE_YOU_SURE_DELETE"))("nzPopconfirmTrigger","click")}}function F(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",20),c["\u0275\u0275template"](1,V,9,10,"div",21),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",n.item.domains)}}var B=function(e,t,n){return{"icon-choose-end checked":e,"icon-nochoice":t,"disabled cursor-disabled":n}},U=function(){function e(e,t,n,i){this.domainSelectorService=e,this.translate=t,this.nzMessage=n,this.emitService=i,this.disableGroupCheck=!1,this.remove=new c.EventEmitter,this.groupChecked=!1,this.showChildren=!1,this.nameEditing=!1,this.removeConfirmVisiable=!1,this.newName=""}return Object.defineProperty(e.prototype,"showBackColor",{get:function(){return!!this.nameEditing},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.newName=this.item.groupName,this.showChildren=this.domainSelectorService.openedGroupIdMap[this.item.groupNumber]},e.prototype.onGroupCheck=function(){var e=this;this.disableGroupCheck||(this.emitService.emit({event:"selectDomian:success"}),this.groupChecked=!this.groupChecked,this.groupChecked?(this.showChildren=!0,this.domainSelectorService.openedGroupIdMap[this.item.groupNumber]=!0,this.item.domains.filter(function(t){return!e.domainSelectorService.domainDisabled(t)}).forEach(function(t){e.domainSelectorService.selectDomainIdMap[t.id]||e.domainSelectorService.addSelectToList(t)})):this.item.domains.forEach(function(t){e.domainSelectorService.removeSelectFromList(t.id)}))},e.prototype.onExpandToggle=function(){this.showChildren=!this.showChildren,this.domainSelectorService.openedGroupIdMap[this.item.groupNumber]=this.showChildren},e.prototype.onEdit=function(){var e=this;Object(m.p)(function(){e.nameEditing=!0,Object(m.p)(function(){e.nameInput.nativeElement.focus()})})},e.prototype.onEditSave=function(){var e=this;if(this.nameEditing&&(this.nameEditing=!1,this.newName!==this.item.groupName)){var t=this.item.groupName;this.item.groupName=this.newName,this.domainSelectorService.renameGroup(this.item.groupNumber,this.newName).toPromise().then(function(n){0===n.success.length&&(e.item.groupName=t,e.nzMessage.error(e.translate.instant("SAVEED_FAILED")))}).catch(function(e){return Object(z.b)(e)})}},e.prototype.onDomainCheck=function(e){this.domainSelectorService.domainDisabled(e)||(this.emitService.emit({event:"selectDomian:success"}),this.domainSelectorService.onTreeNodeSelected(e))},e.prototype.onRemove=function(){var e=this;this.domainSelectorService.removeGroup(this.item.groupNumber).toPromise().then(function(t){0===t.success.length?e.nzMessage.error(e.translate.instant("SAVEED_FAILED")):e.remove.next()}).catch(function(e){return Object(z.b)(e)})},e.prototype.onChildRemove=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n;return Object(i.e)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=this.item.domains.findIndex(function(t){return t.id===e.id}),[4,this.domainSelectorService.removeFromGroup([{groupNumber:this.item.groupNumber,domainId:e.id}]).toPromise()];case 1:return 0===i.sent().success.length?this.nzMessage.error(this.translate.instant("SAVEED_FAILED")):this.item.domains.splice(t,1),[3,3];case 2:return n=i.sent(),Object(z.b)(n),[3,3];case 3:return[2]}})})},e.prototype.isSelected=function(e){return Boolean(this.domainSelectorService.selectDomainIdMap[e.id])},e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](f.c),c["\u0275\u0275directiveInject"](g.e),c["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["group-item"]],viewQuery:function(e,t){var n;1&e&&c["\u0275\u0275viewQuery"](L,1),2&e&&c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.nameInput=n.first)},inputs:{item:"item",disableGroupCheck:"disableGroupCheck"},outputs:{remove:"remove"},decls:26,vars:22,consts:[[1,"flex","group-line","line",3,"ngClass"],[1,"radio-area"],[1,"m-r-10","radio-icon","iconfont","check-box",3,"ngClass","click"],[1,"collapse-area"],[1,"ant-table-row-expand-icon","expand-icon",3,"ngClass","click"],["clickElementOutside","",1,"group-name","flex",3,"clickOutside"],[4,"ngIf","ngIfElse"],["groupName",""],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomRight",1,"more-action","cursor-pointer",3,"nzDropdownMenu"],["nz-popconfirm","",1,"iconfont","icon-vertical-more","cursor-pointer",3,"nzPopconfirmTrigger","nzPopconfirmTitle","nzPopconfirmVisible","nzPopconfirmVisibleChange","nzOnConfirm"],["class","children",4,"ngIf"],["moreAction",""],["nz-menu",""],["nz-menu-item","",3,"click"],[1,"iconfont","icon-edit","m-r-4"],[1,"iconfont","icon-delete","m-r-4"],["type","text",1,"rename-input",3,"ngModel","keyup.enter","ngModelChange"],["nameInput",""],[1,"name","text-omit"],[1,"count","txt-999"],[1,"children"],["class","flex line domain-line",4,"ngFor","ngForOf"],[1,"flex","line","domain-line"],["nz-tooltip","",1,"text-omit","domain-name",3,"nzTooltipTitle","ngClass","click"],[1,"remove-icon","cursor-pointer"],["nz-popconfirm","",1,"iconfont","icon-delete",3,"nzPopconfirmTitle","nzPopconfirmTrigger","nzOnConfirm"]],template:function(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"i",2),c["\u0275\u0275listener"]("click",function(){return t.onGroupCheck()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"i",4),c["\u0275\u0275listener"]("click",function(){return t.onExpandToggle()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",5),c["\u0275\u0275listener"]("clickOutside",function(){return t.onEditSave()}),c["\u0275\u0275template"](6,N,3,1,"ng-container",6),c["\u0275\u0275template"](7,j,4,2,"ng-template",null,7,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",8),c["\u0275\u0275elementStart"](10,"i",9),c["\u0275\u0275listener"]("nzPopconfirmVisibleChange",function(e){return t.removeConfirmVisiable=e})("nzOnConfirm",function(){return t.onRemove()}),c["\u0275\u0275pipe"](11,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](12,F,2,1,"div",10),c["\u0275\u0275elementStart"](13,"nz-dropdown-menu",null,11),c["\u0275\u0275elementStart"](15,"ul",12),c["\u0275\u0275elementStart"](16,"li",13),c["\u0275\u0275listener"]("click",function(){return t.onEdit()}),c["\u0275\u0275element"](17,"i",14),c["\u0275\u0275elementStart"](18,"span"),c["\u0275\u0275text"](19),c["\u0275\u0275pipe"](20,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"li",13),c["\u0275\u0275listener"]("click",function(){return t.removeConfirmVisiable=!0}),c["\u0275\u0275element"](22,"i",15),c["\u0275\u0275elementStart"](23,"span"),c["\u0275\u0275text"](24),c["\u0275\u0275pipe"](25,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275reference"](8),i=c["\u0275\u0275reference"](14);c["\u0275\u0275property"]("ngClass",t.showBackColor?"show-backdrop":""),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction3"](18,B,t.groupChecked,!t.groupChecked,t.disableGroupCheck)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass",t.showChildren?"ant-table-row-expand-icon-expanded":"ant-table-row-expand-icon-collapsed"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.nameEditing)("ngIfElse",n),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("nzDropdownMenu",i),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("nzPopconfirmTrigger",null)("nzPopconfirmTitle",c["\u0275\u0275pipeBind1"](11,12,"ARE_YOU_SURE_DELETE"))("nzPopconfirmVisible",t.removeConfirmVisiable),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.showChildren),c["\u0275\u0275advance"](7),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](20,14,"DOMAIN_SELECTOR_RENAME_GROUP")),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](25,16,"COMMON_BUTTON_DELETE"))}},directives:[b.l,E.a,b.n,P.b,y.a,P.d,R.c,R.e,D.a,M.d,M.k,M.l,b.m,C.d],pipes:[f.b],styles:[".line[_ngcontent-%COMP%]{align-items:center;height:30px;padding:4px}.line.show-backdrop[_ngcontent-%COMP%], .line[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.line[_ngcontent-%COMP%]   .more-action[_ngcontent-%COMP%], .line[_ngcontent-%COMP%]   .remove-icon[_ngcontent-%COMP%]{visibility:hidden}.line[_ngcontent-%COMP%]:hover   .more-action[_ngcontent-%COMP%], .line[_ngcontent-%COMP%]:hover   .remove-icon[_ngcontent-%COMP%]{visibility:visible}.group-line[_ngcontent-%COMP%]   .radio-area[_ngcontent-%COMP%]{flex:0 0 32px}.group-line[_ngcontent-%COMP%]   .radio-area[_ngcontent-%COMP%]   .check-box[_ngcontent-%COMP%]{font-size:14px}.group-line[_ngcontent-%COMP%]   .radio-area[_ngcontent-%COMP%]   .check-box.checked[_ngcontent-%COMP%]{color:#23c6c8}.group-line[_ngcontent-%COMP%]   .collapse-area[_ngcontent-%COMP%]{flex:0 0 24px}.group-line[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden}.group-line[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{max-width:100%;flex:0 1 auto}.group-line[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{margin-left:8px;flex:1 0 auto}.group-line[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .rename-input[_ngcontent-%COMP%]{width:100%;border:none;outline:none;background-color:#fff;border-radius:4px}.group-line[_ngcontent-%COMP%]   .more-action[_ngcontent-%COMP%]{width:20px;text-align:center;margin-left:24px}.domain-line[_ngcontent-%COMP%]{margin-left:32px}.domain-line[_ngcontent-%COMP%]   .radio-area[_ngcontent-%COMP%]{flex:0 0 auto}.domain-line[_ngcontent-%COMP%]   .radio-area[_ngcontent-%COMP%]   .check-box[_ngcontent-%COMP%]{font-size:14px}.domain-line[_ngcontent-%COMP%]   .radio-area[_ngcontent-%COMP%]   .check-box.checked[_ngcontent-%COMP%]{color:#23c6c8}.domain-line[_ngcontent-%COMP%]   .domain-name[_ngcontent-%COMP%]{flex:1 1 auto}.domain-line[_ngcontent-%COMP%]   .remove-icon[_ngcontent-%COMP%]{margin-right:2px}"]}),e}(),W=["groupNameInput"];function H(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"i",3),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().creating=!1}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"span"),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](7,"div",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",5),c["\u0275\u0275elementStart"](9,"div",6),c["\u0275\u0275elementStart"](10,"input",7,8),c["\u0275\u0275listener"]("ngModelChange",function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().groupName=e}),c["\u0275\u0275pipe"](12,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",9),c["\u0275\u0275elementStart"](14,"button",10),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().onGroupAdd()}),c["\u0275\u0275text"](15),c["\u0275\u0275pipe"](16,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](6,7,"DOMAIN_SELECTOR_CREATE_GROUP")),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("placeholder",c["\u0275\u0275pipeBind1"](12,9,"DOMAIN_SELECTOR_GROUP_NAME_PLACEHOLDER"))("ngModel",i.groupName),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngClass",i.groupName?"":"disabled")("disabled",!i.groupName)("nzLoading",i.createSaving),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](16,11,"CREATE"))}}function G(e,t){1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275element"](1,"i",16),c["\u0275\u0275elementStart"](2,"span"),c["\u0275\u0275text"](3),c["\u0275\u0275pipe"](4,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](4,1,"DOMAIN_SELECTOR_MY_GROUPS")))}function q(e,t){if(1&e&&c["\u0275\u0275element"](0,"nz-empty",17),2&e){c["\u0275\u0275nextContext"]();var n=c["\u0275\u0275reference"](9);c["\u0275\u0275property"]("nzNotFoundContent",n)}}function $(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"span",18),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"span",19),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"](2).onGroupCreate()}),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"translate"),c["\u0275\u0275elementEnd"]()}2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,2,"DOMAIN_SELECTOR_NO_GROUP")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](5,4,"DOMAIN_SELECTOR_TO_CRATE_GROUP")))}function K(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"group-item",20),c["\u0275\u0275listener"]("remove",function(){c["\u0275\u0275restoreView"](n);var e=t.index;return c["\u0275\u0275nextContext"](2).domainSelectorService.removeGroupAt(e)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("item",i)("disableGroupCheck",o.disableGroupCheck)}}var X=function(e){return{maxHeight:e}};function Y(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275template"](3,G,5,3,"ng-container",0),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",4),c["\u0275\u0275elementStart"](5,"i",11),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().onGroupCreate()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",12),c["\u0275\u0275template"](7,q,1,1,"nz-empty",13),c["\u0275\u0275template"](8,$,6,6,"ng-template",null,14,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275template"](10,K,2,2,"div",15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",i.defaultMode),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngStyle",c["\u0275\u0275pureFunction1"](4,X,i.defaultMode?"286px":"245px")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0===i.domainSelectorService.groups.length),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngForOf",i.domainSelectorService.groups)}}var Q=function(){function e(e,t,n){this.domainSelectorService=e,this.nzMessage=t,this.translate=n,this.disableGroupCheck=!1,this.addSuccess=new c.EventEmitter,this.creating=!1,this.createSaving=!1,this.groupName="",this.onDestory$=new o.a}return e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.onDestory$.next(),this.onDestory$.complete()},e.prototype.onGroupCreate=function(){var e=this;this.creating=!0,Object(m.p)(function(){e.groupNameInput.nativeElement.focus()})},e.prototype.onGroupAdd=function(){var e=this,t=this.groupName;this.createSaving=!0,this.domainSelectorService.addGroup(t).pipe(Object(s.a)(this.onDestory$),Object(d.a)(function(){e.createSaving=!1})).subscribe(function(t){t.success.length>0?(e.groupName="",e.creating=!1,e.addSuccess.next()):e.nzMessage.error(e.translate.instant("SAVEED_FAILED"))},function(){})},e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](g.e),c["\u0275\u0275directiveInject"](f.c))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["group-card"]],viewQuery:function(e,t){var n;1&e&&c["\u0275\u0275viewQuery"](W,1),2&e&&c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.groupNameInput=n.first)},inputs:{disableGroupCheck:"disableGroupCheck",defaultMode:"defaultMode"},outputs:{addSuccess:"addSuccess"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"title","f-14"],[1,"left"],[1,"iconfont","icon-left-crown","cursor-pointer","back-icon",3,"click"],[1,"right"],[1,"card-content","creat"],[1,"name-input"],["type","text",3,"placeholder","ngModel","ngModelChange"],["groupNameInput",""],[1,"confirm"],["nz-button","",1,"bt",3,"ngClass","disabled","nzLoading","click"],[1,"iconfont","icon-plus",3,"click"],[1,"card-content","slimScrollBar",3,"ngStyle"],["nzNotFoundImage","simple",3,"nzNotFoundContent",4,"ngIf"],["contentTpl",""],[4,"ngFor","ngForOf"],[1,"iconfont","icon-group"],["nzNotFoundImage","simple",3,"nzNotFoundContent"],[1,"m-r-4"],[1,"cursor-pointer","txt-underline","txt-theme",3,"click"],[3,"item","disableGroupCheck","remove"]],template:function(e,t){1&e&&(c["\u0275\u0275template"](0,H,17,13,"ng-container",0),c["\u0275\u0275template"](1,Y,11,6,"ng-container",0)),2&e&&(c["\u0275\u0275property"]("ngIf",t.creating),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.creating))},directives:[b.n,M.d,M.k,M.l,k.a,T.a,D.a,b.l,b.o,b.m,A.b,U],pipes:[f.b],styles:["[_nghost-%COMP%]{height:100%;overflow:hidden;display:flex;flex-direction:column}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{flex:0 0 30px;line-height:36px;font-weight:700;padding:0 12px;display:flex;justify-content:space-between}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{margin-right:8px}[_nghost-%COMP%]   .card-content[_ngcontent-%COMP%]{margin:0 4px 0 12px;flex:1 1 auto;overflow:hidden auto}",".title[_ngcontent-%COMP%]   .back-icon[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.card-content.creat[_ngcontent-%COMP%]{margin:0 10px}.card-content.creat[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]{margin-top:8px}.card-content.creat[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:30px;border:none;outline:none;background-color:#f2f2f2;padding:0 12px;border-radius:4px}.card-content.creat[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#999}.card-content.creat[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}.card-content.creat[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]{margin-top:16px;display:flex;justify-content:flex-end}.card-content.creat[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]   .bt[_ngcontent-%COMP%]{font-size:14px;padding:6px 12px;border-color:#23c6c8;color:#23c6c8;border-radius:4px;zoom:.9}.card-content.creat[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]   .bt.disabled[_ngcontent-%COMP%]{border-color:#dbdbdb;color:#bdbdbd;background-color:#f0f0f0;opacity:1}"]}),e}(),J=n("fujP"),Z=n("q3Kh"),ee=n("tk/3"),te=function(){function e(e,t){this.http=e,this.translate=t}return e.prototype.initGroupList=function(){return[{title:this.translate.instant("DOMAIN_SERVICE_TYPE"),type:"type_inner",dateType:"group",disableCheckbox:"true",key:"type_inner",related_domain:null},{title:this.translate.instant("DOMAIN_TARGET_STRATEGY"),type:"deployment_strategy",dateType:"group",disableCheckbox:"true",key:"deployment_strategy",related_domain:null},{title:this.translate.instant("DOMAIN_PRODUCT_CATALOG"),type:"pdi_category",dateType:"tree",disableCheckbox:"true",key:"pdi_category",related_domain:null}]},e.prototype.getSystemGroupDetail=function(e,t){return this.http.get("/vision-platform/api/products/"+e+"/group/"+t).pipe(Object(Z.map)(function(e){return e.data}))},e.prototype.getDomainApplicationSetting=function(e){return this.http.get("/devops-app-store/api/v1/domains/"+e+"/application_setting").pipe(Object(Z.map)(function(e){return e.data}))},e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275inject"](ee.c),c["\u0275\u0275inject"](f.c))},e.\u0275prov=c["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),ne=n("nxWG"),ie=n("TaO5"),oe=n("YuSE");function re(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"label",10),c["\u0275\u0275listener"]("ngModelChange",function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"](2).$implicit.origin.isSelected=e})("ngModelChange",function(){c["\u0275\u0275restoreView"](n);var e=c["\u0275\u0275nextContext"](2).$implicit;return c["\u0275\u0275nextContext"]().clickTreeNode(e)}),c["\u0275\u0275elementEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275property"]("ngModel",i.origin.isSelected)("nzDisabled",!i.origin.isDisabled)}}function ae(e,t){if(1&e&&(c["\u0275\u0275element"](0,"i",11),c["\u0275\u0275pipe"](1,"translate")),2&e){var n=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275property"]("nzTooltipTitle",c["\u0275\u0275pipeBind1"](1,3,n.origin.disableTooltip))("nzTooltipPlacement","top")("nzTooltipTrigger","hover")}}function ce(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275template"](1,re,1,2,"label",8),c["\u0275\u0275template"](2,ae,2,5,"i",9),c["\u0275\u0275elementContainerEnd"]()),2&e){var n=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.origin.isDisabled),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!n.origin.isDisabled)}}function le(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",12),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275property"]("title",null==n||null==n.origin||null==n.origin.related_domain?null:n.origin.related_domain.title),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"]("(",null==n||null==n.origin||null==n.origin.related_domain?null:n.origin.related_domain.title,")")}}var se=function(e){return{"cursor-disabled":e}};function de(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",4),c["\u0275\u0275template"](1,ce,3,2,"ng-container",5),c["\u0275\u0275elementStart"](2,"span",6),c["\u0275\u0275pipe"](3,"translate"),c["\u0275\u0275text"](4),c["\u0275\u0275template"](5,le,2,2,"span",7),c["\u0275\u0275pipe"](6,"isNotEmpty"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.origin.isLeaf),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](9,se,!n.origin.isDisabled&&n.origin.isLeaf))("title",n.origin.isLeaf?c["\u0275\u0275pipeBind1"](3,5,"DOMAIN_TYPE_CLOUD_SERVICE")+":"+((null==n||null==n.origin?null:n.origin.short_title)||(null==n||null==n.origin?null:n.origin.title)):null==n||null==n.origin?null:n.origin.title),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",(null==n||null==n.origin?null:n.origin.short_title)||(null==n||null==n.origin?null:n.origin.title)," "),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",c["\u0275\u0275pipeBind1"](6,7,null==n||null==n.origin||null==n.origin.related_domain?null:n.origin.related_domain.title))}}function pe(e,t){1&e&&c["\u0275\u0275element"](0,"i",13),2&e&&c["\u0275\u0275property"]("ngClass",t.$implicit.origin.expanded?"ant-table-row-expand-icon-expanded":"ant-table-row-expand-icon-collapsed")}var ue=function(){function e(e,t,n,i,o){this.domainSelectorService=e,this.systemGroupCardService=t,this.translate=n,this.emitService=i,this.ref=o,this.systemGroupList=[],this.selectedDomainList=[],this.relatedDomainIdList=[],this.isAssignedSourceExternalAppeal=!1}return e.prototype.ngOnInit=function(){var e=this;this.eventOutputChanges=this.emitService.eventEmit.subscribe(function(t){var n=t.data;"changeSelectedStatusFromSystemGroup:success"===t.event&&(n.multi?e.handeleTreeMultiSelectedStatus(n.domain):e.handeleTreeSelectedStatus())}),this.getDomainApplicationSetting(),this.systemGroupList=this.systemGroupCardService.initGroupList()},e.prototype.ngOnDestroy=function(){this.eventOutputChanges.unsubscribe()},e.prototype.getDomainApplicationSetting=function(){var e=this;this.systemGroupCardService.getDomainApplicationSetting(this.domainId).subscribe(function(t){var n=t.includes("external_appeal");e.isAssignedSourceExternalAppeal=n},function(){})},e.prototype.handeleTreeSelectedStatus=function(){Object(J.a)(this.selectedDomainList)||(this.selectedDomainList[0].origin.isSelected=!1,this.selectedDomainList=[],this.ref.detectChanges())},e.prototype.handeleTreeMultiSelectedStatus=function(e){var t=[],n=[];this.selectedDomainList.forEach(function(i){i.origin.related_domain.id===e.id?i.origin.isSelected=!1:(t.push(i),n.push(i.origin.related_domain.id))}),this.selectedDomainList=t,this.relatedDomainIdList=n,this.ref.detectChanges()},e.prototype.loadSystemGroupData=function(e){var t=e.node;t.origin.type&&(["type_inner","deployment_strategy"].includes(t.origin.type)&&"expand"===e.eventName?this.formateGroupData(t):this.formateTreeData(t))},e.prototype.formateGroupData=function(e){var t,n=this;0===(null==e?void 0:e.getChildren().length)&&(null==e?void 0:e.isExpanded)&&0===(null==e?void 0:e.level)&&this.loadData(null===(t=null==e?void 0:e.origin)||void 0===t?void 0:t.type).then(function(t){var i,o=n.transferGroupData(t,null===(i=null==e?void 0:e.origin)||void 0===i?void 0:i.type);e.addChildren(o)}).catch(function(e){return Object(z.b)(e)})},e.prototype.transferGroupData=function(e,t){var n=this,i=[];return Object.keys(e).forEach(function(o){var r={key:o,type:t,title:n.translate.instant(o),isSelected:!1,children:n.buildChildNode(e[o])};i.push(r)}),i.forEach(function(e){e.isDisabled=!n.multi||!e.children.some(function(e){return Object(J.a)(e.disableTooltip)})}),i},e.prototype.buildChildNode=function(e){var t=this;return e.forEach(function(e){e.key=e.id,e.isLeaf=!0,e.isSelected=!1,e.disableTooltip=Object(J.a)(e.related_domain)?"":t.formateToolTips(e.related_domain),e.isDisabled=Object(J.a)(e.disableTooltip)}),e},e.prototype.displayTooltipFn=function(e){return e.id===this.domainId?this.isAssignedSourceExternalAppeal?"PLEASE_USE_WORKITEM_SERVICE":"":this.isFromDeliverRR&&!e.accept_ir_us?"COMMON_TOOLTIP_NO_RECEIVE_IR":this.isFromDeliverRR||e.receive_rr?e.receive_rr_to_cloud?"":"COMMON_RECEIVE_RR_TO_CLOUD":"COMMON_TOOLTIP_NO_RECEIVE_RR"},e.prototype.formateToolTips=function(e){return this.domainSelectorService.isSystemRelateDomainInTree(e)?this.displayTooltipFn(e):"COMMON_TOOLTIP_NOT_ALLOWED_SUBMIT_RR"},e.prototype.formateTreeData=function(e){var t=this;this.loadData(e.origin.type).then(function(n){if(n){var i=t.createTreeData(n,[]);e.addChildren(i)}}).catch(function(e){return Object(z.b)(e)})},e.prototype.createTreeData=function(e,t){var n=this;return e.forEach(function(e){var i={title:e.short_title||e.title_zh,key:e.sn.toString(),isLeaf:!0,related_domain:e.related_domain,isSelected:!1,children:[],isDisabled:!Object(J.a)(e.related_domain)&&!n.displayTooltipFn(e.related_domain),disableTooltip:Object(J.a)(e.related_domain)?"":n.formateToolTips(e.related_domain)};e.children.length&&(i.isLeaf=!1,n.createTreeData(e.children,i.children)),t.push(i)}),t},e.prototype.loadData=function(e){return this.systemGroupCardService.getSystemGroupDetail(this.domainId,e).toPromise()},e.prototype.clickTreeNode=function(e){this.emitService.emit({event:"selectDomianIsFromSystemGroup:success"}),this.multi?this.multiSelectedMode(e):this.singleSelectedMode(e)},e.prototype.singleSelectedMode=function(e){if(this.selectedDomainList.push(e),e.origin.isSelected)if(1===this.selectedDomainList.length)this.domainSelectorService.onTreeNodeSelectedFromSystem(e.origin.related_domain);else{var t=this.selectedDomainList.find(function(t){return t.origin.related_domain.id!==e.origin.related_domain.id});if(!t)return this.selectedDomainList[0].origin.isSelected=!1,void(this.selectedDomainList=[e]);this.domainSelectorService.onTreeNodeSelectedFromSystem(e.origin.related_domain),t.origin.isSelected=!1,this.selectedDomainList=[e],this.ref.detectChanges()}else this.selectedDomainList=[],this.domainSelectorService.onTreeNodeSelectedFromSystem(e.origin.related_domain)},e.prototype.multiSelectedMode=function(e){if(e.origin.isSelected)this.relatedDomainIdList.includes(e.origin.related_domain.id)||this.domainSelectorService.onTreeNodeSelectedFromSystem(e.origin.related_domain),this.selectedDomainList.push(e),this.relatedDomainIdList.push(e.origin.related_domain.id);else{if(this.selectedDomainList=this.selectedDomainList.filter(function(t){return t.origin.related_domain.product_id!==e.origin.related_domain.product_id}),this.relatedDomainIdList=this.selectedDomainList.map(function(e){return e.origin.related_domain.id}),this.relatedDomainIdList.includes(e.origin.related_domain.id))return;this.domainSelectorService.onTreeNodeSelectedFromSystem(e.origin.related_domain)}},e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](te),c["\u0275\u0275directiveInject"](f.c),c["\u0275\u0275directiveInject"](v.a),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["system-group-card"]],inputs:{multi:"multi",isFromDeliverRR:"isFromDeliverRR",domainId:"domainId"},features:[c["\u0275\u0275ProvidersFeature"]([te])],decls:6,vars:3,consts:[[1,"group-content"],["nzAsyncData","","nzShowIcon","","nzBlockNode","",3,"nzData","nzTreeTemplate","nzExpandedIcon","nzExpandChange"],["nzTreeTemplateNode",""],["multiExpandedIconTpl",""],[1,"custom-node","overfolw-eclipis"],[4,"ngIf"],[1,"m-l-5","text-omit",3,"ngClass","title"],["class","m-l-5 txt-999",3,"title",4,"ngIf"],["class","pointer-cursor","nz-checkbox","",3,"ngModel","nzDisabled","ngModelChange",4,"ngIf"],["nz-tooltip","","class","cursor-disabled radio-icon iconfont icon-nochoice txt-999",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipTrigger",4,"ngIf"],["nz-checkbox","",1,"pointer-cursor",3,"ngModel","nzDisabled","ngModelChange"],["nz-tooltip","",1,"cursor-disabled","radio-icon","iconfont","icon-nochoice","txt-999",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipTrigger"],[1,"m-l-5","txt-999",3,"title"],[1,"ant-table-row-expand-icon","expand-icon",3,"ngClass"]],template:function(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"nz-tree",1),c["\u0275\u0275listener"]("nzExpandChange",function(e){return t.loadSystemGroupData(e)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](2,de,7,11,"ng-template",null,2,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275template"](4,pe,1,1,"ng-template",null,3,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275reference"](3),i=c["\u0275\u0275reference"](5);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("nzData",t.systemGroupList)("nzTreeTemplate",n)("nzExpandedIcon",i)}},directives:[ne.a,b.n,b.l,ie.a,M.k,M.l,C.d],pipes:[f.b,oe.a],styles:[".group-content[_ngcontent-%COMP%]{width:100%;overflow-y:auto;padding:10px;max-height:284px;min-height:100px}.group-content[_ngcontent-%COMP%]   .custom-node[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row}.group-content[_ngcontent-%COMP%]     .ant-tree .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff!important}.group-content[_ngcontent-%COMP%]     .ant-checkbox-inner{border-radius:50% 50%;border:1px solid rgba(0,0,0,.9)}.group-content[_ngcontent-%COMP%]     .ant-checkbox-checked .ant-checkbox-inner{border-radius:50% 50%;border-color:#23c6c8}"]}),e}(),me=n("FwiY"),he=n("LZfB"),ge=function(){function e(){this.creating=!1,this.saving=!1,this.createAddSaving=!1,this.newGroupName="",this.keyword=""}return Object.defineProperty(e.prototype,"firstJoinedGroup",{get:function(){return this.joinedGroup[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){var e=this.keyword;return e?this.domainSelectorService.groups.filter(function(t){return t.groupName.indexOf(e)>-1}):this.domainSelectorService.groups},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupSubTitleMap",{get:function(){var e=this;return this.groups.reduce(function(t,n){var i=n.domains.map(function(t){return e.domainSelectorService.domainTitle(t)}).join(", ");return t[n.groupNumber]=i,t},{})},enumerable:!1,configurable:!0}),e.prototype.onNewCreate=function(){var e=this;this.creating=!0,Object(m.p)(function(){e.createInput.nativeElement.focus()})},e.prototype.createDomain=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t;return Object(i.e)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.domainSelectorService.addGroup(this.newGroupName).toPromise()];case 1:return 0===(e=n.sent()).success.length?(this.createAddSaving=!1,this.nzMessage.error(this.translate.instant("SAVEED_FAILED")),[2,Promise.reject(new Error("DOMAIN_GROUP_CREATE_FAILED"))]):[2,e.success[0].groupNumber];case 2:return t=n.sent(),Object(z.b)(t),[3,3];case 3:return[2]}})})},e.prototype.afterGroupCreate=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this.domainSelectorService.addToGroups(e).toPromise()];case 1:return 0===n.sent().success.length?(this.createAddSaving=!1,this.nzMessage.error(this.translate.instant("SAVEED_FAILED")),[2]):[4,this.domainSelectorService.loadGroups().toPromise()];case 2:return n.sent(),this.createAddSaving=!1,this.onClose(),[3,4];case 3:return t=n.sent(),Object(z.b)(t),[3,4];case 4:return[2]}})})},e}(),fe=["newCreateInput"];function ve(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275text"](3),c["\u0275\u0275pipe"](4,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",3),c["\u0275\u0275elementStart"](6,"input",4,5),c["\u0275\u0275listener"]("ngModelChange",function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().newGroupName=e}),c["\u0275\u0275pipe"](8,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",6),c["\u0275\u0275elementStart"](10,"button",7),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().creating=!1}),c["\u0275\u0275text"](11),c["\u0275\u0275pipe"](12,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"button",8),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().onCreateAndJoin()}),c["\u0275\u0275text"](14),c["\u0275\u0275pipe"](15,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](4,8,"DOMAIN_SELECTOR_CREATE_GROUP")),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("placeholder",c["\u0275\u0275pipeBind1"](8,10,"DOMAIN_SELECTOR_GROUP_NAME_PLACEHOLDER"))("ngModel",i.newGroupName),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](12,12,"COMMON_BUTTON_CANCLE")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass",i.newGroupName?"":"disabled")("disabled",!i.newGroupName)("nzLoading",i.createAddSaving),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](15,14,"DOMAIN_SELECTOR_CREATE_AND_JOIN"))}}function be(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",16),c["\u0275\u0275elementStart"](1,"span",17),c["\u0275\u0275text"](2),c["\u0275\u0275pipe"](3,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"span",18),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"](2).onNewCreate()}),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](3,2,"DOMAIN_SELECTOR_NO_GROUP")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](6,4,"DOMAIN_SELECTOR_TO_CRATE_GROUP")))}function Ce(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",33),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"]("(",c["\u0275\u0275pipeBind1"](2,1,"DOMAIN_SELECTOR_HAS_JOINED"),")"))}function ye(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",25),c["\u0275\u0275elementStart"](1,"div",26),c["\u0275\u0275elementStart"](2,"i",27),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](3).onGroupCheck(e)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",28),c["\u0275\u0275elementStart"](4,"div",29),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](3).onGroupCheck(e)}),c["\u0275\u0275elementStart"](5,"div",30),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](7,Ce,3,3,"div",31),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",32),c["\u0275\u0275text"](9),c["\u0275\u0275pipe"](10,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass",o.isGroupCheckedMap[i.groupNumber]?"icon-choose-end checked":"icon-nochoice"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("title",i.groupName),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("title",i.groupName),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](i.groupName),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",o.isGroupAddMap[i.groupNumber]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("title",o.groupSubTitleMap[i.groupNumber]),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](o.groupSubTitleMap[i.groupNumber]||c["\u0275\u0275pipeBind1"](10,7,"DOMAIN_SELECTOR_EMPTY_GROUP"))}}function xe(e,t){if(1&e&&c["\u0275\u0275element"](0,"i",42),2&e){c["\u0275\u0275nextContext"]();var n=c["\u0275\u0275reference"](5);c["\u0275\u0275property"]("nzDropdownMenu",n)}}function we(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"li",43),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](n.groupName)}}function _e(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"span",37),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](3,xe,1,1,"i",38),c["\u0275\u0275elementStart"](4,"nz-dropdown-menu",null,39),c["\u0275\u0275elementStart"](6,"ul",40),c["\u0275\u0275template"](7,we,2,1,"li",41),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()),2&e){var n=c["\u0275\u0275nextContext"](4);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.firstJoinedGroup.groupName),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.joinedGroup.length>1),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngForOf",n.joinedGroup)}}function Oe(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"span",34),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,1,"COMMON_INFO_NO_DATA")))}function Se(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"span",34),c["\u0275\u0275text"](2),c["\u0275\u0275pipe"](3,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,_e,8,3,"ng-container",35),c["\u0275\u0275template"](5,Oe,3,3,"ng-template",null,36,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementContainerEnd"]()),2&e){var n=c["\u0275\u0275reference"](6),i=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind1"](3,3,"DOMAIN_SELECTOR_HAS_JOINED"),": "),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",i.firstJoinedGroup)("ngIfElse",n)}}function Ee(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275elementStart"](1,"div",19),c["\u0275\u0275template"](2,ye,11,9,"div",20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",21),c["\u0275\u0275elementStart"](4,"div",22),c["\u0275\u0275template"](5,Se,7,5,"ng-container",0),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",23),c["\u0275\u0275elementStart"](7,"button",24),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"](2).onSave()}),c["\u0275\u0275text"](8),c["\u0275\u0275pipe"](9,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",i.groups),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",i.showJoined),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("nzLoading",i.saving),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](9,4,"COMMON_BUTTON_CONFIRM"))}}function Me(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",9),c["\u0275\u0275elementStart"](2,"div",10),c["\u0275\u0275elementStart"](3,"input",11),c["\u0275\u0275listener"]("ngModelChange",function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().keyword=e}),c["\u0275\u0275pipe"](4,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"i",12),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().onNewCreate()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",13),c["\u0275\u0275template"](7,be,7,6,"div",14),c["\u0275\u0275template"](8,Ee,10,6,"ng-template",null,15,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=c["\u0275\u0275reference"](9),o=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("placeholder",c["\u0275\u0275pipeBind1"](4,4,"DOMAIN_SELECTOR_SEARCH_GROUP"))("ngModel",o.keyword),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",0===o.groups.length)("ngIfElse",i)}}var Pe=function(e){function t(t,n,i){var o=e.call(this)||this;return o.domainSelectorService=t,o.nzMessage=n,o.translate=i,o.close=new c.EventEmitter,o.showJoined=!1,o.isGroupAddMap={},o.joinedGroup=[],o}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},Object.defineProperty(t.prototype,"isGroupCheckedMap",{get:function(){var e,t=this.checkedGroup;return t?((e={})[t.groupNumber]=!0,e):{}},enumerable:!1,configurable:!0}),t.prototype.onGroupCheck=function(e){this.checkedGroup=e},t.prototype.onSave=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n,o,r,a=this;return Object(i.e)(this,function(i){switch(i.label){case 0:if(e=this.domainSelectorService.selectedDomains,!(t=this.checkedGroup))return this.onClose(),[2];if(n=t.domains.reduce(function(e,t){return e[t.id]=!0,e},{}),0===(o=e.filter(function(e){return!n[e.id]})).length)return this.onClose(),[2];this.saving=!0,i.label=1;case 1:return i.trys.push([1,6,,7]),[4,this.domainSelectorService.addToGroups(o.map(function(e){return{domainId:e.id,groupNumber:a.checkedGroup.groupNumber}})).toPromise()];case 2:return i.sent().success.length>0?[4,this.domainSelectorService.loadGroups().toPromise()]:[3,4];case 3:return i.sent(),this.onClose(),[3,5];case 4:this.nzMessage.error(this.translate.instant("SAVEED_FAILED")),i.label=5;case 5:return[3,7];case 6:return r=i.sent(),Object(z.b)(r),[3,7];case 7:return this.saving=!1,[2]}})})},t.prototype.onCreateAndJoin=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n;return Object(i.e)(this,function(i){switch(i.label){case 0:return this.createAddSaving=!0,e=this.domainSelectorService.selectedDomains,[4,this.createDomain()];case 1:return t=i.sent(),n=e.map(function(e){return{domainId:e.id,groupNumber:t}}),this.afterGroupCreate(n),[2]}})})},t.prototype.onClose=function(){this.close.next()},t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](g.e),c["\u0275\u0275directiveInject"](f.c))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["group-selector-single"]],viewQuery:function(e,t){var n;1&e&&c["\u0275\u0275viewQuery"](fe,1),2&e&&c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.createInput=n.first)},outputs:{close:"close"},features:[c["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"create-container"],[1,"title","f-14","txt-666"],[1,"group-name"],["type","text",1,"group-name-input",3,"placeholder","ngModel","ngModelChange"],["newCreateInput",""],[1,"controls"],["nz-button","",1,"cancle","txt-default",3,"click"],["nz-button","",1,"confirm",3,"ngClass","disabled","nzLoading","click"],[1,"groups"],[1,"header-container"],["type","text",1,"search-input",3,"placeholder","ngModel","ngModelChange"],[1,"iconfont","icon-plus","add-group","cursor-pointer",3,"click"],[1,"body-container","overflow-h"],["class","empty",4,"ngIf","ngIfElse"],["groupList",""],[1,"empty"],[1,"m-r-4","txt-999"],[1,"cursor-pointer","txt-underline","txt-theme",3,"click"],[1,"group-list"],["class","group-item",4,"ngFor","ngForOf"],[1,"group-list-footer","flex-box"],[1,"left"],[1,"right"],["nz-button","","nzSize","small",1,"confirm-bt",3,"nzLoading","click"],[1,"group-item"],[1,"radio-area"],[1,"radio-icon","iconfont","check-box","cursor-pointer","f-14","txt-theme",3,"ngClass","click"],[1,"group-info"],[1,"title-area","f-14","cursor-pointer",3,"title","click"],[1,"title","text-omit",3,"title"],["class","add-tips f-12 txt-999 m-l-5",4,"ngIf"],[1,"sub-title","f-12","txt-999","text-omit",3,"title"],[1,"add-tips","f-12","txt-999","m-l-5"],[1,"txt-999"],[4,"ngIf","ngIfElse"],["noJoined",""],[1,"first"],["class","m-l-5 iconfont icon-vertical-more more-icon txt-999 f-12 cursor-pointer","nz-dropdown","","nzTrigger","hover",3,"nzDropdownMenu",4,"ngIf"],["joinedDropDown",""],["nz-menu",""],["nz-menu-item","",4,"ngFor","ngForOf"],["nz-dropdown","","nzTrigger","hover",1,"m-l-5","iconfont","icon-vertical-more","more-icon","txt-999","f-12","cursor-pointer",3,"nzDropdownMenu"],["nz-menu-item",""]],template:function(e,t){1&e&&(c["\u0275\u0275template"](0,ve,16,16,"ng-container",0),c["\u0275\u0275template"](1,Me,10,6,"ng-container",0)),2&e&&(c["\u0275\u0275property"]("ngIf",t.creating),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.creating))},directives:[b.n,M.d,M.k,M.l,k.a,T.a,D.a,b.l,b.m,P.d,R.c,P.b,R.e],pipes:[f.b],styles:["[_nghost-%COMP%]{display:block;background-color:#fff;box-shadow:0 0 5px rgba(0,0,0,.2);border-radius:4px;width:254px}.create-container[_ngcontent-%COMP%]{padding:10px}.create-container[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{margin-top:8px}.create-container[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-name-input[_ngcontent-%COMP%]{padding:0 8px;width:100%;border-radius:4px;height:30px;background-color:#f2f2f2;outline:none;border:none}.create-container[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-name-input[_ngcontent-%COMP%]::-moz-placeholder{color:#999}.create-container[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-name-input[_ngcontent-%COMP%]::placeholder{color:#999}.create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end}.create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .cancle[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]{border-radius:4px;zoom:.9}.create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]{color:#23c6c8;border-color:#23c6c8;margin-left:8px}.create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .confirm.disabled[_ngcontent-%COMP%]{border-color:#dbdbdb;color:#bdbdbd;background-color:#f0f0f0;opacity:1}.create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .cancle[_ngcontent-%COMP%]{border-color:#f0f0f0;background-color:#f0f0f0}.groups[_ngcontent-%COMP%]{overflow:hidden}.groups[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{border-bottom:1px solid #d7d7d7;margin:5px 10px;height:36px;display:flex;align-items:center}.groups[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1 1 1px;border:none;outline:none}.groups[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::-moz-placeholder{color:#999}.groups[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#999}.groups[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .add-group[_ngcontent-%COMP%]{flex:0 0 auto;color:#23c6c8}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]{height:280px;overflow:hidden}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{text-align:center;margin-top:100px}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]{box-sizing:border-box;flex:1 1 auto;overflow:hidden auto;padding:10px 8px 10px 10px;margin-right:2px}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]{display:flex;padding:4px 0;border-radius:2px}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .radio-area[_ngcontent-%COMP%]{flex:0 0 30px;display:flex;align-items:center;margin-left:2px}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]{display:flex;align-items:center}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:0 1 auto}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .add-tips[_ngcontent-%COMP%]{flex:1 0 auto}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list-footer[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:0 10px;flex:0 0 42px;justify-content:space-between;align-items:center}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list-footer[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .first[_ngcontent-%COMP%]{color:#fdad00}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list-footer[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .confirm-bt[_ngcontent-%COMP%]{border-color:#23c6c8;color:#23c6c8;border-radius:2px}"]}),t}(ge),Ie=n("cp0P"),ke=["newCreateInput"];function Te(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275text"](3),c["\u0275\u0275pipe"](4,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",3),c["\u0275\u0275elementStart"](6,"input",4,5),c["\u0275\u0275listener"]("ngModelChange",function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().newGroupName=e}),c["\u0275\u0275pipe"](8,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",6),c["\u0275\u0275elementStart"](10,"button",7),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().creating=!1}),c["\u0275\u0275text"](11),c["\u0275\u0275pipe"](12,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"button",8),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().onCreateAndJoin()}),c["\u0275\u0275text"](14),c["\u0275\u0275pipe"](15,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](4,8,"DOMAIN_SELECTOR_CREATE_GROUP")),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("placeholder",c["\u0275\u0275pipeBind1"](8,10,"DOMAIN_SELECTOR_GROUP_NAME_PLACEHOLDER"))("ngModel",i.newGroupName),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](12,12,"COMMON_BUTTON_CANCLE")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass",i.newGroupName?"":"disabled")("disabled",!i.newGroupName)("nzLoading",i.createAddSaving),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](15,14,"DOMAIN_SELECTOR_CREATE_AND_JOIN"))}}function De(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",16),c["\u0275\u0275elementStart"](1,"span",17),c["\u0275\u0275text"](2),c["\u0275\u0275pipe"](3,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"span",18),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"](2).onNewCreate()}),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](3,2,"DOMAIN_SELECTOR_NO_GROUP")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](6,4,"DOMAIN_SELECTOR_TO_CRATE_GROUP")))}function Ae(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",33),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"]("(",c["\u0275\u0275pipeBind1"](2,1,"DOMAIN_SELECTOR_HAS_JOINED"),")"))}function ze(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",25),c["\u0275\u0275elementStart"](1,"div",26),c["\u0275\u0275elementStart"](2,"i",27),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](3).onGroupCheck(e)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",28),c["\u0275\u0275elementStart"](4,"div",29),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](3).onGroupCheck(e)}),c["\u0275\u0275elementStart"](5,"div",30),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](7,Ae,3,3,"div",31),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",32),c["\u0275\u0275text"](9),c["\u0275\u0275pipe"](10,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass",o.isGroupCheckedMap[i.groupNumber]?"icon-choose-end checked":"icon-nochoice"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("title",i.groupName),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("title",i.groupName),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](i.groupName),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",o.isGroupAddMap[i.groupNumber]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("title",o.groupSubTitleMap[i.groupNumber]),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](o.groupSubTitleMap[i.groupNumber]||c["\u0275\u0275pipeBind1"](10,7,"DOMAIN_SELECTOR_EMPTY_GROUP"))}}function Re(e,t){if(1&e&&c["\u0275\u0275element"](0,"i",42),2&e){c["\u0275\u0275nextContext"]();var n=c["\u0275\u0275reference"](5);c["\u0275\u0275property"]("nzDropdownMenu",n)}}function Le(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"li",43),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](n.groupName)}}function Ne(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"span",37),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](3,Re,1,1,"i",38),c["\u0275\u0275elementStart"](4,"nz-dropdown-menu",null,39),c["\u0275\u0275elementStart"](6,"ul",40),c["\u0275\u0275template"](7,Le,2,1,"li",41),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()),2&e){var n=c["\u0275\u0275nextContext"](4);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.firstJoinedGroup.groupName),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.joinedGroup.length>1),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngForOf",n.joinedGroup)}}function je(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"span",34),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,1,"COMMON_INFO_NO_DATA")))}function Ve(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"span",34),c["\u0275\u0275text"](2),c["\u0275\u0275pipe"](3,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,Ne,8,3,"ng-container",35),c["\u0275\u0275template"](5,je,3,3,"ng-template",null,36,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementContainerEnd"]()),2&e){var n=c["\u0275\u0275reference"](6),i=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind1"](3,3,"DOMAIN_SELECTOR_HAS_JOINED"),": "),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",i.firstJoinedGroup)("ngIfElse",n)}}function Fe(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275elementStart"](1,"div",19),c["\u0275\u0275template"](2,ze,11,9,"div",20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",21),c["\u0275\u0275elementStart"](4,"div",22),c["\u0275\u0275template"](5,Ve,7,5,"ng-container",0),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",23),c["\u0275\u0275elementStart"](7,"button",24),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"](2).onSave()}),c["\u0275\u0275text"](8),c["\u0275\u0275pipe"](9,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",i.groups),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",i.showJoined),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("nzLoading",i.saving),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](9,4,"COMMON_BUTTON_CONFIRM"))}}function Be(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",9),c["\u0275\u0275elementStart"](2,"div",10),c["\u0275\u0275elementStart"](3,"input",11),c["\u0275\u0275listener"]("ngModelChange",function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().keyword=e}),c["\u0275\u0275pipe"](4,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"i",12),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().onNewCreate()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",13),c["\u0275\u0275template"](7,De,7,6,"div",14),c["\u0275\u0275template"](8,Fe,10,6,"ng-template",null,15,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=c["\u0275\u0275reference"](9),o=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("placeholder",c["\u0275\u0275pipeBind1"](4,4,"DOMAIN_SELECTOR_SEARCH_GROUP"))("ngModel",o.keyword),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",0===o.groups.length)("ngIfElse",i)}}var Ue=function(e){function t(t,n,i){var o=e.call(this)||this;return o.domainSelectorService=t,o.nzMessage=n,o.translate=i,o.close=new c.EventEmitter,o.addToGroups=[],o.removeFromGroups=[],o.showJoined=!0,o}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"joinedGroup",{get:function(){var e=this;return this.groups.filter(function(t){return t.domains.findIndex(function(t){return t.id===e.node.id})>-1})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isGroupCheckedMap",{get:function(){var e=Object(i.i)(this.addToGroups,this.joinedGroup),t=this.removeFromGroups;return e.filter(function(e){return-1===t.findIndex(function(t){return t.groupNumber===e.groupNumber})}).reduce(function(e,t){return e[t.groupNumber]=!0,e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isGroupAddMap",{get:function(){return this.joinedGroup.reduce(function(e,t){return e[t.groupNumber]=!0,e},{})},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.onGroupCheck=function(e){var t=this.removeFromGroups.findIndex(function(t){return t.groupNumber===e.groupNumber});if(t>-1)this.removeFromGroups.splice(t,1);else{var n=this.addToGroups.findIndex(function(t){return t.groupNumber===e.groupNumber});n>-1?this.addToGroups.splice(n,1):this.joinedGroup.findIndex(function(t){return t.groupNumber===e.groupNumber})>-1?this.removeFromGroups.push(e):this.addToGroups.push(e)}},t.prototype.onSave=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n,o,r,a,c=this;return Object(i.e)(this,function(i){switch(i.label){case 0:if(t=this.removeFromGroups,n=[],(e=this.addToGroups).length>0&&(r=this.domainSelectorService.addToGroups(e.map(function(e){return{groupNumber:e.groupNumber,domainId:c.node.id}})),n.push(r)),t.length>0&&(o=t.map(function(e){return{domainId:c.node.id,groupNumber:e.groupNumber}}),r=this.domainSelectorService.removeFromGroup(o),n.push(r)),!(n.length>0))return[3,8];this.saving=!0,i.label=1;case 1:return i.trys.push([1,6,,7]),[4,Object(Ie.a)(n).toPromise()];case 2:return i.sent().every(function(e){return e.success.length>0})?[4,this.domainSelectorService.loadGroups().toPromise()]:[3,4];case 3:return i.sent(),this.onClose(),[3,5];case 4:this.nzMessage.error(this.translate.instant("SAVEED_FAILED")),i.label=5;case 5:return[3,7];case 6:return a=i.sent(),Object(z.b)(a),[3,7];case 7:return this.saving=!1,[3,9];case 8:this.onClose(),i.label=9;case 9:return[2]}})})},t.prototype.onCreateAndJoin=function(){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.e)(this,function(t){switch(t.label){case 0:return this.createAddSaving=!0,[4,this.createDomain()];case 1:return e=t.sent(),this.afterGroupCreate([{groupNumber:e,domainId:this.node.id}]),[2]}})})},t.prototype.onClose=function(){this.close.next()},t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](g.e),c["\u0275\u0275directiveInject"](f.c))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["group-selector"]],viewQuery:function(e,t){var n;1&e&&c["\u0275\u0275viewQuery"](ke,1),2&e&&c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.createInput=n.first)},inputs:{node:"node"},outputs:{close:"close"},features:[c["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"create-container"],[1,"title","f-14","txt-666"],[1,"group-name"],["type","text",1,"group-name-input",3,"placeholder","ngModel","ngModelChange"],["newCreateInput",""],[1,"controls"],["nz-button","",1,"cancle","txt-default",3,"click"],["nz-button","",1,"confirm",3,"ngClass","disabled","nzLoading","click"],[1,"groups"],[1,"header-container"],["type","text",1,"search-input",3,"placeholder","ngModel","ngModelChange"],[1,"iconfont","icon-plus","add-group","cursor-pointer",3,"click"],[1,"body-container","overflow-h"],["class","empty",4,"ngIf","ngIfElse"],["groupList",""],[1,"empty"],[1,"m-r-4","txt-999"],[1,"cursor-pointer","txt-underline","txt-theme",3,"click"],[1,"group-list"],["class","group-item",4,"ngFor","ngForOf"],[1,"group-list-footer","flex-box"],[1,"left"],[1,"right"],["nz-button","","nzSize","small",1,"confirm-bt",3,"nzLoading","click"],[1,"group-item"],[1,"radio-area"],[1,"radio-icon","iconfont","check-box","cursor-pointer","f-14","txt-theme",3,"ngClass","click"],[1,"group-info"],[1,"title-area","f-14","cursor-pointer",3,"title","click"],[1,"title","text-omit",3,"title"],["class","add-tips f-12 txt-999 m-l-5",4,"ngIf"],[1,"sub-title","f-12","txt-999","text-omit",3,"title"],[1,"add-tips","f-12","txt-999","m-l-5"],[1,"txt-999"],[4,"ngIf","ngIfElse"],["noJoined",""],[1,"first"],["class","m-l-5 iconfont icon-vertical-more more-icon txt-999 f-12 cursor-pointer","nz-dropdown","","nzTrigger","hover",3,"nzDropdownMenu",4,"ngIf"],["joinedDropDown",""],["nz-menu",""],["nz-menu-item","",4,"ngFor","ngForOf"],["nz-dropdown","","nzTrigger","hover",1,"m-l-5","iconfont","icon-vertical-more","more-icon","txt-999","f-12","cursor-pointer",3,"nzDropdownMenu"],["nz-menu-item",""]],template:function(e,t){1&e&&(c["\u0275\u0275template"](0,Te,16,16,"ng-container",0),c["\u0275\u0275template"](1,Be,10,6,"ng-container",0)),2&e&&(c["\u0275\u0275property"]("ngIf",t.creating),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.creating))},directives:[b.n,M.d,M.k,M.l,k.a,T.a,D.a,b.l,b.m,P.d,R.c,P.b,R.e],pipes:[f.b],styles:["[_nghost-%COMP%]{display:block;background-color:#fff;box-shadow:0 0 5px rgba(0,0,0,.2);border-radius:4px;width:254px}.create-container[_ngcontent-%COMP%]{padding:10px}.create-container[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{margin-top:8px}.create-container[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-name-input[_ngcontent-%COMP%]{padding:0 8px;width:100%;border-radius:4px;height:30px;background-color:#f2f2f2;outline:none;border:none}.create-container[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-name-input[_ngcontent-%COMP%]::-moz-placeholder{color:#999}.create-container[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-name-input[_ngcontent-%COMP%]::placeholder{color:#999}.create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end}.create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .cancle[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]{border-radius:4px;zoom:.9}.create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]{color:#23c6c8;border-color:#23c6c8;margin-left:8px}.create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .confirm.disabled[_ngcontent-%COMP%]{border-color:#dbdbdb;color:#bdbdbd;background-color:#f0f0f0;opacity:1}.create-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .cancle[_ngcontent-%COMP%]{border-color:#f0f0f0;background-color:#f0f0f0}.groups[_ngcontent-%COMP%]{overflow:hidden}.groups[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{border-bottom:1px solid #d7d7d7;margin:5px 10px;height:36px;display:flex;align-items:center}.groups[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1 1 1px;border:none;outline:none}.groups[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::-moz-placeholder{color:#999}.groups[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#999}.groups[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .add-group[_ngcontent-%COMP%]{flex:0 0 auto;color:#23c6c8}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]{height:280px;overflow:hidden}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{text-align:center;margin-top:100px}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]{box-sizing:border-box;flex:1 1 auto;overflow:hidden auto;padding:10px 8px 10px 10px;margin-right:2px}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]{display:flex;padding:4px 0;border-radius:2px}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .radio-area[_ngcontent-%COMP%]{flex:0 0 30px;display:flex;align-items:center;margin-left:2px}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]{display:flex;align-items:center}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:0 1 auto}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .add-tips[_ngcontent-%COMP%]{flex:1 0 auto}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list-footer[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:0 10px;flex:0 0 42px;justify-content:space-between;align-items:center}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list-footer[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .first[_ngcontent-%COMP%]{color:#fdad00}.groups[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   .group-list-footer[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .confirm-bt[_ngcontent-%COMP%]{border-color:#23c6c8;color:#23c6c8;border-radius:2px}"]}),t}(ge),We=n("yg7y"),He=["treeTableBody"];function Ge(e,t){1&e&&c["\u0275\u0275elementContainer"](0)}function qe(e,t){1&e&&(c["\u0275\u0275element"](0,"i",43),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate")),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](2,1,"DOMAIN_SELECTOR_MY_GROUPS")," "))}function $e(e,t){1&e&&(c["\u0275\u0275element"](0,"i",44),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate")),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](2,1,"DOMAIN_SYSTEM_MY_GROUPS")," "))}function Ke(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"nz-tabset",37),c["\u0275\u0275elementStart"](2,"nz-tab",38),c["\u0275\u0275template"](3,qe,3,3,"ng-template",null,39,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementStart"](5,"group-card",40),c["\u0275\u0275listener"]("addSuccess",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().loadGroups()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"nz-tab",38),c["\u0275\u0275template"](7,$e,3,3,"ng-template",null,41,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275element"](9,"system-group-card",42),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=c["\u0275\u0275reference"](4),o=c["\u0275\u0275reference"](8),r=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("nzAnimated",!1),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("nzTitle",i),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("disableGroupCheck",!r.multi),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("nzTitle",o),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("multi",r.multi)("isFromDeliverRR",r.isFromDeliverRR)("domainId",r.sourceDomainId)}}function Xe(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"group-card",45),c["\u0275\u0275listener"]("addSuccess",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().loadGroups()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("disableGroupCheck",!i.multi)("defaultMode",!0)}}function Ye(e,t){1&e&&c["\u0275\u0275elementContainer"](0)}function Qe(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",46),c["\u0275\u0275element"](1,"i",47),c["\u0275\u0275elementEnd"]())}function Je(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"search-result",48),c["\u0275\u0275listener"]("domainSelect",function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().onSearchSelected(e.id)}),c["\u0275\u0275elementEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("screenSize","default")("keyword",i.searchKeyword)("searchResult",i.searchResult)}}function Ze(e,t){1&e&&c["\u0275\u0275elementContainer"](0)}function et(e,t){1&e&&c["\u0275\u0275elementContainer"](0)}function tt(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",50),c["\u0275\u0275elementStart"](1,"span"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"i",51),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](2).onSelectRemove(e)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](o.domainSelectorService.domainTitle(i))}}function nt(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275template"](1,tt,4,1,"div",49),c["\u0275\u0275elementContainerEnd"]()),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",n.domainSelectorService.selectedDomains)}}function it(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",50),c["\u0275\u0275elementStart"](1,"span"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"i",51),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](2).onSelectFromSystemGroupRemove(e)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](o.domainSelectorService.domainTitle(i))}}function ot(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275template"](1,it,4,1,"div",49),c["\u0275\u0275elementContainerEnd"]()),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",n.domainSelectorService.selectedDomainsFromSystemGroup)}}function rt(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",52),c["\u0275\u0275listener"]("nzVisibleChange",function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().saveToGroupVisiable=e}),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"](),o=c["\u0275\u0275reference"](59);c["\u0275\u0275property"]("nzDropdownMenu",o)("nzVisible",i.saveToGroupVisiable),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,3,"DOMAIN_SELECTOR_SAVE_TO_GROPU"))}}function at(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"group-selector-single",53),c["\u0275\u0275listener"]("close",function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().saveToGroupVisiable=!1}),c["\u0275\u0275elementEnd"]()}}function ct(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"i",68),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](2).onExpanded(e)}),c["\u0275\u0275elementEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275property"]("ngClass",i.expanded?"ant-table-row-expand-icon-expanded":"ant-table-row-expand-icon-collapsed")}}function lt(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"i",69),c["\u0275\u0275listener"]("nzOnConfirm",function(){c["\u0275\u0275restoreView"](n);var e=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](2).onFavourite(e)}),c["\u0275\u0275pipe"](1,"translate"),c["\u0275\u0275elementEnd"]()}2&e&&c["\u0275\u0275property"]("nzPopconfirmTitle",c["\u0275\u0275pipeBind1"](1,2,"ARE_YOU_SURE_DELETE"))("nzPopconfirmTrigger","click")}function st(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"i",70),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](2).onFavourite(e)}),c["\u0275\u0275elementEnd"]()}}function dt(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"group-selector",71),c["\u0275\u0275listener"]("close",function(){c["\u0275\u0275restoreView"](n);var e=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](2).dropdownVisiable[e.id]=!1}),c["\u0275\u0275elementEnd"]()}if(2&e){var i=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275property"]("node",i)}}function pt(e,t){1&e&&c["\u0275\u0275elementContainer"](0)}var ut=function(e,t){return{nodes:e,level:t}};function mt(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275template"](1,pt,1,0,"ng-container",9),c["\u0275\u0275elementContainerEnd"]()),2&e){var n=c["\u0275\u0275nextContext"]().$implicit,i=c["\u0275\u0275nextContext"]().level;c["\u0275\u0275nextContext"]();var o=c["\u0275\u0275reference"](62);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",c["\u0275\u0275pureFunction2"](2,ut,n.relations,i+1))}}var ht=function(e){return{marginLeft:e}};function gt(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"li"),c["\u0275\u0275elementStart"](1,"div",56),c["\u0275\u0275elementStart"](2,"div",21),c["\u0275\u0275elementStart"](3,"i",57),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](2).onNodeClick(e)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",58),c["\u0275\u0275template"](5,ct,1,1,"i",59),c["\u0275\u0275elementStart"](6,"span",60),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](n);var e=t.$implicit;return c["\u0275\u0275nextContext"](2).onNodeClick(e)}),c["\u0275\u0275pipe"](7,"translate"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",61),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",62),c["\u0275\u0275text"](13),c["\u0275\u0275pipe"](14,"workitemAttr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",24),c["\u0275\u0275template"](16,lt,2,4,"i",63),c["\u0275\u0275template"](17,st,1,0,"ng-template",null,64,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementStart"](19,"i",65),c["\u0275\u0275listener"]("nzVisibleChange",function(e){c["\u0275\u0275restoreView"](n);var i=t.$implicit;return c["\u0275\u0275nextContext"](2).dropdownVisiable[i.id]=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"nz-dropdown-menu",null,66),c["\u0275\u0275template"](22,dt,1,1,"group-selector",67),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](23,mt,2,5,"ng-container",11),c["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=c["\u0275\u0275reference"](18),r=c["\u0275\u0275reference"](21),a=c["\u0275\u0275nextContext"]().level,l=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",l.searchSelectNodeId===i.id?"search-selected":""),c["\u0275\u0275attribute"]("domain-node-id",i.id),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass",l.isTreeNodeSelected(i)?"icon-choose-end checked":"icon-nochoice"),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngStyle",c["\u0275\u0275pureFunction1"](24,ht,a*l.INDENT_SIZE+"px")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",i.children_count>0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("nzTooltipTitle",c["\u0275\u0275pipeBind1"](7,17,l.domainSelectorService.disabledToolTip(i)))("ngClass",l.domainSelectorService.domainDisabled(i)?"disabled cursor-disabled":"cursor-pointer")("title",l.domainSelectorService.domainTitle(i)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](l.domainSelectorService.domainTitle(i)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](11,19,l.domainTypeI18n(i.type))," "),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](14,21,i.sponsor||i.owner,"person")," "),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",l.isTreeNodeFavourited(i))("ngIfElse",o),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("nzDropdownMenu",r)("nzVisible",l.dropdownVisiable[i.id]),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",l.dropdownVisiable[i.id]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",i.expanded)}}function ft(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"ul",54),c["\u0275\u0275template"](1,gt,24,26,"li",55),c["\u0275\u0275elementEnd"]()),2&e){var n=t.nodes;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",n)}}function vt(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",46),c["\u0275\u0275element"](1,"i",47),c["\u0275\u0275elementEnd"]())}function bt(e,t){1&e&&c["\u0275\u0275template"](0,vt,2,0,"div",72),2&e&&c["\u0275\u0275property"]("ngIf",t.loading)}var Ct=function(e){return{zIndex:e}},yt=function(e){return{loading:e}},xt=function(e){return{nodes:e,level:0}},wt=function(){function e(e,t,n,i,r){this.domainSelectorService=e,this.elRef=t,this.nzMessage=n,this.translate=i,this.emitService=r,this.title="DOMAIN_SELECTOR_DOMAIN_SELECT",this.multi=!1,this.zIndex=1e3,this.comfirmBtTitle="COMMON_BUTTON_CONFIRM",this.defaultSelected=[],this.close=new c.EventEmitter,this.confirm=new c.EventEmitter,this.searchKeyword="",this.searchLoading=!1,this.showSearchDropDown=!1,this.domainTypeI18n=m.f,this.INDENT_SIZE=24,this.favouritesLoading=!0,this.groupLoading=!0,this.treeLoading=!0,this.isFromSystemGroup=!1,this.dropdownVisiable={},this.saveToGroupVisiable=!1,this.onSearch$=new o.a,this.onDestory$=new o.a}return Object.defineProperty(e.prototype,"confirmDisabled",{get:function(){return!this.domainSelectorService.selectedDomains||0===this.domainSelectorService.selectedDomains.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showSaveToGroup",{get:function(){return this.domainSelectorService.selectedDomains.length>0},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.eventOutputChanges=this.emitService.eventEmit.subscribe(function(t){var n=t.event;"selectDomianIsFromSystemGroup:success"===n?e.isFromSystemGroup=!0:"selectDomian:success"===n&&(e.isFromSystemGroup=!1)},function(){}),this.domainSelectorService.onCompInit(this),this.watchSearch(),this.loadTree(),this.loadFavourites(),this.loadGroups(),this.setCdkOverlayZIndex(),this.defaultSelected.forEach(function(t){return e.domainSelectorService.addSelectToList(t)})},e.prototype.ngOnDestroy=function(){this.onDestory$.next(),this.onDestory$.complete(),this.eventOutputChanges.unsubscribe()},e.prototype.setCdkOverlayZIndex=function(){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerText=".cdk-overlay-container { z-index: "+(this.zIndex+10)+" }",document.body.appendChild(e),this.onDestory$.subscribe(function(){document.body.removeChild(e)})},e.prototype.loadFavourites=function(){var e=this;this.favouritesLoading=!0,Object(r.a)(m.d).pipe(Object(l.a)(function(t){var n=e.favouriteReqConfig(t);return e.domainSelectorService.loadFavourites(n)}),Object(s.a)(this.onDestory$)).subscribe(function(){e.favouritesLoading=!1},function(){})},e.prototype.loadGroups=function(){var e=this;this.groupLoading=!0,this.domainSelectorService.loadGroups().pipe(Object(s.a)(this.onDestory$)).subscribe(function(){e.groupLoading=!1},function(){})},e.prototype.loadTree=function(){var e=this;this.treeLoading=!0;var t=this.fullTreeReqConfig();this.domainSelectorService.loadFullTree(t,!1).pipe(Object(s.a)(this.onDestory$)).subscribe(function(){e.treeLoading=!1},function(){e.treeLoading=!1})},e.prototype.isTreeNodeSelected=function(e){return Boolean(this.domainSelectorService.selectDomainIdMap[e.id])},e.prototype.isTreeNodeFromSystemSelected=function(e){return Boolean(this.domainSelectorService.selectDomainIdMapFromSystemGroup[e.id])},e.prototype.isTreeNodeFavourited=function(e){return Boolean(this.domainSelectorService.favouriteDomainIdMap[e.id])},e.prototype.onNodeClick=function(e){this.domainSelectorService.domainDisabled(e)||(this.isFromSystemGroup=!1,this.emitService.emit({event:"changeSelectedStatusFromSystemGroup:success",data:{domain:e,multi:this.multi}}),this.domainSelectorService.onTreeNodeSelectedFromSystem(e))},e.prototype.onConfirm=function(){if(!this.confirmDisabled){var e=this.domainSelectorService.selectedDomains||this.domainSelectorService.selectedDomainsFromSystemGroup;this.confirm.next(this.multi?e:e[0])}},e.prototype.onSelectRemove=function(e){this.domainSelectorService.removeSelectFromList(e.id)},e.prototype.onSelectFromSystemGroupRemove=function(e){this.domainSelectorService.removeSelectFromSystemList(e.id),this.domainSelectorService.removeSelectFromList(e.id),this.emitService.emit({event:"changeSelectedStatusFromSystemGroup:success",data:{domain:e,multi:this.multi}})},e.prototype.onSearchFocus=function(e){this.showSearchDropDown||this.onSearch$.next(e)},e.prototype.onSearchSelected=function(e){var t=this;this.showSearchDropDown=!1,this.domainSelectorService.domainTreeIdMap[e]?(this.domainSelectorService.expandTreeToDomain(e),this.searchSelectNodeId=e,Object(m.p)(function(){var n=t.treeTableBody.nativeElement,i=t.elRef.nativeElement.querySelector('[domain-node-id="'+e+'"]');Object(m.s)(n,i,100)})):this.nzMessage.info(this.translate.instant(this.notInTreeTooltip))},e.prototype.onExpanded=function(e){return Object(i.b)(this,void 0,void 0,function(){return Object(i.e)(this,function(t){return e.expanded=!e.expanded,[2]})})},e.prototype.onFavourite=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,o;return Object(i.e)(this,function(i){switch(i.label){case 0:return(t=this.domainSelectorService.favouriteDomainIdMap[e.id])?[4,this.domainSelectorService.removeFavourite(t.id)]:[3,2];case 1:return i.sent(),[3,5];case 2:return[4,m.d];case 3:return n=i.sent(),o=this.addFavouriteReqConfig(e,n),[4,this.domainSelectorService.addFavourite(o)];case 4:i.sent(),i.label=5;case 5:return[2]}})})},e.prototype.watchSearch=function(){var e=this;this.onSearch$.pipe(Object(s.a)(this.onDestory$),Object(d.a)(function(t){t||(e.showSearchDropDown=!1)}),Object(p.a)(200),Object(u.a)(function(e){return Boolean(e)&&e.length>=2}),Object(d.a)(function(){e.showSearchDropDown=!0,e.searchLoading=!0}),Object(l.a)(function(t){return e.getSearchResult(t)})).subscribe(function(t){e.searchResult=t,e.searchLoading=!1,e.prevKeyword=e.searchKeyword},function(){e.searchLoading=!1})},e.prototype.getSearchResult=function(e){if(e===this.prevKeyword)return Object(a.a)(this.searchResult);var t=this.searchReqConfig(e);return this.domainSelectorService.querySearchResult(t)},e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](g.e),c["\u0275\u0275directiveInject"](f.c),c["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["domain-selector"]],viewQuery:function(e,t){var n;1&e&&c["\u0275\u0275viewQuery"](He,1),2&e&&c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.treeTableBody=n.first)},inputs:{title:"title",multi:"multi",zIndex:"zIndex",isDisabled:"isDisabled",disableTooltip:"disableTooltip",notInTreeTooltip:"notInTreeTooltip",comfirmBtTitle:"comfirmBtTitle",defaultSelected:"defaultSelected",fullTreeReqConfig:"fullTreeReqConfig",addFavouriteReqConfig:"addFavouriteReqConfig",favouriteReqConfig:"favouriteReqConfig",searchReqConfig:"searchReqConfig",defaultMode:"defaultMode",isFromDeliverRR:"isFromDeliverRR",sourceDomainId:"sourceDomainId"},outputs:{close:"close",confirm:"confirm"},features:[c["\u0275\u0275ProvidersFeature"]([h.a])],decls:65,vars:58,consts:[[1,"mask",3,"ngStyle"],[1,"container","border-ra-3"],[1,"title-bar","flex-box"],[1,"title"],[1,"icons"],[1,"iconfont","icon-close",3,"click"],[1,"content","flex-box"],[1,"left","flex-box"],[1,"favourites","loading-wrapper"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"groups","loading-wrapper"],[4,"ngIf"],[1,"right"],["clickElementOutside","",1,"search-bar",3,"clickOutside"],[1,"iconfont","icon-search","search-icon"],["type","text",1,"search-input",3,"placeholder","ngModel","ngModelChange","focus"],[1,"search-dropdown",3,"hidden"],["class","loading",4,"ngIf","ngIfElse"],["result",""],[1,"domain-tree","loading-wrapper"],[1,"table-header"],[1,"domain-name"],[1,"domain-type"],[1,"owner"],[1,"operators"],[1,"table-body"],["treeTableBody",""],[1,"container-footer"],[1,"selected"],[1,"f-16"],[1,"bts"],["class","bt save-to-group","nz-dropdown","","nzTrigger","click","nzPlacement","topRight",3,"nzDropdownMenu","nzVisible","nzVisibleChange",4,"ngIf"],[1,"bt","confirm",3,"ngClass","click"],["saveToGroupMenu",""],[3,"close",4,"ngIf"],["domainNode",""],["loadingTpl",""],[3,"nzAnimated"],[3,"nzTitle"],["groupCardTemplate",""],[3,"disableGroupCheck","addSuccess"],["systemGroupcardTemplate",""],[3,"multi","isFromDeliverRR","domainId"],[1,"iconfont","icon-group"],[1,"iconfont","icon-layer"],[3,"disableGroupCheck","defaultMode","addSuccess"],[1,"loading"],["nz-icon","","nzType","loading","nzTheme","outline"],[3,"screenSize","keyword","searchResult","domainSelect"],["class","selected-item",4,"ngFor","ngForOf"],[1,"selected-item"],[1,"iconfont","icon-cancel","cursor-pointer","f-12",3,"click"],["nz-dropdown","","nzTrigger","click","nzPlacement","topRight",1,"bt","save-to-group",3,"nzDropdownMenu","nzVisible","nzVisibleChange"],[3,"close"],[2,"list-style","none","padding-left","0"],[4,"ngFor","ngForOf"],[1,"domain-item",3,"ngClass"],[1,"m-r-10","radio-icon","iconfont","check-box",3,"ngClass","click"],[1,"expand-title",3,"ngStyle"],["class","ant-table-row-expand-icon expand-icon",3,"ngClass","click",4,"ngIf"],["nz-tooltip","",1,"title","text-omit",3,"nzTooltipTitle","ngClass","title","click"],[1,"domain-type","text-omit"],[1,"owner","text-omit"],["class","iconfont icon-xing1 favourite-add cursor-pointer","nz-popconfirm","",3,"nzPopconfirmTitle","nzPopconfirmTrigger","nzOnConfirm",4,"ngIf","ngIfElse"],["addFavIcon",""],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomRight",1,"iconfont","icon-add-group","group-add","cursor-pointer","m-l-10",3,"nzDropdownMenu","nzVisible","nzVisibleChange"],["addToGroupMenu",""],[3,"node","close",4,"ngIf"],[1,"ant-table-row-expand-icon","expand-icon",3,"ngClass","click"],["nz-popconfirm","",1,"iconfont","icon-xing1","favourite-add","cursor-pointer",3,"nzPopconfirmTitle","nzPopconfirmTrigger","nzOnConfirm"],[1,"iconfont","cursor-pointer","icon-star-outline",3,"click"],[3,"node","close"],["class","loading",4,"ngIf"]],template:function(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",4),c["\u0275\u0275elementStart"](7,"i",5),c["\u0275\u0275listener"]("click",function(){return t.close.next()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",6),c["\u0275\u0275elementStart"](9,"div",7),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275element"](11,"favourite-card"),c["\u0275\u0275template"](12,Ge,1,0,"ng-container",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",10),c["\u0275\u0275template"](14,Ke,10,7,"ng-container",11),c["\u0275\u0275pipe"](15,"isEmpty"),c["\u0275\u0275template"](16,Xe,2,2,"ng-container",11),c["\u0275\u0275pipe"](17,"isEmpty"),c["\u0275\u0275template"](18,Ye,1,0,"ng-container",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",12),c["\u0275\u0275elementStart"](20,"div",13),c["\u0275\u0275listener"]("clickOutside",function(){return t.showSearchDropDown=!1}),c["\u0275\u0275element"](21,"i",14),c["\u0275\u0275elementStart"](22,"input",15),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.onSearch$.next(e)})("focus",function(){return t.onSearchFocus(t.searchKeyword)})("ngModelChange",function(e){return t.searchKeyword=e}),c["\u0275\u0275pipe"](23,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",16),c["\u0275\u0275template"](25,Qe,2,0,"div",17),c["\u0275\u0275template"](26,Je,1,3,"ng-template",null,18,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",19),c["\u0275\u0275template"](29,Ze,1,0,"ng-container",9),c["\u0275\u0275elementStart"](30,"div",20),c["\u0275\u0275elementStart"](31,"div",21),c["\u0275\u0275text"](32),c["\u0275\u0275pipe"](33,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",22),c["\u0275\u0275text"](35),c["\u0275\u0275pipe"](36,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"div",23),c["\u0275\u0275text"](38),c["\u0275\u0275pipe"](39,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](40,"div",24),c["\u0275\u0275text"](41),c["\u0275\u0275pipe"](42,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](43,"div",25,26),c["\u0275\u0275template"](45,et,1,0,"ng-container",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](46,"div",27),c["\u0275\u0275elementStart"](47,"div",28),c["\u0275\u0275elementStart"](48,"div",29),c["\u0275\u0275text"](49),c["\u0275\u0275pipe"](50,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](51,nt,2,1,"ng-container",11),c["\u0275\u0275template"](52,ot,2,1,"ng-container",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](53,"div",30),c["\u0275\u0275template"](54,rt,3,5,"button",31),c["\u0275\u0275elementStart"](55,"button",32),c["\u0275\u0275listener"]("click",function(){return t.onConfirm()}),c["\u0275\u0275text"](56),c["\u0275\u0275pipe"](57,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](58,"nz-dropdown-menu",null,33),c["\u0275\u0275template"](60,at,1,0,"group-selector-single",34),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](61,ft,2,1,"ng-template",null,35,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275template"](63,bt,1,1,"ng-template",null,36,c["\u0275\u0275templateRefExtractor"])),2&e){var n=c["\u0275\u0275reference"](27),i=c["\u0275\u0275reference"](62),o=c["\u0275\u0275reference"](64);c["\u0275\u0275property"]("ngStyle",c["\u0275\u0275pureFunction1"](48,Ct,t.zIndex)),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](5,28,t.title)),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",c["\u0275\u0275pureFunction1"](50,yt,t.favouritesLoading)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",!c["\u0275\u0275pipeBind1"](15,30,t.defaultMode)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",c["\u0275\u0275pipeBind1"](17,32,t.defaultMode)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",c["\u0275\u0275pureFunction1"](52,yt,t.groupLoading)),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("placeholder",c["\u0275\u0275pipeBind1"](23,34,"DOMAIN_SELECTOR_TREE_SEARCH_PLACEHOLDER"))("ngModel",t.searchKeyword),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("hidden",!t.showSearchDropDown),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.searchLoading)("ngIfElse",n),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",c["\u0275\u0275pureFunction1"](54,yt,t.treeLoading)),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](33,36,"DOMAIN")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](36,38,"TYPE")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](39,40,"OWNER")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](42,42,"OPERATE")),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",c["\u0275\u0275pureFunction1"](56,xt,t.domainSelectorService.domainTree)),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind1"](50,44,"DOMAIN_SELECTOR_SELECTED"),": "),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",!t.isFromSystemGroup),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.isFromSystemGroup),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.showSaveToGroup&&!t.isFromSystemGroup),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",t.confirmDisabled?"disabled":""),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](57,46,t.comfirmBtTitle)),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",t.saveToGroupVisiable)}},directives:[b.o,S,b.s,b.n,E.a,M.d,M.k,M.l,b.l,P.d,I.b,I.a,Q,ue,me.a,D.a,he.a,b.m,P.b,Pe,C.d,y.a,Ue],pipes:[f.b,We.a,x.a],styles:[".mask[_ngcontent-%COMP%]{position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.4);overflow:auto}.mask[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{background:#fff;width:60%;margin:80px auto;min-width:1200px;height:80%;min-height:530px;padding:0}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]{flex:0 0 50px;height:50px;line-height:50px;padding:0 16px;justify-content:space-between}.container[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.container[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{font-size:18px}.container[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]:hover{color:#23c6c8}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1 1 auto;align-items:stretch;border-top:1px solid #dbdbdb;border-bottom:1px solid #dbdbdb;background:#fff}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{flex:1 1 0px;flex-direction:column;border-right:1px solid #dbdbdb}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:2 1 0px}.container[_ngcontent-%COMP%]   .container-footer[_ngcontent-%COMP%]{flex:0 0 55px}.left[_ngcontent-%COMP%]   .favourites[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]{flex:1 1 100px;overflow:hidden}.left[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]{border-top:1px solid #dbdbdb}.left[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]     .ant-tabs-content{overflow-y:auto}.left[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]     .ant-tabs>.ant-tabs-nav{margin:0}.right[_ngcontent-%COMP%]{background-color:#fff;padding:12px;display:flex;flex-direction:column}.right[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{flex:0 0 40px;margin-bottom:10px}.right[_ngcontent-%COMP%]   .domain-tree[_ngcontent-%COMP%]{flex:1 1 100px;overflow:hidden;display:flex;flex-direction:column}.right[_ngcontent-%COMP%]   .domain-tree[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{flex:0 0 auto}.right[_ngcontent-%COMP%]   .domain-tree[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]{flex:1 1 100px;overflow:hidden scroll}.domain-tree[_ngcontent-%COMP%]   .domain-item[_ngcontent-%COMP%], .domain-tree[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:flex;height:46px;line-height:46px}.domain-tree[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{font-size:14px;font-weight:700;line-height:46px;background-color:#f0f0f0;border-bottom:1px solid #c4c4c4;padding-right:8px}.domain-tree[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .domain-name[_ngcontent-%COMP%]{padding-left:62px}.domain-tree[_ngcontent-%COMP%]   .domain-item[_ngcontent-%COMP%]{padding-left:10px;border-bottom:1px solid #d7d7d7}.domain-tree[_ngcontent-%COMP%]   .domain-item[_ngcontent-%COMP%]:hover{background-color:#eee}.domain-tree[_ngcontent-%COMP%]   .domain-item.search-selected[_ngcontent-%COMP%]{background-color:rgba(35,198,200,.18)}.domain-tree[_ngcontent-%COMP%]   .children-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:46px;border-bottom:1px solid #d7d7d7}.domain-tree[_ngcontent-%COMP%]   .children-loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:24px;color:#23c6c8}.domain-tree[_ngcontent-%COMP%]   .domain-name[_ngcontent-%COMP%]{padding-left:2px;flex:1 1 auto;overflow:hidden;display:flex}.domain-tree[_ngcontent-%COMP%]   .domain-name[_ngcontent-%COMP%]   .check-box.checked[_ngcontent-%COMP%]{color:#23c6c8}.domain-tree[_ngcontent-%COMP%]   .domain-name[_ngcontent-%COMP%]   .expand-title[_ngcontent-%COMP%]{display:flex;align-items:center}.domain-tree[_ngcontent-%COMP%]   .domain-name[_ngcontent-%COMP%]   .expand-title[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{margin-right:8px;float:none;flex:0 0 auto}.domain-tree[_ngcontent-%COMP%]   .domain-type[_ngcontent-%COMP%]{flex:0 0 80px}.domain-tree[_ngcontent-%COMP%]   .owner[_ngcontent-%COMP%]{flex:0 0 120px}.domain-tree[_ngcontent-%COMP%]   .operators[_ngcontent-%COMP%]{flex:0 0 80px}.domain-tree[_ngcontent-%COMP%]   .operators[_ngcontent-%COMP%]   .favourite-add[_ngcontent-%COMP%]{color:#f9c73d}.container-footer[_ngcontent-%COMP%]{padding:12px;display:flex;align-items:center}.container-footer[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:center}.container-footer[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]{padding:0 4px 0 8px;margin:4px;border-radius:3px;background-color:#f0f0f0;font-size:13px;line-height:26px}.container-footer[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{color:#bdbdbd;margin-left:4px}.container-footer[_ngcontent-%COMP%]   .bts[_ngcontent-%COMP%]{flex:0 0 auto}.container-footer[_ngcontent-%COMP%]   .bts[_ngcontent-%COMP%]   .bt[_ngcontent-%COMP%]{padding:0 10px;min-width:80px;height:30px;line-height:30px;margin-left:8px;border:none;border-radius:4px;outline:none}.container-footer[_ngcontent-%COMP%]   .bts[_ngcontent-%COMP%]   .save-to-group[_ngcontent-%COMP%]{background-color:#f0f0f0;border:1px solid #f0f0f0}.container-footer[_ngcontent-%COMP%]   .bts[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]{border:1px solid #23c6c8;background-color:#fff;color:#23c6c8}.container-footer[_ngcontent-%COMP%]   .bts[_ngcontent-%COMP%]   .confirm.disabled[_ngcontent-%COMP%]{border-color:#dbdbdb;color:#bdbdbd;background-color:#f0f0f0;opacity:1}.search-bar[_ngcontent-%COMP%]{border-bottom:1px solid #d7d7d7;display:flex;align-items:center;line-height:40px;position:relative}.search-bar[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{margin-right:8px}.search-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1 1 auto;border:none;outline:none}.search-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::-moz-placeholder{color:#999}.search-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#999}.search-bar[_ngcontent-%COMP%]   .search-dropdown[_ngcontent-%COMP%]{position:absolute;z-index:1;left:0;right:0;bottom:0;transform:translateY(100%);max-height:400px;overflow:auto;background-color:#fff;box-shadow:0 0 5px rgba(0,0,0,.2);border-radius:4px}.search-bar[_ngcontent-%COMP%]   .search-dropdown[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px;font-size:24px;color:#23c6c8}",".loading-wrapper[_ngcontent-%COMP%]{position:relative}.loading-wrapper[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.7);position:absolute;left:0;top:0;right:0;bottom:0;z-index:1;display:flex;justify-content:center;align-items:center;font-size:32px;color:#23c6c8}"]}),e}()},cnMA:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("ofXK"),o=n("zAKX"),r=n("eHCX"),a=n("5vDB"),c=n("TaO5"),l=n("sYmb"),s=n("3Pt+"),d=n("bE2y"),p=n("fXoL"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[i.c,o.g,l.a,s.g,c.b,r.b,a.b,d.d]]}),e}()},"d/Su":function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return d});var i=n("VRyK"),o=n("xgIS"),r=n("1G5W"),a=n("AytR").a.GRAY_WIKI_COLLAB_DOMAIN_IDS,c={hiddenButtons:["cmdPreview"],fullscreen:{enable:!1,icons:{}},autoGrowing:!0};function l(e,t,n){var a=t.nativeElement;Object(i.a)(e.resizeObserver.observe(a),Object(o.a)(window,"resize")).pipe(Object(r.a)(e.onDestroy$)).subscribe(function(){var t=a.clientWidth;(!n&&null===localStorage.getItem("normalWikiOutlineCollapse")||n&&null===localStorage.getItem("workitemWikiOutlineCollapse"))&&(e.outlineCollapse=t<1600),(!n&&null===localStorage.getItem("normalWikiShowTemplate")||n&&null===localStorage.getItem("workitemWikiShowTemplate"))&&(e.showTemplate=t>=1e3)})}function s(e){83==window.event.keyCode&&event.ctrlKey&&(event.preventDefault(),e())}function d(){if("OPEN_ALL"===a)return!0;var e=location.href.match(/domains\/(\d+)\/wiki/);if(!e)return!1;var t=e[1];return a.split(",").includes(t)}},eJlN:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("mrSG"),o=n("AWuS"),r=n("Cfvw"),a=n("lJxs"),c=n("vkgz"),l=n("eIep"),s=n("UXun"),d=n("AA4e");function p(e,t){return void 0===t&&(t={}),e.forEach(function(e){t[e.id]=e,e.relations&&e.relations.length>0&&p(e.relations,t)}),t}function u(e,t){void 0===t&&(t=null),e.forEach(function(e){e.parentNode=t,e.relations&&e.relations.length>0&&u(e.relations,e)})}var m=n("fXoL"),h=n("tk/3"),g=n("bNXi"),f=n("sYmb"),v=function(){function e(e,t,n){this.http=e,this.nzNotification=t,this.translate=n,this.favourites=[],this.favouriteDomainIdMap={},this.selectedDomains=[],this.selectDomainIdMap={},this.selectedDomainsFromSystemGroup=[],this.selectDomainIdMapFromSystemGroup={},this.domainTree=[],this.domainTreeIdMap={},this.groups=[],this.openedGroupIdMap={}}return Object.defineProperty(e.prototype,"treeNodes",{get:function(){var e=this;return Object.keys(this.domainTreeIdMap).map(function(t){return e.domainTreeIdMap[t]})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allLoaded",{get:function(){var e=this.treeNodes;return 0!==e.length&&e.every(function(e){return e.children_count===e.relations.length})},enumerable:!1,configurable:!0}),e.prototype.queryFullTree=function(e){return this.getRequest(e).pipe(Object(a.a)(function(e){return e.data}))},e.prototype.querySearchResult=function(e){return this.getRequest(e).pipe(Object(a.a)(function(e){return e.data}))},e.prototype.loadPreferDomain=function(e){return this.getRequest(e).pipe(Object(a.a)(function(e){return e.data}))},e.prototype.onCompInit=function(e){this.compIns=e},e.prototype.addFavouriteToList=function(e){this.favourites.unshift(e),"Domain"===e.domain_type&&(this.favouriteDomainIdMap[e.domain_id]=e)},e.prototype.removeFavouriteFromList=function(e){var t=this.favourites,n=t.findIndex(function(t){return t.id===e}),i=t[n];n>-1&&t.splice(n,1),"Domain"===i.domain_type&&delete this.favouriteDomainIdMap[i.domain_id]},e.prototype.addSelectToList=function(e){var t;this.compIns.multi?(this.selectedDomains.push(e),this.selectDomainIdMap[e.id]=e):(this.selectedDomains=[e],this.selectDomainIdMap=((t={})[e.id]=e,t))},e.prototype.removeSelectFromList=function(e){var t=this.selectedDomains,n=t.findIndex(function(t){return t.id===e});n>-1&&t.splice(n,1),delete this.selectDomainIdMap[e]},e.prototype.removeGroupAt=function(e){this.groups.splice(e,1)},e.prototype.removeFavourite=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,r;return Object(i.e)(this,function(i){switch(i.label){case 0:t="/vision-configuration-center/api/user_center/domain_stores/"+e,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.http.delete(t).toPromise()];case 2:return 200===(n=i.sent()).code?this.removeFavouriteFromList(e):this.nzNotification.error(this.translate.instant("DELETE_FAILED"),n.message),[3,4];case 3:return r=i.sent(),Object(o.b)(r),[3,4];case 4:return[2]}})})},e.prototype.addFavourite=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n;return Object(i.e)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getRequest(e).toPromise()];case 1:return 200===(t=i.sent()).code?this.addFavouriteToList(t.data):this.nzNotification.error(this.translate.instant("res.message"),t.message),[3,3];case 2:return n=i.sent(),Object(o.b)(n),[3,3];case 3:return[2]}})})},e.prototype.updateTreeNodeIdMap=function(e){p(e,this.domainTreeIdMap)},e.prototype.onTreeNodeSelected=function(e){Boolean(this.selectDomainIdMap[e.id])?this.removeSelectFromList(e.id):this.addSelectToList(e)},e.prototype.onFavouriteSelected=function(e){var t="Cloud_Service"===e.domain_type?e.product_info.related_domain:Object(i.a)(Object(i.a)({},e),{id:e.domain_id}),n=t.id;Boolean(this.selectDomainIdMap[n])?this.removeSelectFromList(n):this.addSelectToList(t)},e.prototype.domainTitle=function(e){return"en"===this.translate.currentLang&&e.title_en||e.title},e.prototype.expandTreeToDomain=function(e){var t=this.domainTreeIdMap[e];if(t)for(;t.parentNode;)t.parentNode.expanded=!0,t=t.parentNode},e.prototype.domainDisabled=function(e){var t=this.domainTreeIdMap[e.id];return!t||this.compIns.isDisabled(t)},e.prototype.disabledToolTip=function(e){var t=this.domainTreeIdMap[e.id];return t?this.compIns.disableTooltip(t):this.compIns.notInTreeTooltip},e.prototype.loadFavourites=function(e){var t=this;return this.getRequest(e).pipe(Object(a.a)(function(e){return e.data}),Object(c.a)(function(e){e.reverse().forEach(function(e){return t.addFavouriteToList(e)})}))},e.prototype.loadGroups=function(){var e=this;return Object(r.a)(d.d).pipe(Object(l.a)(function(t){return e.http.get("/vision-preference/api/v1/query/"+t.user_id+"/groups").pipe(Object(a.a)(function(e){return e.data}),Object(c.a)(function(t){e.groups=t}))}))},e.prototype.addGroup=function(e){var t=this;return Object(r.a)(d.d).pipe(Object(l.a)(function(n){return t.http.post("/vision-preference/api/v1/add/group",[{groupName:e,userId:n.user_id}]).pipe(Object(a.a)(function(e){return e.data}))}))},e.prototype.renameGroup=function(e,t){var n=this;return Object(r.a)(d.d).pipe(Object(l.a)(function(i){return n.http.put("/vision-preference/api/v1/update/group",{groupName:t,userId:i.user_id,groupNumber:e}).pipe(Object(a.a)(function(e){return e.data}))}))},e.prototype.removeGroup=function(e){return this.http.delete("/vision-preference/api/v1/delete/group/"+e).pipe(Object(a.a)(function(e){return e.data}))},e.prototype.addToGroups=function(e){var t=this;return Object(r.a)(d.d).pipe(Object(l.a)(function(n){var i=e.map(function(e){return{domainId:e.domainId,userId:n.user_id,groupNumber:e.groupNumber}});return t.http.post("/vision-preference/api/v1/add/domain/to/group",i).pipe(Object(a.a)(function(e){return e.data}))}))},e.prototype.removeFromGroup=function(e){return this.http.put("/vision-preference/api/v1/delete/group/domains",e).pipe(Object(a.a)(function(e){return e.data}))},e.prototype.getRequest=function(e){switch(e.method){case"GET":return this.http.get(e.url,{params:e.params});case"POST":return this.http.post(e.url,e.body,{params:e.params});case"PUT":return this.http.put(e.url,e.body,{params:e.params})}},e.prototype.loadFullTree=function(e,t){var n=this;if(void 0===t&&(t=!0),this.fullTreeCache$&&t)return this.fullTreeCache$;var i=this.queryFullTree(e).pipe(Object(a.a)(function(e){return e instanceof Array?e:[e]}),Object(c.a)(function(e){u(e),n.domainTree=e,n.updateTreeNodeIdMap(e)}),Object(s.a)(1));return this.fullTreeCache$=i,i},e.prototype.isSystemRelateDomainInTree=function(e){return!!this.domainTreeIdMap[e.id]},e.prototype.onTreeNodeSelectedFromSystem=function(e){this.onTreeNodeSelected(e),Boolean(this.selectDomainIdMapFromSystemGroup[e.id])?this.removeSelectFromSystemList(e.id):this.addSelectDomainToSystemList(e)},e.prototype.removeSelectFromSystemList=function(e){var t=this.selectedDomainsFromSystemGroup,n=t.findIndex(function(t){return t.id===e});n>-1&&t.splice(n,1),delete this.selectDomainIdMapFromSystemGroup[e]},e.prototype.addSelectDomainToSystemList=function(e){var t;this.compIns.multi?(this.selectedDomainsFromSystemGroup.push(e),this.selectDomainIdMapFromSystemGroup[e.id]=e):(this.selectedDomainsFromSystemGroup=[e],this.selectDomainIdMapFromSystemGroup=((t={})[e.id]=e,t))},e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275inject"](h.c),m["\u0275\u0275inject"](g.b),m["\u0275\u0275inject"](f.c))},e.\u0275prov=m["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()},ebHz:function(e,t,n){"use strict";n.d(t,"a",function(){return K});var i=n("mrSG"),o=n("fXoL"),r=n("itXk"),a=n("hbEN"),c=n("XIp8"),l=n("CpTu"),s=n("lE2N"),d=n("A/Mn"),p=n("bNXi"),u=n("sYmb"),m=n("UJq8"),h=n("ofXK"),g=n("eHCX"),f=n("zAKX"),v=n("3Pt+");function b(e,t){if(1&e&&o["\u0275\u0275element"](0,"input",23),2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("checked","default"==n.selectedAccessType)}}function C(e,t){1&e&&o["\u0275\u0275element"](0,"img",24),2&e&&o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/arrow.svg",o["\u0275\u0275sanitizeUrl"])}function y(e,t){1&e&&o["\u0275\u0275element"](0,"img",25),2&e&&o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/arrow.svg",o["\u0275\u0275sanitizeUrl"])}function x(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"SPACE_VISIBILE")))}function w(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"PUBLIC_VISIBILE")))}function _(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"PRIVACY_VISIBILE")))}function O(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",30),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("nzEllipsisRows",1),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.visibleContent," ")}}function S(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",30),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("nzEllipsisRows",1),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.editContent," ")}}function E(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",26),o["\u0275\u0275elementStart"](1,"div",27),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275template"](4,x,3,3,"span",5),o["\u0275\u0275template"](5,w,3,3,"span",5),o["\u0275\u0275template"](6,_,3,3,"span",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div"),o["\u0275\u0275elementStart"](8,"div",28),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,O,2,2,"p",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div"),o["\u0275\u0275elementStart"](13,"div",28),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](16,S,2,2,"p",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,8,"CURRENT_PERMISSION")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",0==n.defaultParentVal),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",4==n.defaultParentVal||1==n.defaultParentVal),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1==n.defaultParentVal),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](10,10,"AVAILABLE_MEMBERS")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.visibleContent.length),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](15,12,"EDITABLE_MEMBERS")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.editContent.length)}}function M(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"label",20),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).setAccessType("default")}),o["\u0275\u0275elementStart"](2,"div",7),o["\u0275\u0275template"](3,b,1,1,"input",21),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275template"](6,C,1,1,"img",14),o["\u0275\u0275template"](7,y,1,1,"img",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",9),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,E,17,14,"div",22),o["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,6,"DEFAULT_VISIBILE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf","default"!=i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","default"==i.selectedAccessType),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](10,8,"ARTICLES_DEFAULT_DESE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf","default"==i.selectedAccessType)}}function P(e,t){1&e&&o["\u0275\u0275element"](0,"img",24),2&e&&o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/arrow.svg",o["\u0275\u0275sanitizeUrl"])}function I(e,t){1&e&&o["\u0275\u0275element"](0,"img",25),2&e&&o["\u0275\u0275property"]("src","/knowledge-ui/assets/imgs/arrow.svg",o["\u0275\u0275sanitizeUrl"])}function k(e,t){1&e&&o["\u0275\u0275element"](0,"i",42)}function T(e,t){1&e&&o["\u0275\u0275element"](0,"i",43)}function D(e,t){1&e&&o["\u0275\u0275element"](0,"i",42)}function A(e,t){1&e&&o["\u0275\u0275element"](0,"i",43)}function z(e,t){1&e&&o["\u0275\u0275element"](0,"i",42)}function R(e,t){1&e&&o["\u0275\u0275element"](0,"i",43)}function L(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nz-option",34),o["\u0275\u0275elementStart"](1,"div",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](3).selectDomainIdFunc(e)}),o["\u0275\u0275template"](2,z,1,0,"i",36),o["\u0275\u0275template"](3,R,1,0,"i",37),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("nzValue",i)("nzLabel",i.name)("nzCustomContent",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",r.selectDomainId==i.id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.selectDomainId!=i.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",i.name," ")}}function N(e,t){1&e&&o["\u0275\u0275element"](0,"i",48)}function j(e,t){1&e&&o["\u0275\u0275element"](0,"i",49)}function V(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nz-option",34),o["\u0275\u0275elementStart"](1,"div",44),o["\u0275\u0275template"](2,N,1,0,"i",45),o["\u0275\u0275template"](3,j,1,0,"i",46),o["\u0275\u0275text"](4),o["\u0275\u0275elementStart"](5,"span",47),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzValue",n)("nzLabel",(null==n?null:n.name)+" "+(null==n?null:n.account))("nzCustomContent",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.isSelected),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isSelected),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](null==n?null:n.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](null==n?null:n.account)}}function F(e,t){1&e&&o["\u0275\u0275element"](0,"i",50)}function B(e,t){1&e&&o["\u0275\u0275element"](0,"i",42)}function U(e,t){1&e&&o["\u0275\u0275element"](0,"i",43)}function W(e,t){1&e&&o["\u0275\u0275element"](0,"i",48)}function H(e,t){1&e&&o["\u0275\u0275element"](0,"i",49)}function G(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nz-option",34),o["\u0275\u0275elementStart"](1,"div",44),o["\u0275\u0275template"](2,W,1,0,"i",45),o["\u0275\u0275template"](3,H,1,0,"i",46),o["\u0275\u0275text"](4),o["\u0275\u0275elementStart"](5,"span",47),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzValue",n)("nzLabel",(null==n?null:n.name)+" "+(null==n?null:n.account))("nzCustomContent",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.isSelected),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isSelected),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](null==n?null:n.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](null==n?null:n.account)}}function q(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",31),o["\u0275\u0275elementStart"](2,"div",32),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"nz-select",33),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).visiableSelectedUserList=e})("nzOnSearch",function(e){o["\u0275\u0275restoreView"](n);var t=o["\u0275\u0275nextContext"](2);return t.searchIcon="visiable",t.onSearch(e)})("ngModelChange",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).handlerSelectedUser("visiable")}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementStart"](7,"nz-option",34),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementStart"](9,"div",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](2);return e.selectDomainIdFunc(e.allDomainObj)}),o["\u0275\u0275template"](10,k,1,0,"i",36),o["\u0275\u0275template"](11,T,1,0,"i",37),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"nz-option",34),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementStart"](16,"div",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](2);return e.selectDomainIdFunc(e.currentDomainInfo)}),o["\u0275\u0275template"](17,D,1,0,"i",36),o["\u0275\u0275template"](18,A,1,0,"i",37),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"nz-option-group",38),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275template"](23,L,5,6,"nz-option",39),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"nz-option-group",38),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275template"](26,V,7,7,"nz-option",39),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](27,F,1,0,"ng-template",null,40,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",31),o["\u0275\u0275elementStart"](30,"div",32),o["\u0275\u0275text"](31),o["\u0275\u0275pipe"](32,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](33,"nz-select",41),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).editableSelectedUserList=e})("nzOnSearch",function(e){o["\u0275\u0275restoreView"](n);var t=o["\u0275\u0275nextContext"](2);return t.searchIcon="edit",t.onSearch(e)})("ngModelChange",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).handlerSelectedUser("editable")}),o["\u0275\u0275pipe"](34,"translate"),o["\u0275\u0275elementStart"](35,"nz-option",34),o["\u0275\u0275pipe"](36,"translate"),o["\u0275\u0275elementStart"](37,"div",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](2);return e.selectEditDomainIdFunc(e.currentDomainInfo)}),o["\u0275\u0275template"](38,B,1,0,"i",36),o["\u0275\u0275template"](39,U,1,0,"i",37),o["\u0275\u0275text"](40),o["\u0275\u0275pipe"](41,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](42,"nz-option-group",38),o["\u0275\u0275pipe"](43,"translate"),o["\u0275\u0275template"](44,G,7,7,"nz-option",39),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=o["\u0275\u0275reference"](28),r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,42,"PARTIALLY_AVAILABLE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzPlaceHolder",o["\u0275\u0275pipeBind1"](6,44,"ACCESS_SEARTCH_PLACEHOLDER"))("nzShowArrow",!0)("nzSuffixIcon",i)("ngModel",r.visiableSelectedUserList)("nzDropdownClassName","select-dropdown")("compareWith",r.compareFn)("nzServerSearch",!0)("nzFilterOption",r.nzFilterOption),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzValue",r.allDomainObj)("nzLabel",o["\u0275\u0275pipeBind1"](8,46,"ALL_SYSTEM_MEMBERS"))("nzCustomContent",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",r.selectDomainId==r.allDomainObj.id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.selectDomainId!=r.allDomainObj.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](13,48,"ALL_SYSTEM_MEMBERS")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzValue",r.currentDomainInfo)("nzLabel",o["\u0275\u0275pipeBind1"](15,50,"CURRENT_SPACE_MEMBER"))("nzCustomContent",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",r.selectDomainId==r.currentDomainInfo.id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.selectDomainId!=r.currentDomainInfo.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](20,52,"CURRENT_SPACE_MEMBER")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzLabel",o["\u0275\u0275pipeBind1"](22,54,"OTHER_SPACE_MEMBERS")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",r.domainArr),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzLabel",o["\u0275\u0275pipeBind1"](25,56,"PERSONAL_USER")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",r.optionListVisible),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](32,58,"PARTIALLY_EDITABLE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzPlaceHolder",o["\u0275\u0275pipeBind1"](34,60,"ACCESS_SEARTCH_PLACEHOLDER"))("nzShowArrow",!0)("nzSuffixIcon",i)("ngModel",r.editableSelectedUserList)("nzFilterOption",r.nzFilterOption)("nzServerSearch",!0)("nzDropdownClassName","select-dropdown-two")("compareWith",r.compareFn),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzValue",r.currentDomainInfo)("nzLabel",o["\u0275\u0275pipeBind1"](36,62,"CURRENT_SPACE_MEMBER"))("nzCustomContent",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",r.selectEditDomainId==r.currentDomainInfo.id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.selectEditDomainId!=r.currentDomainInfo.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](41,64,"CURRENT_SPACE_MEMBER")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzLabel",o["\u0275\u0275pipeBind1"](43,66,"PERSONAL_USER")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",r.optionListEdit)}}function $(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",3),o["\u0275\u0275elementStart"](1,"div",4),o["\u0275\u0275template"](2,M,12,10,"ng-container",5),o["\u0275\u0275elementStart"](3,"label",6),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().setAccessType("public")}),o["\u0275\u0275elementStart"](4,"div",7),o["\u0275\u0275element"](5,"input",8),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",9),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"label",10),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().setAccessType("domain")}),o["\u0275\u0275elementStart"](12,"div",7),o["\u0275\u0275element"](13,"input",11),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",9),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"label",12),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().setAccessType("privacy")}),o["\u0275\u0275elementStart"](20,"div",7),o["\u0275\u0275element"](21,"input",13),o["\u0275\u0275text"](22),o["\u0275\u0275pipe"](23,"translate"),o["\u0275\u0275template"](24,P,1,1,"img",14),o["\u0275\u0275template"](25,I,1,1,"img",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"div",9),o["\u0275\u0275text"](27),o["\u0275\u0275pipe"](28,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",16),o["\u0275\u0275template"](30,q,45,68,"ng-container",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"div",17),o["\u0275\u0275elementStart"](32,"button",18),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().closeModal()}),o["\u0275\u0275pipe"](33,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](34,"button",19),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().accessControlSet()}),o["\u0275\u0275pipe"](35,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.articleDetails),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("checked","public"==i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,15,"PUBLIC_VISIBILE")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](10,17,"PUBLIC_OPTION_DESC")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("checked","domain"==i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,19,"SPACE_VISIBILE")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](18,21,"SPACE_DESC")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("checked","privacy"==i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](23,23,"PRIVACY_VISIBILE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf","privacy"!=i.selectedAccessType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","privacy"==i.selectedAccessType),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](28,25,"PRIVACY_DESC")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf","privacy"==i.selectedAccessType),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](33,27,"COMMON_BUTTON_CANCLE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](35,29,"COMMON_BUTTON_CONFIRM"))}}var K=function(){function e(e,t,n,i){var r=this;this.knowledgeService=e,this.notificationService=t,this.translate=n,this.emitService=i,this.visibleContent="",this.editContent="",this.defaultVisibleList=[],this.defaultEditList=[],this.optionListVisible=[],this.optionListEdit=[],this.visiableSelectedUser=[],this.visiableSelectedUserList=[],this.editableSelectedUser=[],this.editableSelectedUserList=[],this.searchIcon="",this.closeCallback=new o.EventEmitter,this.allDomainObj={id:"all",isSigle:!0,isEditSigle:!0},this.domainArr=[],this.userArr=[],this.successTip=Object(a.a)(function(){r.notificationService.success(r.translate.instant("SUCCESSFUL_OPERATION"),"")},2e3),this.onSearch=Object(a.a)(function(e){r.queryMembers(e)},1e3),this.compareFn=function(e,t){return e&&t?e.id===t.id:e===t},this.nzFilterOption=function(){return!0}}return e.prototype.queryDomainMembers=function(){var e,t,n=this;Object(r.a)(this.knowledgeService.query_members(null===(e=this.currentDomainInfo)||void 0===e?void 0:e.id),this.knowledgeService.query_spaces(null===(t=this.currentDomainInfo)||void 0===t?void 0:t.id)).subscribe(function(e){var t,o,r,a,l,s=Object(i.g)(e,2),d=s[0],p=s[1];(null===(o=null===(t=null==d?void 0:d.data)||void 0===t?void 0:t.self_members)||void 0===o?void 0:o.members)&&(n.userArr=d.data.self_members.members.map(function(e){return e.user}),n.optionListVisible=Object(c.a)(n.userArr),n.optionListEdit=Object(c.a)(n.userArr)),n.domainArr=null===(l=null===(a=p[null===(r=n.currentDomainInfo)||void 0===r?void 0:r.id])||void 0===a?void 0:a.up)||void 0===l?void 0:l.map(function(e){return{id:e.id,name:"en"==n.currentLang?e.title_en:e.title,isSigle:!0,isEditSigle:!0}}),n.getAccessDefault()},function(){})},e.prototype.setAccessType=function(e){var t,n=this;this.selectedAccessType=e,"default"!=e||this.categoryDetails||this.knowledgeService.getWikiParentAccess(null===(t=this.articleDetails)||void 0===t?void 0:t.sn).subscribe(function(e){n.handlerParentAccess(e)},function(){})},e.prototype.handlerParentAccess=function(e){var t,n,i,o,r,a,c,l,s,d,p,u,m,h,g=this;if(this.defaultParentVal=e.visibility,null===(n=null===(t=null==e?void 0:e.user_map)||void 0===t?void 0:t.query)||void 0===n||n.forEach(function(e){g.defaultVisibleList.push(e.name+" "+e.account)}),null===(o=null===(i=null==e?void 0:e.user_map)||void 0===i?void 0:i.update)||void 0===o||o.forEach(function(e){g.defaultEditList.push(e.name+" "+e.account)}),4==this.defaultParentVal||1==this.defaultParentVal)this.defaultVisibleList.unshift(this.translate.instant("PUBLIC_AVAILABLE")+" "),this.defaultEditList.unshift(this.translate.instant("SPACE_EDITABLE")+" ");else if(0==this.defaultParentVal)this.defaultVisibleList.unshift(this.translate.instant("SPACE_AVAILABLE")+" "),this.defaultEditList.unshift(this.translate.instant("SPACE_EDITABLE")+" ");else if(-1==this.defaultParentVal){var f=(null===(a=null===(r=null==e?void 0:e.domain_map)||void 0===r?void 0:r.query)||void 0===a?void 0:a.id)?null===(l=null===(c=null==e?void 0:e.domain_map)||void 0===c?void 0:c.query)||void 0===l?void 0:l.id:null===(s=null==e?void 0:e.domain_map)||void 0===s?void 0:s.query,v=(null===(p=null===(d=null==e?void 0:e.domain_map)||void 0===d?void 0:d.update)||void 0===p?void 0:p.id)?null===(m=null===(u=null==e?void 0:e.domain_map)||void 0===u?void 0:u.update)||void 0===m?void 0:m.id:null===(h=null==e?void 0:e.domain_map)||void 0===h?void 0:h.update;"all"==f?this.defaultVisibleList.unshift(this.translate.instant("PUBLIC_AVAILABLE")+" "):"current"==f?this.defaultVisibleList.unshift(this.translate.instant("SPACE_AVAILABLE")+" "):this.domainArr.forEach(function(e){e.id==f&&g.defaultVisibleList.unshift(e.name+g.translate.instant("SPACE_AVAILABLE")+" ")}),"current"==v&&this.defaultEditList.unshift(this.translate.instant("SPACE_EDITABLE")+" ")}this.visibleContent=this.defaultVisibleList.join(","),this.editContent=this.defaultEditList.join(",")},e.prototype.accessControlSet=function(){var e,t,n,i,o,r=this;switch(this.selectedAccessType){case"default":this.currentVisibilityVal=1;break;case"public":this.currentVisibilityVal=4;break;case"domain":this.currentVisibilityVal=0;break;case"privacy":this.currentVisibilityVal=-1}var a={visibility:this.currentVisibilityVal,domain_map:{query:null!==(e=this.selectDomainId==this.currentDomainInfo.id?"current":this.selectDomainId)&&void 0!==e?e:"",update:this.selectEditDomainId?"current":""},user_map:{query:null!==(n=null===(t=this.visiableSelectedUserList)||void 0===t?void 0:t.filter(function(e){return null==e?void 0:e.username}).map(function(e){return e.id}))&&void 0!==n?n:[],update:null!==(o=null===(i=this.editableSelectedUserList)||void 0===i?void 0:i.filter(function(e){return null==e?void 0:e.username}).map(function(e){return e.id}))&&void 0!==o?o:[]}};if("create-article"===this.visibilityEditModel)return this.closeCallback.emit(a);this.categoryDetails?this.knowledgeService.setCategoryAccess({kanban_id:this.categoryDetails.id,domain_id:this.currentDomainInfo.id,visibility:a.visibility,domain_map:a.domain_map,user_map:a.user_map,sn:this.categoryDetails.sn,id:this.categoryDetails.id}).subscribe(function(e){e.success.length?(r.categoryDetails.visibility=e.success[0].content_new,r.emitService.emit({type:"wiki:category-control-set-success"}),r.successTip(),r.closeModal({visibility:r.categoryDetails.visibility})):r.notificationService.error(r.translate.instant(String(e.failed[0].code)),"")},function(){}):(a.sn=this.articleDetails.sn,a.id=this.articleDetails.id,this.knowledgeService.saveArticleAccess(a).subscribe(function(e){var t,n,i;e?(r.articleDetails.visibility=e.success[0].content_new,r.emitService.emit({type:"wiki:access-control-set-success",data:e.success[0].content_new,sn:null===(t=r.articleDetails)||void 0===t?void 0:t.sn,id:null===(n=r.articleDetails)||void 0===n?void 0:n.id}),r.successTip(),r.closeModal({visibility:r.articleDetails.visibility})):(null===(i=null==e?void 0:e.failed)||void 0===i?void 0:i.length)&&r.notificationService.error(r.translate.instant(String(e.failed[0].code)),"")},function(){}))},e.prototype.closeModal=function(e){this.closeCallback.emit(e)},e.prototype.ngOnInit=function(){var e,t;this.currentLang=this.translate.currentLang,this.categoryDetails&&this.getDomainInfo(),(null===(e=this.articleDetails)||void 0===e?void 0:e.assigned_domain)&&(this.currentDomainInfo=null===(t=this.articleDetails)||void 0===t?void 0:t.assigned_domain,this.currentDomainInfo.isSigle=!0,this.currentDomainInfo.isEditSigle=!0,this.queryDomainMembers())},e.prototype.ngAfterViewInit=function(){var e=this;this.selectedAccessType&&setTimeout(function(){document.getElementById(e.selectedAccessType).parentElement.click()},1e3)},e.prototype.getDomainInfo=function(){var e=this;this.currentDomainChanges=window.communicationService.currentDomain$.subscribe(function(t){t&&(e.currentDomainInfo=t,e.currentDomainInfo.isSigle=!0,e.currentDomainInfo.isEditSigle=!0,e.queryDomainMembers())})},e.prototype.getAccessDefault=function(){var e,t,n,i,o,r,a=this;switch("create-article"===this.visibilityEditModel?Number.isInteger(null===(e=this.visibilityParams)||void 0===e?void 0:e.visibility)?this.visibilityParams.visibility:1:this.articleDetails?this.articleDetails.visibility:this.categoryDetails.visibility){case 0:this.selectedAccessType="domain";break;case 4:this.selectedAccessType="public";break;case 1:this.selectedAccessType="default","create-article"===this.visibilityEditModel?"category"===this.createFrom?1===this.categoryDetails.visibility?this.knowledgeService.getCategoryParentAccess(this.currentDomainInfo.id,this.categoryDetails.id).subscribe(function(e){a.handlerParentAccess(e)},function(){}):this.knowledgeService.getCategoryAccess(this.categoryDetails.id,this.currentDomainInfo.id).subscribe(function(e){a.handlerParentAccess(e)},function(){}):1===this.articleDetails.visibility?this.knowledgeService.getWikiParentAccess(null===(t=this.articleDetails)||void 0===t?void 0:t.sn).subscribe(function(e){a.setInitalData(e),a.handlerParentAccess(e)},function(){}):this.knowledgeService.getWikiAccess(this.articleDetails.id).subscribe(function(e){a.handlerParentAccess(e)},function(){}):this.articleDetails?this.knowledgeService.getWikiParentAccess(this.articleDetails.sn).subscribe(function(e){a.setInitalData(e),a.handlerParentAccess(e)},function(){}):this.categoryDetails&&(this.selectedAccessType="public");break;default:if(this.selectedAccessType="privacy","create-article"===this.visibilityEditModel){var c=JSON.parse(JSON.stringify(this.visibilityParams)),l=[],s=[];null===(i=null===(n=null==c?void 0:c.user_map)||void 0===n?void 0:n.query)||void 0===i||i.forEach(function(e){l.push(a.optionListVisible.find(function(t){return t.id===e}))}),null===(r=null===(o=null==c?void 0:c.user_map)||void 0===o?void 0:o.update)||void 0===r||r.forEach(function(e){s.push(a.optionListEdit.find(function(t){return t.id===e}))}),c.user_map.query=l,c.user_map.update=s,this.setInitalData(c)}else this.articleDetails?this.knowledgeService.getWikiAccess(this.articleDetails.id).subscribe(function(e){a.setInitalData(e)},function(){}):this.categoryDetails&&this.knowledgeService.getCategoryAccess(this.categoryDetails.id,this.currentDomainInfo.id).subscribe(function(e){a.setInitalData(e)},function(){})}},e.prototype.setInitalData=function(e){var t,n,i,o,r,a,c,l,s,d,p,u,m,h,g,f,v=this;this.visiableSelectedUserList=[],this.editableSelectedUserList=[],this.selectDomainId=(null===(n=null===(t=null==e?void 0:e.domain_map)||void 0===t?void 0:t.query)||void 0===n?void 0:n.id)?null===(o=null===(i=null==e?void 0:e.domain_map)||void 0===i?void 0:i.query)||void 0===o?void 0:o.id:null===(r=null==e?void 0:e.domain_map)||void 0===r?void 0:r.query,this.selectEditDomainId=(null===(c=null===(a=null==e?void 0:e.domain_map)||void 0===a?void 0:a.update)||void 0===c?void 0:c.id)?null===(s=null===(l=null==e?void 0:e.domain_map)||void 0===l?void 0:l.update)||void 0===s?void 0:s.id:null===(d=null==e?void 0:e.domain_map)||void 0===d?void 0:d.update,"all"==this.selectDomainId?this.visiableSelectedUserList.push(this.allDomainObj):"current"==this.selectDomainId?(this.selectDomainId=null===(p=this.currentDomainInfo)||void 0===p?void 0:p.id,this.visiableSelectedUserList.push(this.currentDomainInfo)):this.domainArr.forEach(function(e){e.id==v.selectDomainId&&v.visiableSelectedUserList.push(e)}),"current"==this.selectEditDomainId&&(this.selectEditDomainId=null===(u=this.currentDomainInfo)||void 0===u?void 0:u.id,this.editableSelectedUserList.push(this.currentDomainInfo)),this.optionListVisible.forEach(function(t){var n,i;(null===(i=null===(n=null==e?void 0:e.user_map)||void 0===n?void 0:n.query)||void 0===i?void 0:i.some(function(e){return e.id===t.id}))?(t.isSelected=!0,v.visiableSelectedUserList.push(t)):t.isSelected=!1}),this.optionListEdit.forEach(function(t){var n,i;(null===(i=null===(n=null==e?void 0:e.user_map)||void 0===n?void 0:n.update)||void 0===i?void 0:i.some(function(e){return e.id===t.id}))?(t.isSelected=!0,v.editableSelectedUserList.push(t)):t.isSelected=!1}),null===(h=null===(m=null==e?void 0:e.user_map)||void 0===m?void 0:m.query)||void 0===h||h.forEach(function(e){var t;(null===(t=v.visiableSelectedUserList)||void 0===t?void 0:t.some(function(t){return t.id===e.id}))||(v.visiableSelectedUserList.push(e),e.isSelected=!0,v.optionListVisible.push(e))}),null===(f=null===(g=null==e?void 0:e.user_map)||void 0===g?void 0:g.update)||void 0===f||f.forEach(function(e){var t;(null===(t=v.editableSelectedUserList)||void 0===t?void 0:t.some(function(t){return t.id===e.id}))||(v.editableSelectedUserList.push(e),e.isSelected=!0,v.optionListEdit.push(e))})},e.prototype.handlerSelectedUser=function(e){var t,n,o=this,r="visiable"===e?null===(t=this.visiableSelectedUserList)||void 0===t?void 0:t.filter(function(e){return e.isSigle}):null,a="editable"===e?null===(n=this.editableSelectedUserList)||void 0===n?void 0:n.filter(function(e){return e.isEditSigle}):null;switch(e){case"visiable":r.length<1&&(this.selectDomainId=null),this.visiableSelectedUser=Object(i.i)(this.visiableSelectedUserList),this.visiableSelectedUserList.length>0&&this.visiableSelectedUserList.forEach(function(e,t){"publicAvailable"==e.id&&o.visiableSelectedUser.splice(t,1),"spaceAvailable"==e.id&&o.visiableSelectedUser.splice(t,1)}),this.optionListVisible.forEach(function(e){e.isSelected=o.visiableSelectedUser.some(function(t){return t.id===e.id})});break;case"editable":this.selectEditDomainId=a.length>=1?a[0].id:null,this.editableSelectedUser=Object(i.i)(this.editableSelectedUserList),this.editableSelectedUserList.length>0&&this.editableSelectedUserList.forEach(function(e,t){"spaceEditable"==e.id&&o.editableSelectedUser.splice(t,1)}),this.optionListEdit.forEach(function(e){e.isSelected=o.editableSelectedUser.some(function(t){return t.id===e.id})})}},e.prototype.selectEditDomainIdFunc=function(e){this.selectEditDomainId=this.selectEditDomainId==e.id?null:e.id},e.prototype.selectDomainIdFunc=function(e){var t;this.selectDomainId===e.id?this.selectDomainId=null:(this.selectDomainId=e.id,(null===(t=this.visiableSelectedUserList)||void 0===t?void 0:t.filter(function(e){return e.isSigle})).length>=1&&this.visiableSelectedUserList.splice(this.visiableSelectedUserList.findIndex(function(e){return e.isSigle}),1))},e.prototype.queryMembers=function(e){var t=this;""!=e&&this.queryAvailiableMembers(e).subscribe(function(e){if(e){var n=null==e?void 0:e.map(function(e){return e.isSelected=!!Object(l.a)(t.getSearchArr(),{id:e.id}),e});t.resetSearchArr(Object(s.a)(n,"id"));var i=document.querySelector(".select-dropdown cdk-virtual-scroll-viewport");i&&setTimeout(function(){i.scrollTop=i.scrollHeight})}},function(){})},e.prototype.resetSearchArr=function(e){"visiable"==this.searchIcon?this.optionListVisible=Object(i.i)(e):this.optionListEdit=Object(i.i)(e)},e.prototype.getSearchArr=function(){return"visiable"==this.searchIcon?this.visiableSelectedUserList:this.editableSelectedUserList},e.prototype.queryAvailiableMembers=function(e){return this.knowledgeService.queryUsers(e)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](d.b),o["\u0275\u0275directiveInject"](p.b),o["\u0275\u0275directiveInject"](u.c),o["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["access-control"]],inputs:{articleDetails:"articleDetails",categoryDetails:"categoryDetails",visibilityEditModel:"visibilityEditModel",createFrom:"createFrom",visibilityParams:"visibilityParams"},outputs:{closeCallback:"closeCallback"},decls:5,vars:4,consts:[[1,"select-directory-header"],[1,"icon-color","icon-font-size14","position-right-close","iconfont","icon-close","pointer-cursor",3,"click"],["class","content-container",4,"ngIf"],[1,"content-container"],[1,"input-container"],[4,"ngIf"],["for","public",1,"status-check-wrapper","margin-bottom-25",3,"click"],[1,"status-check-title"],["type","radio","id","public","name","selectRadio",1,"input-radio",3,"checked"],[1,"status-check-desc","m-l-20"],["for","domain",1,"status-check-wrapper","margin-bottom-25",3,"click"],["type","radio","id","domain","name","selectRadio",1,"input-radio",3,"checked"],["for","privacy",1,"status-check-wrapper","privacy-check",3,"click"],["type","radio","id","privacy","name","selectRadio",1,"input-radio",3,"checked"],["class","checked-icon ",3,"src",4,"ngIf"],["class","checked-icon checked-icon-up",3,"src",4,"ngIf"],[1,"directory-wrapper","slimScrollBar"],[1,"share-content-footer"],["type","button",1,"f-16","confirm-btn-styl","cancel-btn-color","m-r-30",3,"textContent","click"],["type","button",1,"f-16","confirm-btn-styl",3,"textContent","click"],["for","default",1,"status-check-wrapper",3,"click"],["type","radio","id","default","name","selectRadio","class","input-radio",3,"checked",4,"ngIf"],["class","dafault-container",4,"ngIf"],["type","radio","id","default","name","selectRadio",1,"input-radio",3,"checked"],[1,"checked-icon",3,"src"],[1,"checked-icon","checked-icon-up",3,"src"],[1,"dafault-container"],[1,"current-top-title"],[1,"current-title"],["class","current-content","nz-typography","","nzEllipsis","","nzExpandable","",3,"nzEllipsisRows",4,"ngIf"],["nz-typography","","nzEllipsis","","nzExpandable","",1,"current-content",3,"nzEllipsisRows"],[1,"access-users-select-wrapper"],[1,"access-title-desc"],["nzMode","multiple",1,"select-input",3,"nzPlaceHolder","nzShowArrow","nzSuffixIcon","ngModel","nzDropdownClassName","compareWith","nzServerSearch","nzFilterOption","ngModelChange","nzOnSearch"],[3,"nzValue","nzLabel","nzCustomContent"],[1,"full-width","full-height","padding-default",3,"click"],["class","iconfont icon-yuanquan m-r-5 align-center-i",4,"ngIf"],["class","iconfont icon-nochoice m-r-5 align-center-i",4,"ngIf"],[3,"nzLabel"],[3,"nzValue","nzLabel","nzCustomContent",4,"ngFor","ngForOf"],["seartchTemplateRef",""],["nzMode","multiple","nzServerSearch","",1,"select-input",3,"nzPlaceHolder","nzShowArrow","nzSuffixIcon","ngModel","nzFilterOption","nzServerSearch","nzDropdownClassName","compareWith","ngModelChange","nzOnSearch"],[1,"iconfont","icon-yuanquan","m-r-5","align-center-i"],[1,"iconfont","icon-nochoice","m-r-5","align-center-i"],[1,"full-width","full-height","padding-default"],["class","iconfont icon-check-blank m-r-10 align-center-i",4,"ngIf"],["class","iconfont icon-checkbox m-r-10 align-center-i",4,"ngIf"],[1,"m-l-8"],[1,"iconfont","icon-check-blank","m-r-10","align-center-i"],[1,"iconfont","icon-checkbox","m-r-10","align-center-i"],[1,"iconfont","icon-search"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"i",1),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,$,36,31,"div",2)),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"PERMISSION_CONFIG")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.articleDetails||t.categoryDetails))},directives:[h.n,g.a,f.e,v.k,v.l,f.a,f.b,h.m],pipes:[u.b],styles:['.select-directory-header[_ngcontent-%COMP%]{height:70px;width:100%;line-height:70px;text-align:left;padding-left:30px;position:relative;border-bottom:1px solid #dbdbdb;font-family:Arial Normal,Arial,sans-serif;font-weight:400;font-style:normal;font-size:20px;color:#000}.select-directory-header[_ngcontent-%COMP%]   .position-right-close[_ngcontent-%COMP%]{position:absolute;right:30px;font-size:20px}label[_ngcontent-%COMP%]{font-weight:400}.content-container[_ngcontent-%COMP%]{height:calc(100% - 115px);padding:0 10px 110px}[_nghost-%COMP%]     .ant-modal-body{padding:0}.input-container[_ngcontent-%COMP%]{margin-top:15px;padding:0 15px}.input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;width:100%}.input-container[_ngcontent-%COMP%]   .privacy-check[_ngcontent-%COMP%]{border-top:1px solid #dbdbdb;margin-bottom:-10px}.input-container[_ngcontent-%COMP%]   .status-check-wrapper[_ngcontent-%COMP%]{padding:8px 0;cursor:pointer}.input-container[_ngcontent-%COMP%]   .status-check-wrapper[_ngcontent-%COMP%]   .status-check-title[_ngcontent-%COMP%]{position:relative;height:32px;line-height:32px;font-family:Arial Normal,Arial,sans-serif;font-weight:400;font-size:20px;color:#000}.input-container[_ngcontent-%COMP%]   .status-check-wrapper[_ngcontent-%COMP%]   .icon-check-active[_ngcontent-%COMP%]{position:absolute;right:0;font-size:22px;color:#23c6c8;bottom:-13px}.input-container[_ngcontent-%COMP%]   .status-check-wrapper[_ngcontent-%COMP%]   .status-check-desc[_ngcontent-%COMP%]{font-size:14px;height:25px;line-height:25px;color:#999;position:relative;top:-5px}.input-container[_ngcontent-%COMP%]   .margin-bottom-25[_ngcontent-%COMP%]{margin-bottom:12px}.input-container[_ngcontent-%COMP%]   .input-radio[_ngcontent-%COMP%]{width:15px;height:15px}.input-container[_ngcontent-%COMP%]   .input-radio[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]   .input-radio[_ngcontent-%COMP%]:checked{outline:none;-webkit-appearance:auto;-moz-appearance:auto;appearance:auto}.input-container[_ngcontent-%COMP%]   .input-radio[_ngcontent-%COMP%]:checked{background:#fff}.dafault-container[_ngcontent-%COMP%]{width:540px;height:135px;background-color:#f7f7f7;overflow:auto;padding:5px 5px 5px 20px;position:relative;top:-15px}.dafault-container[_ngcontent-%COMP%]   .current-top-title[_ngcontent-%COMP%]{font-size:14px;color:#7f7f7f;padding-bottom:10px}.dafault-container[_ngcontent-%COMP%]   .current-title[_ngcontent-%COMP%]{font-size:14px;color:#3b3b3b;font-weight:700}.dafault-container[_ngcontent-%COMP%]   .current-content[_ngcontent-%COMP%]{font-size:14px;color:#7f7f7f;line-height:26px;width:100%}.ant-typography[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]  a.ant-typography{color:#242222!important}[_nghost-%COMP%]  .dafault-container::-webkit-scrollbar{color:#7f7f7f}.checked-icon[_ngcontent-%COMP%]{right:5px;position:absolute;top:5px;width:18px;height:18px}.checked-icon-up[_ngcontent-%COMP%]{transform:rotate(180deg)}.real-icon-size[_ngcontent-%COMP%]{width:14px!important;height:14px!important}.directory-wrapper[_ngcontent-%COMP%]{padding:0 18px 10px;height:calc(100% - 260px);width:100%;overflow-x:hidden;overflow-y:scroll;-ms-overflow-style:none}.directory-wrapper[_ngcontent-%COMP%]   .divider-line[_ngcontent-%COMP%]{width:100%;height:2px;background-color:#dbdbdb}.directory-wrapper[_ngcontent-%COMP%]   .icon-styl[_ngcontent-%COMP%]{color:#aaa;font-weight:600;font-size:16px;position:relative;top:-3px;left:0}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]{margin-top:20px}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .access-title-desc[_ngcontent-%COMP%]{height:30px;line-height:20px;font-weight:700;font-size:14px;padding:5px 5px 5px 20px;color:#444;background-color:#f7f7f7}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .access-title-desc[_ngcontent-%COMP%]   .text-999[_ngcontent-%COMP%]{color:#999}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .team-checkbox[_ngcontent-%COMP%]{margin:15px 0 10px;height:20px;line-height:20px;font-size:14px;color:#5f5f5f}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .team-checkbox[_ngcontent-%COMP%]   .team-members[_ngcontent-%COMP%]{color:#5f5f5f;font-size:14px}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .team-checkbox[_ngcontent-%COMP%]     .ant-checkbox-disabled+span{color:#5f5f5f}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .team-checkbox[_ngcontent-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background-color:#23c6c8;border-color:#23c6c8!important}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .team-checkbox[_ngcontent-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:#f5f5f5!important}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .select-input[_ngcontent-%COMP%]{width:100%;padding:10px 0 0}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .select-input[_ngcontent-%COMP%]     .ant-select-selector{padding-left:34px;padding-right:0;border:1px solid #dbdbdb}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .select-input[_ngcontent-%COMP%]     .ant-select-arrow{left:11px}.directory-wrapper[_ngcontent-%COMP%]   .access-users-select-wrapper[_ngcontent-%COMP%]   .select-input[_ngcontent-%COMP%]     .ant-select-selection-placeholder{left:44px}.emptyImg-div[_ngcontent-%COMP%]{height:133px;width:100%}.share-content-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;padding:30px 35px;text-align:right;width:100%}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]{height:37px;width:80px;line-height:37px;padding:0 12px;border-radius:4px;outline:none;border:1px solid #23c6c8;background:#23c6c8;color:#fff;opacity:.9}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]:hover{opacity:1}.share-content-footer[_ngcontent-%COMP%]   .cancel-btn-color[_ngcontent-%COMP%]{margin-right:30px;border:1px solid #dbdbdb;color:#5f5f5f;background:#fff}  .select-dropdown .ant-select-item-option-state,   .select-dropdown-two .ant-select-item-option-state{display:none;width:0}  .select-dropdown .ant-select-item-group:after,   .select-dropdown-two .ant-select-item-group:after{content:"";width:calc(100% - 20px);position:absolute;left:10px;bottom:0;height:1px;background:#dbdbdb}  .select-dropdown .ant-select-item-option-grouped,   .select-dropdown-two .ant-select-item-option-grouped{padding-left:12px}  .select-dropdown .ant-select-item-option-selected:not(.ant-select-item-option-disabled),   .select-dropdown-two .ant-select-item-option-selected:not(.ant-select-item-option-disabled){font-weight:400;background:#fff}  .select-dropdown .ant-select-item,   .select-dropdown-two .ant-select-item{padding:0 12px}  .select-dropdown cdk-virtual-scroll-viewport::-webkit-scrollbar,   .select-dropdown-two cdk-virtual-scroll-viewport::-webkit-scrollbar{width:8px;height:8px}  .select-dropdown cdk-virtual-scroll-viewport::-webkit-scrollbar-thumb,   .select-dropdown-two cdk-virtual-scroll-viewport::-webkit-scrollbar-thumb{border-radius:10px;background-color:#aaa}  .select-dropdown cdk-virtual-scroll-viewport::-webkit-scrollbar-track-piece,   .select-dropdown-two cdk-virtual-scroll-viewport::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}.icon-yuanquan[_ngcontent-%COMP%]{margin-left:-2px;font-size:19px;color:#23c6c8}.icon-checkbox[_ngcontent-%COMP%]{color:#23c6c8}.icon-check-blank[_ngcontent-%COMP%], .icon-nochoice[_ngcontent-%COMP%]{color:#dbdbdb}.align-center-i[_ngcontent-%COMP%]{position:relative;top:1px}.padding-default[_ngcontent-%COMP%]{padding:5px 0}']}),e}()},eg8t:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("mrSG"),o=n("lJxs"),r=n("vNWM"),a=n("fXoL"),c=n("tk/3"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.http=t,n}return Object(i.d)(t,e),t.prototype.querySelectData=function(e){return this.http.get("/vision-defect-management/api/query/issue_custom_attr",{params:e}).pipe(Object(o.a)(function(e){return e.data}))},t.prototype.getNumber=function(){return this.http.get("/vision-defect-management/api/coe/generate_number").pipe(Object(o.a)(function(e){return e.data}))},t.prototype.create=function(e){return this.http.post("/vision-defect-management/api/coe",e).pipe(Object(o.a)(function(e){return e.data}))},t.prototype.getDomainMembers=function(e){return this.http.get("/vision-platform/api/domains/"+e+"/members").pipe(Object(o.a)(function(e){return e.data}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275inject"](c.c))},t.\u0275prov=a["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(r.a)},fODL:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n("fXoL"),o=n("ofXK"),r=n("PTRe"),a=n("3Pt+"),c=n("nxWG"),l=n("QlLE"),s=n("ZncU"),d=n("sYmb");function p(e,t){1&e&&i["\u0275\u0275element"](0,"i",10)}var u=function(e,t,n){return{"icon-cup":e,"icon-drawer":t,"icon-bulb":n}};function m(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275elementStart"](1,"span",12),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](3).moveableTreeNodeClick(e)}),i["\u0275\u0275element"](2,"i",13),i["\u0275\u0275elementStart"](3,"span",14),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction3"](2,u,"Feature"===o.origin.category,"FeatureSet"===o.origin.category,"ServiceFeature"===o.origin.category)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",o.origin.title," ")}}function h(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-input-group",4),i["\u0275\u0275elementStart"](2,"input",5),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).searchValue=e}),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,p,1,0,"ng-template",null,6,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](6,"div",7),i["\u0275\u0275element"](7,"nz-tree",8),i["\u0275\u0275template"](8,m,5,6,"ng-template",null,9,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275reference"](5),r=i["\u0275\u0275reference"](9),a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzPrefix",o),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,7,"INPUT_PLACEHOLDER")),i["\u0275\u0275property"]("ngModel",a.searchValue),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("nzSearchValue",a.searchValue)("nzData",a.treeData)("nzExpandedKeys",a.expanKeys)("nzTreeTemplate",r)}}function g(e,t){1&e&&i["\u0275\u0275element"](0,"nz-empty",15)}function f(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,h,10,9,"ng-container",1),i["\u0275\u0275template"](2,g,1,0,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275reference"](3),o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.treeData.length>0)("ngIfElse",n)}}function v(e,t){1&e&&i["\u0275\u0275element"](0,"workitem-loading-modal",16),2&e&&i["\u0275\u0275property"]("isLoaded",!1)}var b=function(){function e(){this.expanKeys=[],this.selected=new i.EventEmitter,this.searchValue=""}return e.prototype.ngOnInit=function(){},e.prototype.moveableTreeNodeClick=function(e){this.selected.emit(e.origin.selected?null:e.origin)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["feature-set-select"]],inputs:{treeData:"treeData",loading:"loading",expanKeys:"expanKeys"},outputs:{selected:"selected"},decls:4,vars:2,consts:[[1,"feature-set-select"],[4,"ngIf","ngIfElse"],["loadingData",""],["moveDataEmpty",""],[1,"m-b-10","p-t-5","p-b-5",3,"nzPrefix"],["type","text","nz-input","",3,"ngModel","placeholder","ngModelChange"],["featureSetSelect",""],[1,"tree-wrap"],["nzHideUnMatched","","nzBlockNode","",3,"nzSearchValue","nzData","nzExpandedKeys","nzTreeTemplate"],["nzTreeTemplateRef",""],[1,"iconfont","icon-search"],[1,"flex-box","flex-a-c"],[1,"node-title","txt-default",3,"click"],[1,"iconfont","f-14",3,"ngClass"],[1,"f-14"],["nzNotFoundImage","simple"],[3,"isLoaded"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,f,4,2,"ng-container",1),i["\u0275\u0275template"](2,v,1,1,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.loading)("ngIfElse",n)}},directives:[o.n,r.c,r.d,r.b,a.d,a.k,a.l,c.a,o.l,l.b,s.a],pipes:[d.b],styles:[".feature-set-select{width:100%;height:100%;padding:10px;background:#fff}  .feature-set-select .tree-wrap{height:calc(100% - 44px);overflow-y:auto}  .feature-set-select .ant-tree .ant-tree-treenode{padding:10px 10px 10px 0;margin-right:10px;align-items:center}  .feature-set-select .ant-tree .ant-tree-treenode:hover{background-color:#f8f8f8}  .feature-set-select .ant-tree .ant-tree-node-content-wrapper.ant-tree-node-selected{background:none}  .feature-set-select .ant-tree .ant-tree-node-content-wrapper.ant-tree-node-selected .node-title{color:#23c6c8}  .feature-set-select .ant-tree .ant-tree-node-content-wrapper.ant-tree-node-selected .node-title span{color:#23c6c8}  .feature-set-select .ant-tree .ant-tree-list-holder-inner .ant-tree-node-content-wrapper{color:#676a6c;font-size:14px}  .feature-set-select .ant-tree .ant-tree-list-holder-inner .ant-tree-node-content-wrapper:hover{background:none}  .feature-set-select .ant-tree .ant-tree-treenode-selected{background-color:#23c6c814}  .feature-set-select .ant-tree .ant-tree-treenode-selected .ant-tree-switcher svg{color:#23c6c8}  .feature-set-select .ant-tree .ant-tree-treenode-selected .ant-tree-node-selected{color:#23c6c8}  .feature-set-select .ant-tree-switcher{width:20px;height:20px}  .feature-set-select .ant-tree-switcher .ant-select-tree-switcher-icon svg,   .feature-set-select .ant-tree-switcher .ant-tree-switcher-icon svg{width:16px;height:16px;color:#676a6c91}  .feature-set-select .ant-tree-switcher .ant-select-tree-switcher-icon,   .feature-set-select .ant-tree-switcher .ant-tree-switcher-icon{vertical-align:middle;line-height:1}  .feature-set-select .node-title{word-break:break-all;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:1;flex:1}"]}),e}()},fxjG:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("otx/"),o=n("aDQL"),r=function(){function e(){}return e.prototype.unlockTipsOnCancle=function(e){e.close(),this.cancleEdit()},e.prototype.unlockTipsOnSave=function(e){e.close(),this.saveEdit()},e.prototype.initSocketListen=function(){var e=this,t=Object(o.b)(i.b.wikiRequestUnlock,function(t,n){var i,o,r,a=function(){return e.showUnlockRequestTips(t)};e.sn!==n?(((null===(i=e.articleDetails)||void 0===i?void 0:i.paragraphs)||[]).map(function(e){return e.contentNumber}).includes(n)&&a(),(null===(o=e.activeDoc)||void 0===o?void 0:o.number)!==n?(null===(r=e.activeDoc)||void 0===r?void 0:r.wiki_sn)===n&&a():a()):a()});this.onDestroy$.subscribe(function(){t.off()})},e.prototype.removeUnlockRequestTips=function(){this.unlockTipsRef&&this.notification.remove(this.unlockTipsRef.messageId)},e.prototype.showUnlockRequestTips=function(e){var t=this;this.removeUnlockRequestTips(),this.unlockTipsRef=this.notification.template(this.wikiUnlockTipsTemplateRef,{nzDuration:0,nzData:e,nzClass:"notification-box"}),this.unlockTipsRef.onClose.subscribe(function(){t.unlockTipsRef=null})},e}()},hANM:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("mrSG"),o=n("fXoL"),r=function(){function e(){var e=this;this.ws=null,this.url="ws://localhost",this.ports=[27197,27198,27199],this.index=0,this.pollingInterval=1e3,this.timeout=3e4,this.cid=0,this.callbacks={},this.userStatus={},this.heartbeatInterval=2e4,this.heartbeatTimer=null,this.connectTimer=null,this.events={},this.apiTimers={},this.sendHeartbeat=function(){e.heartbeatTimer=setTimeout(function(){e.connected?e.send({type:"heartbeat"},function(){e.sendHeartbeat()}):clearTimeout(e.heartbeatTimer)},e.heartbeatInterval)},this.connect=function(t){e.pollingTimer=setTimeout(function(){e.index>=e.ports.length&&(e.index=0),e.ws=new WebSocket(e.url+":"+e.ports[e.index++]),e.bindEvents()},t||0)},this.onopen=function(t){e.connectTimer=setTimeout(function(){e.ws.close()},5e3)},this.onclose=function(t){(e.connected||void 0===e.connected)&&(e.connected=!1,e.error()),e.connect(e.pollingInterval)},this.connectionSucceeded=function(t){e.connected=!0,e.sendHeartbeat(),clearTimeout(e.pollingTimer),clearTimeout(e.connectTimer),e.ready(t)},this.onmessage=function(t){var n=t.data;if("string"==typeof n&&(n=n.replace(/^\d+/,""))){try{n=JSON.parse(n)}catch(a){return void(window.console&&console.error(a))}if(e.connected){var i=e.events[n.type];if(i)return i(n.data);var o=n.cid,r=e.callbacks[o];r&&(n.ok?r(null,n.data):r({ok:n.ok}),e.clearCallback(o))}else"eSpace-ctrl-connection-success"===n.type?e.connectionSucceeded(n.data):e.ws.close()}},this.bindEvents=function(){e.ws.onopen=e.onopen,e.ws.onclose=e.onclose,e.ws.onmessage=e.onmessage},this.clearCallback=function(t){clearTimeout(e.apiTimers[t]),delete e.callbacks[t],delete e.apiTimers[t]},this.send=function(t,n){var i;i=e.cid++,i=String(i),t.cid=i,e.connected?("function"==typeof n&&(e.callbacks[i]=n,e.apiTimers[i]=setTimeout(function(){n({ok:!1,message:"time out"}),e.clearCallback(i)},e.timeout)),e.ws.send(JSON.stringify(t))):n&&setTimeout(n,0,{ok:!1,message:"eSpace is not logged in."})},this.ready=function(e){},this.initOut=function(t){t&&(e.timeout=t.timeout||3e4,e.pollingInterval=t.pollingInterval||0),e.connect()},this.readyOut=function(t){e.ready=t},this.error=function(){},this.errorOut=function(t){e.error=t},this.attrToArr=function(e,t,n){for(var i=[],o=0;o<t;o++){var r=e;o&&(r+=o);var a=n[r];a&&i.push(a)}return i},this.onOut=function(t,n){e.events[t]=n},this.getUserInfoOut=function(t,n){e.send({type:"get-user-info",param:t},function(t,o){var r,a;if(t)return n(t);var c=function(t){return{account:t.account,name:t.name,mobile:e.attrToArr("mobile",6,t),office_phone:e.attrToArr("office_phone",6,t),home_phone:t.home_phone,ip_phone:t.ip_phone,other_phone:t.other_phone}};if(o.account)n(null,c(o));else{var l={};try{for(var s=Object(i.j)(o),d=s.next();!d.done;d=s.next()){var p=d.value,u=o[p];l[p]=u?c(u):u}}catch(m){r={error:m}}finally{try{d&&!d.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}n(null,l)}})},this.subscribeUserStatusOut=function(t,n){Array.isArray(t)&&t.forEach(function(t){e.userStatus[t]=!0}),e.send({type:"subscribe-user-status",param:t},n)},this.eSpaceCallOut=function(t,n,i){e.send({type:"espace-call",param:{account:t,number:n}},i)},this.eSpaceCallByAccountOut=function(t,n){e.send({type:"espace-call",param:{account:t}},n)},this.eSpaceCallByNumberOut=function(t,n){e.send({type:"espace-call",param:{number:t}},n)},this.showImDialogOut=function(t,n){e.send({type:"show-espace-im-dialog",param:t},n)},this.showGroupDialogOut=function(t,n){e.send({type:"show-espace-im-group-dialog",param:t},n)},this.addContactListOut=function(t,n){e.send({type:"add-contact-list",param:t},n)}}return e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}()},hK9q:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("mrSG"),o=n("fXoL"),r=n("hbEN"),a=n("A/Mn"),c=n("sYmb"),l=n("3Pt+"),s=n("zAKX"),d=n("ofXK"),p=n("CuYH"),u=n("rXOI"),m=function(e){return{color:e}};function h(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nz-option",19),o["\u0275\u0275elementStart"](1,"div",20),o["\u0275\u0275elementStart"](2,"div",21),o["\u0275\u0275elementStart"](3,"div",22),o["\u0275\u0275elementStart"](4,"span",23),o["\u0275\u0275pipe"](5,"iconMap"),o["\u0275\u0275pipe"](6,"colorMap"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"span",24),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",25),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div"),o["\u0275\u0275text"](12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzValue",n)("nzLabel",n.title),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",n.title),o["\u0275\u0275advance"](3),o["\u0275\u0275classMap"](o["\u0275\u0275pipeBind2"](5,11,n.category,"workitem_category")),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](17,m,o["\u0275\u0275pipeBind2"](6,14,n.category,"workitem_category")))("title",n.category),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("title",n.title),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.title),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" (",(null==n||null==n.simple_domain?null:n.simple_domain.short_title)||(null==n||null==n.assigned_domain?null:n.assigned_domain.short_title)||(null==n||null==n.simple_domain?null:n.simple_domain.title)||(null==n||null==n.assigned_domain?null:n.assigned_domain.title),") "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("#",n.number,"")}}function g(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,h,13,19,"nz-option",16),o["\u0275\u0275elementStart"](2,"nz-option",17),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementStart"](5,"span",18),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.searchWorkitemList),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzValue",o["\u0275\u0275pipeBind1"](3,4,"TRY_TO_SEARCH_TITLE_OR_NUMBER"))("nzLabel",o["\u0275\u0275pipeBind1"](4,6,"TRY_TO_SEARCH_TITLE_OR_NUMBER")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](7,8,"TRY_TO_SEARCH_TITLE_OR_NUMBER"))}}var f=function(){return{width:"150%",left:"-50%"}},v=function(){function e(e,t,n){var a=this;this.knowledgeService=e,this.translate=t,this.cdr=n,this.relatedWorkitem=[],this.searchWorkitemList=[],this.isLoading={workitem:!1},this.saveRevision=new o.EventEmitter,this.onSearchWorkitem=Object(r.a)(function(e){if(!((null==e?void 0:e.length)<2)){a.searchContent=e,a.searchWorkitemList=[],a.isLoading.workitem=!0;var t=a.getRequirementConditions(a.searchContent);a.knowledgeService.query_requirement_result(t).subscribe(function(e){var t;a.isLoading.workitem=!1,(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.result)&&(a.searchWorkitemList=Object(i.i)(e.data.result),setTimeout(function(){a.cdr.detectChanges(),a.searchWorkitemList=Object(i.i)(a.searchWorkitemList)}))})}},200),this.compareFn=function(e,t){return e&&t?e.id===t.id:e===t},this.getRequirementConditions=function(e){return{sort:{key:"created_time",value:"desc"},pagination:{current_page:1,page_size:100},first_filters:[{key:"title",value:[e.trim()],operator:"||",convolution:!1}]}}}return e.prototype.ngOnInit=function(){this.versionTitle=(new Date).toLocaleString()+"  "+this.translate.instant("VERSION")},e.prototype.saveArticleAndRevision=function(e){switch(e){case"save":var t={revision_record_title:this.versionTitle,remark:this.versionRemark,relations:this.getRequireInfo()};this.saveRevision.emit(t);break;case"close":this.saveRevision.emit()}},e.prototype.getRequireInfo=function(){return this.relatedWorkitem.map(function(e){return{relation_id:e.id,relation_sn:e.number,relation_type:e.category}})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.b),o["\u0275\u0275directiveInject"](c.c),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["reversion-history-model"]],inputs:{currentDomain:"currentDomain",baselineCtrl:"baselineCtrl"},outputs:{saveRevision:"saveRevision"},decls:29,vars:29,consts:[[1,"m-t-md"],[1,"form-group","m-b-md","flex-box","flex-center"],[1,"box-inline","tip-info"],[1,"required-item",3,"textContent"],[1,"text-danger"],[1,"select-item"],["type","text",1,"subject-inp",3,"ngModel","ngModelChange"],[3,"textContent"],[1,"select-item",2,"width","380px"],["nzMode","multiple","nzShowSearch","",1,"full-width","t-a-l",3,"compareWith","nzPlaceHolder","nzDropdownStyle","nzServerSearch","ngModel","ngModelChange","nzOnSearch"],[4,"ngIf"],[1,"form-group","m-b-md","flex-box"],["rows","3",1,"version-message",3,"ngModel","ngModelChange"],[1,"txt-r"],[1,"btn","btn-xs","btn-primary","m-r-5",3,"disabled","textContent","click"],[1,"btn","btn-xs","btn-white",3,"textContent","click"],["nzCustomContent","",3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzDisabled","","nzCustomContent","",3,"nzValue","nzLabel"],[1,"text-center"],["nzCustomContent","",3,"nzValue","nzLabel"],[1,"flex-box","flex-between","cur-pointer",3,"title"],[1,"flex-box","ov-h"],[1,"text-omit"],[3,"ngStyle","title"],[1,"m-l-5",3,"title"],[1,"p-x-4"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275element"](3,"span",3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementStart"](6,"span",4),o["\u0275\u0275text"](7,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",5),o["\u0275\u0275elementStart"](9,"input",6),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.versionTitle=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",1),o["\u0275\u0275elementStart"](11,"div",2),o["\u0275\u0275element"](12,"span",7),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",8),o["\u0275\u0275elementStart"](15,"nz-select",9),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.relatedWorkitem=e})("nzOnSearch",function(e){return t.onSearchWorkitem(e)}),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275template"](17,g,8,10,"ng-container",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",11),o["\u0275\u0275elementStart"](19,"div",2),o["\u0275\u0275element"](20,"span",7),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",5),o["\u0275\u0275elementStart"](23,"textarea",12),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.versionRemark=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"div",13),o["\u0275\u0275elementStart"](25,"button",14),o["\u0275\u0275listener"]("click",function(){return t.saveArticleAndRevision("save")}),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"button",15),o["\u0275\u0275listener"]("click",function(){return t.saveArticleAndRevision("close")}),o["\u0275\u0275pipe"](28,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",t.baselineCtrl?o["\u0275\u0275pipeBind1"](4,14,"BASELINE_VERSION"):o["\u0275\u0275pipeBind1"](5,16,"REVISIONVERSION")),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngModel",t.versionTitle),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](13,18,"RELATED_WORKITEM")),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",o["\u0275\u0275pipeBind1"](16,20,"SEARCH_TITLE_NUMBER")),o["\u0275\u0275property"]("compareWith",t.compareFn)("nzDropdownStyle",o["\u0275\u0275pureFunction0"](28,f))("nzServerSearch",!0)("ngModel",t.relatedWorkitem),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.searchWorkitemList.length),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](21,22,"REMARK")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",t.versionRemark),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.versionTitle)("textContent",o["\u0275\u0275pipeBind1"](26,24,"COMMON_BTN_SAVE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](28,26,"COMMON_BUTTON_CANCLE")))},directives:[l.d,l.k,l.l,s.e,d.n,d.m,s.a,d.o],pipes:[c.b,p.a,u.a],styles:[".tip-info[_ngcontent-%COMP%]{width:110px}.subject-inp[_ngcontent-%COMP%]{padding:0 5px;min-height:32px;width:100%;outline:none;border:1px solid #e5e6e7;font-size:14px}.select-item[_ngcontent-%COMP%]{min-height:32px;width:390px;display:flex;align-items:center}.select-item[_ngcontent-%COMP%]     .ant-select-selection-search{width:98%!important}.select-item[_ngcontent-%COMP%]   .version-message[_ngcontent-%COMP%]{width:100%;border:1px solid #e5e6e7;outline:none;resize:none;padding:0 5px;font-size:15px}.text-center[_ngcontent-%COMP%]{display:inline-block;text-align:center;color:#aaa;width:100%}"]}),e}()},hjf3:function(e,t,n){"use strict";var i=n("uT1x");t.a=function(e){return null!=e&&e.length?Object(i.a)(e,1/0):[]}},j5vU:function(e,t,n){"use strict";n.d(t,"a",function(){return g}),n.d(t,"b",function(){return f});var i=n("mrSG"),o=n("+oEP"),r=n("XNiG"),a=n("fXoL"),c=n("sYmb"),l=["popoverTemplate"];function s(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",1),a["\u0275\u0275elementStart"](1,"div",2),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"button",3),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().popoverSubmit("lookHelp")}),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",4),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().popoverSubmit("complete")}),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,3,"TABLE_POPOVER_CONTENT")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](6,5,"GROUP_LOOK_HELP")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](9,7,"TIP_BUTTON_KNOW")))}var d={readTableGuide:{storageItemName:"readTableGuide",content:"TABLE_POPOVER_CONTENT",link:"https://clouddevops.huawei.com/domains/2/wiki/9/WIKI2022051900022"}},p=function(){function e(){}return e.prototype.getStorageItemName=function(e){this.storageItemName=e},e.prototype.getCommitment=function(e){this.commitment$=e},e.prototype.popoverSubmit=function(e){"lookHelp"===e&&window.open(d[this.storageItemName].link,"_blank");try{localStorage.setItem(d[this.storageItemName].storageItemName,"true"),this.commitment$.next({storageStatus:!0})}catch(t){console.info(t)}},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275viewQuery"](l,1),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.popoverTemplate=n.first)},decls:2,vars:0,consts:[["popoverTemplate",""],[1,"menu-popover-list"],[1,"menu-popover-content"],["nz-button","","nzType","primary",1,"menu-popover-help",3,"click"],["nz-button","","nzType","primary",1,"menu-popover-submit",3,"click"]],template:function(e,t){1&e&&a["\u0275\u0275template"](0,s,10,9,"ng-template",null,0,a["\u0275\u0275templateRefExtractor"])},pipes:[c.b],styles:[".menu-popover-list[_ngcontent-%COMP%] {\n        width: 200px;\n        overflow: hidden;\n      }\n      .menu-popover-content[_ngcontent-%COMP%]{\n        width: 100%;\n        overflow: hidden;\n        margin-bottom: 10px;\n        line-height: 26px;\n        font-size: 14px;\n        cursor: pointer;\n        display: -webkit-box;\n        -webkit-line-clamp: 3;\n        -webkit-box-orient: vertical;\n      }\n      .menu-popover-submit[_ngcontent-%COMP%], .menu-popover-help[_ngcontent-%COMP%]{\n        position: relative;\n        right: -50px;\n        background: transparent;\n        text-shadow: none;\n        border-radius: 4px;\n        &:hover,\n        &:focus {\n          outline: none;\n        }\n      }\n      .menu-popover-submit[_ngcontent-%COMP%] {\n        margin-left: 10px;\n        color: #23c6c8;\n        border: 1px solid #23c6c8;\n      }\n      .menu-popover-help[_ngcontent-%COMP%] {\n        color: #5F5F5F;\n        border: 1px solid #DBDBDB;\n      }"]}),e}(),u=n("YF2q"),m=n("2Suw"),h=new r.a,g=function(e){function t(t,n,i,o,a,c,l){var s=e.call(this,n,i,o,a,c,l)||this;return s.componentFactoryResolver=t,s.trigger=null,s.commitment$=new r.a,s.magazineTipsComponent=s.hostView.createComponent(s.componentFactoryResolver.resolveComponentFactory(p)),s}return Object(i.d)(t,e),t.prototype.ngAfterViewInit=function(){var t=this;this.magazineTipsComponent.instance.getStorageItemName(this.storageItemName),this.magazineTipsComponent.instance.getCommitment(this.commitment$);var n=this.commitment$.subscribe(function(n){n.storageStatus&&(t.setVisible(),e.prototype.ngOnChanges.call(t,{visible:null}),h.next({storageItemName:t.storageItemName}))});this.destroy$.subscribe(function(){n.unsubscribe()}),this.content=this.magazineTipsComponent.instance.popoverTemplate,e.prototype.ngAfterViewInit.call(this)},t.prototype.ngOnChanges=function(t){var n=t.magazineVisible;n&&(this.setVisible(n.currentValue),t.visible=null),e.prototype.ngOnChanges.call(this,t)},t.prototype.setVisible=function(e){this.visible=void 0!==e?e&&"true"!==localStorage.getItem(this.storageItemName):this.magazineVisible&&"true"!==localStorage.getItem(this.storageItemName)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.Renderer2),a["\u0275\u0275directiveInject"](u.a,9),a["\u0275\u0275directiveInject"](m.a))},t.\u0275dir=a["\u0275\u0275defineDirective"]({type:t,selectors:[["","magazineTips",""]],inputs:{trigger:["nzPopoverTrigger","trigger"],storageItemName:"storageItemName",magazineVisible:"magazineVisible"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]]}),t}(o.a),f=function(){function e(e){var t=this;this.elementRef=e,this.redCircleVisible=!0,this.className=[],h.subscribe(function(e){t.storageItemName===e.storageItemName&&t.guideVisible()})}return e.prototype.ngOnChanges=function(e){this.guideVisible()},e.prototype.guideVisible=function(){var e,t;this.redCircleVisible&&!localStorage.getItem(this.storageItemName)?(e=this.elementRef.nativeElement.classList).add.apply(e,Object(i.i)(["red-circle"],this.className)):(t=this.elementRef.nativeElement.classList).remove.apply(t,Object(i.i)(["red-circle"],this.className))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](a.ElementRef))},e.\u0275dir=a["\u0275\u0275defineDirective"]({type:e,selectors:[["","redCircle",""]],inputs:{storageItemName:"storageItemName",redCircleVisible:"redCircleVisible",className:"className"},features:[a["\u0275\u0275NgOnChangesFeature"]]}),e}()},"k7+O":function(e,t,n){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=e.exports,i=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,o=n.length,r={};i<o;i++)if((e=n[i])&&e[1]in t){for(i=0;i<e.length;i++)r[n[0][i]]=e[i];return r}return!1}(),o={change:i.fullscreenchange,error:i.fullscreenerror},r={request:function(e){return new Promise((function(n,o){var r=(function(){this.off("change",r),n()}).bind(this);this.on("change",r);var a=(e=e||t.documentElement)[i.requestFullscreen]();a instanceof Promise&&a.then(r).catch(o)}).bind(this))},exit:function(){return new Promise((function(e,n){if(this.isFullscreen){var o=(function(){this.off("change",o),e()}).bind(this);this.on("change",o);var r=t[i.exitFullscreen]();r instanceof Promise&&r.then(o).catch(n)}else e()}).bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var i=o[e];i&&t.addEventListener(i,n,!1)},off:function(e,n){var i=o[e];i&&t.removeEventListener(i,n,!1)},raw:i};i?(Object.defineProperties(r,{isFullscreen:{get:function(){return Boolean(t[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[i.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[i.fullscreenEnabled])}}}),n?e.exports=r:window.screenfull=r):n?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},kVCb:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("ofXK"),o=n("3Pt+"),r=n("sYmb"),a=n("bBxm"),c=n("7gQO"),l=n("rMZv"),s=n("qAZ0"),d=n("3/1E"),p=n("fXoL"),u=function(){function e(e){Object(a.a)(e)}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275inject"](r.c))},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[i.c,o.g,r.a,l.d,c.a,s.b,d.b]]}),e}()},"kXS+":function(e,t,n){(function(e){var i,o,r,a=["insertAdjacentHTML","9999999","metaKey","blur","keyCode","watermark_cols","hiddenCtrlP","setAttribute","watermark_rows","watermark_y","returnValue","clientWidth","<br><br>","scrollWidth","#000000","document","MozMutationObserver"," !important;","absolute","scrollHeight","visible","open","body","div","shadowRoot","KeyP","qp-fixed","attachShadow","exports","documentElement","createElement","length","interval","ctrlKey","blurText","getElementsByClassName","removeEventListener","allowCapture","_hw_cont_m","onloadWm",".qp-fixed .qp-fixed-btn","onload","watermark_prefix","MutationObserver","disconnect","watermark_fontsize","watermark_color","blurCaptureForbid","KeyS","\u70b9\u51fb\u5173\u95ed","watermark_alpha","</a></span></div>","getElementById","del","K1n0HswQ","center","hiddenF12",'<a class="qp-fixed-btn" style="text-decoration: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;color: #fff;background-color: #ff4c4c;min-width: 100px;font-size: 15px;line-height: 15px;text-align: center;border-radius: 5px;padding: 8px 15px; display: inline-block;font-weight: 400;cursor: pointer;background-image: none;border: 1px solid transparent;white-space: nowrap;">',"resize","which","none","watermark_x","contentWindow","keydown","pointer-events: none !important;top:0;left:0;width:100%;height:100%;display: block !important;position:absolute;user-select:none !important;-ms-user-select:none !important;-moz-user-select:none !important;-webkit-user-select:none !important","querySelectorAll","init","intervalTime","watermark_height","captureBtnClick","amd","deg)","watermark_font","shiftKey","event","cssText","load","removedNodes",'<div class="qp-fixed" style="width: 100%;height: 100%;left: 0;top: 0;background: #000;color: #fff;position: fixed;text-align: center;z-index: 99999999;">',"hasFocus","preventDefault","removeChild","max","click","position","contextmenu","beforeend","object","cancelBubble","block","code","createTextNode","watermark_parent_node","watermark_angle","watermark_y_space","style","charCode","altKey","F12","keyCheckFn","appendChild","btnLabel","addEventListener","watermark requires a window with a document","function","isContextPart","showForbidCaptureInfo","watermark_width","parentNode","stopPropagation","closeWatermark","hiddenContextmenu","watermark_x_space","clientHeight","externalFrame","rotate(-","observe","relative","text","hiddenCtrlS"];o=a,r=466,function(e){for(;--e;)o.push(o.shift())}(++r);var c,l,s=function(e,t){return a[e-=0]};c="undefined"!=typeof window?window:this,l=function(e){return function(){var t,n,i,o,r={},a=s("0x34"),c=e,l={allowCapture:!1,closeWatermark:!1,blurCaptureForbid:!1,watermark_prefix:s("0x44"),watermark_txt:"\u6d4b\u8bd5\u6c34\u5370",watermark_x:0,watermark_y:0,watermark_rows:0,watermark_cols:0,watermark_x_space:180,watermark_y_space:80,watermark_font:'"PingFangSC-Regular", "Hiragino Sans GB", "Microsoft YaHei","\u5fae\u8f6f\u96c5\u9ed1","Roboto", "Arial", "Helvetica", "Myriad"',watermark_color:s("0x1c"),watermark_fontsize:"12px",watermark_alpha:.1,watermark_width:150,watermark_height:30,watermark_angle:10,watermark_parent_width:0,watermark_parent_height:0,watermark_parent_node:null,monitor:!0,interval:!1,intervalTime:300,hiddenContextmenu:!0,hiddenCtrlS:!0,hiddenCtrlP:!0,hiddenF12:!0,isContextPart:!1,text:"\u60a8\u6b63\u5728\u6d4f\u89c8\u5173\u952e\u9875\u9762, \u8bbf\u95ee\u4fe1\u606f\u5df2\u88ab\u8bb0\u5f55, \u8bf7\u52ff\u622a\u56fe!",blurText:"\u60a8\u6b63\u5728\u6d4f\u89c8\u5173\u952e\u9875\u9762, \u8bf7\u52ff\u5207\u5c4f!",btnLabel:s("0x3f"),keyCheckFn:function(e){var t=e[s("0x2f")]||e[s("0x10")],n=e[s("0x6f")],i=e[s("0x57")];return n||n&&t||n&&i||i&&t}},d={childList:!0,attributes:!0,subtree:!0},p=e[s("0x39")]||e.WebKitMutationObserver||e[s("0x1e")];p&&(i=new p(function(e){(r&&1===e[s("0x2d")]||1===e[s("0x2d")]&&e[0][s("0x5b")][s("0x2d")]>=1)&&u(r)}));var u=function e(){var r=document[s("0x42")](l[s("0x6a")]);n=r||document[s("0x24")],t=n.id+a;var c=document[s("0x42")](t);c&&n&&n.removeChild(c),n[s("0x6d")][s("0x62")]=s("0xb");var p=Math[s("0x60")](n[s("0x1b")],n[s("0x19")]),u=Math[s("0x60")](n[s("0x21")],n.clientHeight);0===u&&(u=Math[s("0x60")](n.scrollHeight,n[s("0x7")],document[s("0x2b")][s("0x7")])-l.watermark_height/2);var m=arguments[0]||{},h=n,g=0,f=0;m.watermark_parent_width||m.watermark_parent_height?h&&(g=0,f=0,l.watermark_x=l[s("0x4b")]+f,l[s("0x17")]=l[s("0x17")]+g):h&&(g=0,f=0);var v=document[s("0x42")](t),b=null;v?b=v.shadowRoot||v:((v=document[s("0x2c")](s("0x25"))).id=t,v[s("0x15")](s("0x6d"),s("0x4e")),n[s("0x72")](v),b="function"==typeof v[s("0x29")]?v.attachShadow({mode:s("0x23")}):v),l[s("0x13")]=parseInt((p-l.watermark_x)/(l.watermark_width+l.watermark_x_space));var C,y=parseInt((p-l[s("0x4b")]-l[s("0x1")]*l[s("0x13")])/l[s("0x13")]);l.watermark_x_space=y?l[s("0x6")]:y,l[s("0x16")]=parseInt((u-l[s("0x17")])/(l[s("0x52")]+l.watermark_y_space));var x,w,_,O=parseInt((u-l[s("0x17")]-l.watermark_height*l[s("0x16")])/l[s("0x16")]);l[s("0x6c")]=O?l[s("0x6c")]:O,r?(C=l[s("0x4b")]+l[s("0x1")]*l[s("0x13")]+l[s("0x6")]*(l.watermark_cols-1),x=l[s("0x17")]+l[s("0x52")]*l.watermark_rows+l[s("0x6c")]*(l[s("0x16")]-1)):(C=f+l[s("0x4b")]+l[s("0x1")]*l[s("0x13")]+l.watermark_x_space*(l[s("0x13")]-1),x=g+l.watermark_y+l[s("0x52")]*l[s("0x16")]+l[s("0x6c")]*(l.watermark_rows-1));for(var S=0;S<l.watermark_rows;S++){_=r?g+l[s("0x17")]+(u-x)/2+(l.watermark_y_space+l[s("0x52")])*S:l[s("0x17")]+(u-x)/2+(l[s("0x6c")]+l[s("0x52")])*S;for(var E=0;E<l[s("0x13")];E++){w=r?f+l.watermark_x+(p-C)/2+(l.watermark_width+l[s("0x6")])*E:l[s("0x4b")]+(p-C)/2+(l[s("0x1")]+l.watermark_x_space)*E;var M=document[s("0x2c")](s("0x25")),P=document[s("0x69")](l.watermark_txt);M[s("0x72")](P),I(M,w,_),b.appendChild(M)}}function I(e,t,n){e.id=l[s("0x38")]+S+E;var i={"-webkit-transform":s("0x9")+l[s("0x6b")]+s("0x55"),"-moz-transform":s("0x9")+l.watermark_angle+s("0x55"),"-ms-transform":s("0x9")+l[s("0x6b")]+s("0x55"),"-o-transform":s("0x9")+l[s("0x6b")]+s("0x55"),transform:s("0x9")+l.watermark_angle+s("0x55"),visibility:s("0x22"),position:s("0x20"),left:t+"px",top:n+"px",overflow:"hidden","z-index":s("0xf"),opacity:l[s("0x40")],"font-size":l[s("0x3b")],"font-family":l[s("0x56")],"text-align":s("0x45"),width:l[s("0x1")]+"px",height:l[s("0x52")]+"px",display:s("0x67"),color:l[s("0x3c")],"user-select":"none","-ms-user-select":s("0x4a"),"-moz-user-select":"none","-webkit-user-select":s("0x4a")},o="";for(var r in i)o+=r+":"+i[r]+s("0x1f");e[s("0x6d")][s("0x59")]+=o}!1!==l.monitor&&i&&(i[s("0xa")](n,d),v[s("0x26")]&&i[s("0xa")](v[s("0x26")],d)),!0===l[s("0x2e")]&&l[s("0x51")]&&(o&&clearInterval(o),o=setInterval(function(){e()},l[s("0x51")]))};function m(t){var n=t||e.event,i=n[s("0x12")]||n.which||n[s("0x6e")],o=n[s("0x68")];return l[s("0x71")](n)?(h(s("0xc"),s("0x73")),n[s("0x5e")]&&n.preventDefault(),n[s("0x18")]&&(n.returnValue=!1),n[s("0x66")]=!0,n[s("0x3")]&&n[s("0x3")](),!1):27===i||"Escape"===o?(v(),n[s("0x5e")]&&n.preventDefault(),n[s("0x18")]&&(n.returnValue=!1),n.cancelBubble=!0,n[s("0x3")]&&n[s("0x3")](),!1):void 0}function h(){var t=f(l[s("0xc")],l[s("0x73")]);0===e[s("0x1d")].getElementsByClassName(s("0x28"))[s("0x2d")]&&e.document[s("0x24")][s("0xe")](s("0x64"),t);var n=e[s("0x1d")][s("0x4f")](s("0x36")),i={};if(n[s("0x2d")]>0){for(var o=0;o<n.length;o++)(i=n[o])[s("0x74")]&&i[s("0x74")](s("0x61"),v);i=null}n=null}function g(){if(!document[s("0x5d")]||!document[s("0x5d")]()){var t=f(l[s("0x30")],l[s("0x73")]);0===e[s("0x1d")][s("0x31")]("qp-fixed").length&&e.document[s("0x24")][s("0xe")](s("0x64"),t);var n=e.document.querySelectorAll(".qp-fixed .qp-fixed-btn"),i={};if(n[s("0x2d")]>0){for(var o=0;o<n[s("0x2d")];o++)(i=n[o])[s("0x74")]&&i[s("0x74")](s("0x61"),v);i=null}n=null}}function f(e,t){return s("0x5c")+'<span class="qp-fixed-text" style="font-size:11px;position: absolute;left: 50%;top: 50%;display: inline-block;-ms-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%);">'+e+s("0x1a")+s("0x47")+t+s("0x41")}function v(){l.captureBtnClick&&l[s("0x53")]();var t=e[s("0x1d")].getElementsByClassName(s("0x28")),n={};if(t[s("0x2d")]>0){for(var i=t[s("0x2d")];i>0;i--)(n=t[i-1])[s("0x2")]&&n[s("0x2")][s("0x5f")](n);n=null,t=null}var o=e.document[s("0x4f")](s("0x36"));o.length>0&&o.removeEventListener(s("0x61"),v),o=null}function b(){!0===l[s("0x4")]||u(r)}function C(){!0===l[s("0x4")]||u(r)}function y(t){var n,i=t||e[s("0x58")],o=t[s("0x12")]||t[s("0x49")]||t.charCode,r=t[s("0x68")],a=t[s("0x2f")]||t.metaKey;return(r==s("0x70")||123==o)&&!1!==l[s("0x46")]||a&&(r===s("0x3e")||83===o)&&!1!==l[s("0xd")]||a&&(r===s("0x27")||80===o)&&!1!==l[s("0x14")]?((n=i)[s("0x5e")]&&n[s("0x5e")](),n[s("0x18")]&&(n[s("0x18")]=!1),n[s("0x12")]=0,n.cancelBubble=!0,n[s("0x3")]&&n[s("0x3")](),!1):void 0}function x(t){return(t=t||e[s("0x58")]).preventDefault&&t.preventDefault(),t.returnValue&&(t[s("0x18")]=!1),t[s("0x66")]=!0,t[s("0x3")]&&t[s("0x3")](),!1}this[s("0x50")]=function(e){r=e,this.del(),function(){if(arguments[s("0x2d")]>=1&&typeof arguments[0]===s("0x65")){var e=arguments[0]||{};for(var t in e)e[t]&&l[t]&&e[t]===l[t]||(e[t]||0===e[t]||!1===e[t])&&(l[t]=e[t])}}(e)},this.load=function(){var t;!0===l[s("0x4")]||u(),!0===l[s("0x33")]||(e.addEventListener(s("0x4d"),m,{capture:!0}),!0===l.blurCaptureForbid&&e[s("0x74")](s("0x11"),g,{capture:!0})),c=c||e,((t=n)||!0!==l[s("0x33")]||!0!==l[s("0x4")])&&(!1!==l[s("0x5")]&&(!0===l.isContextPart?t:c).addEventListener(s("0x63"),x),!1===l[s("0x46")]&&!1===l[s("0xd")]&&!1===l[s("0x14")]||c[s("0x74")]("keydown",y),c[s("0x74")](s("0x5a"),b),c[s("0x74")]("resize",C)),r.externalFrame&&r[s("0x8")]&&(r[s("0x8")][s("0x37")]=function(){r.externalFrame[s("0x4c")]&&r[s("0x8")][s("0x4c")][s("0x1d")]&&(!0!==l.allowCapture&&r[s("0x8")][s("0x4c")].document.addEventListener(s("0x4d"),m),r.externalFrame[s("0x4c")][s("0x1d")][s("0x74")](s("0x4d"),y))})},this[s("0x43")]=function(){var a,d;!0===l[s("0x4")]||(a=document[s("0x42")](t))&&n[s("0x5f")](a),!0===l.allowCapture||(e[s("0x32")](s("0x4d"),m,{capture:!0}),r.externalFrame&&r[s("0x8")].contentWindow&&r[s("0x8")][s("0x4c")][s("0x1d")]&&r.externalFrame.contentWindow[s("0x1d")][s("0x32")](s("0x4d"),m),!0===l[s("0x3d")]&&e[s("0x32")](s("0x11"),g,{capture:!0})),o&&clearInterval(o),c=c||e,(d=!0===l[s("0x77")]?n:c)&&d[s("0x32")](s("0x63"),x),c[s("0x32")]("keydown",y),r[s("0x8")]&&r[s("0x8")].contentWindow&&r.externalFrame[s("0x4c")][s("0x1d")]&&r[s("0x8")][s("0x4c")][s("0x1d")].removeEventListener("keydown",y),c[s("0x32")]("load",b),c.removeEventListener(s("0x48"),C),i&&i[s("0x3a")](),n=null},this[s("0x0")]=h}},"function"===s("0x76")&&n("B9Yq")[s("0x54")]?void 0===(i=(function(){return l(c)}).apply(t,[]))||(e.exports=i):typeof e===s("0x65")&&typeof e[s("0x2a")]===s("0x65")?e.exports=c[s("0x1d")]?l(c):function(e){if(!e.document)throw new Error(s("0x75"));return l(e)}:c[s("0x35")]=l(c)}).call(this,n("YuTi")(e))},lOo3:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("fXoL"),o=n("A/Mn"),r=n("4P1S"),a=n("sYmb"),c=n("UJq8"),l=n("bNXi"),s=n("ofXK"),d=n("BT9m"),p=n("3Pt+");function u(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"i",4),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().confirmFunc()}),i["\u0275\u0275elementEnd"]()}}var m=function(){function e(e,t,n,o,r){this.translate=e,this.emitService=t,this.attrPipe=n,this.notification=o,this.knowledgeService=r,this.readOnly=!1,this.needSendIcon=!0,this.confirmClick=new i.EventEmitter,this.inputVal=""}return Object.defineProperty(e.prototype,"inputPlaceholder",{get:function(){return this.replayAnnotationObj?this.translate.instant("REPLYING","")+" "+this.attrPipe.transform(this.replayAnnotationObj.submitted_by,"person"):this.translate.instant("KNOWLEDGE_BASE_COMMENT_PLACEHOLDER","")},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&(e.currentUser=t)}),this.emitService.eventEmit.subscribe(function(t){if(t&&t.type)switch(t.type){case"wiki-comment::replyAnnotationComment":t.commentGuid==e.commentGuid&&e.replyAnnotationCommentClickHandler(t)}})},e.prototype.replyAnnotationCommentClickHandler=function(e){this.replayAnnotationObj=e.item,this.replayAnnotationObj.commentGuid=e.commentGuid,document.querySelector("[data-highlight-comment-uuid="+this.commentGuid+"]").querySelector(".annotation-input-styl").focus()},e.prototype.confirmFunc=function(){if("-1"==this.status)return this.notification.info(this.translate.instant("ENDED_DISCUSSION_TIP"),""),void(this.inputVal="");this.inputVal&&(this.replayAnnotationObj?this.postComment():this.confirmClick.emit({value:this.inputVal}),this.inputVal="")},e.prototype.postComment=function(){this.postCommentHandler(this.replayAnnotationObj)},e.prototype.postCommentHandler=function(e){var t,n=this;if(e){var i={anonymous:null!==(t=this.isAnonymous)&&void 0!==t&&t,category:"annotation",content:this.inputVal,entity_id:e.entity_id,parent_id:e.id,receiver:this.creatorId,sendCOE:!1,sendEspace:!1,submitted_by:this.currentUser.user_id,system_add:0};this.knowledgeService.postComment(i).subscribe(function(e){n.emitService.emit({type:"wiki-comment::replyAnnotationCommentPostSuccess",value:n.inputVal,replayAnnotationObj:n.replayAnnotationObj,commentGuid:n.replayAnnotationObj.commentGuid}),n.notification.success(n.translate.instant("ADD_POST_SUCCESS"),""),n.replayAnnotationObj=void 0},function(){}),window.hwa("trackStructEvent",{label:"\u8bc4\u8bba"})}},e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.c),i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](l.b),i["\u0275\u0275directiveInject"](o.b))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["comment-input"]],inputs:{readOnly:"readOnly",needSendIcon:"needSendIcon",commentGuid:"commentGuid",status:"status",isAnonymous:"isAnonymous",creatorId:"creatorId",articleId:"articleId"},outputs:{confirmClick:"confirmClick"},features:[i["\u0275\u0275ProvidersFeature"]([o.b,r.a])],decls:4,vars:6,consts:[[1,"annotation-input"],["class","input-search-icon iconfont icon-to-right",3,"click",4,"ngIf"],[3,"height","width","account"],[1,"annotation-input-styl",3,"ngModel","placeholder","ngModelChange"],[1,"input-search-icon","iconfont","icon-to-right",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",0),i["\u0275\u0275template"](1,u,1,0,"i",1),i["\u0275\u0275element"](2,"user-avatar",2),i["\u0275\u0275elementStart"](3,"input",3),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.inputVal=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.needSendIcon),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("height",25)("width",25)("account",t.currentUser.huawei_id),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",t.inputVal)("placeholder",t.inputPlaceholder))},directives:[s.n,d.a,p.d,p.k,p.l],styles:[".annotation-input[_ngcontent-%COMP%]{display:inline-block;position:relative;width:100%;height:100%}.annotation-input[_ngcontent-%COMP%]   user-avatar[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 13px);left:10px}.annotation-input[_ngcontent-%COMP%]   .input-search-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:calc(50% - 12px);cursor:pointer;color:#23c6c8}.annotation-input[_ngcontent-%COMP%]   .annotation-input-styl[_ngcontent-%COMP%]{width:100%;height:100%;outline:none;border:none;background:#fff;padding:10px 40px 10px 50px;border-radius:5px}"]}),e}()},lPmA:function(e,t,n){"use strict";n.d(t,"a",function(){return H});var i=n("fXoL"),o=n("XNiG"),r=n("1G5W"),a=n("XIp8"),c=n("1zlk"),l=n("UJq8"),s=n("sYmb"),d=n("tyNb"),p=n("A/Mn"),u=n("dEAy"),m=n("bNXi"),h=n("ofXK"),g=n("qAZ0"),f=n("rMZv"),v=n("3/1E"),b=n("oFdG");function C(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",11),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"span",12),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).changeModel("full")}),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](o.modelTitle),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](5,2,"SHOW_MORE"))}}function y(e,t){1&e&&i["\u0275\u0275element"](0,"i",16)}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275template"](1,y,1,0,"ng-template",null,14,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275element"](3,"nz-spin",15),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](2);i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("nzIndicator",n)}}function w(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",27),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](3).$implicit;return i["\u0275\u0275nextContext"](3).setWikiFavorite(e)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275element"](2,"i",28),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](3).$implicit;i["\u0275\u0275property"]("title",i["\u0275\u0275pipeBind1"](1,3,o.isFavorite?"UNFAVORITE":"ADD_TO_FAVORITES")),i["\u0275\u0275advance"](2),i["\u0275\u0275classMap"](o.isFavorite?"icon-xing1":"icon-star-outline")}}function _(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",29),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](3),t=e.$implicit,o=e.index;return i["\u0275\u0275nextContext"](3).thoroughDeletedArticle(t,o)}),i["\u0275\u0275element"](1,"i",30),i["\u0275\u0275elementEnd"]()}}var O=function(){return["favoriteList","favorite"]};function S(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,w,3,5,"span",25),i["\u0275\u0275template"](2,_,2,0,"span",26),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](5);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","recycleBin"!==n.scene),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](2,O).includes(n.scene))}}var E=function(){return["update","view","case","excellentCasesMore"]};function M(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",20),i["\u0275\u0275elementStart"](2,"div",21),i["\u0275\u0275element"](3,"img",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",23),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](3).goDetailPage(e)}),i["\u0275\u0275elementStart"](5,"div",24),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,S,3,3,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](),r=o.index,a=o.$implicit,c=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275classMap"](0==r?"item-no-border":""),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](a.title),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](4,E).includes(c.scene))}}function P(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275template"](1,M,8,5,"ng-container",9),i["\u0275\u0275elementEnd"]()),2&e){var n=t.index;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n<5)}}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",31),i["\u0275\u0275element"](1,"img",32),i["\u0275\u0275element"](2,"span",33),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](3,1,"COMMON_INFO_NO_DATA")))}function k(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,P,2,1,"div",17),i["\u0275\u0275template"](2,I,4,3,"div",18),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.favoriteViewList),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!n.favoriteViewList.length)}}function T(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",34),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).showMoreFvorite()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"SHOW_MORE")))}function D(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275elementStart"](1,"div",5),i["\u0275\u0275template"](2,C,6,4,"ng-container",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",7),i["\u0275\u0275template"](4,x,4,1,"div",8),i["\u0275\u0275template"](5,k,3,2,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,T,3,3,"span",10),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](),o=i["\u0275\u0275reference"](4);i["\u0275\u0275property"]("ngClass","detailPage"!==n.pageFrom?"scene-view-padding":""),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","detailPage"!==n.pageFrom)("ngIfElse",o),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!n.dataBack),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.dataBack),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","detailPage"===n.pageFrom&&n.favoriteViewList.length)}}function A(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function z(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,A,1,0,"ng-container",50),i["\u0275\u0275elementEnd"]()),2&e){i["\u0275\u0275nextContext"](2);var n=i["\u0275\u0275reference"](4);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n)}}function R(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"CUSTOM_OPERATE")))}function L(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",27),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](2).$implicit;return i["\u0275\u0275nextContext"](2).setWikiFavorite(e)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275element"](2,"i",28),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](2).$implicit;i["\u0275\u0275property"]("title",i["\u0275\u0275pipeBind1"](1,3,o.isFavorite?"UNFAVORITE":"ADD_TO_FAVORITES")),i["\u0275\u0275advance"](2),i["\u0275\u0275classMap"](o.isFavorite?"icon-xing1":"icon-star-outline")}}function N(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",29),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](2),t=e.$implicit,o=e.index;return i["\u0275\u0275nextContext"](2).thoroughDeletedArticle(t,o)}),i["\u0275\u0275element"](1,"i",30),i["\u0275\u0275elementEnd"]()}}function j(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td"),i["\u0275\u0275template"](1,L,3,5,"span",25),i["\u0275\u0275template"](2,N,2,0,"span",55),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","recycleBin"!==n.scene),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](2,O).includes(n.scene))}}function V(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275elementStart"](2,"div",51),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).goDetailPage(e)}),i["\u0275\u0275elementStart"](3,"div",21),i["\u0275\u0275element"](4,"img",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",19),i["\u0275\u0275elementStart"](6,"div",24),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"td"),i["\u0275\u0275elementStart"](9,"div",52),i["\u0275\u0275element"](10,"img",53),i["\u0275\u0275elementStart"](11,"span"),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"td",52),i["\u0275\u0275element"](14,"i",54),i["\u0275\u0275elementStart"](15,"span",41),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,j,3,3,"td",9),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](null==o?null:o.title),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("src","http://w3.huawei.com/w3lab/rest/yellowpage/face/"+(null==o.created_by?null:o.created_by.account)+"/45",i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"]((null==o.created_by?null:o.created_by.name)+" "+(null==o.created_by?null:o.created_by.account)),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",null==o?null:o.last_update_time," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](5,E).includes(r.scene))}}var F=function(e){return{total:e}};function B(e,t){if(1&e&&(i["\u0275\u0275text"](0),i["\u0275\u0275pipe"](1,"translate")),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](1,1,"COE_TOTAL",i["\u0275\u0275pureFunction1"](4,F,null==n.paginateOption?null:n.paginateOption.total))," ")}}function U(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",35),i["\u0275\u0275elementStart"](1,"div",36),i["\u0275\u0275elementStart"](2,"div",37),i["\u0275\u0275elementStart"](3,"div",38),i["\u0275\u0275elementStart"](4,"span",39),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().changeModel("small")}),i["\u0275\u0275element"](5,"i",40),i["\u0275\u0275elementStart"](6,"span",41),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"span",42),i["\u0275\u0275text"](10,"/"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"span",43),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,z,2,1,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",44),i["\u0275\u0275elementStart"](15,"nz-table",45,46),i["\u0275\u0275elementStart"](17,"thead"),i["\u0275\u0275elementStart"](18,"tr"),i["\u0275\u0275elementStart"](19,"th"),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"th"),i["\u0275\u0275text"](23),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"th"),i["\u0275\u0275text"](26),i["\u0275\u0275pipe"](27,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](28,R,3,3,"th",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"tbody"),i["\u0275\u0275template"](30,V,18,6,"tr",47),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"div"),i["\u0275\u0275elementStart"](32,"nz-pagination",48),i["\u0275\u0275listener"]("nzPageIndexChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().paginateOption.currentPage=e})("nzPageSizeChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().paginateOption.pageSize=e})("nzPageIndexChange",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().paginationChange()})("nzPageSizeChange",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().paginationChange()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](33,B,2,6,"ng-template",null,49,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275reference"](16),r=i["\u0275\u0275reference"](34),a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,21,"COMMON_BTN_RETURN")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](a.modelTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update"!==a.scene),i["\u0275\u0275advance"](1),i["\u0275\u0275classMap"]("update"!==a.scene&&"favorite"!==a.scene?"m-b-10":"full-view-list-height"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzData",a.favoriteViewList)("nzShowPagination",!1)("nzFrontPagination",!1),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](21,23,"TITLE")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](24,25,"CREATOR")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](27,27,"UPDATE_TIME")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](29,E).includes(a.scene)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",o.data),i["\u0275\u0275advance"](1),i["\u0275\u0275classMap"]("update"!==a.scene&&"favorite"!==a.scene?"panigation":"hidden"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzPageIndex",a.paginateOption.currentPage)("nzPageSize",a.paginateOption.pageSize)("nzTotal",a.paginateOption.total)("nzPageSizeOptions",a.paginateOption.PageSizeOptions)("nzSize","small")("nzShowTotal",r)}}function W(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"wiki-search-input",56),i["\u0275\u0275listener"]("emitSearchVal",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().getSearchVal(e)}),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("customStyle",o.customStyle)("inputStyle",o.inputStyle)("pageForm","my-favorite")}}var H=function(){function e(e,t,n,r,a,c,l,s){this.emitService=e,this.translate=t,this.router=n,this.activeRoute=r,this.knowledgeService=a,this.modal=c,this.notification=l,this.coeService=s,this.onDestory$=new o.a,this.model="small",this.scene="favorite",this.closeFavoriteModel=new i.EventEmitter,this.favoriteViewListInit=[],this.favoriteViewList=[],this.dataBack=!0,this.searchVal="",this.sceneVal="",this.customStyle={top:"26px",right:"100px",width:"100%",left:"0"},this.inputStyle={borderRadius:"0px",height:"30px"},this.modelTitle="",this.sceneTitle={view:this.translate.instant("MY_BROWSE"),case:this.translate.instant("MY_CASE"),favoriteList:this.translate.instant("STARRED"),recycleBin:this.translate.instant("BIN"),excellentCasesMore:this.translate.instant("WIKI_RECOMMEND"),update:this.translate.instant("RECENTLY_UPDATED"),favorite:this.translate.instant("STARRED")},this.paginateOption={total:0,currentPage:1,pageSize:10,PageSizeOptions:[10,20,30]}}return e.prototype.ngOnInit=function(){var e=this;this.modelTitle=this.sceneTitle[this.scene],this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&(e.currentUserId=t.user_id)}),this.activeRoute.paramMap.pipe(Object(r.a)(this.onDestory$)).subscribe(function(t){e.currentDomain=t.get("domain_id"),e.selectCategory=Number(t.get("categoryId")),e.sceneVal=e.scene,"update"===e.scene?e.getUpdateView():e.getDifferentView(e.sceneVal,e.searchVal)})},e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe()},e.prototype.showMoreFvorite=function(){this.emitService.emit({type:"show-more-fvorite"})},e.prototype.paginationChange=function(){this.getDifferentView(this.sceneVal,this.searchVal)},e.prototype.getUpdateView=function(){var e=this;this.dataBack=!1,this.knowledgeService.getUpdateView(this.currentDomain).subscribe(function(t){e.dataBack=!0,e.favoriteViewList=t||[]},function(){})},e.prototype.getDifferentView=function(e,t){var n=this;this.dataBack=!1,this.currentSceneType=e,"favorite"===e?this.knowledgeService.getFavoritetView(t).subscribe(function(e){n.coeTypeCommonLogic(e)},function(){}):this.getCoeInterfaceList(e,t)},e.prototype.getCoeInterfaceList=function(e,t){"excellentCasesMore"===e?this.getExcellentCasesList(t):this.getCoePersonList(e,t)},e.prototype.getCoePersonList=function(e,t){var n=this,i={pagination:{current_page:this.paginateOption.currentPage,page_size:this.paginateOption.pageSize},countType:"coe",listType:e,search:t,domainId:Number(this.currentDomain)};this.knowledgeService.getPersonalList(i).subscribe(function(e){n.paginateOption.total=e.total_records,n.paginateOption.currentPage=e.current_page,n.coeTypeCommonLogic(null==e?void 0:e.result)},function(){})},e.prototype.coeTypeCommonLogic=function(e){if(this.dataBack=!0,!e)return this.favoriteViewList=[],void(this.favoriteViewListInit=[]);"favorite"===this.sceneVal?(this.favoriteViewList=e,this.favoriteViewListInit=Object(a.a)(e)):this.favoriteViewList=e},e.prototype.changeModel=function(e){this.model=e,this.closeFavoriteModel.emit({type:"close",model:this.model}),this.getPersonalCount()},e.prototype.setWikiFavorite=function(e){var t=this;this.knowledgeService.setWikiFavorite({wikiId:e.id,wikiSn:e.sn,createdBy:this.currentUserId},!e.isFavorite).subscribe(function(e){t.getDifferentView(t.currentSceneType,"")},function(){}),window.hwa("trackStructEvent",{label:e.isFavorite?"\u53d6\u6d88\u6536\u85cf":"\u6dfb\u52a0\u6536\u85cf"})},e.prototype.getSearchVal=function(e){this.searchVal=e,this.getDifferentView(this.sceneVal,this.searchVal)},e.prototype.goDetailPage=function(e){if(this.closeFavoriteModel.emit({type:"close",model:this.model}),["view","case","recycleBin","favoriteList","excellentCasesMore"].includes(this.scene)){var t=window.location.origin+"/wiki/"+e.sn;window.open(t,"_blank")}else"favorite"!==this.scene?window.location.href.includes("/wiki/")?-1!==window.location.href.split("/wiki/")[1].search("WIKI")?this.router.navigate(["../"+e.kanban_id+"/"+e.sn],{relativeTo:this.activeRoute}):this.router.navigateByUrl("/domains"+window.location.href.split("domains")[1].split("/wiki/")[0]+"/wiki/"+e.kanban_id+"/"+e.sn):this.router.navigate(["../wiki/"+e.kanban_id+"/"+e.sn],{relativeTo:this.activeRoute}):(t=window.location.origin+"/domains/"+e.assigned_domain.id+"/wiki/"+e.kanban_id+"/"+e.sn,window.open(t,"_blank"))},e.prototype.thoroughDeletedArticle=function(e,t){var n=this.translate.instant.bind(this.translate),i=this.deletedArticle.bind(this);this.modal.error({nzTitle:n("COMPLETELY_DELETE_CONFIRMATION"),nzContent:"",nzOkText:n("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){i(e,t)},nzCancelText:n("COMMON_BUTTON_CANCLE"),nzOnCancel:function(){}})},e.prototype.deletedArticle=function(e,t){var n=this;this.knowledgeService.saveArticle([{id:e.id,status:"clear",kanban_id:this.selectCategory}]).subscribe(function(e){e.success&&e.success.length&&(n.notification.success(n.translate.instant("DELETE_SUCCESS"),""),n.getDifferentView("recycleBin",n.searchVal))},function(){})},e.prototype.getPersonalCount=function(){var e=this;["favoriteList","recycleBin"].includes(this.sceneVal)&&this.knowledgeService.getCoepersonalCount({type:"coe",domainId:this.currentDomain}).subscribe(function(t){t&&e.emitService.emit("favoriteList"===e.sceneVal?{type:"person-favoriteList-count",data:t.favoritesCount}:{type:"person-recycle-count",data:t.recycleBinCount})},function(){})},e.prototype.getExcellentCasesList=function(e){var t=this;this.coeService.queryCoeResult({domainId:this.currentDomain,pageCode:this.paginateOption.currentPage,pageSize:this.paginateOption.pageSize,search:e,isExcellent:!0}).subscribe(function(e){if(e.data){var n={result:[],current_page:e.data.pageCode,total_records:e.data.totalCount},i=e.data.coeContinueImproveVOS.map(function(e){return{created_by:e.author,title:e.title,last_update_time:e.lastUpdateTime}});n.result=i,t.paginateOption.total=n.total_records,t.paginateOption.currentPage=n.current_page,t.coeTypeCommonLogic(null==n?void 0:n.result)}},function(){})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.a),i["\u0275\u0275directiveInject"](s.c),i["\u0275\u0275directiveInject"](d.f),i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](p.b),i["\u0275\u0275directiveInject"](u.d),i["\u0275\u0275directiveInject"](m.b),i["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["favorite-view"]],inputs:{model:"model",scene:"scene",pageFrom:"pageFrom"},outputs:{closeFavoriteModel:"closeFavoriteModel"},features:[i["\u0275\u0275ProvidersFeature"]([c.a])],decls:5,vars:2,consts:[[1,"favorite-view-page"],["class","favorite-view",3,"ngClass",4,"ngIf"],["class","favorite-full-view",4,"ngIf"],["wikiSearch",""],[1,"favorite-view",3,"ngClass"],[1,"favorite-head","flex-box"],[4,"ngIf","ngIfElse"],[1,"favorite-small-view"],["class","loading-style loading-height",4,"ngIf"],[4,"ngIf"],["class","cursor-pointer f-14 text-999999 m-l-5",3,"click",4,"ngIf"],[1,"favorite-view-title","flex-1"],[1,"cursor-pointer",3,"click"],[1,"loading-style","loading-height"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading",1,"icon-style"],["class","overflow-hidden",4,"ngFor","ngForOf"],["class","no-data-wrapper",4,"ngIf"],[1,"overflow-hidden"],[1,"favorite-view-item"],[1,"favorite-view-item-img"],["src","/knowledge-ui/assets/imgs/knowledge-referral.png"],[1,"overflow-hidden","flex-1","m-r-8","cursor-pointer",3,"click"],[1,"favorite-view-item-title","text-eclipis"],["class","cursor-pointer favorite-icon-box",3,"title","click",4,"ngIf"],["class","cursor-pointer favorite-icon-box delete-icon-box",3,"click",4,"ngIf"],[1,"cursor-pointer","favorite-icon-box",3,"title","click"],[1,"iconfont","f-14","icon-star-favorite"],[1,"cursor-pointer","favorite-icon-box","delete-icon-box",3,"click"],[1,"icon-delete-sty","icon-color","fa","fa-trash-o"],[1,"no-data-wrapper"],["src","/knowledge-ui/assets/imgs/empty.svg"],[1,"box-block","text-999999",3,"textContent"],[1,"cursor-pointer","f-14","text-999999","m-l-5",3,"click"],[1,"favorite-full-view"],[1,"full-view-box"],[1,"full-view-head"],[1,"flex-1"],[1,"cursor-pointer","f-16",3,"click"],[1,"iconfont","icon-back"],[1,"m-l-5"],[1,"m-l-15","f-16"],[1,"m-l-15","f-16","f-bold"],[1,"full-view-list","m-t-20","slimScrollBar"],[3,"nzData","nzShowPagination","nzFrontPagination"],["basicTable",""],[4,"ngFor","ngForOf"],["nzShowSizeChanger","",3,"nzPageIndex","nzPageSize","nzTotal","nzPageSizeOptions","nzSize","nzShowTotal","nzPageIndexChange","nzPageSizeChange"],["totalTemplate",""],[4,"ngTemplateOutlet"],[1,"flex-box","cursor-pointer",3,"click"],[1,"text-color"],[1,"flex-item-user-avater","m-l-5",3,"src"],[1,"iconfont","icon-clock"],["class","cursor-pointer favorite-icon-box  delete-icon-box",3,"click",4,"ngIf"],[3,"customStyle","inputStyle","pageForm","emitSearchVal"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,D,7,6,"div",1),i["\u0275\u0275template"](2,U,35,30,"div",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,W,1,3,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"])),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","small"===t.model),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","full"===t.model))},directives:[h.n,h.l,g.a,h.m,f.c,f.h,f.i,f.b,f.g,f.e,v.a,h.s,b.a],pipes:[s.b],styles:[".favorite-view-page[_ngcontent-%COMP%]{position:relative}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-title[_ngcontent-%COMP%]{margin-bottom:20px;height:20px;line-height:20px;color:#676a6c;font-size:16px;font-weight:600}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item[_ngcontent-%COMP%]{height:56px;display:flex;padding:10px;align-items:center;border-top:1px solid #ededed;overflow:hidden}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item[_ngcontent-%COMP%]:hover{background:#f2f2f2}.favorite-view-page[_ngcontent-%COMP%]   .item-no-border[_ngcontent-%COMP%]{border:none}.favorite-view-page[_ngcontent-%COMP%]   .text-eclipis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-webkit-text-overflow:ellipsis;-moz-text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.favorite-view-page[_ngcontent-%COMP%]   .cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.favorite-view-page[_ngcontent-%COMP%]   .overflow-hidden[_ngcontent-%COMP%]{overflow:hidden}.favorite-view-page[_ngcontent-%COMP%]   .loading-height[_ngcontent-%COMP%]{height:70%}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item-img[_ngcontent-%COMP%]{margin-right:8px}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:25px}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item-title[_ngcontent-%COMP%]{height:16px;line-height:16px;color:#676a6c;font-weight:400;font-size:14px}.favorite-view-page[_ngcontent-%COMP%]   .favorite-view-item-category[_ngcontent-%COMP%]{color:#bdbdbd;font-weight:400;margin-left:2px;font-size:12px}.favorite-view-page[_ngcontent-%COMP%]   .icon-font-size-12[_ngcontent-%COMP%]{font-size:12px;color:#bdbdbd}.favorite-view-page[_ngcontent-%COMP%]   .icon-xing1[_ngcontent-%COMP%]{color:#eead0e}.favorite-full-view[_ngcontent-%COMP%]{width:100%;height:calc(100% - 50px);background:#fff;position:fixed;top:50px;left:0;z-index:10}.favorite-full-view[_ngcontent-%COMP%]   .full-view-box[_ngcontent-%COMP%]{padding:10px 10px 10px 10%;position:relative;height:100%;display:flex;flex-direction:column}.favorite-full-view[_ngcontent-%COMP%]   .full-view-head[_ngcontent-%COMP%]{display:flex}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]{color:#676a6c;overflow:auto}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .delete-icon-box[_ngcontent-%COMP%], .favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .favorite-icon-box[_ngcontent-%COMP%]{width:28px;height:28px;background:#fff;border:1px solid #dbdbdb;border-radius:4.5px;display:inline-block;padding:4px;text-align:center}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .favorite-icon-box[_ngcontent-%COMP%]:hover{border-color:#23c6c8}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .favorite-icon-box[_ngcontent-%COMP%]:hover   .icon-star-favorite[_ngcontent-%COMP%]{color:#23c6c8}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .delete-icon-box[_ngcontent-%COMP%]   .icon-delete-sty[_ngcontent-%COMP%]{font-size:18px}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .delete-icon-box[_ngcontent-%COMP%]:hover{border-color:#e65a6b}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list[_ngcontent-%COMP%]   .delete-icon-box[_ngcontent-%COMP%]:hover   .icon-delete-sty[_ngcontent-%COMP%]{color:#e65a6b}.favorite-full-view[_ngcontent-%COMP%]   .full-view-list-height[_ngcontent-%COMP%]{height:calc(100% - 60px)}.favorite-full-view[_ngcontent-%COMP%]   .flex-item-user-avater[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;margin-right:3px;position:relative;top:-2px}.favorite-full-view[_ngcontent-%COMP%]   .panigation[_ngcontent-%COMP%]{height:30px;text-align:right;display:block}.favorite-full-view[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}.scene-view-padding[_ngcontent-%COMP%]{padding:18px 18px 0}.text-color[_ngcontent-%COMP%]{color:#999}.no-data-wrapper[_ngcontent-%COMP%]{width:100%;padding:20px;text-align:center}.no-data-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;margin:0 auto}  .full-view-list .ant-table-thead th{background:#fff;font-weight:700}"]}),e}()},mLQb:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var i=n("A/Mn"),o=n("fXoL"),r=n("sYmb"),a=n("bNXi"),c=n("UJq8"),l=n("ofXK"),s=n("nJia"),d=n("QWGN"),p=n("lOo3"),u=function(e,t){return{time:e,name:t}};function m(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](2,1,"ENDED_BY",o["\u0275\u0275pureFunction2"](4,u,n.item.lastUpdateTime,n.item.lastUpdatedBy.name)))}}function h(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",9),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).closeDiscussion()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"CLOSE_DISCUSSION")," "))}function g(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"span",12),o["\u0275\u0275elementStart"](2,"span",13),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).setAcceptStatus(1)}),o["\u0275\u0275element"](3,"i",14),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"span",15),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).setAcceptStatus(2)}),o["\u0275\u0275element"](7,"i",16),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,2,"04009001")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,4,"IGNORE")))}function f(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"RAT_ENDED")))}function v(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"ACCEPTED_TIP")))}function b(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"IGNORED_TIP")))}function C(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"button",17),o["\u0275\u0275template"](1,f,3,3,"ng-container",7),o["\u0275\u0275template"](2,v,3,3,"ng-container",7),o["\u0275\u0275template"](3,b,3,3,"ng-container",7),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.item.acceptStatus),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",1===n.item.acceptStatus),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",2===n.item.acceptStatus)}}function y(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,g,10,6,"ng-container",10),o["\u0275\u0275template"](2,C,4,3,"ng-template",null,11,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275reference"](3),i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.currentUserInfo.user_id===i.creatorId&&!i.item.acceptStatus)("ngIfElse",n)}}function x(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275template"](1,m,3,7,"span",7),o["\u0275\u0275template"](2,h,3,3,"button",8),o["\u0275\u0275template"](3,y,4,2,"ng-container",7),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1==n.item.status),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1!=n.item.status&&n.userOperateAccess),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1==n.item.status)}}function w(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275element"](1,"comment-item",18),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.index,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("showOpreation",!1)("item",n)("index",i)("status",r.item.status)("commentGuid",r.item.commentGuid)}}function _(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",19),o["\u0275\u0275elementStart"](1,"comment-input",20),o["\u0275\u0275listener"]("confirmClick",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().addAnnotation(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("commentGuid",i.item.commentGuid)("status",i.item.status)("isAnonymous",i.isAnonymous)("creatorId",i.creatorId)("articleId",i.articleId)}}var O=function(){function e(e,t,n,i){this.translate=e,this.knowledgeService=t,this.notification=n,this.emitService=i,this.title="knowledge-ui",this.userOperateAccess=!1}return e.prototype.ngOnInit=function(){var e=this;this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&(e.userOperateAccess=t.user_id==e.creatorId||t.user_id==e.item.createdBy.id,e.currentUserInfo=t)}),this.item.comments.forEach(function(t){t.commentType=e.item.commentType})},e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe()},e.prototype.addAnnotation=function(e){var t=this,n=this.buildCondition(e);this.knowledgeService.createAnnotation(n).subscribe(function(e){t.notification.success(t.translate.instant("UPDATE_SUCCESS"),""),t.emitService.eventEmit.emit({type:"article-comment::add-annotation-after"})},function(){})},e.prototype.buildCondition=function(e){return{target_content:this.item.targetContent,wiki_sn:this.item.wikiSn,comment:e.value,comment_guid:this.item.commentGuid}},e.prototype.closeDiscussion=function(){var e=this;this.knowledgeService.closeAnnotationComment([{comment_guid:this.item.commentGuid,status:"-1"}]).subscribe(function(t){e.notification.success(e.translate.instant("UPDATE_SUCCESS"),""),e.emitService.emit({type:"wiki::close-annotation",commentGuid:e.item.commentGuid})},function(){})},e.prototype.setAcceptStatus=function(e){var t=this;this.knowledgeService.closeAnnotationComment([{comment_guid:this.item.commentGuid,accept_status:e}]).subscribe(function(n){t.notification.success(t.translate.instant("UPDATE_SUCCESS"),""),t.item.acceptStatus=e},function(){})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](r.c),o["\u0275\u0275directiveInject"](i.b),o["\u0275\u0275directiveInject"](a.b),o["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["annotation-item"]],inputs:{item:"item",creatorId:"creatorId",index:"index",isAnonymous:"isAnonymous",articleId:"articleId"},features:[o["\u0275\u0275ProvidersFeature"]([i.b])],decls:7,vars:9,consts:[[1,"annotation-item"],["class","close-discussion f-12 position-r",4,"ngIf"],[1,"annotation-content"],["nz-tooltip","",3,"nzTooltipTitle","nzTooltipPlacement"],[4,"ngFor","ngForOf"],["class","comment-input-wrapper",4,"ngIf"],[1,"close-discussion","f-12","position-r"],[4,"ngIf"],["class","close-discussion-btn close-discussion-clickable position-a f-14 cursor-pointer",3,"click",4,"ngIf"],[1,"close-discussion-btn","close-discussion-clickable","position-a","f-14","cursor-pointer",3,"click"],[4,"ngIf","ngIfElse"],["template",""],[1,"auth-operate-btns","position-a","f-14"],[1,"m-r-10","cursor-pointer",3,"click"],[1,"iconfont","icon-right","m-r-5"],[1,"cursor-pointer",3,"click"],[1,"iconfont","icon-hide","m-r-5"],["disabled","",1,"close-discussion-btn","btn-disabled","position-a","f-14"],[3,"showOpreation","item","index","status","commentGuid"],[1,"comment-input-wrapper"],[3,"commentGuid","status","isAnonymous","creatorId","articleId","confirmClick"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,x,4,3,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"span",3),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,w,2,5,"div",4),o["\u0275\u0275template"](6,_,2,5,"div",5),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275attribute"]("data-highlight-comment-uuid",t.item.commentGuid),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1==t.item.status||-1!=t.item.status&&t.userOperateAccess&&"anonymize"!=t.item.commentType),o["\u0275\u0275advance"](2),o["\u0275\u0275classMap"](-1==t.item.status?"annotation-content-disabled-bg":""),o["\u0275\u0275property"]("nzTooltipTitle",t.item.targetContent)("nzTooltipPlacement","top"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](t.item.targetContent),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.item.comments),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1!=t.item.status&&"anonymize"!=t.item.commentType))},directives:[l.n,s.d,l.m,d.a,p.a],pipes:[r.b],styles:[".annotation-item[_ngcontent-%COMP%]{padding-top:10px}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]{height:25px;line-height:25px;color:#aaa;padding:0 10px}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .close-discussion-btn[_ngcontent-%COMP%]{top:0;right:10px;height:25px;line-height:22px;border:1px solid #dbdbdb;border-radius:3px;outline:none}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .close-discussion-clickable[_ngcontent-%COMP%]{background:#fff;color:#666}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .close-discussion-clickable[_ngcontent-%COMP%]:hover{border-color:#23c6c8;color:#23c6c8}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .btn-disabled[_ngcontent-%COMP%]{color:#999;border-color:#dbdbdb;background-color:#f5f5f5}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .auth-operate-btns[_ngcontent-%COMP%]{top:0;right:10px;height:25px;line-height:22px}.annotation-item[_ngcontent-%COMP%]   .close-discussion[_ngcontent-%COMP%]   .auth-operate-btns[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#23c6c8}.annotation-item[_ngcontent-%COMP%]   .annotation-content[_ngcontent-%COMP%]{max-height:47px;padding:10px 20px 0 10px;margin-bottom:10px;overflow:hidden}.annotation-item[_ngcontent-%COMP%]   .annotation-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:rgba(35,198,200,.204);display:inline-block;max-height:37px}.annotation-item[_ngcontent-%COMP%]   .annotation-content[_ngcontent-%COMP%]   .annotation-content-disabled-bg[_ngcontent-%COMP%]{background:#e4e4e4}.annotation-item[_ngcontent-%COMP%]   .comment-input-wrapper[_ngcontent-%COMP%]{border-top:1px solid #dbdbdb;height:45px}"]}),e}()},mOC4:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("ofXK"),o=n("rXOI"),r=n("r+jA"),a=n("CuYH"),c=n("4P1S"),l=n("fXoL"),s=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({providers:[a.a,o.a,r.a,c.a],imports:[[i.c]]}),e}()},mXSW:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var i=n("fXoL"),o=n("lR5k"),r=n("XNiG"),a=n("jtHE"),c=n("VRyK"),l=n("xgIS"),s=n("1G5W"),d=n("pLZG"),p=n("vkgz"),u=n("lJxs"),m=n("eIep"),h=n("wZee"),g=n("/0GP"),f=n.n(g),v=(n("z9gd"),n("AA4e")),b=n("8J34"),C=n("/Kk4"),y=n("Fpfz"),x=n("UJq8"),w=n("ofXK"),_=n("oEkB"),O=n("ZV1T"),S=["wrapperEl"],E=["remoterOuter"],M=["remoterInner"];function P(e,t){if(1&e&&(i["\u0275\u0275element"](0,"div",7,8),i["\u0275\u0275pipe"](2,"to_trusted")),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](2,1,n.docStringHandled),i["\u0275\u0275sanitizeHtml"])}}function I(e,t){1&e&&i["\u0275\u0275element"](0,"div",9,8)}function k(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"img-viewer",10),i["\u0275\u0275listener"]("indexChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().imgIndex=e})("close",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onImgClose()}),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("fullScreen",!0)("urls",o.allImages)("index",o.imgIndex)}}var T=function(){function e(e,t,n,o,c,l){this.elRef=e,this.markdownService=t,this.resizeObserver=n,this.imgViewerService=o,this.visionEditorService=c,this.emitService=l,this.docType="rich-text",this.useImgViewer=!1,this.forceTableCal=new r.a,this.configInfo={},this.imgShow=new i.EventEmitter,this.imgClose=new i.EventEmitter,this.imgLoaded=new i.EventEmitter,this.showRemoter=!1,this.forceScroll$=new r.a,this.showImgViewer=!1,this.imgIndex=0,this.allImages=[],this.isShowNewMD=!1,this.wideTableMode=!1,this.scrollInElChange$=new a.a(1),this.tableElInfo=[],this.onDestory$=new r.a}return Object.defineProperty(e.prototype,"allImageUrls",{get:function(){var e=this.wrapperEl.nativeElement.querySelectorAll("img");return Array.from(e).map(function(e){var t=e.getAttribute("src");return{imgSrc:t,linkHref:e.parentElement instanceof HTMLAnchorElement?e.parentElement.getAttribute("href"):t}})},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(e){var t=e.docContent,n=e.scrollInEL;t&&!this.isShowNewMD&&this.onDocStringChange(t.currentValue),n&&this.scrollInElChange$.next(n.currentValue)},e.prototype.ngOnInit=function(){var e=this;this.isShowNewMD=this.fromVision&&"markdown"===this.docType&&this.classify&&"normal"===this.classify,this.watchWrapperScroll(),Object(c.a)(this.resizeObserver.observe(this.elRef.nativeElement),Object(l.a)(window,"resize"),this.forceTableCal).pipe(Object(s.a)(this.onDestory$)).subscribe(function(){e.calculationTablePos()}),Object(l.a)(this.elRef.nativeElement,"click").pipe(Object(s.a)(this.onDestory$),Object(d.a)(function(e){return e.target instanceof HTMLImageElement}),Object(p.a)(function(e){return e.preventDefault()}),Object(u.a)(function(e){return e.target.getAttribute("src")}),Object(d.a)(function(e){return Boolean(e)})).subscribe(function(t){var n=e.allImageUrls.findIndex(function(e){return e.imgSrc===t});e.useImgViewer?e.imgViewerService.show(e.allImageUrls,n):(e.imgIndex=n,e.showImgViewer=!0,e.imgShow.next(),e.allImages=e.allImageUrls)}),this.emitService.eventEmit.subscribe(function(t){"wiki:doc-table-wide-view"==(null==t?void 0:t.type)&&(e.wideTableMode=t.obj)})},e.prototype.emitLoaded=function(e){this.imgLoaded.emit(e)},e.prototype.ngOnDestroy=function(){this.onDestory$.next(),this.onDestory$.complete()},e.prototype.ngAfterViewInit=function(){var e=this;if(this.configInfo&&this.configInfo.fullTable&&this.tableElemMaximize(),this.isShowNewMD){var t=document.getElementById("previewNewMD");f.a.preview(t,this.docContent,{mode:"light",cdn:window.location.origin+"/knowledge-ui/vditor",after:function(){e.emitService.emit({type:"preview-new-markdown"})},theme:{current:"light",path:window.location.origin+"/knowledge-ui/vditor/dist/css/content-theme"}})}},e.prototype.imgAddEvent=function(){var e=this,t=this.wrapperEl.nativeElement.querySelectorAll("img");Array.from(t).forEach(function(t){t.hasAttribute("loading")&&"lazy"==t.loading&&(t.complete?e.emitLoaded():t.addEventListener("load",e.emitLoaded.bind(e)))})},e.prototype.tableElemMaximize=function(){var e=this,t=document.getElementsByClassName("create-article-wrapper");t&&t.length||setTimeout(function(){document.querySelector("#contentWrapper").querySelectorAll("table").forEach(function(t,n){t.hasAttribute("contentEditable")&&t.removeAttribute("contentEditable"),t.onmouseover=function(){e.visionEditorService.addFullMode(t,"view",e.wideTableMode)},t.onmouseout=function(){e.visionEditorService.removeFullMode(t,"view")}})})},e.prototype.onImgClose=function(){this.showImgViewer=!1,this.imgClose.next()},e.prototype.onRemoterScroll=function(e){this.elControlByRemoter.scrollTo({left:e.scrollLeft})},e.prototype.calculationTablePos=function(){var e=this;Object(v.p)(function(){e.tableElInfo=e.getTables(),e.forceScroll$.next()})},e.prototype.onDocStringChange=function(e){var t=this,n=e;"markdown"===this.docType&&(n=this.markdownService.compile(e)),Object(v.p)(function(){t.highlight()}),this.docStringHandled=function(e){var t;return null===(t=null==e?void 0:e.replace(/\<table/g,'<div class="'+D+' slimScrollBar"><table'))||void 0===t?void 0:t.replace(/\<\/table\>/g,"</table></div>")}(n),setTimeout(function(){t.imgAddEvent()}),this.calculationTablePos()},e.prototype.watchWrapperScroll=function(){var e=this;this.scrollInElChange$.pipe(Object(m.a)(function(){return Object(c.a)(Object(l.a)(e.scrollInEL,"scroll"),e.forceScroll$)}),Object(s.a)(this.onDestory$)).subscribe(function(){var t=e.scrollInEL,n=e.remoterOuterEl.nativeElement,i=e.remoterInnerEl.nativeElement,o=t.clientHeight+t.scrollTop,r=e.tableElInfo.find(function(e){return e.top<o&&e.bottom>o});if(!r||!r.overWidth)return e.showRemoter=!1,void(e.elControlByRemoter=void 0);e.setRemoterPosition(),Object(v.p)(function(){e.setRemoterPosition()}),i.style.width=r.tableWidth+"px",n.style.width=r.wrapperWidth+"px",n.scrollTo({left:r.wrapperEl.scrollLeft}),e.elControlByRemoter=r.wrapperEl,e.showRemoter=!0})},e.prototype.setRemoterPosition=function(){var e=this.scrollInEL,t=this.remoterOuterEl.nativeElement,n=A(this.wrapperEl.nativeElement.offsetParent)-A(e);t.style.top=e.scrollTop+e.clientHeight-n+"px"},e.prototype.getTables=function(){var e=this.wrapperEl.nativeElement.querySelectorAll("."+D),t=[],n=A(this.scrollInEL);return e.forEach(function(e){var i=e.firstElementChild;if(i){var o=i.getBoundingClientRect(),r=e.getBoundingClientRect(),a=A(i);t.push({top:a-n,bottom:a+i.clientHeight-n,wrapperEl:e,tableWidth:o.width,wrapperWidth:e.clientWidth,overWidth:o.width>r.width})}}),t},e.prototype.highlight=function(){var e=this.elRef.nativeElement.getElementsByTagName("pre");if(e&&e.length>0)for(var t=0;t<e.length;t++){var n=e[t].getElementsByTagName("code");n&&n.length>0&&h.highlightElement(n[0])}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](o.c),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](b.a),i["\u0275\u0275directiveInject"](y.a),i["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["html-render"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](S,1),i["\u0275\u0275viewQuery"](E,1),i["\u0275\u0275viewQuery"](M,1)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.wrapperEl=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.remoterOuterEl=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.remoterInnerEl=n.first)}},inputs:{docType:"docType",docContent:"docContent",scrollInEL:"scrollInEL",useImgViewer:"useImgViewer",forceTableCal:"forceTableCal",configInfo:"configInfo",fromVision:"fromVision",classify:"classify"},outputs:{imgShow:"imgShow",imgClose:"imgClose",imgLoaded:"imgLoaded"},features:[i["\u0275\u0275ProvidersFeature"]([o.c,b.a]),i["\u0275\u0275NgOnChangesFeature"]],decls:7,vars:4,consts:[["class","render-wrapper",3,"innerHTML",4,"ngIf"],["class","render-wrapper","id","previewNewMD",4,"ngIf"],[1,"remote-scroll","slimScrollBar",3,"hidden","scroll"],["remoterOuter",""],[1,"remote-scroll-inner"],["remoterInner",""],[3,"fullScreen","urls","index","indexChange","close",4,"ngIf"],[1,"render-wrapper",3,"innerHTML"],["wrapperEl",""],["id","previewNewMD",1,"render-wrapper"],[3,"fullScreen","urls","index","indexChange","close"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,P,3,3,"div",0),i["\u0275\u0275template"](1,I,2,0,"div",1),i["\u0275\u0275elementStart"](2,"div",2,3),i["\u0275\u0275listener"]("scroll",function(e){return t.onRemoterScroll(e.target)}),i["\u0275\u0275element"](4,"div",4,5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,k,1,3,"img-viewer",6)),2&e&&(i["\u0275\u0275property"]("ngIf",!t.isShowNewMD),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isShowNewMD),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hidden",!t.showRemoter),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",t.showImgViewer))},directives:[w.n,_.a],pipes:[O.a],styles:['[_nghost-%COMP%]{display:block;padding-bottom:10px}.render-wrapper[_ngcontent-%COMP%]    {overflow-wrap:break-word;word-break:normal}.render-wrapper[_ngcontent-%COMP%]     .table-wrapper{overflow-x:auto}.render-wrapper[_ngcontent-%COMP%]     .doc-table-view-max:before{content:"\\e685";cursor:pointer;position:absolute;top:-3px;padding:0;background:#fff}.render-wrapper[_ngcontent-%COMP%]     table{word-break:break-word}.render-wrapper[_ngcontent-%COMP%]     table td{border:1px solid #ccc;padding:.4rem}.render-wrapper[_ngcontent-%COMP%]     img{max-width:100%;height:auto;cursor:zoom-in;filter:drop-shadow(rgba(0,0,0,.14) 0 0 4px);padding:6px}.render-wrapper[_ngcontent-%COMP%]     video{max-width:100%;height:auto!important}.render-wrapper[_ngcontent-%COMP%]     .h1-fontsize{font-size:26px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h1-fontsize *{font-size:26px!important}.render-wrapper[_ngcontent-%COMP%]     .h2-fontsize{font-size:22px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h2-fontsize *{font-size:22px!important}.render-wrapper[_ngcontent-%COMP%]     .h3-fontsize{font-size:20px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h3-fontsize *{font-size:20px!important}.render-wrapper[_ngcontent-%COMP%]     .h4-fontsize{font-size:18px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h4-fontsize *{font-size:18px!important}.render-wrapper[_ngcontent-%COMP%]     .h5-fontsize{font-size:16px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h5-fontsize *{font-size:16px!important}.render-wrapper[_ngcontent-%COMP%]     .h6-fontsize{font-size:16px!important;font-weight:700;color:#333;margin-top:.5em}.render-wrapper[_ngcontent-%COMP%]     .h6-fontsize *{font-size:16px!important}.render-wrapper[_ngcontent-%COMP%]     td p{margin-bottom:0!important}.render-wrapper[_ngcontent-%COMP%]     .artical-area .artical{width:100%}.remote-scroll[_ngcontent-%COMP%]{position:absolute;z-index:60;overflow:scroll hidden;transform:translateY(-100%)}.remote-scroll[_ngcontent-%COMP%]   .remote-scroll-inner[_ngcontent-%COMP%]{height:1px}  .tinymce-table-full-mode{position:fixed;z-index:99;background-color:transparent;cursor:pointer;filter:drop-shadow(rgba(0,0,0,.14) 0 0 6px)}  .doc-table-back-icon{padding:0 4px;cursor:pointer}  .doc-table-width-icon{cursor:pointer;padding:0 4px;font-weight:600}  .doc-table-active-full{position:fixed;width:100%;height:100%;background-color:#fff;top:0;left:0;right:0;padding:0 10px 10px;z-index:23;display:block;overflow:scroll}  .table-full-btn-content{border-radius:4.5px;border:1px solid #dbdbdb;height:30px;padding:2px;background-color:#fff;position:relative}  .table-full-btn-content:before{box-sizing:content-box;position:absolute;border-color:#fff transparent transparent;border-style:solid;border-width:9px 6px;display:block;content:"";z-index:2;top:28px;left:8px}  .table-full-btn-content:after{box-sizing:content-box;position:absolute;border-color:#dbdbdb transparent transparent;border-style:solid;border-width:10px 7px;display:block;content:"";z-index:1;left:7px;top:28px}  .table-full-btn-content-more:before{left:21px}  .table-full-btn-content-more:after{left:20px}  .table-full-btn-san{height:10px;position:relative}  .table-full-btn-san i{position:absolute;top:-7px;left:7px;color:#dbdbdb}  #back-full-table{cursor:pointer;padding:10px 0}  #back-full-table:hover{color:#23c6c8}  #back-full-table i{transform:rotate(90deg);display:inline-block}  #back-full-table span{margin-left:5px}']}),e}(),D="table-wrapper";function A(e){for(var t=e.offsetTop,n=e.offsetParent;null!==n;)t+=n.offsetTop,n=n.offsetParent;return t}},mbIT:function(e,t,n){"use strict";t.isArray=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},n3uD:function(e,t,n){"use strict";var i=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}}},nraT:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("ofXK"),o=n("sYmb"),r=n("fXoL"),a=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[i.c,o.a.forRoot()]]}),e}()},oEkB:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var i=n("ofXK"),o=n("fXoL"),r=n("XNiG"),a=n("xgIS"),c=n("VRyK"),l=n("1G5W"),s=n("eIep"),d=n("vkgz"),p=n("AA4e"),u=n("/Kk4"),m=n("qAZ0"),h=n("FwiY"),g=n("sYmb"),f=["maxArea"],v=["imgEl"],b=["imgWrapper"];function C(e,t){if(1&e&&o["\u0275\u0275element"](0,"nz-spin",11),2&e){o["\u0275\u0275nextContext"]();var n=o["\u0275\u0275reference"](4);o["\u0275\u0275property"]("nzIndicator",n)}}function y(e,t){1&e&&o["\u0275\u0275element"](0,"i",12)}function x(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onPrev()}),o["\u0275\u0275element"](1,"i",14),o["\u0275\u0275elementEnd"]()}}function w(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onNext()}),o["\u0275\u0275element"](1,"i",14),o["\u0275\u0275elementEnd"]()}}function _(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"a",23),o["\u0275\u0275element"](1,"i",24),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("href",n.url.linkHref,o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](2,2,"OPEN_CLOUDMODELING_LINK"))}}function O(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275elementStart"](1,"i",17),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onZoomOut()}),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",18),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().setImgToPrecent(100)}),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"i",19),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onZoomIn()}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"i",20),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().fitWidth()}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,_,3,4,"a",21),o["\u0275\u0275elementStart"](10,"i",22),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().close.next()}),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](2,7,"COMMON_ZOOM_OUT")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("title",100===i.precent?"":"100%"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",i.precent,"%"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](6,9,"COMMON_ZOOM_IN")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](8,11,"COMMON_FIT_SCREEN")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.showLink),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](11,13,"CLOSE"))}}var S=function(e){return{dragging:e}},E=function(e,t,n,i){return{width:e,height:t,marginTop:n,marginLeft:i}},M=function(){function e(e,t,n,i){this.elRef=e,this.appRef=t,this.resizeObserver=n,this.document=i,this.fullScreen=!1,this.zIndex=100,this.index=0,this.close=new o.EventEmitter,this.indexChange=new o.EventEmitter,this.precent=0,this.imgWidth=0,this.imgHeight=0,this.imgMarginTop=0,this.imgMarginLeft=0,this.loading=!0,this.dragging=!1,this.onDestory$=new r.a}return Object.defineProperty(e.prototype,"url",{get:function(){return this.urls[this.index]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showPrev",{get:function(){return this.index>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showNext",{get:function(){return this.index<this.urls.length-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showLink",{get:function(){return/cloudmodeling.*openedDiagramUUID/.test(this.url.linkHref)},enumerable:!1,configurable:!0}),e.prototype.onNext=function(){this.index+=1,this.indexChange.next(this.index)},e.prototype.onPrev=function(){this.index-=1,this.indexChange.next(this.index)},e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.watchDrag(),this.watchResize(),this.watchKeyDown()},e.prototype.ngOnDestroy=function(){this.onDestory$.next(),this.onDestory$.complete()},e.prototype.ngOnChanges=function(e){e.url&&(this.loading=!0)},e.prototype.onImgLoad=function(){this.fitWidth(),this.loading=!1},e.prototype.onImgClick=function(e){e.stopPropagation(),this.dragging||this.onZoomIn()},e.prototype.onImgWrapperClick=function(){this.dragging||this.close.next()},e.prototype.fitWidth=function(){var e=this.imgEl.nativeElement,t=this.maxAreaEl.nativeElement.getBoundingClientRect(),n=Math.floor(100*Math.min(.9*t.width/e.naturalWidth,.9*t.height/e.naturalHeight,1));this.setImgToPrecent(n)},e.prototype.onZoomIn=function(){this.setImgToPrecent(this.precent+10)},e.prototype.onZoomOut=function(){this.setImgToPrecent(this.precent-10)},e.prototype.setImgToPrecent=function(e){var t=Math.min(Math.max(e,10),300);this.precent=t;var n=this.imgEl.nativeElement,i=t*n.naturalWidth/100,o=t*n.naturalHeight/100;this.imgWidth=i,this.imgHeight=o,this.setImgMargin(i,o)},e.prototype.watchKeyDown=function(){var e=this;Object(a.a)(this.document,"keydown").pipe(Object(l.a)(this.onDestory$)).subscribe(function(t){"ArrowRight"===t.code&&e.showNext&&e.onNext(),"ArrowLeft"===t.code&&e.showPrev&&e.onPrev(),"Escape"===t.code&&e.close.next()})},e.prototype.watchResize=function(){var e=this;Object(c.a)(Object(a.a)(window,"resize"),this.resizeObserver.observe(this.elRef.nativeElement)).pipe(Object(l.a)(this.onDestory$)).subscribe(function(){Object(p.p)(function(){e.setImgMargin(e.imgWidth,e.imgHeight),e.appRef.tick()})})},e.prototype.watchDrag=function(){var e=this,t=this.document,n=this.imgWrapperEL.nativeElement,i=this.imgEl.nativeElement,o=Object(a.a)(i,"mousedown"),r=Object(a.a)(t,"mouseup"),c=Object(a.a)(t,"mousemove");o.pipe(Object(s.a)(function(){return c.pipe(Object(d.a)(function(){e.dragging=!0}),Object(l.a)(r.pipe(Object(d.a)(function(){Object(p.p)(function(){e.dragging=!1})}))))}),Object(l.a)(this.onDestory$)).subscribe(function(e){n.scrollTo({left:n.scrollLeft-=e.movementX,top:n.scrollTop-=e.movementY})})},e.prototype.setImgMargin=function(e,t){var n=this.maxAreaEl.nativeElement.getBoundingClientRect(),i=n.height;this.imgMarginLeft=Math.max((n.width-e)/2,0),this.imgMarginTop=Math.max((i-t)/2,0)},e.prototype.scrollToCenter=function(){var e=this;Object(p.p)(function(){var t=e.imgWrapperEL.nativeElement;t.scrollTo({left:(t.scrollWidth-t.clientWidth)/2,top:(t.scrollHeight-t.clientHeight)/2})})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](o.ElementRef),o["\u0275\u0275directiveInject"](o.ApplicationRef),o["\u0275\u0275directiveInject"](u.a),o["\u0275\u0275directiveInject"](i.d))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["img-viewer"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](f,1),o["\u0275\u0275viewQuery"](v,1),o["\u0275\u0275viewQuery"](b,1)),2&e){var n=void 0;o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.maxAreaEl=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.imgEl=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.imgWrapperEL=n.first)}},hostVars:4,hostBindings:function(e,t){2&e&&(o["\u0275\u0275styleProp"]("z-index",t.zIndex),o["\u0275\u0275classProp"]("full-screen",t.fullScreen))},inputs:{fullScreen:"fullScreen",zIndex:"zIndex",index:"index",urls:"urls"},outputs:{close:"close",indexChange:"indexChange"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:12,vars:18,consts:[[1,"img-wrapper","full-width","full-height","position-r","ov-a","slimScrollBar",3,"ngClass","click"],["imgWrapper",""],["nzSimple","","class","loading-tips",3,"nzIndicator",4,"ngIf"],["indicatorTemplate",""],["draggable","false","alt","image-viewer",3,"src","hidden","ngStyle","ngClass","load","error","click"],["imgEl",""],[1,"max-area"],["maxArea",""],["class","prev",3,"click",4,"ngIf"],["class","next",3,"click",4,"ngIf"],["class","control-area position-a border-ra-3",4,"ngIf"],["nzSimple","",1,"loading-tips",3,"nzIndicator"],["nz-icon","","nzType","loading",1,"loading-icon"],[1,"prev",3,"click"],[1,"iconfont","icon-icon-crown"],[1,"next",3,"click"],[1,"control-area","position-a","border-ra-3"],[1,"iconfont","icon-suoxiao1",3,"title","click"],[1,"precent",3,"title","click"],[1,"iconfont","icon-fangda",3,"title","click"],[1,"iconfont","icon-width",3,"title","click"],["target","_blank",3,"href",4,"ngIf"],[1,"iconfont","icon-delete-member",3,"title","click"],["target","_blank",3,"href"],[1,"iconfont","icon-relation",3,"title"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0,1),o["\u0275\u0275listener"]("click",function(){return t.onImgWrapperClick()}),o["\u0275\u0275template"](2,C,1,1,"nz-spin",2),o["\u0275\u0275template"](3,y,1,0,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementStart"](5,"img",4,5),o["\u0275\u0275listener"]("load",function(){return t.onImgLoad()})("error",function(){return t.onImgLoad()})("click",function(e){return t.onImgClick(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](7,"div",6,7),o["\u0275\u0275template"](9,x,2,0,"div",8),o["\u0275\u0275template"](10,w,2,0,"div",9),o["\u0275\u0275template"](11,O,12,15,"div",10)),2&e&&(o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](9,S,t.dragging)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.loading),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("src",t.url.imgSrc,o["\u0275\u0275sanitizeUrl"])("hidden",t.loading)("ngStyle",o["\u0275\u0275pureFunction4"](11,E,t.imgWidth+"px",t.imgHeight+"px",t.imgMarginTop+"px",t.imgMarginLeft+"px"))("ngClass",o["\u0275\u0275pureFunction1"](16,S,t.dragging)),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",t.showPrev),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showNext),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.loading))},directives:[i.l,i.n,i.o,m.a,h.a],pipes:[g.b],styles:["[_nghost-%COMP%]{display:block;position:relative;width:100%;height:100%;overflow:hidden}.full-screen[_nghost-%COMP%]{position:fixed;top:0;bottom:0;left:0;right:0}.img-wrapper[_ngcontent-%COMP%]{padding:0 70px 70px;background-color:rgba(0,0,0,.6)}.img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{pointer-events:auto;cursor:zoom-in;background-color:#fff}.img-wrapper[_ngcontent-%COMP%]   .dragging[_ngcontent-%COMP%], .img-wrapper.dragging[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}.max-area[_ngcontent-%COMP%]{position:absolute;top:0;left:70px;right:70px;bottom:64px;z-index:-10}.next[_ngcontent-%COMP%], .prev[_ngcontent-%COMP%]{position:absolute;z-index:5;top:50%;transform-origin:center center;width:50px;height:50px;border-radius:50%;background-color:#f0f0f0;text-align:center;line-height:50px;font-weight:700;box-shadow:0 0 6px rgba(0,0,0,.2);cursor:pointer}.next[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%], .prev[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{color:#676a6c}.next[_ngcontent-%COMP%]:hover, .prev[_ngcontent-%COMP%]:hover{background-color:#e9f9fa}.next[_ngcontent-%COMP%]:hover   .iconfont[_ngcontent-%COMP%], .prev[_ngcontent-%COMP%]:hover   .iconfont[_ngcontent-%COMP%]{color:#23c6c8}.prev[_ngcontent-%COMP%]{left:18px;transform:rotate(90deg) translateX(-50%)}.next[_ngcontent-%COMP%]{right:18px;transform:rotate(270deg) translateX(50%)}.control-area[_ngcontent-%COMP%]{z-index:5;-webkit-user-select:none;-moz-user-select:none;user-select:none;height:36px;bottom:18px;left:50%;transform:translateX(-50%);line-height:36px;background-color:#fafafa}.control-area[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%], .control-area[_ngcontent-%COMP%]   .precent[_ngcontent-%COMP%]{font-size:18px;margin:0 8px;cursor:pointer}.control-area[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]:hover, .control-area[_ngcontent-%COMP%]   .precent[_ngcontent-%COMP%]:hover{color:#23c6c8}.loading-tips[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.loading-icon[_ngcontent-%COMP%]{font-size:48px;color:#23c6c8}"]}),e}()},oFdG:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n("fXoL"),o=n("XNiG"),r=n("Kj3r"),a=n("/uUt"),c=n("y7eE"),l=n("to4i"),s=n("tyNb"),d=n("ofXK"),p=n("3Pt+"),u=n("1JWf"),m=n("sYmb"),h=n("ZV1T");function g(e,t){1&e&&(i["\u0275\u0275element"](0,"div",11),i["\u0275\u0275pipe"](1,"translate")),2&e&&i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](1,1,"EMPTY_HISTORY_SEARCH"))}function f(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275elementStart"](1,"div",13),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().searchHistory(e.orignalStr)}),i["\u0275\u0275pipe"](2,"to_trusted"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](2,1,o.highLightStr),i["\u0275\u0275sanitizeHtml"])}}var v=function(){function e(e){var t=this;this.ref=e,this.searchVal="",this.wikiSearchHistoryAction=new i.EventEmitter,this.clickOutsideFunc=new i.EventEmitter,this.getSearchHistory=function(){localStorage.getItem("devops-wiki-search-history")?(t.searchHistoryList=JSON.parse(localStorage.getItem("devops-wiki-search-history")),t.searchHistoryList.length>15&&(t.searchHistoryList=t.searchHistoryList.splice(0,15))):t.searchHistoryList=[],t.showSearchHistoryList=t.searchHistoryList.map(function(e){return{orignalStr:e,highLightStr:e}})},this.searchHistory=function(e){t.wikiSearchHistoryAction.emit(e)}}return e.prototype.ngOnInit=function(){var e=this;this.searchHistoryList=[],this.showSearchHistoryList=[],this.loading=!1,this.getSearchHistory(),this.refreshData&&(this.refreshDataSubscription=this.refreshData.subscribe(function(t){e.getSearchHistory()},function(){}))},e.prototype.ngOnDestory=function(){this.refreshDataSubscription&&this.refreshDataSubscription.unsubscribe()},e.prototype.closeFloatedFullStructure=function(){this.clickOutsideFunc.emit()},e.prototype.ngOnChanges=function(e){var t=this;if(e.searchVal){if(this.searchVal&&this.searchHistoryList&&this.searchHistoryList.length>0){var n=this.searchHistoryList.filter(function(e){return e.indexOf(t.searchVal)>-1});this.showSearchHistoryList=n.map(function(e){return{orignalStr:e,highLightStr:e.replace(t.searchVal,'<span style="color:#23c6c8;">'+t.searchVal+"</span>")}})}else this.getSearchHistory();this.ref.detectChanges()}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["wiki-search-history"]],inputs:{customStyleObj:"customStyleObj",searchVal:"searchVal",refreshData:"refreshData"},outputs:{wikiSearchHistoryAction:"wikiSearchHistoryAction",clickOutsideFunc:"clickOutsideFunc"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:12,vars:8,consts:[["clickElementOutside","",1,"search-history",3,"ngStyle","clickOutside"],[1,"tool-box"],[1,"info-box"],[1,"iconfont","icon-history"],[3,"textContent"],[1,"main-box"],[1,"overlay",3,"hidden"],[1,"iconfont","icon-loading","fa-spin"],["class","empty-box",3,"textContent",4,"ngIf"],[1,"content-box",3,"hidden"],["class","content-item",4,"ngFor","ngForOf"],[1,"empty-box",3,"textContent"],[1,"content-item"],[1,"content-text","text-ellipsis",3,"innerHTML","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275listener"]("clickOutside",function(){return t.closeFloatedFullStructure()}),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275element"](3,"i",3),i["\u0275\u0275element"](4,"span",4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275element"](8,"i",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,g,2,3,"div",8),i["\u0275\u0275elementStart"](10,"div",9),i["\u0275\u0275template"](11,f,3,3,"div",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("ngStyle",t.customStyleObj),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](5,6,"HISTORY_SEARCH")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("hidden",!t.loading),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.loading&&0==t.showSearchHistoryList.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hidden",!(!t.loading&&t.showSearchHistoryList.length>0)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.showSearchHistoryList))},directives:[u.a,d.o,d.n,d.m],pipes:[m.b,h.a],styles:[".search-history[_ngcontent-%COMP%]{position:absolute;left:-451px;top:20px;z-index:3;border:1px solid #f7f7f7;background-color:#fff;padding:15px;box-shadow:0 12px 32px 0 rgba(38,38,38,.16)}.search-history[_ngcontent-%COMP%]   .text-ellipsis[_ngcontent-%COMP%]{display:-webkit-box;display:-moz-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]{display:flex;align-items:center;color:#aaa}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{flex:1;text-align:left;color:#23c6c8;font-size:14px}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .icon-history[_ngcontent-%COMP%]{color:#23c6c8}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-left:5px}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]{display:inline-block;font-size:12px;padding-left:10px}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-view[_ngcontent-%COMP%]{cursor:pointer}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-view[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-left:5px}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-edit[_ngcontent-%COMP%]   .delete-all[_ngcontent-%COMP%]{cursor:pointer;display:inline-block}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-edit[_ngcontent-%COMP%]   .delete-all[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-left:5px}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-edit[_ngcontent-%COMP%]   .delete-done[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}.search-history[_ngcontent-%COMP%]   .tool-box[_ngcontent-%COMP%]   .delete-box[_ngcontent-%COMP%]   .delete-edit[_ngcontent-%COMP%]   .divding-line[_ngcontent-%COMP%]{display:inline-block;margin:0 10px}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .empty-box[_ngcontent-%COMP%]{text-align:center;font-size:12px;color:#aaa;margin-top:40px}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]{margin-top:5px;display:flex;flex-direction:row;flex-wrap:wrap}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]{width:50%;display:flex;margin:0;padding:5px 10px;border-right:1px solid #ededed}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]   .content-text[_ngcontent-%COMP%]{flex:1;cursor:pointer}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]   .content-text[_ngcontent-%COMP%]:hover{color:#23c6c8}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]   .content-item-delete-box[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;cursor:pointer}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.search-history[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]   .content-item[_ngcontent-%COMP%]:nth-child(2n){border-color:transparent}"]}),e}();function b(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"i",5),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.searchKeywords="",t.userQuestionUpdate.next(e)}),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngStyle",o.inputStyle&&o.inputStyle.height?o.searchInputIconClass:o.searchInputIconEmpty)}}var C=function(){function e(e,t,n,c){var l=this;this.eleRef=e,this.router=t,this.activeRoute=n,this.searchService=c,this.searchKeywords="",this.pageForm="search-result",this.searchAction=new i.EventEmitter,this.emitSearchVal=new i.EventEmitter,this.clickHistory=new i.EventEmitter,this.refreshDataEventSubject=new o.a,this.showHistory=!1,this.isFocus=!1,this.inputFlag=!0,this.userQuestionUpdate=new o.a,this.clickOutsideFunc=function(){setTimeout(function(){l.isFocus||(l.showHistory=!1)})},this.searchKeywordsChanged=function(e){l.showHistory=!1,l.searchKeywords=e,"search-result"!=l.pageForm?l.searchService.goSearchPage(l):l.clickHistory.emit({searchKeywords:l.searchKeywords})},this.userQuestionUpdate.pipe(Object(r.a)(500),Object(a.a)()).subscribe(function(e){l.emitSearchVal.emit(l.searchKeywords)})}return e.prototype.ngOnInit=function(){var e=this;this.routerSub=this.activeRoute.paramMap.subscribe(function(t){e.currentDomain=t.get("domain_id")}),this.inputStyle&&this.inputStyle.height&&(this.searchInputIconClass={fontSize:"16px",top:Number(this.inputStyle.height.substring(0,this.inputStyle.height.length-2))/2-8+"px"})},e.prototype.ngAfterViewInit=function(){},e.prototype.goSearchPage=function(){""!=this.searchKeywords.trim()&&"my-favorite"!==this.pageForm&&("search-result"!=this.pageForm?Object(c.c)("wiki-search-from",window.location.href):this.refreshDataEventSubject.next(),this.searchService.goSearchPage(this))},e.prototype.searchInputFocus=function(){this.showHistory="my-favorite"!==this.pageForm,this.isFocus=!0},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](s.f),i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["wiki-search-input"]],inputs:{searchKeywords:"searchKeywords",customStyle:"customStyle",inputStyle:"inputStyle",pageForm:"pageForm",kanbanId:"kanbanId"},outputs:{searchAction:"searchAction",emitSearchVal:"emitSearchVal",clickHistory:"clickHistory"},features:[i["\u0275\u0275ProvidersFeature"]([l.a])],decls:6,vars:12,consts:[[1,"search-input-wrapper"],[1,"input-search-icon","icon-color","fa","fa-search","pointer-cursor",3,"ngStyle"],["autocomplete","off",1,"search-input","overfolw-eclipis",3,"id","ngModel","placeholder","ngStyle","ngModelChange","keyup.enter","focus","blur","compositionend","compositionstart"],["class","input-clear-icon icon-color iconfont close icon-close",3,"ngStyle","click",4,"ngIf"],[3,"customStyleObj","hidden","searchVal","refreshData","clickOutsideFunc","wikiSearchHistoryAction"],[1,"input-clear-icon","icon-color","iconfont","close","icon-close",3,"ngStyle","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",0),i["\u0275\u0275element"](1,"i",1),i["\u0275\u0275elementStart"](2,"input",2),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchKeywords=e})("keyup.enter",function(){return t.goSearchPage(),t.showHistory=!1})("focus",function(){return t.searchInputFocus()})("blur",function(){return t.isFocus=!1})("compositionend",function(){return t.inputFlag=!0})("compositionstart",function(){return t.inputFlag=!1})("ngModelChange",function(e){return t.userQuestionUpdate.next(e)}),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,b,1,1,"i",3),i["\u0275\u0275elementStart"](5,"wiki-search-history",4),i["\u0275\u0275listener"]("clickOutsideFunc",function(){return t.clickOutsideFunc()})("wikiSearchHistoryAction",function(e){return t.searchKeywordsChanged(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngStyle",t.inputStyle&&t.inputStyle.height?t.searchInputIconClass:t.searchInputIconEmpty),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("id","catalog-search-input-"+t.pageForm)("ngModel",t.searchKeywords)("placeholder",i["\u0275\u0275pipeBind1"](3,10,"SEARCH_TEXT"))("ngStyle",t.inputStyle),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",""!=t.searchKeywords),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("customStyleObj",t.customStyle)("hidden",!t.showHistory)("searchVal",t.searchKeywords)("refreshData",t.refreshDataEventSubject.asObservable()))},directives:[d.o,p.d,p.k,p.l,d.n,v],pipes:[m.b],styles:[".search-input-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;font-size:14px;width:100%}.search-input-wrapper[_ngcontent-%COMP%]   .input-search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#999;top:6px;font-size:14px}.search-input-wrapper[_ngcontent-%COMP%]   .input-clear-icon[_ngcontent-%COMP%]{position:absolute;right:8px;font-size:18px;color:#333;top:5px}.search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{outline:none;height:26px;font-size:14px;padding-left:33px;padding-right:30px;border-radius:13px;line-height:26px;border:1px solid #d7d7d7;display:inline-block;width:100%}.search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus, .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:hover{border:1px solid #23c6c8}.search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::-moz-placeholder{color:#999}.search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#999}"]}),e}()},oMLp:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){}return e.filter=function(e,t,n){var i=t.toLowerCase();return e.filter(function(e){return function(e,t,n){if(e[n].toString().toLowerCase().includes(i))return!0}(e,0,n)})},e.prototype.transform=function(t,n){return t&&n&&n.searchValue&&n.key?e.filter(t,n.searchValue,n.key):t},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"filterByKey",type:e,pure:!0}),e}()},"otx/":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var i={wikiOpen:"WIKI_OPEN",wikiClose:"WIKI_CLOSE",wikiLock:"WIKI_LOCK",wikiUnlock:"WIKI_UNLOCK",wikiLockedBy:"WIKI_LOCKED_BY",wikiRequestUnlock:"WIKI_REQUEST_UNLOCK",wikiLockReconnect:"WIKI_LOCK_RECONNECT",wikiJoinCollabration:"WIKI_JOIN_COLLABRATION",wikiExitCollaboration:"WIKI_EXIT_COLLABORATION",wikiRequestCollabration:"WIKI_REQUEST_COLLABRATION",wikiCollaborationForceOpen:"WIKI_COLLABORATION_FORCE_OPEN",wikiCollaborationForceExit:"WIKI_COLLABORATION_FORCE_EXIT",wikiConvertCollaborationComplete:"WIKI_CONVERT_COLLABORATION_COMPLETE",wikiConvertCollaborationFailed:"WIKI_CONVERT_COLLABORATION_FAILED"},o=function(e){return e[e.none=0]="none",e[e.single=1]="single",e[e.collaboration=2]="collaboration",e}({})},"p//D":function(e,t,n){"use strict";t.rxSubscriber=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),t.$$rxSubscriber=t.rxSubscriber},"p10+":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("fXoL"),o=n("ofXK"),r=n("nJia"),a=n("BT9m"),c=n("sYmb");function l(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275element"](1,"user-avatar",5),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("nzTooltipTitle",n.name+" "+n.username)("nzTooltipPlacement","bottom"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("account",n.account)("height",24)("width",24)}}function s(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](),o=i["\u0275\u0275reference"](4);i["\u0275\u0275property"]("nzTooltipTitle",o)("nzTooltipPlacement","bottom")("nzTooltipOverlayClassName","other-users-tooltip-overlay"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.collabUsers.length)}}function d(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.name+" "+n.username)}}var p=function(e){return{count:e}};function u(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",8),i["\u0275\u0275template"](5,d,2,1,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](3,2,"COLLABORATION_USER_COUNT",i["\u0275\u0275pureFunction1"](5,p,n.collabUsers.length))),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",n.collabUsers)}}var m=function(){function e(){this.collabUsers=[]}return Object.defineProperty(e.prototype,"isShowCollabUsers",{get:function(){return this.collabUsers.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showCollabUsers",{get:function(){return this.collabUsers.slice(0,3)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showOtherCollabUsers",{get:function(){return this.collabUsers.length>3},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-collab-users"]],inputs:{collabUsers:"collabUsers"},decls:5,vars:2,consts:[[1,"collab-users"],["class","collab-user","nz-tooltip","",3,"nzTooltipTitle","nzTooltipPlacement",4,"ngFor","ngForOf"],["class","collab-user other-users","nz-tooltip","",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipOverlayClassName",4,"ngIf"],["otherCollabUserToolTip",""],["nz-tooltip","",1,"collab-user",3,"nzTooltipTitle","nzTooltipPlacement"],[3,"account","height","width"],["nz-tooltip","",1,"collab-user","other-users",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipOverlayClassName"],[1,"other-collab-user-tooltip"],[1,"users-info"],["class","user-item text-omit",4,"ngFor","ngForOf"],[1,"user-item","text-omit"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,l,2,5,"div",1),i["\u0275\u0275template"](2,s,2,4,"div",2),i["\u0275\u0275template"](3,u,6,7,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.showCollabUsers),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.showOtherCollabUsers))},directives:[o.m,o.n,r.d,a.a],pipes:[c.b],styles:[".collab-users[_ngcontent-%COMP%]{display:flex}.collab-users[_ngcontent-%COMP%]   .collab-user[_ngcontent-%COMP%]{border-radius:50%;margin-left:-2px}.collab-users[_ngcontent-%COMP%]   .collab-user.other-users[_ngcontent-%COMP%]{font-weight:400;width:26px;height:26px;background-color:#f0f0f0;text-align:center;line-height:26px;font-size:13px}.other-collab-user-tooltip[_ngcontent-%COMP%]   .users-info[_ngcontent-%COMP%]{-moz-column-count:2;column-count:2}.other-collab-user-tooltip[_ngcontent-%COMP%]   .users-info[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]{white-space:nowrap}  .other-users-tooltip-overlay{max-width:500px}"]}),e}()},pSv2:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return e.toUserInfo=function(e){return{email:e.email,account:e.huawei_id,id:e.user_id,username:e.user_name,name_full:e.user_name_full,name:e.user_name_zh,user_type:e.user_type,office_name:"",address:""}},e}()},pshJ:function(e,t,n){"use strict";t.isFunction=function(e){return"function"==typeof e}},q3Kh:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=n("FWf1");t.map=function(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new r(e,t))}};var r=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}();t.MapOperator=r;var a=function(e){function t(t,n,i){var o=e.call(this,t)||this;return o.project=n,o.count=0,o.thisArg=i||o,o}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(o.Subscriber)},qAkX:function(e,t,n){"use strict";t.a=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},"r+jA":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){}return e.prototype.transform=function(e,t){var n;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3==(n=e.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),"rgba("+[(n="0x"+n.join(""))>>16&255,n>>8&255,255&n].join(",")+","+(t||"1")+")";throw new Error("Bad Hex")},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"hex2rgba",type:e,pure:!0}),e}()},r6kV:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){this.editorInit=new i.EventEmitter}return e.prototype.ngAfterViewInit=function(){this.editorInit.emit({tab:this.tab})},e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i["\u0275\u0275defineDirective"]({type:e,selectors:[["","initEditor",""]],inputs:{tab:"tab"},outputs:{editorInit:"editorInit"}}),e}()},rXOI:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("z4NU"),o=n("fXoL"),r=function(){function e(){}return e.prototype.transform=function(e,t){var n={workitem_status:function(){return i.p[e]||i.p.DEFAULT},workitem_category:function(){return i.l[e]||i.l.DEFAULT},requirement_category:function(){return i.h[e]||i.p.DEFAULT},requirement_status:function(){return i.p[e]||i.p.DEFAULT},priority:function(){return i.i[e]||i.p.DEFAULT},fuxi_status:function(){return i.d[e]||i.p.DEFAULT},traditional_category_color:function(){return i.h[e]||i.h.DEFAULT},traditional_category_txt:function(){return i.g[e]||i.g.DEFAULT},conference_status:function(){return i.a[e]||i.a.DEFAULT},regions_status:function(){return i.f[e]||i.f.DEFAULT},api_type:function(){return i.o[e]}},o=n[t];return o?("string"==typeof o&&(o=n[o]),o()):e},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o["\u0275\u0275definePipe"]({name:"colorMap",type:e,pure:!0}),e}()},rZHr:function(e,t,n){"use strict";n.d(t,"a",function(){return et});var i=n("ofXK"),o=n("tyNb"),r=n("3Pt+"),a=n("lR5k"),c=n("sYmb"),l=n("dEAy"),s=n("zAKX"),d=n("qAZ0"),p=n("Nqz0"),u=n("nJia"),m=n("OzZK"),h=n("rMZv"),g=n("bE2y"),f=n("PScX"),v=n("FwiY"),b=n("3/1E"),C=n("EGpF"),y=n("Q8cG"),x=n("+oEP"),w=n("TaO5"),_=n("mOC4"),O=n("BbD4"),S=n("cAPe"),E=n("9zdF"),M=n("WM4a"),P=n("s+/Z"),I=n("PTRe"),k=n("KupA"),T=n("fXoL"),D=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({imports:[[i.c,d.b,v.b,c.a,_.a,r.g,O.a,P.a,I.e,E.a,k.b]]}),e}(),A=n("Faj5"),z=n("0lU3"),R=n("AA4e"),L=n("FHXd"),N=n("bNXi"),j=n("UJq8"),V=n("RwU8"),F=n("C2AL"),B=n("yg7y"),U=function(e){return[e]};function W(e,t){if(1&e&&(T["\u0275\u0275elementStart"](0,"span",13),T["\u0275\u0275text"](1),T["\u0275\u0275pipe"](2,"translate"),T["\u0275\u0275elementStart"](3,"a",14),T["\u0275\u0275text"](4),T["\u0275\u0275pipe"](5,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275text"](6),T["\u0275\u0275pipe"](7,"translate"),T["\u0275\u0275elementEnd"]()),2&e){var n=T["\u0275\u0275nextContext"]();T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate1"]("",T["\u0275\u0275pipeBind1"](2,4,"NO_AVAILABLE_COMPONENT_CONTACT_DOMAIN_OWNER")," "),T["\u0275\u0275advance"](2),T["\u0275\u0275attribute"]("href",T["\u0275\u0275pureFunction1"](10,U,"/#/product/domains/"+n.workitem.domain_id+"/config/relation?type=relation_product"),T["\u0275\u0275sanitizeUrl"]),T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](5,6,"CLICK_HERE")),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate1"]("",T["\u0275\u0275pipeBind1"](7,8,"TO_CONFIGURATION")," ")}}function H(e,t){if(1&e&&(T["\u0275\u0275elementContainerStart"](0),T["\u0275\u0275element"](1,"nz-option",15),T["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("nzValue",n)("nzLabel",n.name)}}function G(e,t){if(1&e&&(T["\u0275\u0275elementContainerStart"](0),T["\u0275\u0275element"](1,"nz-option",15),T["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("nzValue",n)("nzLabel",n.description)}}var q=function(e){return{"text-danger":e}},$=function(){function e(e,t,n,i,o){this.deploymentInfoService=e,this.modal=t,this.notification=n,this.emitService=i,this.translate=o,this.isVerifyForm=!1,this.changeDetail={component:null,change:null},this.components=[],this.changeList=[],this.loading=!1}return e.prototype.ngOnInit=function(){this.queryComponents()},e.prototype.queryComponents=function(){var e=this;this.deploymentInfoService.queryComponents(this.workitem.domain_id).subscribe(function(t){for(var n=0;n<t.length;n++)"MICRO_SERVICE_GROUP"==t[n].type?e.components.push.apply(e.components,t[n].micro_services):"MICRO_SERVICE"==t[n].type&&e.components.push(t[n]);e.workitem.attribution_microservice.length&&e.components.length&&(e.workitem.attribution_microservice.reverse(),e.workitem.attribution_microservice.forEach(function(t){var n=e.components.findIndex(function(e){return e.id===t.id});if(n>=0){var i=e.components[n];e.components.splice(n,1),e.components.unshift(i)}})),e.components.length&&(e.changeDetail.component=e.components[0],e.queryChangeList(e.components[0].fuxi_id))},function(){})},e.prototype.changeComponent=function(e){this.changeDetail.change="",this.queryChangeList(this.changeDetail.component.fuxi_id)},e.prototype.queryChangeList=function(e){var t=this;this.deploymentInfoService.queryChanges({appCompId:e,pageNum:1,pageSize:200,status:1}).subscribe(function(e){t.changeList=e,t.changeDetail.change=t.changeList[0]},function(){})},e.prototype.cancel=function(){this.modal.destroy()},e.prototype.validKey=function(){var e=this;return!!this.changeDetail.component&&["change"].every(function(t){return!Object(R.o)(e.changeDetail[t])})},e.prototype.confirm=function(){this.isVerifyForm=!0,this.validKey()?(this.loading=!0,this.relateChange(this.changeDetail.change.id),window.hwa("trackStructEvent",{label:"\u5173\u8054\u5df2\u6709\u53d8\u66f4"})):this.notification.warning(this.translate.instant("TIPS")+": ",this.translate.instant("NOT_EMPTY_OR_ENTRY_ILLEGAL"))},e.prototype.relateChange=function(e){var t=this;this.deploymentInfoService.relateChange({changeId:e,params:{workitemId:this.workitem.number,workitemStatus:this.workitem.status,workitemTitle:this.workitem.title,workitemWebUrl:""}}).subscribe(function(e){t.loading=!1,e?(t.notification.success(t.translate.instant("LINK_CHANGE_SUCCESS"),"",{nzDuration:1e3}),t.emitService.eventEmit.emit({event:"workitem:update:change",number:t.workitem.number}),t.emitService.emit({event:"workitem:link-branch:success"}),t.modal.close("workitem:update:change")):t.notification.error(t.translate.instant("LINK_CHANGE_FAILED"),"")},function(){})},e.\u0275fac=function(t){return new(t||e)(T["\u0275\u0275directiveInject"](L.a),T["\u0275\u0275directiveInject"](l.c),T["\u0275\u0275directiveInject"](N.b),T["\u0275\u0275directiveInject"](j.a),T["\u0275\u0275directiveInject"](c.c))},e.\u0275cmp=T["\u0275\u0275defineComponent"]({type:e,selectors:[["link-change"]],inputs:{workitem:"workitem"},decls:30,vars:34,consts:[[1,"link-wrapper"],[1,"m-t-10"],[1,"f-14","m-b-5"],[1,"f-14","text-999",3,"ngClass"],[1,"text-danger"],["class","text-danger m-t-5 f-13",4,"ngIf"],["nzShowSearch","",2,"width","100%",3,"nzPlaceHolder","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"m-t-10","f-14","m-b-5",3,"ngClass"],["nzShowSearch","",1,"f-12",2,"width","100%",3,"nzPlaceHolder","ngModel","ngModelChange"],[1,"change-operate","m-t-10"],["nz-button","","nzType","default",1,"m-r-10",3,"click"],["nz-button","","nzType","default",3,"nzLoading","click"],[1,"text-danger","m-t-5","f-13"],["target","_blank",2,"color","#4D808F","text-decoration","underline"],[3,"nzValue","nzLabel"]],template:function(e,t){1&e&&(T["\u0275\u0275elementStart"](0,"div",0),T["\u0275\u0275elementStart"](1,"div",1),T["\u0275\u0275elementStart"](2,"div",2),T["\u0275\u0275elementStart"](3,"span",3),T["\u0275\u0275pipe"](4,"isEmpty"),T["\u0275\u0275text"](5),T["\u0275\u0275pipe"](6,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](7,"span",4),T["\u0275\u0275text"](8,"*"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275template"](9,W,8,12,"span",5),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](10,"nz-select",6),T["\u0275\u0275listener"]("ngModelChange",function(e){return t.changeDetail.component=e})("ngModelChange",function(){return t.changeComponent(t.changeDetail.component.fuxi_id)}),T["\u0275\u0275pipe"](11,"translate"),T["\u0275\u0275template"](12,H,2,2,"ng-container",7),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](13,"div"),T["\u0275\u0275elementStart"](14,"p",8),T["\u0275\u0275pipe"](15,"isEmpty"),T["\u0275\u0275text"](16),T["\u0275\u0275pipe"](17,"translate"),T["\u0275\u0275elementStart"](18,"span",4),T["\u0275\u0275text"](19,"*"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](20,"nz-select",9),T["\u0275\u0275listener"]("ngModelChange",function(e){return t.changeDetail.change=e}),T["\u0275\u0275pipe"](21,"translate"),T["\u0275\u0275template"](22,G,2,2,"ng-container",7),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](23,"div",10),T["\u0275\u0275elementStart"](24,"button",11),T["\u0275\u0275listener"]("click",function(){return t.cancel()}),T["\u0275\u0275text"](25),T["\u0275\u0275pipe"](26,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](27,"button",12),T["\u0275\u0275listener"]("click",function(){return t.confirm()}),T["\u0275\u0275text"](28),T["\u0275\u0275pipe"](29,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"]()),2&e&&(T["\u0275\u0275advance"](3),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction1"](30,q,t.isVerifyForm&&T["\u0275\u0275pipeBind1"](4,14,t.changeDetail.component))),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](6,16,"CHANGE_COMPONENT")),T["\u0275\u0275advance"](4),T["\u0275\u0275property"]("ngIf",!t.components.length),T["\u0275\u0275advance"](1),T["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",T["\u0275\u0275pipeBind1"](11,18,"SELECT_COMPONENTS")),T["\u0275\u0275property"]("ngModel",t.changeDetail.component),T["\u0275\u0275advance"](2),T["\u0275\u0275property"]("ngForOf",t.components),T["\u0275\u0275advance"](2),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction1"](32,q,t.isVerifyForm&&T["\u0275\u0275pipeBind1"](15,20,t.changeDetail.change))),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate1"]("",T["\u0275\u0275pipeBind1"](17,22,"CHANGE")," "),T["\u0275\u0275advance"](4),T["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",T["\u0275\u0275pipeBind1"](21,24,"SELECT")),T["\u0275\u0275property"]("ngModel",t.changeDetail.change),T["\u0275\u0275advance"](2),T["\u0275\u0275property"]("ngForOf",t.changeList),T["\u0275\u0275advance"](3),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](26,26,"COMMON_BUTTON_CANCLE")),T["\u0275\u0275advance"](2),T["\u0275\u0275property"]("nzLoading",t.loading),T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](29,28,"COMMON_BUTTON_CONFIRM")))},directives:[i.l,i.n,s.e,r.k,r.l,i.m,m.a,V.a,F.a,s.a],pipes:[B.a,c.b],styles:[".link-wrapper[_ngcontent-%COMP%]   .change-operate[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:5px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:4px}"]}),e}(),K=n("Olm7"),X=function(e){return[e]};function Y(e,t){if(1&e&&(T["\u0275\u0275elementStart"](0,"span",32),T["\u0275\u0275text"](1),T["\u0275\u0275pipe"](2,"translate"),T["\u0275\u0275elementStart"](3,"a",33),T["\u0275\u0275text"](4),T["\u0275\u0275pipe"](5,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275text"](6),T["\u0275\u0275pipe"](7,"translate"),T["\u0275\u0275elementEnd"]()),2&e){var n=T["\u0275\u0275nextContext"]();T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate1"]("",T["\u0275\u0275pipeBind1"](2,4,"NO_AVAILABLE_COMPONENT_CONTACT_DOMAIN_OWNER")," "),T["\u0275\u0275advance"](2),T["\u0275\u0275attribute"]("href",T["\u0275\u0275pureFunction1"](10,X,"/#/product/domains/"+n.workitem.domain_id+"/config/relation?type=relation_product"),T["\u0275\u0275sanitizeUrl"]),T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](5,6,"CLICK_HERE")),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate1"]("",T["\u0275\u0275pipeBind1"](7,8,"TO_CONFIGURATION")," ")}}function Q(e,t){if(1&e&&(T["\u0275\u0275elementContainerStart"](0),T["\u0275\u0275element"](1,"nz-option",34),T["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("nzValue",n)("nzLabel",n.name)}}function J(e,t){if(1&e&&(T["\u0275\u0275elementContainerStart"](0),T["\u0275\u0275element"](1,"nz-option",34),T["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("nzValue",n)("nzLabel",n.name+" "+n.username)}}function Z(e,t){if(1&e&&(T["\u0275\u0275elementContainerStart"](0),T["\u0275\u0275element"](1,"nz-option",34),T["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("nzValue",n)("nzLabel",n.name+" "+n.username)}}function ee(e,t){if(1&e&&(T["\u0275\u0275elementStart"](0,"span",35),T["\u0275\u0275text"](1),T["\u0275\u0275pipe"](2,"translate"),T["\u0275\u0275elementStart"](3,"a",33),T["\u0275\u0275text"](4),T["\u0275\u0275pipe"](5,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275text"](6),T["\u0275\u0275pipe"](7,"translate"),T["\u0275\u0275elementEnd"]()),2&e){var n=T["\u0275\u0275nextContext"]();T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](2,4,"COMPONENT_NOT_BOUND_CODE_BASE")),T["\u0275\u0275advance"](2),T["\u0275\u0275attribute"]("href",T["\u0275\u0275pureFunction1"](10,X,"/domains/"+n.workitem.domain_id+"/mine/components/"+n.changeDetail.component.fuxi_id+"/profile"),T["\u0275\u0275sanitizeUrl"]),T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](5,6,"CLICK_HERE")),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](7,8,"TO_CONFIGURATION"))}}var te=function(e){return{from_branch:e}};function ne(e,t){if(1&e){var n=T["\u0275\u0275getCurrentView"]();T["\u0275\u0275elementStart"](0,"div",53),T["\u0275\u0275elementStart"](1,"input",41),T["\u0275\u0275listener"]("click",function(){T["\u0275\u0275restoreView"](n);var e=T["\u0275\u0275nextContext"]().$implicit;return T["\u0275\u0275nextContext"](2).toggleBranchWay(e,"create")}),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](2,"label",42),T["\u0275\u0275text"](3),T["\u0275\u0275pipe"](4,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"]()}if(2&e){var i=T["\u0275\u0275nextContext"](),o=i.index,r=i.$implicit;T["\u0275\u0275advance"](1),T["\u0275\u0275propertyInterpolate1"]("id","creatBranch",o,""),T["\u0275\u0275propertyInterpolate1"]("name","branch",o,""),T["\u0275\u0275property"]("checked","create"==r.type),T["\u0275\u0275advance"](1),T["\u0275\u0275propertyInterpolate1"]("for","creatBranch",o,""),T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate1"](" ",T["\u0275\u0275pipeBind2"](4,5,"PULL_NEW_BRANCH_FROM",T["\u0275\u0275pureFunction1"](8,te,r.from_branch))," ")}}var ie=function(e,t){return{"txt-primary icon-check-true":e,"icon-check-blank text-999999":t}};function oe(e,t){if(1&e){var n=T["\u0275\u0275getCurrentView"]();T["\u0275\u0275elementStart"](0,"div",54),T["\u0275\u0275listener"]("click",function(){T["\u0275\u0275restoreView"](n);var e=T["\u0275\u0275nextContext"]().$implicit;return e.autoDelCodeBranch=!e.autoDelCodeBranch}),T["\u0275\u0275element"](1,"i",55),T["\u0275\u0275elementStart"](2,"span"),T["\u0275\u0275text"](3),T["\u0275\u0275pipe"](4,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"]()}if(2&e){var i=T["\u0275\u0275nextContext"]().$implicit;T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction2"](4,ie,!i.autoDelCodeBranch,i.autoDelCodeBranch)),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](4,2,"PUBLISHED_DELETE_BRANCH"))}}function re(e,t){1&e&&(T["\u0275\u0275elementStart"](0,"span",4),T["\u0275\u0275text"](1),T["\u0275\u0275pipe"](2,"translate"),T["\u0275\u0275elementEnd"]()),2&e&&(T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](2,1,"BRANCH_EXISTED")))}function ae(e,t){if(1&e&&(T["\u0275\u0275elementContainerStart"](0),T["\u0275\u0275element"](1,"nz-option",34),T["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("nzValue",n)("nzLabel",n)}}var ce=function(e){return{"text-danger":e}},le=function(e){return{"verify-form":e}};function se(e,t){if(1&e){var n=T["\u0275\u0275getCurrentView"]();T["\u0275\u0275elementStart"](0,"div"),T["\u0275\u0275elementStart"](1,"div"),T["\u0275\u0275elementStart"](2,"span",37),T["\u0275\u0275text"](3),T["\u0275\u0275pipe"](4,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](5,"span",4),T["\u0275\u0275text"](6,"*"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](7,"div",38),T["\u0275\u0275template"](8,ne,5,10,"div",39),T["\u0275\u0275elementStart"](9,"div",40),T["\u0275\u0275elementStart"](10,"input",41),T["\u0275\u0275listener"]("click",function(){T["\u0275\u0275restoreView"](n);var e=t.$implicit;return T["\u0275\u0275nextContext"](2).toggleBranchWay(e,"relate")}),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](11,"label",42),T["\u0275\u0275text"](12),T["\u0275\u0275pipe"](13,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](14,"div",43),T["\u0275\u0275elementStart"](15,"span"),T["\u0275\u0275text"](16),T["\u0275\u0275pipe"](17,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](18,"div"),T["\u0275\u0275elementStart"](19,"a"),T["\u0275\u0275text"](20),T["\u0275\u0275elementEnd"](),T["\u0275\u0275template"](21,oe,5,7,"div",44),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](22,"div",45),T["\u0275\u0275elementStart"](23,"div",46),T["\u0275\u0275elementStart"](24,"span",3),T["\u0275\u0275pipe"](25,"isEmpty"),T["\u0275\u0275text"](26),T["\u0275\u0275pipe"](27,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275element"](28,"i",47),T["\u0275\u0275pipe"](29,"translate"),T["\u0275\u0275elementStart"](30,"span",4),T["\u0275\u0275text"](31,"*"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](32,"input",48),T["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.branch_name=e}),T["\u0275\u0275elementEnd"](),T["\u0275\u0275template"](33,re,3,3,"span",49),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](34,"div",50),T["\u0275\u0275elementStart"](35,"div",46),T["\u0275\u0275elementStart"](36,"p",51),T["\u0275\u0275elementStart"](37,"span",52),T["\u0275\u0275pipe"](38,"isEmpty"),T["\u0275\u0275text"](39),T["\u0275\u0275pipe"](40,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](41,"span",4),T["\u0275\u0275text"](42,"*"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](43,"nz-select",6),T["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.branch_name=e}),T["\u0275\u0275pipe"](44,"translate"),T["\u0275\u0275template"](45,ae,2,2,"ng-container",7),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=t.index,r=T["\u0275\u0275nextContext"](2);T["\u0275\u0275advance"](3),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](4,24,"BRANCH_CREATE_METHOD")),T["\u0275\u0275advance"](5),T["\u0275\u0275property"]("ngIf",!i.shared),T["\u0275\u0275advance"](2),T["\u0275\u0275propertyInterpolate1"]("id","relate",o,""),T["\u0275\u0275propertyInterpolate1"]("name","branch",o,""),T["\u0275\u0275property"]("checked","relate"==i.type),T["\u0275\u0275advance"](1),T["\u0275\u0275propertyInterpolate1"]("for","relate",o,""),T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](13,26,"COMMON_LINK_EXIST_BRANCH")),T["\u0275\u0275advance"](4),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](17,28,"BRANCH_URL")),T["\u0275\u0275advance"](3),T["\u0275\u0275attribute"]("href",i.project.httpUrl,T["\u0275\u0275sanitizeUrl"]),T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate"](i.project.httpUrl),T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("ngIf",!i.shared),T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("hidden","create"!==i.type),T["\u0275\u0275advance"](2),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction1"](42,ce,r.isVerifyForm&&T["\u0275\u0275pipeBind1"](25,30,i.branch_name))),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](27,32,"BRANCH")),T["\u0275\u0275advance"](2),T["\u0275\u0275propertyInterpolate"]("title",T["\u0275\u0275pipeBind1"](29,34,"BRANCH_NAMING_RULE_DEV_WORK_NUMBER")),T["\u0275\u0275advance"](4),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction1"](44,le,i.branchs.includes(i.branch_name)))("ngModel",i.branch_name),T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("ngIf",i.branchs.includes(i.branch_name)),T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("hidden","relate"!==i.type),T["\u0275\u0275advance"](3),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction1"](46,ce,r.isVerifyForm&&T["\u0275\u0275pipeBind1"](38,36,i.branch_name))),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](40,38,"BRANCH")),T["\u0275\u0275advance"](4),T["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",T["\u0275\u0275pipeBind1"](44,40,"SELECT")),T["\u0275\u0275property"]("ngModel",i.branch_name),T["\u0275\u0275advance"](2),T["\u0275\u0275property"]("ngForOf",i.branchs)}}function de(e,t){if(1&e&&(T["\u0275\u0275elementStart"](0,"div",36),T["\u0275\u0275template"](1,se,46,48,"div",7),T["\u0275\u0275elementEnd"]()),2&e){var n=T["\u0275\u0275nextContext"]();T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("ngForOf",n.repoInfoOfComponent)}}var pe=function(){function e(e,t,n,i,o){this.deploymentInfoService=e,this.modal=t,this.notification=n,this.emitService=i,this.translate=o,this.isVerifyForm=!1,this.changeDetail={changeReason:null,publishDate:new Date,codingMember:[],testMember:[],component:null},this.components=[],this.memberList=[],this.repoInfoOfComponent=[],this.availableOwners=[],this.changeType="codeChange",this.loading=!1}return e.prototype.ngOnInit=function(){this.changeDetail.changeReason=this.workitem.title,this.queryComponents(),this.queryMembers(this.workitem.coder)},e.prototype.queryComponents=function(){var e=this;this.deploymentInfoService.queryComponents(this.workitem.domain_id).subscribe(function(t){for(var n=0;n<t.length;n++)"MICRO_SERVICE_GROUP"==t[n].type?e.components.push.apply(e.components,t[n].micro_services):"MICRO_SERVICE"==t[n].type&&e.components.push(t[n]);e.workitem.attribution_microservice.length&&e.components.length&&(e.workitem.attribution_microservice.reverse(),e.workitem.attribution_microservice.forEach(function(t){var n=e.components.findIndex(function(e){return e.id===t.id});if(n>=0){var i=e.components[n];e.components.splice(n,1),e.components.unshift(i)}})),e.components.length&&(e.changeDetail.component=e.components[0],e.queryRepoInfoByComponent(e.components[0].fuxi_id))},function(){})},e.prototype.queryMembers=function(e){var t=this;this.availableOwners=[],this.deploymentInfoService.query_members(this.workitem.domain_id).subscribe(function(n){var i=n.data;if(Object(R.o)(i.self_members)||i.self_members.members.forEach(function(e){t.availableOwners.push(e.user)}),!Object(R.o)(e)){var o=Object(K.a)(t.availableOwners,function(t){return t.id==e[0].id});o.length&&t.availableOwners.unshift(o[0]),t.changeDetail.codingMember=o,t.changeDetail.testMember=o}t.memberList=t.availableOwners},function(){})},e.prototype.onSearch=function(e){this.memberList=e&&e.length>2?this.memberList.filter(function(t){return t.name_full.includes(e)||t.name.includes(e)||t.account.includes(e)||t.username.includes(e)}):this.availableOwners},e.prototype.changeComponent=function(e){this.queryRepoInfoByComponent(e)},e.prototype.queryRepoInfoByComponent=function(e){var t=this;this.deploymentInfoService.queryRepoInfoByComponent(e).subscribe(function(e){if(t.repoInfoOfComponent=[],e.length)for(var n=function(n){var i=e[n],o={branchs:[],from_branch:i.branch,type:"create",branch_name:"dev-"+t.workitem.number,project:{httpUrl:i.httpUrl},codeCreateType:"1",shared:i.shared,autoDelCodeBranch:0};i.shared&&(o.type="relate",o.branch_name=i.branch,o.codeCreateType="2"),t.deploymentInfoService.queryBranchesByService({gitUrl:i.httpUrl}).subscribe(function(e){o.branchs=e},function(){}),t.repoInfoOfComponent.push(o)},i=0;i<e.length;i++)n(i)},function(){})},e.prototype.cancel=function(){this.modal.destroy()},e.prototype.validKey=function(){var e=this;return!!this.repoInfoOfComponent.length&&this.repoInfoOfComponent.every(function(e){return"relate"==e.type||!e.branchs.includes(e.branch_name)&&e.branch_name})&&["changeReason","codingMember","testMember","publishDate"].every(function(t){return"publishDate"===t?null!==e.changeDetail.publishDate:!Object(R.o)(e.changeDetail[t])})},e.prototype.confirm=function(){this.isVerifyForm=!0,this.validKey()?(this.loading=!0,this.initiateChange(),window.hwa("trackStructEvent",{label:"\u521b\u5efa\u53d8\u66f4"})):this.notification.warning(this.translate.instant("TIPS")+": ",this.translate.instant("NOT_EMPTY_OR_ENTRY_ILLEGAL"))},e.prototype.arrNameToStr=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].name_full);return t.join(",")},e.prototype.constructData=function(){if(this.repoInfoOfComponent&&this.repoInfoOfComponent.length){var e={releaseDate:R.a.formatDate(this.changeDetail.publishDate,"yyyy-MM-dd hh:mm:ss"),appCompId:this.changeDetail.component.fuxi_id,crReason:this.changeDetail.changeReason,developer:this.arrNameToStr(this.changeDetail.codingMember),submitter:this.workitem.submitter,tester:this.arrNameToStr(this.changeDetail.testMember),type:"code",codeBranch:this.repoInfoOfComponent[0].branch_name,mainBranch:this.repoInfoOfComponent[0].from_branch,codeCreateType:this.repoInfoOfComponent[0].codeCreateType,codeRepoUrl:this.repoInfoOfComponent[0].project.httpUrl,isMultiRepo:0,multiRepoEntity:[],packageName:"",appDependGroupId:0,workitemId:this.workitem.id,appCompType:4,autoDelCodeBranch:Number(this.repoInfoOfComponent[0].autoDelCodeBranch),deleteBranchCrClosed:1,repoType:"codeclub",createBy:this.workitem.createBy,workitemCategory:this.workitem.category,workitemNumber:this.workitem.number,workitemStatus:this.workitem.status,workitemTitle:this.workitem.title};return this.repoInfoOfComponent.length>1&&(e.isMultiRepo=1,this.repoInfoOfComponent.forEach(function(t){e.multiRepoEntity.push({autoDelCodeBranch:Number(t.autoDelCodeBranch),deleteBranchCrClosed:1,codeBranch:t.branch_name,mainBranch:t.from_branch,codeCreateType:t.codeCreateType,codeRepoUrl:t.project.httpUrl,repoType:"codeclub"})})),e}},e.prototype.initiateChange=function(){var e=this,t=this.constructData();this.deploymentInfoService.initiateChange(t).subscribe(function(t){t?(e.notification.success(e.translate.instant("CREATE_CHANGE_SUCCESS"),"",{nzDuration:1e3}),e.emitService.eventEmit.emit({event:"workitem:update:change",number:e.workitem.number}),e.emitService.emit({event:"workitem:link-branch:success"}),e.modal.close("workitem:update:change")):e.notification.error(e.translate.instant("CREATE_CHANGE_FAILED"),"")},function(){})},e.prototype.toggleBranchWay=function(e,t){"create"==t?(e.type="create",e.branch_name="dev-"+this.workitem.number,e.codeCreateType="1"):(e.type="relate",e.branch_name=e.from_branch,e.codeCreateType="2")},e.\u0275fac=function(t){return new(t||e)(T["\u0275\u0275directiveInject"](L.a),T["\u0275\u0275directiveInject"](l.c),T["\u0275\u0275directiveInject"](N.b),T["\u0275\u0275directiveInject"](j.a),T["\u0275\u0275directiveInject"](c.c))},e.\u0275cmp=T["\u0275\u0275defineComponent"]({type:e,selectors:[["create-change"]],inputs:{workitem:"workitem"},decls:79,vars:77,consts:[[1,"create-wrapper"],[1,"m-t-10"],[1,"f-14","m-b-5"],[1,"f-14","text-999",3,"ngClass"],[1,"text-danger"],["class","text-danger m-t-5 f-13",4,"ngIf"],["nzShowSearch","",2,"width","100%",3,"nzPlaceHolder","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"flex-box","flex-j-sb","change-desc","m-t-10"],[2,"width","45%"],[1,"f-14","m-b-5","text-999",3,"ngClass"],["nz-input","",1,"inline-block","branch-name",2,"outline","none","width","100%","margin-top","5px",3,"ngModel","ngModelChange"],[1,"publish-time",2,"width","45%"],[1,"req-key","txt-l","position-r",2,"padding","0","margin-bottom","5px"],[3,"ngClass"],["nzFormat","yyyy-MM-dd",1,"plan-date-picker",3,"ngModel","ngModelChange"],[1,"flex-box","flex-j-sb","change-desc","pick-member","m-t-10"],[1,"coding-member",2,"width","45%"],[1,"req-key","txt-l","position-r","m-b-10"],[1,"flex-cell","req-value","txt-l"],["nzShowSearch","","nzServerSearch","","nzMode","multiple",1,"f-12",2,"width","100%",3,"nzPlaceHolder","ngModel","nzOnSearch","ngModelChange"],[1,"test-member",2,"width","45%"],[1,"change-type","m-t-10"],[1,"flex-box","m-l-3","m-t-10","row"],[1,"col-sm-12","box-inline","radio","radio-info","m-n"],["id","codeChange","type","radio","name","codeChangeType",1,"pointer-cursor","inline-block",2,"outline","none",3,"checked","click"],["for","codeChange",2,"cursor","default"],["class","text-danger m-t-5 ",4,"ngIf"],["class","change-code",4,"ngIf"],[1,"change-operate","m-t-10"],["nz-button","","nzType","default",1,"m-r-10",3,"click"],["nz-button","","nzType","default",3,"nzLoading","click"],[1,"text-danger","m-t-5","f-13"],["target","_blank",2,"color","#4D808F","text-decoration","underline"],[3,"nzValue","nzLabel"],[1,"text-danger","m-t-5"],[1,"change-code"],[1,"f-14","text-999"],[1,"flex-box","m-l-10","m-t-10","row"],["class","col-sm-4 box-inline radio radio-info m-n","style","width:50%",4,"ngIf"],[1,"col-sm-3","box-inline","radio","radio-info","m-n",2,"width","50%"],["type","radio",1,"pointer-cursor","inline-block",2,"outline","none",3,"id","name","checked","click"],[1,"col-sm-10",3,"for"],[1,"code-url"],["class","pointer-cursor m-t-5",3,"click",4,"ngIf"],[1,"create-new",3,"hidden"],[1,"m-t-10","creat-new-branch"],[1,"fa","fa-question-circle","m-l-3","m-r-5",3,"title"],["type","text",1,"inline-block","branch-name","form-control","m-t-5",2,"outline","none","width","100%",3,"ngClass","ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],[1,"relate-old",3,"hidden"],[1,"m-t-10","f-14"],[1,"f-14","text-999","m-b-5",3,"ngClass"],[1,"col-sm-4","box-inline","radio","radio-info","m-n",2,"width","50%"],[1,"pointer-cursor","m-t-5",3,"click"],[1,"iconfont","m-r-5",3,"ngClass"]],template:function(e,t){1&e&&(T["\u0275\u0275elementStart"](0,"div",0),T["\u0275\u0275elementStart"](1,"div",1),T["\u0275\u0275elementStart"](2,"div",2),T["\u0275\u0275elementStart"](3,"span",3),T["\u0275\u0275pipe"](4,"isEmpty"),T["\u0275\u0275text"](5),T["\u0275\u0275pipe"](6,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](7,"span",4),T["\u0275\u0275text"](8,"*"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275template"](9,Y,8,12,"span",5),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](10,"nz-select",6),T["\u0275\u0275listener"]("ngModelChange",function(e){return t.changeDetail.component=e})("ngModelChange",function(){return t.changeComponent(t.changeDetail.component.fuxi_id)}),T["\u0275\u0275pipe"](11,"translate"),T["\u0275\u0275template"](12,Q,2,2,"ng-container",7),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](13,"div"),T["\u0275\u0275elementStart"](14,"div",8),T["\u0275\u0275elementStart"](15,"div",9),T["\u0275\u0275elementStart"](16,"span",10),T["\u0275\u0275pipe"](17,"isEmpty"),T["\u0275\u0275text"](18),T["\u0275\u0275pipe"](19,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](20,"span",4),T["\u0275\u0275text"](21,"*"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](22,"input",11),T["\u0275\u0275listener"]("ngModelChange",function(e){return t.changeDetail.changeReason=e}),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](23,"div",12),T["\u0275\u0275elementStart"](24,"div",13),T["\u0275\u0275elementStart"](25,"span",14),T["\u0275\u0275pipe"](26,"isEmpty"),T["\u0275\u0275text"](27),T["\u0275\u0275pipe"](28,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](29,"span",4),T["\u0275\u0275text"](30,"*"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](31,"nz-date-picker",15),T["\u0275\u0275listener"]("ngModelChange",function(e){return t.changeDetail.publishDate=e}),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](32,"div",16),T["\u0275\u0275elementStart"](33,"div",17),T["\u0275\u0275elementStart"](34,"div",18),T["\u0275\u0275elementStart"](35,"span",14),T["\u0275\u0275pipe"](36,"isEmpty"),T["\u0275\u0275text"](37),T["\u0275\u0275pipe"](38,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](39,"span",4),T["\u0275\u0275text"](40,"*"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](41,"div",19),T["\u0275\u0275elementStart"](42,"nz-select",20),T["\u0275\u0275listener"]("nzOnSearch",function(e){return t.onSearch(e)})("ngModelChange",function(e){return t.changeDetail.codingMember=e}),T["\u0275\u0275pipe"](43,"translate"),T["\u0275\u0275template"](44,J,2,2,"ng-container",7),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](45,"div",21),T["\u0275\u0275elementStart"](46,"div",18),T["\u0275\u0275elementStart"](47,"span",14),T["\u0275\u0275pipe"](48,"isEmpty"),T["\u0275\u0275text"](49),T["\u0275\u0275pipe"](50,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](51,"span",4),T["\u0275\u0275text"](52,"*"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](53,"div",19),T["\u0275\u0275elementStart"](54,"nz-select",20),T["\u0275\u0275listener"]("nzOnSearch",function(e){return t.onSearch(e)})("ngModelChange",function(e){return t.changeDetail.testMember=e}),T["\u0275\u0275pipe"](55,"translate"),T["\u0275\u0275template"](56,Z,2,2,"ng-container",7),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](57,"div",22),T["\u0275\u0275elementStart"](58,"div"),T["\u0275\u0275elementStart"](59,"span",3),T["\u0275\u0275text"](60),T["\u0275\u0275pipe"](61,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](62,"span",4),T["\u0275\u0275text"](63,"*"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](64,"div",23),T["\u0275\u0275elementStart"](65,"div",24),T["\u0275\u0275elementStart"](66,"input",25),T["\u0275\u0275listener"]("click",function(){return t.changeType="codeChange"}),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](67,"label",26),T["\u0275\u0275text"](68),T["\u0275\u0275pipe"](69,"translate"),T["\u0275\u0275template"](70,ee,8,12,"span",27),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275template"](71,de,2,1,"div",28),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](72,"div",29),T["\u0275\u0275elementStart"](73,"button",30),T["\u0275\u0275listener"]("click",function(){return t.cancel()}),T["\u0275\u0275text"](74),T["\u0275\u0275pipe"](75,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementStart"](76,"button",31),T["\u0275\u0275listener"]("click",function(){return t.confirm()}),T["\u0275\u0275text"](77),T["\u0275\u0275pipe"](78,"translate"),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"](),T["\u0275\u0275elementEnd"]()),2&e&&(T["\u0275\u0275advance"](3),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction1"](65,ce,t.isVerifyForm&&T["\u0275\u0275pipeBind1"](4,31,t.changeDetail.component))),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](6,33,"CHANGE_COMPONENT")),T["\u0275\u0275advance"](4),T["\u0275\u0275property"]("ngIf",!t.components.length),T["\u0275\u0275advance"](1),T["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",T["\u0275\u0275pipeBind1"](11,35,"SELECT_COMPONENTS")),T["\u0275\u0275property"]("ngModel",t.changeDetail.component),T["\u0275\u0275advance"](2),T["\u0275\u0275property"]("ngForOf",t.components),T["\u0275\u0275advance"](4),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction1"](67,ce,t.isVerifyForm&&T["\u0275\u0275pipeBind1"](17,37,t.changeDetail.changeReason))),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](19,39,"CHANGED_REASON")),T["\u0275\u0275advance"](4),T["\u0275\u0275property"]("ngModel",t.changeDetail.changeReason),T["\u0275\u0275advance"](3),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction1"](69,ce,t.isVerifyForm&&T["\u0275\u0275pipeBind1"](26,41,t.changeDetail.publishDate))),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate1"](" ",T["\u0275\u0275pipeBind1"](28,43,"PLANNED_RELEASE_DATE")," "),T["\u0275\u0275advance"](4),T["\u0275\u0275property"]("ngModel",t.changeDetail.publishDate),T["\u0275\u0275advance"](4),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction1"](71,ce,t.isVerifyForm&&T["\u0275\u0275pipeBind1"](36,45,t.changeDetail.codingMember))),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](38,47,"DEVELOPING_STATUS_OWNERS")),T["\u0275\u0275advance"](5),T["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",T["\u0275\u0275pipeBind1"](43,49,"SELECT_CODING_MEMBER")),T["\u0275\u0275property"]("ngModel",t.changeDetail.codingMember),T["\u0275\u0275advance"](2),T["\u0275\u0275property"]("ngForOf",t.memberList),T["\u0275\u0275advance"](3),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction1"](73,ce,t.isVerifyForm&&T["\u0275\u0275pipeBind1"](48,51,t.changeDetail.testMember))),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](50,53,"TEST_OWNER")),T["\u0275\u0275advance"](5),T["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",T["\u0275\u0275pipeBind1"](55,55,"SELECT_TESTER")),T["\u0275\u0275property"]("ngModel",t.changeDetail.testMember),T["\u0275\u0275advance"](2),T["\u0275\u0275property"]("ngForOf",t.memberList),T["\u0275\u0275advance"](3),T["\u0275\u0275property"]("ngClass",T["\u0275\u0275pureFunction1"](75,ce,t.isVerifyForm&&t.changeDetail.component&&!t.repoInfoOfComponent.length)),T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](61,57,"CHANGE_CATEGORY")),T["\u0275\u0275advance"](6),T["\u0275\u0275property"]("checked","codeChange"==t.changeType),T["\u0275\u0275advance"](2),T["\u0275\u0275textInterpolate1"]("",T["\u0275\u0275pipeBind1"](69,59,"CODE_CHANGE")," "),T["\u0275\u0275advance"](2),T["\u0275\u0275property"]("ngIf",t.changeDetail.component&&!t.repoInfoOfComponent.length),T["\u0275\u0275advance"](1),T["\u0275\u0275property"]("ngIf","codeChange"==t.changeType&&t.changeDetail.component),T["\u0275\u0275advance"](3),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](75,61,"COMMON_BUTTON_CANCLE")),T["\u0275\u0275advance"](2),T["\u0275\u0275property"]("nzLoading",t.loading),T["\u0275\u0275advance"](1),T["\u0275\u0275textInterpolate"](T["\u0275\u0275pipeBind1"](78,63,"COMMON_BUTTON_CONFIRM")))},directives:[i.l,i.n,s.e,r.k,r.l,i.m,I.b,r.d,z.a,m.a,V.a,F.a,s.a],pipes:[B.a,c.b],styles:[".create-wrapper[_ngcontent-%COMP%]   .change-desc[_ngcontent-%COMP%]   .publish-time[_ngcontent-%COMP%]   .plan-date-picker[_ngcontent-%COMP%]{width:100%}.create-wrapper[_ngcontent-%COMP%]   .change-desc[_ngcontent-%COMP%]   .publish-time[_ngcontent-%COMP%]   .plan-date-picker[_ngcontent-%COMP%]     .ant-calendar-picker{width:100%}.create-wrapper[_ngcontent-%COMP%]   .change-code[_ngcontent-%COMP%]{margin-top:10px}.create-wrapper[_ngcontent-%COMP%]   .change-code[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:10px 0 5px;border-top:1px dashed #ddd}.create-wrapper[_ngcontent-%COMP%]   .change-code[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .code-url[_ngcontent-%COMP%]{margin-top:10px;display:flex}.create-wrapper[_ngcontent-%COMP%]   .change-code[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .code-url[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{min-width:80px}.create-wrapper[_ngcontent-%COMP%]   .change-operate[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:5px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:4px}"]}),e}(),ue=n("ZVgC"),me=n("8p0l"),he=n("CuYH"),ge=n("rXOI"),fe=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({imports:[[i.c,s.g,I.e,z.b,r.g,_.a,me.a,x.b,c.a,m.c,p.c]]}),e}();T["\u0275\u0275setComponentScope"](ue.a,[i.o,i.n,pe,$],[c.b,he.a,ge.a]);var ve=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({imports:[[i.c,s.g,I.e,r.g,m.c,_.a,k.b,p.c,u.b,me.a,c.a.forRoot()]]}),e}(),be=n("slO9"),Ce=n("z4wI"),ye=n("teTe"),xe=n("ZfuR"),we=n("0qTp"),_e=n("QlLE"),Oe=n("oyxB"),Se=n("nxWG"),Ee=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({providers:[c.c],imports:[[i.c,r.g,c.a,l.b,u.b,v.b,k.b,p.c,d.b,_e.c,m.c,Oe.c,Se.b,g.d,w.b,O.a,_.a,f.d]]}),e}(),Me=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({imports:[[i.c,r.g,I.e,c.a,me.a,_e.c,Se.b]]}),e}(),Pe=n("MP3p"),Ie=function(){function e(){}return e.prototype.getRelationLinkNewComponent=function(){return Pe.a},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({providers:[ye.a],imports:[[i.c,r.g,l.b,_.a,v.b,s.g,I.e,m.c,k.b,c.a.forChild(),p.c,z.b,Ce.b,xe.a,we.a,Ee,S.a,me.a,u.b,x.b,Me]]}),e}(),ke=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({imports:[[i.c,x.b,c.a]]}),e}(),Te=n("MGFw"),De=n("WtWf"),Ae=n("cH1L"),ze=n("0MNC"),Re=n("nLfN"),Le=n("pdGh"),Ne=n("B+r4");n("GR68"),n("/KA4"),n("XNiG"),n("quSY"),n("1G5W"),n("pLZG"),n("lJxs"),n("vkgz"),n("JX91"),n("mrSG"),n("2Suw"),n("Rm4T");var je=function(){var e=Object(De.a)(function e(){Object(Te.a)(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({imports:[[Ae.a,i.c,Ne.b,v.b,u.b,ze.a,Re.b,Le.a],Ne.b]}),e}(),Ve=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({imports:[[i.c,_.a,p.c,c.a]]}),e}(),Fe=n("eg8t"),Be=n("Vuwd"),Ue=n("O/sn"),We=n("vNWM"),He=n("Vz0L"),Ge=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({providers:[We.a,Fe.a,Be.a,Ue.a],imports:[[i.c,r.g,c.a.forChild(),r.m,v.b,m.c,I.e,je,p.c,Ne.b,s.g,z.b,x.b,g.d,Ce.b,w.b,u.b,k.b,_.a,E.a,S.a,xe.a,Ee,we.a,Ve,Me,He.a]]}),e}(),qe=n("Ev4J"),$e=n("FXAj"),Ke=n("cnMA"),Xe=n("8WYy"),Ye=n("7lu6"),Qe=n("+jTH"),Je=n("bWbh"),Ze=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({imports:[[i.c,c.a,r.g,g.d,l.b]]}),e}(),et=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=T["\u0275\u0275defineInjector"]({providers:[be.a,L.a],imports:[[i.c,r.g,c.a.forRoot(),a.b.forRoot(),p.c,C.b,l.b,s.g,u.b,f.d,o.i,d.b,m.c,x.b,S.a,E.a,_.a,fe,ve,O.a,M.a,A.a,P.a,g.d,qe.a,D,$e.a,h.d,Ie,w.b,v.b,b.b,ke,Ke.a,y.f,Xe.a,Ye.a,Qe.a,Je.a,Ze,Ge]]}),e}()},"s+/Z":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("FwiY"),o=n("qAZ0"),r=n("sYmb"),a=n("ofXK"),c=n("lR5k"),l=n("mOC4"),s=n("8J34"),d=n("fXoL"),p=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[{provide:s.a,useClass:s.a}]}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({imports:[[a.c,o.b,i.b,r.a,l.a,c.b.forRoot()]]}),e}()},slO9:function(e,t,n){"use strict";n.d(t,"a",function(){return D});var i=n("fXoL"),o=n("UJq8"),r=n("sYmb"),a=n("dEAy"),c=n("bNXi"),l=n("lJxs"),s=n("tk/3"),d=function(){function e(e){this.http=e}return e.prototype.queryRelatedBranchs=function(e,t){return this.http.get("/vision-workitem/api/query/branchcode/number/"+e,{params:t}).pipe(Object(l.a)(function(e){return e.data}))},e.prototype.queryRepositories=function(e){return this.http.get("/vision-platform/api/domains/devteam/"+e+"/related_repo").pipe(Object(l.a)(function(e){return e.data}))},e.prototype.queryBranches=function(e){return this.http.get("/vision-workitem/api/query/branch/by_repourl",{params:e}).pipe(Object(l.a)(function(e){return e.data}))},e.prototype.invalidCheck=function(e){var t=!1;return e.forEach(function(e){e.invalidAttr={branchName:!e.branchName,sourceBranch:!e.sourceBranch},e.branchName&&e.sourceBranch||(t=!0)}),t},e.prototype.buildBranchParams=function(e,t,n){return t.map(function(t){return{workitem_id:e.id,workitem_category:e.category,workitem_number:e.number,action_type:n,branch:"create"==n?t.branchName:t.sourceBranch,main_branch:t.sourceBranch,delete_flag:0,project_url:t.httpUrl}})},e.prototype.createBranches=function(e,t,n){var i=this.buildBranchParams(e,t,n);return this.http.post("/vision-workitem/api/build/workitem_branch",i).pipe(Object(l.a)(function(e){return e.data}))},e.prototype.unlinkBranch=function(e){return this.http.put("/vision-workitem/api/workitem_branch/by_ids",e).pipe(Object(l.a)(function(e){return e.data}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](s.c))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),p=n("ofXK"),u=n("zAKX"),m=n("3Pt+"),h=n("OzZK"),g=n("RwU8"),f=n("C2AL"),v=n("PTRe"),b=n("CuYH"),C=n("rXOI"),y=n("yg7y");function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",8),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](", ",n.fromItem.owners[0].name,"")}}var w=function(e,t){return{"txt-primary icon-check-true":e,"icon-check-blank txt-999999":t}};function _(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-option",19),i["\u0275\u0275elementStart"](2,"div",20),i["\u0275\u0275element"](3,"i",21),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzValue",n)("nzLabel",n.projectName),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction2"](4,w,n.isSelected,!n.isSelected)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.projectName," ")}}var O=function(e){return{"text-danger":e}};function S(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",37),i["\u0275\u0275elementStart"](1,"div",38),i["\u0275\u0275elementStart"](2,"span",29),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"span",30),i["\u0275\u0275text"](6,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"input",39),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.branchName=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](5,O,!o.branchName&&(null==o.invalidAttr?null:o.invalidAttr.branchName))),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,3,"BRANCH")," "),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",o.branchName)}}function E(e,t){if(1&e&&i["\u0275\u0275element"](0,"nz-option",42),2&e){var n=t.$implicit;i["\u0275\u0275property"]("nzValue",n)("nzLabel",n)}}function M(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,E,1,2,"nz-option",40),i["\u0275\u0275element"](2,"nz-option",41),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.branchOptions),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzLabel",n.branch)("nzValue",n.branch)}}function P(e,t){if(1&e&&(i["\u0275\u0275element"](0,"i",43),i["\u0275\u0275text"](1)),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.nzLabel," ")}}function I(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",22),i["\u0275\u0275elementStart"](1,"div",23),i["\u0275\u0275element"](2,"i",24),i["\u0275\u0275elementStart"](3,"span",12),i["\u0275\u0275elementStart"](4,"span"),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"span"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"i",25),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,S,8,7,"div",26),i["\u0275\u0275elementStart"](11,"div",27),i["\u0275\u0275elementStart"](12,"div",28),i["\u0275\u0275elementStart"](13,"span",29),i["\u0275\u0275text"](14),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"span",30),i["\u0275\u0275text"](17,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",31),i["\u0275\u0275elementStart"](19,"div",32),i["\u0275\u0275element"](20,"i",33),i["\u0275\u0275text"](21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"nz-select",34),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.sourceBranch=e}),i["\u0275\u0275pipe"](23,"translate"),i["\u0275\u0275template"](24,M,3,3,"ng-container",35),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](25,P,2,1,"ng-template",null,36,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,o=t.index,r=i["\u0275\u0275reference"](26),a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](6,10,"BRANCH_NAME")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](o+1),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","create"===a.linkType),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](16,O,!n.sourceBranch&&(null==n.invalidAttr?null:n.invalidAttr.sourceBranch))),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](15,12,"relate"===a.linkType?"BRANCH":"ORIGIN_BRANCH")," "),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate1"](" ",n.projectName," "),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",i["\u0275\u0275pipeBind1"](23,14,"SELECT_ORIGIN_BRANCH")),i["\u0275\u0275property"]("nzCustomTemplate",r)("ngModel",n.sourceBranch),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",n.branchOptions)}}var k=function(e){return{color:e}},T=function(){function e(e,t,n,i,o){this.emitService=e,this.translate=t,this.modal=n,this.notification=i,this.developmentInfoService=o,this.loading=!1,this.repositories=[],this.repositoryOptions=[]}return e.prototype.ngOnInit=function(){var e=this;this.developmentInfoService.queryRepositories(this.fromItem.domain.id).subscribe(function(t){e.repositoryOptions=t},function(){})},e.prototype.selectChange=function(){var e=this,t=[];this.repositories.forEach(function(n){t.push(n.componentId),e.formatNewBranch(n)}),this.repositoryOptions.forEach(function(e){e.isSelected=t.includes(e.componentId)})},e.prototype.formatNewBranch=function(e){e.branchName||(e.branchName="dev-"+this.fromItem.number,e.sourceBranch=e.branch,this.queryBranches(e))},e.prototype.queryBranches=function(e){e.branchOptions||this.developmentInfoService.queryBranches({gitUrl:e.httpUrl}).subscribe(function(t){e.branchOptions=t},function(){})},e.prototype.confirm=function(){var e=this;this.developmentInfoService.invalidCheck(this.repositories)||(this.loading=!0,this.developmentInfoService.createBranches(this.fromItem,this.repositories,this.linkType).subscribe(function(t){e.loading=!1,t.failed.length?e.notification.error(e.translate.instant("LINKED_FAILED"),e.translate.instant(String(t.failed[0].info.code))):(e.notification.success(e.translate.instant("LINKED_SUCCESS"),"",{nzDuration:1e3}),e.emitService.emit({event:"workitem:link-branch:success"}),e.modal.close("workitem:update:link-branch"))},function(){}),window.hwa("trackStructEvent",{label:"create"===this.linkType?"\u521b\u5efa\u5206\u652f":"\u5173\u8054\u5df2\u6709\u5206\u652f"}))},e.prototype.cancel=function(){this.emitService.emit({event:"workitem:link-branch:cancel"}),this.modal.destroy()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](r.c),i["\u0275\u0275directiveInject"](a.c),i["\u0275\u0275directiveInject"](c.b),i["\u0275\u0275directiveInject"](d))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["link-branch"]],inputs:{fromItem:"fromItem",linkType:"linkType"},decls:35,vars:38,consts:[[1,"link-content"],[1,"link-from"],[1,"m-b-5"],[1,"flex-box","flex-a-c"],[1,"flex-1","text-omit"],[1,"m-r-5",3,"ngStyle","title"],[1,"f-bold","f-15"],[1,"addition-info"],[1,"m-l-3"],["class","m-l-3",4,"ngIf"],[1,"link-to"],[1,"select-project"],[1,"title"],["nzMode","multiple","nzShowSearch","","nzAllowClear","",2,"width","100%",3,"nzPlaceHolder","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["class","branch-info",4,"ngFor","ngForOf"],[1,"link-footer"],["nz-button","","nzType","default",1,"m-r-10",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","disabled","click"],["nzCustomContent","",3,"nzValue","nzLabel"],[1,"cur-pointer"],[1,"iconfont",2,"margin","0 5px 0 15px",3,"ngClass"],[1,"branch-info"],[1,"tip"],[1,"iconfont","icon-branch","txt-666","m-r-5"],[1,"iconfont","icon-trash"],["class","name",4,"ngIf"],[1,"source"],[1,"source-tip"],[1,"m-r-5",3,"ngClass"],[1,"text-danger"],[1,"source-detail"],[1,"source-project"],[1,"iconfont","icon-block","m-r-5"],["nzShowSearch","",1,"source-branch",3,"nzPlaceHolder","nzCustomTemplate","ngModel","ngModelChange"],[4,"ngIf"],["branchTemplate",""],[1,"name"],[1,"name-tip"],["nz-input","",2,"height","32px",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzHide","",3,"nzLabel","nzValue"],[3,"nzValue","nzLabel"],[1,"iconfont","icon-branch","txt-666","m-r-5","f-14"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"div",4),i["\u0275\u0275elementStart"](7,"i",5),i["\u0275\u0275pipe"](8,"iconMap"),i["\u0275\u0275pipe"](9,"colorMap"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"span",6),i["\u0275\u0275text"](11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",7),i["\u0275\u0275elementStart"](13,"span"),i["\u0275\u0275text"](14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"span",8),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,x,2,1,"span",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",10),i["\u0275\u0275elementStart"](19,"div",11),i["\u0275\u0275elementStart"](20,"div",12),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"nz-select",13),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.repositories=e})("ngModelChange",function(){return t.selectChange()}),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275template"](25,_,5,7,"ng-container",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](26,I,27,18,"div",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"div",16),i["\u0275\u0275elementStart"](28,"button",17),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275text"](29),i["\u0275\u0275pipe"](30,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"button",18),i["\u0275\u0275listener"]("click",function(){return t.confirm()}),i["\u0275\u0275pipe"](32,"isEmpty"),i["\u0275\u0275text"](33),i["\u0275\u0275pipe"](34,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,18,"LINKING_BRANCHES_TO_THE_FOLLOWING_WORKS")),i["\u0275\u0275advance"](4),i["\u0275\u0275classMap"](i["\u0275\u0275pipeBind2"](8,20,t.fromItem.category,"workitem_category")),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](36,k,i["\u0275\u0275pipeBind2"](9,23,t.fromItem.category,"workitem_category")))("title",t.fromItem.category),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](t.fromItem.title),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("#",t.fromItem.number,""),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](", \u25cf ",t.fromItem.status,""),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",0!=t.fromItem.owners.length),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](22,26,"RELATE_CODE_BASE")),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("nzPlaceHolder",i["\u0275\u0275pipeBind1"](24,28,"SELECT_CODE_BASE")),i["\u0275\u0275property"]("ngModel",t.repositories),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.repositoryOptions),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.repositories),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](30,30,"COMMON_BUTTON_CANCLE")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("nzLoading",t.loading)("disabled",i["\u0275\u0275pipeBind1"](32,32,t.repositories)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](34,34,"COMMON_BUTTON_CONFIRM")," "))},directives:[p.o,p.n,u.e,m.k,m.l,p.m,h.a,g.a,f.a,u.a,p.l,v.b,m.d],pipes:[r.b,b.a,C.a,y.a],styles:[".link-content[_ngcontent-%COMP%]{background-color:#fff;margin:3px;font-size:14px;color:#666}.link-content[_ngcontent-%COMP%]   .link-from[_ngcontent-%COMP%]{padding:10px 15px;margin-top:3px;border-bottom:1px solid #dedede}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]{padding:10px 15px;margin-top:3px;min-height:300px;max-height:500px;overflow-y:auto}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .select-project[_ngcontent-%COMP%]{margin-bottom:5px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .select-project[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#999;margin-bottom:5px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]{padding:10px;margin-top:5px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]{font-size:13px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]   .icon-development[_ngcontent-%COMP%]{font-size:13px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]   .icon-trash[_ngcontent-%COMP%]{text-align:right;display:none}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:5px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-tip[_ngcontent-%COMP%]{color:#999;margin-bottom:3px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{margin-top:5px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]   .source-tip[_ngcontent-%COMP%]{color:#999;margin-bottom:3px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]   .source-detail[_ngcontent-%COMP%]{display:flex}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]   .source-detail[_ngcontent-%COMP%]   .source-project[_ngcontent-%COMP%]{width:100%;color:#999;cursor:not-allowed;padding:4px 10px;background-color:#f2f2f2;border:1px solid #e0e0e0;margin-right:5px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]   .source-detail[_ngcontent-%COMP%]   .source-project[_ngcontent-%COMP%]   .icon-block[_ngcontent-%COMP%]{font-size:15px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]   .source-detail[_ngcontent-%COMP%]   .source-branch[_ngcontent-%COMP%]{width:100%;margin-left:5px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;border-radius:5px}.link-content[_ngcontent-%COMP%]   .link-to[_ngcontent-%COMP%]   .branch-info[_ngcontent-%COMP%]:hover   .icon-trash[_ngcontent-%COMP%]{display:inline-block}.link-footer[_ngcontent-%COMP%]{position:absolute;margin-top:8px;left:0;width:100%;background:#fff;padding:10px;display:flex;justify-content:flex-end;border-radius:0 0 5px 5px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:4px}"]}),e}(),D=function(){function e(e,t){this.modalService=e,this.translate=t}return e.prototype.showLinkModel=function(e,t){this.modalService.create({nzTitle:this.translate.instant("create"===t?"COMMON_LINK_BRANCH_NEW":"COMMON_LINK_EXIST_BRANCH"),nzContent:T,nzWidth:650,nzComponentParams:{fromItem:e,linkType:t},nzBodyStyle:{"background-color":"#f2f2f2",padding:"8px","border-radius":"0 0 5px 5px"},nzMaskClosable:!1,nzFooter:null})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](a.d),i["\u0275\u0275inject"](r.c))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},tSLD:function(e,t,n){"use strict";n.d(t,"a",function(){return X});var i=n("mrSG"),o=n("fXoL"),r=n("Kj3r"),a=n("/uUt"),c=n("XNiG"),l=n("tk/3"),s=n("lJxs"),d=n("AA4e"),p=function(){function e(e){var t=this;this.http=e,this.getAllSpace=function(e){return t.http.get("/devops-knowledge-management/api/query/note/save_load?save_type="+e).pipe(Object(s.a)(function(e){return e.data}))}}return e.prototype.query_users=function(e){var t={params:(new l.g).set("domainId",e.domainId).set("username",e.username)};return this.http.get("/vision-auth/api/users/all",t).pipe(Object(s.a)(function(e){return e.data}))},e.prototype.query_members=function(e){return this.http.request("get","/vision-platform/api/domains/"+e+"/members").pipe(Object(s.a)(function(e){return e}))},e.prototype.query_group=function(e){var t=e?{params:(new l.g).set("key",e)}:{};return this.http.request("get","/vision-message-center/api/v2/espace/query/group",t).pipe(Object(s.a)(function(e){return e.data}))},e.prototype.share_by_espace=function(e,t){var n={params:(new l.g).set("message_way",t.message_way).set("entity_type",t.entity_type).set("entity_id",t.entity_id)};return this.http.post("/vision-common/api/share/content/espace",e,n).pipe(Object(s.a)(function(e){return e.data}))},e.prototype.queryUsers=function(e){var t=this,n={username:e},i={params:(new l.g).set("username",n.username)};return this.http.get("/vision-platform/api/users",i).pipe(Object(s.a)(function(e){var i=e.data;if(Object(d.o)(i)){var o={params:(new l.g).set("username",n.username)};return t.http.get("/devops-user/api/v1/users/ldap",o).pipe(Object(s.a)(function(e){return e.data}))}return i}))},e.prototype.getAccessUsers=function(e){return this.http.get("/devops-knowledge-management/api/note/editors?id="+e).pipe(Object(s.a)(function(e){return e.data}))},e.prototype.addAccessUsers=function(e,t){return void 0===t&&(t=!0),this.http.post("devops-knowledge-management/api/note/editors?isShared="+t,e).pipe(Object(s.a)(function(e){return e.data}))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](l.c))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),u=n("AytR"),m=n("XIp8"),h=n("b6Qw"),g=n("sYmb"),f=n("bNXi"),v=n("dEAy"),b=n("ofXK"),C=n("1JWf"),y=n("3Pt+"),x=n("PTRe"),w=n("rMZv");function _(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",38),o["\u0275\u0275element"](1,"img",39),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("src","http://w3.huawei.com/w3lab/rest/yellowpage/face/"+n.account+"/45",o["\u0275\u0275sanitizeUrl"])}}function O(e,t){1&e&&o["\u0275\u0275element"](0,"img",40)}function S(e,t){1&e&&o["\u0275\u0275element"](0,"img",41)}function E(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",42),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.workItemAttr(n))}}function M(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",42),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.group_name)}}function P(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",32),o["\u0275\u0275elementStart"](1,"i",33),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=t.index;return o["\u0275\u0275nextContext"](2).removeItem(e,i)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](2,_,2,1,"div",34),o["\u0275\u0275template"](3,O,1,0,"img",35),o["\u0275\u0275template"](4,S,1,0,"img",36),o["\u0275\u0275template"](5,E,2,1,"span",37),o["\u0275\u0275template"](6,M,2,1,"span",37),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.account),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","0"==i.group_type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","1"==i.group_type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.name),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.group_name)}}function I(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",30),o["\u0275\u0275template"](1,P,7,5,"div",31),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.update_owners)}}function k(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",43),o["\u0275\u0275elementStart"](1,"input",44),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().editAccessShare()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](2,"label",45),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("checked",i.isEditAccessShare),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](3,2,"ALLOW_EDITING"))}}function T(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"input",44),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().useInitiateDiscussion()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](2,"label",45),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("checked",i.isInitiateDiscussion),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](3,2,"INITIATE_DISCUSSION_GROUP"))}}function D(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",51),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).backAllList("user")}),o["\u0275\u0275element"](1,"i",52),o["\u0275\u0275elementEnd"]()}}function A(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",53),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=t.index;return o["\u0275\u0275nextContext"](2).selectItem("user",e,i)}),o["\u0275\u0275element"](1,"img",39),o["\u0275\u0275elementStart"](2,"span",54),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"span",55),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate1"]("src","http://w3.huawei.com/w3lab/rest/yellowpage/face/",i.account,"/45",o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",r.workItemAttr(i)," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",i.office_name),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.office_name)}}function z(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",56),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).showMore("user")}),o["\u0275\u0275element"](1,"span",8),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"i",57),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,1,"MORE_CONTACTS")))}function R(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",46),o["\u0275\u0275elementStart"](1,"span",47),o["\u0275\u0275template"](2,D,2,0,"span",48),o["\u0275\u0275element"](3,"span",8),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"ul"),o["\u0275\u0275template"](6,A,6,4,"li",49),o["\u0275\u0275pipe"](7,"slice"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,z,4,3,"div",50),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.showGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,4,"ESPACE_USER_NUMBER")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind3"](7,6,n.availableMembers,0,n.userLimit)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.availableMembers.length>n.userLimit)}}function L(e,t){1&e&&o["\u0275\u0275element"](0,"div",58)}function N(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",51),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).backAllList("group")}),o["\u0275\u0275element"](1,"i",52),o["\u0275\u0275elementEnd"]()}}function j(e,t){1&e&&o["\u0275\u0275element"](0,"img",40)}function V(e,t){1&e&&o["\u0275\u0275element"](0,"img",41)}function F(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",51),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=t.index;return o["\u0275\u0275nextContext"](2).selectItem("group",e,i)}),o["\u0275\u0275template"](1,j,1,0,"img",61),o["\u0275\u0275template"](2,V,1,0,"img",62),o["\u0275\u0275elementStart"](3,"span",54),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","0"==i.group_type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","1"==i.group_type),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.group_name)}}function B(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",56),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).showMore("group")}),o["\u0275\u0275element"](1,"span",8),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"i",57),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,1,"MORE_GROUPS")))}function U(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",59),o["\u0275\u0275elementStart"](1,"span",47),o["\u0275\u0275template"](2,N,2,0,"span",48),o["\u0275\u0275element"](3,"span",8),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"ul"),o["\u0275\u0275template"](6,F,5,3,"li",60),o["\u0275\u0275pipe"](7,"slice"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,B,4,3,"div",50),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.showUser),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,4,"ESPACE_GROUP")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind3"](7,6,n.espaceGroupData,0,n.groupLimit)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.espaceGroupData.length>n.groupLimit)}}function W(e,t){1&e&&o["\u0275\u0275element"](0,"span",73)}function H(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"]("",n.name," ",n.account,"")}}var G=function(){return{x:"100%",y:"215px"}};function q(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",63),o["\u0275\u0275elementStart"](1,"div",64),o["\u0275\u0275elementStart"](2,"span",65),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().showShareList=!1}),o["\u0275\u0275elementStart"](3,"span",66),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,W,1,0,"span",67),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"input",68),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().userListSearch=e})("keyup",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().filterList()}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](9,"i",69),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"nz-table",70,71),o["\u0275\u0275elementStart"](12,"thead"),o["\u0275\u0275elementStart"](13,"tr"),o["\u0275\u0275elementStart"](14,"th"),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"tbody"),o["\u0275\u0275template"](18,H,3,2,"tr",72),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275reference"](11),r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate2"]("",o["\u0275\u0275pipeBind1"](5,10,"SHARED_MEMBER"),"(",r.sharedUserList.length,")"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",r.showShareList),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](8,12,"PLACEHOLDER_SEARCH_BY_NAME"))("ngModel",r.userListSearch),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzData",r.sharedUserListDisplay)("nzShowPagination",!1)("nzScroll",o["\u0275\u0275pureFunction0"](16,G)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,14,"RAT_MEMBER_INFORMATION")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",i.data)}}function $(e,t){1&e&&o["\u0275\u0275element"](0,"i",76)}function K(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",74),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().showUserListFunc()}),o["\u0275\u0275elementStart"](1,"span",66),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,$,1,0,"i",75),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"]("",o["\u0275\u0275pipeBind1"](3,3,"SHARED_MEMBER"),"(",i.sharedUserList.length,")"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!i.showShareList&&i.sharedUserList.length)}}var X=function(){function e(e,t,n,i){var l=this;this.cookieService=e,this.knowledgeService=t,this.translate=n,this.notificationService=i,this.titleDesc=this.translate.instant("SHARE"),this.modelShowCloseChange=new o.EventEmitter,this.update_owners=[],this.result_show=!1,this.availableMembers=[],this.availableMembersInit=[],this.espaceGroupData=[],this.espaceGroupDataInit=[],this.showGroup=!0,this.userLimit=5,this.showUser=!0,this.groupLimit=3,this.userQuestionUpdate=new c.a,this.sendShareFunc=new c.a,this.inputFlag=!0,this.canCreateGroup=!1,this.isInitiateDiscussion=!1,this.isEditAccessShare=!1,this.showShareList=!1,this.userListSearch="",this.sharedUserListDisplay=[],this.sharedUserList=[],this.valueChange=function(e){this.inputFlag&&(this.isEmptyValue(e)?(this.availableMembers=this.availableMembersInit,this.espaceGroupData=this.espaceGroupDataInit,this.showGroup?this.showUser||(this.groupLimit=this.espaceGroupData.length):this.userLimit=this.availableMembers.length):this.getUsers(e))},this.userQuestionUpdate.pipe(Object(r.a)(500),Object(a.a)()).subscribe(function(e){l.valueChange(l.selectValue)})}return e.prototype.closeModal=function(){this.searchValue="",this.modelShowCloseChange.emit(!1)},e.prototype.searchInputFocus=function(){this.result_show=!0},e.prototype.clickOutsideFunc=function(){this.result_show=!1,this.selectValue=""},e.prototype.isEmptyValue=function(e){return null==e||void 0!==e.length&&0===e.length||0===Object.keys(e).length},e.prototype.membersToUsers=function(e){var t=this;e.forEach(function(e){e.user&&(e.user.office_name=null),t.availableMembers.push(e.user),t.availableMembersInit.push(e.user)})},e.prototype.ngOnInit=function(){var e=this;this.currentDomain?this.queryMembers():this.getAllDomains(),this.knowledgeService.query_group(null).subscribe(function(t){e.espaceGroupData=t,e.espaceGroupDataInit=Object(m.a)(t)},function(){}),this.espaceShareContent=void 0,this.queryNoteAccessUsers(),this.espaceShareContent=this.shareTipContent||""},e.prototype.queryNoteAccessUsers=function(){var e=this;"note"===this.shareDetail.category&&this.knowledgeService.getAccessUsers(this.shareDetail.id).subscribe(function(t){var n;e.noteAccessInfo=t,e.sharedUserList=null===(n=null==t?void 0:t.queryAll)||void 0===n?void 0:n.map(function(e){return e.user}),e.sharedUserListDisplay=e.sharedUserList,e.noteAccessInfo.editorsSingle=e.noteAccessInfo.editorsSingle.map(function(e){return e.user.id}),e.noteAccessInfo.groups=e.noteAccessInfo.groups.map(function(e){return e.id})},function(){})},e.prototype.getAllDomains=function(){var e=this;this.knowledgeService.getAllSpace("generate_workitem").subscribe(function(t){t.default_domain&&t.default_domain.id?(e.currentDomain=t.default_domain.id,e.queryMembers()):t.my_related_domains.length>0&&(e.currentDomain=t.my_related_domains[0].id,e.queryMembers())},function(){})},e.prototype.queryMembers=function(){var e=this;this.knowledgeService.query_members(this.currentDomain).subscribe(function(t){e.membersToUsers(t.data.self_members.members)},function(){})},e.prototype.getUsers=function(e){var t=this,n={domainId:this.currentDomain,username:e};this.availableMembers=[],this.knowledgeService.query_users(n).subscribe(function(e){for(var n=function(n){var i=e[n];t.availableMembers.some(function(e){return e.id==i.id})||t.availableMembers.push(i)},i=0;i<e.length;i++)n(i);t.showGroup||(t.userLimit=t.availableMembers.length)},function(){}),this.espaceGroupData=[],this.knowledgeService.query_group(e).subscribe(function(e){for(var n=0;n<e.length;n++){for(var i=e[n],o=!0,r=t.espaceGroupData.length,a=0;a<r;a++)if(i.id==t.espaceGroupData[a].id){o=!1;break}o&&t.espaceGroupData.push(i)}t.showUser||(t.groupLimit=t.espaceGroupData.length)},function(){})},e.prototype.backAllList=function(e){this.showGroup=!0,this.showUser=!0,"user"==e?this.userLimit=5:this.groupLimit=3,this.resetResultShow()},e.prototype.resetResultShow=function(){var e=this;setTimeout(function(){e.result_show=!0},0)},e.prototype.selectItem=function(e,t,n){this.update_owners.some(function(e){return e.id==t.id})||("user"==e?(this.update_owners.unshift(t),this.availableMembers.splice(n,1)):(this.update_owners.push(t),this.espaceGroupData.splice(n,1))),this.selectValue=null,this.canCreateGroup=(!u.a||!u.a.isStandaloneWiki)&&this.checkOnlyContacts()},e.prototype.checkOnlyContacts=function(){if(0==this.update_owners.length)return this.isInitiateDiscussion=!1,!1;for(var e=this.update_owners.length-1;e>=0;e--)if(this.update_owners[e].group_name)return this.isInitiateDiscussion=!1,!1;return!0},e.prototype.workItemAttr=function(e){return this.isEmptyValue(e)?null:"en"==this.translate.currentLang&&e.name_full?e.name_full:e.name+" "+e.account},e.prototype.getIt=function(e){},e.prototype.showMore=function(e){"user"==e?(this.userLimit=this.availableMembers.length,this.showGroup=!1):(this.groupLimit=this.espaceGroupData.length,this.showUser=!1),this.resetResultShow()},e.prototype.removeItem=function(e,t){this.update_owners.splice(t,1),this.canCreateGroup=(!u.a||!u.a.isStandaloneWiki)&&this.checkOnlyContacts(),e.group_name?this.espaceGroupData.unshift(e):this.availableMembers.unshift(e)},e.prototype.useInitiateDiscussion=function(){this.isInitiateDiscussion=!this.isInitiateDiscussion},e.prototype.editAccessShare=function(){this.isEditAccessShare=!this.isEditAccessShare},e.prototype.createPush=function(){var e,t,n,o,r=this,a={id:this.shareDetail.id,type:this.shareDetail.type,category:this.shareDetail.category,number:this.shareDetail.number||"",entity_type:this.shareDetail.entity_type||this.shareDetail.type},c={remark:this.espaceShareContent,receivers:[],group_ids:[],url:this.getUrl(a,this.espaceParams)};this.update_owners.forEach(function(e){e.group_name?c.group_ids.push(e.id):c.receivers.push({id:e.id,username:e.username})});var l={message_way:this.isInitiateDiscussion?"create_group":"single",entity_type:"",entity_id:""};if(a&&(l.entity_type=a.entity_type,l.entity_id=a.id),this.espaceParams&&(c=Object(i.a)(Object(i.a)({},c),this.espaceParams)),this.knowledgeService.share_by_espace(c,l).subscribe(function(e){r.closeModal(),e?r.notificationService.success(r.translate.instant("SUCCESS_TO_SAND"),""):r.notificationService.error(r.translate.instant("FAILED_TO_SAND"),"")},function(){}),"note"===this.shareDetail.category){var s={id:this.shareDetail.id,editors:(null!==(t=null===(e=this.noteAccessInfo)||void 0===e?void 0:e.editorsSingle)&&void 0!==t?t:[]).concat(this.update_owners.filter(function(e){return!e.group_name}).map(function(e){return e.id})),groupIds:(null!==(o=null===(n=this.noteAccessInfo)||void 0===n?void 0:n.groups)&&void 0!==o?o:[]).concat(this.update_owners.filter(function(e){return e.group_name}).map(function(e){return e.id}))};this.isEditAccessShare||(s.authority="query"),this.knowledgeService.addAccessUsers(s).subscribe(function(e){},function(){})}},e.prototype.getUrl=function(e,t){void 0===t&&(t={comment_id:0,content_id:0});var n=e.id,i=e.number,o=t.comment_id,r=t.content_id,a=this.sn;return{Feature:this.isDocDesignReview?location.origin+"/workitem/"+i+"?docDesignReview=true":location.origin+"/workitem/"+i,Story:location.origin+"/workitem/"+i,Epic:location.origin+"/workitem/"+i,Task:location.origin+"/workitem/"+i,TaskGroup:location.origin+"/workitem/"+i,doc:location.origin+"/wiki/"+a+"?shared_by="+this.currentUserId,document:location.origin+"/wiki/"+a+"?shared_by="+this.currentUserId,table:location.origin+"/wiki/"+a+"?shared_by="+this.currentUserId,"doc-comment":location.origin+"/wiki/"+a+"?comment="+o+"_"+this.currentUserId,note:location.origin+"/noteShare/"+a,"01001001-des":location.origin+"/#/raw/"+n,"02001001-des":location.origin+"/#/dev/"+n,"02001003-des":location.origin+"/#/dev/"+n,"04000001-des":location.origin+"/#/bug/"+n,"04000002-des":location.origin+"/#/bug/"+n,"02001001-doc":location.origin+"/#/dev/"+n+"?content_id="+r,"02001003-doc":location.origin+"/#/dev/"+n+"?content_id="+r,"01001001-doc":location.origin+"/#/raw/"+n+"?content_id="+r,"01001001-comment":location.origin+"/#/raw/"+n+"?comment_id="+o,"02001001-comment":location.origin+"/#/dev/"+n+"?comment_id="+o,"02001003-comment":location.origin+"/#/dev/"+n+"?comment_id="+o,"04000002-comment":location.origin+"/#/bug/"+n+"?comment_id="+o,"04000001-comment":location.origin+"/#/bug/"+n+"?comment_id="+o,"workitem-review":location.origin+"/workitem/"+i+"?docDesignReview=true"}[e.category]},e.prototype.ngAfterViewInit=function(){setTimeout(function(){document.getElementById("focusMove").blur()},100)},e.prototype.showUserListFunc=function(){this.sharedUserList.length&&(this.showShareList=!0)},e.prototype.filterList=function(){var e=this;this.sharedUserListDisplay=this.sharedUserList.filter(function(t){return t.name.includes(e.userListSearch)||t.account.includes(e.userListSearch)})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](p),o["\u0275\u0275directiveInject"](g.c),o["\u0275\u0275directiveInject"](f.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["espace-share"]],inputs:{shareDetail:"shareDetail",espaceParams:"espaceParams",shareTipContent:"shareTipContent",isDocDesignReview:"isDocDesignReview",titleDesc:"titleDesc",currentDomain:"currentDomain",sn:"sn",currentUserId:"currentUserId"},outputs:{modelShowCloseChange:"modelShowCloseChange"},features:[o["\u0275\u0275ProvidersFeature"]([p])],decls:37,vars:32,consts:[["nzCalssName","modal-styl","id","share-content-wrapper",3,"nzVisible","nzClosable","nzFooter","nzWidth"],[1,"share-content"],[1,"share-content-header"],[1,"f-18",3,"textContent"],[1,"iconfont","icon-close","cursor-pointer","position-a","user-tip-close",3,"click"],[1,"share-content-body"],[1,"send-user"],[1,"p-b-5"],[3,"textContent"],["class","espace-list",4,"ngIf"],[1,"p-t-0","p-b-15","checkbox",2,"padding-left","20px"],["class","more-right-checkbox",4,"ngIf"],[4,"ngIf"],["clickElementOutside","",1,"espace-search-box","position-r",3,"clickOutside"],[1,"espace-search-input"],[1,"fa","fa-search","fa-fw","cursor-pointer"],["id","focusMove","type","search","autocomplete","off","autocorrect","off","autocapitalize","off","autofocus","false",3,"placeholder","ngModel","ngModelChange","focus","compositionend","compositionstart"],[1,"position-a","f-12",2,"width","100%","z-index","1",3,"hidden"],[1,"espace-search-result"],["class","p-10 ","style","padding-bottom: 0;",4,"ngIf"],["style","height: 10px;background-color:#f0f0f0;",4,"ngIf"],["class","p-10",4,"ngIf"],[1,"m-t-20",2,"margin-bottom","30px"],[1,"req-key","p-b-5",3,"textContent"],[1,"txt-l","p-l-n"],["rows","6",1,"ant-input-styl",3,"placeholder","ngModel","ngModelChange"],["class","share-user-list",4,"ngIf"],[1,"share-content-footer"],["class","left-span",3,"click",4,"ngIf"],["type","button","ng-disabled","!update_owners.length",1,"btn","btn-primary",2,"padding","1px 6px",3,"textContent","click"],[1,"espace-list"],["class","m-r-10 position-r",4,"ngFor","ngForOf"],[1,"m-r-10","position-r"],[1,"user-tip-close","iconfont","icon-close","cursor-pointer","position-a","remov-item",3,"click"],["class","session-profile display-inline",4,"ngIf"],["width","24","height","24","class","session-profile display-inline","src","/knowledge-ui/assets/imgs/espace_group.png",4,"ngIf"],["width","24","height","24","class","session-profile display-inline","src","/knowledge-ui/assets/imgs/espace_message.png",4,"ngIf"],["class","m-l-10 box-inline text-omit",4,"ngIf"],[1,"session-profile","display-inline"],["alt","",1,"concat-img",3,"src"],["width","24","height","24","src","/knowledge-ui/assets/imgs/espace_group.png",1,"session-profile","display-inline"],["width","24","height","24","src","/knowledge-ui/assets/imgs/espace_message.png",1,"session-profile","display-inline"],[1,"m-l-10","box-inline","text-omit"],[1,"more-right-checkbox"],["type","checkbox",1,"pointer-cursor",3,"checked","click"],[1,"env-option-label","f-13",3,"textContent"],[1,"p-10",2,"padding-bottom","0"],[1,"p-b-5",2,"display","block","color","#b3b2b2"],["class","cursor-pointer ",3,"click",4,"ngIf"],["class","cursor-pointer flex-box",3,"click",4,"ngFor","ngForOf"],["class","cursor-pointer f-14 ","style","padding: 8px 0;",3,"click",4,"ngIf"],[1,"cursor-pointer",3,"click"],[1,"fa","fa-reply"],[1,"cursor-pointer","flex-box",3,"click"],[1,"m-l-10"],[1,"pull-right","office_name","m-l-10","flex-1",3,"title"],[1,"cursor-pointer","f-14",2,"padding","8px 0",3,"click"],[1,"fa","m-r-3","fa-angle-right","pull-right","f-20"],[2,"height","10px","background-color","#f0f0f0"],[1,"p-10"],["class","cursor-pointer ",3,"click",4,"ngFor","ngForOf"],["width","24","height","24","class","session-profile display-inline ","src","/knowledge-ui/assets/imgs/espace_group.png",4,"ngIf"],["width","24","height","24","class","session-profile display-inline ","src","/knowledge-ui/assets/imgs/espace_message.png",4,"ngIf"],[1,"share-user-list"],[1,"share-list-header"],[1,"flex-2",3,"click"],[1,"m-r-5"],["class","iconfont icon-arrow-up",4,"ngIf"],["nz-input","",1,"flex-1",3,"placeholder","ngModel","ngModelChange","keyup"],[1,"iconfont","icon-search","input-search-styl"],[3,"nzData","nzShowPagination","nzScroll"],["userTable",""],[4,"ngFor","ngForOf"],[1,"iconfont","icon-arrow-up"],[1,"left-span",3,"click"],["class","iconfont icon-icon-crown",4,"ngIf"],[1,"iconfont","icon-icon-crown"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nz-modal",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275element"](3,"span",3),o["\u0275\u0275elementStart"](4,"i",4),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",5),o["\u0275\u0275elementStart"](6,"div",6),o["\u0275\u0275elementStart"](7,"div",7),o["\u0275\u0275element"](8,"span",8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementStart"](10,"span"),o["\u0275\u0275text"](11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,I,2,1,"div",9),o["\u0275\u0275elementStart"](13,"div",10),o["\u0275\u0275template"](14,k,4,4,"div",11),o["\u0275\u0275template"](15,T,4,4,"div",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",13),o["\u0275\u0275listener"]("clickOutside",function(){return t.clickOutsideFunc()}),o["\u0275\u0275elementStart"](17,"div",14),o["\u0275\u0275element"](18,"i",15),o["\u0275\u0275elementStart"](19,"input",16),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectValue=e})("focus",function(){return t.searchInputFocus()})("compositionend",function(){return t.inputFlag=!0})("compositionstart",function(){return t.inputFlag=!1})("ngModelChange",function(e){return t.userQuestionUpdate.next(e)}),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",17),o["\u0275\u0275elementStart"](22,"div",18),o["\u0275\u0275template"](23,R,9,10,"div",19),o["\u0275\u0275template"](24,L,1,0,"div",20),o["\u0275\u0275template"](25,U,9,10,"div",21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"div",22),o["\u0275\u0275element"](27,"div",23),o["\u0275\u0275pipe"](28,"translate"),o["\u0275\u0275elementStart"](29,"div",24),o["\u0275\u0275elementStart"](30,"textarea",25),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.espaceShareContent=e}),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](32,q,19,17,"div",26),o["\u0275\u0275elementStart"](33,"div",27),o["\u0275\u0275template"](34,K,5,5,"span",28),o["\u0275\u0275elementStart"](35,"button",29),o["\u0275\u0275listener"]("click",function(){return t.createPush()}),o["\u0275\u0275pipe"](36,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",552),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",t.titleDesc),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](9,22,"SHARE_WITH")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"]("("+t.update_owners.length+")"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.update_owners.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.update_owners.length&&"note"===t.shareDetail.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.canCreateGroup),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](20,24,"SHARE_SEARCH_PLACEHOLDER"))("ngModel",t.selectValue),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",!t.result_show),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.showUser&&t.availableMembers.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showUser&&t.availableMembers.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showGroup&&t.espaceGroupData.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](28,26,"ESPACE_MESSAGE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](31,28,"KNOWLEDGE_BASE_COMMENT_PLACEHOLDER"))("ngModel",t.espaceShareContent),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.showShareList&&(null==t.sn?null:t.sn.startsWith("NOTE"))),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.showShareList&&(null==t.sn?null:t.sn.startsWith("NOTE"))),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](36,30,"ESPACE_SEND")))},directives:[v.a,b.n,C.a,y.d,y.k,y.l,b.m,x.b,w.c,w.h,w.i,w.b,w.g,w.e],pipes:[g.b,b.v],styles:['.ant-modal-body{padding:0}.share-content[_ngcontent-%COMP%]{position:relative;background-color:#fff;background-clip:padding-box;border:0;border-radius:4px;box-shadow:0 4px 12px rgba(0,0,0,.15);pointer-events:auto;min-height:400px;width:552px}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]{padding:16px 24px;color:rgba(0,0,0,.65);background:#fff;border-bottom:1px solid #e5e5e5;border-radius:4px 4px 0 0;position:relative}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]   .f-18[_ngcontent-%COMP%]{font-size:18px}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]   .user-tip-close[_ngcontent-%COMP%]{font-size:16px;right:20px;top:16px}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]{padding:24px 24px 0;font-size:14px;line-height:1.5;word-wrap:break-word}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .p-b-5[_ngcontent-%COMP%]{padding-bottom:5px}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-input[_ngcontent-%COMP%]{border:1px solid #d9d9d9;width:100%;display:flex;padding:3px;border-radius:3px}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-input[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:30px;height:25px;line-height:25px;color:#d9d9d9}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;outline:none;border:none}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result[_ngcontent-%COMP%]{width:100%;border:1px solid #d9d9d9;border-top:none;background-color:#fff;z-index:1;max-height:410px;height:100%;overflow-y:scroll}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{height:30px;background:#999;width:16px;border-radius:8px}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result[_ngcontent-%COMP%]::-webkit-scrollbar-track{display:none}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{display:flex}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   .more-right-checkbox[_ngcontent-%COMP%]{margin-right:40px}.user-photo[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%}.office_name[_ngcontent-%COMP%], .user-photo[_ngcontent-%COMP%]{display:inline-block;overflow:hidden}.office_name[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;max-width:370px;text-align:right;color:#b3b2b2}textarea.ant-input-styl[_ngcontent-%COMP%]{max-width:100%;height:auto;min-height:128px;line-height:1.5;vertical-align:bottom;transition:all .3s,height 0s;resize:none;outline:none;border-color:#d9d9d9!important}textarea.ant-input-styl[_ngcontent-%COMP%]:focus, textarea.ant-input-styl[_ngcontent-%COMP%]:hover{border-color:#23c6c8!important}.ant-input-styl[_ngcontent-%COMP%]{padding:0 5px;box-sizing:border-box;margin:0;font-variant:tabular-nums;list-style:none;font-feature-settings:"tnum";position:relative;display:inline-block;width:100%;height:32px;color:rgba(0,0,0,.65);font-size:14px;line-height:1.5;background-color:#fff;background-image:none;border:1px solid #d9d9d9;border-radius:4px;transition:all .3s}.espace-list[_ngcontent-%COMP%]{padding:10px 0;max-height:125px;overflow:auto;margin-bottom:15px}.espace-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;align-items:center;display:flex;float:left;height:34px}.espace-list[_ngcontent-%COMP%]:after{content:"";display:block;clear:both}.espace-list[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;display:inline-block;width:13px;height:13px;background-color:#e35263;border-radius:50%;text-align:center;line-height:13px;top:1px;left:20px;padding:0 1px;font-size:12px!important}.text-omit[_ngcontent-%COMP%]{word-break:break-all;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.concat-img[_ngcontent-%COMP%]{height:24px;width:24px;border-radius:50%}.espace-search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:4px 0;line-height:30px;border-bottom:1px solid #e5e5e5}.espace-search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#f2f2f2;cursor:pointer}li[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{padding:0;margin:0;list-style-type:none}.share-content-footer[_ngcontent-%COMP%]{padding:0 24px 20px;text-align:right;position:relative}.share-content-footer[_ngcontent-%COMP%]   .left-span[_ngcontent-%COMP%]{position:absolute;left:24px}.share-content-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px!important}.btn-primary.btn-outline.c-btn-line[_ngcontent-%COMP%]:after{background-color:#1ab394}.btn-primary.btn-outline.c-btn-border-line.success[_ngcontent-%COMP%]:before{border-bottom-color:#1ab394;border-left-color:#1ab394}.btn-primary.btn-outline.c-btn-border-line.success[_ngcontent-%COMP%]:after{border-top-color:#1ab394;border-right-color:#1ab394}.share-user-list[_ngcontent-%COMP%]{padding:0 24px 24px;width:100%}.share-list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:relative}.share-list-header[_ngcontent-%COMP%]   .flex-2[_ngcontent-%COMP%]{flex:2}.share-list-header[_ngcontent-%COMP%]   .flex-1[_ngcontent-%COMP%]{flex:1}.input-search-styl[_ngcontent-%COMP%]{font-size:16px;position:absolute;right:8px;top:calc(50% - 11px)}  .share-user-list .ant-input{height:24px}  .share-user-list .ant-table tfoot>tr>td,   .share-user-list .ant-table tfoot>tr>th,   .share-user-list .ant-table-tbody>tr>td,   .share-user-list .ant-table-thead>tr>th{padding:8px 16px}']}),e}()},teTe:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n("mrSG"),o=n("lJxs"),r=n("UXun"),a=n("XIp8"),c=n("HI9p"),l=n("hjf3"),s=n("fujP"),d=n("z4NU"),p=n("AA4e"),u={RR:{url:"/vision-workitem/api/workitems/batch_distribution",method:"POST",body:[],params:{}},Workitem:{url:"/devops-workitem/api/v1/workitem",method:"POST",body:[],params:{}}},m={url:"",method:"GET",params:{}},h={RR:{url:"",method:"POST",body:[],params:{group:"req_analysis_group"}},Story:m,Task:m,TaskGroup:m,Feature:m,Epic:m},g={entityType:"SELECT_WORKITEM_TYPE",title:"ENTER_TITLE",owner:"TERM_OWNER_SELECT",priority:"SELECT_PRIORITY",deadline:"SELECT_DATE",domain:"DOMAIN_SELECTOR_TITLE_ISSUE_ASSIGNED_DOMAIN",microservice:"DOMAIN_SELECTOR_TITLE_MICROSERVICE",test_owner:"DOMAIN_SELECTOR_TITLE_TEST_OWNER",feature_set:"SELECT_FEATURE_SET",service_feature:"SELECT_SERVICE_FEATURE"},f=["entityType","title","domain","owner"],v={RR:["entityType","title","domain","owner","deadline","priority"],Story:f,Task:f,TaskGroup:f,Feature:f,Epic:f},b={getFormatMember:function(e){return e.data.self_members.members.map(function(e){return e.user})},buildReqConfig:function(e){h[e.category].url="/vision-platform/api/domains/"+(e.domain.id||e.domain.domain_id)+"/members"}},C={RR:{getFormatMember:function(e,t){var n=Object.keys(e.data)[0];return e.data[n].map(function(e){return"Leader"===e.type&&(t.owner=e.user),e.user})},buildReqConfig:function(e){h[e.category].url="/vision-platform/api/domains/"+e.domain.id+"/group-members/batch",h[e.category].body=[e.domain.id]}},Story:b,Task:b,TaskGroup:b,Feature:b,Epic:b},y=n("AWuS"),x=n("fXoL"),w=n("tk/3"),_=n("sYmb"),O=n("bNXi"),S=function(){function e(e,t,n){this.http=e,this.translate=t,this.notification=n,this.currentWorkitemLinks={parent:[],children:[],prefix_relation:[],suffix_relation:[],support_relation:[],depend_relation:[],derive_from:[],derive_to:[],service_requirement:[],service_bug:[],service_wiki:[],association_relation:[],distribute_requirement:[],linkFeature:[]},this.workitemMicroserviceCache={}}return e.prototype.getCollaborationDomains=function(e,t,n){return this.http.get("/devops-cooperate-config/api/v1/domain/collaboration/config",{params:{domainId:String(e),linkFrom:t,linkTo:n}}).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.queryDomainMembers=function(e){var t=C[e.category];return"function"==typeof t.buildReqConfig&&t.buildReqConfig(e),this.getRequest(h[e.category]).pipe(Object(o.a)(function(t){return C[e.category].getFormatMember(t,e)}))},e.prototype.formatFromItem=function(e){e.entity_type=e.type||d.c[e.category]||e.entity_type,e.entity_category=d.g[e.category]||e.category,e.field=e.field||null},e.prototype.getLinkConfig=function(e){return this.http.post("/devops-cooperate-config/api/v1/query/link/config",{domain_id:e.domain.id,type:e.type,link_from:e.entity_category,from_filed:e.field,scene:e.scene}).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.formatCollaborationDomains=function(e){e.forEach(function(e){e.workitem_status_map=e.workitem_category.reduce(function(e,t){return e[t.category]=t.workitem_status_category,e},{})})},e.prototype.getRequest=function(e){switch(e.method){case"GET":return this.http.get(e.url,{params:e.params});case"POST":return this.http.post(e.url,e.body,{params:e.params});case"PUT":return this.http.put(e.url,e.body,{params:e.params})}},e.prototype.labelRequest=function(e){return this.getRequest(e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.linkCountCheck=function(e){var t=this,n=Object(a.a)(e);return n.forEach(function(e){e.groupType.forEach(function(e){var n=e.link_type[0];n.quantity_limit.includes("to-1")?(e.valid=0===t.currentWorkitemLinks[n.value].length,n.tips=e.valid?n.tips:"WORKITEM_LINK_HAS_SUPPORT"):e.valid=!0})}),n},e.prototype.makeNewItem=function(e,t){var n=this.getFirstValidEntity.bind(this),i=this.buildLinkType.bind(this);return new function(){this.title="",this.start_time="",this.deadline="",this.type="",this.service_iteration="",this.owner=null,this.isShowModal={members:!1,domains:!1,labels:!1,microservice:!1,featureSet:!1,release_plans:!1,availableFeatureSet:!1},this.showMore=!1,this.labels=[],this.availableLabels=[],this.workload_man_day="",this.workload_man_month="",this.priority="",this.health_degree="02002001",this.availiableMicroservice=[],this.microservice=[],this.created_by={},this.description={desc:"",descriptionUiSource:"rich-text"},this.newTemplate="",this.oldTemplate="",this.newDescriptionUiSource="",this.newIndex=0,this.availableSimpleIteration=[],this.relateToInterationList=[],this.availableReleasePlans=[],this.enableSF=!1,this.entityTypeOptions=Object(p.e)(t),this.entityType=n(this.entityTypeOptions),i(this),this.entityType&&(this.category=this.entityType.link_to.category)}},e.prototype.getFirstValidEntity=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i].groupType.filter(function(e){return e.valid});n=n.concat(o)}return n.length<1?null:n.find(function(e){return e.link_to.category===t})||n[0]},e.prototype.buildLinkType=function(e){e.entityType&&(e.linkType=e.entityType.link_type[0].value)},e.prototype.beforeSelectUser=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return[4,e.domain_members];case 1:return t=n.sent(),e.owner&&e.owner.id?this.beSelectedOrNot(t,e.owner.id):this.notSelect(t),[2]}})})},e.prototype.beSelectedOrNot=function(e,t){(e||e.length)&&(e.forEach(function(e){e.isSelected=e.id===t}),e.sort(function(e,t){return e.isSelected&&!t.isSelected?-1:1}))},e.prototype.notSelect=function(e){(e||e.length)&&e.forEach(function(e){e.isSelected=!1})},e.prototype.selectUser=function(e,t){t.owner=e.isSelected?e:null,t.isShowModal.members=!1},e.prototype.removeLabel=function(e,t){var n=Object(c.a)(e.labels,{id:t.id});n>=0&&e.labels.splice(n,1)},e.prototype.handleLabelItemClick=function(e,t){if(e.isSelected)t.labels.push(e);else{var n=Object(c.a)(t.labels,{id:e.id});t.labels.splice(n,1)}},e.prototype.createTask=function(e,t,n){return Object(i.b)(this,void 0,void 0,function(){var r,a,c=this;return Object(i.e)(this,function(i){return r=[],Object.keys(u).forEach(function(e){u[e].body=[]}),(a=t.every(function(t){var i;t.deadline=Object(p.h)(t.deadline,"yyyy-MM-dd"),"RR"===t.category?(i=c.buildDisbuteRR(t,e),r=["RR"]):(i=c.buildWorkitemData(t,e,n),r=["Workitem"]);var o=Object(p.l)();return Object(p.o)(o)||(i.operate_scene=o),a=c.checkAttributes(v[t.category],t,e),u["RR"===t.category?"RR":"Workitem"].body.push(i),a}))?[2,r.map(function(e){return c.getRequest(u[e]).pipe(Object(o.a)(function(e){return e.data})).toPromise().catch(function(e){Object(y.b)(e)})})]:[2,null]})})},e.prototype.buildDisbuteRR=function(e,t){var n,i,o=e.labels.map(function(e){return e.bg_color=e.color,delete e.color,e});return{title:e.title,category:"01001001",original_domain:{id:t.domain.id,title:t.title,category:"Domain"},priority:e.priority,health_degree:e.health_degree,related:{id:t.id,category:t.category,number:t.number},owners:[e.owner],description:e.description.desc,text_format:"markdown"===e.description.descriptionUiSource?"Markdown":"RTF",labels:o,req_expected_online_date:e.deadline,created_by:e.created_by,assigned_domain:{category:"Domain",id:null===(n=e.domain)||void 0===n?void 0:n.id,title:null===(i=e.domain)||void 0===i?void 0:i.title},workload_man_month:e.workload_man_month,workload_man_day:e.workload_man_day}},e.prototype.buildWorkitemData=function(e,t,n){var i=e.domain.workitem_status_map[e.category][0].status_id,o={title:e.title,domain_id:e.domain.domain_id,from_domain_id:t.domain.id,category:e.entityType&&e.entityType.link_to.categoryId,status:i,kanban:i,created_by:{id:n},owners:e.owner?[{id:e.owner.id}]:[],test_owners:Object(p.o)(e.test_owner)?[]:[{id:e.test_owner.id}],start_time:e.start_time?Object(p.h)(e.start_time,"yyyy-MM-dd hh:mm"):null,deadline:e.deadline?Object(p.h)(e.deadline,"yyyy-MM-dd hh:mm"):null,operate_scene:t.operate_scene||null};return this.buildMoreAttrParam(o,e,t),["Feature"].includes(e.entityType.link_to.category)&&(Object(p.o)(e.releasePlan)||(o.release_plans=e.releasePlan.map(function(e){return e.number}),o.iterations=Object(l.a)(e.releasePlan.map(function(e){return e.simpleIteration.map(function(e){return e.iteration_id})}))),o.classify=e.classify?e.classify.key:null),"workitem"===t.entity_type&&"ServiceFeature"!==t.category?(o.link={from_workitem_id:t.id,from_workitem_number:t.number,link_type:e.linkType},"Epic"===t.category&&(o.link.from_filed=t.field||null)):"baseline"!==t.entity_type&&(o["service_"+t.entity_type]={id:t.id,category:t.category,number:t.number||t.sn}),o},e.prototype.buildMicroservice=function(e){return e.map(function(e){return{csbi_sn:e.csbi_sn,id:e.id,name:e.name}})},e.prototype.buildExtendAttr=function(e,t){var n=Object(p.e)(t);return n.attr_value=e,n},e.prototype.buildMoreAttrParam=function(e,t,n){if(e.documents=[{category:"description",content:t.description.desc,ui_source:"rich-text"===t.description.descriptionUiSource?1:0}],e.labels=t.labels,e.workload_man_day=t.workload_man_day,e.workload_man_month=t.workload_man_month,e.systemAttr=t.priority?[Object(i.a)(Object(i.a)({},t.systemAttrConfigPriority),{fieldValue:[t.priority]})]:[],e.attribution_microservice=t.microservice?this.buildMicroservice(t.microservice):[],t.feature_set){var o=t.feature_set,r=o.id,a=o.number;e[t.enableSF?"service_feature":"feature_set"]=t.enableSF?{from_workitem_id:r,from_workitem_number:a,link_type:"service_feature_child"}:{to_workitem_id:r,to_workitem_number:a,link_type:"feature_set_parent"}}t.parent_workitem&&(e.parent_workitem=t.parent_workitem.number),"ServiceFeature"===n.category&&(e.service_feature={from_workitem_id:n.id,from_workitem_number:n.number,link_type:t.linkType}),"Task"===t.entityType.link_to.category&&t.attrs&&(e.extend_attr=[this.buildExtendAttr(t.attrs,t.workitemClassify)],e.field="\u5f00\u53d1"===t.attrs.enum_value?"dev":"not_dev"),["Task","TaskGroup","Story"].includes(t.entityType.link_to.category)&&t.service_iteration&&(e.iterations=[t.service_iteration.iteration_id])},e.prototype.checkAttributes=function(e,t,n){var o=this,r=[],a={attribution_microservice:"microservice"};Object(p.o)(t.necessary)||Object.keys(t.necessary).forEach(function(e){r.push(a[e]||e)});var c=Object(i.i)(e,r);if("ServiceFeature"===n.category){var l=c.findIndex(function(e){return"feature_set"===e});c.splice(l,1)}return c.every(function(e){var n=!0;return Object(p.o)(t[e])&&(o.notification.error(o.translate.instant(g[e="feature_set"===e&&t.enableSF?"service_feature":e]),""),n=!1),n})},e.prototype.getTimeWarning=function(e){return this.http.post("/devops-workitem/api/v1/workitem/check/timewarning",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.initPriorities=function(){return["02003001","02003002","02003003","02003004"]},e.prototype.queryMicroservice=function(e,t,n){if(this.workitemMicroserviceCache[e])return this.workitemMicroserviceCache[e];var i=this.http.get("/vision-platform/api/domains/query/"+e+"/components?need_fuxi_id="+t,{params:n}).pipe(Object(o.a)(function(e){return e.data}),Object(r.a)(1));return this.workitemMicroserviceCache[e]=i,i},e.prototype.getSystemConfigByField=function(e,t,n,i){return this.http.get("/devops-cooperate-config/api/v1/query/workitem/system_field/config",{params:{domainId:e,type:t,category:n,field:i}}).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.initAvailiableClassifies=function(e){var t=this;return e.map(function(e){return{id:e.id,key:e.enum_value,title:t.translate.instant(e.enum_value.toUpperCase()),desc:t.translate.instant(e.enum_value.toUpperCase()+"_DESC")}})},e.prototype.getAvailablePlans=function(e){return this.http.post("/devops-plan/api/v1/query/plans",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.queryAvailableIterations=function(e){return this.http.get("/devops-plan/api/v1/query/link/plans",{params:e}).pipe(Object(o.a)(function(e){return e.data}),Object(r.a)(1))},e.prototype.queryReleasePlans=function(e){return this.getAvailablePlans([{key:"status",value:["undone"]},{key:"simple_mode",value:[!0]},{key:"category",value:["release_plan"]},{key:"assigned_domain",value:[e]}])},e.prototype.queryAvailableSprints=function(e,t){var n=[{key:"status",value:["undone"]},{key:"category",value:["iteration"]},{key:"simple_mode",value:[!0]},{key:"assigned_domain",value:[e.domain.domain_id]}];return t&&n.push({key:"plans",value:[{number:t.number,category:"release_plan"}]}),this.getAvailablePlans(n)},e.prototype.buildNewItemAttrs=function(e,t){var n={};switch(e.category){case"Task":n.minor=["workload","lable"],n.major=e.attrs&&"dev"===e.attrs.field?["domain","owner","during","iteration","taskType","microservice"]:["domain","owner","during","iteration","taskType"];break;case"Story":n={major:["domain","owner","deadline","iteration","testOwner","microservice"],minor:["01001001","RR"].includes(t)&&!e.enableSF?["workload","lable","parent_workitem"]:["workload","lable"]};break;case"TaskGroup":n={major:["domain","owner","deadline","iteration"],minor:["workload","lable"]};break;case"Feature":(n={major:["domain","owner","deadline","testOwner"],minor:["classify","workload","lable"]}).major=n.major.concat("ServiceFeature"===t?["releasePlan"]:["feature_set","releasePlan"]);break;case"Epic":n={major:["domain","owner","deadline"],minor:["lable","workload"]}}e.systemAttrConfigPriority&&n.minor.push("priority"),e.attrList=n},e.prototype.formatSystemExtendAttrs=function(e,t){var n=this,i={domain_id:e.domain.id,type:"workitem",category:t.entityType.link_to.categoryId,from_filed:null,link_from:e.entity_category,link_type:e.entity_type,link_relation:t.linkType,to_filed:t.entityType.link_type[0].to_filed};return new Promise(function(o,r){try{n.querySystemExtendAttrs(i).subscribe(function(i){t.workitemClassify=i.find(function(e){return"\u7c7b\u578b"===e.attr_name}),n.fillDefaultType(t,e),o(t)})}catch(a){r(a)}})},e.prototype.fillDefaultType=function(e,t){if(!Object(s.a)(e.workitemClassify)&&!Object(s.a)(e.workitemClassify.enum_attr)){var n=e.workitemClassify.enum_attr[0];if("COE"===t.entity_category){var i=Object(c.a)(e.workitemClassify.enum_attr,{enum_value_key:"WORKITEM_TYPE_NON-DEV"});-1!==i&&(n=e.workitemClassify.enum_attr[i])}e.attrs=n}},e.prototype.querySystemExtendAttrs=function(e){return this.http.post("/devops-cooperate-config/api/v1/query/sys/extend/attrs",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.buildAvailableLabels=function(e,t){return p.a.isEmptyValue(e)?[]:(t=[],e.forEach(function(e){t.push(Object(i.a)({color:e.bg_color,readOnly:!0},e))}),t)},e.prototype.getSystemAttrConfig=function(e,t){return Object(i.b)(this,void 0,void 0,function(){var n,o,r;return Object(i.e)(this,function(i){switch(i.label){case 0:if(t.systemAttrConfigPriority="",t.systemPriorityOption=[],t.priority="",Object(p.o)(t.domain))return[2];n={type:"workitem",domainId:t.domain.domain_id,category:t.entityType.link_to.category},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.systemAttrConfig(n).toPromise()];case 2:return(o=i.sent())&&(t.systemAttrConfigPriority=o.find(function(e){return"priority"===e.field}),t.systemAttrConfigPriority&&(t.systemPriorityOption=t.systemAttrConfigPriority.fieldValue,this.copyPriority(e,t))),[3,4];case 3:return r=i.sent(),Object(y.b)(r),[3,4];case 4:return[2]}})})},e.prototype.copyPriority=function(e,t){var n;switch(e.entity_type){case"workitem":(null===(n=e.sysPriority)||void 0===n?void 0:n.sysAttrEnum[0])&&(t.priority=t.systemPriorityOption.find(function(t){return t.enum_value===e.sysPriority.sysAttrEnum[0].enum_value})||"");break;case"requirement":case"bug":t.priority=t.systemPriorityOption.find(function(t){return t.enum_value===e.priority})||""}},e.prototype.getCopyAttr=function(e){return this.http.post("/devops-workitem/api/v1/query/workitem/copy",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.systemAttrConfig=function(e){return this.http.get("/devops-cooperate-config/api/v1/query/workitem/system_attr/config",{params:e}).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.query_members=function(e){return this.http.request("get","/vision-platform/api/domains/"+e+"/members").pipe(Object(o.a)(function(e){return e}))},e.prototype.fuzzySearchUsers=function(e){return this.http.get("/vision-platform/api/users?username="+e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.getNecessaryAttribute=function(e){var t=this,n=e.entityType.link_to.category;e.attrs&&e.attrs.field&&(n=e.attrs.field+n);var i={domain_id:[e.domain.domain_id],entity_type:[n.toUpperCase()],action_type:"create"};this.queryNecessaryAttribute(i).subscribe(function(i){var o={domain_id:e.domain.domain_id,category:n.toUpperCase()},r=t.buildNecessaryAttribute(i,o);e.necessary={},r.forEach(function(t){e.necessary[t]=!0}),e.originNecessary=Object(a.a)(e.necessary)},function(){})},e.prototype.queryNecessaryAttribute=function(e){return this.http.post("/vision-configuration-center/template/attribute-define/property_config",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.buildNecessaryAttribute=function(e,t){var n=[];return Object.keys(e).forEach(function(i){e[i].forEach(function(e){var o=t.domain_id;o&&o===e.domain_id&&"true"===e.necessary&&e.entity_type===t.category&&n.push(i)})}),n},e.prototype.getDocTemplate=function(e){return this.http.post("/devops-template-management/api/v1/query/template/detail",e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.featureListForMove=function(e,t){return void 0===t&&(t=!1),this.http.get(t?"/devops-workitem/api/v1/fs_tree?domainId="+e:"/devops-workitem/api/v1/query/fs_tree/cloud_service/"+e).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.copyAttr=function(e,t,n){e.title=t.title,e.deadline=t.deadline,e.workload_man_day=t.workload_man_day,e.workload_man_month=t.workload_man_month,e.labels=t.labels,e.originNecessary=t.originNecessary,e.necessary=t.necessary,e.priority=t.priority,e.health_degree=t.health_degree,e.description=Object(i.a)({},t.description),"Task"===e.category&&"Task"===t.category&&(e.start_time=t.start_time),"Feature"===e.category&&"Feature"===t.category&&(e.feature_set=t.feature_set),Object(p.o)(n)||this.copyCollaborationAttr(e,n)},e.prototype.copyCollaborationAttr=function(e,t){var n,i;Object(s.a)(t.owners)||(e.owner=t.owners[0]),["Feature","Story"].includes(e.category)&&!Object(s.a)(t.test_owners)&&(e.test_owner=t.test_owners[0]);var o=null===(n=null==e?void 0:e.domain)||void 0===n?void 0:n.releasePlans;o&&o.subscribe(function(n){e.releasePlan=t.release_plan?n.find(function(e){return e.number===t.release_plan}):null});var r=null===(i=null==e?void 0:e.domain)||void 0===i?void 0:i.iterations;r&&r.subscribe(function(n){e.service_iteration=t.service_iteration?n.find(function(e){return e.iteration_id===Number(t.service_iteration)}):null})},e.prototype.queryGrayControl=function(e){return this.http.get("/vision-platform/api/gray/control",{params:{domainId:e.domain.id,resource:"vision:service_feature"}}).pipe(Object(o.a)(function(e){return e.data}))},e.prototype.queryFeatureSetTree=function(e){return this.http.get("/devops-workitem/api/v1/fs_tree",{params:e}).pipe(Object(o.a)(function(e){return e.data}))},e.\u0275fac=function(t){return new(t||e)(x["\u0275\u0275inject"](w.c),x["\u0275\u0275inject"](_.c),x["\u0275\u0275inject"](O.b))},e.\u0275prov=x["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()},tiOB:function(e,t,n){"use strict";n.d(t,"a",function(){return ea});var i=n("mrSG"),o=n("fXoL"),r=n("XNiG"),a=n("VRyK"),c=n("HDdC"),l=n("l5mm"),s=n("PqYM"),d=n("1G5W"),p=n("IzEk"),u=n("UXun"),m=n("6eBy"),h=n("XIp8"),g=n("R0Ic"),f=n("AA4e"),v=n("otx/"),b=n("kXS+"),C=function(){function e(){this.markObj=new b}return e.prototype.addMark=function(e){this.markObj.init(e),this.markObj.load()},e.prototype.clearMark=function(){try{if(!this.markObj)return;this.markObj.del()}catch(e){}},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),y=n("aDQL"),x=n("8YmR"),w=n("uiGI"),_=n("d/Su"),O=n("Muja"),S=function(){function e(){}return e.notSame=function(e,t){return e.title!==t.title||e.paragraphs.length!==t.paragraphs.length||e.status!==t.status||!Object(O.a)(e.paragraphs,t.paragraphs)},e}(),E=n("A/Mn"),M=n("AytR"),P=n("hbEN"),I=n("0VPD"),k=n("y7eE"),T=n("AWuS"),D=n("tyNb"),A=n("sYmb"),z=n("dEAy"),R=n("UJq8"),L=n("bNXi"),N=n("PScX"),j=n("fesf"),V=n("3OLy"),F=n("ofXK"),B=n("Nqz0"),U=n("3Pt+"),W=n("qAZ0"),H=n("C2AL"),G=n("FwiY"),q=n("Q8cG"),$=n("zvoC"),K=n("pNEw"),X=n("nJia"),Y=n("ayLg");function Q(e,t){1&e&&o["\u0275\u0275elementContainer"](0)}function J(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1,"\uff0c"),o["\u0275\u0275elementEnd"]())}function Z(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",9),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2),i=o["\u0275\u0275reference"](12);o["\u0275\u0275property"]("nzTooltipTitle",i)("nzTooltipPlacement","bottom")("nzTooltipOverlayClassName","participators-tooltip-overlay"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("\u5171 ",null==n.articleDetail||null==n.articleDetail.editors?null:n.articleDetail.editors.length," \u4eba\u53c2\u4e0e\u7f16\u8f91")}}function ee(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1,"\u53d1\u5e03\u7533\u8bf7\u5df2"),o["\u0275\u0275elementStart"](2,"span",10),o["\u0275\u0275text"](3,"\u88ab\u901a\u8fc7"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"]("(",n.articleDetail.publishTime,")\u3002")}}function te(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1,"\u53d1\u5e03\u7533\u8bf7\u5df2"),o["\u0275\u0275elementStart"](2,"span",11),o["\u0275\u0275text"](3,"\u88ab\u62d2\u7edd"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate2"]("(",n.articleDetail.publishTime,")\uff0c\u62d2\u7edd\u539f\u56e0\uff1a",n.articleDetail.rejectReason||"","\u3002")}}function ne(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2,"\uff0c\u4e8e "),o["\u0275\u0275template"](3,Q,1,0,"ng-container",6),o["\u0275\u0275text"](4," \u7531"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"span"),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"userInfo"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"span"),o["\u0275\u0275text"](9," \u6700\u540e\u4fee\u6539"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,J,2,0,"span",7),o["\u0275\u0275template"](11,Z,2,4,"span",8),o["\u0275\u0275text"](12,"\u3002 "),o["\u0275\u0275template"](13,ee,5,1,"span",7),o["\u0275\u0275template"](14,te,5,2,"span",7),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](),i=o["\u0275\u0275reference"](10);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngTemplateOutlet",i),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,6,null==n.articleDetail?null:n.articleDetail.last_updated_by),""),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",n.overTwo),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.overTwo),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",1===n.articleDetail.publishStatus&&n.articleDetail.is_chg_visibility),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1===n.articleDetail.publishStatus&&n.articleDetail.is_chg_visibility)}}function ie(e,t){1&e&&o["\u0275\u0275elementContainer"](0)}function oe(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1,", "),o["\u0275\u0275elementEnd"]())}function re(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",9),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2),i=o["\u0275\u0275reference"](12);o["\u0275\u0275property"]("nzTooltipTitle",i)("nzTooltipPlacement","bottom")("nzTooltipOverlayClassName","participators-tooltip-overlay"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("total ",null==n.articleDetail||null==n.articleDetail.editors?null:n.articleDetail.editors.length," participants")}}function ae(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1,"The release application has been"),o["\u0275\u0275elementStart"](2,"span",10),o["\u0275\u0275text"](3,"passed"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"]("(",n.articleDetail.publishTime,").")}}function ce(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1,"The release application has been"),o["\u0275\u0275elementStart"](2,"span",11),o["\u0275\u0275text"](3,"Rejected"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate2"]("(",n.articleDetail.publishTime,"), Rejection Reason: ",n.articleDetail.rejectReason||"",".")}}function le(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1,", last update by"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"span"),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"userInfo"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"span"),o["\u0275\u0275text"](6," at "),o["\u0275\u0275template"](7,ie,1,0,"ng-container",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,oe,2,0,"span",7),o["\u0275\u0275template"](9,re,2,4,"span",8),o["\u0275\u0275text"](10,". "),o["\u0275\u0275template"](11,ae,5,1,"span",7),o["\u0275\u0275template"](12,ce,5,2,"span",7)),2&e){var n=o["\u0275\u0275nextContext"](),i=o["\u0275\u0275reference"](10);o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,6,null==n.articleDetail?null:n.articleDetail.last_updated_by),""),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngTemplateOutlet",i),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.overTwo),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.overTwo),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",1===n.articleDetail.publishStatus&&n.articleDetail.is_chg_visibility),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1===n.articleDetail.publishStatus&&n.articleDetail.is_chg_visibility)}}function se(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",12),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"span",13),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,2,"CURRENT_STATE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](n.currentStatusTip)}}function de(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",16),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.lastUpdateTime)}}function pe(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",17),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).showHistory.emit()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("nzTooltipTitle",o["\u0275\u0275pipeBind1"](1,2,"ARTICLE_EDIT_INFO:VIEW_HISTORY")),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.lastUpdateTime)}}function ue(e,t){if(1&e&&(o["\u0275\u0275template"](0,de,2,1,"span",14),o["\u0275\u0275template"](1,pe,3,4,"span",15)),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngIf",!n.isShowHistory),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isShowHistory)}}function me(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",21),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"userInfo"),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,n))}}var he=function(){return[]};function ge(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",18),o["\u0275\u0275elementStart"](1,"div",19),o["\u0275\u0275template"](2,me,3,3,"div",20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",(null==n.articleDetail?null:n.articleDetail.editors)||o["\u0275\u0275pureFunction0"](1,he))}}var fe=function(e){return{userInfo:e}},ve=function(){function e(e,t){this.translate=e,this.statusService=t,this.isShowHistory=!0,this.showHistory=new o.EventEmitter}return Object.defineProperty(e.prototype,"currentLang",{get:function(){return"en"===this.translate.currentLang},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e,t=this;["warning","event","contingency"].includes(null===(e=this.articleDetail)||void 0===e?void 0:e.classify)&&(this.statusSubcription=this.statusService.statusSubjct.subscribe(function(e){var n,i,o,r,a,c;t.currentStatus=e,t.currentStatusTip=t.currentLang?null===(o=null===(i=null===(n=t.currentStatus)||void 0===n?void 0:n.extendedPropertieList)||void 0===i?void 0:i.find(function(e){return"name_en"===e.name}))||void 0===o?void 0:o.value:null===(c=null===(a=null===(r=t.currentStatus)||void 0===r?void 0:r.extendedPropertieList)||void 0===a?void 0:a.find(function(e){return"name_zh"===e.name}))||void 0===c?void 0:c.value}))},e.prototype.ngOnDestroy=function(){var e;null===(e=this.statusSubcription)||void 0===e||e.unsubscribe()},Object.defineProperty(e.prototype,"lastUpdateTime",{get:function(){var e,t;return null===(t=null===(e=this.articleDetail)||void 0===e?void 0:e.last_update_time)||void 0===t?void 0:t.slice(0,-3)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overTwo",{get:function(){var e;return((null===(e=this.articleDetail)||void 0===e?void 0:e.editors)||[]).length>1},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](K.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["article-edit-info"]],inputs:{articleDetail:"articleDetail",isShowHistory:"isShowHistory"},outputs:{showHistory:"showHistory"},decls:13,vars:11,consts:[[1,"edit-info-container"],[4,"ngIf","ngIfElse"],["eng",""],["class","m-l-8",4,"ngIf"],["editTime",""],["participatorsTooltip",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","participators","nz-tooltip","",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipOverlayClassName",4,"ngIf"],["nz-tooltip","",1,"participators",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipOverlayClassName"],[1,"text-info"],[1,"text-danger"],[1,"m-l-8"],[1,"m-l-5","primary-color"],["class","last-update-time",4,"ngIf"],["class","last-update-time","nz-tooltip","","nzTooltipPlacement","bottom","nzTooltipTrigger","hover",3,"nzTooltipTitle","click",4,"ngIf"],[1,"last-update-time"],["nz-tooltip","","nzTooltipPlacement","bottom","nzTooltipTrigger","hover",1,"last-update-time",3,"nzTooltipTitle","click"],[1,"participators-tooltip"],[1,"users-info"],["class","user-item text-omit",4,"ngFor","ngForOf"],[1,"user-item","text-omit"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275pipe"](4,"userInfo"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,ne,15,8,"ng-container",1),o["\u0275\u0275template"](6,le,13,8,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](8,se,5,4,"span",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,ue,2,2,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](11,ge,3,2,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"])),2&e){var n=o["\u0275\u0275reference"](7);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](3,4,"ARTICLE_EDIT_INFO:CREATOR",o["\u0275\u0275pureFunction1"](9,fe,o["\u0275\u0275pipeBind1"](4,7,null==t.articleDetail?null:t.articleDetail.created_by)))),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf","zh"===(null==t.translate?null:t.translate.currentLang))("ngIfElse",n),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.currentStatus)}},directives:[F.n,F.s,X.d,F.m],pipes:[A.b,Y.a],styles:[".edit-info-container[_ngcontent-%COMP%]{margin:12px 0;font-size:12px;color:#aaa}.edit-info-container[_ngcontent-%COMP%]   .last-update-time[_ngcontent-%COMP%], .edit-info-container[_ngcontent-%COMP%]   .participators[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}.edit-info-container[_ngcontent-%COMP%]   .last-update-time[_ngcontent-%COMP%]:hover, .edit-info-container[_ngcontent-%COMP%]   .participators[_ngcontent-%COMP%]:hover{color:#23c6c8;text-decoration:none}.participators-tooltip[_ngcontent-%COMP%]   .users-info[_ngcontent-%COMP%]{-moz-column-count:2;column-count:2}.participators-tooltip[_ngcontent-%COMP%]   .users-info[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]{white-space:nowrap}.primary-color[_ngcontent-%COMP%]{color:#23c6c8}  .participators-tooltip-overlay{max-width:500px!important}"]}),e}(),be=n("itXk"),Ce=n("zAKX");function ye(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",17),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"APPLICATY_REVIEW")))}function xe(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",17),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"APPLICATY_COUNTERSIGN")))}function we(e,t){if(1&e&&o["\u0275\u0275element"](0,"nz-option",18),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzLabel",n.name+" "+n.account)("nzValue",n)}}function _e(e,t){if(1&e&&o["\u0275\u0275element"](0,"nz-option",18),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzLabel",n.name+" "+n.account)("nzValue",n)}}var Oe=function(){function e(e,t,n,i){this.translate=e,this.knowService=t,this.notification=n,this.emitService=i,this.espaceContent="",this.sharedPersons=[],this.abilityPersons=[],this.abilityOption=[],this.sharedOption=[],this.model="",this.isRetryReview=!1,this.modelShowCloseChange=new o.EventEmitter}return Object.defineProperty(e.prototype,"isReviewModel",{get:function(){return this.model&&["draft","review"].includes(this.model)||this.isRetryReview},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCountersignModel",{get:function(){return this.model&&["reviewed","countersign"].includes(this.model)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentLangIsEn",{get:function(){return"en"===this.translate.currentLang},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e,t,n,o,r,a,c,l=this,s=null===(e=this.currentAction)||void 0===e?void 0:e.group_members[null===(t=this.articleDetails)||void 0===t?void 0:t.classify];this.selectSharedInfo=s[0],this.selectAbilityInfo=s[1],Object(be.a)(this.knowService.getGroupUsers(null===(n=this.currentDomainInfo)||void 0===n?void 0:n.id,null===(o=s[0])||void 0===o?void 0:o.group),this.knowService.getGroupUsers(null===(r=this.currentDomainInfo)||void 0===r?void 0:r.id,null===(a=s[1])||void 0===a?void 0:a.group),this.countersignUserSet?this.knowService.getCoutersignInfo(null===(c=this.articleDetails)||void 0===c?void 0:c.sn):new Promise(function(e){return e([])})).subscribe(function(e){var t,n,o=Object(i.g)(e,3),r=o[1],a=o[2];l.sharedOption=o[0].map(function(e){return e.user}),l.abilityOption=r.map(function(e){return e.user}),l.currentCountersignInfo=null==a?void 0:a.find(function(e){return 1===e.status});var c=null===(n=null===(t=l.currentCountersignInfo)||void 0===t?void 0:t.countersignUsers)||void 0===n?void 0:n.map(function(e){var t;return null===(t=null==e?void 0:e.operator)||void 0===t?void 0:t.id}),s=Object(i.i)(new Set(c));l.abilityPersons=l.abilityOption.filter(function(e){return s.includes(e.id)}),l.sharedPersons=l.sharedOption.filter(function(e){return s.includes(e.id)})},function(){})},e.prototype.ngOnChanges=function(e){e.model&&((["draft","review"].includes(this.model)||this.isRetryReview)&&(this.espaceContent=this.translate.instant("INVITE_TO_REVIEW_ARTICLE")),["reviewed","countersign"].includes(this.model)&&(this.espaceContent=this.translate.instant("INVITE_TO_COUNTERSIGN_ARTICLE")))},e.prototype.closeModal=function(){this.searchValue="",this.modelShowCloseChange.emit(!1)},e.prototype.createPush=function(){var e,t,n,o,r,a=this,c=new Set,l=[];Object(i.i)(this.abilityPersons,this.sharedPersons).forEach(function(e){c.has(e.id)||(c.add(e.id),l.push(e))});var s={entity_sn:this.articleDetails.sn,type:"wiki",users:l.map(function(e){return{id:e.id,username:e.username}}),entity_id:this.articleDetails.id,message_way:"create_group",remark:this.espaceContent,url:location.origin+"/domains/"+(null===(t=null===(e=this.articleDetails)||void 0===e?void 0:e.assigned_domain)||void 0===t?void 0:t.id)+"/wiki/"+(null===(n=this.articleDetails)||void 0===n?void 0:n.kanban_id)+"/"+(null===(o=this.articleDetails)||void 0===o?void 0:o.sn)+"?shared_by="+this.currentUserId};if(this.countersignUserSet){this.modelShowCloseChange.emit(!1);var d=Object(i.a)(Object(i.a)({},s),{userValid:"true",countersign_id:null===(r=this.currentCountersignInfo)||void 0===r?void 0:r.countersignId});this.knowService.updateCountersign(d).subscribe(function(e){a.notification.success(a.translate.instant("UPDATE_SUCCESS"),""),a.emitService.emit({type:"refresh-countersign-info"})},function(){})}else this.modelShowCloseChange.emit({countersignParams:Object(i.a)(Object(i.a)({},s),{group_ids:[],classify:this.model})})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](E.b),o["\u0275\u0275directiveInject"](L.b),o["\u0275\u0275directiveInject"](R.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-review-countersign"]],inputs:{model:"model",articleDetails:"articleDetails",currentUserId:"currentUserId",isRetryReview:"isRetryReview",currentAction:"currentAction",currentDomainInfo:"currentDomainInfo",countersignUserSet:"countersignUserSet"},outputs:{modelShowCloseChange:"modelShowCloseChange"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:33,vars:32,consts:[["nzClassName","initiate-countersign-model",3,"nzVisible","nzClosable","nzFooter","nzWidth"],[1,"share-content"],[1,"share-content-header"],["class","f-18",4,"ngIf"],[1,"iconfont","icon-close","cursor-pointer","position-a","user-tip-close",3,"click"],[1,"share-content-body"],[1,"tip-description"],[1,"input-wrapper"],[1,"input-title"],["nzMode","multiple",1,"full-width",3,"nzPlaceHolder","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"m-t-20","m-b-30"],[1,"p-b-5",3,"textContent"],[1,"txt-l","p-l-n"],["rows","6",1,"ant-input",3,"placeholder","ngModel","ngModelChange"],[1,"share-content-footer"],["type","button",1,"f-14","btn-primary","confirm-btn-styl",3,"disabled","textContent","click"],[1,"f-18"],[3,"nzLabel","nzValue"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nz-modal",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275template"](3,ye,3,3,"span",3),o["\u0275\u0275template"](4,xe,3,3,"span",3),o["\u0275\u0275elementStart"](5,"i",4),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",5),o["\u0275\u0275elementStart"](7,"div",6),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",7),o["\u0275\u0275elementStart"](11,"div",8),o["\u0275\u0275elementStart"](12,"span"),o["\u0275\u0275text"](13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"nz-select",9),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.sharedPersons=e}),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275template"](16,we,1,2,"nz-option",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",7),o["\u0275\u0275elementStart"](18,"div",8),o["\u0275\u0275elementStart"](19,"span"),o["\u0275\u0275text"](20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"nz-select",9),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.abilityPersons=e}),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275template"](23,_e,1,2,"nz-option",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"div",11),o["\u0275\u0275element"](25,"div",12),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementStart"](27,"div",13),o["\u0275\u0275elementStart"](28,"textarea",14),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.espaceContent=e}),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"div",15),o["\u0275\u0275elementStart"](31,"button",16),o["\u0275\u0275listener"]("click",function(){return t.createPush()}),o["\u0275\u0275pipe"](32,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",552),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.isReviewModel),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isCountersignModel),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,20,"REVIEW_TIP")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.currentLangIsEn?null==t.selectSharedInfo?null:t.selectSharedInfo.name_en:null==t.selectSharedInfo?null:t.selectSharedInfo.name_zh),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzPlaceHolder",o["\u0275\u0275pipeBind1"](15,22,"SELECT_PERSON_PLACEHOLDER"))("ngModel",t.sharedPersons),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.sharedOption),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](t.currentLangIsEn?null==t.selectAbilityInfo?null:t.selectAbilityInfo.name_en:null==t.selectAbilityInfo?null:t.selectAbilityInfo.name_zh),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzPlaceHolder",o["\u0275\u0275pipeBind1"](22,24,"SELECT_PERSON_PLACEHOLDER"))("ngModel",t.abilityPersons),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.abilityOption),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](26,26,"ESPACE_MESSAGE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](29,28,"KNOWLEDGE_BASE_COMMENT_PLACEHOLDER"))("ngModel",t.espaceContent),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!t.sharedPersons.length||!t.abilityPersons.length)("textContent",o["\u0275\u0275pipeBind1"](32,30,"ESPACE_SEND")))},directives:[z.a,F.n,Ce.e,U.k,U.l,F.m,U.d,Ce.a],pipes:[A.b],styles:['.initiate-countersign-model .ant-modal-body{padding:0}.share-content[_ngcontent-%COMP%]{position:relative;background-color:#fff;background-clip:padding-box;border:0;border-radius:4px;box-shadow:0 4px 12px rgba(0,0,0,.15);pointer-events:auto;min-height:400px;width:552px}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]{padding:16px 24px;color:rgba(0,0,0,.65);background:#fff;border-bottom:1px solid #e5e5e5;border-radius:4px 4px 0 0;position:relative}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]{padding:0 24px;font-size:14px;line-height:1.5;word-wrap:break-word}.m-b-30[_ngcontent-%COMP%]{margin-bottom:30px}.ant-input[_ngcontent-%COMP%]{max-width:100%;height:auto;min-height:128px;vertical-align:bottom;transition:all .3s,height 0s;resize:none;outline:none;padding:0 5px;box-sizing:border-box;margin:0;font-variant:tabular-nums;list-style:none;font-feature-settings:"tnum";position:relative;display:inline-block;width:100%;height:32px;color:rgba(0,0,0,.65);font-size:14px;line-height:1.5;background-color:#fff;background-image:none;border:1px solid #d9d9d9;border-radius:4px;transition:all .3s}.btn-primary.btn-outline.c-btn-line[_ngcontent-%COMP%]:after{background-color:#1ab394}.btn-primary.btn-outline.c-btn-border-line.success[_ngcontent-%COMP%]:before{border-bottom-color:#1ab394;border-left-color:#1ab394}.btn-primary.btn-outline.c-btn-border-line.success[_ngcontent-%COMP%]:after{border-top-color:#1ab394;border-right-color:#1ab394}.share-content-footer[_ngcontent-%COMP%]{padding:0 24px 20px;text-align:right}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]{padding:1px 6px;border:none;outline:none}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]:disabled{background:rgba(35,198,200,.5);opacity:.5}.user-tip-close[_ngcontent-%COMP%]{font-size:30px;right:20px;top:5px;line-height:1.5}.tip-description[_ngcontent-%COMP%]{margin-top:10px;height:20px;line-height:20px;font-size:12px;color:#999}.input-wrapper[_ngcontent-%COMP%]{margin-top:14px}.input-wrapper[_ngcontent-%COMP%]   .input-title[_ngcontent-%COMP%]{margin-bottom:3px;height:20px;line-height:20px;font-size:14px;color:#5f5f5f}']}),e}(),Se=n("bE2y"),Ee=function(){function e(){this.inputValue="",this.reviewStatus="0",this.isSREModel=!1,this.modelShowCloseChange=new o.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.closeModal=function(e){void 0===e&&(e={}),this.inputValue="",this.modelShowCloseChange.emit(e)},e.prototype.createPush=function(){var e={inputVal:this.inputValue,reviewStatus:Number(this.reviewStatus)};this.closeModal(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["coutersign-review-modal"]],inputs:{isSREModel:"isSREModel"},outputs:{modelShowCloseChange:"modelShowCloseChange"},decls:27,vars:28,consts:[[3,"nzVisible","nzClosable","nzFooter","nzWidth"],[1,"share-content"],[1,"share-content-header"],[1,"f-18",3,"textContent"],[1,"iconfont","icon-close","cursor-pointer","position-a","user-tip-close",3,"click"],[1,"review-countersign-select"],[1,"review-countersign-tip"],[3,"ngModel","ngModelChange"],["nz-radio","","nzValue","0"],["nz-radio","","nzValue","-1"],[1,"share-content-body"],[1,"m-t-20",2,"margin-bottom","30px"],[1,"txt-l","p-l-n"],["rows","6",1,"ant-input",3,"placeholder","ngModel","ngModelChange"],[1,"share-content-footer"],["nz-tooltip","","nzTooltipPlacement","bottom","nzTooltipTrigger","hover",1,"box-inline",3,"nzTooltipTitle"],["type","button",1,"btn","btn-primary","confirm-btn-styl",3,"disabled","textContent","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nz-modal",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275element"](3,"span",3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementStart"](5,"i",4),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",5),o["\u0275\u0275elementStart"](7,"div",6),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"nz-radio-group",7),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.reviewStatus=e}),o["\u0275\u0275elementStart"](11,"label",8),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"label",9),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",10),o["\u0275\u0275elementStart"](18,"div",11),o["\u0275\u0275elementStart"](19,"div",12),o["\u0275\u0275elementStart"](20,"textarea",13),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.inputValue=e}),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",14),o["\u0275\u0275elementStart"](23,"div",15),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275elementStart"](25,"button",16),o["\u0275\u0275listener"]("click",function(){return t.createPush()}),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",552),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,14,t.isSREModel?"VERIFY_CONFIRMATION":"REVIEW_COUNTERSIGN")),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,16,t.isSREModel?"VERIFY_CONFIRMATION_TIP":"REVIEW_COUNTERSIGN_TIP")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.reviewStatus),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](13,18,"PASS")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](16,20,"NOT_PASS")),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](21,22,t.isSREModel?"VERIFY_CONFIRMATION_PLACEHOLDER":"REVIEW_COUNTERSIGN_COMMENT_PLACEHOLDER"))("ngModel",t.inputValue),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzTooltipTitle",t.inputValue.trim().length?"":o["\u0275\u0275pipeBind1"](24,24,"REVIEW_COUNTERSIGN_COMMENT_TIP")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.inputValue.trim().length)("textContent",o["\u0275\u0275pipeBind1"](26,26,"COMMON_BUTTON_CONFIRM")))},directives:[z.a,Se.c,U.k,U.l,Se.b,U.d,X.d],pipes:[A.b],styles:[".ant-modal-body{padding:0}  .ant-radio-checked .ant-radio-inner{border-color:#23c6c8!important}  .ant-radio-checked .ant-radio-inner:after{background-color:#23c6c8!important}  .ant-input:focus,   .ant-input:hover{border-color:#23c6c8!important}.share-content[_ngcontent-%COMP%]{position:relative;background-color:#fff;background-clip:padding-box;border:0;border-radius:4px;box-shadow:0 4px 12px rgba(0,0,0,.15);pointer-events:auto;min-height:300px;width:552px}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]{padding:16px 24px;color:rgba(0,0,0,.65);background:#fff;border-bottom:1px solid #e5e5e5;border-radius:4px 4px 0 0;position:relative}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]   .f-18[_ngcontent-%COMP%]{font-size:18px}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]   .user-tip-close[_ngcontent-%COMP%]{font-size:30px;right:20px;top:5px}.share-content[_ngcontent-%COMP%]   .review-countersign-select[_ngcontent-%COMP%]{padding:20px 24px 0;margin-bottom:-25px}.share-content[_ngcontent-%COMP%]   .review-countersign-select[_ngcontent-%COMP%]   .review-countersign-tip[_ngcontent-%COMP%]{margin-bottom:4px}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]{padding:24px 24px 0;font-size:14px;line-height:1.5;word-wrap:break-word}.share-content[_ngcontent-%COMP%]   .share-content-footer[_ngcontent-%COMP%]{padding:0 24px 16px;text-align:right;margin-top:-12px}.share-content[_ngcontent-%COMP%]   .share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]{padding:1px 6px}.share-content[_ngcontent-%COMP%]   .share-content-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px}"]}),e}(),Me=function(e){return{role:e}};function Pe(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"button",3),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"]().handleInvoke(e)}),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275styleMap"](null==i?null:i.style),o["\u0275\u0275classProp"]("not-allowed-styl",null==i?null:i.disabled),o["\u0275\u0275property"]("nzTooltipPlacement","bottom")("nzTooltipTitle",null!=i&&i.disabled&&null!=i&&null!=i.auth&&null!=i.auth.role&&null!=i.auth.role.title&&i.auth.role.title.length?o["\u0275\u0275pipeBind2"](2,8,"SRE_ACCESS_TIP",o["\u0275\u0275pureFunction1"](11,Me,null==i||null==i.auth||null==i.auth.role||null==i.auth.role.title?null:i.auth.role.title.join("\u3001"))):"")("hidden",null==i?null:i.hidden),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](null==i?null:i.actionCn)}}function Ie(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"app-review-countersign",4),o["\u0275\u0275listener"]("modelShowCloseChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getCountersignData(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("countersignUserSet",i.countersignUserSet)("articleDetails",i.articleDetails)("currentUserId",i.currentUserId)("currentDomainInfo",i.currentDomainInfo)("model",null==i.currentStatus?null:i.currentStatus.taskDefinitionKey)("isRetryReview",i.isRetryReview)("currentAction",i.realCurrentAction)}}function ke(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"coutersign-review-modal",5),o["\u0275\u0275listener"]("modelShowCloseChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().handleOperate(e)}),o["\u0275\u0275elementEnd"]()}2&e&&o["\u0275\u0275property"]("isSREModel",!0)}var Te=function(){function e(e,t,n){this.knowService=e,this.statusService=t,this.emitService=n,this.statusArr=[],this.isCreateCountersign=!0,this.initiateCountersignCtrl=!1,this.showReviewCountersign=!1,this.countersignParams=null,this.selfCountersignParams=null,this.wikiVO=null,this.isRetryReview=!1,this.countersignUserSet=!1,this.reviewAccessEmmiter=new o.EventEmitter,this.onDestory$=new r.a}return Object.defineProperty(e.prototype,"realCurrentAction",{get:function(){var e,t,n,i,o;if(this.isRetryReview){var r=this.statusArr.find(function(e){return"draft"===(null==e?void 0:e.taskDefinitionKey)});return null===(e=null==r?void 0:r.actionList)||void 0===e?void 0:e.find(function(e){return"\u7533\u8bf7\u8bc4\u5ba1"===(null==e?void 0:e.actionCn)})}if(this.countersignUserSet){if("review"===(null===(t=this.currentStatus)||void 0===t?void 0:t.taskDefinitionKey)){var a=this.statusArr.find(function(e){return"draft"===(null==e?void 0:e.taskDefinitionKey)});return null===(n=null==a?void 0:a.actionList)||void 0===n?void 0:n.find(function(e){return"\u7533\u8bf7\u8bc4\u5ba1"===(null==e?void 0:e.actionCn)})}if("countersign"===(null===(i=this.currentStatus)||void 0===i?void 0:i.taskDefinitionKey)){var c=this.statusArr.find(function(e){return"reviewed"===(null==e?void 0:e.taskDefinitionKey)});return null===(o=null==c?void 0:c.actionList)||void 0===o?void 0:o.find(function(e){return"\u7533\u8bf7\u4f1a\u7b7e"===(null==e?void 0:e.actionCn)})}}return this.currentAction},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUserAuthor",{get:function(){var e,t;return this.currentUserId===(null===(t=null===(e=this.articleDetails)||void 0===e?void 0:e.created_by)||void 0===t?void 0:t.id)},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.onDestory$.next(),this.onDestory$.complete()},e.prototype.ngOnInit=function(){var e=this;window.communicationService.currentUser$.pipe(Object(d.a)(this.onDestory$)).subscribe(function(t){var n;t&&(e.currentUserId=t.user_id,e.currentUsername=t.user_name,e.knowService.getUserRole(null===(n=e.currentDomainInfo)||void 0===n?void 0:n.id,e.currentUserId).subscribe(function(t){e.currentUserInfo=t},function(){}))}),this.getRetryReviewAccess(),this.getSREStatus(!0),this.emitService.eventEmit.subscribe(function(t){"refresh-sre-wiki-status"===(null==t?void 0:t.type)&&e.getSREStatus(),"set-sre-countersign-users"===(null==t?void 0:t.type)&&(e.countersignUserSet=!0,setTimeout(function(){e.initiateCountersignCtrl=!0},100))})},e.prototype.getRetryReviewAccess=function(){var e,t,n,i=this,o={processBusinessKey:null===(e=this.articleDetails)||void 0===e?void 0:e.sn,funcName:"sre_sop",domainId:null===(n=null===(t=this.articleDetails)||void 0===t?void 0:t.assigned_domain)||void 0===n?void 0:n.id};this.knowService.getProcessEngineAttribute(o).subscribe(function(e){var t,n,o;i.statusArr=e||[],i.buildActionAttribute(i.statusArr);var r=!(null===(o=null===(n=null===(t=i.statusArr.find(function(e){return"draft"===e.taskDefinitionKey}))||void 0===t?void 0:t.actionList)||void 0===n?void 0:n.find(function(e){return"\u7533\u8bf7\u8bc4\u5ba1"===(null==e?void 0:e.actionCn)}))||void 0===o?void 0:o.disabled);i.reviewAccessEmmiter.emit(r)},function(){})},e.prototype.buildActionAttribute=function(e){var t=this;e.forEach(function(e){var n,o,r=null===(n=null==e?void 0:e.extendedPropertieList)||void 0===n?void 0:n.find(function(e){return"next_button"===(null==e?void 0:e.name)});if(r){var a=[];try{a=JSON.parse(null==r?void 0:r.value)}catch(c){}e.actionList=Object(i.i)(e.actionList,a)}null===(o=null==e?void 0:e.actionList)||void 0===o||o.forEach(function(e){var n,i,o,r,a,l,s,d,p,u;null===(n=null==e?void 0:e.extendedPropertieList)||void 0===n||n.forEach(function(t){if(t.name){try{t.value=JSON.parse(t.value)}catch(c){}e[t.name]=t.value}}),e.disabled=!((null===(i=null==e?void 0:e.auth)||void 0===i?void 0:i.self)&&t.isUserAuthor||(null===(a=null===(r=null===(o=null==e?void 0:e.auth)||void 0===o?void 0:o.role)||void 0===r?void 0:r.title)||void 0===a?void 0:a.includes(null===(l=t.currentUserInfo)||void 0===l?void 0:l.title))||(null===(p=null===(d=null===(s=null==e?void 0:e.auth)||void 0===s?void 0:s.role)||void 0===d?void 0:d.category)||void 0===p?void 0:p.includes(null===(u=t.currentUserInfo)||void 0===u?void 0:u.category)))})})},e.prototype.setCurrentAction=function(e){var t,n,i;this.currentAction=e,this.nextStatus=null===(i=null===(n=null===(t=this.currentAction)||void 0===t?void 0:t.extendedPropertieList)||void 0===n?void 0:n.find(function(e){return"nextStatus"===e.name}))||void 0===i?void 0:i.value,this.wikiVO.businessStatus=this.nextStatus},e.prototype.applicatyReview=function(e){this.setCurrentAction(e),this.initiateCountersignCtrl=!0},e.prototype.handleOperate=function(e){var t,n,i,o,r,a,c,l,s;this.showReviewCountersign=!1,(null==e?void 0:e.inputVal)&&(this.selfCountersignParams={entity_sn:this.articleDetails.sn,type:"wiki",users:[{id:this.currentUserId,username:this.currentUsername}],url:location.origin+"/domains/"+(null===(n=null===(t=this.articleDetails)||void 0===t?void 0:t.assigned_domain)||void 0===n?void 0:n.id)+"/wiki/"+(null===(i=this.articleDetails)||void 0===i?void 0:i.kanban_id)+"/"+(null===(o=this.articleDetails)||void 0===o?void 0:o.sn)+"?shared_by="+this.currentUserId,entity_id:this.articleDetails.id,status:e.reviewStatus,countersign_comment:e.inputVal,classify:"verified"},this.currentAction=null===(a=null===(r=this.currentStatus)||void 0===r?void 0:r.actionList)||void 0===a?void 0:a.find(function(t){return(null==t?void 0:t.actionCn)===(0===(null==e?void 0:e.reviewStatus)?"\u9a8c\u8bc1\u901a\u8fc7":"\u9a8c\u8bc1\u4e0d\u901a\u8fc7")}),this.nextStatus=null===(s=null===(l=null===(c=this.currentAction)||void 0===c?void 0:c.extendedPropertieList)||void 0===l?void 0:l.find(function(e){return"nextStatus"===e.name}))||void 0===s?void 0:s.value,this.wikiVO.businessStatus=this.nextStatus,this.pushSREProcessNext())},e.prototype.verifyConfirmation=function(e){this.setCurrentAction(e),this.showReviewCountersign=!0},e.prototype.pushSREProcessNext=function(){var e,t,n,i,o=this,r=null===(n=null===(t=null===(e=this.currentAction)||void 0===e?void 0:e.extendedPropertieList)||void 0===t?void 0:t.find(function(e){return"param"===e.name}))||void 0===n?void 0:n.value,a={funcName:"sre_sop",processBusinessKey:this.articleDetails.sn,domainId:this.currentDomainInfo.id,variables:{status:this.nextStatus,param:(null==r?void 0:r.length)?{}:null}};r.forEach(function(e){a.variables.param[e]=o[e]});var c=!1;"review"===this.nextStatus&&"verified"===(null===(i=this.currentStatus)||void 0===i?void 0:i.taskDefinitionKey)&&(c=!0),this.knowService.pushSREProcessNext(a,c).subscribe(function(e){var t,n,i;(null==e?void 0:e.nextTaskDefinitionKey)?(o.currentStatus=o.statusArr.find(function(t){return t.taskDefinitionKey===(null==e?void 0:e.nextTaskDefinitionKey)}),o.statusService.statusSubjct.next(o.currentStatus)):o.getSREStatus(),["review","reviewed","countersign"].includes(null===(t=o.currentStatus)||void 0===t?void 0:t.taskDefinitionKey)&&setTimeout(function(){var e;o.emitService.emit({type:"refresh-countersign-info",needOpenComment:!["review","countersign"].includes(null===(e=o.currentStatus)||void 0===e?void 0:e.taskDefinitionKey)})}),(null===(i=null===(n=null==a?void 0:a.variables)||void 0===n?void 0:n.param)||void 0===i?void 0:i.selfCountersignParams)&&setTimeout(function(){var e;o.emitService.emit({type:"refresh-countersign-verified-info",needOpenComment:!["review","countersign"].includes(null===(e=o.currentStatus)||void 0===e?void 0:e.taskDefinitionKey)})})},function(){})},e.prototype.getCountersignData=function(e){var t;if(this.initiateCountersignCtrl=!1,this.countersignUserSet)this.countersignUserSet=!1;else{if(e){if(this.isRetryReview){this.nextStatus="review",this.wikiVO.businessStatus="review";var n=this.statusArr.find(function(e){return"draft"===(null==e?void 0:e.taskDefinitionKey)});this.currentAction=null===(t=null==n?void 0:n.actionList)||void 0===t?void 0:t.find(function(e){return"\u7533\u8bf7\u8bc4\u5ba1"===(null==e?void 0:e.actionCn)}),this.isRetryReview=!1}this.countersignParams=null==e?void 0:e.countersignParams,this.countersignParams.classify=this.nextStatus,this.pushSREProcessNext()}this.isRetryReview&&(this.isRetryReview=!1)}},e.prototype.getSREStatus=function(e){var t,n,i=this,o={processBusinessKey:null===(t=this.articleDetails)||void 0===t?void 0:t.sn,funcName:"sre_sop",domainId:null===(n=this.currentDomainInfo)||void 0===n?void 0:n.id};this.knowService.querySREStatus(o).subscribe(function(t){var n;i.buildActionAttribute([t]),i.currentStatus=t,i.statusService.statusSubjct.next(i.currentStatus),e&&(i.wikiVO={sn:i.articleDetails.sn,businessStatus:null===(n=i.statusArr[i.currentIndex+1])||void 0===n?void 0:n.taskDefinitionKey})},function(){})},e.prototype.ngOnChanges=function(e){var t,n;e.articleDetails&&(null===(t=this.articleDetails)||void 0===t?void 0:t.sn)&&(this.getSREStatus(),this.getRetryReviewAccess(),this.wikiVO&&(this.wikiVO.sn=null===(n=this.articleDetails)||void 0===n?void 0:n.sn))},e.prototype.handleInvoke=function(e){(null==e?void 0:e.disabled)||this[null==e?void 0:e.invoke](e)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](E.b),o["\u0275\u0275directiveInject"](K.a),o["\u0275\u0275directiveInject"](R.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sre-status-flow"]],inputs:{articleDetails:"articleDetails",currentDomainInfo:"currentDomainInfo"},outputs:{reviewAccessEmmiter:"reviewAccessEmmiter"},features:[o["\u0275\u0275ProvidersFeature"]([E.b]),o["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"countersignUserSet","articleDetails","currentUserId","currentDomainInfo","model","isRetryReview","currentAction","modelShowCloseChange",4,"ngIf"],[3,"isSREModel","modelShowCloseChange",4,"ngIf"],["nz-tooltip","",1,"icon-edit-btn","icon-items","vertical-center",3,"nzTooltipPlacement","nzTooltipTitle","hidden","click"],[3,"countersignUserSet","articleDetails","currentUserId","currentDomainInfo","model","isRetryReview","currentAction","modelShowCloseChange"],[3,"isSREModel","modelShowCloseChange"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,Pe,4,13,"ng-container",0),o["\u0275\u0275template"](1,Ie,1,7,"app-review-countersign",1),o["\u0275\u0275template"](2,ke,1,1,"coutersign-review-modal",2)),2&e&&(o["\u0275\u0275property"]("ngForOf",null==t.currentStatus?null:t.currentStatus.actionList),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(null==t.currentStatus?null:t.currentStatus.taskDefinitionKey)&&t.initiateCountersignCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showReviewCountersign))},directives:[F.m,F.n,X.d,Oe,Ee],pipes:[A.b],styles:[".icon-edit-btn[_ngcontent-%COMP%]{height:28px;text-align:center}.icon-edit-btn[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{box-shadow:0 2px 2px #ededed;border-width:2px}.vertical-center[_ngcontent-%COMP%]{line-height:0px}.icon-items[_ngcontent-%COMP%]{margin-left:12px;cursor:pointer}.not-allowed-styl[_ngcontent-%COMP%]{cursor:not-allowed}"]}),e}(),De=n("1egt"),Ae=n("+oEP"),ze=n("EGpF"),Re=n("ebHz");function Le(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"label",14),o["\u0275\u0275elementStart"](1,"span",15),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzValue",n),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.title)}}function Ne(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"MODIFY_VISIBILITY_TO")," "))}var je=function(){function e(e,t,n,i){this.notificationService=e,this.translate=t,this.emitService=n,this.knowledgeManageService=i,this.closeReleasePass=new o.EventEmitter,this.confirmReleasePass=new o.EventEmitter,this.radioValue=null,this.upSpacesList=[],this.tragetDomain=""}return e.prototype.ngOnInit=function(){this.tragetDomain=this.articleDetail.tragetDomain,this.queryDomainMembers()},e.prototype.queryDomainMembers=function(){var e=this;this.currentDomain&&this.knowledgeManageService.query_spaces(this.currentDomain).subscribe(function(t){e.upSpacesList=t&&t[e.currentDomain]?t[e.currentDomain].up.filter(function(t){return t.id!==e.tragetDomain}):[]},function(){})},e.prototype.closeModal=function(){this.closeReleasePass.emit()},e.prototype.confirmRelease=function(){this.radioValue&&this.confirmReleasePass.emit(this.radioValue)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](L.b),o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](R.a),o["\u0275\u0275directiveInject"](E.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["wiki-release-pass"]],inputs:{currentDomain:"currentDomain",articleDetail:"articleDetail"},outputs:{closeReleasePass:"closeReleasePass",confirmReleasePass:"confirmReleasePass"},decls:24,vars:22,consts:[["nzWrapClassName","wiki-release-pass","nzCalssName","modal-styl",3,"nzVisible","nzClosable","nzFooter","nzWidth"],[1,"wiki-release-box"],[1,"wiki-release-header"],[1,"icon-color","icon-font-size14","position-right-close","iconfont","icon-close","pointer-cursor",3,"click"],[1,"content-container"],[1,"text-999999","content-text"],[1,"m-t-10","opation-list"],[1,"text-999999","box-block","m-b-5"],[3,"ngModel","ngModelChange"],["nz-radio","","class","box-block radio-item",3,"nzValue",4,"ngFor","ngForOf"],[1,"share-content-footer"],["class","release-to-domains flex-1",4,"ngIf"],["type","button",1,"f-16","confirm-btn-styl","cancel-btn-color","m-r-30",3,"textContent","click"],["type","button",1,"f-16","confirm-btn-styl",3,"textContent","click"],["nz-radio","",1,"box-block","radio-item",3,"nzValue"],[1,"spaces-title"],[1,"release-to-domains","flex-1"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nz-modal",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementStart"](5,"i",3),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"span"),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",6),o["\u0275\u0275elementStart"](12,"span",7),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"nz-radio-group",8),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.radioValue=e}),o["\u0275\u0275template"](16,Le,3,2,"label",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",10),o["\u0275\u0275template"](18,Ne,3,3,"div",11),o["\u0275\u0275elementStart"](19,"div"),o["\u0275\u0275elementStart"](20,"button",12),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"button",13),o["\u0275\u0275listener"]("click",function(){return t.confirmRelease()}),o["\u0275\u0275pipe"](23,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",600),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,12,"SELECT_TARGET_TIER")," "),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](10,14,"COE_RELEASE_TIP")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](14,16,"SELECT_TARGET_RANGE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.radioValue),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.upSpacesList),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.radioValue),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](21,18,"COMMON_BUTTON_CANCLE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](23,20,"COMMON_BUTTON_CONFIRM")))},directives:[z.a,Se.c,U.k,U.l,F.m,F.n,Se.b],pipes:[A.b],styles:[".wiki-release-box[_ngcontent-%COMP%]   .wiki-release-header[_ngcontent-%COMP%]{height:50px;width:100%;line-height:50px;text-align:left;padding-left:20px;position:relative;font-size:18px}.wiki-release-box[_ngcontent-%COMP%]   .position-right-close[_ngcontent-%COMP%]{position:absolute;right:20px;font-size:16px}.wiki-release-box[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{padding:0 20px}.wiki-release-box[_ngcontent-%COMP%]   .opation-list[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto}.wiki-release-box[_ngcontent-%COMP%]   .radio-item[_ngcontent-%COMP%]{display:block;height:32px;line-height:32px}.wiki-release-box[_ngcontent-%COMP%]   .spaces-title[_ngcontent-%COMP%]{font-weight:400}.wiki-release-box[_ngcontent-%COMP%]   .share-content-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:20px}.wiki-release-box[_ngcontent-%COMP%]   .share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]{height:37px;width:80px;line-height:37px;padding:0 12px;border-radius:4px;outline:none;border:1px solid #23c6c8;background:#23c6c8;color:#fff;opacity:.9}.wiki-release-box[_ngcontent-%COMP%]   .share-content-footer[_ngcontent-%COMP%]   .cancel-btn-color[_ngcontent-%COMP%]{margin-right:20px;border:1px solid #dbdbdb;color:#5f5f5f;background:#fff}.wiki-release-box[_ngcontent-%COMP%]   .release-to-domains[_ngcontent-%COMP%]{color:#fa0}  .wiki-release-pass .ant-modal-body{padding:0!important}  .wiki-release-pass .ant-modal-body::-webkit-scrollbar{width:0!important}"]}),e}(),Ve=n("tSLD"),Fe=n("Kj3r"),Be=n("/uUt"),Ue=n("tk/3"),We=n("lJxs"),He=function(){function e(e){var t=this;this.http=e,this.getAllSpace=function(e){return t.http.get("/devops-knowledge-management/api/query/note/save_load?save_type="+e).pipe(Object(We.a)(function(e){return e.data}))}}return e.prototype.query_users=function(e){var t={params:(new Ue.g).set("domainId",e.domainId).set("username",e.username)};return this.http.get("/vision-auth/api/users/all",t).pipe(Object(We.a)(function(e){return e.data}))},e.prototype.query_members=function(e){return this.http.request("get","/vision-platform/api/domains/"+e+"/members").pipe(Object(We.a)(function(e){return e}))},e.prototype.query_group=function(e){var t=e?{params:(new Ue.g).set("key",e)}:{};return this.http.request("get","/vision-message-center/api/v2/espace/query/group",t).pipe(Object(We.a)(function(e){return e.data}))},e.prototype.share_by_espace=function(e,t){var n={params:(new Ue.g).set("message_way",t.message_way).set("entity_type",t.entity_type).set("entity_id",t.entity_id)};return this.http.post("/vision-common/api/share/content/espace",e,n).pipe(Object(We.a)(function(e){return e.data}))},e.prototype.createCountersign=function(e){return this.http.post("/devops-knowledge-management/api/countersign",e).pipe(Object(We.a)(function(e){return e}))},e.prototype.updateCountersign=function(e){return this.http.put("/devops-knowledge-management/api/countersign",e).pipe(Object(We.a)(function(e){return e.data}))},e.prototype.queryUsers=function(e){var t=this,n={username:e},i={params:(new Ue.g).set("username",n.username)};return this.http.get("/vision-platform/api/users",i).pipe(Object(We.a)(function(e){var i=e.data;if(Object(f.o)(i)){var o={params:(new Ue.g).set("username",n.username)};return t.http.get("/devops-user/api/v1/users/ldap",o).pipe(Object(We.a)(function(e){return e.data}))}return i}))},e.prototype.getCoutersignInfo=function(e){var t="/devops-knowledge-management/api/countersign?wiki_sn="+e+"&request_tag="+(new Date).getTime();return this.http.get(t).pipe(Object(We.a)(function(e){return e.data}))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](Ue.c))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),Ge=1,qe=n("1JWf"),$e=n("BT9m"),Ke=n("4P1S");function Xe(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",38),o["\u0275\u0275element"](1,"i",39),o["\u0275\u0275elementEnd"]())}function Ye(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",40),o["\u0275\u0275element"](1,"i",41),o["\u0275\u0275elementEnd"]())}function Qe(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",34),o["\u0275\u0275element"](1,"img",35),o["\u0275\u0275template"](2,Xe,2,0,"span",36),o["\u0275\u0275template"](3,Ye,2,0,"span",37),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](n.failedStatus?"not-pass-img":n.passStatus?"pass-img":""),o["\u0275\u0275propertyInterpolate1"]("src","http://w3.huawei.com/w3lab/rest/yellowpage/face/",n.account,"/45",o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.passStatus),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.failedStatus)}}function Je(e,t){1&e&&o["\u0275\u0275element"](0,"img",42)}function Ze(e,t){1&e&&o["\u0275\u0275element"](0,"img",43)}function et(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",44),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"workitemAttr"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](2,1,n,"person"))}}function tt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",44),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.group_name)}}function nt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"i",45),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](),t=e.$implicit,i=e.index;return o["\u0275\u0275nextContext"](2).removeItem(t,i)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().index,r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("hidden",r.currentJudgeIndex!==i)}}function it(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",28),o["\u0275\u0275listener"]("mouseover",function(){o["\u0275\u0275restoreView"](n);var e=t.index;return o["\u0275\u0275nextContext"](2).currentJudgeIndex=e})("mouseout",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).currentJudgeIndex=null}),o["\u0275\u0275template"](1,Qe,4,5,"span",29),o["\u0275\u0275template"](2,Je,1,0,"img",30),o["\u0275\u0275template"](3,Ze,1,0,"img",31),o["\u0275\u0275template"](4,et,3,4,"span",32),o["\u0275\u0275template"](5,tt,2,1,"span",32),o["\u0275\u0275template"](6,nt,1,1,"i",33),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.account),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","0"==i.group_type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","1"==i.group_type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.name),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.group_name),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!(i.account&&(i.passStatus||i.failedStatus)))}}function ot(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",26),o["\u0275\u0275template"](1,it,7,6,"div",27),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.update_owners)}}function rt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",46),o["\u0275\u0275elementStart"](1,"input",47),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().useInitiateDiscussion()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](2,"label",48),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("checked",i.isInitiateDiscussion),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](3,2,"INITIATE_DISCUSSION_GROUP"))}}function at(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",49),o["\u0275\u0275element"](1,"span",50),o["\u0275\u0275elementStart"](2,"span"),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,1,"SELECT_GROUP_TIP_INFO")))}function ct(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",56),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).backAllList("user")}),o["\u0275\u0275element"](1,"i",57),o["\u0275\u0275elementEnd"]()}}function lt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",56),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=t.index;return o["\u0275\u0275nextContext"](2).selectItem("user",e,i)}),o["\u0275\u0275element"](1,"user-avatar",58),o["\u0275\u0275elementStart"](2,"span",59),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"workitemAttr"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"span",60),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("account",i.account||null)("width",24)("height",24),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind2"](4,5,i,"person")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.office_name)}}function st(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",61),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).showMore("user")}),o["\u0275\u0275element"](1,"span",8),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"i",62),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,1,"MORE_CONTACTS")))}function dt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",51),o["\u0275\u0275elementStart"](1,"span",52),o["\u0275\u0275template"](2,ct,2,0,"span",53),o["\u0275\u0275element"](3,"span",8),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"ul"),o["\u0275\u0275template"](6,lt,7,8,"li",54),o["\u0275\u0275pipe"](7,"slice"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,st,4,3,"div",55),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("hidden",n.isCreateCountersign&&n.update_owners&&n.update_owners.length&&n.update_owners[0].group_name),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.showGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,5,"ESPACE_USER_NUMBER")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind3"](7,7,n.availableMembers,0,n.userLimit)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.availableMembers.length>n.userLimit)}}function pt(e,t){1&e&&o["\u0275\u0275element"](0,"div",65)}function ut(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",56),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).backAllList("group")}),o["\u0275\u0275element"](1,"i",57),o["\u0275\u0275elementEnd"]()}}function mt(e,t){1&e&&o["\u0275\u0275element"](0,"img",42)}function ht(e,t){1&e&&o["\u0275\u0275element"](0,"img",43)}function gt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",56),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,i=t.index;return o["\u0275\u0275nextContext"](3).selectItem("group",e,i)}),o["\u0275\u0275template"](1,mt,1,0,"img",70),o["\u0275\u0275template"](2,ht,1,0,"img",71),o["\u0275\u0275elementStart"](3,"span",59),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","0"==i.group_type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","1"==i.group_type),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.group_name)}}function ft(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",61),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).showMore("group")}),o["\u0275\u0275element"](1,"span",8),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"i",62),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,1,"MORE_GROUPS")))}function vt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",66),o["\u0275\u0275elementStart"](1,"span",67),o["\u0275\u0275template"](2,ut,2,0,"span",68),o["\u0275\u0275element"](3,"span",8),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"ul"),o["\u0275\u0275template"](6,gt,5,3,"li",69),o["\u0275\u0275pipe"](7,"slice"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,ft,4,3,"div",55),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.showUser),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,4,"ESPACE_GROUP")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind3"](7,6,n.espaceGroupData,0,n.groupLimit)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.espaceGroupData.length>n.groupLimit)}}function bt(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,pt,1,0,"div",63),o["\u0275\u0275template"](2,vt,9,10,"div",64),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.showUser&&n.availableMembers.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.showGroup&&n.espaceGroupData.length)}}var Ct=function(){function e(e,t,n){var i=this;this.knowledgeService=e,this.translate=t,this.notificationService=n,this.update_owners=[],this.result_show=!1,this.availableMembers=[],this.availableMembersInit=[],this.espaceGroupData=[],this.espaceGroupDataInit=[],this.showGroup=!0,this.userLimit=5,this.showUser=!0,this.groupLimit=3,this.userQuestionUpdate=new r.a,this.sendShareFunc=new r.a,this.inputFlag=!0,this.canCreateGroup=!1,this.isInitiateDiscussion=!0,this.isCreateCountersign=!1,this.modelShowCloseChange=new o.EventEmitter,this.userQuestionUpdate.pipe(Object(Fe.a)(500),Object(Be.a)()).subscribe(function(e){i.valueChange(i.selectValue)})}return e.prototype.closeModal=function(){this.searchValue="",this.modelShowCloseChange.emit(!1)},e.prototype.searchInputFocus=function(){this.result_show=!0},e.prototype.clickOutsideFunc=function(){this.result_show=!1,this.selectValue=""},e.prototype.valueChange=function(e){this.inputFlag&&(Object(f.o)(e)?(this.availableMembers=this.availableMembersInit,this.espaceGroupData=this.espaceGroupDataInit,this.showGroup?this.showUser||(this.groupLimit=this.espaceGroupData.length):this.userLimit=this.availableMembers.length):this.getUsers(e))},e.prototype.membersToUsers=function(e){var t=this;e.forEach(function(e){e.user&&(e.user.office_name=null),t.availableMembers.push(e.user)}),this.availableMembersInit=Object(i.i)(this.availableMembers),this.isCreateCountersign||this.getCoutersignInfo()},e.prototype.ngOnInit=function(){var e=this;this.currentDomain?this.queryMembers():this.getAllDomains(),this.knowledgeService.query_group(null).subscribe(function(t){e.espaceGroupData=t,e.espaceGroupDataInit=Object(h.a)(t)},function(){}),this.espaceShareContent=this.translate.instant("INVITE_COUNTERSIGN","")},e.prototype.getCoutersignInfo=function(){var e=this;this.knowledgeService.getCoutersignInfo(this.sn).subscribe(function(t){var n;e.coutersignInfo=Object(i.a)({},t[0]);var o=null===(n=t[0])||void 0===n?void 0:n.countersignUsers;o.length&&(e.update_owners=o.map(function(e){var t=Object(i.a)({},e.operator);return t.passStatus=0===e.status,t.failedStatus=-1===e.status,t})),e.getFilterAvailableMembers()},function(){})},e.prototype.getFilterAvailableMembers=function(){var e=this;this.availableMembers=this.availableMembers.filter(function(t){return!e.update_owners.some(function(e){return e.id===t.id})})},e.prototype.getAllDomains=function(){var e=this;this.knowledgeService.getAllSpace("generate_workitem").subscribe(function(t){t.default_domain&&t.default_domain.id?(e.currentDomain=t.default_domain.id,e.queryMembers()):t.my_related_domains.length&&(e.currentDomain=t.my_related_domains[0].id,e.queryMembers())},function(){})},e.prototype.queryMembers=function(){var e=this;this.knowledgeService.query_members(this.currentDomain).subscribe(function(t){e.membersToUsers(t.data.self_members.members)},function(){})},e.prototype.getUsers=function(e){var t=this,n={domainId:this.currentDomain,username:e};this.availableMembers=[],this.knowledgeService.query_users(n).subscribe(function(e){e.forEach(function(e){t.availableMembers.some(function(t){return t.id==e.id})||t.availableMembers.push(e)}),t.showGroup||(t.userLimit=t.availableMembers.length),t.getFilterAvailableMembers()},function(){}),this.espaceGroupData=[],this.knowledgeService.query_group(e).subscribe(function(e){e.forEach(function(e){t.espaceGroupData.some(function(t){return t.id==e.id})||t.espaceGroupData.push(e)})},function(){})},e.prototype.backAllList=function(e){this.showGroup=!0,this.showUser=!0,"user"===e?this.userLimit=5:this.groupLimit=3,this.resetResultShow()},e.prototype.resetResultShow=function(){var e=this;setTimeout(function(){e.result_show=!0},0)},e.prototype.selectItem=function(e,t,n){this.update_owners.some(function(e){return e.id===t.id})||("user"==e?(this.update_owners.push(t),this.availableMembers.splice(n,1)):(this.update_owners.push(t),this.espaceGroupData.splice(n,1))),this.selectValue=null,this.canCreateGroup=this.checkOnlyContacts()},e.prototype.checkOnlyContacts=function(){var e=this,t=!0;return this.update_owners.length?(this.update_owners.forEach(function(n){if(n.group_name)return e.isInitiateDiscussion=!1,t=!1}),t):(this.isInitiateDiscussion=!1,t=!1)},e.prototype.workItemAttr=function(e){return Object(f.o)(e)?null:"en"===this.translate.currentLang&&e.name_full?e.name_full:e.name+" "+e.account},e.prototype.showMore=function(e){"user"===e?(this.userLimit=this.availableMembers.length,this.showGroup=!1):(this.groupLimit=this.espaceGroupData.length,this.showUser=!1),this.resetResultShow()},e.prototype.removeItem=function(e,t){this.update_owners.splice(t,1),this.canCreateGroup=this.checkOnlyContacts(),e.group_name?this.espaceGroupData.unshift(e):this.availableMembers.unshift(e)},e.prototype.useInitiateDiscussion=function(){this.isInitiateDiscussion=!this.isInitiateDiscussion},e.prototype.createPush=function(){var e,t=this,n={id:this.shareDetail.id,type:this.shareDetail.type,category:this.shareDetail.category,number:this.shareDetail.number?this.shareDetail.number:"",entity_type:this.shareDetail.entity_type?this.shareDetail.entity_type:""},o={remark:this.espaceShareContent,receivers:[],group_ids:[],url:this.getUrl(n)};this.update_owners.forEach(function(e){e.group_name?o.group_ids.push(e.id):o.receivers.push({id:e.id,username:e.username})});var r={message_way:this.isInitiateDiscussion?"create_group":"single",entity_type:"",entity_id:""};n&&(r.entity_type=n.entity_type,r.entity_id=n.id),this.espaceParams&&(o=Object(i.a)(Object(i.a)({},o),this.espaceParams));var a={entity_sn:this.shareDetail.sn,type:"wiki",users:o.receivers,entity_id:r.entity_id,message_way:this.isInitiateDiscussion?"create_group":"single",remark:this.espaceShareContent,url:o.url};if(this.isCreateCountersign)c=Object(i.a)(Object(i.a)({},a),{group_ids:o.group_ids}),this.knowledgeService.createCountersign(c).subscribe(function(e){t.closeModal(),t.notificationService.success(t.translate.instant("SUCCESS_TO_SAND"),"")},function(){});else{var c=Object(i.a)(Object(i.a)({},a),{userValid:"true",countersign_id:null===(e=this.coutersignInfo)||void 0===e?void 0:e.countersignId});this.knowledgeService.updateCountersign(c).subscribe(function(e){t.closeModal(),t.notificationService.success(t.translate.instant("UPDATE_SUCCESS"),"")},function(){})}},e.prototype.getUrl=function(e){var t=this.currentDomain,n=this.sn;return{doc:location.origin+"/domains/"+t+"/wiki/"+n+"?shared_by="+this.currentUserId,document:location.origin+"/domains/"+t+"/wiki/"+n+"?shared_by="+this.currentUserId}[e.category]},e.prototype.ngAfterViewInit=function(){setTimeout(function(){document.getElementById("focusMove").blur()},200)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](He),o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](L.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["initiate-countersign-model"]],inputs:{shareDetail:"shareDetail",espaceParams:"espaceParams",isCreateCountersign:"isCreateCountersign",currentDomain:"currentDomain",sn:"sn",currentUserId:"currentUserId"},outputs:{modelShowCloseChange:"modelShowCloseChange"},features:[o["\u0275\u0275ProvidersFeature"]([He])],decls:34,vars:32,consts:[["nzClassName","initiate-countersign-model",3,"nzVisible","nzClosable","nzFooter","nzWidth"],[1,"share-content"],[1,"share-content-header"],[1,"f-18",3,"textContent"],[1,"iconfont","icon-close","cursor-pointer","position-a","user-tip-close",3,"click"],[1,"share-content-body"],[1,"send-user"],[1,"p-b-5"],[3,"textContent"],["class","espace-list",4,"ngIf"],["class","p-t-0 p-b-15 checkbox","style","padding-left: 20px;",4,"ngIf"],["clickElementOutside","",1,"espace-search-box","position-r",3,"clickOutside"],["class","tip-info",4,"ngIf"],[1,"espace-search-input"],[1,"fa","fa-search","fa-fw","cursor-pointer"],["id","focusMove","type","search","autocomplete","off","autocorrect","off","autocapitalize","off","autofocus","false",3,"placeholder","ngModel","ngModelChange","focus","compositionend","compositionstart"],[1,"position-a","f-12","espace-search-result-wrapper",3,"hidden"],[1,"espace-search-result"],["class","p-10 espace-search-result-person",3,"hidden",4,"ngIf"],[4,"ngIf"],[1,"m-t-20","m-b-30"],[1,"req-key","p-b-5",3,"textContent"],[1,"txt-l","p-l-n"],["rows","6",1,"ant-input",3,"placeholder","ngModel","ngModelChange"],[1,"share-content-footer"],["type","button",1,"f-14","btn-primary","confirm-btn-styl",3,"disabled","textContent","click"],[1,"espace-list"],["class","m-r-10 position-r",3,"mouseover","mouseout",4,"ngFor","ngForOf"],[1,"m-r-10","position-r",3,"mouseover","mouseout"],["class","img-wrapper-styl m-r-5",4,"ngIf"],["width","24","height","24","class","session-profile display-inline","src","/knowledge-ui/assets/imgs/espace_group.png",4,"ngIf"],["width","24","height","24","class","session-profile display-inline","src","/knowledge-ui/assets/imgs/espace_message.png",4,"ngIf"],["class","m-l-10 box-inline text-omit",4,"ngIf"],["class","iconfont icon-trash cursor-pointer remove-item",3,"hidden","click",4,"ngIf"],[1,"img-wrapper-styl","m-r-5"],[3,"src"],["class","img-judge-correct img-judge-correct-right",4,"ngIf"],["class","img-judge-correct img-judge-correct-error",4,"ngIf"],[1,"img-judge-correct","img-judge-correct-right"],[1,"iconfont","icon-right"],[1,"img-judge-correct","img-judge-correct-error"],[1,"iconfont","icon-cancel"],["width","24","height","24","src","/knowledge-ui/assets/imgs/espace_group.png",1,"session-profile","display-inline"],["width","24","height","24","src","/knowledge-ui/assets/imgs/espace_message.png",1,"session-profile","display-inline"],[1,"m-l-10","box-inline","text-omit"],[1,"iconfont","icon-trash","cursor-pointer","remove-item",3,"hidden","click"],[1,"p-t-0","p-b-15","checkbox",2,"padding-left","20px"],["type","checkbox",1,"pointer-cursor",3,"checked","click"],[1,"env-option-label","f-13",3,"textContent"],[1,"tip-info"],[1,"fa","fa-exclamation-triangle","m-r-5"],[1,"p-10","espace-search-result-person",3,"hidden"],[1,"p-b-5","result-person-span"],["class","cursor-pointer",3,"click",4,"ngIf"],["class","cursor-pointer",3,"click",4,"ngFor","ngForOf"],["class","cursor-pointer f-14 more-contact-styl",3,"click",4,"ngIf"],[1,"cursor-pointer",3,"click"],[1,"fa","fa-reply"],[3,"account","width","height"],[1,"m-l-10"],[1,"pull-right","office_name"],[1,"cursor-pointer","f-14","more-contact-styl",3,"click"],[1,"fa","m-r-3","fa-angle-right","pull-right","f-20"],["class","fill-exrea-styl",4,"ngIf"],["class","p-10",4,"ngIf"],[1,"fill-exrea-styl"],[1,"p-10"],[1,"p-b-5","group-title-wrapper"],["class","cursor-pointer ",3,"click",4,"ngIf"],["class","cursor-pointer ",3,"click",4,"ngFor","ngForOf"],["width","24","height","24","class","session-profile display-inline ","src","/knowledge-ui/assets/imgs/espace_group.png",4,"ngIf"],["width","24","height","24","class","session-profile display-inline ","src","/knowledge-ui/assets/imgs/espace_message.png",4,"ngIf"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nz-modal",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275element"](3,"span",3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementStart"](5,"i",4),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",5),o["\u0275\u0275elementStart"](7,"div",6),o["\u0275\u0275elementStart"](8,"div",7),o["\u0275\u0275element"](9,"span",8),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementStart"](11,"span"),o["\u0275\u0275text"](12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](13,ot,2,1,"div",9),o["\u0275\u0275template"](14,rt,4,4,"div",10),o["\u0275\u0275elementStart"](15,"div",11),o["\u0275\u0275listener"]("clickOutside",function(){return t.clickOutsideFunc()}),o["\u0275\u0275template"](16,at,5,3,"div",12),o["\u0275\u0275elementStart"](17,"div",13),o["\u0275\u0275element"](18,"i",14),o["\u0275\u0275elementStart"](19,"input",15),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectValue=e})("focus",function(){return t.searchInputFocus()})("compositionend",function(){return t.inputFlag=!0})("compositionstart",function(){return t.inputFlag=!1})("ngModelChange",function(e){return t.userQuestionUpdate.next(e)}),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",16),o["\u0275\u0275elementStart"](22,"div",17),o["\u0275\u0275template"](23,dt,9,11,"div",18),o["\u0275\u0275template"](24,bt,3,2,"ng-container",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"div",20),o["\u0275\u0275element"](26,"div",21),o["\u0275\u0275pipe"](27,"translate"),o["\u0275\u0275elementStart"](28,"div",22),o["\u0275\u0275elementStart"](29,"textarea",23),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.espaceShareContent=e}),o["\u0275\u0275pipe"](30,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"div",24),o["\u0275\u0275elementStart"](32,"button",25),o["\u0275\u0275listener"]("click",function(){return t.createPush()}),o["\u0275\u0275pipe"](33,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",552),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,20,t.isCreateCountersign?"COUNTERSIGN":"REVIEWERS_SETTING")),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](10,22,"INVITE_JUDGES")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"]("("+t.update_owners.length+")"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.update_owners.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.canCreateGroup&&t.isCreateCountersign),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.update_owners&&t.update_owners.length&&t.update_owners[0].group_name),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](20,24,"INVITE_JUDGES_SEARCH_PLACEHOLDER"))("ngModel",t.selectValue),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",!t.result_show),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.showUser&&t.availableMembers.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!(t.update_owners&&t.update_owners.length)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](27,26,"ESPACE_MESSAGE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](30,28,"KNOWLEDGE_BASE_COMMENT_PLACEHOLDER"))("ngModel",t.espaceShareContent),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!t.update_owners.length)("textContent",o["\u0275\u0275pipeBind1"](33,30,"ESPACE_SEND")))},directives:[z.a,F.n,qe.a,U.d,U.k,U.l,F.m,$e.a],pipes:[A.b,Ke.a,F.v],styles:['.initiate-countersign-model .ant-modal-body{padding:0}.share-content[_ngcontent-%COMP%]{position:relative;background-color:#fff;background-clip:padding-box;border:0;border-radius:4px;box-shadow:0 4px 12px rgba(0,0,0,.15);pointer-events:auto;min-height:400px;width:552px}.share-content[_ngcontent-%COMP%]   .share-content-header[_ngcontent-%COMP%]{padding:16px 24px;color:rgba(0,0,0,.65);background:#fff;border-bottom:1px solid #e5e5e5;border-radius:4px 4px 0 0;position:relative}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]{padding:24px 24px 0;font-size:14px;line-height:1.5;word-wrap:break-word}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-input[_ngcontent-%COMP%]{border:1px solid #d9d9d9;width:100%;display:flex;padding:3px;border-radius:3px}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-input[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:30px;height:25px;line-height:25px;color:#d9d9d9}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;outline:none;border:none}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result-wrapper[_ngcontent-%COMP%]{width:100%;z-index:1}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result[_ngcontent-%COMP%]{width:100%;border:1px solid #d9d9d9;border-top:none;background-color:#fff;z-index:1;max-height:410px;height:100%;overflow-y:scroll}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result[_ngcontent-%COMP%]   .espace-search-result-person[_ngcontent-%COMP%]{padding-bottom:0}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result[_ngcontent-%COMP%]   .espace-search-result-person[_ngcontent-%COMP%]   .result-person-span[_ngcontent-%COMP%]{display:block;color:#b3b2b2}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{height:30px;background:#999;width:16px;border-radius:8px}.share-content[_ngcontent-%COMP%]   .share-content-body[_ngcontent-%COMP%]   .espace-search-result[_ngcontent-%COMP%]::-webkit-scrollbar-track{display:none}.more-contact-styl[_ngcontent-%COMP%]{padding:8px 0}.fill-exrea-styl[_ngcontent-%COMP%]{height:10px;background-color:#f0f0f0}.group-title-wrapper[_ngcontent-%COMP%]{display:block;color:#b3b2b2}.user-photo[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%}.office_name[_ngcontent-%COMP%], .user-photo[_ngcontent-%COMP%]{display:inline-block;overflow:hidden}.office_name[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;max-width:370px;text-align:right;color:#b3b2b2}.ant-input[_ngcontent-%COMP%]{max-width:100%;height:auto;min-height:128px;vertical-align:bottom;transition:all .3s,height 0s;resize:none;outline:none;padding:0 5px;box-sizing:border-box;margin:0;font-variant:tabular-nums;list-style:none;font-feature-settings:"tnum";position:relative;display:inline-block;width:100%;height:32px;color:rgba(0,0,0,.65);font-size:14px;line-height:1.5;background-color:#fff;background-image:none;border:1px solid #d9d9d9;border-radius:4px;transition:all .3s}.espace-list[_ngcontent-%COMP%]{padding:10px 0;max-height:125px;overflow:auto;margin-bottom:15px;display:flex;flex-wrap:wrap}.espace-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;align-items:center;display:flex;float:left;width:230px;height:34px;padding:5px 20px 5px 5px}.espace-list[_ngcontent-%COMP%]:after{content:"";display:block;clear:both}.m-b-30[_ngcontent-%COMP%]{margin-bottom:30px}.remove-item[_ngcontent-%COMP%]{color:#666;display:inline-block;width:14px;height:14px;border-radius:50%;text-align:center;line-height:13px;top:calc(50% - 5) px;right:6px;padding:0 1px;font-size:16px;font-weight:700;position:absolute}.user-tip-close[_ngcontent-%COMP%]{font-size:30px;right:20px;top:5px;line-height:1.5}.text-omit[_ngcontent-%COMP%]{word-break:break-all;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.espace-search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:4px 0;line-height:30px;border-bottom:1px solid #e5e5e5}.espace-search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#f2f2f2;cursor:pointer}.tip-info[_ngcontent-%COMP%]{font-size:12px;margin-bottom:3px;color:orange}li[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{padding:0;margin:0;list-style-type:none}.img-wrapper-styl[_ngcontent-%COMP%]{position:relative}.img-wrapper-styl[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:50%}.img-wrapper-styl[_ngcontent-%COMP%]   .pass-img[_ngcontent-%COMP%]{border:1px solid #23c6c8}.img-wrapper-styl[_ngcontent-%COMP%]   .not-pass-img[_ngcontent-%COMP%]{border:1px solid #e23237}.img-wrapper-styl[_ngcontent-%COMP%]   .img-judge-correct[_ngcontent-%COMP%]{position:absolute;width:10px;height:10px;border-radius:50%;top:-2px;right:-2px}.img-wrapper-styl[_ngcontent-%COMP%]   .img-judge-correct[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;color:#fff;position:absolute;top:-3px;right:-1px;transform:scale(.65)}.img-wrapper-styl[_ngcontent-%COMP%]   .img-judge-correct-right[_ngcontent-%COMP%]{background:#23c6c8}.img-wrapper-styl[_ngcontent-%COMP%]   .img-judge-correct-error[_ngcontent-%COMP%]{background:#e23237}.img-wrapper-styl[_ngcontent-%COMP%]   .img-judge-correct-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:-4px}.share-content-footer[_ngcontent-%COMP%]{padding:0 24px 20px;text-align:right}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]{padding:1px 6px;border:none;outline:none}.share-content-footer[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]:disabled{background:rgba(35,198,200,.5);opacity:.5}.btn-primary.btn-outline.c-btn-line[_ngcontent-%COMP%]:after{background-color:#1ab394}.btn-primary.btn-outline.c-btn-border-line.success[_ngcontent-%COMP%]:before{border-bottom-color:#1ab394;border-left-color:#1ab394}.btn-primary.btn-outline.c-btn-border-line.success[_ngcontent-%COMP%]:after{border-top-color:#1ab394;border-right-color:#1ab394}']}),e}(),yt=n("jhN1"),xt=n("lR5k"),wt=n("ZV1T");function _t(e,t){if(1&e&&o["\u0275\u0275element"](0,"nz-option",34),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("nzLabel",i.workItemAttr(n))("nzValue",n)("nzHide",i.isNotSelected1(n))}}function Ot(e,t){if(1&e&&o["\u0275\u0275element"](0,"nz-option",34),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("nzLabel",i.workItemAttr(n))("nzValue",n)("nzHide",i.isNotSelected2(n))}}function St(e,t){1&e&&(o["\u0275\u0275element"](0,"div",35),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](1,1,"VALUE_UNFILLED"))}function Et(e,t){if(1&e&&o["\u0275\u0275element"](0,"markdown",40),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("data",n.emailData.description)}}function Mt(e,t){if(1&e&&o["\u0275\u0275element"](0,"div",41),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("innerHTML",n.emailData.description,o["\u0275\u0275sanitizeHtml"])}}function Pt(e,t){if(1&e&&(o["\u0275\u0275element"](0,"div",41),o["\u0275\u0275pipe"](1,"date")),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind2"](1,1,n.emailData.description,"yyyy-MM-dd"),o["\u0275\u0275sanitizeHtml"])}}function It(e,t){if(1&e&&o["\u0275\u0275element"](0,"div",41),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("innerHTML",n.emailData.description,o["\u0275\u0275sanitizeHtml"])}}function kt(e,t){1&e&&o["\u0275\u0275element"](0,"span",41),2&e&&o["\u0275\u0275property"]("innerHTML",t.$implicit,o["\u0275\u0275sanitizeHtml"])}function Tt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275template"](1,kt,1,1,"span",42),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.emailData.description)}}function Dt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275template"](1,Tt,2,1,"span",39),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.emailData.description)}}function At(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",36),o["\u0275\u0275template"](1,Et,1,1,"markdown",37),o["\u0275\u0275template"](2,Mt,1,1,"div",38),o["\u0275\u0275template"](3,Pt,2,4,"div",38),o["\u0275\u0275template"](4,It,1,1,"div",38),o["\u0275\u0275template"](5,Dt,2,1,"div",39),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","Markdown"===n.emailData.text_format),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","RTF"===n.emailData.text_format),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","input"===n.emailData.text_format),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","select"===n.emailData.text_format),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","radio"===n.emailData.text_format)}}var zt=function(){function e(e,t,n,i,r){var a=this;this.activeRoute=e,this.knowledgeService=t,this.translate=n,this.notificationService=i,this.sanitized=r,this.selectedToUser=[],this.selectedCcUser=[],this.availableMembers=[],this.isEmptyValue=k.a,this.modelShowCloseChange=new o.EventEmitter,this.listOfOption=["Apples","Nails","Bananas","Helicopters","Apples1","Nails1","Bananas1","Helicopters1"],this.listOfSelectedValue=[],this.sendEmail=function(){var e=a.getTemplateVal("block"),t=a.matchVal(a.emailTemplate,e),n=a.mapArr(a.selectedToUser,"email"),i=a.mapArr(a.selectedCcUser,"email");t=t.replace(/src="\//g,'src="https://wa.vision.huawei.com/'),a.knowledgeService.sendEmail([{title:a.emailSubject,context:t,to_users:n,to_cc_users:i}]).subscribe(function(e){e&&(a.closeModal(),a.notificationService.success(a.translate.instant("SUCCESS_TO_SAND"),""))},function(){})},this.getUrl=function(e){switch(e.category){case"doc":return location.href;default:return location.origin}},this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(e){e&&(a.username=e.user_name_zh+" "+e.huawei_id)})}return e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe()},e.prototype.isNotSelected1=function(e){return this.selectedToUser.some(function(t){return t.email==e.email})},e.prototype.isNotSelected2=function(e){return this.selectedCcUser.some(function(t){return t.email==e.email})},e.prototype.queryUsers=function(e){var t=this;e&&0!=e.length?this.knowledgeService.queryUsers(e).subscribe(function(e){t.availableMembers=e},function(){}):this.intUsersData()},e.prototype.mapArr=function(e,t){for(var n=[],i=e.length,o=0;o<i;o++)n.push(e[o][t]);return n},e.prototype.getEmailTemplate=function(){var e=this;this.knowledgeService.queryEmailTemplate({user_scenario:this.emailData.category}).subscribe(function(t){e.emailTemplate=t.content},function(){})},e.prototype.getTemplateVal=function(e){var t={to_users_name:1==this.selectedToUser.length?this.selectedToUser[0].name+" "+this.selectedToUser[0].account:"Vision\u7528\u6237",share_name:this.username,domain_id:this.currentDomain,id:this.emailData.id,title:this.emailSubject,show_des:e,description:this.emailData.description||this.translate.instant("VALUE_UNFILLED"),message:this.emailMessage?this.emailMessage:"\u8bf7\u5927\u5bb6\u4e00\u8d77\u5ba1\u9605",url:this.getUrl(this.emailData)};return this.emailParams&&(this.emailParams.category=this.emailParams.category?this.translate.instant(this.emailParams.category):"",Object.assign(t,this.emailParams)),t},e.prototype.matchVal=function(e,t){if(e)return Object(k.a)(t)||Object.keys(t).forEach(function(n){var i=t[n];i&&(e=e.replace("{"+n+"}",i))}),e},e.prototype.closeModal=function(){this.modelShowCloseChange.emit(!1)},e.prototype.ngOnInit=function(){var e=this;this.activeRoute.paramMap.subscribe(function(t){e.currentDomain=e.activeRoute.snapshot.parent.params.domain_id,e.bulidEmailDate()}),this.domainId&&(this.currentDomain=this.domainId,this.bulidEmailDate()),this.intUsersData(),this.getEmailTemplate()},e.prototype.bulidEmailDate=function(){this.emailParams={sn:this.articleDetail.sn},this.emailData={category:"doc",id:this.articleDetail.id,title:this.articleDetail.title},this.emailSubject=this.emailData.title,this.articleDetail.ui_source&&2==this.articleDetail.ui_source?(this.emailData.text_format="Markdown",this.emailData.description=this.articleDetail.description):(this.emailData.text_format="RTF",this.emailData.description=this.to_trusted(this.articleDetail.description))},e.prototype.to_trusted=function(e){return this.sanitized.bypassSecurityTrustHtml(e)},e.prototype.intUsersData=function(){var e=this;Object(k.a)(this.currentDomain)||this.knowledgeService.query_members(this.currentDomain).subscribe(function(t){var n;if(!Object(k.a)(t)){var o=t.data.self_members.members.map(function(e){return e.user});(n=e.availableMembers).unshift.apply(n,Object(i.i)(o)),e.availableMembers=e.unionByFunc(e.availableMembers,"account")}},function(){})},e.prototype.getDiffObj=function(e,t,n){return e.some(function(e){return e[t]==n})},e.prototype.unionByFunc=function(e,t){for(var n=[],i=e.length,o=0;o<i;o++)this.getDiffObj(n,t,e[o][t])||n.push(e[o]);return n},e.prototype.workItemAttr=function(e){return Object(k.a)(e)?null:"en"==this.translate.currentLang&&e.name_full?e.name_full:e.name+" "+e.account},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](D.a),o["\u0275\u0275directiveInject"](E.b),o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](L.b),o["\u0275\u0275directiveInject"](yt.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["article-email-share"]],inputs:{articleDetail:"articleDetail",domainId:"domainId"},outputs:{modelShowCloseChange:"modelShowCloseChange"},decls:72,vars:65,consts:[["nzWrapClassName","emailShare",3,"nzVisible","nzClosable","nzFooter"],[1,"flex-box"],[1,"flex-cell","position-r","email-wrapper"],[1,"position-r",2,"height","100%"],[1,"m-r-15","full-scroll-styl"],[1,"fixed_wrap"],[1,"email-title"],[1,"modal-part-title"],[1,"flex-cell","p-l-10","f-18","f-bold",3,"textContent"],["type","button",1,"btn","btn-default","send",3,"disabled","click"],[1,"btn-img","m-r-10","iconfont","icon-paper-plane"],[3,"textContent"],[1,"email-content","m-t-md"],[1,"form-group","m-b-md","flex-box","flex-center"],[1,"box-inline","tip-info"],[1,"m-r-10","label-icon-styl","iconfont","icon-ren"],[1,"required-item",3,"textContent"],[1,"required-styl"],[1,"select-people"],["nzMode","multiple",3,"nzServerSearch","nzShowArrow","nzNotFoundContent","nzPlaceHolder","ngModel","nzOnSearch","ngModelChange"],[3,"nzLabel","nzValue","nzHide",4,"ngFor","ngForOf"],[1,"m-r-10","label-icon-styl","iconfont","icon-members"],["src","/knowledge-ui/assets/imgs/subject.png",1,"pro-img","m-r-10"],["type","text",1,"subject-inp",3,"ngModel","ngModelChange"],["rows","3",1,"email-message",3,"placeholder","ngModel","ngModelChange"],[1,"flex-box","position-r","email-title"],[1,"modal-part-title","flex-cell","f-weight7"],[1,"p-l-10","f-18","f-bold",3,"textContent"],[1,"email-preview-content","m-t-md"],[2,"min-height","120px",3,"innerHTML"],["style","margin-left: 2em",3,"textContent",4,"ngIf"],["style","margin-left: 2em",4,"ngIf"],[1,"box-inline","text-white","m-l-xs","pointer-cursor","right-close-btn",3,"click"],[1,"x-style","iconfont","colse","icon-close",2,"font-size","24px"],[3,"nzLabel","nzValue","nzHide"],[2,"margin-left","2em",3,"textContent"],[2,"margin-left","2em"],[3,"data",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],[3,"data"],[3,"innerHTML"],[3,"innerHTML",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nz-modal",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"div",5),o["\u0275\u0275elementStart"](6,"div",6),o["\u0275\u0275elementStart"](7,"div",7),o["\u0275\u0275element"](8,"span",8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"button",9),o["\u0275\u0275listener"]("click",function(){return t.sendEmail()}),o["\u0275\u0275element"](11,"i",10),o["\u0275\u0275element"](12,"span",11),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div"),o["\u0275\u0275elementStart"](15,"div",12),o["\u0275\u0275elementStart"](16,"div",13),o["\u0275\u0275elementStart"](17,"div",14),o["\u0275\u0275element"](18,"i",15),o["\u0275\u0275element"](19,"span",16),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementStart"](21,"span",17),o["\u0275\u0275text"](22,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",18),o["\u0275\u0275elementStart"](24,"nz-select",19),o["\u0275\u0275listener"]("nzOnSearch",function(e){return t.queryUsers(e)})("ngModelChange",function(e){return t.selectedToUser=e}),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275template"](27,_t,1,3,"nz-option",20),o["\u0275\u0275pipe"](28,"slice"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",13),o["\u0275\u0275elementStart"](30,"div",14),o["\u0275\u0275element"](31,"i",21),o["\u0275\u0275elementStart"](32,"span",11),o["\u0275\u0275pipe"](33,"translate"),o["\u0275\u0275text"](34,"\u6284\u9001\u4eba"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](35,"div",18),o["\u0275\u0275elementStart"](36,"nz-select",19),o["\u0275\u0275listener"]("nzOnSearch",function(e){return t.queryUsers(e)})("ngModelChange",function(e){return t.selectedCcUser=e}),o["\u0275\u0275pipe"](37,"translate"),o["\u0275\u0275pipe"](38,"translate"),o["\u0275\u0275template"](39,Ot,1,3,"nz-option",20),o["\u0275\u0275pipe"](40,"slice"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](41,"div",13),o["\u0275\u0275elementStart"](42,"div",14),o["\u0275\u0275element"](43,"img",22),o["\u0275\u0275elementStart"](44,"span",16),o["\u0275\u0275pipe"](45,"translate"),o["\u0275\u0275text"](46,"\u90ae\u4ef6\u4e3b\u9898"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](47,"span",17),o["\u0275\u0275text"](48,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](49,"div",18),o["\u0275\u0275elementStart"](50,"input",23),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.emailSubject=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](51,"div",13),o["\u0275\u0275elementStart"](52,"div",14),o["\u0275\u0275element"](53,"img",22),o["\u0275\u0275elementStart"](54,"span",11),o["\u0275\u0275pipe"](55,"translate"),o["\u0275\u0275text"](56,"\u7559\u8a00"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](57,"div",18),o["\u0275\u0275elementStart"](58,"textarea",24),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.emailMessage=e}),o["\u0275\u0275pipe"](59,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](60,"div",25),o["\u0275\u0275elementStart"](61,"div",26),o["\u0275\u0275elementStart"](62,"span",27),o["\u0275\u0275pipe"](63,"translate"),o["\u0275\u0275text"](64,"\u90ae\u4ef6\u9884\u89c8"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](65,"div",28),o["\u0275\u0275element"](66,"div",29),o["\u0275\u0275pipe"](67,"to_trusted"),o["\u0275\u0275template"](68,St,2,3,"div",30),o["\u0275\u0275template"](69,At,6,5,"div",31),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](70,"div",32),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275element"](71,"i",33),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](9,31,"PUSH_MESSAGE_TIP")),o["\u0275\u0275advance"](2),o["\u0275\u0275classMap"](t.selectedToUser.length>0?"can-send-styl":""),o["\u0275\u0275property"]("disabled",t.isEmptyValue(t.emailSubject)||t.isEmptyValue(t.selectedToUser)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](13,33,"ESPACE_SEND")),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](20,35,"To")),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("nzServerSearch",!0)("nzShowArrow",!1)("nzNotFoundContent",o["\u0275\u0275pipeBind1"](25,37,"CUSTOM_NO_MATCHING_USER"))("nzPlaceHolder",o["\u0275\u0275pipeBind1"](26,39,"TAB_REVIEW_CHOSE"))("ngModel",t.selectedToUser),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind3"](28,41,t.availableMembers,0,50)),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](33,45,"Cc")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("nzServerSearch",!0)("nzShowArrow",!1)("nzNotFoundContent",o["\u0275\u0275pipeBind1"](37,47,"CUSTOM_NO_MATCHING_USER"))("nzPlaceHolder",o["\u0275\u0275pipeBind1"](38,49,"TAB_REVIEW_CHOSE"))("ngModel",t.selectedCcUser),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind3"](40,51,t.availableMembers,0,50)),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](45,55,"EMAIL_SUBJECT")),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngModel",t.emailSubject),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](55,57,"ESPACE_MESSAGE")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](59,59,"KNOWLEDGE_BASE_COMMENT_PLACEHOLDER"))("ngModel",t.emailMessage),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](63,61,"EMAIL_PREVIEW")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](67,63,t.matchVal(t.emailTemplate,t.getTemplateVal("none"))),o["\u0275\u0275sanitizeHtml"]),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isEmptyValue(t.emailData.description)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.emailData.text_format&&t.emailData.description))},directives:[z.a,Ce.e,U.k,U.l,F.m,U.d,F.n,Ce.a,xt.a],pipes:[A.b,F.v,wt.a,F.e],styles:[".emailShare .ant-modal{width:67vw!important}  .emailShare .ant-modal .ant-modal-body{height:80vh;overflow-y:scroll}  .emailShare .ant-modal .ant-modal-body::-webkit-scrollbar{width:0!important}  .emailShare .flex-box{width:100%;display:flex}  .emailShare .flex-box .email-wrapper{background-color:#fff;padding:30px;width:100%}  .emailShare .flex-box .email-wrapper img{max-width:100%}  .emailShare .flex-box .full-scroll-styl{overflow:hidden;width:auto;height:100%}  .emailShare .flex-box .full-scroll-styl .fixed_wrap{height:30px}  .emailShare .flex-box .full-scroll-styl .fixed_wrap .email-title{display:flex;justify-content:space-between;background-color:#fff}  .emailShare .flex-box .full-scroll-styl .fixed_wrap .email-title .modal-part-title{line-height:30px}  .emailShare .flex-box .full-scroll-styl .fixed_wrap .email-title .modal-part-title span{border-left:5px solid #23c6c8}  .emailShare .flex-box .full-scroll-styl .fixed_wrap .email-title .send{width:80px;height:30px;text-align:right;border:1px solid #d9d9d9;font-size:12px;color:#cacaca;display:flex;align-items:center}  .emailShare .flex-box .full-scroll-styl .fixed_wrap .email-title .btn.disabled,   .emailShare .flex-box .full-scroll-styl .fixed_wrap .email-title .btn[disabled]{cursor:not-allowed;filter:alpha(opacity=65);opacity:.65;box-shadow:none;background:#fff}  .emailShare .flex-box .full-scroll-styl .fixed_wrap .email-title .can-send-styl{color:#666}  .emailShare .flex-box .full-scroll-styl .fixed_wrap .email-title .can-send-styl:hover{border-color:#23c6c8;color:#23c6c8;background:#fff}  .emailShare .flex-box .full-scroll-styl .email-content .form-group{min-height:22px}  .emailShare .flex-box .full-scroll-styl .email-content .form-group .tip-info{width:110px}  .emailShare .flex-box .full-scroll-styl .email-content .form-group .tip-info .label-icon-styl{font-size:20px;color:#999}  .emailShare .flex-box .full-scroll-styl .email-content .form-group .pro-img{width:20px;height:20px;vertical-align:text-bottom}  .emailShare .flex-box .full-scroll-styl .email-content .form-group .select-people{min-height:32px;width:90%;display:flex;align-items:center;max-height:86px;overflow-y:scroll;-ms-overflow-style:none;border:1px solid #f2f2f2}  .emailShare .flex-box .full-scroll-styl .email-content .form-group .select-people .subject-inp{padding:0 5px;min-height:32px;width:100%;outline:none;border:1px solid #e5e6e7}  .emailShare .flex-box .full-scroll-styl .email-content .form-group .select-people .email-message{width:100%;border:1px solid #e5e6e7;outline:none;resize:none;padding:0 5px}  .emailShare .flex-box .full-scroll-styl .email-content .form-group .select-people .ant-select{width:100%}  .emailShare .flex-box .full-scroll-styl .email-content .form-group .select-people::-webkit-scrollbar{width:0!important}  .emailShare .btn-img{width:17px;height:17px}  .emailShare .right-close-btn{position:absolute;top:-10px;right:-2vw}.required-styl[_ngcontent-%COMP%]{color:#f5222d;margin-left:4px;font-size:14px}"]}),e}(),Rt=n("rMZv");function Lt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.title)}}function Nt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",13),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275propertyInterpolate"]("nzTooltipTitle",n.baselineStateTips),o["\u0275\u0275property"]("nzTooltipPlacement","top"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.baselineTitle," ")}}function jt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"th",11),o["\u0275\u0275template"](1,Lt,2,1,"span",4),o["\u0275\u0275template"](2,Nt,2,3,"span",12),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.index;o["\u0275\u0275property"]("nzAlign",n.align)("nzWidth",n.width),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",4!==i),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",4===i)}}function Vt(e,t){1&e&&o["\u0275\u0275element"](0,"img",20)}function Ft(e,t){1&e&&o["\u0275\u0275element"](0,"img",21)}var Bt=function(e){return{num:e}};function Ut(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",22),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](2,1,"SUB_FILES_NUMBER",o["\u0275\u0275pureFunction1"](4,Bt,null==n?null:n.childrenSize)),"")}}function Wt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",23),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.created_by.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.created_by.username)}}function Ht(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td",14),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).getDetails(e)}),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275template"](3,Vt,1,0,"img",15),o["\u0275\u0275template"](4,Ft,1,0,"img",16),o["\u0275\u0275elementStart"](5,"span",17),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,Ut,3,6,"span",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"td",19),o["\u0275\u0275template"](9,Wt,5,2,"span",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"td",19),o["\u0275\u0275text"](11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"td",19),o["\u0275\u0275text"](13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"td",19),o["\u0275\u0275text"](15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!(null!=i&&i.childrenSize)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==i?null:i.childrenSize),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.title),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==i?null:i.childrenSize),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.created_by),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.create_time),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.last_update_time),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](r.getRevisionRecord(i.revision_record_title))}}function Gt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",5),o["\u0275\u0275element"](2,"span",6),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"nz-table",7,8),o["\u0275\u0275listener"]("nzPageIndexChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().nzPageIndexChange(e)})("nzPageIndexChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().pageIndex=e}),o["\u0275\u0275elementStart"](8,"thead"),o["\u0275\u0275elementStart"](9,"tr"),o["\u0275\u0275template"](10,jt,3,4,"th",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"tbody"),o["\u0275\u0275template"](12,Ht,16,8,"tr",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275reference"](7),r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](5,8,"SUB_FILES_NUMBER",o["\u0275\u0275pureFunction1"](11,Bt,null==r.subFile?null:r.subFile.total))),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzData",null==r.subFile||null==r.subFile.wikiSubFile?null:r.subFile.wikiSubFile.children)("nzPageSize",10)("nzTotal",null==r.subFile?null:r.subFile.total)("nzFrontPagination",!1)("nzPageIndex",r.pageIndex),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngForOf",r.fileListHead),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",i.data)}}var qt=function(){function e(e,t){this.translate=e,this.knowledgeService=t,this.getArticleDetails=new o.EventEmitter,this.hiddenShowFileDetail=new o.EventEmitter,this.pageIndex=1}return Object.defineProperty(e.prototype,"baselineTotal",{get:function(){return this.subFile.revisionRecords+this.subFile.unRevisionRecords},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baselineStateTips",{get:function(){return this.translate.instant("BASELINE_STATE_TIPS",{total:this.baselineTotal,baselined:this.subFile.revisionRecords,not_baselined:this.subFile.unRevisionRecords})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baselineTitle",{get:function(){return this.translate.instant("BASELINE_STATE","")+" ("+this.baselineTotal+"/"+this.subFile.revisionRecords+"/"+this.subFile.unRevisionRecords+")"},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.subFile=null,this.fileListHead=[{title:this.translate.instant("TITLE",""),align:"left",width:"25%"},{title:this.translate.instant("CREATOR",""),align:"left",width:"20%"},{title:this.translate.instant("CREATE_TIME",""),align:"left",width:"15%"},{title:this.translate.instant("UPDATE_TIME",""),align:"left",width:"15%"},{title:this.translate.instant("BASELINE_STATE",""),align:"left",width:"25%"}],this.getSubFileList()},e.prototype.getSubFileList=function(e){var t,n=this,i={sn:null===(t=this.fileDetails)||void 0===t?void 0:t.sn,pageSize:10,currentPage:e||1,request_tag:(new Date).getTime().toString()};this.knowledgeService.getSubFileList(i).subscribe(function(e){n.subFile=e},function(){})},e.prototype.getRevisionRecord=function(e){return e||this.translate.instant("NOT_BASELINEd")},e.prototype.nzPageIndexChange=function(e){this.pageIndex=e,this.getSubFileList(e)},e.prototype.backMainContentPage=function(){this.hiddenShowFileDetail.emit(!1)},e.prototype.getDetails=function(e){this.getArticleDetails.emit(e)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](E.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["folder-list"]],inputs:{fileDetails:"fileDetails"},outputs:{getArticleDetails:"getArticleDetails",hiddenShowFileDetail:"hiddenShowFileDetail"},decls:6,vars:4,consts:[[1,"file-list-items"],[1,"back-btn",3,"click"],[1,"iconfont","icon-back","icon-back-style"],[3,"textContent"],[4,"ngIf"],[1,"file-title"],[1,"iconfont","icon-article-point","f-18"],[3,"nzData","nzPageSize","nzTotal","nzFrontPagination","nzPageIndex","nzPageIndexChange"],["fileTable",""],["class","thead-style",3,"nzAlign","nzWidth",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"thead-style",3,"nzAlign","nzWidth"],["class","cursor-pointer","nz-tooltip","",3,"nzTooltipPlacement","nzTooltipTitle",4,"ngIf"],["nz-tooltip","",1,"cursor-pointer",3,"nzTooltipPlacement","nzTooltipTitle"],[1,"cursor-pointer","title-style",3,"click"],["src","/knowledge-ui/assets/imgs/article_icon.png",4,"ngIf"],["src","/knowledge-ui/assets/imgs/file_icon.png",4,"ngIf"],[1,"m-l-20","file-list-title"],["class","sub-articles",4,"ngIf"],[1,"table-style"],["src","/knowledge-ui/assets/imgs/article_icon.png"],["src","/knowledge-ui/assets/imgs/file_icon.png"],[1,"sub-articles"],[1,"m-l-5"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"span",1),o["\u0275\u0275listener"]("click",function(){return t.backMainContentPage()}),o["\u0275\u0275element"](2,"i",2),o["\u0275\u0275element"](3,"span",3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,Gt,13,13,"div",4),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,2,"COMMON_BTN_RETURN")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",null==t.subFile||null==t.subFile.wikiSubFile||null==t.subFile.wikiSubFile.children?null:t.subFile.wikiSubFile.children.length))},directives:[F.n,Rt.c,Rt.h,Rt.i,F.m,Rt.e,Rt.b,Rt.g,Rt.a,X.d],pipes:[A.b],styles:[".file-list-items[_ngcontent-%COMP%]{margin:20px 50px 60px 30px}.file-list-items[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .file-list-items[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none}.file-list-items[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px}.file-list-items[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.file-list-items[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{display:inline-block;border:1px solid #dbdbdb;border-radius:4px;color:#434343;width:74px;height:32px;text-align:center;line-height:30px;margin-bottom:20px;font-size:14px;cursor:pointer}.file-list-items[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:8px}.file-list-items[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   .icon-back-style[_ngcontent-%COMP%]{font-size:14px}.file-list-items[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{border-color:#23c6c8}.file-list-items[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover   .icon-back-style[_ngcontent-%COMP%], .file-list-items[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#23c6c8}.file-list-items[_ngcontent-%COMP%]   .file-title[_ngcontent-%COMP%]{color:#5f5f5f;font-weight:700;font-size:18px;margin:0 0 15px -8px}.file-list-items[_ngcontent-%COMP%]   .file-list-title[_ngcontent-%COMP%]{display:inline-block;max-width:60%;font-size:14px;color:#5f5f5f;margin-right:8px}.file-list-items[_ngcontent-%COMP%]   .sub-articles[_ngcontent-%COMP%]{display:inline-block;width:72px;height:20px;background-color:rgba(35,198,200,.15);border-radius:3px;text-align:center;line-height:20px;color:#23c6c8;font-size:12px}.file-list-items[_ngcontent-%COMP%]   .table-style[_ngcontent-%COMP%]{font-size:14px;color:#999}.file-list-items[_ngcontent-%COMP%]   .thead-style[_ngcontent-%COMP%]{background:#fff;font-weight:700;font-size:14px}.file-list-items[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .file-list-items[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border-bottom:1px solid #e8e8e8}"]}),e}(),$t=n("THGc");function Kt(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",12),o["\u0275\u0275element"](1,"i",13),o["\u0275\u0275elementEnd"]())}function Xt(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",14),o["\u0275\u0275element"](1,"i",15),o["\u0275\u0275elementEnd"]())}function Yt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",8),o["\u0275\u0275element"](1,"img",9),o["\u0275\u0275template"](2,Kt,2,0,"span",10),o["\u0275\u0275template"](3,Xt,2,0,"span",11),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzTooltipTitle",n.operator.name+" "+n.operator.account),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](n.failedStatus?"not-pass-img":n.passStatus?"pass-img":""),o["\u0275\u0275propertyInterpolate1"]("src","http://w3.huawei.com/w3lab/rest/yellowpage/face/",n.operator.account,"/45",o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.passStatus),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.failedStatus)}}function Qt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",16),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).updateJudgeListHandler()}),o["\u0275\u0275element"](1,"span",17),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzTooltipTitle",o["\u0275\u0275pipeBind1"](2,1,"REVIEWERS_SETTING")))}function Jt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",18),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).showReviewCountersign=!0}),o["\u0275\u0275element"](1,"span",19),o["\u0275\u0275elementStart"](2,"span"),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,1,"REVIEW_COUNTERSIGN")))}function Zt(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"coutersign-review-modal",20),o["\u0275\u0275listener"]("modelShowCloseChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).handleOperate(e)}),o["\u0275\u0275elementEnd"]()}}function en(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",1),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",3),o["\u0275\u0275template"](5,Yt,4,6,"span",4),o["\u0275\u0275template"](6,Qt,3,3,"span",5),o["\u0275\u0275template"](7,Jt,5,3,"span",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,Zt,1,0,"coutersign-review-modal",7),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,5,n.coutersignInfo&&1===n.coutersignInfo.status?"COUNTERSIGNING":"COUNTERSIGNED"),""),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",n.coutersignInfo.countersignUsers),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isUpdateJudgeOperate),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isUserOperate),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.showReviewCountersign)}}var tn=function(){function e(e,t,n,i){this.knowledgeService=e,this.translate=t,this.notification=n,this.emitService=i,this.isSreWiki=!1,this.refreshInfo=new o.EventEmitter,this.updateJudgeList=new o.EventEmitter,this.showReviewCountersign=!1}return e.prototype.ngOnChanges=function(e){e.coutersignInfo&&(this.getOperate(),this.buildUserStatus())},e.prototype.ngOnInit=function(){this.getUserInfo()},e.prototype.buildUserStatus=function(){this.coutersignInfo&&this.coutersignInfo.countersignUsers&&this.coutersignInfo.countersignUsers.forEach(function(e){e.passStatus=0===e.status,e.failedStatus=-1===e.status})},e.prototype.updateJudgeListHandler=function(){this.updateJudgeList.emit()},e.prototype.getUserInfo=function(){var e=this;this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&(e.userId=t.huawei_id)})},e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe()},e.prototype.getCoutersignInfo=function(){var e=this;this.knowledgeService.getCoutersignInfo(this.sn).subscribe(function(t){e.coutersignInfo=t.length?Object(i.a)({},t[0]):null,e.getOperate()},function(){})},e.prototype.getOperate=function(){var e=this;this.isUserOperate=this.coutersignInfo&&this.coutersignInfo.status===Ge&&this.coutersignInfo.countersignUsers&&this.coutersignInfo.countersignUsers.some(function(t){return t.operator.account===e.userId&&[Ge].includes(t.status)}),this.isUpdateJudgeOperate=this.coutersignInfo&&this.coutersignInfo.status===Ge&&this.userId===this.shareDetail.created_by.account},e.prototype.handleOperate=function(e){var t,n=this;if(this.showReviewCountersign=!1,e&&e.inputVal){var i={countersign_id:null===(t=this.coutersignInfo)||void 0===t?void 0:t.countersignId,status:e.reviewStatus,countersign_comment:e.inputVal};this.knowledgeService.updateCoutersignInfo(i).subscribe(function(){n.refreshInfo.emit(),n.notification.success(n.translate.instant("UPDATE_SUCCESS"),""),n.isSreWiki&&n.emitService.emit({type:"refresh-sre-wiki-status"})},function(){})}},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](E.b),o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](L.b),o["\u0275\u0275directiveInject"](R.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["countersign"]],inputs:{sn:"sn",coutersignInfo:"coutersignInfo",shareDetail:"shareDetail",isSreWiki:"isSreWiki"},outputs:{refreshInfo:"refreshInfo",updateJudgeList:"updateJudgeList"},features:[o["\u0275\u0275ProvidersFeature"]([E.b]),o["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[["class","coutersign",4,"ngIf"],[1,"coutersign"],[1,"coutersign-status"],[1,"coutersign-empolyee-list"],["class","img-wrapper-styl","nz-tooltip","",3,"nzTooltipTitle",4,"ngFor","ngForOf"],["class","setting-countersign-btn cursor-pointer",3,"click",4,"ngIf"],["class","start-countersign-btn cursor-pointer",3,"click",4,"ngIf"],[3,"modelShowCloseChange",4,"ngIf"],["nz-tooltip","",1,"img-wrapper-styl",3,"nzTooltipTitle"],[3,"src"],["class","img-judge-correct img-judge-correct-right",4,"ngIf"],["class","img-judge-correct img-judge-correct-error",4,"ngIf"],[1,"img-judge-correct","img-judge-correct-right"],[1,"iconfont","icon-right"],[1,"img-judge-correct","img-judge-correct-error"],[1,"iconfont","icon-cancel"],[1,"setting-countersign-btn","cursor-pointer",3,"click"],["nz-tooltip","",1,"iconfont","icon-settings-outline","setting-icon",3,"nzTooltipTitle"],[1,"start-countersign-btn","cursor-pointer",3,"click"],[1,"iconfont","icon-thumbup-outline","m-r-5","greet-icon"],[3,"modelShowCloseChange"]],template:function(e,t){1&e&&o["\u0275\u0275template"](0,en,9,7,"div",0),2&e&&o["\u0275\u0275property"]("ngIf",t.coutersignInfo&&t.coutersignInfo.countersignUsers&&t.coutersignInfo.countersignUsers.length)},directives:[F.n,F.m,X.d,Ee],pipes:[A.b],styles:[".coutersign[_ngcontent-%COMP%]{border-left:1px solid #ededed;min-height:45px;margin-top:20px;margin-bottom:5px;padding-left:10px}.coutersign[_ngcontent-%COMP%]   .coutersign-status[_ngcontent-%COMP%]{color:#999;font-size:12px;line-height:12px}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]{margin-top:8px}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .img-wrapper-styl[_ngcontent-%COMP%]{position:relative;margin-right:8px;display:inline-block;margin-bottom:5px}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .img-wrapper-styl[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:50%}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .img-wrapper-styl[_ngcontent-%COMP%]   .pass-img[_ngcontent-%COMP%]{border:1px solid #23c6c8}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .img-wrapper-styl[_ngcontent-%COMP%]   .not-pass-img[_ngcontent-%COMP%]{border:1px solid #e23237}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .img-wrapper-styl[_ngcontent-%COMP%]   .img-judge-correct[_ngcontent-%COMP%]{position:absolute;width:10px;height:10px;border-radius:50%;top:-2px;right:-2px}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .img-wrapper-styl[_ngcontent-%COMP%]   .img-judge-correct[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;color:#fff;position:absolute;top:-3px;right:-1px;transform:scale(.65)}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .img-wrapper-styl[_ngcontent-%COMP%]   .img-judge-correct-right[_ngcontent-%COMP%]{background:#23c6c8}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .img-wrapper-styl[_ngcontent-%COMP%]   .img-judge-correct-error[_ngcontent-%COMP%]{background:#e23237}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .img-wrapper-styl[_ngcontent-%COMP%]   .img-judge-correct-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:-4px}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .start-countersign-btn[_ngcontent-%COMP%]{padding:0 8px;height:25px;background:#23c6c8;color:#fff;font-size:12px;line-height:25px;border-radius:12.5px;display:inline-block}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .start-countersign-btn[_ngcontent-%COMP%]   .greet-icon[_ngcontent-%COMP%]{font-size:13px;transform:scale(.85)}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .setting-countersign-btn[_ngcontent-%COMP%]{margin-right:8px;height:25px;width:25px;background:#f0f0f0;border-radius:50%;display:inline-flex;justify-content:center;align-items:center;line-height:25px;position:relative;top:1px}.coutersign[_ngcontent-%COMP%]   .coutersign-empolyee-list[_ngcontent-%COMP%]   .setting-countersign-btn[_ngcontent-%COMP%]   .setting-icon[_ngcontent-%COMP%]{position:relative;font-size:16px;top:1px}"]}),e}(),nn=n("QhG9"),on=function(e){return e.split("-").reduce(function(e,t,n){return e+(0===n?t:t[0].toUpperCase()+t.slice(1))},"")},rn=on("highlight-id"),an=function(e){return!!e.dataset&&!!e.dataset[on("highlight-uuid")]},cn=function(e,t){e.classList.add(t)},ln=function(e){return!e||!e.textContent},sn=function(e){var t,n,o=[];try{for(var r=Object(i.j)(e),a=r.next();!a.done;a=r.next()){var c=a.value;o.includes(c)||o.push(c)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return o},dn=function(){function e(e){this.http=e}return e.prototype.createAnnotation=function(e){return this.http.post("/devops-knowledge-management/api/wiki/annotation",e).pipe(Object(We.a)(function(e){return e}))},e.prototype.searchComments=function(e){return this.http.post("/devops-knowledge-management/api/wiki/comments",e).pipe(Object(We.a)(function(e){return e}))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](Ue.c))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),pn=n("mXSW");function un(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",4),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).eachClick(e)}),o["\u0275\u0275element"](1,"i",5),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,a=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](i.icon),o["\u0275\u0275classProp"]("p-r-5",r!==a.length-1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](2,5,i.tip))}}function mn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275elementStart"](1,"span",2),o["\u0275\u0275template"](2,un,3,7,"span",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.index,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](i!==r.toolArray.length-1?"grouping-line":""),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n)}}var hn=function(){function e(e){this.translate=e,this.emitEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.eachClick=function(e){"DELETE_DESENSITIZATION"!==e.tip&&this.emitEvent.emit(e)},e.prototype.confirmDelete=function(e){this.emitEvent.emit(e)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](A.c))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["annotation-tool"]],inputs:{toolArray:"toolArray"},outputs:{emitEvent:"emitEvent"},features:[o["\u0275\u0275ProvidersFeature"]([])],decls:2,vars:1,consts:[[1,"annotation-tool"],[4,"ngFor","ngForOf"],[1,"item","cursor-pointer"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"title"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,mn,3,3,"span",1),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.toolArray))},directives:[F.m],pipes:[A.b],styles:[".annotation-tool[_ngcontent-%COMP%]{display:inline-block;z-index:1;padding:5px 10px 3px;background:#fff;box-shadow:0 0 2px 2px #ededed;border-radius:4px}"]}),e}();function gn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"annotation-tool",9),o["\u0275\u0275listener"]("emitEvent",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).showInput(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("hidden",i.showInputCtrl)("toolArray",i.toolArray)}}var fn=function(e,t,n){return{top:e,left:t,right:n}};function vn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",3),o["\u0275\u0275listener"]("clickOutside",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().hiddenFunc()}),o["\u0275\u0275template"](1,gn,1,2,"annotation-tool",4),o["\u0275\u0275elementStart"](2,"span",5),o["\u0275\u0275elementStart"](3,"i",6),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().addAnnotation()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"user-avatar",7),o["\u0275\u0275elementStart"](5,"textarea",8),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().annotationInfo=e}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction3"](10,fn,i.positionInfo.top-24+"px",i.showInputCtrl?i.positionInfo.showRight?null:i.positionInfo.toolLeft+2+"px":i.positionInfo.left+2+"px",i.showInputCtrl&&i.positionInfo.showRight?"2px":null)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.toolArray.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden",!i.showInputCtrl),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("height",25)("width",25)("account",i.currentUser.huawei_id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",i.annotationInfo)("placeholder",o["\u0275\u0275pipeBind1"](6,8,i.inputPlaceHolder))}}var bn=function(){function e(e,t,n,i){this.annotationService=e,this.translate=t,this.notification=n,this.emitService=i,this.openDesensitization=!1,this.openAnnotation=!1,this.docType="rich-text",this.fullScreenCtrl=!1,this.configInfo={},this.imgLoaded=new o.EventEmitter,this.showTool=!1,this.firstClick=!0,this.showInputCtrl=!1,this.toolArray=[],this.dblClickCtrl=!1}return Object.defineProperty(e.prototype,"inputPlaceHolder",{get:function(){var e;return"ADD_COMMENTS"===(null===(e=this.toolbarEvent)||void 0===e?void 0:e.tip)?"KNOWLEDGE_BASE_COMMENT_PLACEHOLDER":"DESENSITIZATION_INPUT_PLACEHOLDER"},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(t){t&&(e.currentUser=t)}),this.emitService.eventEmit.subscribe(function(t){if(t&&t.type)switch(t.type){case"wiki::close-annotation":e.removeDatasetAttr(t.commentGuid)}}),this.openAnnotation&&(this.toolArray=Object(i.i)(this.toolArray,[[{icon:"iconfont icon-comment-outline",tip:"ADD_COMMENTS"}]])),this.openDesensitization&&(this.toolArray=Object(i.i)(this.toolArray,[[{icon:"iconfont icon-text-sensitive-replace",tip:"ADD_DESENSITIZATION"}]])),this.querySelectorStr="#"+this.domId+" html-render .render-wrapper"},e.prototype.removeDatasetAttr=function(e){var t=this;document.querySelectorAll("[data-highlight-id*="+e+"]").forEach(function(n){t.resetAnnotationDomAttr(n,e)}),setTimeout(function(){t.emitService.emit({type:"wiki::close-annotation-discussion"})})},e.prototype.resetAnnotationDomAttr=function(e,t){var n=e.dataset.highlightId;if(n==t)e.removeAttribute("data-highlight-id"),e.removeAttribute("data-highlight-uuid");else{var i=n.split(";"),o=i.indexOf(t);i.splice(o,1);var r=i.join(";");e.setAttribute("data-highlight-id",r),e.dataset.highlightUuid===t&&e.setAttribute("data-highlight-uuid",i[0])}},e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe()},e.prototype.getSelectionText=function(e){var t=this;(this.openAnnotation||this.openDesensitization)&&2!=(null==e?void 0:e.button)&&(this.fullScreenCtrl?setTimeout(function(){t.dblClickCtrl?t.dblClickCtrl=!1:t.handlerAnnotation(e)}):this.handlerAnnotation(e))},e.prototype.handlerAnnotation=function(e){this.selObj=window.getSelection(),e.target&&e.target.dataset&&e.target.dataset.highlightUuid&&this.openAnnotation&&this.emitService.emit({type:"article-comment::clickAnnotationSpan",commentGuid:e.target.dataset.highlightUuid}),this.selObj&&!this.selObj.isCollapsed&&(this.innerHtmlStr=document.querySelector(this.querySelectorStr).innerHTML,this.getSelectionInfo())},e.prototype.getSelectionInfo=function(){var e=this;this.showInputCtrl=!1,this.selectedNodes=[],this.highlightNodes=[],this.annotationInfo="",this.positionInfo=void 0,this.range=this.selObj.getRangeAt(0);var t=function(e){for(var t=[e],n=null,i=[];n=t.pop();)for(var o=n.childNodes,r=o.length-1;r>=0;r--){var a=o[r],c=a.parentNode,l=a;3===a.nodeType&&""===a.nodeValue||t.push(a);var s=c.dataset.highlightUuid,d=c.dataset.highlightId;if(s)if(1!==a.nodeType||l.dataset.highlightUuid){if(3===a.nodeType&&1!==c.childNodes.length){var p=document.createElement("span");p.appendChild(a.cloneNode(!1)),p.setAttribute("data-highlight-uuid",s),p.setAttribute("data-highlight-id",d),a.parentNode.replaceChild(p,a),i.push(p)}}else l.setAttribute("data-highlight-uuid",s),l.setAttribute("data-highlight-id",d),i.push(l)}return i}(this.range.commonAncestorContainer);t.length>0&&this.resetRange(t.reverse()),this.range=window.getSelection().getRangeAt(0),this.startNode={node:this.range.startContainer,offset:this.range.startOffset},this.endNode={node:this.range.endContainer,offset:this.range.endOffset},this.selectedNodes=function(e,t,n,i){var o=t.node,r=n.node,a=t.offset,c=n.offset;if(o===r&&o instanceof Text)return function(e,t,n){e.splitText(t);var i=e.nextSibling;return i.splitText(n-t),[{$node:i}]}(o,a,c);for(var l=[e],s=[],d=function(e){return null==i?void 0:i.some(function(t){return function(e,t){if(!e)return!1;if(t.startsWith(".")){var n=t.replace(/^\./u,"");return e&&function(e,t){return e.classList.contains(t)}(e,n)}if(t.startsWith("#")){var i=t.replace(/^#/u,"");return e&&e.id===i}var o=t.toUpperCase();return e&&e.tagName===o}(e,t)})},p=!1,u=null;u=l.pop();)if(1===u.nodeType&&d(u)){if(u===r||u.contains(r))return s}else{for(var m=u.childNodes,h=m.length-1;h>=0;h--){var g=m[h];3===g.nodeType&&""===g.nodeValue||l.push(g)}if(u===o)3===u.nodeType&&(u.splitText(a),s.push({$node:f=u.nextSibling})),p=!0;else{if(u===r){var f;3===u.nodeType&&((f=u).splitText(c),s.push({$node:f}));break}p&&3===u.nodeType&&s.push({$node:u})}}return s}(this.range.commonAncestorContainer,this.startNode,this.endNode,["table","tr",".max-level"]),this.removeBgClass(),this.highlightNodes=(this.range,this.selectedNodes.map(function(e){return n="annotation-bg",o="span",a=(t=e).$node.previousSibling,c=t.$node.nextSibling,an(r=t.$node.parentNode)?!an(r)||ln(a)&&ln(c)?function(e,t,n){var i=e.$node.parentNode;return cn(i,n),i.setAttribute("data-highlight-id",i.dataset[rn]),i}(t,0,n):function(e,t,n,o){var r=document.createElement(o),a=e.$node.parentNode,c=e.$node.previousSibling,l=e.$node.nextSibling,s=document.createDocumentFragment();r.setAttribute("data-highlight-id",a.dataset[rn]),r.appendChild(e.$node.cloneNode(!1)),c&&((d=a.cloneNode(!1)).textContent=c.textContent,s.appendChild(d));var d,p=[];return an(a)&&a.classList.forEach(function(e){return p.push(e)}),Array.isArray(n)?p.push.apply(p,Object(i.i)(n)):p.push(n),cn(r,sn(p)),s.appendChild(r),l&&((d=a.cloneNode(!1)).textContent=l.textContent,s.appendChild(d)),a.parentNode.replaceChild(s,a),r}(t,0,n,o):function(e,t,n,i){var o=document.createElement(i);return cn(o,n),o.appendChild(e.$node.cloneNode(!1)),e.$node.parentNode.replaceChild(o,e.$node),o.setAttribute("data-highlight-id",""),o}(t,0,n,o);var t,n,o,r,a,c})),this.highlightNodes.length&&(this.selObjStr=this.highlightNodes.reduce(function(e,t){return e+t.innerText},""),(!this.lastSelObjstr||this.lastSelObjstr&&!this.lastSelObjstr.includes(this.selObjStr))&&(this.firstClick=!0),this.lastSelObjstr=Object(h.a)(this.selObjStr),this.resetRange(this.highlightNodes),this.positionInfo=function(e,t){var n,i={top:0,left:0,toolLeft:0,showRight:!1},o=document.querySelector("[id="+t+"]");o&&(n=(null==o?void 0:o.offsetLeft)+(null==o?void 0:o.offsetWidth)-20),i.top=e.startContainer.offsetTop-15;var r=(null==o?void 0:o.offsetWidth)-e.startContainer.offsetLeft;i.left=r<=36?e.startContainer.offsetLeft-40+r:e.startContainer.offsetLeft;var a=e.startContainer.offsetParent;if(a!=o){var c=(null==a?void 0:a.getBoundingClientRect().top)-(null==o?void 0:o.getBoundingClientRect().top),l=(null==a?void 0:a.getBoundingClientRect().left)-(null==o?void 0:o.getBoundingClientRect().left);i.top+=c,i.left+=l}var s=n-i.left;return i.toolLeft=i.left,s<398&&(i.showRight=!0),i}(this.range,this.domId)),this.showTool=!0,setTimeout(function(){e.firstClick=!1},500)},e.prototype.resetRange=function(e){this.range.setStart(e[0],0);var t=e[e.length-1];this.range.setEnd(t,t.childNodes.length),window.getSelection().removeAllRanges(),window.getSelection().addRange(this.range)},e.prototype.buildCondition=function(e){var t={target_content:this.selObjStr,wiki_sn:this.workitemInfo.sn,comment:this.annotationInfo};return"ADD_DESENSITIZATION"===this.toolbarEvent.tip&&(t.type="anonymize"),e.bool&&e.idArr&&1===e.idArr.length&&(t.comment_guid=e.idArr[0]),t},e.prototype.hiddenFunc=function(){if(!this.firstClick){this.firstClick=!0,this.showTool=!1,this.lastSelObjstr=null,this.removeBgClass();var e=window.getSelection();e.isCollapsed||e.collapse(e.focusNode,e.focusOffset)}},e.prototype.showInput=function(e){this.toolbarEvent=e,"ADD_COMMENTS"!==e.tip&&"ADD_DESENSITIZATION"!==e.tip||(this.showInputCtrl=!0,setTimeout(function(){var e=document.querySelector("#textarea-annotation");e&&e.focus()},500))},e.prototype.addAnnotation=function(){var e=this;if(this.annotationInfo.trim()){this.showTool=!1,this.removeBgClass();var t=function(e){var t=!0,n=[];e.forEach(function(e){e.$node.parentNode&&e.$node.parentNode.dataset.highlightId&&n.push(e.$node.parentNode.dataset.highlightId.split(";"))});var i=[];return i=n[0],n.forEach(function(e){i=i.filter(function(t){return e.includes(t)})}),e.forEach(function(e){e.$node.parentNode&&e.$node.nodeValue===e.$node.parentNode.innerText&&e.$node.parentNode.dataset.highlightId&&1===i.length||(t=!1)}),{bool:t,idArr:i}}(this.selectedNodes),n=this.buildCondition(t);this.annotationService.createAnnotation(n).subscribe(function(t){e.notification.success(e.translate.instant("UPDATE_SUCCESS"),""),e.range.id=t.data.commentGuid;var n={entity_id:e.workitemInfo.id};e.openDesensitization&&(n.type="anonymize"),e.annotationService.searchComments(n).subscribe(function(n){e.CommentsList=n.data,e.highlightNodes.forEach(function(t){return e.highlightNodeHandler(t)}),setTimeout(function(){e.emitService.emit({type:"article-comment::addAnnotation",commentGuid:t.data.commentGuid})})},function(){})},function(){})}},e.prototype.highlightNodeHandler=function(e){var t=e.dataset.highlightId;t=t?t.includes(this.range.id)?t:t+";"+this.range.id:this.range.id,e.setAttribute("data-highlight-id",t);var n=t.split(";"),i=this.CommentsList.filter(function(e){return e.commentGuid&&n.includes(e.commentGuid)});i.length>1&&(i=i.sort(function(e,t){return e.targetContent.length-t.targetContent.length})),e.setAttribute("data-highlight-uuid",i[0].commentGuid)},e.prototype.removeBgClass=function(){document.querySelectorAll(".annotation-bg").forEach(function(e){e.classList.remove("annotation-bg")})},e.prototype.addAnnotationIcons=function(){var e=this,t=document.querySelectorAll(".annotation-icon-styl");t.length>0&&t.forEach(function(e,t){e.parentNode.removeChild(e)});var n,i=document.querySelectorAll("[data-highlight-id]"),o=document.querySelector(this.querySelectorStr);o&&(n=o.offsetLeft+o.offsetWidth-20);var r=[];i.forEach(function(e,t){r.push({offsetTop:e.offsetTop,offsetLeft:n,highlightId:e.getAttribute("data-highlight-uuid")})});var a={};r=r.reduce(function(t,n){return e.getOffsetTopBool(a,n.offsetTop)||(a[n.offsetTop]=!0,t.push(n)),t},[]);var c={};r=r.reduce(function(e,t){return c[t.highlightId]||(c[t.highlightId]=!0,e.push(t)),e},[]);var l=document.createDocumentFragment();r.forEach(function(e,t){var n=document.createElement("span");n.setAttribute("data-highlight-id-icon",e.highlightId),n.classList.add("annotation-icon-styl","iconfont","icon-comment-outline"),n.style.left=e.offsetLeft+"px",n.style.top=e.offsetTop+"px",n.style.position="absolute",l.appendChild(n)}),document.querySelector(this.querySelectorStr).appendChild(l)},e.prototype.getOffsetTopBool=function(e,t){for(var n=[t],i=t-5;i<t;i++)n.push(i);for(var o=t+5;o>t;o--)n.push(o);return n.some(function(t){return e[t]})},e.prototype.dblClickHandler=function(e){this.dblClickCtrl=!0},e.prototype.imgLoadedHandler=function(e){this.imgLoaded.emit(e)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](dn),o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](L.b),o["\u0275\u0275directiveInject"](R.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["block-annotation"]],inputs:{openDesensitization:"openDesensitization",openAnnotation:"openAnnotation",workitemInfo:"workitemInfo",docType:"docType",docContent:"docContent",scrollInEL:"scrollInEL",domId:"domId",fullScreenCtrl:"fullScreenCtrl",configInfo:"configInfo",fromVision:"fromVision",classify:"classify"},outputs:{imgLoaded:"imgLoaded"},features:[o["\u0275\u0275ProvidersFeature"]([dn])],decls:3,vars:8,consts:[[1,"block-annotation",3,"id","mouseup","dblclick"],[3,"docContent","fromVision","classify","docType","scrollInEL","configInfo","imgLoaded"],["class","annotation-tool-wrapper","clickElementOutside","",3,"ngStyle","clickOutside",4,"ngIf"],["clickElementOutside","",1,"annotation-tool-wrapper",3,"ngStyle","clickOutside"],[3,"hidden","toolArray","emitEvent",4,"ngIf"],[1,"annotation-input",3,"hidden"],[1,"input-search-icon","iconfont","icon-to-right",3,"click"],[3,"height","width","account"],["id","textarea-annotation",1,"annotation-input-styl",3,"ngModel","placeholder","ngModelChange"],[3,"hidden","toolArray","emitEvent"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275listener"]("mouseup",function(e){return t.getSelectionText(e)})("dblclick",function(e){return t.dblClickHandler(e)}),o["\u0275\u0275elementStart"](1,"html-render",1),o["\u0275\u0275listener"]("imgLoaded",function(e){return t.imgLoadedHandler(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](2,vn,7,14,"span",2),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("id",t.domId),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("docContent",t.docContent)("fromVision",t.fromVision)("classify",t.classify)("docType",t.docType)("scrollInEL",t.scrollInEL)("configInfo",t.configInfo),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showTool&&t.positionInfo))},directives:[pn.a,F.n,qe.a,F.o,$e.a,U.d,U.k,U.l,hn],pipes:[A.b],styles:[".block-annotation[_ngcontent-%COMP%]{position:relative}.block-annotation[_ngcontent-%COMP%]   .annotation-tool-wrapper[_ngcontent-%COMP%]{position:absolute}.block-annotation[_ngcontent-%COMP%]   .annotation-tool-wrapper[_ngcontent-%COMP%]   .annotation-input[_ngcontent-%COMP%]{display:inline-block;position:relative;top:-30px;z-index:1}.block-annotation[_ngcontent-%COMP%]   .annotation-tool-wrapper[_ngcontent-%COMP%]   .annotation-input[_ngcontent-%COMP%]   user-avatar[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 13px);left:10px}.block-annotation[_ngcontent-%COMP%]   .annotation-tool-wrapper[_ngcontent-%COMP%]   .annotation-input[_ngcontent-%COMP%]   .input-search-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:calc(50% - 12px);cursor:pointer;color:#23c6c8}.block-annotation[_ngcontent-%COMP%]   .annotation-tool-wrapper[_ngcontent-%COMP%]   .annotation-input[_ngcontent-%COMP%]   .annotation-input-styl[_ngcontent-%COMP%]{width:365px;min-height:50px!important;max-height:90px!important;outline:none;border:none;background:#fff;padding:10px 40px 10px 50px;border-radius:5px;box-shadow:0 0 3px 3px #ededed}.block-annotation[_ngcontent-%COMP%]   .annotation-tool-wrapper[_ngcontent-%COMP%]   .annotation-input[_ngcontent-%COMP%]   .annotation-input-styl[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.block-annotation[_ngcontent-%COMP%]   .annotation-tool-wrapper[_ngcontent-%COMP%]   .annotation-input[_ngcontent-%COMP%]   .annotation-input-styl[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;background-color:#aaa}.block-annotation[_ngcontent-%COMP%]   .annotation-tool-wrapper[_ngcontent-%COMP%]   .annotation-input[_ngcontent-%COMP%]   .annotation-input-styl[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}"]}),e}(),Cn=function(){function e(e){this.el=e,this.isNeedRemoveBg=!1}return e.prototype.ngOnChanges=function(e){var t,n,i;if(null===(t=null==e?void 0:e.isNeedRemoveBg)||void 0===t?void 0:t.currentValue){var o=null===(i=null===(n=this.el)||void 0===n?void 0:n.nativeElement)||void 0===i?void 0:i.querySelectorAll("[data-highlight-id]");null==o||o.forEach(function(e){e.parentElement.classList.add("none-annotation-bg")})}},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](o.ElementRef))},e.\u0275dir=o["\u0275\u0275defineDirective"]({type:e,selectors:[["","noneAnnotationBg",""]],inputs:{isNeedRemoveBg:"isNeedRemoveBg"},features:[o["\u0275\u0275NgOnChangesFeature"]]}),e}();function yn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"th",7),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("nzAlign",n.align)("nzWidth",n.width),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.title)}}function xn(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",11),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"BASELINE_VERSION")))}function wn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"a",12),o["\u0275\u0275listener"]("click",function(e){o["\u0275\u0275restoreView"](n);var i=t.$implicit;return o["\u0275\u0275nextContext"](3).getRelationUrl(e,i)}),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",i.relation_sn," ")}}function _n(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr",8),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).reversionJumpClick(e)}),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275template"](2,xn,3,3,"span",9),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"td"),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"td"),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"td"),o["\u0275\u0275text"](9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"td"),o["\u0275\u0275template"](11,wn,3,1,"ng-container",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf","baseline"===i.category),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",i.revision_record_title," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.created_by.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.create_time),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.remark),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",i.relation)}}function On(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275element"](2,"span",2),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"nz-table",3,4),o["\u0275\u0275elementStart"](7,"thead"),o["\u0275\u0275elementStart"](8,"tr"),o["\u0275\u0275template"](9,yn,2,3,"th",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"tbody"),o["\u0275\u0275template"](11,_n,12,6,"tr",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275reference"](6),i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,6,"REVISED_VERSION")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzData",i.revisionList)("nzPageSize",5)("nzBordered",!1),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngForOf",i.revisionListHead),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",n.data)}}var Sn=function(){function e(e,t,n){this.translate=e,this.knowledgeService=t,this.emitService=n,this.reversionJump=new o.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.revisionListHead=[{title:this.translate.instant("REVISION_NAME",""),align:"left",width:"23.5%"},{title:this.translate.instant("REVISED_BY",""),align:"left",width:"8.5%"},{title:this.translate.instant("REVISION_TIME",""),align:"left",width:"11%"},{title:this.translate.instant("REVISION_REASON",""),align:"left",width:"31.5%"},{title:this.translate.instant("ASSOCIATED",""),align:"left",width:"15.5%"}],this.eventSubscriber=this.emitService.eventEmit.subscribe(function(t){"wiki::baseline-version-create"==(null==t?void 0:t.type)&&e.getRevisionVersion()}),this.getRevisionVersion()},e.prototype.ngOnDestroy=function(){this.eventSubscriber.unsubscribe()},e.prototype.getRevisionVersion=function(){var e=this;this.knowledgeService.getRevisionVersion(this.sn).subscribe(function(t){(null==t?void 0:t.length)&&(e.revisionList=t)},function(){})},e.prototype.reversionJumpClick=function(e){this.reversionJump.emit(e)},e.prototype.getRelationUrl=function(e,t){var n;e.stopPropagation(),n="/#/"+("01001001"===t.relation_type?"raw":"dev")+"/"+t.relation_id,t.content_id&&(n+="?content_id="+t.content_id),window.open(n,"_blank")},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](E.b),o["\u0275\u0275directiveInject"](R.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["revision-list"]],inputs:{sn:"sn"},outputs:{reversionJump:"reversionJump"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"revision-list-wrapper"],[1,"iconfont","icon-revisions","f-18"],[3,"nzData","nzPageSize","nzBordered"],["basicTable",""],[3,"nzAlign","nzWidth",4,"ngFor","ngForOf"],["class","cursor-pointer",3,"click",4,"ngFor","ngForOf"],[3,"nzAlign","nzWidth"],[1,"cursor-pointer",3,"click"],["class","baseline-version-bg m-r-5",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"baseline-version-bg","m-r-5"],[3,"click"]],template:function(e,t){1&e&&o["\u0275\u0275template"](0,On,12,8,"div",0),2&e&&o["\u0275\u0275property"]("ngIf",null==t.revisionList?null:t.revisionList.length)},directives:[F.n,Rt.c,Rt.h,Rt.i,F.m,Rt.e,Rt.b,Rt.g,Rt.a],pipes:[A.b],styles:['.revision-list-wrapper[_ngcontent-%COMP%]{margin-top:140px;margin-bottom:30px;height:20px;line-height:20px;font-weight:700;font-size:18px;color:#5f5f5f}.revision-list-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:8px}.baseline-version-bg[_ngcontent-%COMP%]{color:#23c6c8;background:rgba(35,198,200,.15);display:inline-block;border-radius:2px;padding:3px}[_nghost-%COMP%]     .ant-table-column-title{color:#676a6c;font-size:18px}[_nghost-%COMP%]     .ant-table-thead>tr>th{padding:6px 0 6px 15px!important;font-size:14px;font-weight:700;border:none;border-bottom:1px solid #dbdbdb;background:#f7f7f7;color:#666}[_nghost-%COMP%]     .ant-table-tbody>tr>td{padding:15px!important;border-left:none;border-right:none}[_nghost-%COMP%]     .ant-pagination-item-active{border-color:#23c6c8}[_nghost-%COMP%]     .ant-pagination-next:hover, [_nghost-%COMP%]     .ant-pagination-prev:hover{border-color:#23c6c8}[_nghost-%COMP%]     .ant-table-column-title{font-size:12px;color:#666;font-weight:700}[_nghost-%COMP%]     .ant-table-row-expand-icon{color:transparent;background-color:transparent;border:none;font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;margin-right:3px}[_nghost-%COMP%]     .ant-table-placeholder{border-bottom:none}[_nghost-%COMP%]     .ant-table-row-expand-icon:after{content:"\\e62f"}[_nghost-%COMP%]     .ant-table-row-expanded{color:#23c6c8}[_nghost-%COMP%]     .ant-table-row-collapsed{color:#666}[_nghost-%COMP%]     .ant-pagination{text-align:center;margin:40px 40px 0}[_nghost-%COMP%]     .ant-table-row-spaced{display:none}[_nghost-%COMP%]     .ant-menu-horizontal{line-height:20px;border-bottom:none}[_nghost-%COMP%]     .ant-menu-horizontal>.ant-menu-item{border-bottom:none;border-right:1px solid #ededed}[_nghost-%COMP%]     .ant-menu-horizontal>.ant-menu-item:last-child{border-right:none}[_nghost-%COMP%]   .category[_ngcontent-%COMP%]{display:inline-block;margin-left:5px;width:30px;height:15px;font-size:13px;line-height:12px;text-align:center}']}),e}();function En(e,t){1&e&&o["\u0275\u0275element"](0,"img",16)}function Mn(e,t){1&e&&o["\u0275\u0275element"](0,"img",17)}var Pn=function(e){return{num:e}};function In(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",18),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](2,1,"SUB_FILES_NUMBER",o["\u0275\u0275pureFunction1"](4,Pn,null==n?null:n.childrenSize)))}}function kn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275element"](1,"user-avatar",19),o["\u0275\u0275elementStart"](2,"span",14),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"span",15),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("account",n.created_by.account)("width",20)("height",20),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.created_by.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.created_by.username)}}function Tn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td",8),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).getDetails(e)}),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275template"](3,En,1,0,"img",9),o["\u0275\u0275template"](4,Mn,1,0,"img",10),o["\u0275\u0275elementStart"](5,"span",11),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,In,3,6,"span",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"td"),o["\u0275\u0275template"](9,kn,6,5,"span",1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"td"),o["\u0275\u0275element"](11,"span",13),o["\u0275\u0275elementStart"](12,"span",14),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"span",15),o["\u0275\u0275text"](16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!(null!=i&&i.childrenSize)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==i?null:i.childrenSize),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.title),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==i?null:i.childrenSize),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.created_by),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](14,7,"UPDATE_AS")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.last_update_time)}}function Dn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275element"](2,"span",3),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"nz-table",4,5),o["\u0275\u0275elementStart"](8,"tbody"),o["\u0275\u0275template"](9,Tn,17,9,"tr",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",7),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().showFileDetail()}),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275reference"](7),r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](5,6,"SUB_FILES_NUMBER",o["\u0275\u0275pureFunction1"](11,Pn,r.total))),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzData",r.subFileList)("nzShowPagination",!1)("nzBordered",!1),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",i.data),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](12,9,"SHOW_MORE_INFO"))}}var An=function(){function e(e,t,n,i,a){var c=this;this.knowledgeService=e,this.emitService=t,this.eleRef=n,this.router=i,this.activeRoute=a,this.getArticleDetails=new o.EventEmitter,this.folderEditSuccess=new o.EventEmitter,this.handleShowFileDetail=new o.EventEmitter,this.textHeight=1,this.titleUpdate=new r.a,this.descriptionUpdate=new r.a,this.subFileList=[],this.getText=function(e){return(e||"").replace(/<\/?.+?>/g,"")},this.titleUpdate.pipe(Object(Fe.a)(500),Object(Be.a)()).subscribe(function(e){c.ngModelTitleChange(e)}),this.descriptionUpdate.pipe(Object(Fe.a)(500),Object(Be.a)()).subscribe(function(e){c.ngModelMsgChange()})}return e.prototype.ngOnInit=function(){this.subFileList=[],this.getSubFileList()},e.prototype.getSubFileList=function(){var e,t=this,n={sn:null===(e=this.fileDetails)||void 0===e?void 0:e.sn,pageSize:5,request_tag:(new Date).getTime().toString()};this.knowledgeService.getSubFileList(n).subscribe(function(e){var n;t.total=null==e?void 0:e.total,t.subFileList=null===(n=null==e?void 0:e.wikiSubFile)||void 0===n?void 0:n.children},function(){})},e.prototype.setHeight=function(e){this.textHeight=Math.ceil(e.target.scrollHeight/26)},e.prototype.showFileDetail=function(){this.handleShowFileDetail.emit(!0)},e.prototype.getDetails=function(e){this.getArticleDetails.emit(e)},e.prototype.ngModelTitleChange=function(e){this.creatFolder([{id:this.fileDetails.id,kanban_id:this.fileDetails.kanban_id,title:e,ui_source:"1"}],"updata-title")},e.prototype.ngModelMsgChange=function(){this.creatFolder([{id:this.fileDetails.id,kanban_id:this.fileDetails.kanban_id,description:this.fileDetails.paragraphs[0].content,ui_source:"1"}],"")},e.prototype.creatFolder=function(e,t){var n=this;this.knowledgeService.saveArticle(e).subscribe(function(e){e&&e.success&&e.success.length&&(n.folderEditSuccess.emit({id:e.success[0].id,title:e.success[0].content_new,type:t}),n.emitService.emit({type:t,id:n.fileDetails.id,sn:n.fileDetails.sn,title:n.fileDetails.title}))},function(){})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](E.b),o["\u0275\u0275directiveInject"](R.a),o["\u0275\u0275directiveInject"](o.ElementRef),o["\u0275\u0275directiveInject"](D.f),o["\u0275\u0275directiveInject"](D.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["knowledge-file"]],inputs:{fileDetails:"fileDetails",category:"category"},outputs:{getArticleDetails:"getArticleDetails",folderEditSuccess:"folderEditSuccess",handleShowFileDetail:"handleShowFileDetail"},features:[o["\u0275\u0275ProvidersFeature"]([E.b])],decls:2,vars:1,consts:[[1,"content-file-items"],[4,"ngIf"],[1,"file-title"],[1,"iconfont","icon-article-point","f-18"],[3,"nzData","nzShowPagination","nzBordered"],["fileTable",""],[4,"ngFor","ngForOf"],[1,"show-more",3,"click"],[1,"cursor-pointer","title-style",3,"click"],["src","/knowledge-ui/assets/imgs/article_icon.png",4,"ngIf"],["src","/knowledge-ui/assets/imgs/file_icon.png",4,"ngIf"],[1,"m-l-20","file-list-title"],["class","sub-articles",4,"ngIf"],[1,"iconfont","icon-clock","f-14","icon-color"],[1,"m-l-8","file-item-style"],[1,"m-l-5","file-item-style"],["src","/knowledge-ui/assets/imgs/article_icon.png"],["src","/knowledge-ui/assets/imgs/file_icon.png"],[1,"sub-articles"],[3,"account","width","height"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,Dn,13,13,"div",1),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==t.subFileList?null:t.subFileList.length))},directives:[F.n,Rt.c,Rt.e,F.m,Rt.i,Rt.b,$e.a],pipes:[A.b],styles:[".content-file-items[_ngcontent-%COMP%]{width:100%;margin-top:60px}.content-file-items[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none}.content-file-items[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px}.content-file-items[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.content-file-items[_ngcontent-%COMP%]   .file-title[_ngcontent-%COMP%]{color:#5f5f5f;font-weight:700;font-size:18px;margin:0 0 15px -8px}.content-file-items[_ngcontent-%COMP%]   .file-list-title[_ngcontent-%COMP%]{display:inline-block;max-width:80%;font-size:14px;color:#444}.content-file-items[_ngcontent-%COMP%]   .file-item-style[_ngcontent-%COMP%]{font-size:12px;color:#999}.content-file-items[_ngcontent-%COMP%]   .icon-color[_ngcontent-%COMP%]{color:#999}.content-file-items[_ngcontent-%COMP%]   .sub-articles[_ngcontent-%COMP%]{display:inline-block;width:72px;height:20px;background-color:rgba(35,198,200,.15);border-radius:3px;text-align:center;line-height:20px;color:#23c6c8;font-size:12px;margin-left:8px}.content-file-items[_ngcontent-%COMP%]   .show-more[_ngcontent-%COMP%]{min-width:90px;height:34px;padding:0 10px;background-color:#fff;border:1px solid #dbdbdb;border-radius:4px;font-size:14px;text-align:center;color:#433434;line-height:34px;margin:40px 0;float:right;cursor:pointer}.content-file-items[_ngcontent-%COMP%]   .show-more[_ngcontent-%COMP%]:hover{color:#23c6c8;border:1px solid #23c6c8}.content-file-items[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-bottom:1px solid #e8e8e8}"]}),e}(),zn=n("OTR8"),Rn=n("TgVB"),Ln=n("3MDf"),Nn=n("mLQb"),jn=function(){function e(e){this.translate=e,this.eventEmit=new o.EventEmitter,this.inRoot=!1,this.isFontBigger=!1,this.isShowOutline=!1,this.isShowOutlinePopver=!1,this.isFontBiggerPopver=!1}return Object.defineProperty(e.prototype,"isOpen",{get:function(){return this.inRoot},enumerable:!1,configurable:!0}),e.prototype.isShowOutlineHandler=function(){this.isShowOutline=!this.isShowOutline,this.eventEmit.emit({event:"is-show-outline-change",value:this.isShowOutline})},e.prototype.isFontBiggerHandler=function(){this.isFontBigger=!this.isFontBigger,this.eventEmit.emit({event:"is-font-bigger-change",value:this.isFontBigger})},e.prototype.isOpenHandler=function(){this.inRoot&&(this.inRoot=!this.inRoot)},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](A.c))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["doodle-tool"]],inputs:{maxWidth:"maxWidth",isShowOutline:"isShowOutline"},outputs:{eventEmit:"eventEmit"},decls:16,vars:17,consts:[[1,"tool-root",3,"mouseover","mouseout"],[1,"tool-menu-list",3,"hidden"],[1,"tool-menu-item","icon-styl","position-r",3,"mouseover","mouseout","click"],[1,"iconfont","icon-hierarchy-tree"],[1,"popver",3,"hidden"],[1,"popver-narrow"],[1,"iconfont"],[1,"tool-menu-root","icon-styl",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275listener"]("mouseover",function(){return t.inRoot=!0})("mouseout",function(){return t.inRoot=!1}),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275listener"]("mouseover",function(){return t.isShowOutlinePopver=!0})("mouseout",function(){return t.isShowOutlinePopver=!1})("click",function(){return t.isShowOutlineHandler()}),o["\u0275\u0275element"](3,"i",3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275element"](7,"div",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",2),o["\u0275\u0275listener"]("mouseover",function(){return t.isFontBiggerPopver=!0})("mouseout",function(){return t.isFontBiggerPopver=!1})("click",function(){return t.isFontBiggerHandler()}),o["\u0275\u0275element"](9,"i",6),o["\u0275\u0275elementStart"](10,"div",4),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275element"](13,"div",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",7),o["\u0275\u0275listener"]("click",function(){return t.isOpenHandler()}),o["\u0275\u0275element"](15,"i",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden",!t.inRoot),o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("active-operate-item",t.isShowOutline),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",!t.isShowOutlinePopver),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,13,"OUTLINE")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275classProp"]("active-operate-item",t.isFontBigger),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](t.isFontBigger?"icon-font-minus":"icon-font-plus"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden",!t.isFontBiggerPopver),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](12,15,t.isFontBigger?"RESTORE_FONT_SIZE":"ENLARGE_FONT_SIZE")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275classMap"](t.isOpen?"icon-close":"icon-application"))},pipes:[A.b],styles:[".tool-root[_ngcontent-%COMP%]{width:58px}.tool-root[_ngcontent-%COMP%]   .tool-menu-list[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:29px;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-name:slidein;animation-name:slidein;box-shadow:0 0 6px rgba(0,0,0,.08);background:#fff;padding:5px 0}.tool-root[_ngcontent-%COMP%]   .tool-menu-list[_ngcontent-%COMP%]   .tool-menu-item[_ngcontent-%COMP%]{margin:5px;width:48px;height:48px;border-radius:50%}.tool-root[_ngcontent-%COMP%]   .tool-menu-list[_ngcontent-%COMP%]   .tool-menu-item[_ngcontent-%COMP%]:hover{background:#ebedee}.tool-root[_ngcontent-%COMP%]   .tool-menu-root[_ngcontent-%COMP%]{width:58px;height:58px;border-radius:50%;background:#fff;box-shadow:0 0 6px rgba(0,0,0,.08)}.tool-root[_ngcontent-%COMP%]   .icon-styl[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#646464}.tool-root[_ngcontent-%COMP%]   .icon-styl[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px}.tool-root[_ngcontent-%COMP%]   .active-operate-item[_ngcontent-%COMP%]{background:#ebedee}@-webkit-keyframes slidein{0%{opacity:.5}to{opacity:1}}@keyframes slidein{0%{opacity:.5}to{opacity:1}}.popver[_ngcontent-%COMP%]{color:#fff;border-radius:3px;left:calc(-50%);transform:translateY(-50%) translateX(-100%);padding:8px;height:24px;line-height:8px;font-size:14px}.popver[_ngcontent-%COMP%], .popver[_ngcontent-%COMP%]   .popver-narrow[_ngcontent-%COMP%]{background:rgba(0,0,0,.8);position:absolute;top:50%}.popver[_ngcontent-%COMP%]   .popver-narrow[_ngcontent-%COMP%]{width:5px;height:5px;right:-1px;transform:rotate(45deg) translateY(-50%)}"]}),e}(),Vn=n("cbLU");function Fn(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"ARTICLE_RESOURCE_TRANSFER")))}function Bn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).goCorrectLink()}),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.jumpNewUrl)}}function Un(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"NO_WIKI_RESOURCE")))}function Wn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",3),o["\u0275\u0275template"](1,Fn,3,3,"div",4),o["\u0275\u0275template"](2,Bn,2,1,"div",5),o["\u0275\u0275template"](3,Un,3,3,"div",4),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.articelInfo),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.articelInfo),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.articelInfo)}}function Hn(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"NO_WIKI_RESOURCE")))}function Gn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).goToHomePage()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"BACK_TO_HOME_PAGE")))}function qn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"span",7),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).goToHomePage()}),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,3,"RESOURCE_TRANSFER")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,5,"BACK_TO_HOME_PAGE")),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](7,7,"CLICK_NEW_LINK")))}function $n(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).goCorrectLink()}),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.jumpNewUrl)}}function Kn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",3),o["\u0275\u0275template"](1,Hn,3,3,"div",4),o["\u0275\u0275template"](2,Gn,3,3,"div",5),o["\u0275\u0275template"](3,qn,8,9,"div",4),o["\u0275\u0275template"](4,$n,2,1,"div",5),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.articelInfo),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.articelInfo),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.articelInfo),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.articelInfo)}}var Xn=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.goToHomePage=function(){var e=window.location.href.split("wiki/")[0]+"wiki";window.open(e,"_self")},e.prototype.goCorrectLink=function(){window.open(this.jumpNewUrl,"_blank")},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["empty-redirect-page"]],inputs:{jumpNewUrl:"jumpNewUrl",articelInfo:"articelInfo",catagoriedArr:"catagoriedArr"},decls:4,vars:2,consts:[[1,"empty-conetnt"],["src","/knowledge-ui/assets/imgs/url-empty.png","alt",""],["class","main-empty-exp",4,"ngIf"],[1,"main-empty-exp"],[4,"ngIf"],["class","main-empty-text",3,"click",4,"ngIf"],[1,"main-empty-text",3,"click"],[1,"main-empty-span",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"img",1),o["\u0275\u0275template"](2,Wn,4,3,"div",2),o["\u0275\u0275template"](3,Kn,5,4,"div",2),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.catagoriedArr.length>0&&void 0!==t.catagoriedArr[0]&&t.catagoriedArr[0].wiki_total>0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.catagoriedArr.length>0&&(!t.catagoriedArr[0]||!t.catagoriedArr[0].wiki_total)))},directives:[F.n],pipes:[A.b],styles:[".empty-conetnt[_ngcontent-%COMP%]{text-align:center;transform:translateY(50%)}.empty-conetnt[_ngcontent-%COMP%]   .main-empty-exp[_ngcontent-%COMP%]{line-height:24px}.empty-conetnt[_ngcontent-%COMP%]   .main-empty-exp[_ngcontent-%COMP%]   .main-empty-span[_ngcontent-%COMP%], .empty-conetnt[_ngcontent-%COMP%]   .main-empty-exp[_ngcontent-%COMP%]   .main-empty-text[_ngcontent-%COMP%]{-webkit-text-decoration-line:underline;text-decoration-line:underline;color:#23c6c8;cursor:pointer}"]}),e}(),Yn=n("xGaz"),Qn=n("TaO5");function Jn(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",19),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).recoverArticle()}),o["\u0275\u0275element"](1,"i",20),o["\u0275\u0275element"](2,"span",21),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](3,1,"REVERT")))}var Zn=function(e){return{"disabled cur-disabled":e}};function ei(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",22),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).deleteArticle("singleDelete")}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"i",23),o["\u0275\u0275element"](3,"span",21),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("nzTooltipTitle",o["\u0275\u0275pipeBind1"](1,3,i.isArticleAuthor?"":"DELETE_PERMISSION_TOOLTIP"))("ngClass",o["\u0275\u0275pureFunction1"](7,Zn,!i.isArticleAuthor)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,5,"COMMON_BUTTON_DELETE"))}}function ti(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",19),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).showRecord("annotation")}),o["\u0275\u0275element"](2,"i",24),o["\u0275\u0275element"](3,"span",21),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",25),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).showRecord("countersign")}),o["\u0275\u0275element"](6,"i",26),o["\u0275\u0275element"](7,"span",21),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](null!=i.reversionCtrl&&i.reversionCtrl.isOnlyShowAnnotation?"txt-primary":""),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,6,"COMMENTARIES")),o["\u0275\u0275advance"](2),o["\u0275\u0275classMap"](null!=i.reversionCtrl&&i.reversionCtrl.isOnlyShowCountersign?"txt-primary":""),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](8,8,"COUNTERSIGN_RECORDS"))}}var ni=function(e){return{content:e}},ii=function(e){return[e]},oi=function(e){return{paragraphs:e}};function ri(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"app-excel-create",31),o["\u0275\u0275element"](1,"div",32),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("container","history-luckysheet")("checkType",n.showHistoryType)("model","check-excel")("articleInfo",o["\u0275\u0275pureFunction1"](9,oi,o["\u0275\u0275pureFunction1"](7,ii,o["\u0275\u0275pureFunction1"](5,ni,n.description))))("sn",n.entity_sn)}}function ai(e,t){if(1&e&&o["\u0275\u0275element"](0,"html-render",33),2&e){o["\u0275\u0275nextContext"]();var n=o["\u0275\u0275reference"](1),i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("scrollInEL",n)("docContent",i.description)("docType","rich-text")}}function ci(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",27,28),o["\u0275\u0275template"](2,ri,2,11,"app-excel-create",29),o["\u0275\u0275template"](3,ai,1,3,"html-render",30),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275classProp"]("excel-history",n.entity_sn.includes("TABLE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.showDescription&&n.entity_sn.includes("TABLE")),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.showDescription&&!n.entity_sn.includes("TABLE"))}}function li(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275elementStart"](1,"div",14),o["\u0275\u0275template"](2,Jn,4,3,"div",15),o["\u0275\u0275template"](3,ei,5,9,"div",16),o["\u0275\u0275template"](4,ti,9,10,"ng-container",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",17),o["\u0275\u0275elementStart"](6,"span"),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,ci,4,4,"div",18),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.articleDetails.is_updated&&"system"!==(null==n.currentCategory?null:n.currentCategory.classify)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","HISTORYRECORD"==n.showHistoryType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","baseline"==(null==n.currentRevisionDetail?null:n.currentRevisionDetail.category)&&!n.isTable),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](n.articleTitle),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","HISTORYRECORD"==n.showHistoryType?n.articleHistory.length:n.revisionHistoryList.length)}}function si(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",36),o["\u0275\u0275element"](1,"i",37),o["\u0275\u0275elementStart"](2,"span",25),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).batchFilterPermiss()}),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,1,"BATCH_DELETE")))}function di(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",38),o["\u0275\u0275elementStart"](1,"button",39),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).updateAllItemClick()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"span",40),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).historyCancel()}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,2,"ALL_SELECTED")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](6,4,"COMMON_BUTTON_CANCLE")))}function pi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275template"](1,si,5,3,"div",34),o["\u0275\u0275template"](2,di,7,6,"div",35),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.showBatchdelete&&n.articleHistory.length>0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.showBatchdelete&&n.articleHistory.length>0)}}function ui(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",52),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"BASELINE_VERSION")))}function mi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",53),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.remark)}}function hi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",54),o["\u0275\u0275elementStart"](1,"div",55),o["\u0275\u0275element"](2,"span",56),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementStart"](4,"a",57),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"](4);o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngClass","01001001"==n.relation_type?"rr-color":"ir-color")("textContent",o["\u0275\u0275pipeBind1"](3,4,n.relation_type)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("href",i.getRelationUrl(n),o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.relation_title,"")}}var gi=function(e,t,n){return{name:e,username:t,create_time:n}};function fi(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",43),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.index;return o["\u0275\u0275nextContext"](3).changeCurrentRevision(e)}),o["\u0275\u0275elementStart"](1,"div",44),o["\u0275\u0275element"](2,"span",45),o["\u0275\u0275elementStart"](3,"div",46),o["\u0275\u0275template"](4,ui,3,3,"span",47),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",48),o["\u0275\u0275elementStart"](7,"p",49),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,mi,2,1,"div",50),o["\u0275\u0275template"](11,hi,6,6,"div",51),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,a=o["\u0275\u0275nextContext"](3);o["\u0275\u0275classProp"]("active-cord",a.currentRevisionIndex==r),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf","baseline"==i.category),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",i.revision_record_title," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](9,7,"REVERSION_UPDATE_INFO",o["\u0275\u0275pureFunction3"](10,gi,i.created_by.name,i.created_by.username,i.create_time))," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.remark),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",i.relation)}}function vi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",41),o["\u0275\u0275template"](1,fi,12,14,"div",42),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.revisionHistoryList)}}function bi(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",71),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"label",72),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().$implicit.checked=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275property"]("nzTooltipTitle",o["\u0275\u0275pipeBind1"](1,5,i.disabled?"DELETE_PERMISSION_TOOLTIP":"")),o["\u0275\u0275advance"](2),o["\u0275\u0275classMap"](i.disabled?"not-allowed-checkbox":""),o["\u0275\u0275property"]("ngModel",i.checked)("nzDisabled",i.disabled)}}function Ci(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",61),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.index;return o["\u0275\u0275nextContext"](3).changeCurrentHistory(e)}),o["\u0275\u0275template"](1,bi,3,7,"div",62),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275elementStart"](3,"div",63),o["\u0275\u0275elementStart"](4,"div",64),o["\u0275\u0275element"](5,"img",65),o["\u0275\u0275elementStart"](6,"div",66),o["\u0275\u0275elementStart"](7,"span",67),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"span",68),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",69),o["\u0275\u0275element"](12,"div",70),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,a=o["\u0275\u0275nextContext"](3);o["\u0275\u0275classProp"]("active-history",a.currentHistroryIndex==r),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!a.showBatchdelete),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](!1===a.showBatchdelete?"checked-text":""),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate1"]("src","http://w3.huawei.com/w3lab/rest/yellowpage/face/",i.operate_user.account,"/45",o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](i.operate_user.name+" "+i.operate_user.username),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.operate_time),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden",a.entity_sn.startsWith("TABLE")),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("innerHtml",a.getTextRevision(i.content_new),o["\u0275\u0275sanitizeHtml"])}}function yi(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",73),o["\u0275\u0275element"](1,"i",74),o["\u0275\u0275element"](2,"span",75),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](3,1,"LOADING")))}function xi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",58),o["\u0275\u0275template"](1,Ci,13,10,"div",59),o["\u0275\u0275template"](2,yi,4,3,"div",60),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.articleHistory),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.historyLoading)}}var wi=function(e){return{history_delete_count:e}};function _i(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"button",76),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).deleteArticle("batchDelete")}),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](i.getCheckListLength()>0?"delete-count-sty1":"delete-count-sty2"),o["\u0275\u0275property"]("disabled",!i.getCheckListLength())("textContent",o["\u0275\u0275pipeBind2"](2,4,"DELETE_COUNT",o["\u0275\u0275pureFunction1"](7,wi,i.getCheckListLength())))}}function Oi(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",77),o["\u0275\u0275elementStart"](1,"article-wiki-comment",78),o["\u0275\u0275listener"]("close",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"](2);return e.isShowComment=!1,e.reversionCtrl=null}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("@enterAnimation",void 0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("isCoe",!1)("creatorId",i.articleDetails.created_by.id)("articleId",i.articleDetails.id)("reversionCtrl",i.reversionCtrl)("baselineId",i.currentRevisionDetail.id)}}function Si(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",4),o["\u0275\u0275template"](1,li,9,5,"div",5),o["\u0275\u0275elementStart"](2,"div",6),o["\u0275\u0275elementStart"](3,"div",7),o["\u0275\u0275element"](4,"div",8),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275template"](6,pi,3,2,"div",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,vi,2,1,"div",10),o["\u0275\u0275template"](8,xi,3,2,"div",11),o["\u0275\u0275template"](9,_i,3,9,"div",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,Oi,2,6,"div",12),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","HISTORYRECORD"==n.showHistoryType?n.articleHistory.length:n.revisionHistoryList.length),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](5,7,n.showHistoryType)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf","HISTORYRECORD"===n.showHistoryType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","REVISIONVERSION"==n.showHistoryType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","HISTORYRECORD"==n.showHistoryType&&n.articleHistory.length>0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","HISTORYRECORD"==n.showHistoryType&&!n.showBatchdelete),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isShowComment)}}function Ei(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",79),o["\u0275\u0275element"](1,"span",80),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"img",81),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,1,"COMMON_INFO_NO_DATA")))}var Mi=function(){function e(e,t,n,i,r,a,c,l){this.router=e,this.activeRoute=t,this.knowledgeService=n,this.notification=i,this.modalService=r,this.translate=a,this.markdownService=c,this.emitService=l,this.closeHistoryModal=new o.EventEmitter,this.description="",this.revisionHistoryList=[],this.currentRevisionIndex=0,this.noRevisionAndHistroy=!1,this.articleHistory=[],this.currentHistroryIndex=0,this.isShowComment=!1,this.showDescription=!1,this.pageIndex=1,this.totalPages=1,this.pageSize=15,this.historyLoading=!1,this.showBatchdelete=!0,this.isArticleAuthor=!1}return e.prototype.ngOnInit=function(){"REVISIONVERSION"==this.showHistoryType?this.getRevisionVersion():this.gerArticleHistory("init"),this.articleTitle=this.articleDetails.title,this.currentUserId=window.communicationService.currentUser.user_id},e.prototype.ngAfterViewInit=function(){var e,t=this;"REVISIONVERSION"!=this.showHistoryType&&setTimeout(function(){(e=document.getElementsByClassName("history-list"))&&e[0]&&document.querySelector(".history-list").addEventListener("scroll",function(){var n=Math.max(e[0].scrollHeight,document.body.scrollHeight),i=e[0].scrollTop||document.body.scrollTop;if(e[0].clientHeight+i>=n){if(++t.pageIndex,t.pageIndex>t.totalPages)return;t.gerArticleHistory()}})},1e3)},e.prototype.getRevisionVersion=function(){var e=this;this.knowledgeService.getRevisionVersion(this.entity_sn).subscribe(function(t){if(t.length>0){e.noRevisionAndHistroy=!1,e.revisionHistoryList=t;var n=0;e.activeRervsionItem&&(n=e.revisionHistoryList.findIndex(function(t){return t.id===e.activeRervsionItem.id})),e.changeCurrentRevision(n),e.showDescription=!0}else e.noRevisionAndHistroy=!0},function(){})},e.prototype.gerArticleHistory=function(e){var t=this,n={count:this.pageSize,current_page:this.pageIndex,entity_id:this.articleDetails.id,entity_type:"wiki",operate_attr:"description"};this.historyLoading=!0,this.knowledgeService.gerArticleHistory(n).subscribe(function(n){t.historyLoading=!1,n&&n.result.length>0?(t.articleHistory=t.articleHistory.concat(n.result),t.totalRecords=n.total_records,t.totalPages=n.total_pages,"init"===e&&t.changeCurrentHistory(0,"initCheckoutStatus"),t.showDescription=!0):(t.showBatchdelete=!0,t.noRevisionAndHistroy=!0)},function(){})},e.prototype.changeCurrentHistory=function(e,t){if(this.currentHistroryIndex=e,this.articleHistory.length){var n=this.articleHistory[e].id,i=this.articleHistory[e].operate_user.id;this.currentHistroryId=n,this.getDetailAtical(n),this.isArticleAuthor=this.currentUserId===this.articleDetails.created_by.id||this.currentUserId===i,!1===this.articleHistory[e].disabled&&(this.articleHistory[e].checked="initCheckoutStatus"!==t&&!this.articleHistory[e].checked)}else this.noRevisionAndHistroy=!0},e.prototype.getDetailAtical=function(e){var t=this;this.knowledgeService.gerArticleHistoryDetails({id:e,entity_type:"wiki"}).subscribe(function(e){e&&(t.currentHistoryDetail=e,t.getDescriptionHtmlContent(e.content_new))},function(){})},e.prototype.getDescriptionHtmlContent=function(e){var t=this;this.description="",e.forEach(function(e){var n="1"==e.uiSource?e.content:t.markdownService.compile(e.content);"system"===t.currentCategory.classify&&(t.description+=e.category?"<h1>"+e.category+"</h1>":""),t.description+=n?t.handleSketchPadHistoryTag(n):""})},e.prototype.handleSketchPadHistoryTag=function(e){return e.replace(/<sketch-pad/g,'<sketch-pad is-load-lastest="false"')},e.prototype.changeCurrentRevision=function(e){var t;this.currentRevisionIndex=e,this.currentRevisionDetail=this.revisionHistoryList[e],this.articleTitle=this.revisionHistoryList[e].title,(null===(t=this.currentRevisionDetail)||void 0===t?void 0:t.paragraphs)&&this.getDescriptionHtmlContent(this.currentRevisionDetail.paragraphs)},e.prototype.recoverArticle=function(){var e=this;this.modalService.confirm({nzTitle:"<span>"+this.translate.instant("RECOBER_HISTORY_TIP")+"</span>",nzOnOk:function(){e.findSketchPadBeforeRecover()}})},e.prototype.findSketchPadBeforeRecover=function(){var e=this,t=document.getElementsByClassName("article-content-wrapper"),n=t.length&&t[0].getElementsByTagName("sketch-pad")||[];if(n.length){for(var i=[],o=0;o<n.length;o++){var r=n[o];i.push({id:r.getAttribute("page-id"),pageHistoryId:r.getAttribute("history-id")})}this.knowledgeService.recoverPadVersion(i).subscribe(function(t){e.confirm()},function(){})}else this.confirm()},e.prototype.confirm=function(){var e,t,n,i,o=this,r="REVISIONVERSION"===this.showHistoryType?this.currentRevisionDetail:this.currentHistoryDetail;if("system"!==(null===(e=this.currentCategory)||void 0===e?void 0:e.classify)){var a={id:this.articleDetails.id,description:(null!==(t=r.content_new)&&void 0!==t?t:r.paragraphs)[0].content,title:this.articleTitle,ui_source:(null!==(n=r.content_new)&&void 0!==n?n:r.paragraphs)[0].uiSource,kanban_id:this.articleDetails.kanban_id};this.knowledgeService.saveArticle([a]).subscribe(function(e){e.success&&e.success.length?o.recoveSuccessHandler():o.notification.error(o.translate.instant("SAVEED_FAILED"),"")},function(){})}else{var c={wikiSn:this.articleDetails.sn,wikiTitle:this.articleTitle,paragraphs:(null!==(i=r.content_new)&&void 0!==i?i:r.paragraphs).map(function(e){return{category:e.category,content:e.content,uiSource:e.uiSource,contentId:e.id}})};this.knowledgeService.updateWorkitemArticle(c).subscribe(function(e){var t=e.success,n=e.unmodify;(null==t?void 0:t.length)||(null==n?void 0:n.length)?o.recoveSuccessHandler():o.notification.error(o.translate.instant("SAVEED_FAILED"),"")},function(){})}},e.prototype.recoveSuccessHandler=function(){this.isShowRevisionAndHistory=!1,this.closeHistoryModal.emit({artilceUpdate:!0}),this.notification.success(this.translate.instant("SAVEED_SUCCESS"),"")},e.prototype.closeModal=function(){this.isShowRevisionAndHistory=!1,this.closeHistoryModal.emit(this.isShowRevisionAndHistory),this.entity_sn.includes("TABLE")&&this.emitService.emit({type:"excel::wiki-closeModel"})},e.prototype.getTextRevision=function(e){var t=this,n="";return e.forEach(function(e){var i,o,r;n+="system"===(null===(i=t.currentCategory)||void 0===i?void 0:i.classify)?"<strong>"+e.category+"</strong> ":"",n+=null!==(r=null===(o=null==e?void 0:e.content)||void 0===o?void 0:o.replace(/<\/?.+?>/g,""))&&void 0!==r?r:"",n+="  "}),n},e.prototype.getRelationUrl=function(e){var t;return t="/#/"+("01001001"==e.relation_type?"raw":"dev")+"/"+e.relation_id,e.content_id&&(t+="?content_id="+e.content_id),t},e.prototype.showRecord=function(e){switch(this.isShowComment=!0,e){case"annotation":var t={isOnlyShowAnnotation:!0,isOnlyShowCountersign:!1};this.reversionCtrl=Object(i.a)({},t);break;case"countersign":t={isOnlyShowAnnotation:!1,isOnlyShowCountersign:!0},this.reversionCtrl=Object(i.a)({},t)}},e.prototype.batchFilterPermiss=function(){var e=this;this.showBatchdelete=!1,this.articleHistory.forEach(function(t){t.disabled=e.articleDetails.created_by.id!==e.currentUserId&&e.currentUserId!==t.operate_user.id})},e.prototype.updateAllItemClick=function(){this.articleHistory.forEach(function(e){e.checked=!e.disabled})},e.prototype.historyCancel=function(){this.showBatchdelete=!0,this.articleHistory.forEach(function(e){e.checked=!1})},e.prototype.getCheckListLength=function(){return this.articleHistory.filter(function(e){return e.checked}).length},e.prototype.deleteArticle=function(e){var t,n=this;t="singleDelete"===e?[this.currentHistroryId]:this.articleHistory.filter(function(e){return e.checked}).map(function(e){return e.id}),this.isArticleAuthor&&this.modalService.confirm({nzTitle:"<span>"+this.translate.instant("DELETE_HISTORY_TIP")+"</span>",nzOnOk:function(){n.deleteConfrim("wiki",t)}})},e.prototype.deleteConfrim=function(e,t){var n=this;this.knowledgeService.deleteHistoryRecord(e,t).subscribe(function(e){200===e.code?(n.pageSize=15,n.pageIndex=1,n.articleHistory=n.articleHistory.filter(function(e){return!t.includes(e.id)}),n.changeCurrentHistory(0,"initCheckoutStatus"),n.showBatchdelete=!0):-18014===e.code&&n.notification.error(n.translate.instant("TIPS"),n.translate.instant(String(e.code)))},function(){})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](D.f),o["\u0275\u0275directiveInject"](D.a),o["\u0275\u0275directiveInject"](E.b),o["\u0275\u0275directiveInject"](L.b),o["\u0275\u0275directiveInject"](z.d),o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](xt.c),o["\u0275\u0275directiveInject"](R.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["revision-and-history"]],inputs:{isShowRevisionAndHistory:"isShowRevisionAndHistory",showHistoryType:"showHistoryType",articleDetails:"articleDetails",entity_sn:"entity_sn",activeRervsionItem:"activeRervsionItem",currentCategory:"currentCategory",isTable:"isTable"},outputs:{closeHistoryModal:"closeHistoryModal"},features:[o["\u0275\u0275ProvidersFeature"]([xt.c])],decls:4,vars:2,consts:[[1,"content-box"],["class","history-revision-wrapper",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[1,"iconfont","icon-close","f-16",3,"click"],[1,"history-revision-wrapper"],["class","article-content-wrapper",4,"ngIf"],[1,"content-wrapper"],[1,"header"],[1,"f-weight7",3,"textContent"],[4,"ngIf"],["class","history-list",4,"ngIf"],["class","history-list slim-scroll-bar",4,"ngIf"],["class","comment-wrapper",4,"ngIf"],[1,"article-content-wrapper"],[1,"record-btn"],["class","m-r-10",3,"click",4,"ngIf"],["nz-tooltip","",3,"nzTooltipTitle","ngClass","click",4,"ngIf"],[1,"article-title"],["class","artilce-description",3,"excel-history",4,"ngIf"],[1,"m-r-10",3,"click"],[1,"iconfont","icon-history","revert-icon"],[3,"textContent"],["nz-tooltip","",3,"nzTooltipTitle","ngClass","click"],[1,"iconfont","icon-delete","revert-icon"],[1,"iconfont","icon-comment-left-tail","f-12"],[3,"click"],[1,"iconfont","icon-doc-preview","f-14","countersign-icon"],[1,"artilce-description"],["scrollBody",""],[3,"container","checkType","model","articleInfo","sn",4,"ngIf"],[3,"scrollInEL","docContent","docType",4,"ngIf"],[3,"container","checkType","model","articleInfo","sn"],["id","history-luckysheet",1,"luckysheet-container"],[3,"scrollInEL","docContent","docType"],["class","history-batch-delete",4,"ngIf"],["class","history-selected",4,"ngIf"],[1,"history-batch-delete"],[1,"iconfont","icon-radio","radio-content-icon"],[1,"history-selected"],["type","button",1,"history-button","history-all-selected",3,"click"],[1,"history-button","history-deselect",3,"click"],[1,"history-list"],["class","history-item",3,"active-cord","click",4,"ngFor","ngForOf"],[1,"history-item",3,"click"],[1,"cord-date","flex-box"],[1,"f-16","text-checked","circle-bg"],[1,"f-weight7","text-checked"],["class","baseline-version-bg m-r-5",4,"ngIf"],[1,"history-item-detail"],[1,"cord-create-by"],["class","revisionItem-remark",4,"ngIf"],["class","related-list",4,"ngFor","ngForOf"],[1,"baseline-version-bg","m-r-5"],[1,"revisionItem-remark"],[1,"related-list"],[1,"related-item"],[1,"workitem-box",3,"ngClass","textContent"],["target","_blank",3,"href"],[1,"history-list","slim-scroll-bar"],["class","history-item border-b",3,"active-history","click",4,"ngFor","ngForOf"],["class","history-list-bottom-tips",4,"ngIf"],[1,"history-item","border-b",3,"click"],["class","checked-input","nz-tooltip","",3,"nzTooltipTitle",4,"ngIf"],[1,"detail-revision-content","p-8"],[1,"flex-box"],["alt","",1,"user-avatar",3,"src"],[1,"flex-cell","p-l-5"],[1,"detail-revision-describe","f-14","p-r-5"],[1,"detail-revision-describe-time","f-12"],[1,"content-history-box",3,"hidden"],[1,"article-content",3,"innerHtml"],["nz-tooltip","",1,"checked-input",3,"nzTooltipTitle"],["nz-checkbox","",3,"ngModel","nzDisabled","ngModelChange"],[1,"history-list-bottom-tips"],["nz-icon","","nzType","loading",1,"icon"],[1,"tips",3,"textContent"],[1,"delete-count",3,"disabled","textContent","click"],[1,"comment-wrapper"],[3,"isCoe","creatorId","articleId","reversionCtrl","baselineId","close"],[1,"no-data-wrapper"],[1,"box-block",3,"textContent"],["src","/knowledge-ui/assets/imgs/no_data.jpg"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,Si,11,9,"div",1),o["\u0275\u0275template"](2,Ei,4,3,"div",2),o["\u0275\u0275elementStart"](3,"i",3),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.noRevisionAndHistroy),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.noRevisionAndHistroy))},directives:[F.n,X.d,F.l,$t.a,pn.a,F.m,Qn.a,U.k,U.l,H.a,G.a,Yn.a],pipes:[A.b],styles:[".content-box[_ngcontent-%COMP%]{width:100%;height:calc(100% - 50px);background:#fff;position:fixed;top:50px;left:0;z-index:11}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .comment-wrapper[_ngcontent-%COMP%]{position:fixed;top:50px;height:100%;background:#fff;right:0;z-index:6;width:350px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .article-content-wrapper[_ngcontent-%COMP%]{flex:1;padding:10px 10%;border-right:1px solid #e8e8e8;overflow:auto;position:relative}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .article-content-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .article-content-wrapper[_ngcontent-%COMP%]   .record-btn[_ngcontent-%COMP%]{font-size:15px;position:absolute;right:8px;top:6px;display:flex;cursor:pointer}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .article-content-wrapper[_ngcontent-%COMP%]   .record-btn[_ngcontent-%COMP%]   .revert-icon[_ngcontent-%COMP%]{font-size:16px;position:relative;top:1px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .article-content-wrapper[_ngcontent-%COMP%]   .record-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:4px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .article-content-wrapper[_ngcontent-%COMP%]   .record-btn[_ngcontent-%COMP%]   .countersign-icon[_ngcontent-%COMP%]{position:relative;top:1px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .article-content-wrapper[_ngcontent-%COMP%]   .article-title[_ngcontent-%COMP%]{font-size:24px;text-align:left;font-weight:700;margin:10px 0;display:flex;justify-content:space-between}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .article-content-wrapper[_ngcontent-%COMP%]   .artilce-description[_ngcontent-%COMP%]{padding:16px;overflow-y:auto}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{width:auto;height:100%}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:16px;padding:10px 0 20px 10px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .history-batch-delete[_ngcontent-%COMP%]{position:relative;left:-40px;cursor:pointer;font-size:13px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .history-batch-delete[_ngcontent-%COMP%]   .radio-content-icon[_ngcontent-%COMP%]{font-size:13px;margin-right:8px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .history-batch-delete[_ngcontent-%COMP%]:hover{color:#23c6c8}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .history-selected[_ngcontent-%COMP%]{position:relative;left:-50px;cursor:pointer;font-size:13px;display:flex;text-align:center;line-height:24px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .history-selected[_ngcontent-%COMP%]   .history-button[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:4.5px;opacity:1;border:none}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .history-selected[_ngcontent-%COMP%]   .history-all-selected[_ngcontent-%COMP%]{width:58px;display:block}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .history-selected[_ngcontent-%COMP%]   .history-deselect[_ngcontent-%COMP%]{width:50px;margin-left:8px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]{width:350px;max-height:calc(100% - 55px);overflow:auto}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{cursor:pointer;padding:12px 0 12px 10px;position:relative}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .checked-input[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 10px)}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .checked-input[_ngcontent-%COMP%]   .not-allowed-checkbox[_ngcontent-%COMP%]{background:#f2f2f2;cursor:not-allowed}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .checked-text[_ngcontent-%COMP%]{margin-left:20px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .cord-date[_ngcontent-%COMP%]{display:flex}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .cord-date[_ngcontent-%COMP%]   .baseline-version-bg[_ngcontent-%COMP%]{color:#23c6c8;background:rgba(35,198,200,.15);display:inline-block;border-radius:2px;padding:0 5px;font-weight:400}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .cord-date[_ngcontent-%COMP%]   .circle-bg[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:#aaa;display:inline-block;margin-right:15px;position:relative;top:6px;left:5px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .text-checked.f-16[_ngcontent-%COMP%]{color:#aaa}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-item-detail[_ngcontent-%COMP%]{border-left:1px solid #e8e8e8;margin-left:10px;padding-left:15px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-item-detail[_ngcontent-%COMP%]   .related-item[_ngcontent-%COMP%]{display:flex}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .cord-create-by[_ngcontent-%COMP%]{font-size:12px;color:#aaa}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .revisionItem-remark[_ngcontent-%COMP%]{background:#f2f2f2;width:276px;margin-bottom:10px;color:#676a6c;padding:8px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .article-content[_ngcontent-%COMP%]{padding:0 10px;overflow:hidden;-webkit-line-clamp:4;-webkit-box-orient:vertical;display:-webkit-box}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .related-list[_ngcontent-%COMP%]{margin-bottom:8px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .related-list[_ngcontent-%COMP%]   .workitem-box[_ngcontent-%COMP%]{display:inline-block;font-size:12px;width:35px;border-radius:4px;text-align:center;vertical-align:middle;height:18px;line-height:18px;border:1px solid #23c6c8;margin-right:4px}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .related-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:245px;vertical-align:middle}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .related-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#23c6c8!important}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .panigation[_ngcontent-%COMP%]{text-align:center;margin:20px 0;position:relative}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .delete-count[_ngcontent-%COMP%]{width:350px;height:40px;line-height:40px;text-align:center;color:#fff;transition:unset;font-size:16px;position:absolute;bottom:0;border:none}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .delete-count-sty1[_ngcontent-%COMP%]{background:#d55;cursor:pointer}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .delete-count-sty2[_ngcontent-%COMP%]{cursor:not-allowed;background:rgba(221,85,85,.5)}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .active-history[_ngcontent-%COMP%]{background-color:#e8f9fa}.content-box[_ngcontent-%COMP%]   .history-revision-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .active-cord[_ngcontent-%COMP%]   .text-checked[_ngcontent-%COMP%]{color:#23c6c8!important}.content-box[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{width:100%;padding:300px;text-align:center}.content-box[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 auto}.content-box[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{cursor:pointer}.content-box[_ngcontent-%COMP%]   .icon-close[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;font-size:24px}.user-avatar[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%}.slim-scroll-bar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:hsla(0,0%,100%,.72)!important}.slim-scroll-bar[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background-color:hsla(0,0%,40%,.72)!important}.border-b[_ngcontent-%COMP%]{border-bottom:1px solid #e8e8e8}.rr-color[_ngcontent-%COMP%]{color:#3478ff!important;border-color:#3478ff!important}.ir-color[_ngcontent-%COMP%]{color:#3fd0b3!important;border-color:#3fd0b3!important}.history-list-bottom-tips[_ngcontent-%COMP%]{padding:0;text-align:center;line-height:52px}.history-list-bottom-tips[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .history-list-bottom-tips[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]{vertical-align:top;line-height:46px}.history-list-bottom-tips[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:26px;margin-right:10px}.history-list-bottom-tips[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]{color:#999;font-size:14px}.excel-history[_ngcontent-%COMP%]{position:absolute;top:60px;bottom:0;left:var(--left-width);right:0}"],data:{animation:[Object(g.l)("enterAnimation",[Object(g.k)(":enter",[Object(g.j)({transform:"translateX(100%)",opacity:0}),Object(g.e)("500ms",Object(g.j)({transform:"translateX(0)",opacity:1}))]),Object(g.k)(":leave",[Object(g.j)({transform:"translateX(0)",opacity:1}),Object(g.e)("500ms",Object(g.j)({transform:"translateX(100%)",opacity:0}))])])]}}),e}(),Pi=n("JXZa"),Ii=function(){function e(e,t,n){this.translate=e,this.knowledgeService=t,this.notification=n,this.getContentEventSubject=new r.a,this.closeTemplateModal=new o.EventEmitter}return e.prototype.ngOnInit=function(){var e=this.editorParams.articleDetails,t=e.paragraphs;if(this.editArticleTile=e.title,1===t.length){var n=Object(i.g)(t,1)[0];this.descriptionType=Object(f.q)(n.ui_source),this.editDescription=n.content}},e.prototype.closeModal=function(){this.closeTemplateModal.emit()},e.prototype.descriptionChange=function(e){this.editDescription=e.description,this.descriptionType=e.type,this.editArticleTile=e.title?e.title:this.editArticleTile,"wiki::get-content-before-save-template"==e.eventType&&this.saveTemplate()},e.prototype.getContentBeforeSaveTemplate=function(){this.getContentEventSubject.next({eventType:"wiki::get-content-before-save-template",clearCache:!0})},e.prototype.saveTemplate=function(){var e=this;this.knowledgeService.createWikiTemplate([{title:this.editArticleTile,description:this.editDescription,ui_source:"rich-text"==this.descriptionType?1:2,assigned_domain:this.editorParams&&this.editorParams.workitemInfo?this.editorParams.workitemInfo.productId:"",type:"team"}]).subscribe(function(t){0==t.success.length&&0!=t.failed.length?e.notification.success(e.translate.instant("UPDATE_FAILED"),""):0!=t.success.length&&(e.notification.success(e.translate.instant("UPDATE_SUCCESS"),""),e.closeTemplateModal.emit())},function(){})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](E.b),o["\u0275\u0275directiveInject"](L.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["save-as-template"]],inputs:{editorParams:"editorParams"},outputs:{closeTemplateModal:"closeTemplateModal"},decls:14,vars:13,consts:[[1,"save-as-template"],[1,"template-header"],[1,"template-header-left",3,"textContent"],[1,"template-header-right"],[1,"save-btn","cursor-pointer",3,"textContent","click"],[1,"icon-style","iconfont","icon-close","cursor-pointer",3,"click"],[1,"template-container"],[1,"edit-box"],[1,"edit-box-header"],["type","text",3,"ngModel","ngModelChange"],[1,"border-wrapper"],["richTextId","articleTemplate",1,"editor-full-width",3,"type","height","description","getContentEvent","workitemInfo","username","getEditorContent"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275element"](2,"div",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementStart"](4,"div",3),o["\u0275\u0275elementStart"](5,"button",4),o["\u0275\u0275listener"]("click",function(){return t.getContentBeforeSaveTemplate()}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"i",5),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",6),o["\u0275\u0275elementStart"](9,"div",7),o["\u0275\u0275elementStart"](10,"div",8),o["\u0275\u0275elementStart"](11,"input",9),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.editArticleTile=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",10),o["\u0275\u0275elementStart"](13,"vision-editor",11),o["\u0275\u0275listener"]("getEditorContent",function(e){return t.descriptionChange(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](3,9,"CREATE_NEW_TEMPLATE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](6,11,"SAVE_TEMPLATE")),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngModel",t.editArticleTile),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("type",t.descriptionType)("height",740)("description",t.editDescription)("getContentEvent",t.getContentEventSubject.asObservable())("workitemInfo",t.editorParams.workitemInfo)("username",t.editorParams.currentUsername))},directives:[U.d,U.k,U.l,Pi.a],pipes:[A.b],styles:[".save-as-template[_ngcontent-%COMP%]{width:100%;height:calc(100% - 50px);background:#fff;position:fixed;top:50px;left:0;padding:15px;z-index:5}.save-as-template[_ngcontent-%COMP%]   .template-header[_ngcontent-%COMP%]{height:30px;display:flex;justify-content:space-between;align-items:center}.save-as-template[_ngcontent-%COMP%]   .template-header[_ngcontent-%COMP%]   .template-header-left[_ngcontent-%COMP%]{padding-left:15px;font-size:20px;color:#676a6c}.save-as-template[_ngcontent-%COMP%]   .template-header[_ngcontent-%COMP%]   .template-header-right[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:#23c6c8;color:#fff;font-size:13px;height:26px;line-height:26px;padding:0 18px;border:none;border-radius:4px;position:relative;top:-3px;outline:none}.save-as-template[_ngcontent-%COMP%]   .template-header[_ngcontent-%COMP%]   .template-header-right[_ngcontent-%COMP%]   .icon-style[_ngcontent-%COMP%]{margin-left:20px;font-size:24px;color:#666}.save-as-template[_ngcontent-%COMP%]   .template-container[_ngcontent-%COMP%]{margin-top:30px;padding:0 16%}.save-as-template[_ngcontent-%COMP%]   .template-container[_ngcontent-%COMP%]   .edit-box[_ngcontent-%COMP%]{padding-left:20px}.save-as-template[_ngcontent-%COMP%]   .template-container[_ngcontent-%COMP%]   .edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.save-as-template[_ngcontent-%COMP%]   .template-container[_ngcontent-%COMP%]   .edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;height:35px;border:none;outline:none;font-size:25px;color:#333;font-weight:700}.save-as-template[_ngcontent-%COMP%]   .template-container[_ngcontent-%COMP%]   .edit-box[_ngcontent-%COMP%]   .border-wrapper[_ngcontent-%COMP%]{border:1px dashed #d5d5d5;padding:5px 10px 10px 5px}.save-as-template[_ngcontent-%COMP%]   .cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),e}(),ki=n("hK9q"),Ti=n("5UG9"),Di=n("OzZK"),Ai=n("RwU8"),zi=["tagManager"],Ri=["wikiUpdateTips"],Li=["luckysheet"],Ni=["sreStatusFlow"],ji=["wikiKanban"];function Vi(e,t){1&e&&o["\u0275\u0275element"](0,"i",33)}function Fi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",30),o["\u0275\u0275template"](1,Vi,1,0,"ng-template",null,31,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275element"](3,"nz-spin",32),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275reference"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("nzIndicator",n)}}function Bi(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"article-edit-info",75),o["\u0275\u0275listener"]("showHistory",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](4).showRevisionAndHistory("HISTORYRECORD")}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("articleDetail",i.articleDetails)("isShowHistory",i.isShowFunction.history)}}function Ui(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"navigation-list",73),o["\u0275\u0275listener"]("clickEmit",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).linkRouterFunc(e)}),o["\u0275\u0275template"](1,Bi,1,2,"article-edit-info",74),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("navigatioList",i.navigatioList)("activeSn",i.sn)("haveSave",i.haveSave)("category",i.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isTable)}}function Wi(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",76),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).showAnonymizePreview()}),o["\u0275\u0275elementStart"](1,"button",77),o["\u0275\u0275element"](2,"span",78),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,1,"PREVIEW")))}function Hi(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",76),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).closeAnonymizePreview()}),o["\u0275\u0275elementStart"](1,"button",77),o["\u0275\u0275element"](2,"span",79),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,1,"COMMON_BTN_RETURN")))}function Gi(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",102),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](6).editArticle()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](6),r=o["\u0275\u0275reference"](5);o["\u0275\u0275styleProp"]("pointer-events",null!=i.collaboration&&i.collaboration.disableEditButton?"none":"auto"),o["\u0275\u0275classProp"]("disabled",null==i.collaboration?null:i.collaboration.disableEditButton),o["\u0275\u0275property"]("nzTooltipOverlayClassName","locking-tooltip")("nzTooltipTitle",r)("nzTooltipTrigger",null)("nzTooltipVisible",(null==i.collaboration?null:i.collaboration.waitCollaboration)||(null==i.collaboration?null:i.collaboration.inCollabTips))("nzTooltipPlacement",i.fullScreenCtrl?"leftBottom":"bottom"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,10,"EDIT")," ")}}function qi(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Gi,3,12,"span",101),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](5);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.articleDetails.is_updated&&n.isShowFunction.edit&&!n.isEventReport)}}function $i(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",102),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](6).editArticle()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](6),r=o["\u0275\u0275reference"](3);o["\u0275\u0275property"]("nzTooltipOverlayClassName","locking-tooltip")("nzTooltipTitle",r)("nzTooltipTrigger",null)("nzTooltipVisible",!i.workitemDetailShow&&i.wikiLocked)("nzTooltipPlacement",i.fullScreenCtrl?"leftBottom":"bottom"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,6,"EDIT")," ")}}function Ki(e,t){if(1&e&&o["\u0275\u0275template"](0,$i,3,8,"span",103),2&e){var n=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("ngIf",n.articleDetails.is_updated&&n.isShowFunction.edit&&!n.isEventReport)}}function Xi(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",104),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).workItemReviewShare()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"REVIEW_JUDGE")," "))}function Yi(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",105),o["\u0275\u0275elementStart"](1,"app-sre-status-flow",106,107),o["\u0275\u0275listener"]("reviewAccessEmmiter",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).handleReviewAccess(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("articleDetails",i.articleDetails)("currentDomainInfo",i.currentDomainInfo)}}function Qi(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",108),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).toggleFullScreen()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](1,1,"DEMO"))}function Ji(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"span",110),o["\u0275\u0275element"](2,"i",111),o["\u0275\u0275elementStart"](3,"span",112),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){o["\u0275\u0275nextContext"](7);var n=o["\u0275\u0275reference"](25);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzPlacement","bottomLeft")("nzDropdownMenu",n),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,3,"PUBLISH_TO_CATEGORY"))}}function Zi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",110),o["\u0275\u0275element"](1,"i",111),o["\u0275\u0275elementStart"](2,"span",112),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){o["\u0275\u0275nextContext"](7);var n=o["\u0275\u0275reference"](9);o["\u0275\u0275property"]("nzPlacement","bottomLeft")("nzDropdownMenu",n),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,3,"PUBLISH_TO_CATEGORY"))}}function eo(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Ji,6,5,"ng-container",84),o["\u0275\u0275template"](2,Zi,5,5,"ng-template",null,109,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275reference"](3),i=o["\u0275\u0275nextContext"](6);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.articleDetails.visibility===i.articlePublicStatus)("ngIfElse",n)}}function to(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"span",113),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](6).coeRelease()}),o["\u0275\u0275element"](2,"i",111),o["\u0275\u0275elementStart"](3,"span",112),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,1,"POST_CASE")))}var no=function(){return[0,1]};function io(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,eo,4,2,"ng-container",15),o["\u0275\u0275template"](2,to,6,3,"ng-container",15),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](5);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.isCoe&&!o["\u0275\u0275pureFunction0"](2,no).includes(n.articleDetails.publishStatus)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isCoe&&n.isCanCoeRelease&&0!==n.articleDetails.publishStatus)}}function oo(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"span",114),o["\u0275\u0275element"](2,"i",111),o["\u0275\u0275elementStart"](3,"span",115),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,1,"RELEASE_BEING_REVIEWED")))}function ro(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"span",116),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"span",117),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).approveRelease()}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){o["\u0275\u0275nextContext"](5);var i=o["\u0275\u0275reference"](41);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzPlacement","bottomLeft")("nzDropdownMenu",i),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,4,"WIKI_UNLOCK_REFUSE")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](6,6,"APPROVE_THE_RELEASE"))}}function ao(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",118),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).openAssociatedWorkitem()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"span",119),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](2,2,"ASSOCIATED")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("(",i.linkWorkItemNumber,")")}}var co=function(e){return{"excel-screen-btn":e}};function lo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",108),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).excelFullScreen()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275classMap"](o["\u0275\u0275pureFunction1"](5,co,"en"===i.currentLang)),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](1,3,"FULL_SCREEN"))}}function so(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",120),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).resetAssociatedWorkitem()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"span",121),o["\u0275\u0275elementEnd"]()}if(2&e){o["\u0275\u0275nextContext"](3);var i=o["\u0275\u0275reference"](20);o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](1,2,"SHARE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("nzDropdownMenu",i)}}function po(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",122),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).openCommentPanel(!0)}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"i",123),o["\u0275\u0275elementStart"](3,"span",124),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](1,2,"COMMENT")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](i.commentNum)}}function uo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",122),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).openAssociatedWorkitem()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"i",125),o["\u0275\u0275elementStart"](3,"span",124),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](1,2,"ASSOCIATED")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](i.linkWorkItemNumber)}}function mo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",122),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).openAssociatedWorkitem()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"i",125),o["\u0275\u0275elementStart"](3,"span",124),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](1,2,"ASSOCIATED")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](i.linkWorkItemNumber)}}function ho(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",126),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).setVote()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"i",127),o["\u0275\u0275elementStart"](3,"span",124),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](1,6,"LIKE")),o["\u0275\u0275advance"](2),o["\u0275\u0275classProp"]("icon-thumbup-active",i.voters),o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("icon-thumbup-active",i.voters),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.statisticsData.praise_amount)}}function go(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",128),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).resetAssociatedWorkitem()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"i",129),o["\u0275\u0275elementStart"](3,"span",124),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](1,2,"VIEWING_COUNT")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](i.statisticsData.reading_amount)}}function fo(e,t){1&e&&o["\u0275\u0275element"](0,"i",132)}function vo(e,t){if(1&e&&o["\u0275\u0275element"](0,"i",133),2&e){var n=o["\u0275\u0275nextContext"](6);o["\u0275\u0275classProp"]("icon-favorites-active",n.favorites)}}function bo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",126),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).setFavorites()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275template"](2,fo,1,0,"i",130),o["\u0275\u0275template"](3,vo,1,2,"ng-template",null,131,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275reference"](4),r=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](1,3,r.favorites?"CANCEL_FAVORITES_TIPS":"ADD_TO_FAVORITES")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!r.favorites)("ngIfElse",i)}}function Co(e,t){if(1&e&&o["\u0275\u0275element"](0,"span",134),2&e){o["\u0275\u0275nextContext"](3);var n=o["\u0275\u0275reference"](8);o["\u0275\u0275property"]("nzDropdownMenu",n)}}function yo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",135),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).resetAssociatedWorkitem()})("nzVisibleChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).setMoreBtnNull(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){o["\u0275\u0275nextContext"](3);var i=o["\u0275\u0275reference"](33);o["\u0275\u0275property"]("nzDropdownMenu",i)}}function xo(e,t){1&e&&o["\u0275\u0275element"](0,"span",136)}function wo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",137),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).closeMinimize()}),o["\u0275\u0275elementEnd"]()}}var _o=function(){return["system","PRD"]},Oo=function(){return["workitem","coe"]};function So(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",83),o["\u0275\u0275template"](1,qi,2,1,"ng-container",84),o["\u0275\u0275template"](2,Ki,1,1,"ng-template",null,85,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](4,Xi,3,3,"span",86),o["\u0275\u0275template"](5,Yi,3,2,"span",87),o["\u0275\u0275template"](6,Qi,2,3,"span",88),o["\u0275\u0275template"](7,io,3,3,"ng-container",15),o["\u0275\u0275template"](8,oo,6,3,"ng-container",15),o["\u0275\u0275template"](9,ro,7,8,"ng-container",15),o["\u0275\u0275template"](10,ao,5,4,"span",89),o["\u0275\u0275template"](11,lo,2,7,"span",90),o["\u0275\u0275template"](12,so,3,4,"span",91),o["\u0275\u0275elementStart"](13,"span",92),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](4).setWikiFavorite()}),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275element"](15,"span",93),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](16,po,5,4,"span",94),o["\u0275\u0275template"](17,uo,5,4,"span",94),o["\u0275\u0275template"](18,mo,5,4,"span",94),o["\u0275\u0275template"](19,ho,5,8,"span",95),o["\u0275\u0275template"](20,go,5,4,"span",96),o["\u0275\u0275template"](21,bo,5,5,"span",95),o["\u0275\u0275template"](22,Co,1,1,"span",97),o["\u0275\u0275template"](23,yo,1,1,"span",98),o["\u0275\u0275template"](24,xo,1,0,"span",99),o["\u0275\u0275template"](25,wo,1,0,"span",100),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275reference"](3),r=o["\u0275\u0275nextContext"](4);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.collaborationMode)("ngIfElse",i),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",(null==r.isShowFunction?null:r.isShowFunction.isWorkitemReview)&&r.articleDetails.is_updated),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isSreWiki),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isShowFunction.toogleFullScreen&&"table"!==r.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isReleasePublish),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isReleasePublish&&0===r.articleDetails.publishStatus),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isReleaseExamine&&0===r.articleDetails.publishStatus),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!r.isStandaloneWiki&&r.isShowFunction.link&&!r.isEventReport&&r.isCoe&&"table"!==r.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isShowFunction.toogleFullScreen&&r.isTable),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isShowFunction.share),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](14,24,r.isFavorite?"UNFAVORITE":"ADD_TO_FAVORITES")),o["\u0275\u0275advance"](2),o["\u0275\u0275classMap"](r.isFavorite?"icon-xing1":"icon-star-outline"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isShowFunction.comment&&!r.isEventReport&&"table"!==r.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!r.isStandaloneWiki&&r.isShowFunction.link&&!r.isEventReport&&!r.isCoe&&"table"!==r.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isShowFunction.link&&r.isTable),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isShowFunction.vote),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isShowFunction.viewCount),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isStandaloneWiki&&"table"!==r.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isShowFunction.createArticle&&"table"!==r.category&&!r.isCoe&&!o["\u0275\u0275pureFunction0"](26,_o).includes(null==r.currentCategory?null:r.currentCategory.classify)&&(null==r.articleDetails.assigned_domain?null:r.articleDetails.assigned_domain.id)===r.currentDomainId),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!r.isEventReport),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.needGuideWideMode&&!r.isTable),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pureFunction0"](27,Oo).includes(r.isShowFunction.editFrom)&&"table"!==r.category)}}function Eo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"span",139),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).recoverArticleModTip()}),o["\u0275\u0275element"](2,"i",140),o["\u0275\u0275element"](3,"span",44),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"span",141),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).thoroughDeletedArticle()}),o["\u0275\u0275element"](6,"i",142),o["\u0275\u0275element"](7,"span",44),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,2,"REVERT")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](8,4,"REMOVE_COMPLETELY")))}function Mo(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",138),o["\u0275\u0275template"](1,Eo,9,6,"ng-container",15),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](4);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.articleDetails.is_deleted)}}function Po(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",80),o["\u0275\u0275template"](1,So,26,28,"div",81),o["\u0275\u0275template"](2,Mo,2,1,"div",82),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("hidden",n.isAnonymize),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.is_deleted&&!n.isShowFileDetail),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.is_deleted&&!n.isEventReport)}}function Io(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"import-word-drag",143),o["\u0275\u0275listener"]("closeCallback",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).closeImportWord()}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("parentNode",i.parentNode)("sn",i.sn)("kanBanId",i.articleDetails.kanban_id)("currentDomain",i.currentDomainInfo.id)}}function ko(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"li",144),o["\u0275\u0275elementStart"](1,"div",145),o["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),o["\u0275\u0275elementStart"](2,"div",50),o["\u0275\u0275element"](3,"i",146),o["\u0275\u0275elementStart"](4,"span",52),o["\u0275\u0275text"](5,"Email"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",53),o["\u0275\u0275element"](7,"span",147),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](8,1,"EMAIL_SUGGEST")))}function To(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",148),o["\u0275\u0275listener"]("nzPopoverVisibleChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).popoverGuideVisible.isHotDotPopoVisible=e}),o["\u0275\u0275element"](1,"span",149),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"div",150),o["\u0275\u0275elementStart"](4,"nz-switch",151),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).wideModeSwitch=e})("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).handleSwitchChange(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3),r=o["\u0275\u0275reference"](55);o["\u0275\u0275property"]("nzPopoverVisible",i.popoverGuideVisible.isHotDotPopoVisible)("nzPopoverContent",r)("nzPopoverPlacement","left")("nzPopoverTrigger",null),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,6,"WIDE_MODE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",i.wideModeSwitch)}}function Do(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",152),o["\u0275\u0275element"](1,"span",149),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"div",150),o["\u0275\u0275elementStart"](4,"nz-switch",151),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).wideModeSwitch=e})("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).handleSwitchChange(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](2,2,"WIDE_MODE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",i.wideModeSwitch)}}function Ao(e,t){1&e&&(o["\u0275\u0275element"](0,"div",153),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](1,1,"WIDE_MODE_DESCRIBE"))}function zo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",154),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).showRevisionAndHistory("REVISIONVERSION")}),o["\u0275\u0275element"](1,"i",155),o["\u0275\u0275element"](2,"span",156),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](3,1,"REVISIONVERSION")))}function Ro(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",154),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).showRevisionAndHistory("HISTORYRECORD")}),o["\u0275\u0275element"](1,"i",157),o["\u0275\u0275element"](2,"span",156),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](3,1,"HISTORYRECORD")))}function Lo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",154),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).accessControlShowFunc()}),o["\u0275\u0275element"](1,"i",158),o["\u0275\u0275element"](2,"span",156),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](3,1,"VISIBILITY_CONFIG")))}function No(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",159),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).saveAsTemplate()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"i",160),o["\u0275\u0275element"](3,"span",156),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275classMap"](i.authAccess&&i.authAccess.templateAccess?"":"not-allowed-styl"),o["\u0275\u0275property"]("title",i.authAccess&&i.authAccess.templateAccess?"":o["\u0275\u0275pipeBind1"](1,4,"TEMPLATE_NO_ACCESS_TIP")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,6,"SAVE_AS_TEMPLATE"))}}function jo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",159),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).startCountersign()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"i",161),o["\u0275\u0275element"](3,"span",156),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275classMap"](i.coutersignOperate?"":"not-allowed-styl"),o["\u0275\u0275property"]("title",i.coutersignOperate?"":o["\u0275\u0275pipeBind1"](1,4,"COUNTERSIGN_NO_ACCESS_TIP")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,6,"COUNTERSIGN"))}}function Vo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",159),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).startReview()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"i",161),o["\u0275\u0275element"](3,"span",156),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275classMap"](i.sreOperateAccess?"":"not-allowed-styl"),o["\u0275\u0275property"]("title",i.sreOperateAccess?"":o["\u0275\u0275pipeBind1"](1,4,"REVIEW_NO_ACCESS_TIP")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,6,"APPLICATY_REVIEW"))}}function Fo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",162),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).baseline()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"i",163),o["\u0275\u0275element"](3,"span",156),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275classMap"](i.isShowBaseline?"":"not-allowed-styl"),o["\u0275\u0275property"]("title",i.isShowBaseline?"":o["\u0275\u0275pipeBind1"](1,4,"BASELINE_NO_ACCESS_TIP")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](4,6,"BASELINE"))}}function Bo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"li",154),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).exportWord()}),o["\u0275\u0275element"](2,"i",164),o["\u0275\u0275elementStart"](3,"span",165),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"li",154),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).exportPDF()}),o["\u0275\u0275element"](7,"i",164),o["\u0275\u0275elementStart"](8,"span",165),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](5,2,"EXPORT_WORD")," (\u5185\u6d4b)"),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](10,4,"EXPORT_PDF")))}function Uo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",154),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).removeFunc()}),o["\u0275\u0275element"](1,"i",166),o["\u0275\u0275elementStart"](2,"span",165),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,1,"COMMON_BUTTON_DELETE")))}function Wo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"nz-modal",167),o["\u0275\u0275elementStart"](2,"div",168),o["\u0275\u0275elementStart"](3,"access-control",169),o["\u0275\u0275listener"]("closeCallback",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).closeCallbackFunc()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",600),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("articleDetails",i.articleDetails)}}function Ho(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"wiki-release-pass",170),o["\u0275\u0275listener"]("closeReleasePass",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).closeReleasePass()})("confirmReleasePass",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).confirmReleasePass(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("currentDomain",i.currentDomainInfo.id)("articleDetail",i.articleDetails)}}function Go(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"espace-share",171),o["\u0275\u0275listener"]("modelShowCloseChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).getModelShowCtrl(e)})("shareDetailChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).articleDetailsShare=e}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("currentDomain",i.currentDomainInfo.id)("sn",i.sn)("shareTipContent",i.shareTipContent)("titleDesc",i.titleDesc)("currentUserId",i.currentUserId)("shareDetail",i.articleDetailsShare)}}function qo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"initiate-countersign-model",172),o["\u0275\u0275listener"]("modelShowCloseChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).getModelShowCtrlCoutersign(e)})("shareDetailChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).articleDetailsShare=e}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("currentDomain",i.currentDomainInfo.id)("sn",i.sn)("currentUserId",i.currentUserId)("shareDetail",i.articleDetailsShare)("isCreateCountersign",i.isCreateCountersign)}}function $o(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"article-email-share",173),o["\u0275\u0275listener"]("modelShowCloseChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).emailModelShowCtrl(e)})("articleDetailChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).articleDetails=e}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("articleDetail",i.articleDetails)("domainId",i.domainId)}}function Ko(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",174),o["\u0275\u0275elementStart"](1,"folder-list",175),o["\u0275\u0275listener"]("hiddenShowFileDetail",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).handleShowFileDetail(e)})("getArticleDetails",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).navGetDetails(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("fileDetails",i.articleDetails)}}function Xo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",176),o["\u0275\u0275elementStart"](1,"app-excel-create",177,178),o["\u0275\u0275listener"]("eventEmitter",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).excelEventOutput(e)}),o["\u0275\u0275element"](3,"div",179),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("hidden",i.associatedWorkitemCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("container","luckysheet")("model",i.excelModel)("articleInfo",i.articleDetails)("sn",i.sn)("fullScreenCtrl",i.fullScreenCtrl)}}function Yo(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",212),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("(",o["\u0275\u0275pipeBind1"](2,1,"DELETED"),")"))}function Qo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",210),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).gotoWikiDetail()}),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,Yo,3,3,"span",211),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](-1==(null==i.articleDetails?null:i.articleDetails.entity_status)?"feture-be-deleted":""),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("#",null==i.articleDetails?null:i.articleDetails.entity_sn,""),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",-1==(null==i.articleDetails?null:i.articleDetails.entity_status))}}function Jo(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",213),o["\u0275\u0275elementStart"](1,"div",214),o["\u0275\u0275element"](2,"i",215),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",216),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](5);o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](null==n.articleDetails?null:n.articleDetails.classify.toUpperCase())}}function Zo(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"block-annotation",219),o["\u0275\u0275listener"]("imgLoaded",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](6).imgLoadedHanlder(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;o["\u0275\u0275nextContext"](3);var r=o["\u0275\u0275reference"](1),a=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("docContent",i.content)("docType",i.type)("configInfo",a.ViewConfigInfo)("scrollInEL",r)("fromVision",!0)("classify",null==a.articleDetails?null:a.articleDetails.classify)("openAnnotation",a.isShowFunction.annotation&&"rich-text"==i.type&&!a.isEventReport)("openDesensitization",a.isEventReport&&a.isAnonymize&&!a.isShowAnonymizePreview)("workitemInfo",a.articleDetails)("id",i.id)("domId","paragraph"+i.id)("fullScreenCtrl",a.fullScreenCtrl)("isNeedRemoveBg",a.isEventReport&&!a.isAnonymize||a.isShowAnonymizePreview)}}function er(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",217),o["\u0275\u0275template"](1,Zo,1,13,"block-annotation",218),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](5);o["\u0275\u0275classProp"]("none-annotation-bg",n.isEventReport&&!n.isAnonymize),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.descriptions)}}function tr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",225),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](6).resetAssociatedWorkitem()}),o["\u0275\u0275element"](1,"span",226),o["\u0275\u0275elementStart"](2,"span",227),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){o["\u0275\u0275nextContext"](4);var i=o["\u0275\u0275reference"](20);o["\u0275\u0275property"]("nzDropdownMenu",i),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,2,"SHARE"))}}function nr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",222),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](6).setVote()}),o["\u0275\u0275element"](1,"i",228),o["\u0275\u0275elementStart"](2,"span"),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"span",229),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](6);o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("icon-thumbup-active",i.voters),o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("icon-thumbup-active",i.voters),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,8,"LIKE")),o["\u0275\u0275advance"](2),o["\u0275\u0275classProp"]("icon-thumbup-active",i.voters),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](i.statisticsData.praise_amount)}}function ir(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",220),o["\u0275\u0275template"](1,tr,5,4,"span",221),o["\u0275\u0275elementStart"](2,"span",222),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).setWikiFavorite()}),o["\u0275\u0275element"](3,"span",223),o["\u0275\u0275elementStart"](4,"span"),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,nr,7,10,"span",224),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275classMap"](i.wideModeSwitch?"":"artical-wide-mode"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowFunction.share),o["\u0275\u0275advance"](2),o["\u0275\u0275classMap"](i.isFavorite?"icon-xing1":"icon-star-outline"),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](6,7,i.isFavorite?"UNFAVORITE":"ADD_TO_FAVORITES")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.isShowFunction.vote)}}function or(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",230),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).openCommentPanel(!0)}),o["\u0275\u0275element"](1,"i",231),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("hidden",i.fullScreenCtrl||i.isEventReport&&!i.isAnonymize)}}function rr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"revision-list",232),o["\u0275\u0275listener"]("reversionJump",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).reversionJumpHandler(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("sn",i.articleDetails.sn)}}function ar(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",233),o["\u0275\u0275elementStart"](1,"knowledge-file",234),o["\u0275\u0275listener"]("handleShowFileDetail",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).handleShowFileDetail(e)})("getArticleDetails",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).navGetDetails(e)})("folderEditSuccess",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).folderEditSuccess(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("fileDetails",i.articleDetails)("category",i.category)}}function cr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",235),o["\u0275\u0275element"](1,"div",236),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("hidden",n.commentCtrl||!n.fillingAreaCtrl||n.associatedWorkitemCtrl||"document"!=n.category&&"directory"!=n.category)("@enterAnimation",void 0),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](n.fullScreenCtrl?"article-outline-filling-full":"")}}function lr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"app-article-create",237),o["\u0275\u0275listener"]("reopen",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).onReopen()}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("collaboration",i.collaboration)("model",i.model)("articleTitle",i.editArticleTile)("articleUiSource",i.descriptionType)("articleDescription",i.editDescription)("categoryId",i.selectCategory)("currentDomain",i.currentDomainInfo.id)("sn",i.sn)("id",null==i.articleDetails?null:i.articleDetails.id)("creatorId",i.creatorId)("dictionaryId",i.articleDetails.id)("fullScreenCtrl",i.fullScreenCtrl)("articleDetails",i.articleDetails)("parentSn",i.sn)("fullScreenZoomSize",i.fullScreenZoomSize)("visibilityEditModel",i.visibilityEditModel)("createFrom",i.createFrom)("showVisibilityEdit",i.articleDetails.is_chg_visibility&&i.isShowFunction.visibilityConfig&&(!i.isShareWiki||i.isShareWiki&&i.isCoe))}}function sr(e,t){if(1&e&&o["\u0275\u0275element"](0,"workitem-article-edit",238),2&e){var n=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("model","update-article")("currentDomain",n.currentDomainInfo.id)("sn",n.sn)("category",n.currentCategory)("id",null==n.articleDetails?null:n.articleDetails.id)("categoryId",n.selectCategory)("currentDomainInfo",n.currentDomainInfo)("creatorId",n.creatorId)("dictionaryId",n.articleDetails.id)("hidden",n.workitemDetailShow)("parentSn",n.sn)("fullScreenCtrl",n.fullScreenCtrl)("articleDetails",n.articleDetails)("workitemList",n.workitemList)("fullScreenZoomSize",n.fullScreenZoomSize)("wikiEditFunction",n.isShowFunction)}}function dr(e,t){if(1&e&&o["\u0275\u0275element"](0,"workitem-article-template",239),2&e){var n=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("model","create-design-template")("currentDomain",n.currentDomainInfo.id)("currentDomainInfo",n.currentDomainInfo)("articleDetails",n.articleDetails)("fullScreenCtrl",n.fullScreenCtrl)("fullScreenZoomSize",n.fullScreenZoomSize)}}var pr=function(e,t){return{top:e,left:t}};function ur(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",240),o["\u0275\u0275elementStart"](1,"annotation-item",241),o["\u0275\u0275listener"]("clickOutside",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).annotationCommentInfo=null}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction2"](3,pr,i.positionInfo.top-24+"px",i.positionInfo.left+"px")),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("item",i.annotationCommentInfo)("creatorId",i.creatorId)}}var mr=function(e){return{zoom:e}};function hr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",242),o["\u0275\u0275elementStart"](1,"doodle-tool",243),o["\u0275\u0275listener"]("eventEmit",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](5).eventEmitHandler(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](2,mr,1/i.fullScreenZoomSize)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("isShowOutline",i.isShowOutlineFullScreen)}}var gr=function(e){return{opacity:e}};function fr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275element"](1,"div",187),o["\u0275\u0275elementStart"](2,"div",188),o["\u0275\u0275elementStart"](3,"div",189),o["\u0275\u0275elementStart"](4,"div"),o["\u0275\u0275elementStart"](5,"div",190),o["\u0275\u0275elementStart"](6,"countersign",191),o["\u0275\u0275listener"]("coutersignInfoChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](4).coutersignInfo=e})("shareDetailChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](4).articleDetailsShare=e})("updateJudgeList",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](4).updateJudgeListHandler()})("refreshInfo",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](4).refreshCoutersignInfo()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,Qo,4,4,"div",192),o["\u0275\u0275elementStart"](8,"div",193),o["\u0275\u0275elementStart"](9,"span"),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"article-edit-info",75),o["\u0275\u0275listener"]("showHistory",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](4).showRevisionAndHistory("HISTORYRECORD")}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",194),o["\u0275\u0275template"](13,Jo,5,1,"div",195),o["\u0275\u0275element"](14,"app-wiki-tag-manager",196,197),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](16,er,2,3,"div",198),o["\u0275\u0275template"](17,ir,8,9,"div",199),o["\u0275\u0275template"](18,or,2,1,"div",200),o["\u0275\u0275template"](19,rr,1,1,"revision-list",201),o["\u0275\u0275template"](20,ar,2,2,"div",202),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](21,cr,2,4,"div",203),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](22,"div",204),o["\u0275\u0275template"](23,lr,1,18,"app-article-create",205),o["\u0275\u0275template"](24,sr,1,16,"workitem-article-edit",206),o["\u0275\u0275template"](25,dr,1,6,"workitem-article-template",207),o["\u0275\u0275template"](26,ur,2,6,"div",208),o["\u0275\u0275template"](27,hr,2,4,"div",209),o["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](4);o["\u0275\u0275advance"](2),o["\u0275\u0275classProp"]("article-padding-style",!i.fillingAreaCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](i.wideModeSwitch||i.fullScreenCtrl?"wide-artical":"artical article-mr-style"),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](31,gr,i.viewModeShow?1:0)),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](i.wideModeSwitch?"":"artical-wide-mode"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("sn",i.sn)("coutersignInfo",i.coutersignInfo)("shareDetail",i.articleDetailsShare)("isSreWiki",i.isSreWiki),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(o["\u0275\u0275pureFunction0"](33,_o).includes(null==i.currentCategory?null:i.currentCategory.classify)||"CLOUDDEVOPS_COE"===(null==i.articleDetails?null:i.articleDetails.source_system))&&!i.wikiShowFunction&&(null==i.articleDetails?null:i.articleDetails.entity_sn)),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](i.fullScreenCtrl?"article-title-full-screen":""),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.articleTile),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("articleDetail",i.articleDetails)("isShowHistory",i.isShowFunction.history),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.isShowTag),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("wikiId",i.sn)("isCoe","coe"==(null==i.articleDetails?null:i.articleDetails.classify)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!i.editContent),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowFunction.bottomActions),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.is_deleted&&!i.commentCtrl&&i.isShowFunction.comment&&!i.isShowAnonymizePreview),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isDomLoaded),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(null==i.articleDetails||null==i.articleDetails.children?null:i.articleDetails.children.length)&&i.isDomLoaded),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.isEventReport),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.editContent&&!i.isMoreParagraphsReport&&"table"!==i.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.editContent&&i.isMoreParagraphsReport&&"table"!==i.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.saveTemplateBool&&"system"===(null==i.currentCategory?null:i.currentCategory.classify)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.annotationCommentInfo&&i.positionInfo&&i.fullScreenCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.fullScreenCtrl)}}function vr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",244),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"i",245),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](4).closeFullScreenOutline()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,1,"OUTLINE")))}function br(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",246),o["\u0275\u0275element"](1,"div",247),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275element"](3,"article-outline",248),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"div",249),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](4);o["\u0275\u0275classProp"]("reserve-span-show",!n.fillingAreaCtrl&&!n.fullScreenCtrl)("article-outline-style",!n.fillingAreaCtrl&&!n.fullScreenCtrl),o["\u0275\u0275property"]("hidden",n.isShowOutlineCtrl),o["\u0275\u0275advance"](2),o["\u0275\u0275classProp"]("outline-padding-wrapper",n.fullScreenCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("origin",n.origin)("needBorder",!n.fullScreenCtrl)("desLevel","system"===(null==n.currentCategory?null:n.currentCategory.classify)?1:0)}}var Cr=function(e){return{top:e}};function yr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",250),o["\u0275\u0275elementStart"](1,"span",251),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](4).showFillingArea()}),o["\u0275\u0275element"](2,"i",252),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("hidden",i.editContent&&"markdown"==i.descriptionType||i.commentCtrl||i.isAnonymize||i.isShowRevisionAndHistory||i.associatedWorkitemCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("nzTooltipTitle",i.reserveTitle),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](6,Cr,i.fillingAreaCtrl?"8px":"20px"))("nzTooltipPlacement","top"),o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](i.fillingAreaCtrl?"icon-pin-down":"icon-pin-down-left")}}var xr=function(e){return{"padding-left":e}};function wr(e,t){if(1&e&&o["\u0275\u0275element"](0,"div",255),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"](5);o["\u0275\u0275classProp"]("active-li-styl",n.titleId==i.scrollTitleId),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](3,xr,3*n.indentationLevel+"px"))}}function _r(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",253),o["\u0275\u0275template"](1,wr,1,5,"div",254),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](4);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.articleOutlineArr)}}function Or(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",180,181),o["\u0275\u0275listener"]("dblclick",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).enterEditInShow()})("scroll",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).articleScrollFunc()})("mouseover",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).isParentScroll=!0})("mouseout",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).isParentScroll=!1})("selectstart",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).judgeCoeNotCopy()}),o["\u0275\u0275template"](2,fr,28,34,"ng-container",15),o["\u0275\u0275elementStart"](3,"div"),o["\u0275\u0275template"](4,vr,5,3,"div",182),o["\u0275\u0275elementStart"](5,"div",183),o["\u0275\u0275template"](6,br,5,10,"div",184),o["\u0275\u0275template"](7,yr,3,8,"div",185),o["\u0275\u0275template"](8,_r,2,1,"div",186),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275classMap"](i.fullScreenCtrl?"full-screen-styl":""),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](15,mr,i.fullScreenZoomSize))("hidden",!i.detailRequestBack),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.detailRequestBack),o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("outline-shadow",i.fullScreenCtrl&&i.isShowOutlineFullScreen),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.fullScreenCtrl&&i.isShowOutlineFullScreen),o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("in-fixed-modal",i.fullScreenCtrl)("outline-show-wrapper-style",i.fillingAreaCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.is_deleted&&!i.isEventReport),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.is_deleted&&!i.isEventReport&&!i.fullScreenCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.fillingAreaCtrl&&!i.fullScreenCtrl)}}function Sr(e,t){}var Er=function(){return["document","directory","table"]};function Mr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",34),o["\u0275\u0275elementStart"](1,"div",35),o["\u0275\u0275template"](2,Ui,2,5,"navigation-list",36),o["\u0275\u0275elementStart"](3,"div",37),o["\u0275\u0275template"](4,Wi,6,3,"div",38),o["\u0275\u0275template"](5,Hi,6,3,"div",38),o["\u0275\u0275template"](6,Po,3,3,"div",39),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"nz-dropdown-menu",null,40),o["\u0275\u0275elementStart"](9,"ul",41),o["\u0275\u0275elementStart"](10,"li",42),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).createArticle()}),o["\u0275\u0275element"](11,"i",43),o["\u0275\u0275element"](12,"span",44),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"li",42),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).importWord()}),o["\u0275\u0275element"](15,"i",45),o["\u0275\u0275element"](16,"span",44),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](18,Io,1,4,"import-word-drag",46),o["\u0275\u0275elementStart"](19,"nz-dropdown-menu",null,47),o["\u0275\u0275elementStart"](21,"ul",41),o["\u0275\u0275elementStart"](22,"li",48),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).shareByEspace()}),o["\u0275\u0275elementStart"](23,"div",49),o["\u0275\u0275elementStart"](24,"div",50),o["\u0275\u0275element"](25,"i",51),o["\u0275\u0275elementStart"](26,"span",52),o["\u0275\u0275text"](27,"Espace"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"div",53),o["\u0275\u0275element"](29,"span",54),o["\u0275\u0275pipe"](30,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](31,ko,9,3,"li",55),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"nz-dropdown-menu",null,56),o["\u0275\u0275elementStart"](34,"ul",57),o["\u0275\u0275template"](35,To,5,8,"div",58),o["\u0275\u0275template"](36,Do,5,4,"div",59),o["\u0275\u0275template"](37,Ao,2,3,"div",60),o["\u0275\u0275template"](38,zo,4,3,"li",61),o["\u0275\u0275template"](39,Ro,4,3,"li",61),o["\u0275\u0275template"](40,Lo,4,3,"li",61),o["\u0275\u0275template"](41,No,5,8,"li",62),o["\u0275\u0275template"](42,jo,5,8,"li",63),o["\u0275\u0275template"](43,Vo,5,8,"li",63),o["\u0275\u0275template"](44,Fo,5,8,"li",64),o["\u0275\u0275template"](45,Bo,11,6,"ng-container",15),o["\u0275\u0275template"](46,Uo,5,3,"li",61),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](47,Wo,4,5,"ng-container",15),o["\u0275\u0275template"](48,Ho,1,2,"wiki-release-pass",65),o["\u0275\u0275template"](49,Go,1,6,"espace-share",66),o["\u0275\u0275template"](50,qo,1,5,"initiate-countersign-model",67),o["\u0275\u0275template"](51,$o,1,2,"article-email-share",68),o["\u0275\u0275template"](52,Ko,2,1,"div",69),o["\u0275\u0275template"](53,Xo,4,6,"div",70),o["\u0275\u0275template"](54,Or,9,17,"div",71),o["\u0275\u0275template"](55,Sr,0,0,"ng-template",null,72,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.isShowFunction.wikiPath&&!i.isEventReport&&i.navigatioList.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.isEventReport&&i.isAnonymize&&!i.isShowAnonymizePreview),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isEventReport&&i.isAnonymize&&i.isShowAnonymizePreview&&!i.isShowAnonymize),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pureFunction0"](39,Er).includes(i.category)),o["\u0275\u0275advance"](4),o["\u0275\u0275classMap"](i.authAccess&&i.authAccess.userEditPermission?"dropdown-create-li-styl":"not-allowed-styl"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](13,33,"NEW_ARTICLE")),o["\u0275\u0275advance"](2),o["\u0275\u0275classMap"](i.authAccess&&i.authAccess.userEditPermission?"dropdown-create-li-styl":"not-allowed-styl"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](17,35,"IMPORT_WORD")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.importWordShow),o["\u0275\u0275advance"](11),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](30,37,"ESPACE_SUGGEST")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!i.isStandaloneWiki&&!i.isEventReport),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf","table"!==i.category&&i.isShowFunction.widthModelChange&&i.needGuideWideMode),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","table"!==i.category&&i.isShowFunction.widthModelChange&&!i.needGuideWideMode),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","table"!==i.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowFunction.revision),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowFunction.history),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.articleDetails.is_chg_visibility&&i.isShowFunction.visibilityConfig&&!i.isShareWiki),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowFunction.saveAsTemplate&&!i.isShareWiki&&"table"!==i.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowFunction.countersign&&!i.isShareWiki&&"table"!==i.category&&!i.isSreWiki),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowFunction.countersign&&!i.isShareWiki&&"table"!==i.category&&i.isSreWiki),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowFunction.baseline&&!i.isShareWiki),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowFunction.showExport&&i.canExport&&"table"!==i.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.articleDetails.is_deleted&&!i.isEventReport&&i.isShowFunction.remove),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.accessControlShow),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.releasePassModalShow),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.espaceShareCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.initiateCountersignCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.emailShareCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowFileDetail),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isTable&&("check-excel"===i.excelModel||"update-excel"===i.excelModel&&i.editContent&&!i.isMoreParagraphsReport)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!(i.associatedWorkitemCtrl||"document"!=i.category&&"directory"!=i.category||i.isWikiWorkitemDetail))}}function Pr(e,t){if(1&e&&o["\u0275\u0275element"](0,"empty-redirect-page",256),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275classProp"]("wiki-content-wrapper",n.isShowRedirectPage),o["\u0275\u0275property"]("jumpNewUrl",n.jumpNewUrl)("articelInfo",n.articelInfo)("catagoriedArr",n.catagoriedArr)}}var Ir=function(e){return{width:e}};function kr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",257),o["\u0275\u0275elementStart"](1,"article-wiki-comment",258),o["\u0275\u0275listener"]("close",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).closeCommentPanel(e)})("refreshNum",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).getStatisticsInfo()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](8,Ir,i.inputWidth+"px")),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("isCoe",i.isCoe)("creatorId",i.creatorId)("commentParam",i.commentParam)("articleId",i.articleDetails.id)("currentDomain",i.currentDomainInfo.id)("sn",i.sn)("isEventReport",i.isEventReport)}}function Tr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"revision-and-history",259),o["\u0275\u0275listener"]("closeHistoryModal",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).closeHistoryModal(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("isShowRevisionAndHistory",i.isShowRevisionAndHistory)("showHistoryType",i.showHistoryType)("articleDetails",i.articleDetails)("currentCategory",i.currentCategory)("entity_sn",i.sn)("activeRervsionItem",i.activeRervsionItem)("isTable",i.isTable)}}var Dr=function(e,t,n){return{articleDetails:e,workitemInfo:t,currentUsername:n}};function Ar(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"save-as-template",260),o["\u0275\u0275listener"]("closeTemplateModal",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).saveTemplateBool=!1}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("editorParams",o["\u0275\u0275pureFunction3"](1,Dr,i.articleDetails,i.workitemInfo,i.currentUsername))}}function zr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",261),o["\u0275\u0275elementStart"](1,"reversion-history-model",262),o["\u0275\u0275listener"]("saveRevision",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).saveArticleAndRevision(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("currentDomain",i.currentDomainInfo.id)("baselineCtrl",!0)}}var Rr=function(e){return{id:e,classify:"system"}};function Lr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",263),o["\u0275\u0275elementStart"](1,"select-category-directory",264),o["\u0275\u0275listener"]("modelShowCloseChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).getCategoryModelShowCtrl(e)})("modelShowVariableChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).getCategoryConfirmFunc(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("currentDomain",i.currentDomainInfo.id)("currentCategory",i.selectCategory?o["\u0275\u0275pureFunction1"](4,Rr,i.selectCategory):null)("disabledNode","")("tipInfo",i.tipInfo)}}var Nr=function(){return{"max-width":"100vw"}};function jr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",22),o["\u0275\u0275template"](1,Fi,4,1,"div",23),o["\u0275\u0275template"](2,Mr,57,40,"div",24),o["\u0275\u0275template"](3,Pr,1,5,"empty-redirect-page",25),o["\u0275\u0275template"](4,kr,2,10,"div",26),o["\u0275\u0275template"](5,Tr,2,7,"div",15),o["\u0275\u0275template"](6,Ar,2,5,"div",15),o["\u0275\u0275template"](7,zr,2,2,"div",27),o["\u0275\u0275elementStart"](8,"nz-modal",28),o["\u0275\u0275listener"]("nzVisibleChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().showReleaseCategoryModel=e}),o["\u0275\u0275template"](9,Lr,2,6,"div",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](10,"router-outlet"),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngStyle",i.isShareWiki?o["\u0275\u0275pureFunction0"](13,Nr):null),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.detailRequestBack),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.sn&&!i.isShowRedirectPage),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowRedirectPage),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.sn&&i.articleDetails&&("document"==i.category||"directory"==i.category)&&i.commentCtrl&&!i.editContent&&i.isShowFunction.comment&&!i.isShowAnonymizePreview),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowRevisionAndHistory),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.saveTemplateBool&&"system"!==(null==i.currentCategory?null:i.currentCategory.classify)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isShowRevisionDetailModal),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nzVisible",i.showReleaseCategoryModel)("nzClosable",!1)("nzFooter",null)("nzWidth",492),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.showReleaseCategoryModel)}}function Vr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",265),o["\u0275\u0275element"](1,"i",266),o["\u0275\u0275elementStart"](2,"div",267),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate3"](" ",o["\u0275\u0275pipeBind1"](4,3,"NO_PERMISSION_TIP"),"","("+n.noPermisssion.name+" "+n.noPermisssion.username+")","",o["\u0275\u0275pipeBind1"](5,5,"OPEN_PERMISSIONS")," ")}}var Fr=function(e){return{left:e}};function Br(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",268),o["\u0275\u0275elementStart"](1,"div",269),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",270),o["\u0275\u0275elementStart"](6,"button",271),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]();return e.wikiSelfLocked?e.editArticle(!0):e.requestUnlock()}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](9,Fr,i.fullScreenCtrl&&!i.isTable?"-444px":"")),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.wikiSelfLocked?o["\u0275\u0275pipeBind1"](3,3,"WIKI_OTHER_TAB_EDITING"):(null==i.wikiLockedBy?null:i.wikiLockedBy.name)+" "+(null==i.wikiLockedBy?null:i.wikiLockedBy.username)+" "+o["\u0275\u0275pipeBind1"](4,5,"EDITTING")+"..."),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](8,7,i.wikiSelfLocked?"WIKI_FORCE_EDIT":"WIKI_REQUEST_UNLOCK"))}}function Ur(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",274),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](4,Fr,n.fullScreenCtrl?"-444px":"")),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,2,"COLLABORATION_ENTERING"))}}function Wr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",268),o["\u0275\u0275elementStart"](1,"div",269),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",270),o["\u0275\u0275elementStart"](5,"button",271),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).editArticle(!0)}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](7,Fr,i.fullScreenCtrl?"-444px":"")),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,3,"WIKI_OTHER_TAB_EDITING")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](7,5,"WIKI_FORCE_EDIT"))}}function Hr(e,t){if(1&e&&(o["\u0275\u0275template"](0,Ur,4,6,"div",272),o["\u0275\u0275template"](1,Wr,8,9,"div",273)),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngIf",null==n.collaboration?null:n.collaboration.waitCollaboration),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==n.collaboration?null:n.collaboration.inCollabTips)}}function Gr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",275),o["\u0275\u0275elementStart"](1,"div",276),o["\u0275\u0275element"](2,"i",277),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",278),o["\u0275\u0275elementStart"](4,"div",269),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",279),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",280),o["\u0275\u0275elementStart"](11,"button",281),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onUpdateWikiArticle()}),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](6,3,"WIKI_UPDATE_TIPS")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,5,"WIKI_IS_RELOAD")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](13,7,"WIKI_RELOAD")))}function qr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",(null==n.user?null:n.user.name)+" "+(null==n.user?null:n.user.account),",")}}function $r(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,qr,2,1,"span",15),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n<=10)}}function Kr(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1," \u5f53\u524d\u6b64\u6587\u7ae0\u53ea\u5728\u5f53\u524d\u7a7a\u95f4\u53ef\u89c1\uff0c\u6b64\u64cd\u4f5c\u5c06\u53d1\u8d77\u7533\u8bf7\uff0c\u7ecf\u8fc7 "),o["\u0275\u0275template"](2,$r,2,1,"ng-container",282),o["\u0275\u0275text"](3," \u7684\u6279\u51c6\u4e4b\u540e\uff0c\u6b64\u6587\u7ae0\u6b63\u5f0f\u53d1\u5e03\u81f3\u5171\u4eab\u76ee\u5f55\uff0c\u5c4a\u65f6\u6240\u6709\u88ab\u5171\u4eab\u7a7a\u95f4\u4e2d\u5747\u53ef\u4ee5\u770b\u89c1\u6b64\u6587\u7ae0\u3002 "),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",n.releaseExamineMenbers)}}function Xr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",null==n.user?null:n.user.name_full,",")}}function Yr(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Xr,2,1,"span",15),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n<=10)}}function Qr(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1," Currently, this article is only visible in the current space. This operation will initiate an application. After being approved by "),o["\u0275\u0275template"](2,Yr,2,1,"ng-container",282),o["\u0275\u0275text"](3," this article will be officially released to the shared directory. At that time, this article will be visible in all shared spaces. "),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",n.releaseExamineMenbers)}}function Jr(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",283),o["\u0275\u0275elementStart"](1,"div",284),o["\u0275\u0275elementStart"](2,"div",285),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"button",286),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().popoverSubmit("lookHelp")}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"button",287),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().popoverSubmit("complete")}),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,3,"WIDE_MODE_POPOVER_CONTENT")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](7,5,"GROUP_LOOK_HELP")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](10,7,"TIP_BUTTON_KNOW")))}var Zr=n("k7+O"),ea=function(){function e(e,t,n,i,a,c,l,s,d,p,u,m,h,g,f,v,b,C){var y=this;this.compiler=e,this.injector=t,this.componentFactoryResolver=n,this.router=i,this.activeRoute=a,this.knowledgeService=c,this.categoryManagerService=l,this.translate=s,this.modal=d,this.emitService=p,this.notification=u,this.message=m,this.cdr=h,this.waterMarkService=g,this.authService=f,this.wikiLockService=v,this.ngZone=b,this.spaceMemberService=C,this.eventOutput=new o.EventEmitter,this.isShowFunction={editFrom:"",remove:!0,comment:!0,edit:!0,link:!0,vote:!0,viewCount:!0,share:!0,toogleFullScreen:!0,revision:!0,history:!0,visibilityConfig:!0,saveAsTemplate:!0,baseline:!0,countersign:!0,wikiPath:!0,annotation:!0,bottomActions:!0,createArticle:!0,showExport:!0,widthModelChange:!0},this.articleAuth={name:"",account:""},this.wideModeSwitch=!0,this.editContent=!1,this.isShowTag=!1,this.editFile=!1,this.isDesignDoc=!1,this.descriptions=[],this.articleDetails={},this.commentCtrl=!1,this.haveSave=!1,this.navigatioList=[],this.espaceShareCtrl=!1,this.initiateCountersignCtrl=!1,this.emailShareCtrl=!1,this.is_deleted=!1,this.is_baseline=!1,this.statisticsData={},this.voters=!1,this.favorites=!1,this.isShowRevisionAndHistory=!1,this.isShowFileDetail=!1,this.isShowRevisionDetailModal=!1,this.saveVersionDisabled=!1,this.searchWorkitemList=[],this.relatedWorkitem=[],this.isLocalEditing=!1,this.refreshContentEventSubject=new r.a,this.isShowSaveAndReviosionBtn=!1,this.fillingAreaCtrl=!0,this.titleLevel=4,this.articleOutlineArr=[],this.hiddenTipCtrl=!1,this.associatedWorkitemCtrl=!1,this.linkAlreadyShowCtrl=!1,this.workitemInfo={},this.accessControlShow=!1,this.cdkDomsArr=[],this.fullScreenCtrl=!1,this.editContentScroll=!0,this.viewModeShow=!0,this.editorStyle={opacity:1},this.marginPaddingVal=50,this.editMarPaddHeight=20,this.editScrollMarPadd=10,this.scrollMarginPaddingVal=30,this.articlePaddingVal=80,this.importWordShow=!1,this.userEditPermission=!0,this.detailRequestBack=!1,this.saveArticleChange=!1,this.saveTemplateBool=!1,this.authAccess={userEditPermission:!0,templateAccess:!1},this.isCoe=!1,this.isCreateCountersign=!1,this.coutersignOperate=!1,this.currentDomainInfo={id:null},this.model="update-article",this.excelModel="check-excel",this.origin="article-view",this.annotationArrStatus=!1,this.workitemDetailShow=!1,this.workitemList=[],this.isFavorite=!1,this.isShowOutlineFullScreen=!1,this.isFontBigger=!1,this.catagoriedArr=[],this.currentUrlRef=null,this.jumpNewUrl=null,this.articelInfo=null,this.ViewConfigInfo={fullTable:!0},this.isShowRedirectPage=!1,this.canExport=!1,this.refuseContent="",this.showReleaseCategoryModel=!1,this.tipInfo={title:"SELECT_ARCHIVE_PATH",listPlaceHolder:"SEARCH_CATEGORY_DIRECTORY",listDirectoryTip:"MOVE",detailTitle:"SELECT_ARCHIVE_PATH",detailPlaceHolder:"SEARCH",detailBottomTip:"MOVE_TO",detailConfirmBtnTip:"COMMON_BUTTON_CONFIRM"},this.releaseTarget={domain:33354,kanban:1887,rejects:-1,release:0,passing:1},this.releaseExamineMenbers=[],this.articlePublicStatus=4,this.isReleasePublish=!1,this.isReleaseExamine=!1,this.releasePassModalShow=!1,this.isCanCoeRelease=!1,this.curLanguage=this.translate.currentLang||"zh",this.oldUrl="",this.nowUrl="",this.isTable=!1,this.countAPINumber=0,this.countCategoryAPINum=0,this.isWikiWorkitemDetail=!1,this.isImgLazyLoaded=!1,this.popoverGuideVisible={isHotDotPopoVisible:!1},this.needGuideWideMode=!1,this.sreAccess=!1,this.isMoreParagraphsReport=!1,this.onDestory$=new r.a,this.onWikiSnChange$=new r.a,this.onArticleRender$=new r.a,this.listenBackClick=function(e){y.resizeArticleBoxSize(),(e.persisted||void 0!==window.performance&&2===window.performance.navigation.type)&&window.location.reload()},this.wikiLocked=!1,this.wikiSelfLocked=!1,this.imgLoadedHanlder=Object(P.a)(function(e){y.isImgLazyLoaded=!0,y.isDomLoaded&&y.getArticleOutline(y.uiSourceDomId,y.articleTile)},2e3)}return Object.defineProperty(e.prototype,"isShowBaseline",{get:function(){var e,t,n;return(!this.coutersignInfo||-1===(null===(e=this.coutersignInfo)||void 0===e?void 0:e.status))&&this.annotationArrStatus&&this.currentUserId===(null===(n=null===(t=this.articleDetails)||void 0===t?void 0:t.created_by)||void 0===n?void 0:n.id)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coeOperationStatus",{get:function(){var e,t,n;return"coe"===(null===(e=this.articleDetails)||void 0===e?void 0:e.classify)&&"document"===(null===(t=this.articleDetails)||void 0===t?void 0:t.category)&&"coe_operation"===(null===(n=this.articleDetails)||void 0===n?void 0:n.sub_classify)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEventReport",{get:function(){var e;return location.pathname.includes("eventReport")||"CIM"===(null===(e=this.articleDetails)||void 0===e?void 0:e.source_system)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isShareWiki",{get:function(){return location.pathname.startsWith("/wiki")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isShowOutlineCtrl",{get:function(){return!this.fillingAreaCtrl&&this.fullScreenCtrl||this.editContent&&"markdown"==this.descriptionType||this.commentCtrl||this.isShowRevisionAndHistory||this.associatedWorkitemCtrl||"document"!=this.category&&"directory"!=this.category},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reserveTitle",{get:function(){return this.translate.instant(this.fillingAreaCtrl?"COLLAPSE_OUTLINE":"PIN_OUTLINE")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullScreenZoomSize",{get:function(){return this.fullScreenCtrl?this.isFontBigger?1.6:1.4:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSreWiki",{get:function(){var e;return["warning","event","contingency"].includes(null===(e=this.articleDetails)||void 0===e?void 0:e.classify)&&this.isDomLoaded},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){var e=this;this.onDestory$.next(),this.onDestory$.complete(),this.removeWikiUpdateTips(),this.resetWikiLock(),this.spaceMemberService.clearArticleNavigationCache(),document.title="CloudDevOps",window.removeEventListener("pageshow",this.listenBackClick),this.waterMarkService.clearMark(),window.addEventListener("resize",function(){e.ngZone.run(function(){return e.resizeArticleBoxSize()})})},e.prototype.getDomainInfo=function(e){var t=this;if(this.isEventReport)this.currentDomainInfo={id:e};else{if(this.domainId)return void(this.currentDomainInfo={id:this.domainId});window.communicationService.currentDomain$.pipe(Object(d.a)(this.onDestory$)).subscribe(function(e){e&&(t.currentDomainInfo=e)})}},e.prototype.ngOnInit=function(){var e,t=this;(null===(e=this.wikiShowFunction)||void 0===e?void 0:e.isWorkitemReview)&&(this.shareTipContent=this.translate.instant("REVIEW_MY_DESIGN"),this.titleDesc=this.translate.instant("INVITATION_TO_REVIEW")),window.wikiPageLoaded?window.wikiPageLoaded.subscribe(function(e){t.isDomLoaded=e,t.isDomLoaded&&setTimeout(function(){var e;!t.is_deleted&&(null===(e=t.articleDetails)||void 0===e?void 0:e.id)&&(t.getAnnotation(),t.getCoutersignInfo()),t.getArticleOutline(t.uiSourceDomId,t.articleTile)})}):this.isDomLoaded=!0,window.addEventListener("pageshow",this.listenBackClick),window.addEventListener("resize",function(){t.ngZone.run(function(){return t.resizeArticleBoxSize()})}),this.activeRoute.queryParams.subscribe(function(e){t.isAnonymize=e.isAnonymize,t.isShowAnonymize=e.isShowAnonymize});var n=this.activeRoute.snapshot.queryParamMap.get("title");n&&this.scrollToTitle(n),this.isStandaloneWiki=M.a.isStandaloneWiki,this.currentLang=this.translate.store.currentLang,this.wikiShowFunction&&Object.assign(this.isShowFunction,this.wikiShowFunction);var i=!!this.sn;this.activeRoute.paramMap.pipe(Object(d.a)(this.onDestory$)).subscribe(function(e){t.oldUrl=t.nowUrl,t.nowUrl=location.href,t.isShowFileDetail=!1;var n=e.get("sn"),o=e.get("domain_id");t.currentDomainId=Number(o),t.sn&&t.sn!==n&&(t.onWikiSnChange$.next(),t.resetWikiLock()),i?t.selectCategory=Number(t.selectCategory):(t.selectCategory=Number(e.get("categoryId")),t.sn=e.get("sn")),window.communicationService.currentUser$.pipe(Object(d.a)(t.onDestory$)).subscribe(function(e){e&&(t.currentUserId=e.user_id,t.currentUsername=e.user_name,t.operateAuth=e,t.isShowAnonymize&&t.showAnonymizePreview())}),t.getDomainInfo(o),t.isEventReport?t.getEventReportDetails(n):(t.initCurrentCategory(),t.getDetails(t.sn,"UI"),t.isStandaloneWiki&&t.showFavorites(),t.queryLinkNumbers(t.sn),t.containerDom=document.querySelector("#associated-workitem-body"),t.associatedWorkitemCtrl&&(t.containerDom&&t.containerDom.childNodes.length>0&&(t.containerDom.innerHTML="",t.createCustomElement=void 0),t.associatedWorkitemCtrl=!1),t.commentCtrl=!1)}),localStorage.removeItem("outlineActiveTitle"),this.emitService.eventEmit.pipe(Object(d.a)(this.onDestory$)).subscribe(function(e){t.listeningEmitEvent(e)}),this.urlParamsObj=this.getUrlParams(),this.urlParamsObj&&(this.urlParamsObj.comment||this.urlParamsObj.shared_by)&&(this.commentParam=this.urlParamsObj.comment||this.urlParamsObj.shared_by,this.commentParam.indexOf("_")>-1&&(this.commentCtrl=!0)),(this.isEventReport||this.isShareWiki)&&System.import("/shared-ui/knowledge-ui.ce.js"),this.listenNodeRename();var o=localStorage.getItem("wikiWideModeSwitch");o&&(this.wideModeSwitch=JSON.parse(o));var r=localStorage.getItem("readWideModeGuide");r?this.needGuideWideMode="true"===r:(Object(k.c)("readWideModeGuide",JSON.stringify(!0)),this.needGuideWideMode=!0)},e.prototype.resizeArticleBoxSize=function(){var e=document.body.clientWidth;window.screen.availWidth!==e&&(this.fillingAreaCtrl=e>1226),this.emitService.emit({type:e<989?"wiki:catalog-collpase":"wiki:catalog-open"})},Object.defineProperty(e.prototype,"collaborationMode",{get:function(){var e;return!this.isTable&&(!["system","PRD"].includes(null===(e=this.currentCategory)||void 0===e?void 0:e.classify)||!this.isDesignDoc)&&Object(_.b)()},enumerable:!1,configurable:!0}),e.prototype.listenNodeRename=function(){var e=this,t=Object(x.a)("wikiNodeTitleChange",function(t){var n=t.sn,i=t.title;if(n===e.sn){e.articleTile=i;var o=e.navigatioList.find(function(e){return e.sn===n});o&&(o.title=i)}});this.onDestory$.subscribe(function(){return t.unListen()})},e.prototype.forceOpen=function(){this.wikiLocked=!1,this.editArticle()},e.prototype.requestUnlock=function(){this.message.success(this.translate.instant("WIKI_UNLOCK_REQUEST_SEND")),this.wikiLockService.reqestUnlock(this.sn)},e.prototype.onReopen=function(){return Object(i.b)(this,void 0,void 0,function(){var e=this;return Object(i.e)(this,function(t){return this.editContent=!1,Object(f.p)(function(){e.editArticle(!0)}),[2]})})},e.prototype.queryWikiLock=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t;return Object(i.e)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.wikiLockService.queryLock([this.sn]).toPromise()];case 1:return(e=n.sent()).data&&0!==e.data.length?(this.setWikiLock(e.data[0].operator),[3,3]):[2];case 2:return t=n.sent(),Object(T.b)(t),[3,3];case 3:return[2]}})})},e.prototype.setWikiLock=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.e)(this,function(n){switch(n.label){case 0:return[4,f.d];case 1:return t=n.sent(),this.wikiLocked=!0,this.wikiLockedBy=e,this.wikiSelfLocked=e.account===t.huawei_id,this.cdr.detectChanges(),[2]}})})},e.prototype.resetWikiLock=function(){this.wikiLocked=!1,this.wikiSelfLocked=!1,this.wikiLockedBy=void 0,this.editContent&&"update-article"===this.model&&this.removeLock(this.sn)},e.prototype.exitCollaboration=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.e)(this,function(e){return this.collaboration&&this.collaboration.onQuitEdit(),[2]})})},e.prototype.removeLock=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,o;return Object(i.e)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.wikiLockService.removeLock(e).toPromise()];case 1:return 200===(t=i.sent()).code&&t.data.length&&(n=t.data.map(function(e){return e.contentSn}),this.wikiLockService.unlockWiki(e,n)),[3,3];case 2:return o=i.sent(),Object(T.b)(o),[3,3];case 3:return[2]}})})},e.prototype.initSocketListen=function(){return Object(i.b)(this,void 0,void 0,function(){var e=this;return Object(i.e)(this,function(t){return this.currentCategory$.pipe(Object(p.a)(1)).subscribe(function(){e.collaborationMode?e.initCollaboration():e.initLockSocketListen()}),[2]})})},e.prototype.initCollaboration=function(){var e=this,t=new w.a(this.sn,this.wikiLockService,this.translate,this.notification),n=Object(a.a)(this.onWikiSnChange$,this.onDestory$);this.collaboration=t,t.retryEdit$.pipe(Object(d.a)(n)).subscribe(function(t){e.editArticle(t)}),t.otherPageForceOpen$.pipe(Object(d.a)(n)).subscribe(function(){e.editContent&&(e.editContent=!1)}),t.userExitCollaboration$.pipe(Object(d.a)(n)).subscribe(function(){e.showRefreshWikiTips()}),t.enterSingleEdit$.pipe(Object(d.a)(n)).subscribe(function(){return Object(i.b)(e,void 0,void 0,function(){var e,t;return Object(i.e)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.knowledgeService.getArticleDetails(this.sn).toPromise()];case 1:return e=n.sent().data,this.onArticleUpdate(e),this.beforeEditArticle(),this.editContent=!0,[3,3];case 2:return t=n.sent(),Object(T.b)(t),[3,3];case 3:return[2]}})})}),t.enterCollabEdit$.pipe(Object(d.a)(n)).subscribe(function(){e.descriptionType="rich-text",e.editContent=!0}),t.reopen$.pipe(Object(d.a)(n)).subscribe(function(){e.onReopen()}),n.subscribe(function(){e.removeWikiUpdateTips(),t.onDestroy()})},e.prototype.initLockSocketListen=function(){var e=this,t=[Object(y.b)(v.b.wikiLockedBy,function(t,n){t.includes(e.sn)&&(e.setWikiLock(n),e.isTable?e.luckysheet.cancelCreate():e.editContent=!1)}),Object(y.b)("connect",function(){return Object(i.b)(e,void 0,void 0,function(){var e,t,n,o,r;return Object(i.e)(this,function(i){switch(i.label){case 0:if(("document"===this.category||this.isTable)&&this.wikiLockService.openWiki(this.sn),!this.editContent)return[2];if("update-article"!==this.model)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.wikiLockService.addLock(this.sn).toPromise()];case 2:return e=i.sent(),t=e.data[0],n=e.data.filter(function(e){return e.contentSn}).map(function(e){return e.contentSn}),200===e.code?(this.currentLock=t,this.wikiLockService.lockWiki(t.entitySn,n),[2]):(null==t?void 0:t.id)===(null===(r=this.currentLock)||void 0===r?void 0:r.id)?(this.wikiLockService.lockWiki(t.entitySn,n),[2]):(this.editContent=!1,this.setWikiLock(t.operator),[3,4]);case 3:return o=i.sent(),Object(T.b)(o),[3,4];case 4:return[2]}})})}),Object(y.b)(v.b.wikiUnlock,function(t){t.includes(e.sn)&&(e.resetWikiLock(),e.queryWikiLock(),e.showRefreshWikiTips(),e.cdr.detectChanges())})];this.onDestory$.subscribe(function(){t.forEach(function(e){return e.off()})})},e.prototype.onUpdateWikiArticle=function(){this.onArticleUpdate(this.newWikiArticle),this.removeWikiUpdateTips()},e.prototype.removeWikiUpdateTips=function(){var e=this.updateWikiTipsRef;e&&(this.notification.remove(e.messageId),this.updateWikiTipsRef=null),this.newWikiArticle=null},e.prototype.showRefreshWikiTips=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n,o,r=this;return Object(i.e)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.knowledgeService.getArticleDetails(this.sn).toPromise()];case 1:return t=i.sent(),e=t.data,[3,3];case 2:return n=i.sent(),Object(T.b)(n),[2];case 3:if(S.notSame(this.articleDetails,e)){if(this.editContent)return this.onArticleUpdate(e),[2];this.newWikiArticle=e,this.updateWikiTipsRef||(o=this.notification.template(this.wikiUpdateTipsTemplateRef,{nzDuration:0,nzClass:"notification-box"}),this.updateWikiTipsRef=o,o.onClose.subscribe(function(){r.updateWikiTipsRef=null}))}else this.removeWikiUpdateTips();return[2]}})})},e.prototype.getEventReportDetails=function(e,t){var n,i=this;void 0===t&&(t=!1),this.knowledgeService.getEventReportDetails(e,null===(n=this.operateAuth)||void 0===n?void 0:n.huawei_id,t).subscribe(function(e){var t,n;if(200===e.code){"document"===i.category&&i.queryWikiLock();var o=null==e?void 0:e.data;(null==o?void 0:o.created_by)&&(i.articleAuth.name=null===(t=null==o?void 0:o.created_by)||void 0===t?void 0:t.name,i.articleAuth.account=null===(n=null==o?void 0:o.created_by)||void 0===n?void 0:n.account),i.detailRequestBack=!0,i.onArticleUpdate(e.data),i.getStatisticsInfo(),document.getElementById("scrollParentArticle")&&(document.getElementById("scrollParentArticle").scrollTop=0),i.getShareAmount(i.articleDetails.id),i.noPermisssion=null}else-18031==e.code&&(i.notification.error(i.translate.instant("TIPS"),i.translate.instant(String(e.code))),i.noPermisssion=e.data)},function(){})},e.prototype.listeningEmitEvent=function(e){var t=this,n={"outline-position":function(){var n,i;if(t.origin===e.origin&&(setTimeout(function(){t.isParentScroll=!1,t.positionActiveElement(e.data.titleId)}),!(null===(n=t.isShowFunction)||void 0===n?void 0:n.editFrom)||!["workitem","coe","ccb"].includes(null===(i=t.isShowFunction)||void 0===i?void 0:i.editFrom))){var o=e.data.titleId;t.router.navigate([],{relativeTo:t.activeRoute,queryParams:{title:"wikiArticleTitleId"===o?null:o},queryParamsHandling:"merge"})}},"article-comment::annotation-item-click":function(){setTimeout(function(){t.isParentScroll=!1,t.positionActiveElement(e.commentGuid,"annotation")})},"after-component-change-description":function(){var n,o;if(t.isImgLazyLoaded){for(var r=null===(n=null==t?void 0:t.articleOutlineArr)||void 0===n?void 0:n.length,a=0;a<r;a++){var c=t.articleOutlineArr[a],l=null==e?void 0:e.arr[a];c.startTop=null==l?void 0:l.startTop,c.endTop=null==l?void 0:l.endTop}t.isImgLazyLoaded=!1}else t.articleOutlineArr=Object(i.i)(e.arr),t.cdr.detectChanges();t.scrollTitleId=null===(o=e.arr[0])||void 0===o?void 0:o.titleId},"workitem:detail_change":function(){t.queryLinkNumbers(t.sn)},"wiki:access-control-set-success":function(){t.articleDetails.visibility=e.data},"vision-kanban-card:open-detail":function(){t.showDetail(e.data)},"workitem:change":function(){t.queryLinkNumbers(t.sn)},"article-comment::addAnnotation":function(){t.fullScreenCtrl?t.positionInfo=t.getPosition(null==e?void 0:e.commentGuid):(t.commentCtrl=!0,window.hwa("trackStructEvent",{label:"\u6f14\u793a\u6a21\u5f0f-\u6dfb\u52a0\u6279\u6ce8"})),t.saveAnnotationArticle(),t.getStatisticsInfo(),t.getAnnotation(null==e?void 0:e.commentGuid)},"wiki::close-annotation-discussion":function(){t.saveAnnotationArticle(),t.refreshAnnotationData(null==e?void 0:e.commentGuid)},"article-comment::clickAnnotationSpan":function(){t.fullScreenCtrl?t.positionInfo=t.getPosition(null==e?void 0:e.commentGuid):(window.hwa("trackStructEvent",{label:"\u6f14\u793a\u6a21\u5f0f-\u70b9\u51fb\u6279\u6ce8\u5757"}),t.commentCtrl=!0),t.getAnnotation(null==e?void 0:e.commentGuid)},"comment:refresh-num":function(){setTimeout(function(){t.getStatisticsInfo()})},"article-update-finished":function(){t.editContent=!1,t.getDetails(t.sn),t.removeLock(t.sn),t.exitCollaboration()},"excel-update-finished":function(){t.getDetails(t.sn),t.removeLock(t.sn)},"excel::wiki-closeModel":function(){"update-excel"===t.excelModel?(t.excelModel="check-excel",t.removeLock(t.sn)):t.luckysheet.renderExcel()},"article::wiki-closeModel":function(){t.editContent=!1,t.removeLock(t.sn),t.exitCollaboration(),e.saveBool?t.getDetails(t.sn):"contentWrapper"===t.uiSourceDomId&&(t.queryContentDomObservable&&t.queryContentDomObservable.unsubscribe(),t.queryContentDomObservable=Object(k.b)("contentWrapper",t.getArticleOutline.bind(t,"contentWrapper",t.articleTile),!0)),t.saveTemplateBool=!1},"wiki::close-annotation":function(){t.getAnnotation()},"wiki::workitem-detail-open-update-article":function(){t.workitemDetailShow=!0},"workitem:detail:exit":function(){t.workitemDetailShow=!1},"workitem:delete":function(){t.getDetails(t.sn)},"article-comment::add-annotation-after":function(){t.refreshAnnotationData(null==e?void 0:e.commentGuid)},"wiki-comment::replyAnnotationCommentPostSuccess":function(){t.fullScreenCtrl&&(t.positionInfo=t.getPosition(null==e?void 0:e.commentGuid),window.hwa("trackStructEvent",{label:"\u6f14\u793a\u6a21\u5f0f-\u56de\u590d\u6279\u6ce8"})),t.refreshAnnotationData(null==e?void 0:e.commentGuid)},"wiki-comment::deleteAnnotationComment":function(){t.refreshAnnotationData(null==e?void 0:e.commentGuid)},"template::closeWorkitemTemplateModel":function(){t.saveTemplateBool=!1},"preview-new-markdown":function(){t.getArticleOutline(t.uiSourceDomId,t.articleTile)},"wiki-workitem-detail-show":function(){t.isWikiWorkitemDetail=e.data,t.isWikiWorkitemDetail||setTimeout(function(){t.getArticleOutline(t.uiSourceDomId,t.articleTile)})},"refresh-countersign-info":function(){t.getCoutersignInfo(null==e?void 0:e.needOpenComment)},"refresh-countersign-verified-info":function(){t.refreshCoutersignInfo()}},o=n[e.type||e.event];o&&("string"==typeof o&&(o=n[o]),o())},e.prototype.handleSwitchChange=function(e){this.wideModeSwitch=e,Object(k.c)("wikiWideModeSwitch",JSON.stringify(this.wideModeSwitch)),this.emitService.emit({type:"wiki:doc-table-wide-view",obj:this.wideModeSwitch})},e.prototype.refreshAnnotationData=function(e){var t,n;this.positionInfo=this.getPosition(null!=e?e:null===(t=this.annotationCommentInfo)||void 0===t?void 0:t.commentGuid),this.getAnnotation(null!=e?e:null===(n=this.annotationCommentInfo)||void 0===n?void 0:n.commentGuid)},e.prototype.getPosition=function(e){var t,n={top:0,left:0},i=document.querySelector("[data-highlight-uuid="+e+"]"),o=document.getElementById("scrollParentArticle"),r=document.getElementById("contentWrapper");if(i){var a=null==i?void 0:i.getBoundingClientRect();n.top=a.top+(null==a?void 0:a.height)+25+o.scrollTop,n.left=a.left}if(r){var c=null===(t=null==r?void 0:r.getBoundingClientRect())||void 0===t?void 0:t.right;n.left+358>=c&&(n.left=c-358)}return n},e.prototype.saveCimArticleCondition=function(){var e,t;return{wikiSn:this.articleDetails.sn,wikiTitle:this.articleDetails.title,operator:null===(t=null===(e=null===window||void 0===window?void 0:window.communicationService)||void 0===e?void 0:e.currentUser)||void 0===t?void 0:t.huawei_id,sourceSystem:"CIM",addActivity:!1,paragraphs:this.buildParagraphsValue()}},e.prototype.buildParagraphsValue=function(e){return void 0===e&&(e=[]),this.descriptions.forEach(function(t){if("rich-text"===t.type){var n=document.getElementById(t.id);if(n){var i=n.querySelector(".render-wrapper"),o=n.querySelector(".max-level");e.push({category:t.title,content:null==i?void 0:i.innerHTML.replace(null==o?void 0:o.outerHTML,""),uiSource:t.ui_source,order:"0",contentId:t.id})}}else e.push({category:t.title,content:t.contentReal,uiSource:t.ui_source,order:"0",contentId:t.id})}),e},e.prototype.updateEventReportArticle=function(){var e=this.saveCimArticleCondition();this.knowledgeService.updateEventReportArticle(e).subscribe(function(e){},function(){})},e.prototype.saveAnnotationArticle=function(){var e,t=this;if(this.isEventReport)this.updateEventReportArticle();else if("system"===(null===(e=this.currentCategory)||void 0===e?void 0:e.classify)&&this.isDesignDoc){var n={wikiSn:this.articleDetails.sn,wikiTitle:this.articleTile,addActivity:!1,paragraphs:this.buildParagraphsValue()};this.knowledgeService.updateWorkitemArticle(n).subscribe(function(e){var n=e.success,i=e.unmodify;(null==n?void 0:n.length)||(null==i?void 0:i.length)||t.notification.error(t.translate.instant("SAVEED_FAILED"),"")},function(){})}else{var i=document.querySelector(".render-wrapper");this.knowledgeService.saveArticle([{id:this.articleDetails.id,ui_source:"1",kanban_id:this.articleDetails.kanban_id,title:this.articleTile,description:i.innerHTML,addActivity:!1}]).subscribe(function(e){t.descriptions[0].content=document.querySelector(".render-wrapper").innerHTML},function(){})}},e.prototype.refreshCoutersignInfo=function(){this.commentCtrl=!0,this.getCoutersignInfo(),this.emitService.emit({type:"review-countersign-refresh-comment"}),this.getStatisticsInfo()},e.prototype.getCoutersignInfo=function(e){var t=this;this.knowledgeService.getCoutersignInfo(this.sn).subscribe(function(n){n&&n.length?(t.coutersignInfo=Object(i.a)({},n[0]),e&&!t.commentCtrl&&(t.commentCtrl=!0)):t.coutersignInfo=null,t.coutersignOperate=t.getCountersignOperate()},function(){})},e.prototype.getCountersignOperate=function(){var e,t,n;return(!this.coutersignInfo||-1===(null===(e=this.coutersignInfo)||void 0===e?void 0:e.status))&&this.currentUserId===(null===(n=null===(t=this.articleDetails)||void 0===t?void 0:t.created_by)||void 0===n?void 0:n.id)},Object.defineProperty(e.prototype,"sreOperateAccess",{get:function(){var e;return(!this.coutersignInfo||-1===(null===(e=this.coutersignInfo)||void 0===e?void 0:e.status))&&this.sreAccess},enumerable:!1,configurable:!0}),e.prototype.showDetail=function(e){this.router.navigate(["workitem",e.number],{relativeTo:this.activeRoute})},e.prototype.initCurrentCategory=function(){var e=this;this.currentCategory$=new c.a(function(t){e.countCategoryAPINum>=1&&e.categoryManagerService.clearCategoryAPICache(),e.categoryManagerService.getWikiCategories(e.currentDomainInfo.id).subscribe(function(n){e.countCategoryAPINum++;var i=n.find(function(t){return t.id===e.selectCategory});e.catagoriedArr=[i],e.currentCategory=i||{},t.next(i),t.complete(),e.emitService.emit({type:"wiki:main-content-list",obj:i})},function(){})}).pipe(Object(u.a)(1))},e.prototype.clickOutsideFunc=function(){this.isShowSaveAndReviosionBtn=!1},e.prototype.getUrlParams=function(){var e=location.search,t={};if(-1!=e.indexOf("?"))for(var n=e.substr(1).split("&"),i=n.length,o=0;o<i;o++)t[n[o].split("=")[0]]=unescape(n[o].split("=")[1]);return t},e.prototype.queryLinkNumbers=function(e){var t=this;this.knowledgeService.queryLinkNumbers(e).subscribe(function(e){t.linkWorkItemNumber=e},function(){})},e.prototype.beforeEditArticle=function(){this.editArticleTile=this.articleTile;var e=this.descriptions[0];this.editDescription=e.content,this.descriptionType=e.type,this.model="update-article"},e.prototype.excelFullScreen=function(){this.fullScreenCtrl=!0},e.prototype.exitFullScreen=function(){this.fullScreenCtrl=!1},e.prototype.excelEventOutput=function(e){switch(e.type){case"full-screen-exit":this.exitFullScreen()}},e.prototype.editExcel=function(){this.excelModel="update-excel"},e.prototype.editArticle=function(e){return void 0===e&&(e=!1),Object(i.b)(this,void 0,void 0,function(){var t,n,o,r,a;return Object(i.e)(this,function(i){switch(i.label){case 0:return window.hwa("trackStructEvent",{label:"\u7f16\u8f91"}),this.visibilityEditModel="update-article",this.createFrom="article",this.newWikiArticle&&this.onUpdateWikiArticle(),this.resetAssociatedWorkitem(),this.beforeEditArticle(),this.collaborationMode?(this.collaboration.onWikiEdit(e),[3,8]):[3,1];case 1:if(this.wikiLocked&&!e)return[2];if(this.wikiLocked=!1,!this.wikiSelfLocked)return[3,5];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.wikiLockService.removeLock(this.sn).toPromise()];case 3:return 200!==i.sent().code?(this.notification.error(this.translate.instant("WIKI_FORCE_EDIT_FAILED"),""),[2]):[3,5];case 4:return t=i.sent(),Object(T.b)(t),[2];case 5:return i.trys.push([5,7,,8]),[4,this.wikiLockService.addLock(this.sn).toPromise()];case 6:return n=i.sent(),o=n.data[0],r=n.data.map(function(e){return e.contentSn}),200===n.code?(this.currentLock=o,this.wikiLockService.lockWiki(this.sn,r),this.editContent=!0,this.editExcel()):this.setWikiLock(o.operator),[3,8];case 7:return a=i.sent(),Object(T.b)(a),[3,8];case 8:return[2]}})})},e.prototype.resetViewScroll=function(){var e=this,t=document.getElementById("article");if(this.editContent=!1,t&&"rich-text"==this.descriptionType){this.viewModeShow=!1;var n,i,o=t.scrollHeight-this.editMarPaddHeight,r=t.scrollTop-this.editScrollMarPadd,a=Object(l.a)(100).pipe(Object(m.a)(function(e){return Object(s.a)(2*e)})).subscribe(function(t){(i=document.getElementById("wikiArticleTitleId"))&&(n=document.getElementById("scrollParentArticle"),setTimeout(function(){var t=i&&i.getBoundingClientRect().height,a=n.scrollHeight-t-e.marginPaddingVal;n.scrollTop=r*a*a/(o*o)+t+e.marginPaddingVal,setTimeout(function(){e.viewModeShow=!0})}),a.unsubscribe())})}},e.prototype.navGetDetails=function(e){this.isShowFileDetail=!1;var t=e.sn;this.router.navigate(["../"+t],{relativeTo:this.activeRoute}),this.emitService.emit({type:"nav-updata",sn:t,is_deleted:"deleted"===(null==e?void 0:e.status)})},e.prototype.getNavigation=function(){var e=this;this.navigatioList=[],this.countAPINumber>=1&&this.spaceMemberService.clearArticleNavigationCache(),this.spaceMemberService.getArticleNavigation(this.currentDomainInfo.id,this.sn).subscribe(function(t){var n,i,o,r;e.countAPINumber++,t&&!e.is_deleted&&(e.activeRoute.params.subscribe(function(e){o=e.domain_id,r=e.categoryId}),e.navigatioList=t,e.navigatioList.unshift({title:null===(n=e.currentCategory)||void 0===n?void 0:n.title,path:["domains/"+o+"/wiki/"+r]}),(null===(i=e.currentDomainInfo)||void 0===i?void 0:i.domainTitle)&&e.navigatioList.unshift({title:e.currentDomainInfo.domainTitle,path:["domains/"+o+"/wiki"]})),e.is_deleted&&(e.navigatioList=t,e.navigatioList.unshift({title:e.translate.instant("BIN")}))},function(){})},e.prototype.openAssociatedWorkitem=function(){var e=this;this.associatedWorkitemCtrl=!0,Promise.all([n.e(15),n.e(4),n.e(17)]).then(n.bind(null,"1XXT")).then(function(e){return e.WikiKanbanModule}).then(function(t){return e.compiler.compileModuleAsync(t)}).then(function(t){var n=t.create(e.injector),i=n.instance.getWikiKanbanComponent(),o=e.componentFactoryResolver.resolveComponentFactory(i),r=e.wikiKanban.createComponent(o,null,n.injector),a=r.instance;a.category=e.category,a.currentDomain=e.currentDomainInfo.id,a.articleDetails=e.articleDetails,a.linkWorkItemNumber=e.linkWorkItemNumber,a.eventOutput.pipe(Object(p.a)(1)).subscribe(function(){r.destroy(),n.destroy(),e.wikiKanban.clear(),e.closeKanbanEvent()})}).catch(T.a)},e.prototype.linkRouterFunc=function(e){if(this.resetAssociatedWorkitem(),e.sn)return this.navGetDetails(e);e.path&&this.router.navigate(e.path)},e.prototype.resetAssociatedWorkitem=function(){this.associatedWorkitemCtrl&&(this.associatedWorkitemCtrl=!1,this.createCustomElement=void 0)},e.prototype.setMoreBtnNull=function(e){"true"===localStorage.getItem("readWideModeGuide")&&(this.popoverGuideVisible.isHotDotPopoVisible=e)},e.prototype.popoverSubmit=function(e){"lookHelp"===e&&window.open("https://clouddevops.huawei.com/domains/2/wiki/9/WIKI2022060700931","_blank"),Object(k.c)("readWideModeGuide","false"),this.needGuideWideMode=!1,this.popoverGuideVisible.isHotDotPopoVisible=!1},e.prototype.confrimLinkAlready=function(e){this.linkAlreadyShowCtrl=!1},e.prototype.ngAfterViewInit=function(){var e=this,t=this.hotkey.bind(this);setTimeout(function(){document.body.addEventListener("keydown",t),e.inputWidth=window.innerWidth/4.8,e.onDestory$.subscribe(function(){document.body.removeEventListener("keydown",t)})})},e.prototype.showFillingArea=function(){this.fillingAreaCtrl=!this.fillingAreaCtrl},e.prototype.positionActiveElement=function(e,t){var n,i,o,r,a=this;this.editContentScroll=!1,this.editContent||this.getScrollDom();var c=this.top&&this.top.getBoundingClientRect(),l=this.element&&this.element.getBoundingClientRect();if(t&&"annotation"==t){var s=document.querySelector("[data-highlight-uuid="+e+"]");r=s&&s.getBoundingClientRect()}else r=null===(n=document.getElementById(e))||void 0===n?void 0:n.getBoundingClientRect();var d,p,u=null===(i=this.parent)||void 0===i?void 0:i.getBoundingClientRect();if(!this.editContent){if("wikiArticleTitleId"==e)d=0;else if(t&&"annotation"==t){var m=document.querySelector("#scrollParentWikiComment"),h=m&&m.scrollTop,g=document.querySelector("[data-highlight-comment-uuid="+e+"]").offsetTop;r&&(d=Math.abs(r.top-c.top)-(g-h))}else r&&(d=Math.abs(r.top-c.top));p=null!==(o=l.top-c.top-(null==u?void 0:u.height))&&void 0!==o?o:30}d>p&&(d=p),this.parent.scrollTop=d,setTimeout(function(){a.editContentScroll=!0})},e.prototype.getArticleOutline=function(e,t){this.parent=null,this.top=null,this.element=null,this.getScrollDom(),this.isImgLazyLoaded||(this.articleOutlineArr=[]),this.awaitToChangeDesc={id:e,articleRealTitle:t,firstChildDom:document.getElementById("topPositionArticle")},this.emitService.emit({type:"article-outline-get-outline-arr",data:this.awaitToChangeDesc,origin:this.origin,isImgLazyLoaded:this.isImgLazyLoaded})},e.prototype.articleScrollFunc=function(){this.isParentScroll&&this.articleScroll()},e.prototype.articleScroll=function(){this.getScrollDom();var e=this.articleOutlineArr.length;this.articleOutlineArr&&e>0&&!this.editContent&&this.parent&&this.top&&this.element&&this.findFinishedDom(this.articleOutlineArr[e-1].titleId)},e.prototype.getScrollDom=function(){this.parent||(this.parent=document.getElementById("scrollParentArticle")),this.top||(this.top=document.getElementById("topPositionArticle")),this.element||(this.element=document.getElementById("bottomPositionArticle"))},e.prototype.findFinishedDom=function(e){if(document.getElementById(e)){this.editContent||this.getScrollDom();for(var t=this.parent.scrollTop,n=JSON.parse(localStorage.getItem("outlineActiveTitle")),i=0;i<this.articleOutlineArr.length;i++){var o=this.articleOutlineArr[i];if(o.startTop<t&&t<o.endTop){if(n&&n.titleId!=o.titleId||!n){Object(k.c)("outlineActiveTitle",JSON.stringify(o));var r={type:"scroll-active-outline-title",data:o};this.scrollTitleId=r.data.titleId,this.emitService.emit(r)}return}}}},e.prototype.getDetails=function(e,t){var n=this;this.detailRequestBack=!1,this.isMoreParagraphsReport=!1,this.knowledgeService.getArticleDetails(e,t||null,"FEATURE_API_DESIGN").subscribe(function(t){var i,o;if(n.detailRequestBack=!0,n.articelInfo=t.data,n.excelModel="check-excel",200==t.code){var r=t.data;if(n.uiSource=r.paragraphs.length&&(null===(i=r.paragraphs[0])||void 0===i?void 0:i.ui_source),n.uiSourceDomId=2===n.uiSource?"scrollParentArticle":"contentWrapper",n.creatorId=null===(o=r.created_by)||void 0===o?void 0:o.id,n.wikiId=r.id,n.isCoe="coe"===r.classify&&"document"===r.category,n.is_baseline=!!r.is_baseline,n.knowledgeService.articleEditableReport(e,r.is_updated),n.onArticleUpdate(r),n.initInfoByDomain(),n.initSocketListen(),n.getExportAuth(),n.currentCategory$.pipe(Object(d.a)(n.onDestory$)).subscribe({next:function(){var e,t,i,o,r,a,c,l,s,d,p,u,m,h;if(!(null===(e=n.currentCategory)||void 0===e?void 0:e.classify)&&n.isDesignDoc){if(-1===(null===(t=n.articleDetails)||void 0===t?void 0:t.entity_status))return;n.isMoreParagraphsReport=!0,n.workitemList=[{number:null===(i=n.articleDetails)||void 0===i?void 0:i.entity_sn,title:null===(o=n.articleDetails)||void 0===o?void 0:o.entity_title}]}if(["PRD","system"].includes(null===(r=n.currentCategory)||void 0===r?void 0:r.classify)&&n.isDesignDoc){if(-1==(null===(a=n.articleDetails)||void 0===a?void 0:a.entity_status))return;n.isMoreParagraphsReport=!0,n.workitemList=[{number:null===(c=n.articleDetails)||void 0===c?void 0:c.entity_sn,title:null===(l=n.articleDetails)||void 0===l?void 0:l.entity_title}]}"CLOUDDEVOPS_COE"===(null===(s=n.articleDetails)||void 0===s?void 0:s.source_system)&&(n.isMoreParagraphsReport=!0,n.getCoeInfo(),n.workitemList=[{number:null===(d=n.articleDetails)||void 0===d?void 0:d.entity_sn,title:null===(p=n.articleDetails)||void 0===p?void 0:p.entity_title}]),"CLOUDDEVOPS_CCB"===(null===(u=n.articleDetails)||void 0===u?void 0:u.source_system)&&(n.isMoreParagraphsReport=!0,n.workitemList=[{number:null===(m=n.articleDetails)||void 0===m?void 0:m.entity_sn,title:null===(h=n.articleDetails)||void 0===h?void 0:h.entity_title}])}}),r.created_by&&(n.articleAuth.name=r.created_by.name,n.articleAuth.account=r.created_by.account),n.is_deleted="deleted"===r.status,!n.is_deleted&&n.isDomLoaded&&(n.getCoutersignInfo(),n.getAnnotation()),n.getNavigation(),"document"!==n.category&&!n.isTable||n.collaborationMode||(n.queryWikiLock(),n.wikiLockService.openWiki(n.sn)),("document"==n.category||n.isTable)&&n.getStatisticsInfo(),n.editContent=!1,n.fillingAreaCtrl=!0,n.articleDetails.voters){var a=n.currentUserId,c=!1;n.articleDetails.voters.forEach(function(e){c=e.id==a}),n.voters=c}else n.voters=!1;n.isFavorite=n.articleDetails.isFavorite,document.getElementById("scrollParentArticle")&&(document.getElementById("scrollParentArticle").scrollTop=0),n.getShareAmount(n.articleDetails.id),n.eventReport(),n.eventOutput.emit({event:"article:load:success"}),document.title="Wiki: "+n.articleTile,n.noPermisssion=null,setTimeout(function(){n.isDomLoaded&&n.getArticleOutline(n.uiSourceDomId,n.articleTile)}),n.getRedirectPageResult(),n.releasePass()}else-18031==t.code?(n.notification.error(n.translate.instant("TIPS"),n.translate.instant(String(t.code))),n.noPermisssion=t.data):-18002==t.code&&(n.articelInfo||(n.isShowRedirectPage=!0,n.jumpNewUrl=null,n.currentUrlRef=null),n.countCategoryAPINum>=1&&n.categoryManagerService.clearCategoryAPICache(),n.categoryManagerService.getWikiCategories(n.currentDomainId).subscribe(function(e){n.countCategoryAPINum++;var t=e.find(function(e){return e.id===n.selectCategory});n.catagoriedArr=[t],n.emitService.emit({type:"wiki:main-content-list",obj:t})},function(){}))},function(){})},e.prototype.getRedirectPageResult=function(){var e,t=["workitem","coe","ccb"].includes(null===(e=this.isShowFunction)||void 0===e?void 0:e.editFrom),n=window.communicationService.currentDomain;t||!this.articelInfo.allowRedirection||!n||this.currentDomainId===this.articelInfo.assigned_domain.id&&this.selectCategory===this.articelInfo.kanban_id?this.isShowRedirectPage=!1:(this.isShowRedirectPage=!0,this.jumpNewUrl=location.origin+"/domains/"+this.articelInfo.assigned_domain.id+"/wiki/"+this.articelInfo.kanban_id+"/"+this.sn)},e.prototype.getCoeInfo=function(){var e=this;this.knowledgeService.getCoeInfo(this.articleDetails.entity_sn).subscribe(function(t){t&&(e.coeInfo=t,e.articleDetails.is_updated=e.articleDetails.is_updated&&"COE_STATUS_CLOSED"!==t.status)},function(){})},e.prototype.initInfoByDomain=function(){var e,t,n,i=this;(null===(e=this.currentDomainInfo)||void 0===e?void 0:e.id)||(this.currentDomainInfo.id=null===(n=null===(t=this.articleDetails)||void 0===t?void 0:t.assigned_domain)||void 0===n?void 0:n.id),this.authService.buildOperateAuth({currentDomain:this.currentDomainInfo.id,currentUserId:this.currentUserId}).then(function(e){i.authAccess=e}),this.initCurrentCategory()},e.prototype.onArticleUpdate=function(e){var t=this;this.articleDetails=Object(h.a)(e),this.category=e.category,this.isTable="table"===this.category,this.isShowTag=["feature","coe","PRD"].includes(null==e?void 0:e.classify),this.isDesignDoc=["feature","story","PRD"].includes(null==e?void 0:e.classify),this.articleDetailsShare=Object(i.a)(Object(i.a)({},Object(h.a)(e)),{shareType:"doc",shareCategory:"doc",entity_type:"wiki"}),this.setArticleDescription(e.paragraphs),this.articleTile=e.title,this.workitemInfo=Object(i.a)(Object(i.a)({},this.workitemInfo),{productId:this.articleDetails.assigned_domain.id,sn:this.articleDetails.sn,itemName:"wiki-"+this.articleDetails.title,itemUrl:location.origin+"/domains/"+this.articleDetails.assigned_domain.id+"/wiki/"+this.articleDetails.sn}),Object(f.p)(function(){t.onArticleRender$.next()})},e.prototype.setArticleDescription=function(e){var t=this;this.descriptions=e.map(function(e){return{id:e.content_id,content:e.content_category&&"document"!=e.content_category&&"directory"!=e.content_category?'<h1 class="max-level" id="'+e.content_id+'">'+e.content_category+"</h1>\n\n"+t.handleSketchPadHistoryTag(e.content):t.handleSketchPadHistoryTag(e.content),contentReal:e.content,showPreview:!0,type:Object(f.q)(e.ui_source),content_sort:e.content_sort,title:e.content_category,ui_source:e.ui_source}}).sort(function(e,t){return e.content_sort&&t.content_sort?e.content_sort-t.content_sort:0})},e.prototype.handleSketchPadHistoryTag=function(e){return this.is_baseline?e.replace(/<sketch-pad/g,'<sketch-pad is-load-lastest="false"'):e},e.prototype.getShareAmount=function(e){var t=this;this.knowledgeService.getShareAmount(e).subscribe(function(e){t.shareAmount=e},function(){})},e.prototype.getStatisticsInfo=function(){var e=this;this.knowledgeService.getStatisticsInfo(this.articleDetails.id,"doc").subscribe(function(t){t&&(e.statisticsData=t,e.commentNum=t.comment_amount)},function(){})},e.prototype.recoverArticleModTip=function(){var e=this.translate.instant.bind(this.translate),t=this.recoverArticle.bind(this);this.modal.error({nzTitle:e("RECOVER_ARTICLE_TIP"),nzContent:"",nzOkText:e("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){t()},nzCancelText:e("COMMON_BUTTON_CANCLE"),nzOnCancel:function(){}})},e.prototype.handleRecoverRequest=function(e,t,n){var i,o=this;e&&(t.push({id:null==e?void 0:e.id,status:n,kanban_id:this.articleDetails.kanban_id}),(null===(i=e.children)||void 0===i?void 0:i.length)>0&&e.children.forEach(function(e){o.handleRecoverRequest(e,t,n)}))},e.prototype.recoverArticle=function(){var e=this,t=[];this.handleRecoverRequest(this.articleDetails,t,"published"),this.knowledgeService.saveArticle(t).subscribe(function(t){t.success&&t.success.length&&(e.is_deleted=!1,e.notification.success(e.translate.instant("ARTICLE_RESTORED"),""),e.emitService.emit({type:"recover-article",id:e.articleDetails.id,sn:e.articleDetails.sn}),e.getNavigation())},function(){})},e.prototype.thoroughDeletedArticle=function(){var e=this.translate.instant.bind(this.translate),t=this.deletedArticle.bind(this);this.modal.error({nzTitle:e("COMPLETELY_DELETE_CONFIRMATION"),nzContent:"",nzOkText:e("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){t()},nzCancelText:e("COMMON_BUTTON_CANCLE"),nzOnCancel:function(){}})},e.prototype.deletedArticle=function(){var e=this,t=[];this.handleRecoverRequest(this.articleDetails,t,"clear"),this.knowledgeService.saveArticle(t).subscribe(function(t){t.success&&t.success.length&&(e.router.navigate(["../"],{relativeTo:e.activeRoute}),e.notification.success(e.translate.instant("DELETE_SUCCESS"),""),e.emitService.emit({type:"delete-article",id:e.articleDetails.id}))},function(){})},e.prototype.setWikiFavorite=function(){var e=this;this.knowledgeService.setWikiFavorite({wikiId:this.articleDetails.id,wikiSn:this.articleDetails.sn,createdBy:this.currentUserId},!this.isFavorite).subscribe(function(t){e.isFavorite=!e.isFavorite},function(){}),window.hwa("trackStructEvent",{label:this.isFavorite?"\u53d6\u6d88\u6536\u85cf":"\u6dfb\u52a0\u6536\u85cf"})},e.prototype.setVote=function(){var e=this;this.resetAssociatedWorkitem(),this.eventReport(),this.knowledgeService.saveArticle([{id:this.articleDetails.id,voters:[{id:this.currentUserId}],kanban_id:this.articleDetails.kanban_id}]).subscribe(function(t){var n=t.success;n.length&&"voter"==n[0].field&&(e.voters=n[0].content_new,e.getStatisticsInfo())},function(){}),window.hwa("trackStructEvent",{label:"\u70b9\u8d5e"})},e.prototype.showFavorites=function(){var e=this;this.knowledgeService.showFavoritesByKanban(this.sn,this.currentUserId).subscribe(function(t){e.favorites=!(200!==t.code||!t.data)},function(){})},e.prototype.setFavorites=function(){this.favorites=!this.favorites,this.knowledgeService.setFavoritesByKanban({wikiSn:this.sn,wikiId:this.wikiId,createdBy:this.currentUserId},this.favorites).subscribe(function(e){window.hwa("trackStructEvent",{label:"\u6536\u85cf"})},function(){})},e.prototype.createArticle=function(){var e;(null===(e=this.authAccess)||void 0===e?void 0:e.userEditPermission)&&(this.visibilityEditModel="create-article",this.createFrom="article",window.hwa("trackStructEvent",{label:"\u65b0\u5efa\u6587\u7ae0"}),this.editArticleTile="\u7a7a\u767d\u6587\u6863",this.editDescription="",this.descriptionType="rich-text",this.model="create-article",this.editContent=!0)},e.prototype.removeFunc=function(){var e=this.translate.instant.bind(this.translate),t=this.dangerConfirmFunc.bind(this),n="directory"===this.articleDetails.category;this.modal.error({nzTitle:e("DELETE_WIKI_TIP")+e(this.category)+" <"+this.articleDetails.title+"> ?",nzContent:e(n?"DELETE_DIRECTORY_TIPS":"DELETE_ARTICLE_TIPS"),nzOkText:e("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){t()},nzCancelText:e("COMMON_BUTTON_CANCLE"),nzOnCancel:function(){}})},e.prototype.dangerConfirmFunc=function(){var e=this;this.knowledgeService.deleteNode(this.currentDomainInfo.id,[{id:this.articleDetails.id,category:this.articleDetails.category,kanban_id:this.articleDetails.kanban_id}]).subscribe(function(t){200===t.code&&t.data&&t.data.success&&0!==t.data.success.length&&(e.router.navigate(["../"],{relativeTo:e.activeRoute}),e.notification.success(e.translate.instant("DELETE_SUCCESS"),""),e.emitService.emit({type:"remove-directory",id:e.articleDetails.id,sn:e.articleDetails.sn,title:e.articleDetails.title}))},function(){})},e.prototype.folderEditSuccess=function(e){var t=this;e.type&&(this.navigatioList=this.navigatioList.map(function(t){return t.id==e.id&&(t.title=e.title),t})),this.haveSave=!0,setTimeout(function(){t.haveSave=!1},3e3)},e.prototype.openCommentPanel=function(e){this.resetAssociatedWorkitem(),this.eventReport(),this.commentCtrl=!0},e.prototype.closeCommentPanel=function(e){this.commentCtrl=!1,this.eventReport()},e.prototype.shareByEspace=function(){window.hwa("trackStructEvent",{label:"\u5206\u4eab"}),this.espaceShareCtrl=!0},e.prototype.startCountersign=function(){this.coutersignOperate&&(this.isCreateCountersign=!0,window.hwa("trackStructEvent",{label:"\u5f00\u59cb\u4f1a\u7b7e"}),this.initiateCountersignCtrl=!0)},e.prototype.getModelShowCtrl=function(e){this.espaceShareCtrl=!1},e.prototype.getModelShowCtrlCoutersign=function(e){this.initiateCountersignCtrl=!1,this.isCreateCountersign&&(this.isCreateCountersign=!1),this.getCoutersignInfo()},e.prototype.updateJudgeListHandler=function(){this.isSreWiki?this.emitService.emit({type:"set-sre-countersign-users"}):this.initiateCountersignCtrl=!0},e.prototype.shareByEmail=function(){this.emailShareCtrl=!0,window.hwa("trackStructEvent",{label:"\u5206\u4eab"})},e.prototype.showRevisionAndHistory=function(e){this.isShowRevisionAndHistory=!0,this.showHistoryType=e,this.activeRervsionItem=null,"REVISIONVERSION"==e?window.hwa("trackStructEvent",{label:"\u4fee\u8ba2\u7248\u672c"}):"HISTORYRECORD"==e&&window.hwa("trackStructEvent",{label:"\u5386\u53f2\u8bb0\u5f55"})},e.prototype.closeHistoryModal=function(e){e.artilceUpdate&&this.getDetails(this.sn),this.isShowRevisionAndHistory=!1},e.prototype.handleShowFileDetail=function(e){this.isShowFileDetail=e},e.prototype.emailModelShowCtrl=function(e){this.emailShareCtrl=!1},e.prototype.closeCallbackFunc=function(){this.accessControlShow=!1},e.prototype.accessControlShowFunc=function(){this.accessControlShow=!0,window.hwa("trackStructEvent",{label:"\u53ef\u89c1\u5ea6\u8bbe\u7f6e"})},e.prototype.directoryAccessControl=function(){this.articleDetails.is_updated?this.accessControlShowFunc():this.notification.error(this.translate.instant("NO_PERMISSION"),"")},e.prototype.toggleFullScreen=function(){var e=this;Zr.isEnabled&&(Zr.request(document.getElementById("scrollParentArticle")),this.fillingAreaCtrl=!1),Zr.onchange(Object(P.a)(function(){e.screenDom=e.screenDom||document.getElementById("scrollParentArticle"),Zr.element?(window.hwa("trackStructEvent",{label:"\u8fdb\u5165\u6f14\u793a\u6a21\u5f0f"}),e.fullScreenCtrl=!0,e.saveCDKs(),e.screenDom.classList.add("full-screen-styl")):(e.fullScreenCtrl=!1,e.positionInfo=null,e.saveCDKs(),e.screenDom.classList.remove("full-screen-styl"),e.annotationCommentInfo=null,e.fillingAreaCtrl=!0,e.isShowOutlineFullScreen=!1,e.eventReport(),window.hwa("trackStructEvent",{label:"\u9000\u51fa\u6f14\u793a\u6a21\u5f0f"}))}),2e3)},e.prototype.saveCDKs=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n;return Object(i.e)(this,function(i){switch(i.label){case 0:if(e=document.querySelectorAll(".cdk-overlay-container"),t=document.getElementById("scrollParentArticle"),!this.fullScreenCtrl)return[3,5];n=0,i.label=1;case 1:return n<e.length?"BODY"!=e[n].parentElement.tagName?[3,3]:(e[n].parentNode.removeChild(e[n]),[4,t.appendChild(e[n])]):[3,4];case 2:i.sent(),this.cdr.detectChanges(),i.label=3;case 3:return n++,[3,1];case 4:return[3,9];case 5:n=0,i.label=6;case 6:return n<e.length?"scrollParentArticle"!=e[n].parentElement.id?[3,8]:(e[n].parentNode.removeChild(e[n]),[4,document.body.appendChild(e[n])]):[3,9];case 7:i.sent(),this.cdr.detectChanges(),i.label=8;case 8:return n++,[3,6];case 9:return[2]}})})},e.prototype.importWord=function(){this.authAccess.userEditPermission&&(this.parentNode=this.articleDetails.id,this.importWordShow=!0,window.hwa("trackStructEvent",{label:"Word\u5bfc\u5165"}))},e.prototype.closeImportWord=function(){this.importWordShow=!1},e.prototype.exportWord=function(){var e=window.location.origin+"/devops-file-handler/api/export/word?sn="+this.articleDetails.sn;window.open(e,"_blank")},e.prototype.exportPDF=function(){window.hwa("trackStructEvent",{label:"\u5bfc\u51fa\u4e3aPDF"});var e=window.location.origin+"/devops-file-handler/api/export/pdf?sn="+this.articleDetails.sn;window.open(e,"_blank")},e.prototype.getExportAuth=function(){var e=this;window.communicationService.currentUserRole$.subscribe(function(t){e.canExport=Object(I.a)(t,["Owner","Admin"]).length>0||e.articleDetails.created_by&&e.articleDetails.created_by.id===e.currentUserId})},e.prototype.buildEventReportCondition=function(e){var t;return{allowCapture:!1,blurCaptureForbid:!1,watermark_txt:null===(t=this.operateAuth)||void 0===t?void 0:t.huawei_id,watermark_parent_node:"wiki-detail",watermark_alpha:.15,watermark_x_space:200,watermark_y_space:160,watermark_fontsize:"16px",watermark_height:60,closeWatermark:!1,hiddenContextmenu:!1,hiddenCtrlS:!1,hiddenCtrlP:!1,hiddenF12:!1}},e.prototype.addMark=function(e){this.waterMarkService.addMark(e)},e.prototype.eventReport=function(){if("coe"==this.articleDetails.classify&&this.articleDetails.sub_classify&&"document"==this.articleDetails.category)switch(this.articleDetails.sub_classify){case"coe_operation":this.queryDomWater&&this.queryDomWater.unsubscribe(),this.queryDomWater=Object(k.b)("wiki-detail",this.addMark.bind(this,this.buildEventReportCondition()),!0);break;default:this.waterMarkService.clearMark()}else this.waterMarkService.clearMark()},e.prototype.judgeCoeNotCopy=function(){if(this.coeOperationStatus)return!1},e.prototype.saveAsTemplate=function(){var e,t=this;if("system"===(null===(e=this.currentCategory)||void 0===e?void 0:e.classify))this.authService.buildOperateAuth({currentDomain:this.currentDomainInfo.id,currentUserId:this.currentUserId,isNeedUpRole:!0}).then(function(e){e.templateAccess&&(t.saveTemplateBool=!0)});else{if(!this.authAccess.templateAccess)return;this.saveTemplateBool=!0}},e.prototype.gotoWikiDetail=function(){var e,t,n;-1!==(null===(e=this.articleDetails)||void 0===e?void 0:e.entity_status)&&("CLOUDDEVOPS_COE"===(null===(t=this.articleDetails)||void 0===t?void 0:t.source_system)?this.openCoeDetail():(this.workitemDetailShow=!0,this.router.navigate(["./workitem/"+(null===(n=this.articleDetails)||void 0===n?void 0:n.entity_sn)],{relativeTo:this.activeRoute})))},e.prototype.openCoeDetail=function(){if(this.coeInfo){var e=window.location.origin+"/domains/"+this.coeInfo.assignedDomainId+"/coe/list/detail/"+this.coeInfo.id;window.open(e,"_blank")}},e.prototype.baseline=function(){var e=this;this.isShowBaseline&&setTimeout(function(){e.isShowRevisionDetailModal=!0},300)},e.prototype.saveArticleAndRevision=function(e){var t=this;if(e){this.versionDetail={revision_record_title:e.revision_record_title,remark:e.remark,relation:e.relations};var n=Object(i.a)(Object(i.a)({},this.versionDetail),{category:"baseline",entity_id:this.articleDetails.id,entity_sn:this.articleDetails.sn,entity_type:"wiki",title:this.articleDetails.title,paragraphs:this.articleDetails.paragraphs.map(function(e){var t;return{category:null!==(t=e.content_category)&&void 0!==t?t:"",content:e.content,uiSource:e.ui_source}})});this.knowledgeService.createBaseLine(n).subscribe(function(e){t.notification.success(t.translate.instant("UPDATE_SUCCESS",""),""),t.emitService.emit({type:"wiki::baseline-version-create"})},function(){})}this.isShowRevisionDetailModal=!1},e.prototype.getAnnotation=function(e){var t=this;this.annotationCommentInfo=null,this.knowledgeService.searchComments({entity_id:this.articleDetails.id}).subscribe(function(n){var i;t.annotationArrStatus=!n||!n.data||n.data.filter(function(e){return"annotation"===e.commentType}).every(function(e){return-1===e.status}),e&&(t.annotationCommentInfo=null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.filter(function(t){return(null==t?void 0:t.commentGuid)===e})[0],t.flatChildren(t.annotationCommentInfo))},function(){})},e.prototype.flatChildren=function(e){var t=this,n=[];e.comments.forEach(function(e){t.flatAnnotationChildren(e,n)}),n.reduce(function(e,t){return e.includes(t.parent_id)||e.push(t.parent_id),e},[]).map(function(e){return n.filter(function(t){return t.parent_id===e})}).forEach(function(t){var n,o=e.comments.findIndex(function(e){return e.id===t[0].parent_id});(n=e.comments).splice.apply(n,Object(i.i)([o+1,0],t))})},e.prototype.flatAnnotationChildren=function(e,t){var n,i=this;(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.forEach(function(n){n.parentObj=e,n.replayUserName=e.submitted_by.name,n.replayUserAccount=e.submitted_by.account,t.push(n),i.flatAnnotationChildren(n,t)})},e.prototype.reversionJumpHandler=function(e){this.activeRervsionItem=e,this.showHistoryType="REVISIONVERSION",window.hwa("trackStructEvent",{label:"\u4fee\u8ba2\u7248\u672c"}),this.isShowRevisionAndHistory=!0},e.prototype.closeMinimize=function(){var e=new CustomEvent("knowledge_event_listener",{detail:{operation:"knowledge_change_minimize",content:!1}});window.dispatchEvent(e)},e.prototype.showAnonymizePreview=function(){this.isShowAnonymizePreview=!0,this.getEventReportDetails(this.sn,!0)},e.prototype.closeAnonymizePreview=function(){this.getEventReportDetails(this.sn),this.isShowAnonymizePreview=!1},e.prototype.scrollToTitle=function(e){var t=this;this.onArticleRender$.pipe(Object(d.a)(this.onDestory$),Object(p.a)(1)).subscribe(function(){t.positionActiveElement(e)})},e.prototype.enterEditInShow=function(){if(this.fullScreenCtrl){if(window.hwa("trackStructEvent",{label:"\u6f14\u793a\u6a21\u5f0f-\u8fdb\u5165\u7f16\u8f91"}),this.selectionInfo=Object(f.m)(document.querySelector(".render-wrapper")),this.editArticle(),"1"!=this.uiSource)return;this.queryDomObservable&&this.queryDomObservable.unsubscribe(),this.queryDomObservable=Object(k.b)("article",this.focusAndPosition.bind(this),!0)}},e.prototype.focusAndPosition=function(e){if(e){Object(f.t)(e,this.selectionInfo);var t=window.getSelection().getRangeAt(0),n={node:t.endContainer,offset:t.endOffset};t.setStart(n.node,n.offset),t.setEnd(n.node,n.offset),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),this.positionFocusElement(n.node,e)}},e.prototype.positionFocusElement=function(e,t){var n=document.getElementById("topPositionArticle").getBoundingClientRect(),i=document.getElementById("bottomPositionArticle").getBoundingClientRect(),o=e.parentNode.getBoundingClientRect(),r=document.getElementById("scrollParentArticle"),a=r.getBoundingClientRect(),c=Math.abs(o.top-n.top)-a.height/2,l=i.top-n.top-a.height;c>l&&(c=l),r.scrollTop=c,setTimeout(function(){t.focus()})},e.prototype.eventEmitHandler=function(e){"is-show-outline-change"===e.event&&(this.isShowOutlineFullScreen=e.value,this.isShowOutlineFullScreen&&(document.getElementById("scrollParentOutline").hidden=!1,window.hwa("trackStructEvent",{label:"\u6f14\u793a\u6a21\u5f0f-\u6587\u7ae0\u5927\u7eb2"}))),"is-font-bigger-change"===e.event&&(this.isFontBigger=e.value,window.hwa("trackStructEvent",{label:this.isFontBigger?"\u6f14\u793a\u6a21\u5f0f-\u5b57\u4f53\u653e\u5927":"\u6f14\u793a\u6a21\u5f0f-\u5b57\u4f53\u8fd8\u539f"}))},e.prototype.closeFullScreenOutline=function(){this.isShowOutlineFullScreen=!1,document.getElementById("scrollParentOutline").hidden=this.isShowOutlineCtrl},e.prototype.hotkey=function(e){var t=this;this.ngZone.run(function(){116==e.keyCode&&e.altKey&&(e.preventDefault(),t.toggleFullScreen())})},e.prototype.coeRelease=function(){this.releasePassModalShow=!0},e.prototype.closeReleasePass=function(){this.releasePassModalShow=!1},e.prototype.confirmReleasePass=function(e){var t=this;this.knowledgeService.confirmCoeRelease({sn:this.sn,target_domain:e.id}).subscribe(function(e){e&&(t.articleDetails.publishStatus=e.publishStatus,t.articleDetails.tragetDomain=e.targetDomain,t.releasePassModalShow=!1)},function(){})},e.prototype.coeReleaseLogic=function(){this.articleDetails.is_chg_visibility&&(this.isReleasePublish=!0),this.articleDetails.tragetDomain&&this.articleDetails.coeGroupUser&&0===this.articleDetails.publishStatus&&(this.isReleasePublish=!1,this.isReleaseExamine=!0),this.getIsCanCoeRelease()},e.prototype.getIsCanCoeRelease=function(){var e=this;this.knowledgeService.getShowCoeResult({resource:"knowledge:coe",domainId:this.articleDetails.assigned_domain.id}).subscribe(function(t){e.isCanCoeRelease=t},function(){})},e.prototype.releasePass=function(){this.isReleaseExamine=!1,this.isReleasePublish=!1,!this.isCoe||this.isShowFunction.editFrom?this.currentDomainId&&this.articleDetails.kanban_id===this.releaseTarget.kanban&&this.isShowFunction.visibilityConfig&&!this.isShareWiki&&(this.articleDetails.assigned_domain.id===this.currentDomainId&&this.currentDomainId!==this.releaseTarget.domain&&this.articleDetails.is_chg_visibility?this.isReleasePublish=!0:this.articleDetails.assigned_domain.id!==this.currentDomainId&&this.currentDomainId===this.releaseTarget.domain&&(this.isReleaseExamine=!0),this.getReleaseExamineMenbers()):this.coeReleaseLogic()},e.prototype.getReleaseExamineMenbers=function(){var e=this;this.spaceMemberService.getSpaceMember(this.releaseTarget.domain).subscribe(function(t){t&&t.length&&(e.releaseExamineMenbers=t.filter(function(e){return"Admin"===e.role.title}))},function(){})},e.prototype.releaseCancle=function(){document.body.click()},e.prototype.toReleaseArticle=function(e,t){var n=this;if(this.isCoe)this.coeApproveRelease(e);else if(this.articleDetails.visibility===this.articlePublicStatus){var i={wiki_sn:this.sn,target_domain:this.releaseTarget.domain,target_kanban:this.releaseTarget.kanban,publish_status:this.releaseTarget[e]};"rejects"===e&&(i.reject_reason=this.refuseContent),"passing"===e&&(i.parent_sn=t.parentObj.sn),this.knowledgeService.toReleaseArticle(i).subscribe(function(t){t&&(t.visibility===n.articlePublicStatus?(n.articleDetails.publishStatus=t.status,"rejects"===e&&(n.articleDetails.rejectReason=n.refuseContent),"passing"===e&&n.showReleaseCategoryModel&&(n.showReleaseCategoryModel=!1),n.emitService.emit({type:"wiki:release-article-success",sn:n.sn})):n.notification.warning(n.translate.instant("TIPS"),n.translate.instant("-18031")))},function(){})}},e.prototype.coeApproveRelease=function(e){var t=this;if(this.isCanCoeRelease){var n={wiki_sn:this.sn,target_domain:this.articleDetails.tragetDomain,publish_status:{rejects:-1,release:0,passing:1}[e]};"rejects"===e&&(n.reject_reason=this.refuseContent),this.knowledgeService.toReleaseCoeArticle(n).subscribe(function(n){n&&(t.articleDetails.publishStatus=n.status,"rejects"===e&&(t.articleDetails.rejectReason=t.refuseContent))},function(){})}},e.prototype.approveRelease=function(){this.isCoe?this.coeApproveRelease("passing"):this.showReleaseCategoryModel=!0},e.prototype.getCategoryConfirmFunc=function(e){this.toReleaseArticle("passing",e)},e.prototype.getCategoryModelShowCtrl=function(e){this.showReleaseCategoryModel=!1},e.prototype.closeKanbanEvent=function(){this.associatedWorkitemCtrl=!1},e.prototype.workItemReviewShare=function(){var e;this.articleDetailsShare.number=null===(e=this.isShowFunction)||void 0===e?void 0:e.number,this.articleDetailsShare.category="workitem-review",this.espaceShareCtrl=!0},e.prototype.startReview=function(){this.sreOperateAccess&&this.sreStatusFlow&&(this.sreStatusFlow.isRetryReview=!0,this.sreStatusFlow.initiateCountersignCtrl=!0)},e.prototype.handleReviewAccess=function(e){this.sreAccess=e},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](o.Compiler),o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](o.ComponentFactoryResolver),o["\u0275\u0275directiveInject"](D.f),o["\u0275\u0275directiveInject"](D.a),o["\u0275\u0275directiveInject"](E.b),o["\u0275\u0275directiveInject"](E.a),o["\u0275\u0275directiveInject"](A.c),o["\u0275\u0275directiveInject"](z.d),o["\u0275\u0275directiveInject"](R.a),o["\u0275\u0275directiveInject"](L.b),o["\u0275\u0275directiveInject"](N.e),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](C),o["\u0275\u0275directiveInject"](j.a),o["\u0275\u0275directiveInject"](V.a),o["\u0275\u0275directiveInject"](o.NgZone),o["\u0275\u0275directiveInject"](E.c))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["main-content"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](zi,1),o["\u0275\u0275viewQuery"](Ri,1),o["\u0275\u0275viewQuery"](Li,1),o["\u0275\u0275viewQuery"](Ni,1),o["\u0275\u0275viewQuery"](ji,1,o.ViewContainerRef)),2&e){var n=void 0;o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.tagManager=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.wikiUpdateTipsTemplateRef=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.luckysheet=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.sreStatusFlow=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.wikiKanban=n.first)}},inputs:{domainId:"domainId",sn:"sn",selectCategory:"selectCategory",wikiShowFunction:"wikiShowFunction"},outputs:{eventOutput:"eventOutput"},features:[o["\u0275\u0275ProvidersFeature"]([E.b,C])],decls:56,vars:38,consts:[["class","right-content","id","wiki-detail",3,"ngStyle",4,"ngIf"],["class","empty-conetnt",4,"ngIf"],["wikiLockedTips",""],["collabTips",""],["wikiUpdateTips",""],["releaseArticle","nzDropdownMenu"],[1,"release-tip-box","p-10"],[1,"release-tip-tile"],[1,"iconfont","icon-delete-member","m-r-5"],[1,"release-tip-text","m-t-10","p-l-20"],[1,"release-tip-foot","m-t-20"],["type","button",1,"f-14","cancel-btn-styl","m-r-10",3,"textContent","click"],["type","button",1,"f-14","confirm-btn-styl",3,"textContent","click"],["releaseTip","nzDropdownMenu"],[1,"iconfont","icon-exclamation-triangle","m-r-5"],[4,"ngIf"],["releaseRefuse","nzDropdownMenu"],[1,"release-refuse-box","p-10"],[1,"release-refuse-tile","f-14"],["rows","6",1,"m-t-10","ant-input",3,"placeholder","ngModel","ngModelChange"],[1,"release-refuse-foot","m-t-20","t-a-r"],["hotDotPopoverList",""],["id","wiki-detail",1,"right-content",3,"ngStyle"],["class","loading-style",4,"ngIf"],["class","wiki-content-wrapper",4,"ngIf"],[3,"wiki-content-wrapper","jumpNewUrl","articelInfo","catagoriedArr",4,"ngIf"],["class","comment-wrapper",3,"ngStyle",4,"ngIf"],["class","revision-detail-wrapper",4,"ngIf"],["nzWrapClassName","model-show-release-category",3,"nzVisible","nzClosable","nzFooter","nzWidth","nzVisibleChange"],["style","width: 492px; height: 600px",4,"ngIf"],[1,"loading-style"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading",1,"icon-style"],[1,"wiki-content-wrapper"],[1,"content-article-header"],["style","width:100%",3,"navigatioList","activeSn","haveSave","category","clickEmit",4,"ngIf"],[1,"knowledge-nav-right","fixed-box-styl","m-r-10"],["class","btn-group m-l-8",3,"click",4,"ngIf"],[3,"hidden",4,"ngIf"],["menu5","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],[1,"i-margin-right10","icon-color","icon-font-size14","fa","fa-file-text-o"],[3,"textContent"],[1,"i-margin-right10","icon-color","icon-font-size13","iconfont","icon-word"],[3,"parentNode","sn","kanBanId","currentDomain","closeCallback",4,"ngIf"],["menu4","nzDropdownMenu"],["nz-menu-item","",1,"dropdown-override-li-styl",3,"click"],[1,"hover-styl"],[1,"icon-title-wrapper"],[1,"icon-font-size18","iconfont","espace","icon-espace"],[1,"dropdown-share-title"],[1,"desc-span-styl"],[1,"margin-white-space",3,"textContent"],["class","dropdown-override-li-styl dropdown-override-li-styl-disable","nz-menu-item","","nz-tooltip","","nzTooltipPlacement","bottom","nzTooltipTrigger","hover","nzTooltipTitle","Coming Soon",4,"ngIf"],["operate","nzDropdownMenu"],["nz-menu","",1,"m-t-10"],["class","operate-item switch-item","nz-popover","",3,"nzPopoverVisible","nzPopoverContent","nzPopoverPlacement","nzPopoverTrigger","nzPopoverVisibleChange",4,"ngIf"],["class","operate-item switch-item",4,"ngIf"],["class","operate-item wide-mode-tips",3,"textContent",4,"ngIf"],["nz-menu-item","","class","operate-item",3,"click",4,"ngIf"],["nz-menu-item","","class","operate-item",3,"title","class","click",4,"ngIf"],["nz-menu-item","","class","operate-item",3,"class","title","click",4,"ngIf"],["nz-menu-item","","class","operate-item position-r",3,"class","title","click",4,"ngIf"],[3,"currentDomain","articleDetail","closeReleasePass","confirmReleasePass",4,"ngIf"],[3,"currentDomain","sn","shareTipContent","titleDesc","currentUserId","shareDetail","modelShowCloseChange","shareDetailChange",4,"ngIf"],[3,"currentDomain","sn","currentUserId","shareDetail","isCreateCountersign","modelShowCloseChange","shareDetailChange",4,"ngIf"],[3,"articleDetail","domainId","modelShowCloseChange","articleDetailChange",4,"ngIf"],["class","file-list-body position-a",4,"ngIf"],["class","content-excel-body ov-a",3,"hidden",4,"ngIf"],["id","scrollParentArticle","class","content-article-body ov-a position-r",3,"ngStyle","hidden","class","dblclick","scroll","mouseover","mouseout","selectstart",4,"ngIf"],["wikiKanban",""],[2,"width","100%",3,"navigatioList","activeSn","haveSave","category","clickEmit"],[3,"articleDetail","isShowHistory","showHistory",4,"ngIf"],[3,"articleDetail","isShowHistory","showHistory"],[1,"btn-group","m-l-8",3,"click"],[1,"m-l-xs","btn","btn-xs","btn-info"],[1,"fa","fa-eye","p-r-5"],[1,"iconfont","icon-close","p-r-5"],[3,"hidden"],["class","type-document",4,"ngIf"],["class","type-deleted",4,"ngIf"],[1,"type-document"],[4,"ngIf","ngIfElse"],["lockEditIcon",""],["class","icon-edit-btn icon-items",3,"click",4,"ngIf"],["class","less-top",4,"ngIf"],["class","icon-items full-screen-btn",3,"textContent","click",4,"ngIf"],["class","icon-items full-screen-btn icon-deploy-btn",3,"click",4,"ngIf"],["class","icon-items full-screen-btn",3,"class","textContent","click",4,"ngIf"],[3,"title","click",4,"ngIf"],[1,"icon-items","cursor-pointer","ml-16",3,"title","click"],[1,"iconfont","f-18"],["class","icon-items pointer-cursor ml-16",3,"title","click",4,"ngIf"],["class","icon-items ml-16",3,"title","click",4,"ngIf"],["class","icon-items ml-16","style","cursor: default",3,"title","click",4,"ngIf"],["class","iconfont icon-plus icon-items ml-16 pr-top1-style","nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu",4,"ngIf"],["class","iconfont icon-more icon-items icon-color ml-16 pr-top1-style wiki-more-btn","nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu","click","nzVisibleChange",4,"ngIf"],["class","red-warning red-circle magazine-tips",4,"ngIf"],["class","iconfont icon-minimize icon-items icon-color",3,"click",4,"ngIf"],["class","icon-edit-btn icon-items","nz-tooltip","",3,"disabled","pointerEvents","nzTooltipOverlayClassName","nzTooltipTitle","nzTooltipTrigger","nzTooltipVisible","nzTooltipPlacement","click",4,"ngIf"],["nz-tooltip","",1,"icon-edit-btn","icon-items",3,"nzTooltipOverlayClassName","nzTooltipTitle","nzTooltipTrigger","nzTooltipVisible","nzTooltipPlacement","click"],["class","icon-edit-btn icon-items","nz-tooltip","",3,"nzTooltipOverlayClassName","nzTooltipTitle","nzTooltipTrigger","nzTooltipVisible","nzTooltipPlacement","click",4,"ngIf"],[1,"icon-edit-btn","icon-items",3,"click"],[1,"less-top"],[3,"articleDetails","currentDomainInfo","reviewAccessEmmiter"],["sreStatusFlow",""],[1,"icon-items","full-screen-btn",3,"textContent","click"],["disabledRelease",""],["nz-dropdown","","nzTrigger","click",1,"icon-items","release-item","article-release-btn","f-14",3,"nzPlacement","nzDropdownMenu"],[1,"m-r-15","iconfont","icon-paper-plane","f-14"],[1,"f-14","release-title"],[1,"icon-items","release-item","article-release-btn","f-14",3,"click"],[1,"icon-items","f-14","release-item","release-state-btn","disabled"],[1,"f-14","release-state-title"],["nz-dropdown","","nzTrigger","click",1,"icon-items","f-14","release-item","release-refuse-btn",3,"nzPlacement","nzDropdownMenu"],[1,"icon-items","f-14","release-item","release-approve-btn",3,"click"],[1,"icon-items","full-screen-btn","icon-deploy-btn",3,"click"],[1,"fz-14","item-deploy-span"],[3,"title","click"],["nz-dropdown","","nzTrigger","click",1,"iconfont","icon-share","icon-items","ml-16",3,"nzDropdownMenu"],[1,"icon-items","pointer-cursor","ml-16",3,"title","click"],[1,"iconfont","f-18","icon-comment-outline","pr-top2-style"],[1,"fz-14"],[1,"iconfont","f-18","icon-deploy","pr-top1-style"],[1,"icon-items","ml-16",3,"title","click"],[1,"iconfont","f-18","icon-thumbup-outline","pr-top1-style"],[1,"icon-items","ml-16",2,"cursor","default",3,"title","click"],[1,"iconfont","icon-eye","f-14"],["class","iconfont icon-xing f-20",4,"ngIf","ngIfElse"],["normalFavorite",""],[1,"iconfont","icon-xing","f-20"],[1,"iconfont","icon-xing1","f-20"],["nz-dropdown","","nzTrigger","click",1,"iconfont","icon-plus","icon-items","ml-16","pr-top1-style",3,"nzDropdownMenu"],["nz-dropdown","","nzTrigger","click",1,"iconfont","icon-more","icon-items","icon-color","ml-16","pr-top1-style","wiki-more-btn",3,"nzDropdownMenu","click","nzVisibleChange"],[1,"red-warning","red-circle","magazine-tips"],[1,"iconfont","icon-minimize","icon-items","icon-color",3,"click"],[1,"type-deleted"],[1,"recover-btn",3,"click"],[1,"iconfont","icon-back"],[1,"deleted-btn",3,"click"],[1,"i-margin-right10","icon-color","icon-font-size14","fa","fa-trash-o"],[3,"parentNode","sn","kanBanId","currentDomain","closeCallback"],["nz-menu-item","","nz-tooltip","","nzTooltipPlacement","bottom","nzTooltipTrigger","hover","nzTooltipTitle","Coming Soon",1,"dropdown-override-li-styl","dropdown-override-li-styl-disable"],[1,"hover-styl",3,"click"],[1,"icon-font-size18","fa","fa-envelope"],[1,"margin-white-space","more-word-wrapper",3,"textContent"],["nz-popover","",1,"operate-item","switch-item",3,"nzPopoverVisible","nzPopoverContent","nzPopoverPlacement","nzPopoverTrigger","nzPopoverVisibleChange"],[1,"operate-text","m-r-10",3,"textContent"],["nz-menu-item","",1,"switch-style"],["nzSize","small",3,"ngModel","ngModelChange"],[1,"operate-item","switch-item"],[1,"operate-item","wide-mode-tips",3,"textContent"],["nz-menu-item","",1,"operate-item",3,"click"],[1,"m-r-10","iconfont","icon-revisions"],[1,"operate-text",3,"textContent"],[1,"m-r-10","iconfont","icon-article-history"],[1,"m-r-10","iconfont","icon-lock","icon-lock-styl"],["nz-menu-item","",1,"operate-item",3,"title","click"],[1,"m-r-10","iconfont","icon-template","template-icon-styl"],[1,"m-r-10","iconfont","icon-doc-preview","more-left-countersign"],["nz-menu-item","",1,"operate-item","position-r",3,"title","click"],[1,"m-r-10","iconfont","icon-lock","more-left-countersign"],[1,"m-r-10","iconfont","icon-export"],[1,"operate-text"],[1,"m-r-10","iconfont","icon-delete"],["nzWrapClassName","access-control-modal",3,"nzVisible","nzClosable","nzFooter","nzWidth"],[2,"width","600px","height","100%"],["visibilityEditModel","udpate-article",3,"articleDetails","closeCallback"],[3,"currentDomain","articleDetail","closeReleasePass","confirmReleasePass"],[3,"currentDomain","sn","shareTipContent","titleDesc","currentUserId","shareDetail","modelShowCloseChange","shareDetailChange"],[3,"currentDomain","sn","currentUserId","shareDetail","isCreateCountersign","modelShowCloseChange","shareDetailChange"],[3,"articleDetail","domainId","modelShowCloseChange","articleDetailChange"],[1,"file-list-body","position-a"],[3,"fileDetails","hiddenShowFileDetail","getArticleDetails"],[1,"content-excel-body","ov-a",3,"hidden"],[3,"container","model","articleInfo","sn","fullScreenCtrl","eventEmitter"],["luckysheet",""],["id","luckysheet",1,"luckysheet-container"],["id","scrollParentArticle",1,"content-article-body","ov-a","position-r",3,"ngStyle","hidden","dblclick","scroll","mouseover","mouseout","selectstart"],["renderScrollIn",""],["class","outline-close-tip",4,"ngIf"],[1,"article-outline-show-wrapper"],["id","scrollParentOutline",3,"hidden","reserve-span-show","article-outline-style",4,"ngIf"],["class","article-outline-hidden-wrapper",3,"hidden",4,"ngIf"],["class","article-hidden-wrapper",4,"ngIf"],["id","topPositionArticle",1,"top-position-styl"],[1,"flex-box","artical-area"],["id","articleCon",3,"ngStyle"],[1,"article-countersign"],[3,"sn","coutersignInfo","shareDetail","isSreWiki","coutersignInfoChange","shareDetailChange","updateJudgeList","refreshInfo"],["class","article-wikiId",3,"click",4,"ngIf"],["id","wikiArticleTitleId",1,"article-title"],[1,"tag-list"],["class","classify-label-item",4,"ngIf"],[3,"wikiId","isCoe"],["tagManager",""],["class","doc-render-area","id","contentWrapper",3,"none-annotation-bg",4,"ngIf"],["class","doc-attr-oreration",3,"class",4,"ngIf"],["class","float-comment-button pointer-cursor",3,"hidden","click",4,"ngIf"],[3,"sn","reversionJump",4,"ngIf"],["class","content-file-body",4,"ngIf"],["class","article-outline-filling-wrapper",3,"hidden",4,"ngIf"],["id","bottomPositionArticle",1,"top-position-styl"],[3,"collaboration","model","articleTitle","articleUiSource","articleDescription","categoryId","currentDomain","sn","id","creatorId","dictionaryId","fullScreenCtrl","articleDetails","parentSn","fullScreenZoomSize","visibilityEditModel","createFrom","showVisibilityEdit","reopen",4,"ngIf"],[3,"model","currentDomain","sn","category","id","categoryId","currentDomainInfo","creatorId","dictionaryId","hidden","parentSn","fullScreenCtrl","articleDetails","workitemList","fullScreenZoomSize","wikiEditFunction",4,"ngIf"],[3,"model","currentDomain","currentDomainInfo","articleDetails","fullScreenCtrl","fullScreenZoomSize",4,"ngIf"],["class","annotation-item-wrapper",3,"ngStyle",4,"ngIf"],["class","doodle-tool-wrapper",3,"ngStyle",4,"ngIf"],[1,"article-wikiId",3,"click"],["class","feture-be-deleted",4,"ngIf"],[1,"feture-be-deleted"],[1,"classify-label-item"],[1,"classify-label-bg",2,"background-color","rgb(236, 126, 105)"],[1,"classify-label-item-arrow"],[2,"color","rgb(236, 126, 105)"],["id","contentWrapper",1,"doc-render-area"],["noneAnnotationBg","",3,"docContent","docType","configInfo","scrollInEL","fromVision","classify","openAnnotation","openDesensitization","workitemInfo","id","domId","fullScreenCtrl","isNeedRemoveBg","imgLoaded",4,"ngFor","ngForOf"],["noneAnnotationBg","",3,"docContent","docType","configInfo","scrollInEL","fromVision","classify","openAnnotation","openDesensitization","workitemInfo","id","domId","fullScreenCtrl","isNeedRemoveBg","imgLoaded"],[1,"doc-attr-oreration"],["nz-dropdown","","nzTrigger","click","class","doc-icon-items cursor-pointer",3,"nzDropdownMenu","click",4,"ngIf"],[1,"doc-icon-items","cursor-pointer",3,"click"],[1,"iconfont"],["class","doc-icon-items cursor-pointer",3,"click",4,"ngIf"],["nz-dropdown","","nzTrigger","click",1,"doc-icon-items","cursor-pointer",3,"nzDropdownMenu","click"],[1,"iconfont","icon-share","icon-items"],[1,"margin4-span-styl"],[1,"iconfont","icon-thumbup-outline"],[1,"like-num"],[1,"float-comment-button","pointer-cursor",3,"hidden","click"],[1,"iconfont","icon-comment-left-tail"],[3,"sn","reversionJump"],[1,"content-file-body"],[3,"fileDetails","category","handleShowFileDetail","getArticleDetails","folderEditSuccess"],[1,"article-outline-filling-wrapper",3,"hidden"],[1,"article-outline-filling"],[3,"collaboration","model","articleTitle","articleUiSource","articleDescription","categoryId","currentDomain","sn","id","creatorId","dictionaryId","fullScreenCtrl","articleDetails","parentSn","fullScreenZoomSize","visibilityEditModel","createFrom","showVisibilityEdit","reopen"],[3,"model","currentDomain","sn","category","id","categoryId","currentDomainInfo","creatorId","dictionaryId","hidden","parentSn","fullScreenCtrl","articleDetails","workitemList","fullScreenZoomSize","wikiEditFunction"],[3,"model","currentDomain","currentDomainInfo","articleDetails","fullScreenCtrl","fullScreenZoomSize"],[1,"annotation-item-wrapper",3,"ngStyle"],["clickElementOutside","",3,"item","creatorId","clickOutside"],[1,"doodle-tool-wrapper",3,"ngStyle"],[3,"isShowOutline","eventEmit"],[1,"outline-close-tip"],[1,"iconfont","icon-close",3,"click"],["id","scrollParentOutline",3,"hidden"],["id","topPositionOutline",1,"top-position-styl"],[3,"origin","needBorder","desLevel"],["id","bottomPositionOutline",1,"top-position-styl"],[1,"article-outline-hidden-wrapper",3,"hidden"],["nz-tooltip","",1,"reserve-span-styl","reserve-span-show",3,"ngStyle","nzTooltipPlacement","nzTooltipTitle","click"],[1,"iconfont","real-icon-styl"],[1,"article-hidden-wrapper"],["class","outline-style",3,"active-li-styl","ngStyle",4,"ngFor","ngForOf"],[1,"outline-style",3,"ngStyle"],[3,"jumpNewUrl","articelInfo","catagoriedArr"],[1,"comment-wrapper",3,"ngStyle"],[3,"isCoe","creatorId","commentParam","articleId","currentDomain","sn","isEventReport","close","refreshNum"],[3,"isShowRevisionAndHistory","showHistoryType","articleDetails","currentCategory","entity_sn","activeRervsionItem","isTable","closeHistoryModal"],[3,"editorParams","closeTemplateModal"],[1,"revision-detail-wrapper"],[3,"currentDomain","baselineCtrl","saveRevision"],[2,"width","492px","height","600px"],[1,"modal-position-relative",3,"currentDomain","currentCategory","disabledNode","tipInfo","modelShowCloseChange","modelShowVariableChange"],[1,"empty-conetnt"],[1,"iconfont","icon-quanxian","icon-quanxian-styl"],[1,"empty-exp"],[1,"locking-tip-box",3,"ngStyle"],[1,"tip-title"],[1,"tip-button"],["nz-button","",3,"click"],["class","wait-collab-tips",3,"ngStyle",4,"ngIf"],["class","locking-tip-box",3,"ngStyle",4,"ngIf"],[1,"wait-collab-tips",3,"ngStyle"],[1,"reload-tips"],[1,"tip-left"],[1,"iconfont","icon-warning","icon"],[1,"tip-right"],[1,"tip-content"],[1,"tip-buttons"],["nz-button","",1,"reload",3,"click"],[4,"ngFor","ngForOf"],[1,"menu-popover-list"],[1,"menu-popover-content","m-b-10"],[1,"menu-popover-div","f-14","cur-pointer"],["nz-button","","nzType","primary",1,"menu-popover-help","p-r",3,"click"],["nz-button","","nzType","primary",1,"menu-popover-submit","p-r","m-l-10",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,jr,11,14,"div",0),o["\u0275\u0275template"](1,Vr,6,7,"div",1),o["\u0275\u0275template"](2,Br,9,11,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](4,Hr,2,2,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](6,Gr,14,9,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementStart"](8,"nz-dropdown-menu",null,5),o["\u0275\u0275elementStart"](10,"div",6),o["\u0275\u0275elementStart"](11,"div",7),o["\u0275\u0275element"](12,"i",8),o["\u0275\u0275elementStart"](13,"span"),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"span",9),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",10),o["\u0275\u0275elementStart"](20,"button",11),o["\u0275\u0275listener"]("click",function(){return t.releaseCancle()}),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"button",12),o["\u0275\u0275listener"]("click",function(){return t.accessControlShowFunc()}),o["\u0275\u0275pipe"](23,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"nz-dropdown-menu",null,13),o["\u0275\u0275elementStart"](26,"div",6),o["\u0275\u0275elementStart"](27,"div",7),o["\u0275\u0275element"](28,"i",14),o["\u0275\u0275elementStart"](29,"span"),o["\u0275\u0275text"](30),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"span",9),o["\u0275\u0275template"](33,Kr,4,1,"ng-container",15),o["\u0275\u0275template"](34,Qr,4,1,"ng-container",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](35,"div",10),o["\u0275\u0275elementStart"](36,"button",11),o["\u0275\u0275listener"]("click",function(){return t.releaseCancle()}),o["\u0275\u0275pipe"](37,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](38,"button",12),o["\u0275\u0275listener"]("click",function(){return t.toReleaseArticle("release")}),o["\u0275\u0275pipe"](39,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](40,"nz-dropdown-menu",null,16),o["\u0275\u0275elementStart"](42,"div",17),o["\u0275\u0275elementStart"](43,"div",18),o["\u0275\u0275elementStart"](44,"span"),o["\u0275\u0275text"](45),o["\u0275\u0275pipe"](46,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](47,"textarea",19),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.refuseContent=e}),o["\u0275\u0275pipe"](48,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](49,"div",20),o["\u0275\u0275elementStart"](50,"button",11),o["\u0275\u0275listener"]("click",function(){return t.releaseCancle()}),o["\u0275\u0275pipe"](51,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](52,"button",12),o["\u0275\u0275listener"]("click",function(){return t.toReleaseArticle("rejects")}),o["\u0275\u0275pipe"](53,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](54,Jr,11,9,"ng-template",null,21,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275property"]("ngIf",!t.noPermisssion),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.noPermisssion),o["\u0275\u0275advance"](13),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](15,16,"RELEASE_NO_PUBLISH")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,18,"RELEASE_NO_SET_PUBLISH")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](21,20,"COMMON_BUTTON_CANCLE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](23,22,"CLICK_SETTING")),o["\u0275\u0275advance"](8),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](31,24,"IS_TO_RELEASE")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf","en"!==t.curLanguage),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","en"===t.curLanguage),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](37,26,"COMMON_BUTTON_CANCLE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](39,28,"COMMON_BUTTON_CONFIRM")),o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](46,30,"REJECTION_REASON")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](48,32,"ENTER_REJECTION_REASON"))("ngModel",t.refuseContent),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](51,34,"COMMON_BUTTON_CANCLE")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("textContent",o["\u0275\u0275pipeBind1"](53,36,"COMMON_BTN_SUBMIT")))},directives:[F.n,B.d,U.d,U.k,U.l,F.o,z.a,D.j,W.a,H.a,G.a,q.c,q.e,$.a,ve,X.d,Te,B.b,De.a,Ae.a,ze.a,Re.a,je,Ve.a,Ct,zt,qt,$t.a,tn,nn.a,F.m,bn,Cn,Sn,An,zn.a,Rn.a,Ln.a,Nn.a,qe.a,jn,Vn.a,Xn,Yn.a,Mi,Ii,ki.a,Ti.a,Di.a,Ai.a],pipes:[A.b],styles:['.locking-tip-box[_ngcontent-%COMP%]{width:280px;background-color:#fff;padding:16px;display:flex;flex-direction:column;justify-content:space-between;border-radius:4px;box-shadow:0 0 6px rgba(0,0,0,.14);position:relative}.locking-tip-box[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%]{color:#5f5f5f;font-size:16px;margin-right:8px}.locking-tip-box[_ngcontent-%COMP%]   .tip-button[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:row-reverse}.locking-tip-box[_ngcontent-%COMP%]   .tip-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;font-size:14px;color:#fff;background-color:#23c6c8;border:none;padding:0 9px;height:28px}.locking-tip-box[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;color:rgba(0,0,0,.45);padding:8px;top:0;right:0}  .locking-tooltip .ant-tooltip-arrow .ant-tooltip-arrow-content{background-color:#fff}  .locking-tooltip .ant-tooltip-inner{padding:0;background-color:#fff;box-shadow:none}.reload-tips[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]{display:flex;padding:16px}.reload-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]{margin-right:12px;flex:0 0 auto}.reload-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:20px;color:#fa0}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]{flex:1 1 auto}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-title[_ngcontent-%COMP%]{font-size:16px;color:#333}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-content[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-content[_ngcontent-%COMP%]{color:#5f5f5f;font-size:14px;margin:8px 0}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:28px;line-height:28px;border-radius:4px;padding:0 11px;margin-right:12px}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.cancle[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.cancle[_ngcontent-%COMP%]{color:#23c6c8;border-color:#23c6c8}.reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.reload[_ngcontent-%COMP%], .reload-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.save-quit[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.reload[_ngcontent-%COMP%], .unlock-tips[_ngcontent-%COMP%]   .tip-right[_ngcontent-%COMP%]   .tip-buttons[_ngcontent-%COMP%]   button.save-quit[_ngcontent-%COMP%]{color:#fff;border:none;background-color:#23c6c8}.wait-collab-tips[_ngcontent-%COMP%]{color:#5f5f5f;padding:18px 16px;background-color:#fff;font-size:12px;box-shadow:0 0 6px rgba(0,0,0,.14);border-radius:4px}  .notification-box.ant-notification-notice{padding:0}.wiki-content-wrapper[_ngcontent-%COMP%]{padding-top:16px;position:relative;height:100%}.ant-select-selection--multiple[_ngcontent-%COMP%]   .ant-select-selection__rendered[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%], .ant-select-selection--multiple[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{height:24px;margin-top:3px;line-height:22px;max-width:170px}.text-ellipsis[_ngcontent-%COMP%]{word-break:break-all;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.m-t-10[_ngcontent-%COMP%]{margin-top:10px}.m-r-10[_ngcontent-%COMP%]{margin-right:10px}.operate-item[_ngcontent-%COMP%]{width:180px;padding:8px 12px 8px 15px;display:flex;align-items:center}.operate-item[_ngcontent-%COMP%]   .template-icon-styl[_ngcontent-%COMP%]{font-size:16px;position:relative;margin-right:9px}.operate-item[_ngcontent-%COMP%]   .more-left-countersign[_ngcontent-%COMP%]{margin-left:-2px}.operate-item[_ngcontent-%COMP%]   .icon-lock-styl[_ngcontent-%COMP%]{font-size:17px;position:relative;left:-2px;margin-right:8px}.wide-mode-tips[_ngcontent-%COMP%]{color:#999;padding:0 12px 8px 15px;border-bottom:1px solid #e8e8e8;font-size:12px}.switch-item[_ngcontent-%COMP%]{justify-content:space-between}.switch-style[_ngcontent-%COMP%]{position:relative;top:-3px;left:12px}.switch-style[_ngcontent-%COMP%]:hover{background-color:#fff}.content-article[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]     .md-editor>textarea{background:#fff}[_nghost-%COMP%]     .md-editor>.md-header{background:#fff}[_nghost-%COMP%]     .content-article-body a{color:#23c6c8}[_nghost-%COMP%]     .vditor-reset h1, [_nghost-%COMP%]     .vditor-reset h2{border-bottom:0}[_nghost-%COMP%]     .vditor-reset p{margin-bottom:0}  .model-show-release-category .content-container{height:calc(100% - 80px)!important}  .model-show-release-category .ant-modal-body{padding:0!important}.artical-area[_ngcontent-%COMP%]{font-size:16px;color:#494949;line-height:1.75}.artical-area[_ngcontent-%COMP%]   .artical[_ngcontent-%COMP%], .artical-area[_ngcontent-%COMP%]   .wide-artical[_ngcontent-%COMP%]{width:100%;overflow-x:hidden;padding:0 50px}.artical-area[_ngcontent-%COMP%]   .artical[_ngcontent-%COMP%]::-webkit-scrollbar, .artical-area[_ngcontent-%COMP%]   .wide-artical[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important}.artical-area[_ngcontent-%COMP%]   .article-outline-filling-wrapper[_ngcontent-%COMP%]{flex:0 0 auto}.artical[_ngcontent-%COMP%]     .render-wrapper>*{max-width:760px;margin:auto!important}.artical[_ngcontent-%COMP%]     .render-wrapper .width-table{max-width:100%!important}.artical[_ngcontent-%COMP%]     .artical-wide-mode{max-width:760px;margin:auto}.article-padding-style[_ngcontent-%COMP%]{padding-right:42px}@media screen and (min-width:830px) and (max-width:1600px){.wide-artical[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width:830px){.artical[_ngcontent-%COMP%], .wide-artical[_ngcontent-%COMP%]{width:100%}}[_nghost-%COMP%]     .content-article-body pre{word-break:normal;white-space:pre-wrap}.content-excel-body[_ngcontent-%COMP%]{position:absolute;top:62px;bottom:0;left:0;right:0}.content-article-body[_ngcontent-%COMP%]{padding:10px 0 20px;margin-top:20px;height:calc(100% - 53px);word-break:break-word}.content-article-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.content-article-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;background-color:#aaa}.content-article-body[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#ededed;border-radius:10px}.content-article-body[_ngcontent-%COMP%]   .article-wikiId[_ngcontent-%COMP%]{font-size:14px;color:#23c6c8;text-decoration:underline;cursor:pointer}.content-article-body[_ngcontent-%COMP%]   .article-wikiId[_ngcontent-%COMP%]   .feture-be-deleted[_ngcontent-%COMP%]{color:#666}.content-article-body[_ngcontent-%COMP%]   .article-title[_ngcontent-%COMP%]{font-weight:700;font-size:32px;margin-bottom:12px;margin-top:8px;text-align:left;color:#434343}.content-article-body[_ngcontent-%COMP%]   .article-title-full-screen[_ngcontent-%COMP%]{margin-top:70px}.content-article-body[_ngcontent-%COMP%]   .doc-attr-oreration[_ngcontent-%COMP%]{margin-top:30px}.content-article-body[_ngcontent-%COMP%]   .doc-attr-oreration[_ngcontent-%COMP%]   .icon-thumbup-active[_ngcontent-%COMP%]{color:#23c6c8}.content-article-body[_ngcontent-%COMP%]   .doc-attr-oreration[_ngcontent-%COMP%]   .icon-xing1[_ngcontent-%COMP%]{color:#eead0e}.content-article-body[_ngcontent-%COMP%]   .doc-attr-oreration[_ngcontent-%COMP%]   .doc-icon-items[_ngcontent-%COMP%]{margin-right:24px;color:#999;font-size:14px}.content-article-body[_ngcontent-%COMP%]   .doc-attr-oreration[_ngcontent-%COMP%]   .doc-icon-items[_ngcontent-%COMP%]   .like-num[_ngcontent-%COMP%]{margin-left:4px}.content-article-body[_ngcontent-%COMP%]   .doc-attr-oreration[_ngcontent-%COMP%]   .doc-icon-items[_ngcontent-%COMP%]:hover{color:#23c6c8}.content-article-body[_ngcontent-%COMP%]   .doc-attr-oreration[_ngcontent-%COMP%]   .doc-icon-items[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{font-size:18px;margin-right:8px;position:relative;top:1px}.content-article-body[_ngcontent-%COMP%]   .float-comment-button[_ngcontent-%COMP%]{width:60px;height:60px;background-color:#f2f2f2;position:fixed;bottom:33px;right:57px;border-radius:50%;text-align:center}.content-article-body[_ngcontent-%COMP%]   .float-comment-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px;color:rgba(85,85,85,.33);line-height:62px}.content-article-body[_ngcontent-%COMP%]   .article-outline-filling-wrapper[_ngcontent-%COMP%]{height:100%}.content-article-body[_ngcontent-%COMP%]   .article-outline-filling-wrapper[_ngcontent-%COMP%]   .article-outline-filling[_ngcontent-%COMP%]{width:280px;height:auto}.content-article-body[_ngcontent-%COMP%]   .doodle-tool-wrapper[_ngcontent-%COMP%]{position:fixed;right:40px;bottom:45px}.editor-full-width[_ngcontent-%COMP%]{width:100%}.top-position-styl[_ngcontent-%COMP%]{width:100%;height:1px;background:#fff}.associated-workitem-body[_ngcontent-%COMP%]{padding-top:20px;padding-left:10px;height:calc(100% - 40px)}.associated-workitem-body[_ngcontent-%COMP%]   .associated-workitem-header[_ngcontent-%COMP%]{height:17px;display:flex;align-items:center;font-size:17px;color:#676a6c}.associated-workitem-body[_ngcontent-%COMP%]   .associated-workitem-header[_ngcontent-%COMP%]   .associated-icon-styl[_ngcontent-%COMP%]{font-size:12px;margin-left:5px;margin-top:-5px;position:relative;top:-3px}.associated-workitem-body[_ngcontent-%COMP%]   .associated-workitem-header[_ngcontent-%COMP%]   .associated-icon-desc[_ngcontent-%COMP%]{margin-left:30px;color:#999;font-size:12px}.i-margin-right10[_ngcontent-%COMP%]{margin-right:10px}.icon-color[_ngcontent-%COMP%]{color:#999}.icon-font-size14[_ngcontent-%COMP%]{font-size:14px}.outline-show-wrapper-style[_ngcontent-%COMP%]{width:288px}.article-outline-show-wrapper[_ngcontent-%COMP%]{max-width:288px;min-height:160px;max-height:calc(100vh - 280px);-ms-overflow-style:none;overflow-y:scroll;position:fixed;right:10px;top:160px;background:#fff;padding:10px 0 10px 10px;border-radius:4px}.article-outline-style[_ngcontent-%COMP%]{min-height:160px;padding:12px;box-shadow:0 0 6px rgba(0,0,0,.08)}.reserve-span-show[_ngcontent-%COMP%]{display:none}.article-outline-show-wrapper[_ngcontent-%COMP%]:hover{width:288px}.article-outline-show-wrapper[_ngcontent-%COMP%]:hover   .reserve-span-show[_ngcontent-%COMP%]{display:block}.article-outline-show-wrapper[_ngcontent-%COMP%]:hover   .article-hidden-wrapper[_ngcontent-%COMP%]{display:none}.article-hidden-wrapper[_ngcontent-%COMP%]{display:block;position:fixed;top:165px;right:15px;width:24px;max-height:calc(100vh - 280px);padding:12px 0;color:#e5e5e5;background:#fff;overflow:hidden;z-index:1;cursor:pointer}.outline-style[_ngcontent-%COMP%]{display:flex;height:20px;width:100%;margin-bottom:8px;line-height:20px;font-size:12px;font-weight:400}.outline-style[_ngcontent-%COMP%]:before{content:"";flex:0 0 auto;margin:auto 7px auto 0;height:2px;width:24px;padding-left:1px;background:currentColor}.active-li-styl[_ngcontent-%COMP%]{color:#23c6c8!important}.in-fixed-modal[_ngcontent-%COMP%]{position:relative;top:0;right:0;padding-top:0}.outline-padding-wrapper[_ngcontent-%COMP%]{padding:10px}.outline-shadow[_ngcontent-%COMP%]{top:0;right:0;box-shadow:0 0 12px #999;border:1px solid #eee;position:fixed;height:100vh;padding:0;max-height:100vh;z-index:6;background:#fff}.outline-close-tip[_ngcontent-%COMP%]{width:100%;font-size:18px;color:#5f5f5f;font-weight:700;display:flex;align-items:center;justify-content:space-between;padding:10px;border-bottom:1px solid #eee}.outline-close-tip[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.outline-close-tip[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#23c6c8;cursor:pointer}.article-outline-show-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important}.article-outline-hidden-wrapper[_ngcontent-%COMP%]{width:42px;max-height:calc(100vh - 280px);overflow-y:scroll;position:absolute;right:5px;top:5px;z-index:20;padding-top:10px;padding-bottom:10px;min-height:40px}.article-outline-hidden-wrapper[_ngcontent-%COMP%]   .reserve-span-styl[_ngcontent-%COMP%]{position:absolute;top:8px;left:6px;cursor:pointer;opacity:1!important;z-index:40!important}.article-outline-hidden-wrapper[_ngcontent-%COMP%]   .reserve-span-styl-real[_ngcontent-%COMP%]{transform:rotate(-180deg)}.article-outline-hidden-wrapper[_ngcontent-%COMP%]   .real-icon-styl[_ngcontent-%COMP%]{color:#686868;font-size:16px}.article-outline-hidden-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important}.article-outline-hidden-wrapper-active[_ngcontent-%COMP%]:after{width:2px;height:190px;background:#f2f2f2;content:"";position:absolute;left:21px;bottom:0}.article-outline-hidden-wrapper-active[_ngcontent-%COMP%]:before{width:4px;height:4px;background:#23c6c8;border-radius:50%;content:"";position:absolute;left:20px;top:0}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.show-preview[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important}.content-article-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-left:25px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]{display:flex}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;vertical-align:middle;color:#5f5f5f}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .icon-edit-btn[_ngcontent-%COMP%]{display:inline-block;background-color:#23c6c8;color:#fff;border-radius:4px;width:52px;height:28px;font-size:14px;line-height:28px;text-align:center}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .excel-screen-btn[_ngcontent-%COMP%], .content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .full-screen-btn[_ngcontent-%COMP%]{display:inline-block;padding:0 12px;height:28px;background-color:#fff;border:1px solid #dbdbdb;border-radius:4px;font-size:14px;text-align:center;color:#433434;line-height:28px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .excel-screen-btn[_ngcontent-%COMP%]{width:78px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .release-item[_ngcontent-%COMP%]{display:inline-block;border-radius:4px;height:28px;padding:0 5px;font-size:14px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .article-release-btn[_ngcontent-%COMP%]{border:1px solid #23c6c8;color:#23c6c8;padding-top:3px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .article-release-btn[_ngcontent-%COMP%]   .release-title[_ngcontent-%COMP%]{color:#23c6c8;font-size:14px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .release-state-btn[_ngcontent-%COMP%]{border:1px solid #f8ac59;color:#f8ac59;padding-top:3px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .release-state-btn[_ngcontent-%COMP%]   .release-state-title[_ngcontent-%COMP%]{color:#f8ac59;font-size:14px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .release-refuse-btn[_ngcontent-%COMP%]{border:1px solid #d55;color:#d55;line-height:28px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .release-approve-btn[_ngcontent-%COMP%]{border:1px solid #23c6c8;color:#23c6c8;line-height:28px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .icon-deploy-btn[_ngcontent-%COMP%]{padding:0 16px;color:#23c6c8;border:1px solid #23c6c8}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .icon-deploy-btn[_ngcontent-%COMP%]   .item-deploy-span[_ngcontent-%COMP%]{color:#23c6c8;vertical-align:top}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .icon-items[_ngcontent-%COMP%]{margin-left:12px;cursor:pointer}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .icon-items[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .icon-items[_ngcontent-%COMP%]   .fz-14[_ngcontent-%COMP%]{font-size:14px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .icon-thumbup-active[_ngcontent-%COMP%]{color:#23c6c8}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .icon-favorites-active[_ngcontent-%COMP%]{color:#ffbc00}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .margin4-span-styl[_ngcontent-%COMP%]{margin-left:3px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .icon-xing1[_ngcontent-%COMP%]{color:#eead0e}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .ml-16[_ngcontent-%COMP%]{margin-left:16px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .pr-top1-style[_ngcontent-%COMP%]{position:relative;top:1px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .pr-top2-style[_ngcontent-%COMP%]{position:relative;top:2px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .red-circle[_ngcontent-%COMP%]{position:absolute;width:8px;height:8px;border-radius:50%}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-document[_ngcontent-%COMP%]   .magazine-tips[_ngcontent-%COMP%]{background:red;top:2px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-deleted[_ngcontent-%COMP%]   .recover-btn[_ngcontent-%COMP%]{display:inline-block;border:1px solid #aaa;border-radius:3px;color:#676a6c;padding:0 8px;margin-left:15px;cursor:pointer}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-deleted[_ngcontent-%COMP%]   .recover-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:8px;font-size:13px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-deleted[_ngcontent-%COMP%]   .deleted-btn[_ngcontent-%COMP%]{display:inline-block;border:1px solid #e65a6b;border-radius:3px;color:#e65a6b;padding:0 3px;margin-left:15px;cursor:pointer}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-deleted[_ngcontent-%COMP%]   .deleted-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:8px;font-size:13px}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-directory[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:15px;cursor:pointer}.content-article-header[_ngcontent-%COMP%]   .knowledge-nav-right[_ngcontent-%COMP%]   .type-directory[_ngcontent-%COMP%]   .font-size22[_ngcontent-%COMP%]{font-size:22px}.content-article-header[_ngcontent-%COMP%]   .not-allowed-style[_ngcontent-%COMP%]:hover{background:#f2f2f2;cursor:not-allowed!important}.content-file-body[_ngcontent-%COMP%]{padding-bottom:50px}.file-list-body[_ngcontent-%COMP%]{position:absolute;background:#fff;width:100%;height:100%;overflow:auto;z-index:1;margin-top:5px}.edit-box[_ngcontent-%COMP%]{padding-left:20px}.edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center;margin-bottom:12px}.edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;height:35px;border:none;outline:none;font-size:20px;color:#23c6c8}.edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]   .save-and-revision[_ngcontent-%COMP%]{background-color:#fff;right:0;top:33px;cursor:pointer;border:1px solid #bbb;box-shadow:3px 3px 3px #bbb;z-index:1001;text-align:center;padding:8px 4px;width:128px}.edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]   .edit-box-save[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]   .edit-box-save[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{color:#23c6c8;background-color:#fff;border-color:#23c6c8;padding:0 15px;height:30px;line-height:25px}.edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]   .edit-box-save[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{vertical-align:middle}.edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]   .edit-box-save[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%], .edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]   .edit-box-save[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%]:active, .edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]   .edit-box-save[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%]:focus{color:#676a6c!important;border-color:#e4e4e4!important;background-color:#fff!important}.edit-box[_ngcontent-%COMP%]   .edit-box-header[_ngcontent-%COMP%]   .edit-box-save[_ngcontent-%COMP%]   .revise-edit[_ngcontent-%COMP%]{margin:0;background-color:#fff;color:#23c6c8;border-left:none;padding-left:5px;padding-right:5px}.edit-box[_ngcontent-%COMP%]   .tag-list[_ngcontent-%COMP%]{flex:0 0 auto;margin-bottom:16px}.edit-box[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc;font-size:12px;margin:5px 0}.edit-box[_ngcontent-%COMP%]   .localhost-info[_ngcontent-%COMP%]   .pull-right[_ngcontent-%COMP%]{float:right;font-size:16px;position:fixed;right:23px}.edit-box[_ngcontent-%COMP%]   .show-preview[_ngcontent-%COMP%]{margin-top:20px}.edit-box[_ngcontent-%COMP%]   .article-outline-filling-wrapper[_ngcontent-%COMP%]{height:100%}.edit-box[_ngcontent-%COMP%]   .article-outline-filling-wrapper[_ngcontent-%COMP%]   .article-outline-filling[_ngcontent-%COMP%]{width:255px;height:auto}.edit-box[_ngcontent-%COMP%]   .article-outline-filling-wrapper[_ngcontent-%COMP%]   .article-outline-filling-hidden[_ngcontent-%COMP%]{width:35px}.revision-detail-wrapper[_ngcontent-%COMP%]{position:fixed;width:510px;border:1px solid #bbb;box-shadow:3px 3px 3px #bbb;background:#fff;z-index:1000;padding:10px;top:100px;right:17px;font-size:15px}.select-template-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:40px}.select-template-header[_ngcontent-%COMP%]   .select-template-title[_ngcontent-%COMP%]{line-height:28px;font-size:20px}.select-template-header[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{color:#23c6c8;background-color:#fff;border-color:#23c6c8;padding:0 15px;height:30px;line-height:25px}.select-template-header[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{vertical-align:middle}.select-template-header[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%], .select-template-header[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%]:active, .select-template-header[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%]:focus{color:#676a6c!important;border-color:#e4e4e4!important;background-color:#fff!important}.right-content[_ngcontent-%COMP%]{display:flex;height:100%}.right-content[_ngcontent-%COMP%]   .wiki-content-wrapper[_ngcontent-%COMP%]{flex:1;overflow:hidden}.right-content[_ngcontent-%COMP%]   .wiki-content-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.right-content[_ngcontent-%COMP%]   .comment-wrapper[_ngcontent-%COMP%]{position:relative;height:100%;background:#fff}.dropdown-create-li-styl[_ngcontent-%COMP%]{padding:6px 20px}.dropdown-create-li-styl.dropdown-create-li-styl[_ngcontent-%COMP%]:hover{background:#f2f2f2}.dropdown-create-li-styl[_ngcontent-%COMP%]   .i-margin-right10[_ngcontent-%COMP%]{margin-right:10px}.not-allowed-styl[_ngcontent-%COMP%]{position:relative;left:-2px}.not-allowed-styl[_ngcontent-%COMP%]:hover{background:#f2f2f2;cursor:not-allowed}.dropdown-override-li-styl[_ngcontent-%COMP%]{padding:6px 20px;width:174px}.dropdown-override-li-styl.dropdown-override-li-styl-disable[_ngcontent-%COMP%]   .desc-span-styl[_ngcontent-%COMP%]   .margin-white-space[_ngcontent-%COMP%], .dropdown-override-li-styl.dropdown-override-li-styl-disable[_ngcontent-%COMP%]   .icon-title-wrapper[_ngcontent-%COMP%]   .dropdown-share-title[_ngcontent-%COMP%], .dropdown-override-li-styl.dropdown-override-li-styl-disable[_ngcontent-%COMP%]   .icon-title-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#bdbdbd}.dropdown-override-li-styl[_ngcontent-%COMP%]   .hover-styl.dropdown-override-li-styl[_ngcontent-%COMP%]   .hover-styl[_ngcontent-%COMP%]:hover, .dropdown-override-li-styl.dropdown-override-li-styl[_ngcontent-%COMP%]:hover{background:#f2f2f2!important}.dropdown-override-li-styl[_ngcontent-%COMP%]   .icon-title-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.dropdown-override-li-styl[_ngcontent-%COMP%]   .icon-title-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;height:18px}.dropdown-override-li-styl[_ngcontent-%COMP%]   .icon-title-wrapper[_ngcontent-%COMP%]   .dropdown-share-title[_ngcontent-%COMP%]{color:#000;font-size:14px;font-weight:500;margin-left:4px;min-width:100px;position:relative}.dropdown-override-li-styl[_ngcontent-%COMP%]   .icon-title-wrapper[_ngcontent-%COMP%]   .dropdown-share-title[_ngcontent-%COMP%]   .realtive-icon-styl[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.dropdown-override-li-styl[_ngcontent-%COMP%]   .desc-span-styl[_ngcontent-%COMP%]{line-height:15px;word-break:break-all;word-wrap:break-word}.dropdown-override-li-styl[_ngcontent-%COMP%]   .desc-span-styl[_ngcontent-%COMP%]   .margin-white-space[_ngcontent-%COMP%]{padding-left:21px;color:#b3b2b2;font-size:12px;display:block;word-break:break-all;word-wrap:break-word;white-space:pre-wrap}.dropdown-override-li-styl[_ngcontent-%COMP%]   .desc-span-styl[_ngcontent-%COMP%]   .more-word-wrapper[_ngcontent-%COMP%]{word-break:break-all;word-wrap:break-word;white-space:pre-wrap}.position-relative-right-styl[_ngcontent-%COMP%]{left:-182px;top:-32px;position:relative}.share-img-styl[_ngcontent-%COMP%]{width:18px;height:18px;margin-top:-3px}.icon-font-size18[_ngcontent-%COMP%]{font-size:18px}.have-bottom-li-styl[_ngcontent-%COMP%]{border-bottom:2px solid #f2f2f2}.show-history-list[_ngcontent-%COMP%]   .dropdown-override-li-styl[_ngcontent-%COMP%]{width:auto}.more-z-index-val[_ngcontent-%COMP%]{z-index:9999}nz-select[_ngcontent-%COMP%]{width:100%}.loading-icon[_ngcontent-%COMP%]{margin-right:8px}.position-r[_ngcontent-%COMP%]{position:relative}.empty-conetnt[_ngcontent-%COMP%]{text-align:center;transform:translateY(50%)}.empty-conetnt[_ngcontent-%COMP%]   .empty-exp[_ngcontent-%COMP%]{margin-top:20px;color:#aaa}.empty-conetnt[_ngcontent-%COMP%]   .icon-quanxian-styl[_ngcontent-%COMP%]{font-size:188px;color:#23c8c09e}.full-screen-styl[_ngcontent-%COMP%]{background:#fff;padding-left:13.68%;padding-right:13.68%}.article-outline-filling-full[_ngcontent-%COMP%]{width:calc(276px - 13.68%)}.fixed-box-styl[_ngcontent-%COMP%]{position:absolute;right:15px}.fixed-box-styl[_ngcontent-%COMP%]   .max-width-span[_ngcontent-%COMP%]{max-width:135px;display:inline-block}[_nghost-%COMP%]     .confirm-cancel-modal .ant-modal-content{border-radius:4px;height:160px;position:relative;box-shadow:0 0 8px rgba(0,0,0,.2)}[_nghost-%COMP%]     .confirm-cancel-modal .ant-modal-header{padding:20px 0 16px 20px;border-bottom:none}[_nghost-%COMP%]     .confirm-cancel-modal .ant-modal-header .ant-modal-title{font-size:20px;color:#333}[_nghost-%COMP%]     .confirm-cancel-modal .ant-modal-body{padding-left:20px;font-size:14px;color:#676a6c}[_nghost-%COMP%]     .confirm-cancel-modal .ant-modal-footer{position:absolute;bottom:32px;right:32px;padding:0;border-top:none}[_nghost-%COMP%]     .confirm-cancel-modal .ant-modal-footer button{margin-right:12px;margin-left:0}[_nghost-%COMP%]     .confirm-cancel-modal .ant-modal-footer button:first-child{background:#23c6c8;color:#fff}[_nghost-%COMP%]     .confirm-cancel-modal .ant-modal-footer button:last-child{margin-right:0}.classify-label-item[_ngcontent-%COMP%]{position:relative;font-size:12px;display:inline-block;margin:0 0 16px 10px;height:18px;padding-left:10px;padding-right:13px}.classify-label-item[_ngcontent-%COMP%]   .classify-label-bg[_ngcontent-%COMP%]{opacity:.2;position:absolute;left:0;top:0;bottom:0;right:0}.classify-label-item[_ngcontent-%COMP%]   .classify-label-item-arrow[_ngcontent-%COMP%]{display:inline-block;position:absolute;height:100%;top:0;left:0;border:8px solid #fff;border-right-color:transparent;border-left:none}  .access-control-modal .ant-modal-body{padding:0!important}  .access-control-modal .ant-modal-body::-webkit-scrollbar{width:0!important}.wiki-edit-btn[_ngcontent-%COMP%], .wiki-edit-btn[_ngcontent-%COMP%]:active, .wiki-edit-btn[_ngcontent-%COMP%]:focus{color:#676a6c;background-color:#fff;border-color:#e4e4e4;padding:0 15px;height:30px;line-height:25px}.wiki-edit-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .wiki-edit-btn[_ngcontent-%COMP%]:active   span[_ngcontent-%COMP%], .wiki-edit-btn[_ngcontent-%COMP%]:focus   span[_ngcontent-%COMP%]{font-size:12px!important}.btn-group[_ngcontent-%COMP%]{position:relative;display:inline-block;vertical-align:middle}.btn-group[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{padding:0 8px;height:24px;color:#676a6c!important;border-color:#e4e4e4!important;background-color:#fff!important;display:flex;align-items:center}.btn-group[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px!important}.none-annotation-bg[_ngcontent-%COMP%]   .annotation-bg[_ngcontent-%COMP%], .none-annotation-bg[_ngcontent-%COMP%]   [data-highlight-uuid][_ngcontent-%COMP%]{background-color:inherit!important}.none-annotation-bg[_ngcontent-%COMP%]   .annotation-bg[_ngcontent-%COMP%]:hover, .none-annotation-bg[_ngcontent-%COMP%]   [data-highlight-uuid][_ngcontent-%COMP%]:hover{background-color:inherit!important;cursor:inherit}.annotation-item-wrapper[_ngcontent-%COMP%]{width:360px;position:absolute;box-shadow:0 0 12px #000;border:1px solid #dbdbdb;background:#fff;border-radius:4px}.full-screen-styl[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;left:0;right:0;z-index:5}[_ngcontent-%COMP%]:-webkit-full-screen{background-color:#fff;width:100vw;height:100vh}[_ngcontent-%COMP%]:fullscreen{background-color:#fff;width:100vw;height:100vh}  .access-control-modal .ant-modal-body{padding:0}  .access-control-modal .ant-select-item-empty{width:600px!important}.release-tip-box[_ngcontent-%COMP%]{width:320px;background:#fff;filter:drop-shadow(rgba(0,0,0,.14) 0 0 6px);border-radius:4.5px}.release-tip-box[_ngcontent-%COMP%]   .icon-exclamation-triangle[_ngcontent-%COMP%]{color:#f8ac59}.release-tip-box[_ngcontent-%COMP%]   .icon-delete-member[_ngcontent-%COMP%]{color:#e65a6b}.release-tip-box[_ngcontent-%COMP%]   .release-tip-tile[_ngcontent-%COMP%]{font-size:14px;color:#5f5f5f}.release-tip-box[_ngcontent-%COMP%]   .release-tip-text[_ngcontent-%COMP%]{display:block;font-size:12px;color:#999}.release-tip-box[_ngcontent-%COMP%]   .release-tip-foot[_ngcontent-%COMP%]{text-align:right}.release-tip-box[_ngcontent-%COMP%]   .cancel-btn-styl[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dbdbdb;border-radius:4px}.release-tip-box[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]{background-color:#23c6c8;border:1px solid #23c6c8;border-radius:4px;color:#fff}.release-refuse-box[_ngcontent-%COMP%]{width:300px;background:#fff;filter:drop-shadow(rgba(0,0,0,.14) 0 0 6px);border-radius:4.5px}.release-refuse-box[_ngcontent-%COMP%]   .release-refuse-tile[_ngcontent-%COMP%]{color:#5f5f5f}.release-refuse-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #dbdbdb!important;border-radius:4px}.release-refuse-box[_ngcontent-%COMP%]   .cancel-btn-styl[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dbdbdb;border-radius:4px}.release-refuse-box[_ngcontent-%COMP%]   .confirm-btn-styl[_ngcontent-%COMP%]{background-color:#23c6c8;border:1px solid #23c6c8;border-radius:4px;color:#fff}.menu-popover-list[_ngcontent-%COMP%]{width:250px;overflow:hidden}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-content[_ngcontent-%COMP%]{width:100%;overflow:hidden}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-content[_ngcontent-%COMP%]   .menu-popover-div[_ngcontent-%COMP%]{line-height:26px;margin:0;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-help[_ngcontent-%COMP%], .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{right:-50px;background:transparent;text-shadow:none;border-radius:4px}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-help[_ngcontent-%COMP%]:focus, .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-help[_ngcontent-%COMP%]:hover, .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:focus, .menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]:hover{outline:none}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-submit[_ngcontent-%COMP%]{color:#5f5f5f;border:1px solid #dbdbdb}.menu-popover-list[_ngcontent-%COMP%]   .menu-popover-help[_ngcontent-%COMP%]{color:#23c6c8;border:1px solid #23c6c8}'],data:{animation:[Object(g.l)("enterAnimation",[Object(g.k)(":enter",[Object(g.j)({transform:"translateX(100%)",opacity:1}),Object(g.e)("500ms",Object(g.j)({transform:"translateX(0)",opacity:1}))]),Object(g.k)(":leave",[Object(g.j)({transform:"translateX(0)",opacity:1}),Object(g.e)("500ms",Object(g.j)({transform:"translateX(100%)",opacity:1}))])])]}}),e}()},to4i:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("lJxs"),o=n("y7eE"),r=n("fXoL"),a=n("tk/3"),c=function(){function e(e){this.http=e}return e.prototype.getCategoryLinkNum=function(e,t){return this.http.post("/devops-knowledge-management/api/global/aggregation/wiki?domain_id="+t,e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.getWikiSearchResult=function(e,t){return this.http.post("/devops-knowledge-management/api/global/search/wiki?domain_id="+t,e).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.goSearchPage=function(e){var t=[],n=localStorage.getItem("devops-wiki-search-history");n&&(t=JSON.parse(n));var i=t.indexOf(e.searchKeywords.trim());i>-1&&t.splice(i,1),t.splice(0,0,e.searchKeywords.trim()),t.length>15&&(t=t.splice(0,15)),Object(o.c)("devops-wiki-search-history",JSON.stringify(t));var r={value:e.searchKeywords.trim()};e.kanbanId&&(r.kanbanId=e.kanbanId),e.router.navigate(["domains/"+e.currentDomain+"/wiki/search"],{queryParams:r})},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](a.c))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()},u7mE:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){}return e.prototype.transform=function(e,t){return i=e,r=(o=n.p).endsWith("/")?"":"/",""+o+r+"assets"+(i.startsWith("/")?"":"/")+i;var i,o,r},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"assetUrl",type:e,pure:!0}),e}()},uiGI:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i=n("mrSG"),o=n("XNiG"),r=n("jtHE"),a=n("PqYM"),c=n("VRyK"),l=n("IzEk"),s=n("1G5W"),d=n("vkgz"),p=n("wZW1"),u=n("8YmR"),m=n("aDQL"),h=n("pSv2"),g=n("otx/"),f=n("AA4e"),v=n("AytR"),b=n("AWuS"),C=n("YwpR"),y=function(){function e(e,t,n,i){this.sn=e,this.wikiLockService=t,this.translate=n,this.notification=i,this.retryEdit$=new o.a,this.enterSingleEdit$=new o.a,this.enterCollabEdit$=new o.a,this.socketConnect$=new o.a,this.otherPageForceOpen$=new o.a,this.userExitCollaboration$=new o.a,this.disconnectInEdit$=new o.a,this.saveBeforeConvert$=new o.a,this.reopen$=new o.a,this.disableEditButton=!1,this.inCollabTips=!1,this.waitCollaboration=!1,this.collaborationMode=g.a.single,this.collabUsers=[],this.collaborationConverting=!1,this.state="view",this.offline=!0,this.originEditors=[],this.leaveWiki$=new o.a,this._socketConnect$=new o.a,this.reciveComplete$=new o.a,this.afterEditorInit$=new r.a(1),this.onWikiOpen(),this.listenSocketEvents()}return e.prototype.afterEditorInit=function(e,t){this.beforeConvert=e,this.afterConvert=t,this.afterEditorInit$.next()},e.prototype.onWikiEdit=function(e){return void 0===e&&(e=!1),Object(i.b)(this,void 0,void 0,function(){var t,n,o,r,a,c,l,s;return Object(i.e)(this,function(i){switch(i.label){case 0:return this.disableEditButton=!0,this.originEditors=[],o=(n=h.a).toUserInfo,[4,f.d];case 1:t=o.apply(n,[i.sent()]),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.wikiLockService.queryCollaboration(this.sn).toPromise()];case 3:return r=i.sent().data,a=r.status,l=(c=r.userInfo).some(function(e){return e.username===t.username}),f.d||(this.inCollabTips=!1),l&&!e?(this.inCollabTips=!0,this.disableEditButton=!1,[2]):(e&&(this.inCollabTips=!1,this.wikiLockService.collaborationForceOpen(this.sn)),a===g.a.single&&(this.originEditors=c,l?this.singleEdit():this.requestCollaboration()),a===g.a.collaboration&&(this.originEditors=c,this.collaborationEdit()),a===g.a.none&&this.singleEdit(),[3,5]);case 4:return s=i.sent(),Object(b.b)(s),[3,5];case 5:return[2]}})})},e.prototype.onQuitEdit=function(){this.resetState(),this.exitCollaboration()},e.prototype.onDestroy=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.e)(this,function(e){return"edit"===this.state&&this.exitCollaboration(),this.resetState(),this.leaveWiki$.next(),this.leaveWiki$.complete(),[2]})})},e.prototype.resetState=function(){this.collaborationMode=g.a.single,this.collaborationConverting=!1,this.collabUsers=[],this.afterEditorInit$=new r.a,this.state="view",this.disableEditButton=!1},e.prototype.exitCollaboration=function(){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.e)(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,this.wikiLockService.leaveCollaboration(this.sn)];case 1:return t.sent(),[4,this.wikiLockService.exitCollabEdit(this.sn)];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),Object(b.b)(e),[3,4];case 4:return[2]}})})},e.prototype.listenSocketEvents=function(){var e=this,t=[Object(m.b)("connect",function(){var t;e.onWikiOpen(),e._socketConnect$.next(),e.offline&&(e.socketConnect$.next(),e.offline=!1),"edit"===e.state&&(e.wikiLockService.joinCollaborationReport(e.sn),e.offlineRef&&(e.reopen$.next(),e.notification.remove(null===(t=e.offlineRef)||void 0===t?void 0:t.messageId),e.notification.success(e.translate.instant("COLLABORATION_ONLINE"),""),e.offlineRef=void 0))}),Object(m.b)(g.b.wikiRequestCollabration,function(t){return Object(i.b)(e,void 0,void 0,function(){var e,n;return Object(i.e)(this,function(i){switch(i.label){case 0:if(t!==this.sn)return[2];if("edit"!==this.state)return[2];if(this.collaborationConverting)return[2];if(this.collaborationConverting=!0,this.collaborationMode!==g.a.single)return[3,6];i.label=1;case 1:return i.trys.push([1,5,,6]),[4,this.afterEditorInit$.pipe(Object(l.a)(1)).toPromise()];case 2:return i.sent(),[4,this.beforeConvert()];case 3:return e=i.sent(),[4,this.wikiLockService.createWebstrate(e,this.sn)];case 4:return i.sent(),this.afterConvert(),this.collaborationMode=g.a.collaboration,[3,6];case 5:return n=i.sent(),this.wikiLockService.convertWebstrateFailed(this.sn,n.message),[3,6];case 6:return this.collaborationConverting=!1,this.wikiLockService.convertWebstrateSuccess(this.sn),[2]}})})}),Object(m.b)(g.b.wikiConvertCollaborationComplete,function(t){t===e.sn&&e.waitCollaboration&&(e.reciveComplete$.next(),e.collaborationEdit(),e.waitCollaboration=!1)}),Object(m.b)(g.b.wikiConvertCollaborationFailed,function(t,n){t===e.sn&&e.waitCollaboration&&(e.reciveComplete$.next(),e.waitCollaboration=!1,e.notification.error(e.translate.instant("REQ_COLLABORATION_FAILED"),e.translate.instant(n),{nzDuration:0}))}),Object(m.b)(g.b.wikiExitCollaboration,function(t,n){return Object(i.b)(e,void 0,void 0,function(){var e,o,r;return Object(i.e)(this,function(i){switch(i.label){case 0:return r=(o=h.a).toUserInfo,[4,f.d];case 1:return e=r.apply(o,[i.sent()]).username,t.includes(this.sn)?(n===e&&(this.inCollabTips=!1),this.userExitCollaboration$.next(),[2]):[2]}})})}),Object(m.b)(g.b.wikiCollaborationForceOpen,function(t,n){return Object(i.b)(e,void 0,void 0,function(){var e,o,r;return Object(i.e)(this,function(i){switch(i.label){case 0:return r=(o=h.a).toUserInfo,[4,f.d];case 1:return e=r.apply(o,[i.sent()]).username,t!==this.sn||n!==e||(this.resetState(),this.wikiLockService.collaborationForceExit(this.sn),this.inCollabTips=!0,this.otherPageForceOpen$.next()),[2]}})})}),Object(m.b)(g.b.wikiJoinCollabration,function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.e)(this,function(e){return this.queryCollabUsers(),[2]})})}),Object(m.b)(g.b.wikiExitCollaboration,function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.e)(this,function(e){return this.queryCollabUsers(),[2]})})}),Object(m.b)("disconnect",function(){return Object(i.b)(e,void 0,void 0,function(){var e=this;return Object(i.e)(this,function(t){return Object(a.a)(1e4).pipe(Object(s.a)(this._socketConnect$),Object(s.a)(this.leaveWiki$)).subscribe(function(){e.offline=!0,"edit"===e.state&&(e.disconnectInEdit$.next(),e.offlineRef=e.notification.error(e.translate.instant("COLLABORATION_OFFLINE"),e.translate.instant("RECONNECTING"),{nzDuration:0}))}),[2]})})})];this.leaveWiki$.subscribe(function(){t.forEach(function(e){return e.off()})})},e.prototype.onWikiOpen=function(){this.wikiLockService.openWiki(this.sn)},e.prototype.singleEdit=function(){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.e)(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),[4,this.wikiLockService.joinCollaboration(this.sn)];case 1:return t.sent().data.status!==g.a.collaboration?[3,3]:[4,this.wikiLockService.leaveCollaboration(this.sn)];case 2:return t.sent(),this.retryEdit$.next(!1),[3,5];case 3:return[4,this.wikiLockService.joinCollaborationReport(this.sn)];case 4:t.sent(),this.enterEdit(!1),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),Object(b.b)(e),[3,7];case 7:return[2]}})})},e.prototype.enterEdit=function(e){void 0===e&&(e=!1),this.state="edit",e?(this.queryCollabUsers(),this.enterCollabEdit$.next(),this.collaborationMode=g.a.collaboration):this.enterSingleEdit$.next()},e.prototype.requestCollaboration=function(){var e=this;this.waitCollaboration=!0;var t=1e3*Number(v.a.WIKI_WAIT_COLLAB_TIMEOUT),n=new o.a,r=Object(a.a)(t).pipe(Object(s.a)(n),Object(d.a)(function(){return Object(i.b)(e,void 0,void 0,function(){var e;return Object(i.e)(this,function(t){switch(t.label){case 0:this.waitCollaboration=!1,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.wikiLockService.cleanCollaboration(this.sn)];case 2:return t.sent(),this.retryEdit$.next(!0),[3,4];case 3:return e=t.sent(),Object(b.b)(e),[3,4];case 4:return[2]}})})}));this.leaveWiki$.pipe(Object(l.a)(1)).subscribe(function(){e.waitCollaboration=!1});var p=Object(c.a)(r,n,this.leaveWiki$,this.reciveComplete$);Object(a.a)(0,3e3).pipe(Object(s.a)(p),Object(s.a)(this.leaveWiki$)).subscribe(function(){return Object(i.b)(e,void 0,void 0,function(){var e;return Object(i.e)(this,function(t){switch(t.label){case 0:this.wikiLockService.requestCollaboration(this.sn),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.wikiLockService.queryCollaboration(this.sn).toPromise()];case 2:return t.sent().data.status!==g.a.single&&(this.waitCollaboration=!1,n.next(),this.retryEdit$.next(!0)),[3,4];case 3:return e=t.sent(),Object(b.b)(e),[3,4];case 4:return[2]}})})})},e.prototype.collaborationEdit=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n,o,r,a,c,l,s;return Object(i.e)(this,function(i){switch(i.label){case 0:return i.trys.push([0,7,,8]),n=(t=h.a).toUserInfo,[4,f.d];case 1:return e=n.apply(t,[i.sent()]),[4,this.wikiLockService.joinCollaboration(this.sn)];case 2:return o=i.sent().data,r=o.status,a=this.originEditors,c=o.userInfo.filter(function(t){return t.account!==e.account}),l=0===Object(p.a)(a,c,"account").length,r!==g.a.single?[3,3]:(this.retryEdit$.next(!0),[3,6]);case 3:return l?(this.originEditors=c,this.requestCollaboration(),[3,6]):[3,4];case 4:return[4,this.wikiLockService.joinCollaborationReport(this.sn)];case 5:i.sent(),this.enterEdit(!0),i.label=6;case 6:return[3,8];case 7:return s=i.sent(),Object(b.b)(s),[3,8];case 8:return[2]}})})},e.prototype.queryCollabUsers=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t;return Object(i.e)(this,function(n){switch(n.label){case 0:if("edit"!==this.state)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wikiLockService.queryCollaboration(this.sn).toPromise()];case 2:return e=n.sent().data,this.collabUsers=e.userInfo,[3,4];case 3:return t=n.sent(),Object(b.b)(t),[3,4];case 4:return[2]}})})},e.prototype.enterCollaboration=function(e,t){return Object(i.b)(this,void 0,void 0,function(){var n,o,r,a;return Object(i.e)(this,function(i){switch(i.label){case 0:return[4,f.d];case 1:return n=i.sent(),o=document.getElementById(e),r=Object(f.m)(o),a={server:location.host+"/collab-ui",webstrateId:this.sn,author:n,isTransientElement:function(e){return!!(e.classList&&e.classList.contains("mce-resizehandle")||e.classList&&e.classList.contains("mce-resize-backdrop")||e.classList&&e.classList.contains("mce-clonedresizable")||e.classList&&e.classList.contains("mce-resize-helper"))},isTransientAttribute:function(e,t){return!!t.startsWith("data-mce-")||!!t.startsWith("contenteditable")},destory:function(){},onPopulate:function(){Object(u.b)("DisableEditorUndo"),r&&(Object(f.t)(o,r),o.focus())}},C(o,a),t.subscribe(function(){return a.destory()}),[2]}})})},e}()},vNWM:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("lJxs"),o=n("UXun"),r=n("AA4e"),a=n("fXoL"),c=n("tk/3"),l=function(){function e(e){this.http=e,this.groupMembersCache={}}return e.prototype.getAvailiableLabels=function(e,t){return this.http.get("/vision-common/api/domains/"+e+"/labels?category="+t).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.createLabel=function(e,t){return this.http.post("/vision-common/api/domains/"+e+"/labels",t).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.updateLabel=function(e,t,n){return this.http.put("/vision-common/api/domains/"+e+"/labels/"+t,n).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.deleteLabel=function(e,t){return this.http.delete("/vision-common/api/domains/"+e+"/labels/"+t).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.queryMembers=function(e,t){void 0===t&&(t=[]);var n="/vision-platform/api/domains/"+e+"/users?without_roles="+JSON.stringify(t);return this.http.get(n).pipe(Object(i.a)(function(e){return e.data}))},e.prototype.getGroupMembers=function(e){var t=e.domain_id,n=e.type;if(this.groupMembersCache[t+n])return this.groupMembersCache[t+n];var a=this.http.get("/vision-platform/api/domains/"+t+"/group-members?group="+n+"&needFaltung="+e.needFaltung).pipe(Object(i.a)(function(e){return e.data}),Object(o.a)(1),Object(i.a)(function(e){return Object(r.e)(e)}));return this.groupMembersCache[t+n]=a,a},e.prototype.fuzzySearchUsers=function(e){return this.http.get("/vision-platform/api/users?username="+e).pipe(Object(i.a)(function(e){return e.data}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](c.c))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()},vRWp:function(e,t,n){"use strict";function i(){return crypto.getRandomValues(new Uint32Array(1))[0]/4294967296}n.d(t,"a",function(){return i})},vTH2:function(e,t,n){"use strict";n.d(t,"a",function(){return F});var i=n("fXoL"),o=n("y7eE"),r=n("UJq8"),a=n("A/Mn"),c=n("sYmb"),l=n("dEAy"),s=n("ofXK"),d=n("Nqz0"),p=n("C2AL"),u=n("Q8cG"),m=n("EGpF"),h=n("3Pt+"),g=n("1JWf"),f=n("hK9q"),v=n("5UG9"),b=n("ebHz");function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"SPACE_VISIBILE")))}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"PUBLIC_VISIBILE")))}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"PRIVACY_VISIBILE")))}var w=function(){return[0,4]};function _(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",24),i["\u0275\u0275template"](1,C,3,3,"span",21),i["\u0275\u0275template"](2,y,3,3,"span",21),i["\u0275\u0275template"](3,x,3,3,"span",21),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",0===n.showVisibility),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",4===n.showVisibility),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](3,w).includes(n.showVisibility))}}function O(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",22),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().accessControlShowFunc()}),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,_,4,4,"div",23),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,"CURRENT_VISIBILITY")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",void 0!==o.showVisibility)}}function S(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",25),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().showSelectCategoryDirectory=!0}),i["\u0275\u0275element"](1,"span",10),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("hidden",o.showPreview),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](2,3,"NEW_ARTICLE_TO"))}}function E(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",32),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).isShowSaveAndReviosionBtn=!0}),i["\u0275\u0275element"](1,"span",33),i["\u0275\u0275elementEnd"]()}}function M(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",34),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).ShowRevisionDetaillModal()}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](1,1,"SAVE_AND_REVISED"))}function P(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",35),i["\u0275\u0275elementStart"](1,"reversion-history-model",36),i["\u0275\u0275listener"]("saveRevision",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).saveArticleAndRevision(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("currentDomain",o.currentDomain)}}function I(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",26),i["\u0275\u0275listener"]("clickOutside",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clickOutsideFunc()}),i["\u0275\u0275elementStart"](1,"button",27),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().save()}),i["\u0275\u0275element"](2,"span",28),i["\u0275\u0275element"](3,"span",10),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,E,2,0,"button",29),i["\u0275\u0275template"](6,M,2,3,"div",30),i["\u0275\u0275template"](7,P,2,1,"div",31),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("hidden",o.showPreview),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](4,6,"COMMON_BTN_SAVE")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!o.workitemArticle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.isShowSaveAndReviosionBtn),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.isShowRevisionDetailModal)}}function k(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",25),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().save()}),i["\u0275\u0275element"](1,"span",37),i["\u0275\u0275element"](2,"span",10),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("hidden",o.showPreview),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](3,3,"COMMON_BTN_SAVE"))}}function T(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",38),i["\u0275\u0275elementStart"](1,"button",8),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().showPreviewFunc(!0)}),i["\u0275\u0275element"](2,"span",39),i["\u0275\u0275element"](3,"span",10),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("hidden",o.showPreview||o.hiddenPreviewBtn),i["\u0275\u0275property"]("hidden",o.fullScreenCtrl),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](4,4,"PREVIEW"))}}function D(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",40),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().cancelCreate()}),i["\u0275\u0275element"](1,"span",10),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("hidden",o.showPreview),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](2,3,"COMMON_BUTTON_CANCLE"))}}function A(e,t){if(1&e&&i["\u0275\u0275element"](0,"span",41),2&e){i["\u0275\u0275nextContext"]();var n=i["\u0275\u0275reference"](17);i["\u0275\u0275property"]("nzDropdownMenu",n)}}var z=function(e,t){return{id:e,classify:t}};function R(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",42),i["\u0275\u0275elementStart"](1,"select-category-directory",43),i["\u0275\u0275listener"]("modelShowCloseChange",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().showSelectCategoryDirectory=!1})("modelShowVariableChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().getConfirmFunc(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabledNode","")("currentCategory",o.categoryId?i["\u0275\u0275pureFunction2"](5,z,o.categoryId,o.workitemArticle?"system":""):null)("currentDomain",o.currentDomain)("tipInfo",o.tipInfo)("wikiEditFunction",o.wikiEditFunction)}}function L(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"nz-modal",44),i["\u0275\u0275elementStart"](2,"div",45),i["\u0275\u0275elementStart"](3,"access-control",46),i["\u0275\u0275listener"]("closeCallback",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().closeCallbackFunc(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nzVisible",!0)("nzClosable",!1)("nzFooter",null)("nzWidth",600),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("articleDetails",o.articleDetails)("visibilityEditModel",o.visibilityEditModel)("createFrom",o.createFrom)("categoryDetails",o.categoryDetails)("visibilityParams",o.visibilityParams)}}var N=function(){return["create-article","create-excel"]},j=function(){return["update-design-template","create-design-template"]},V=function(){return["update-design-template","create-design-template","create-excel","update-excel"]},F=function(){function e(e,t,n,o){this.emitService=e,this.knowledgeService=t,this.translate=n,this.modal=o,this.dictionaryId=null,this.workitemArticle=!1,this.selected=new i.EventEmitter,this.preview=new i.EventEmitter,this.saveBool=!1,this.showSelectCategoryDirectory=!1,this.isShowSaveAndReviosionBtn=!1,this.saveVersionDisabled=!1,this.isShowRevisionDetailModal=!1,this.relatedWorkitem=[],this.searchWorkitemList=[],this.isLoading={workitem:!1},this.wideModeSwitch=!1,this.canSwitchWide=!0,this.accessControlShow=!1,this.visibilityParams={}}return e.prototype.ngOnInit=function(){var e=this;this.tipInfo={title:"NEW_ARTICLE_TO",listPlaceHolder:"SEARCH_CATEGORY_DIRECTORY",listDirectoryTip:"CREATE",detailTitle:"SELECT_CREATE_LOCATION",detailPlaceHolder:"SEARCH",detailBottomTip:"NEW_ARTICLE_TO",detailConfirmBtnTip:"COMMON_BTN_SAVE"},this.emitService.eventEmit.subscribe(function(t){t&&"rich-text-mode"==t.type&&(e.canSwitchWide=!0),t&&"new-markdown"==t.type&&(e.wideModeSwitch||e.handleSwitchChange(!0),e.canSwitchWide=!1)});var t=localStorage.getItem("wikiWideModeSwitch");t&&(this.wideModeSwitch=JSON.parse(t)),this.getAccessDefault()},e.prototype.save=function(){this.selected.emit({type:"save",model:this.model,categoryId:this.categoryId,dictionaryId:this.dictionaryId,parentSn:this.parentSn,visibilityParams:"create-article"===this.model?this.visibilityParams:null}),this.showSelectCategoryDirectory=!1},e.prototype.cancelCreate=function(){if(this.isTable)this.selected.emit({type:"cancelCreate"});else{var e=this.translate.instant.bind(this.translate),t=this.save.bind(this),n=this.emitCloseEvent.bind(this);if(this.wikiEditFunction&&["workitem","coe"].includes(this.wikiEditFunction.editFrom)){var i=new CustomEvent("knowledge_event_listener",{detail:{operation:"knowledge_cancel_create"}});window.dispatchEvent(i)}if(this.contentChanged&&["update-article","update-design-template","create-design-template"].includes(this.model))var o=this.modal.create({nzTitle:this.translate.instant({"update-article":"IS_SAVE_CURRENT_DOC","update-design-template":"IS_SAVE_CURRENT_TEMPLATE","create-design-template":"IS_SAVE_CURRENT_TEMPLATE"}[this.model]),nzContent:null,nzWidth:500,nzClosable:!1,nzClassName:"confirm-cancel-modal",nzFooter:[{label:e("COMMON_BTN_SAVE"),onClick:function(){t(),o.close()}},{label:e("COMMON_BTN_NOT_SAVE"),onClick:function(){n(),o.close()}},{label:e("COMMON_BUTTON_CANCLE"),onClick:function(){o.close()}}]});else n();this.isCreatedOnce&&this.emitService.emit(this.isCreatedOnce),this.emitService.emit({type:"new-coe-cancel",coeContent:!1})}},e.prototype.emitCloseEvent=function(){if(this.emitService.emit({type:"article::wiki-closeModel",saveBool:this.saveBool}),["update-design-template","create-design-template"].includes(this.model)){var e=new CustomEvent("knowledge_event_listener",{detail:{operation:"knowledge_cancel_create"}});window.dispatchEvent(e)}},e.prototype.getConfirmFunc=function(e){var t=e.parentObj,n=t.id,i=t.sn;this.categoryId=t.kanban_id,this.dictionaryId=n,this.parentSn=i,this.save()},e.prototype.clickOutsideFunc=function(){this.isShowSaveAndReviosionBtn=!1},e.prototype.ShowRevisionDetaillModal=function(){this.saveVersionDisabled=!1,this.isShowRevisionDetailModal=!0,this.versionRemark=null,this.isShowSaveAndReviosionBtn=!1,this.versionTitle=(new Date).toLocaleString()+"  "+this.translate.instant("VERSION")},e.prototype.onSearchWorkitem=function(e){var t=this;e.length<=2||(this.isLoading.workitem=!0,this.knowledgeService.searchWorkitem({view:"to_self",data_type:"tree",sort:{key:"created_time",value:"desc"},first_filters:[{key:"title",operator:"like",value:[e]},{key:"valid",operator:"||",value:[1,-2,-3]},{key:"with_children",operator:"||",value:[!0]},{key:"assigned_domain",operator:"||",value:[this.currentDomain]}]}).subscribe(function(e){t.isLoading.workitem=!1,e&&(t.searchWorkitemList=e.result)},function(){}))},e.prototype.saveArticleAndRevision=function(e){e&&(this.versionDetail={revision_record_title:e.revision_record_title,remark:e.remark,relation:e.relations},this.save()),this.isShowRevisionDetailModal=!1},e.prototype.isNullOrUndefined=function(e){return null==e},e.prototype.showPreviewFunc=function(e){this.showPreview=e,this.preview.emit(e)},e.prototype.handleSwitchChange=function(e){this.wideModeSwitch=e,Object(o.c)("wikiWideModeSwitch",JSON.stringify(this.wideModeSwitch)),this.emitService.emit({type:"wiki:doc-table-wide-edit",obj:this.wideModeSwitch})},e.prototype.accessControlShowFunc=function(){this.accessControlShow=!0},e.prototype.closeCallbackFunc=function(e){var t,n=this;this.accessControlShow=!1,Number.isSafeInteger(null==e?void 0:e.visibility)&&(this.visibilityParams=e,this.showVisibility=e.visibility,1===e.visibility&&("category"===this.createFrom?this.showVisibility=this.categoryDetails.visibility:this.knowledgeService.getWikiParentAccess(null===(t=this.articleDetails)||void 0===t?void 0:t.sn).subscribe(function(e){n.showVisibility=e.visibility},function(){})))},e.prototype.getAccessDefault=function(){var e,t,n,i=this;"create-article"===this.visibilityEditModel?(this.visibilityParams.visibility=1,"category"===this.createFrom?1===this.categoryDetails.visibility?this.knowledgeService.getCategoryParentAccess(this.currentDomain,this.categoryDetails.id).subscribe(function(e){i.showVisibility=e.visibility},function(){}):this.knowledgeService.getCategoryAccess(this.categoryDetails.id,this.currentDomain).subscribe(function(e){i.showVisibility=e.visibility},function(){}):(null===(e=this.articleDetails)||void 0===e?void 0:e.sn)&&(1===this.articleDetails.visibility?this.knowledgeService.getWikiParentAccess(null===(t=this.articleDetails)||void 0===t?void 0:t.sn).subscribe(function(e){i.showVisibility=e.visibility},function(){}):this.showVisibility=this.articleDetails.visibility)):this.articleDetails&&(1===this.articleDetails.visibility?this.knowledgeService.getWikiParentAccess(null===(n=this.articleDetails)||void 0===n?void 0:n.sn).subscribe(function(e){i.showVisibility=e.visibility},function(){}):this.showVisibility=this.articleDetails.visibility)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](a.b),i["\u0275\u0275directiveInject"](c.c),i["\u0275\u0275directiveInject"](l.d))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-category-selector"]],inputs:{model:"model",categoryId:"categoryId",dictionaryId:"dictionaryId",workitemArticle:"workitemArticle",currentDomain:"currentDomain",contentChanged:"contentChanged",showPreview:"showPreview",wikiEditFunction:"wikiEditFunction",saveBool:"saveBool",isCreatedOnce:"isCreatedOnce",fullScreenCtrl:"fullScreenCtrl",hiddenPreviewBtn:"hiddenPreviewBtn",isTable:"isTable",articleDetails:"articleDetails",categoryDetails:"categoryDetails",visibilityEditModel:"visibilityEditModel",createFrom:"createFrom",showVisibilityEdit:"showVisibilityEdit"},outputs:{selected:"selected",preview:"preview"},decls:27,vars:27,consts:[[1,"t-a-r","warp"],["class","m-r-8 cursor-pointer visibility-per",3,"click",4,"ngIf"],[1,"line-sm"],["class","cursor-pointer create-to m-r-8 position-r",3,"hidden","click",4,"ngIf"],["class","btn-group m-r-8 position-r doc-save-btn","clickElementOutside","",3,"hidden","clickOutside",4,"ngIf"],["class","btn-group m-r-8",3,"hidden",4,"ngIf"],[1,"edit-box-save","m-r-12"],[1,"btn-group","m-l-10"],[1,"m-l-xs","btn","btn-xs","btn-info","wiki-edit-btn",3,"click"],[1,"iconfont","icon-close","p-r-5",2,"font-weight","bold"],[3,"textContent"],["class","cursor-pointer cancel position-r",3,"hidden","click",4,"ngIf"],["class","iconfont icon-more icon-more-btn icon-color m-l-8 cursor-pointer","nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu",4,"ngIf"],["class","move-to t-a-l position-r","style","position: absolute; height: 500px","id","create-select-directory",4,"ngIf"],["moreMenu","nzDropdownMenu"],[1,"edit-more-menu"],[1,"edit-operate-item","switch-item"],[1,"operate-text","m-r-10",3,"textContent"],["nz-menu-item","",1,"switch-style"],["nzSize","small",3,"ngModel","ngModelChange"],[1,"edit-operate-item","wide-mode-tips",3,"textContent"],[4,"ngIf"],[1,"m-r-8","cursor-pointer","visibility-per",3,"click"],["class","visibiliby-detail",4,"ngIf"],[1,"visibiliby-detail"],[1,"cursor-pointer","create-to","m-r-8","position-r",3,"click"],["clickElementOutside","",1,"btn-group","m-r-8","position-r","doc-save-btn",3,"clickOutside"],[1,"m-l-xs","btn","btn-xs","btn-info",3,"click"],[1,"iconfont","icon-check","p-r-5"],["class","btn btn-xs btn-info revise-edit",3,"click",4,"ngIf"],["class","save-and-revision","style","position: absolute",3,"textContent","click",4,"ngIf"],["class","revision-detail-wrapper",4,"ngIf"],[1,"btn","btn-xs","btn-info","revise-edit",3,"click"],[1,"caret"],[1,"save-and-revision",2,"position","absolute",3,"textContent","click"],[1,"revision-detail-wrapper"],[3,"currentDomain","saveRevision"],[1,"iconfont","icon-save","cursor-pointer",2,"margin-right","0"],[1,"btn-group","m-r-8",3,"hidden"],[1,"fa","fa-eye","p-r-5"],[1,"cursor-pointer","cancel","position-r",3,"click"],["nz-dropdown","","nzTrigger","click",1,"iconfont","icon-more","icon-more-btn","icon-color","m-l-8","cursor-pointer",3,"nzDropdownMenu"],["id","create-select-directory",1,"move-to","t-a-l","position-r",2,"position","absolute","height","500px"],[3,"disabledNode","currentCategory","currentDomain","tipInfo","wikiEditFunction","modelShowCloseChange","modelShowVariableChange"],["nzWrapClassName","access-control-modal",3,"nzVisible","nzClosable","nzFooter","nzWidth"],[2,"width","600px","height","100%"],[3,"articleDetails","visibilityEditModel","createFrom","categoryDetails","visibilityParams","closeCallback"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,O,5,4,"div",1),i["\u0275\u0275element"](2,"div",2),i["\u0275\u0275template"](3,S,3,5,"span",3),i["\u0275\u0275template"](4,I,8,8,"div",4),i["\u0275\u0275template"](5,k,4,5,"span",3),i["\u0275\u0275template"](6,T,5,6,"div",5),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275elementStart"](8,"div",7),i["\u0275\u0275elementStart"](9,"button",8),i["\u0275\u0275listener"]("click",function(){return t.showPreviewFunc(!1)}),i["\u0275\u0275element"](10,"span",9),i["\u0275\u0275element"](11,"span",10),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,D,3,5,"span",11),i["\u0275\u0275template"](14,A,1,1,"span",12),i["\u0275\u0275template"](15,R,2,8,"div",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"nz-dropdown-menu",null,14),i["\u0275\u0275elementStart"](18,"div",15),i["\u0275\u0275elementStart"](19,"div",16),i["\u0275\u0275element"](20,"span",17),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementStart"](22,"div",18),i["\u0275\u0275elementStart"](23,"nz-switch",19),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.wideModeSwitch=e})("ngModelChange",function(e){return t.handleSwitchChange(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](24,"div",20),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](26,L,4,9,"ng-container",21)),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!(i["\u0275\u0275pureFunction0"](21,N).includes(t.model)&&t.isNullOrUndefined(t.dictionaryId))&&(t.showVisibilityEdit||"create-article"==t.visibilityEditModel)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pureFunction0"](22,N).includes(t.model)&&t.isNullOrUndefined(t.dictionaryId)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update-article"===t.model||"update-excel"===t.model),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","update-event-report"===t.model||"update-template"===t.model||"create-template"===t.model||"create-design-template"===t.model||"update-design-template"===t.model||i["\u0275\u0275pureFunction0"](23,N).includes(t.model)&&!t.isNullOrUndefined(t.dictionaryId)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pureFunction0"](24,j).includes(t.model)),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("hidden",!t.showPreview),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](12,15,"COMMON_BTN_RETURN")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","update-event-report"!==t.model),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pureFunction0"](25,V).includes(t.model)&&t.canSwitchWide),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.showSelectCategoryDirectory&&i["\u0275\u0275pureFunction0"](26,N).includes(t.model)&&t.isNullOrUndefined(t.dictionaryId)),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](21,17,"WIDE_MODE")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.wideModeSwitch),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](25,19,"WIDE_MODE_DESCRIBE")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.accessControlShow))},directives:[s.n,d.d,p.a,u.e,m.a,h.k,h.l,g.a,f.a,d.b,v.a,l.a,b.a],pipes:[c.b],styles:[".warp[_ngcontent-%COMP%]{justify-content:flex-end;height:50px}.visibility-per[_ngcontent-%COMP%], .warp[_ngcontent-%COMP%]{display:flex;align-items:center}.visibility-per[_ngcontent-%COMP%]{text-align:left;line-height:1.5;flex-direction:column;color:#5f5f5f;font-size:12px}.visibility-per[_ngcontent-%COMP%]   .visibiliby-detail[_ngcontent-%COMP%]{font-weight:700}.visibility-per[_ngcontent-%COMP%]   .visibiliby-detail[_ngcontent-%COMP%]:hover{text-decoration:underline}.visibility-per[_ngcontent-%COMP%] + .line-sm[_ngcontent-%COMP%]{display:block}.line-sm[_ngcontent-%COMP%]{height:25px;margin:0 8px;width:1px;background-color:#ccc;display:none}  .access-control-modal .ant-modal-body{padding:0!important}.create-to[_ngcontent-%COMP%]{padding:4px;background-color:#23c6c8f8;color:#fff;border-radius:4px;display:inline-flex;align-items:center;width:80px;height:30px;justify-content:center}.move-to[_ngcontent-%COMP%]{position:absolute;z-index:1000;right:62px;top:30px;background:#fff;border:1px solid #d7d7d7;width:300px}.cancel[_ngcontent-%COMP%]{padding:0 12px;border-radius:3px;display:inline-block;height:30px;line-height:30px;background:#eee;color:#676a6c}.btn-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.btn-group[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{color:#23c6c8;background-color:#fff;border-color:#23c6c8;padding:0 15px;height:30px;line-height:25px}.btn-group[_ngcontent-%COMP%]   .iconfont[_ngcontent-%COMP%]{vertical-align:middle}.btn-group[_ngcontent-%COMP%]   .revise-edit[_ngcontent-%COMP%]{margin:0;background-color:#fff;color:#23c6c8;border-left:none;padding-left:5px;padding-right:5px}.btn-group[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%], .btn-group[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%]:active, .btn-group[_ngcontent-%COMP%]   .wiki-edit-btn[_ngcontent-%COMP%]:focus{color:#676a6c!important;border-color:#e4e4e4!important;background-color:#fff!important}.save-and-revision[_ngcontent-%COMP%]{background-color:#fff;right:0;top:33px;cursor:pointer;z-index:1001;text-align:center;padding:8px 4px;width:128px}.revision-detail-wrapper[_ngcontent-%COMP%], .save-and-revision[_ngcontent-%COMP%]{border:1px solid #bbb;box-shadow:3px 3px 3px #bbb}.revision-detail-wrapper[_ngcontent-%COMP%]{position:fixed;width:510px;background:#fff;z-index:1000;padding:10px;top:100px;right:17px;font-size:15px}.revision-detail-wrapper[_ngcontent-%COMP%]   .tip-info[_ngcontent-%COMP%]{width:110px}.revision-detail-wrapper[_ngcontent-%COMP%]   .subject-inp[_ngcontent-%COMP%]{padding:0 5px;min-height:32px;width:100%;outline:none;border:1px solid #e5e6e7;font-size:14px}.revision-detail-wrapper[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]{min-height:32px;width:390px;display:flex;align-items:center}.revision-detail-wrapper[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   .version-message[_ngcontent-%COMP%]{width:100%;border:1px solid #e5e6e7;outline:none;resize:none;padding:0 5px;font-size:15px}.edit-box-save[_ngcontent-%COMP%]{right:0}  .confirm-cancel-modal .ant-modal-content{border-radius:4px;height:160px;position:relative;box-shadow:0 0 8px rgba(0,0,0,.2)}  .confirm-cancel-modal .ant-modal-header{padding:20px 0 16px 20px;border-bottom:none}  .confirm-cancel-modal .ant-modal-header .ant-modal-title{font-size:20px;color:#333}  .confirm-cancel-modal .ant-modal-body{padding-left:20px;font-size:14px;color:#676a6c}  .confirm-cancel-modal .ant-modal-footer{position:absolute;bottom:32px;right:32px;padding:0;border-top:none}  .confirm-cancel-modal .ant-modal-footer button{margin-right:12px;margin-left:0}  .confirm-cancel-modal .ant-modal-footer button:first-child{background:#23c6c8;color:#fff}  .confirm-cancel-modal .ant-modal-footer button:last-child{margin-right:0}.icon-more-btn[_ngcontent-%COMP%]{display:inline-block;height:30px;line-height:30px}.edit-more-menu[_ngcontent-%COMP%]{width:180px;background:#fff}.edit-more-menu[_ngcontent-%COMP%]   .edit-operate-item[_ngcontent-%COMP%]{padding:8px 12px 8px 15px;display:flex;align-items:center}.edit-more-menu[_ngcontent-%COMP%]   .wide-mode-tips[_ngcontent-%COMP%]{color:#999;padding:0 12px 8px 15px;border-bottom:1px solid #e8e8e8;font-size:12px}.edit-more-menu[_ngcontent-%COMP%]   .switch-item[_ngcontent-%COMP%]{justify-content:space-between}[_nghost-%COMP%]     #create-select-directory .category-item-desc{margin-top:5px}"]}),e}()},wZW1:function(e,t,n){"use strict";var i=n("twO/"),o=n("Meht"),r=n("fywt"),a=n("LV2V"),c=n("GCEQ"),l=n("qAkX"),s=Object(a.a)(function(e){var t=Object(l.a)(e),n=Object(i.a)(e,c.a);return t===Object(l.a)(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?Object(o.a)(n,Object(r.a)(t,2)):[]});t.a=s},xGaz:function(e,t,n){"use strict";n.d(t,"a",function(){return R});var i=n("mrSG"),o=n("fXoL"),r=n("y7eE"),a=n("nYR2"),c=n("XNiG"),l=n("l5mm"),s=n("PqYM"),d=n("6eBy"),p=n("A/Mn"),u=n("bNXi"),m=n("sYmb"),h=n("dEAy"),g=n("tyNb"),f=n("UJq8"),v=n("ofXK"),b=n("1JWf"),C=n("QWGN"),y=n("mLQb"),x=n("tSLD"),w=n("lOo3"),_=n("3Pt+"),O=["isAnonymousComment"];function S(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",15),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.CommentsList.length)}}function E(e,t){if(1&e&&o["\u0275\u0275element"](0,"comment-item",20),2&e){var n=o["\u0275\u0275nextContext"](),i=n.$implicit,r=n.index,a=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("item",i)("index",r)("updateComment",a.updateComment)("isEditingComment",a.isEditingComment&&"wiki"===(null==i||null==i.comments[0]?null:i.comments[0].category))}}function M(e,t){if(1&e&&o["\u0275\u0275element"](0,"annotation-item",21),2&e){var n=o["\u0275\u0275nextContext"](),i=n.$implicit,r=n.index,a=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("item",i)("index",r)("creatorId",a.creatorId)("articleId",a.articleId)("isAnonymous",a.isAnonymous)}}function P(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",17),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).toggeleActiveClass(e)}),o["\u0275\u0275template"](2,E,1,4,"comment-item",18),o["\u0275\u0275template"](3,M,1,5,"annotation-item",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](i.commentGuid&&i.commentGuid==r.activeCommentGuid?"active-annotation-styl":""),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.commentGuid&&i.comments&&i.comments[0]),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.commentGuid)}}function I(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275template"](1,P,4,4,"div",16),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",n.CommentsList)}}function k(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",22),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"EMPTY_TIP")," "))}function T(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"espace-share",23),o["\u0275\u0275listener"]("modelShowCloseChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().getModelShowCtrl(e)})("shareDetailChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().shareData=e})("espaceParamsChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().espaceParams=e}),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("currentUserId",i.current_user_id)("currentDomain",i.currentDomain)("sn",i.sn)("shareDetail",i.shareData)("espaceParams",i.espaceParams)}}function D(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",24),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().showTextarea()}),o["\u0275\u0275element"](1,"comment-input",25),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("readOnly",!1)("needSendIcon",!1))}function A(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",26),o["\u0275\u0275elementStart"](1,"div",27),o["\u0275\u0275elementStart"](2,"div",28),o["\u0275\u0275elementStart"](3,"textarea",29),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().newCommentText=e}),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",30),o["\u0275\u0275elementStart"](6,"span",31),o["\u0275\u0275elementStart"](7,"input",32),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().isNotify=e})("change",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().handlerNotifyChange()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"span"),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"span",31),o["\u0275\u0275elementStart"](12,"input",33,34),o["\u0275\u0275listener"]("ngModelChange",function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().isAnonymous=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"span"),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"button",35),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().postComment()}),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](4,8,"KNOWLEDGE_BASE_COMMENT_PLACEHOLDER")),o["\u0275\u0275property"]("ngModel",i.newCommentText),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",i.isNotify),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](10,10,i.isCoe?"NOTIFY_AUTHOR_AND_COE":"NOTIFY_AUTHOR")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",i.isAnonymous),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](16,12,"ANONYMOUS_POST")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!i.newCommentText.length),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](19,14,"COMMENT"))}}var z=function(e){return{height:e}},R=function(){function e(e,t,n,i,r,a){this.knowledgeService=e,this.notification=t,this.translate=n,this.modal=i,this.activeRoute=r,this.emitService=a,this.isCoe=!1,this.creatorId="",this.onlyShowAnnotation=!1,this.isEventReport=!1,this.close=new o.EventEmitter,this.updateComment={content:""},this.current_item_id=null,this.showShareTip=!1,this.refreshContentEventSubject=new c.a,this.getContentEventSubject=new c.a,this.isNotify=!1,this.showTextareaCtrl=!1,this.firstClick=!0,this.cancelEditComment=function(e){this.updateComment.content=e.content,this.isEditingComment=!1},this.decodeHtml=function(e){return e?e.replace(/&lt;/g,"<").replace(/&gt;/g,">"):""}}return e.prototype.ngOnDestroy=function(){this.currentUserChanges.unsubscribe(),this.eventSubscriber.unsubscribe()},e.prototype.ngOnInit=function(){var e,t,n=this;this.activeRoute.paramMap.subscribe(function(e){n.currentDomain=n.currentDomain||Number(n.activeRoute.snapshot.parent.params.domain_id),n.sn=n.sn||e.get("sn")}),this.CommentsList=[],this.newCommentText="",this.isAnonymous=!1,this.isEditingComment=!1,this.currentUserChanges=window.communicationService.currentUser$.subscribe(function(e){e&&(n.current_user_id=e.user_id,n.current_user_account=e.huawei_id,n.currentUsername=e.user_name)}),this.articleId&&((null===(e=this.reversionCtrl)||void 0===e?void 0:e.isOnlyShowCountersign)||(null===(t=this.reversionCtrl)||void 0===t?void 0:t.isOnlyShowAnnotation)?this.getReversionComments():this.getComments(this.articleId)),this.commentParam&&(this.shared_by=this.commentParam.indexOf("_")>-1?this.commentParam.split("_")[1]:this.commentParam,this.comment_id=this.commentParam.indexOf("_")>-1?this.commentParam.split("_")[0]:"",this.knowledgeService.getUserInfo(this.shared_by).subscribe(function(e){n.sharedUserInfo=e},function(){}),this.showShareTip=!0),this.eventSubscriber=this.emitService.eventEmit.subscribe(function(e){if(e&&e.type)switch(e.type){case"wiki-comment::topComment":n.topComment(e.comment_item,e.index);break;case"wiki-comment::likeComment":n.likeComment(e.comment_item);break;case"wiki-comment::getVotersIdArray":n.getVotersIdArray(e.voters);break;case"wiki-comment::editComment":n.editComment(e.comment_item);break;case"wiki-comment::shareComment":n.shareComment(e.item);break;case"wiki-comment::deleteComment":n.deleteComment(e.comment_id);break;case"wiki-comment::cancelEditComment":n.cancelEditComment(e.item);break;case"wiki-comment::updateCommentContent":n.updateCommentContent(e.item);break;case"article-comment::add-annotation-after":n.getCommentsPosition();break;case"article-comment::addAnnotation":case"wiki::close-annotation-discussion":n.getComments(n.articleId),n.findFinishedDom(e.commentGuid,"","annotation"),n.activeCommentGuid=e.commentGuid;break;case"article-comment::clickAnnotationSpan":n.findFinishedDom(e.commentGuid,"","annotation"),n.activeCommentGuid=e.commentGuid;break;case"review-countersign-refresh-comment":n.getComments(n.articleId);break;case"wiki-comment::replyAnnotationCommentPostSuccess":n.refreshDataAfterAnnotationReply();break;case"wiki-comment::deleteAnnotationComment":n.judgeAnnotationDelete(e),n.getCommentsPosition()}})},e.prototype.ngOnChanges=function(e){var t,n,i,o,r=this;(null===(t=null==e?void 0:e.articleId)||void 0===t?void 0:t.currentValue)&&(null===(n=null==e?void 0:e.articleId)||void 0===n?void 0:n.previousValue)&&(null===(i=null==e?void 0:e.articleId)||void 0===i?void 0:i.currentValue)!=(null===(o=null==e?void 0:e.articleId)||void 0===o?void 0:o.previousValue)&&(e.articleId.currentValue&&(this.isNotify=!1,this.isAnonymous=!1,this.newCommentText="",setTimeout(function(){r.refreshContentEventSubject.next({refreshContent:r.newCommentText})})),this.getComments(this.articleId)),e.reversionCtrl&&this.getReversionComments()},e.prototype.getCommentsPosition=function(){var e=this,t=document.querySelector("#scrollParentWikiComment"),n=t.scrollTop;this.knowledgeService.searchComments({entity_id:this.articleId}).subscribe(function(i){i&&i.data?(e.CommentsList=e.filterArrData(i),e.emitService.emit({type:"comment:refresh-num"})):e.CommentsList=[],setTimeout(function(){t.scrollTop=n},300)},function(){})},e.prototype.toggeleActiveClass=function(e){e.commentGuid&&(this.activeCommentGuid=e.commentGuid,this.emitService.emit({type:"article-comment::annotation-item-click",commentGuid:this.activeCommentGuid}))},e.prototype.commentImgAddLink=function(){for(var e=document.getElementById("scrollParentWikiComment").getElementsByTagName("img"),t=0;t<e.length;t++)e[t].addEventListener("click",this.imgAddLink)},e.prototype.imgAddLink=function(e){var t=window.location.origin+e.currentTarget.getAttribute("src");window.open(t,"_blank")},e.prototype.findFinishedDom=function(e,t,n){var i=this,o=Object(l.a)(100).pipe(Object(d.a)(function(e){return Object(s.a)(3*e)})).subscribe(function(r){n&&"annotation"==n?document.querySelector("[data-highlight-comment-uuid="+e+"]")&&(setTimeout(function(){i.positionActiveElement(e,"scrollParentArticle",n)}),o.unsubscribe()):n&&"comment"==n&&document.querySelector('[id="'+e+']"')&&(setTimeout(function(){t&&"img"==t?i.commentImgAddLink():i.positionActiveElement(e,"scrollParentArticle",n)}),o.unsubscribe())})},e.prototype.positionActiveElement=function(e,t,n){var i,o,r,a,c,l,s=document.getElementById("scrollParentWikiComment"),d=document.getElementById("topPositionWikiComment").getBoundingClientRect(),p=document.getElementById("bottomPositionWikiComment"),u=p&&p.getBoundingClientRect(),m=s.getBoundingClientRect();if("annotation"==n)o=(i=document.querySelector("#"+t))&&i.scrollTop,a=(r=document.querySelector("[data-highlight-uuid="+e+"]"))&&r.offsetTop,c=document.querySelector("[data-highlight-comment-uuid="+e+"]").getBoundingClientRect(),l=Math.abs(c.top-d.top)-(a-o);else if("comment"==n){var h=document.getElementById(e).getBoundingClientRect();Math.abs(h.top-d.top)}var g=u.top-d.top-m.height+20;l>g&&(l=g),s.scrollTop=l},e.prototype.getUserDisplayName=function(e){return Object(r.a)(e)?null:"en"==this.translate.currentLang&&e.name_full?e.name_full:e.name+" "+e.account},e.prototype.shareComment=function(e){this.espaceCommentShareCtrl=!0,this.shareData={id:this.articleId,type:e.type,category:e.category+"-comment",entity_type:"wiki"},this.espaceParams={comment_id:e.id}},e.prototype.getModelShowCtrl=function(e){this.espaceCommentShareCtrl=!1},e.prototype.getComments=function(e){var t=this;this.loading=!0;var n={entity_id:this.articleId};this.isEventReport&&(n.type="anonymize"),this.knowledgeService.searchComments(n).subscribe(function(e){e&&e.data&&(t.sortValue(t.filterArrData(e)),t.commentParam&&setTimeout(function(){t.findFinishedDom(t.comment_id,"","comment")}))},function(){})},e.prototype.getReversionComments=function(){var e=this;this.knowledgeService.queryBaseLineComments({entity_id:this.articleId,baseline_id:this.baselineId}).subscribe(function(t){e.CommentsList=(null==t?void 0:t.data)?e.filterArrData(t):[]},function(){})},e.prototype.filterArrData=function(e){var t,n,o=this,r=e.data;return(null===(t=this.reversionCtrl)||void 0===t?void 0:t.isOnlyShowAnnotation)&&(r=r.filter(function(e){return"annotation"===e.commentType})),(null===(n=this.reversionCtrl)||void 0===n?void 0:n.isOnlyShowCountersign)&&(r=r.filter(function(e){return"countersign"===e.commentType})),r.forEach(function(e){var t;if(e.commentGuid){var n=[];e.comments.forEach(function(e){o.flatAnnotationChildren(e,n)}),n.reduce(function(e,t){return e.includes(t.parent_id)||e.push(t.parent_id),e},[]).map(function(e){return n.filter(function(t){return t.parent_id===e})}).forEach(function(t){var n,o=e.comments.findIndex(function(e){return e.id===t[0].parent_id});(n=e.comments).splice.apply(n,Object(i.i)([o+1,0],t))})}e.comments&&(null===(t=e.comments)||void 0===t||t.forEach(function(t){t.commentType=e.commentType}))}),r},e.prototype.flatAnnotationChildren=function(e,t){var n,i=this;(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.forEach(function(n){n.parentObj=e,n.replayUserName=e.submitted_by.name,n.replayUserAccount=e.submitted_by.account,t.push(n),i.flatAnnotationChildren(n,t)})},e.prototype.sortValue=function(e){this.CommentsList=e;var t=this.CommentsList&&this.CommentsList.length;if(this.emitService.emit({event:"comment:refresh-num"}),this.loading=!1,t>0){var n=this.CommentsList[t-1];n.commentGuid?this.findFinishedDom(n.commentGuid,"","annotation"):this.findFinishedDom(n.comments[0].id,"img","comment")}},e.prototype.showTextarea=function(){var e=this;this.showTextareaCtrl=!0,this.firstClick=!0,setTimeout(function(){e.firstClick=!1,document.querySelector("#comment-input-textarea").focus()},500)},e.prototype.refreshDataAfterAnnotationReply=function(){this.newCommentText="",this.emitService.emit({type:"comment:refresh-num"}),this.getComments(this.articleId),this.showTextareaCtrl=!1},e.prototype.postComment=function(){var e=this;if(!Object(r.a)(this.newCommentText)){this.loading=!0;var t,n=filterXSS(this.newCommentText),o={entity_id:this.articleId,category:"wiki",submitted_by:this.current_user_id,content:n,system_add:0,anonymous:this.isAnonymous,sendEspace:this.isNotify,sendCOE:this.isCoe,url:location.href,receiver:this.creatorId};if(this.commentParam){var c={shared_by:this.commentParam.indexOf("_")>-1?this.commentParam.split("_")[1]:this.commentParam};t=Object(i.a)(Object(i.a)({},o),c)}else t=o;this.knowledgeService.postComment(t).pipe(Object(a.a)(function(){e.newCommentText="",setTimeout(function(){e.refreshContentEventSubject.next({refreshContent:e.newCommentText})})})).subscribe(function(t){e.emitService.emit({type:"comment:refresh-num"}),e.getComments(e.articleId),e.notification.success(e.translate.instant("ADD_POST_SUCCESS"),""),e.showTextareaCtrl=!1},function(){}),window.hwa("trackStructEvent",{label:"\u8bc4\u8bba"})}},e.prototype.hiddenFunc=function(){this.firstClick||(this.showTextareaCtrl=!1)},e.prototype.refreshCommentList=function(e,t,n,i){for(var o=0;o<t.length;o++)t[o].comments[0].id==e&&(i&&"delete"==i?t.splice(o,1):t[o].comments[0]=n);var r=t.length;if(this.emitService.emit({event:"comment:refresh-num"}),r>0){var a=this.CommentsList[r-1];a.commentGuid?this.findFinishedDom(a.commentGuid,"","annotation"):this.findFinishedDom(a.comments[0].id,"img","comment")}},e.prototype.deleteComment=function(e){var t=this;this.modal.error({nzTitle:this.translate.instant("COMMENT_DELETE_CONFIRM"),nzContent:"",nzOkText:this.translate.instant("COMMON_BUTTON_CONFIRM"),nzOkType:"danger",nzOnOk:function(){t.confirmDelete(e)},nzCancelText:this.translate.instant("COMMON_BUTTON_CANCLE")})},e.prototype.confirmDelete=function(e){var t=this;this.knowledgeService.deleteComment(e).subscribe(function(n){t.notification.success(t.translate.instant("DELETE_SUCCESS"),""),t.refreshCommentList(e,t.CommentsList,null,"delete")},function(){})},e.prototype.topComment=function(e,t){var n,i=this;switch(e.status){case 0:n=2;break;case 2:n=0}var o={content:filterXSS(e.content),user_id:this.current_user_id,id:e.id,status:n};this.knowledgeService.updateComment(e.id,o).subscribe(function(e){2==e.status&&i.notification.success(i.translate.instant("SUCCESSFUL_OPERATION"),""),i.getComments(i.articleId)},function(){})},e.prototype.likeComment=function(e){var t=this,n={voter:Number(this.current_user_id)};this.knowledgeService.updateComment(e.id,n).subscribe(function(n){t.refreshCommentList(e.id,t.CommentsList,n,null)},function(){})},e.prototype.editComment=function(e){this.current_item_id=e.id,e.content=this.decodeHtml(e.content),this.updateComment.content=e.content,this.isEditingComment=!0},e.prototype.updateCommentContent=function(e){var t=this;if(Object(r.a)(e)||!e.id||e.content==this.updateComment.content)return e.content=filterXSS(e.content),void(this.isEditingComment=!1);var n={content:filterXSS(this.updateComment.content),user_id:this.current_user_id,id:e.id,status:e.status};this.knowledgeService.updateComment(e.id,n).subscribe(function(e){t.getCommentsPosition(),t.notification.success(t.translate.instant("SAVEED_SUCCESS"),""),t.isEditingComment=!1},function(){t.isEditingComment=!1})},e.prototype.getVotersIdArray=function(e){return Object(r.a)(e)?[]:e.map(function(e){return e.id})},e.prototype.closePanel=function(){var e=this;setTimeout(function(){e.close.emit()})},e.prototype.handlerNotifyChange=function(){this.isNotify?(this.isAnonymousComment.nativeElement.setAttribute("disabled",""),this.isAnonymous=!1):this.isAnonymousComment.nativeElement.removeAttribute("disabled","")},e.prototype.judgeAnnotationDelete=function(e){1===this.CommentsList.find(function(t){return t.commentGuid===e.commentGuid}).comments.filter(function(e){return e.content}).length&&(this.emitService.emit({type:"wiki::close-annotation",commentGuid:e.commentGuid}),this.emitService.emit({type:"comment:refresh-num"}))},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](p.b),o["\u0275\u0275directiveInject"](u.b),o["\u0275\u0275directiveInject"](m.c),o["\u0275\u0275directiveInject"](h.d),o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](f.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["article-wiki-comment"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](O,1),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.isAnonymousComment=n.first)},inputs:{articleId:"articleId",commentParam:"commentParam",isCoe:"isCoe",creatorId:"creatorId",onlyShowAnnotation:"onlyShowAnnotation",baselineId:"baselineId",reversionCtrl:"reversionCtrl",currentDomain:"currentDomain",sn:"sn",isEventReport:"isEventReport"},outputs:{close:"close"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:17,vars:13,consts:[[1,"wiki-comment"],[1,"select-wrapper"],[1,"iconfont","icon-to-right","margin-more-span",3,"click"],[1,"m-l-10"],["class","m-l-10 comment-num",4,"ngIf"],["id","scrollParentWikiComment",1,"comment-list",3,"ngStyle"],["id","topPositionWikiComment",1,"position-div-styl"],[4,"ngIf"],["class","text-center",4,"ngIf"],["id","bottomPositionWikiComment",1,"position-div-styl"],[3,"currentUserId","currentDomain","sn","shareDetail","espaceParams","modelShowCloseChange","shareDetailChange","espaceParamsChange",4,"ngIf"],["clickElementOutside","",1,"comment-input",3,"hidden","clickOutside"],[1,"comment-input-wrapper"],["class","comment-input-styl",3,"click",4,"ngIf"],["class","comment-input-styl",4,"ngIf"],[1,"m-l-10","comment-num"],[4,"ngFor","ngForOf"],[1,"comment-annotation-styl",3,"click"],[3,"item","index","updateComment","isEditingComment",4,"ngIf"],[3,"item","index","creatorId","articleId","isAnonymous",4,"ngIf"],[3,"item","index","updateComment","isEditingComment"],[3,"item","index","creatorId","articleId","isAnonymous"],[1,"text-center"],[3,"currentUserId","currentDomain","sn","shareDetail","espaceParams","modelShowCloseChange","shareDetailChange","espaceParamsChange"],[1,"comment-input-styl",3,"click"],[3,"readOnly","needSendIcon"],[1,"comment-input-styl"],[1,"comment-post"],[1,"flex-box","full-width"],["id","comment-input-textarea",1,"textarea-comment-style",3,"ngModel","placeholder","ngModelChange"],[1,"txt-r","p-h-5","comment-post-btns"],[1,"vertical-middle","comment-button-container"],["type","checkbox",1,"vertical-top","input-middle-margin",3,"ngModel","ngModelChange","change"],["type","checkbox",1,"vertical-top","input-middle-margin",3,"ngModel","ngModelChange"],["isAnonymousComment",""],[1,"btn","btn-info","btn-sm","f-12","save-btn","m-r-10",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"span",2),o["\u0275\u0275listener"]("click",function(){return t.closePanel()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",3),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,S,2,1,"span",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275element"](8,"div",6),o["\u0275\u0275template"](9,I,2,1,"div",7),o["\u0275\u0275template"](10,k,3,3,"div",8),o["\u0275\u0275element"](11,"div",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,T,1,5,"espace-share",10),o["\u0275\u0275elementStart"](13,"div",11),o["\u0275\u0275listener"]("clickOutside",function(){return t.hiddenFunc()}),o["\u0275\u0275elementStart"](14,"div",12),o["\u0275\u0275template"](15,D,2,2,"div",13),o["\u0275\u0275template"](16,A,20,16,"div",14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,9,"ALL_COMMENTS")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.CommentsList&&t.CommentsList.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](11,z,t.reversionCtrl?"calc(100% - 105px)":"")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.CommentsList&&t.CommentsList.length>0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.CommentsList||t.CommentsList&&0==t.CommentsList.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.espaceCommentShareCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden",(null==t.reversionCtrl?null:t.reversionCtrl.isOnlyShowCountersign)||(null==t.reversionCtrl?null:t.reversionCtrl.isOnlyShowAnnotation)||t.isEventReport),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.showTextareaCtrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showTextareaCtrl))},directives:[v.n,v.o,b.a,v.m,C.a,y.a,x.a,w.a,_.d,_.k,_.l,_.c],pipes:[m.b],styles:[".wiki-comment[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}.wiki-comment[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]{height:55px;display:flex;align-items:center;top:0;left:0}.wiki-comment[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .margin-more-span[_ngcontent-%COMP%]{margin-left:20px;font-size:16px;cursor:pointer}.wiki-comment[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .comment-num[_ngcontent-%COMP%]{color:#999}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]{height:calc(100% - 145px);position:relative;left:0;overflow-y:scroll;padding:0 20px 4px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .active-annotation-styl[_ngcontent-%COMP%]{border:1px solid #23c6c8!important}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .position-div-styl[_ngcontent-%COMP%]{height:1px;width:100%;background:transparent}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dbdbdb;border-radius:5px;box-shadow:none;margin-bottom:16px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]{padding:10px 10px 0}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]{display:flex;padding-bottom:10px;position:relative}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-right:10px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]{flex:1}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]{color:#999}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .name-time[_ngcontent-%COMP%]   .comment-time[_ngcontent-%COMP%]{font-size:12px;line-height:10px;color:#999}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]{float:right;position:absolute;right:0}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-left:9px;font-size:14px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item.active[_ngcontent-%COMP%]{display:inline-block;color:#23c6c8}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]:hover   .comment-top[_ngcontent-%COMP%]   .comment-operations[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]{display:inline-block}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{padding-left:35px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .is-editing-comment-styl[_ngcontent-%COMP%]{max-width:100%;margin-bottom:3px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .is-editing-comment-styl[_ngcontent-%COMP%]   .textarea-comment-style[_ngcontent-%COMP%]{width:100%;height:197px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-update-textarea[_ngcontent-%COMP%]{height:150px;min-height:80px;width:100%;max-width:100%;border-radius:3px;display:inline-block;border-color:#d7d7d7}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-edit-btns[_ngcontent-%COMP%]{text-align:right;margin-bottom:10px;position:relative}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .user-tip-close[_ngcontent-%COMP%]{font-size:15px;color:#666;position:absolute;top:0;bottom:0;right:5px}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-push[_ngcontent-%COMP%]{background:#ffffe0;font-size:10px;position:relative}.wiki-comment[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   .comment-annotation-styl[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.wiki-comment[_ngcontent-%COMP%]   .comment-input[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:0;right:0;background:#fff;box-shadow:4px -2px 4px #e5e5e5}.wiki-comment[_ngcontent-%COMP%]   .comment-input[_ngcontent-%COMP%]   .comment-input-wrapper[_ngcontent-%COMP%]{padding:17px 20px;border-top:1px solid #dbdbdb}.wiki-comment[_ngcontent-%COMP%]   .comment-button-container[_ngcontent-%COMP%]{padding:3px 10px}.wiki-comment[_ngcontent-%COMP%]   .comment-post[_ngcontent-%COMP%]{height:200px;overflow:auto;margin-bottom:10px}.wiki-comment[_ngcontent-%COMP%]   .comment-post[_ngcontent-%COMP%]   .comment-post-input[_ngcontent-%COMP%]{resize:none;flex:1;border-radius:3px;display:inline-block;min-height:80px;border-color:#d7d7d7}.wiki-comment[_ngcontent-%COMP%]   .comment-post[_ngcontent-%COMP%]   .input-middle-margin[_ngcontent-%COMP%]{margin:7px 5px 0 0;cursor:pointer}.wiki-comment[_ngcontent-%COMP%]   .comment-post[_ngcontent-%COMP%]   .flex-box[_ngcontent-%COMP%]   .textarea-comment-style[_ngcontent-%COMP%]{width:100%;height:197px;border:none;outline:none}.wiki-comment[_ngcontent-%COMP%]   .comment-input-styl[_ngcontent-%COMP%]{border:1px solid #dbdbdb;border-radius:5px}"]}),e}()},yd89:function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,r=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{i||null==c.return||c.return()}finally{if(o)throw r}}return n}}},yg7y:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),o=function(){function e(){}return e.prototype.transform=function(e,t){if(null==e)return!0;switch(Object.prototype.toString.call(e).slice(8,-1)){case"String":return 0==e.length;case"Array":return!e.length;case"Object":return!Object.keys(e).length;default:return!1}},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"isEmpty",type:e,pure:!0}),e}()},z4NU:function(e,t,n){"use strict";n.d(t,"m",function(){return i}),n.d(t,"l",function(){return o}),n.d(t,"k",function(){return r}),n.d(t,"o",function(){return a}),n.d(t,"j",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return s}),n.d(t,"q",function(){return d}),n.d(t,"p",function(){return p}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return m}),n.d(t,"i",function(){return h}),n.d(t,"c",function(){return g}),n.d(t,"d",function(){return f}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return b}),n.d(t,"n",function(){return C});var i={DEFAULT:"iconfont icon-task-list",Epic:"iconfont icon-crown",Feature:"iconfont icon-cup",Task:"iconfont icon-task",TaskGroup:"iconfont icon-taskGroup",Issue:"iconfont icon-issue",Story:"iconfont icon-story",US:"iconfont icon-story",DistributeRR:"iconfont icon-bulb",OriginalFE:"iconfont icon-cup","04000002":"iconfont icon-bug","04000001":"iconfont icon-bug","02001003":"iconfont icon-task-list",ServiceFeature:"iconfont icon-bulb"},o={DEFAULT:"#333333",Disabled:"#CCCCCC",Story:"#23C6C8",US:"#23C6C8",TaskGroup:"#61B930",Issue:"#FF9191",Task:"#4FB5EE",Epic:"#E79E56",Feature:"#8D71C6",ISSUE:"#FF9191",VULNERABILITY:"#f07d72",VUL:"#f07d72",RR:"#3478ff",IR:"#3fd0b3",BUG:"#ad0202",coe:"#ad0202",COE:"#ad0202",DistributeRR:"#3478ff",OriginalFE:"#8D71C6","01001001":"#3478ff","02001001":"#3fd0b3","02001003":"#2cd5f4","04000001":"#ad0202","04000002":"#ad0202","04000003":"#ad0202","04000004":"#ad0202",ServiceFeature:"#beb616"},r={DEFAULT:"DEFAULT",Story:"Story",RR:"RR",BUG:"BUG",US:"US",TaskGroup:"TG",Issue:"Issue",Task:"Task",Epic:"Epic",Feature:"FE","04000002":"BUG","04000001":"BUG","02001003":"US","04000004":"COE",ServiceFeature:"SF",DistributeRR:"RR",VULNERABILITY:"VUL"},a={POST:"#49cc90",PUT:"#fca130",GET:"#61affe",DELETE:"#f93e3e",HEAD:"#7560c6",OPTIONS:"#5588cc",TRACE:"#f087ba",PATCH:"#23c6c8"},c={DELETE_WORK:"iconfont icon-trash f-17",ADD_UPPER_LEVEL:"iconfont icon-plus f-13",TRANSFER_ITERATION:"iconfont icon-map-pin f-14",LINK_EXISTS_WORK:"iconfont icon-relation f-13",BREAK_DOWN_LEVEL_WORK:"iconfont icon-plus f-13",BREAK_DOWN_LEVEL_TASK:"iconfont icon-multi-layers f-13",DISASSOCIATE_UPPER_LEVEL_ASSOCIATION:"iconfont icon-cancel-association f-13",ACTIVENESS_SHIFTS_JOB:"iconfont icon-circle-clock f-13",BACKLOG_SHIFTS_JOB:"iconfont icon-circle-hourglass f-13"},l={DEFAULT:"RR","01001001":"RR","02001001":"IR","02001002":"SvR","02001003":"US","02001004":"NA","03001001":"EP","03001002":"FE","04001001":"DE","04001002":"DE","04000001":"BUG","04000002":"BUG","04000003":"BUG","05001001":"TX",document:"Wiki",coe:"COE",BUG:"BUG"},s={DEFAULT:"RR-outline","01001001":"RR-outline","02001001":"IR-outline","02001002":"SVR-outline","02001003":"story-outline","02001004":"undefined-outline","03001001":"epic-outline","03001002":"feature-outline","04001001":"bug-outline","04001002":"bug-outline","04000001":"bug-outline","04000002":"bug-outline","04000003":"bug-outline","05001001":"TX-outline"},d={DEFAULT:"iconfont icon-clock",TODO:"iconfont icon-Untreated",DOING:"iconfont icon-processing",DONE:"iconfont icon-completed","\u5f85\u5904\u7406":"iconfont icon-Untreated","\u5904\u7406\u4e2d":"iconfont icon-processing","\u5df2\u5b8c\u6210":"iconfont icon-completed","\u8bbe\u8ba1":"iconfont icon-design","\u5f00\u53d1":"iconfont icon-develop","\u6d4b\u8bd5":"iconfont icon-test","\u53d1\u5e03":"iconfont icon-publish","\u5df2\u4e0a\u7ebf":"iconfont icon-online","\u95ed\u73af":"iconfont icon-completed",TRANSFER:"fa fa-line-chart",SUBMITTED:"iconfont icon-Untreated",ACCEPTED:"iconfont icon-completed",REJECTED:"iconfont icon-del",CANCEL:"iconfont icon-del",VULN_INIT:"iconfont icon-Untreated",VULN_CHANGED:"iconfont icon-completed",VULN_PUBLISHED:"iconfont icon-publish",VULN_UNINVOLVED:"iconfont icon-silence",VULN_HOLD:"iconfont icon-circle-pause",VULN_CLOSE:"iconfont icon-completed",VULN_BLOCK:"iconfont icon-circle-pause",SF_STATUS_DESIGN:"iconfont icon-assembly-line",SF_STATUS_DEVELOPING:"iconfont icon-code-development",SF_STATUS_TESTING:"iconfont icon-bottle",SF_STATUS_RELEASED:"iconfont icon-commercial-mark",SF_STATUS_CLOSE:"iconfont icon-banned"},p={DEFAULT:"#23C6C8",TODO:"#F9B37D",DOING:"#F9B37D",DONE:"#AAAAAA","\u5f85\u5904\u7406":"#F9B37D","\u5904\u7406\u4e2d":"#23C6C8","\u5df2\u5b8c\u6210":"#AAAAAA","\u8bbe\u8ba1":"#4FB5EE","\u5f00\u53d1":"#528DE6","\u6d4b\u8bd5":"#FF7E86","\u53d1\u5e03":"#23C6C8","\u5df2\u4e0a\u7ebf":"#1AB394","\u95ed\u73af":"#AAAAAA",TRANSFER:"#23C6C8",SUBMITTED:"#F9B37D",ACCEPTED:"#23C6C8",REJECTED:"#FF7E86",CANCEL:"#999999",REQ_STATUS_SUBMIT:"#ffd40c",REQ_STATUS_ANALYSIS:"#ff9b0c",REQ_STATUS_UNDETERMINED:"#ba80d5",REQ_STATUS_PLAN:"#0cd4ff",REQ_STATUS_DEVELOPING:"#0cacff",REQ_STATUS_ONLINE:"#337adb",REQ_STATUS_DONE:"#1ab394",REQ_STATUS_RETURNED:"#ec4758",REQ_STATUS_RELEASE:"#23c6c8",ISSUE_STATUS_SUBMIT:"#ffd40c",ISSUE_STATUS_ANALYSIS:"#ff9b0c",ISSUE_STATUS_FIXING:"#0cacff",WORKITEM_STATUS_PENDING:"#F9B37D",WORKITEM_STATUS_DESIGN:"#4FB5EE",WORKITEM_STATUS_IN_PROGRESS:"#23C6C8",WORKITEM_STATUS_DEVELOPING:"#528DE6",WORKITEM_STATUS_TESTING:"#FF7E86",WORKITEM_STATUS_RELEASED:"#23C6C8",WORKITEM_STATUS_ONLINE:"#1AB394",WORKITEM_STATUS_CLOSED:"#adadad",ISSUE_STATUS_FIXING_PLANNING:"#0cacff66",ISSUE_STATUS_FIXING_CODE:"#0cacff99",ISSUE_STATUS_FIXING_TEST:"#0cacffcc",ISSUE_STATUS_FIXING_DONE:"#0cacff",ISSUE_STATUS_REGRESSION_TEST:"#337adb",ISSUE_STATUS_VERIFYING:"#337adb",ISSUE_STATUS_DONE:"#1ab394",ISSUE_STATUS_RETURNED:"#ec4758",NEGATIVE_STATUS_DISTRIBUTION:"#ffaa00",NEGATIVE_STATUS_ANALYSIS:"#5588cc",NEGATIVE_STATUS_IMPROVE:"#1ab394",NEGATIVE_STATUS_APPLYING_CLOSE:"#ff7e86",NEGATIVE_STATUS_CLOSED:"#aaaaaa",NEGATIVE_STATUS_SUSPEND:"#ff7d63",VULN_INIT:"#F9B37D",VULN_CHANGED:"#1AB394",VULN_PUBLISHED:"#23C6C8",VULN_UNINVOLVED:"#ff7d63",VULN_HOLD:"#AAA",VULN_CLOSE:"#999",VULN_BLOCK:"#AAA",COE_STATUS_DISTRIBUTION:"#ffaa00",COE_STATUS_ANALYSIS:"#5588cc",COE_STATUS_IMPROVE:"#1ab394",COE_STATUS_APPLYING_CLOSE:"#ff7e86",COE_STATUS_CLOSED:"#aaaaaa",COE_STATUS_SUSPEND:"#ff7d63",NORMAL:"#000000A6",TO_BE_EXPIRED:"#F9B37D",EXPIRED:"#f07d72",COE_IMPROVE_DOING:"#23C6C8",COE_IMPROVE_DONE:"#AAAAAA",SF_STATUS_DESIGN:"#ffaa00",SF_STATUS_DEVELOPING:"#23C6C8",SF_STATUS_TESTING:"#4fb5ee",SF_STATUS_RELEASED:"#a595e5",SF_STATUS_CLOSE:"#aaaaaa"},u={DEFAULT:"iconfont icon-clock",RAT_IN_PROGRESS:"iconfont icon-processing",RAT_ENDED:"iconfont icon-completed"},m={DEFAULT:"#676A6C",RAT_IN_PROGRESS:"#F9B37D",RAT_ENDED:"#AAAAAA"},h={"02003001":"text-danger","02003002":"text-warning","02003003":"text-info","02003004":"text-aaaaaa","04008004":"text-danger","04008003":"text-warning","04008002":"text-info","04008001":"text-aaaaaa"},g={DEFAULT:"workitem",Epic:"workitem",Feature:"workitem",ServiceFeature:"workitem",US:"workitem",TaskGroup:"workitem",Task:"workitem",Story:"workitem",Issue:"workitem",RR:"requirement",BUG:"bug","01001001":"requirement","02001001":"requirement","02001002":"requirement","02001003":"requirement","04000001":"bug","04000002":"bug","04000003":"bug",document:"wiki",directory:"wiki"},f={waiting:"#F8AC59",running:"#1BB394",success:"#23c6c8",pause:"#FF7D63",aborted:"#999",unknown:"#EA5F70",failed:"#EA5F70",DEVELOPING:"#4FB5EE",PENDING:"#F8AC59",PUBLISHING:"#1BB394",PUBLISHED:"#23c6c8",CLOSED:"#999"},v={waiting:"fa-clock-o",running:"fa-play-circle",success:"fa-check-circle",pause:"fa-pause-circle",aborted:"fa-minus-circle",unknown:"fa-exclamation-circle",failed:"fa-times-circle"},b={FS_ALL_ONLINE:"#23C6C8",FS_PART_ONLINE:"#5588CC",FS_UN_ONLINE:"#DD5555",WORKITEM_ONLINE:"#23C6C8",WORKITEM_UN_ONLINE:"#DD5555",DEFAULT:"#676A6C"},C={labels:"labels",iterations:"iteration",classify:"classify",release_plans:"releasePlans",owner:"currentOwners",deadline:"deadline",priority:"sysPriority",task_type:"taskType",status:"status",subtasks:"children",discovered_environment:"discoveredEnvironment"}},z4wI:function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"b",function(){return b});var i=n("MGFw"),o=n("WtWf"),r=n("mrSG"),a=n("cH1L"),c=n("FtGj"),l=n("fXoL"),s=n("3Pt+"),d=n("/KA4"),p=n("XNiG"),u=n("1G5W"),m=n("ofXK"),h=n("FwiY"),g=n("u47x"),f=["inputElement"],v=function(){var e=function(){function e(t,n,o,r){Object(i.a)(this,e),this.elementRef=t,this.cdr=n,this.focusMonitor=o,this.directionality=r,this.destroy$=new p.a,this.isFocused=!1,this.disabledUp=!1,this.disabledDown=!1,this.dir="ltr",this.onChange=function(){},this.onTouched=function(){},this.nzBlur=new l.EventEmitter,this.nzFocus=new l.EventEmitter,this.nzSize="default",this.nzMin=-1/0,this.nzMax=1/0,this.nzParser=function(e){return e.trim().replace(/\u3002/g,".").replace(/[^\w\.-]+/g,"")},this.nzPrecisionMode="toFixed",this.nzPlaceHolder="",this.nzStep=1,this.nzInputMode="decimal",this.nzId=null,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzFormatter=function(e){return e},this.elementRef.nativeElement.classList.add("ant-input-number")}return Object(o.a)(e,[{key:"onModelChange",value:function(e){this.parsedValue=this.nzParser(e),this.inputElement.nativeElement.value="".concat(this.parsedValue);var t=this.getCurrentValidValue(this.parsedValue);this.setValue(t)}},{key:"getCurrentValidValue",value:function(e){var t=e;return t=""===t?"":this.isNotCompleteNumber(t)?this.value:"".concat(this.getValidValue(t)),this.toNumber(t)}},{key:"isNotCompleteNumber",value:function(e){return isNaN(e)||""===e||null===e||!(!e||e.toString().indexOf(".")!==e.toString().length-1)}},{key:"getValidValue",value:function(e){var t=parseFloat(e);return isNaN(t)?e:(t<this.nzMin&&(t=this.nzMin),t>this.nzMax&&(t=this.nzMax),t)}},{key:"toNumber",value:function(e){if(this.isNotCompleteNumber(e))return e;var t=String(e);if(t.indexOf(".")>=0&&Object(d.i)(this.nzPrecision)){if("function"==typeof this.nzPrecisionMode)return this.nzPrecisionMode(e,this.nzPrecision);if("cut"===this.nzPrecisionMode){var n=t.split(".");return n[1]=n[1].slice(0,this.nzPrecision),Number(n.join("."))}return Number(Number(e).toFixed(this.nzPrecision))}return Number(e)}},{key:"getRatio",value:function(e){var t=1;return e.metaKey||e.ctrlKey?t=.1:e.shiftKey&&(t=10),t}},{key:"down",value:function(e,t){this.isFocused||this.focus(),this.step("down",e,t)}},{key:"up",value:function(e,t){this.isFocused||this.focus(),this.step("up",e,t)}},{key:"getPrecision",value:function(e){var t=e.toString();if(t.indexOf("e-")>=0)return parseInt(t.slice(t.indexOf("e-")+2),10);var n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}},{key:"getMaxPrecision",value:function(e,t){if(Object(d.i)(this.nzPrecision))return this.nzPrecision;var n=this.getPrecision(t),i=this.getPrecision(this.nzStep),o=this.getPrecision(e);return e?Math.max(o,n+i):n+i}},{key:"getPrecisionFactor",value:function(e,t){var n=this.getMaxPrecision(e,t);return Math.pow(10,n)}},{key:"upStep",value:function(e,t){var n,i=this.getPrecisionFactor(e,t),o=Math.abs(this.getMaxPrecision(e,t));return n="number"==typeof e?((i*e+i*this.nzStep*t)/i).toFixed(o):this.nzMin===-1/0?this.nzStep:this.nzMin,this.toNumber(n)}},{key:"downStep",value:function(e,t){var n,i=this.getPrecisionFactor(e,t),o=Math.abs(this.getMaxPrecision(e,t));return n="number"==typeof e?((i*e-i*this.nzStep*t)/i).toFixed(o):this.nzMin===-1/0?-this.nzStep:this.nzMin,this.toNumber(n)}},{key:"step",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.stop(),t.preventDefault(),!this.nzDisabled){var o=this.getCurrentValidValue(this.parsedValue)||0,r=0;"up"===e?r=this.upStep(o,i):"down"===e&&(r=this.downStep(o,i));var a=r>this.nzMax||r<this.nzMin;r>this.nzMax?r=this.nzMax:r<this.nzMin&&(r=this.nzMin),this.setValue(r),this.updateDisplayValue(r),this.isFocused=!0,a||(this.autoStepTimer=setTimeout(function(){n[e](t,i)},300))}}},{key:"stop",value:function(){this.autoStepTimer&&clearTimeout(this.autoStepTimer)}},{key:"setValue",value:function(e){if("".concat(this.value)!=="".concat(e)&&this.onChange(e),this.value=e,this.parsedValue=e,this.disabledUp=this.disabledDown=!1,e||0===e){var t=Number(e);t>=this.nzMax&&(this.disabledUp=!0),t<=this.nzMin&&(this.disabledDown=!0)}}},{key:"updateDisplayValue",value:function(e){var t=Object(d.i)(this.nzFormatter(e))?this.nzFormatter(e):"";this.displayValue=t,this.inputElement.nativeElement.value="".concat(t)}},{key:"onKeyDown",value:function(e){if(e.keyCode===c.m){var t=this.getRatio(e);this.up(e,t),this.stop()}else if(e.keyCode===c.c){var n=this.getRatio(e);this.down(e,n),this.stop()}else e.keyCode===c.e&&this.updateDisplayValue(this.value)}},{key:"writeValue",value:function(e){this.value=e,this.setValue(e),this.updateDisplayValue(e),this.cdr.markForCheck()}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.nzDisabled=e,this.cdr.markForCheck()}},{key:"focus",value:function(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}},{key:"blur",value:function(){this.inputElement.nativeElement.blur()}},{key:"ngOnInit",value:function(){var e,t=this;this.focusMonitor.monitor(this.elementRef,!0).subscribe(function(e){e?(t.isFocused=!0,t.nzFocus.emit()):(t.isFocused=!1,t.updateDisplayValue(t.value),t.nzBlur.emit(),Promise.resolve().then(function(){return t.onTouched()}))}),this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(Object(u.a)(this.destroy$)).subscribe(function(e){t.dir=e})}},{key:"ngOnChanges",value:function(e){if(e.nzFormatter&&!e.nzFormatter.isFirstChange()){var t=this.getCurrentValidValue(this.parsedValue);this.setValue(t),this.updateDisplayValue(t)}}},{key:"ngAfterViewInit",value:function(){this.nzAutoFocus&&this.focus()}},{key:"ngOnDestroy",value:function(){this.focusMonitor.stopMonitoring(this.elementRef),this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](l.ElementRef),l["\u0275\u0275directiveInject"](l.ChangeDetectorRef),l["\u0275\u0275directiveInject"](g.d),l["\u0275\u0275directiveInject"](a.c,8))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["nz-input-number"]],viewQuery:function(e,t){var n;1&e&&l["\u0275\u0275viewQuery"](f,3),2&e&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.inputElement=n.first)},hostVars:10,hostBindings:function(e,t){2&e&&l["\u0275\u0275classProp"]("ant-input-number-focused",t.isFocused)("ant-input-number-lg","large"===t.nzSize)("ant-input-number-sm","small"===t.nzSize)("ant-input-number-disabled",t.nzDisabled)("ant-input-number-rtl","rtl"===t.dir)},inputs:{nzSize:"nzSize",nzMin:"nzMin",nzMax:"nzMax",nzParser:"nzParser",nzPrecisionMode:"nzPrecisionMode",nzPlaceHolder:"nzPlaceHolder",nzStep:"nzStep",nzInputMode:"nzInputMode",nzId:"nzId",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzFormatter:"nzFormatter",nzPrecision:"nzPrecision"},outputs:{nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzInputNumber"],features:[l["\u0275\u0275ProvidersFeature"]([{provide:s.i,useExisting:Object(l.forwardRef)(function(){return e}),multi:!0}]),l["\u0275\u0275NgOnChangesFeature"]],decls:8,vars:13,consts:[[1,"ant-input-number-handler-wrap"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-up",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","up",1,"ant-input-number-handler-up-inner"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-down",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","down",1,"ant-input-number-handler-down-inner"],[1,"ant-input-number-input-wrap"],["autocomplete","off",1,"ant-input-number-input",3,"disabled","placeholder","ngModel","keydown","keyup","ngModelChange"],["inputElement",""]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"span",1),l["\u0275\u0275listener"]("mousedown",function(e){return t.up(e)})("mouseup",function(){return t.stop()})("mouseleave",function(){return t.stop()}),l["\u0275\u0275element"](2,"i",2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"span",3),l["\u0275\u0275listener"]("mousedown",function(e){return t.down(e)})("mouseup",function(){return t.stop()})("mouseleave",function(){return t.stop()}),l["\u0275\u0275element"](4,"i",4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"div",5),l["\u0275\u0275elementStart"](6,"input",6,7),l["\u0275\u0275listener"]("keydown",function(e){return t.onKeyDown(e)})("keyup",function(){return t.stop()})("ngModelChange",function(e){return t.onModelChange(e)}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275classProp"]("ant-input-number-handler-up-disabled",t.disabledUp),l["\u0275\u0275advance"](2),l["\u0275\u0275classProp"]("ant-input-number-handler-down-disabled",t.disabledDown),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("disabled",t.nzDisabled)("placeholder",t.nzPlaceHolder)("ngModel",t.displayValue),l["\u0275\u0275attribute"]("id",t.nzId)("autofocus",t.nzAutoFocus?"autofocus":null)("min",t.nzMin)("max",t.nzMax)("step",t.nzStep)("inputmode",t.nzInputMode))},directives:[h.a,s.d,s.k,s.l],encapsulation:2,changeDetection:0}),Object(r.c)([Object(d.a)(),Object(r.f)("design:type",Object)],e.prototype,"nzDisabled",void 0),Object(r.c)([Object(d.a)(),Object(r.f)("design:type",Object)],e.prototype,"nzAutoFocus",void 0),e}(),b=function(){var e=Object(o.a)(function e(){Object(i.a)(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[a.a,m.c,s.g,h.b]]}),e}()},z9gd:function(e,t,n){"use strict";n("wZee"),n("ki2X"),n("sTAn"),n("PSGn"),n("85O/"),n("huE1"),n("lSgE"),n("kfgK"),n("GYl3"),n("gAkk"),n("r4oG"),n("Yhcd"),n("jpss"),n("RX2a")},"zB/H":function(e,t,n){"use strict";var i=n("mbIT"),o=n("GMZp"),r=n("pshJ"),a=n("LBXl");function c(e){return e.reduce(function(e,t){return e.concat(t instanceof a.UnsubscriptionError?t.errors:t)},[])}t.Subscription=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,l=n._parentOrParents,s=n._unsubscribe,d=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,l instanceof e)l.remove(this);else if(null!==l)for(var p=0;p<l.length;++p)l[p].remove(this);if(r.isFunction(s))try{s.call(this)}catch(h){t=h instanceof a.UnsubscriptionError?c(h.errors):[h]}if(i.isArray(d)){p=-1;for(var u=d.length;++p<u;){var m=d[p];if(o.isObject(m))try{m.unsubscribe()}catch(h){t=t||[],h instanceof a.UnsubscriptionError?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new a.UnsubscriptionError(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof e){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}()},zvoC:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("fXoL"),o=n("sYmb"),r=n("ofXK");function a(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.navigatioList[n.navigatioList.length-1].title)}}function c(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",10),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2).index,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"]("table"===o.category&&n===o.navigatioList.length-2?"|":"/")}}function l(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"a",8),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().clickEmitHandler(e)}),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,c,2,1,"span",9),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var o=i["\u0275\u0275nextContext"](),r=o.$implicit,a=o.last,l=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("active-nav",l.activeSn==r.sn)("nav-not-allowed",""==r.sn),i["\u0275\u0275property"]("title",r.title),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("",r.title," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!a)}}function s(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",6),i["\u0275\u0275template"](1,l,4,7,"ng-container",7),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,o=t.last,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.title&&!("table"===r.category&&o))}}function d(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",11),i["\u0275\u0275elementStart"](1,"span",12),i["\u0275\u0275projection"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function p(e,t){1&e&&(i["\u0275\u0275element"](0,"span",13),i["\u0275\u0275pipe"](1,"translate")),2&e&&i["\u0275\u0275property"]("textContent",i["\u0275\u0275pipeBind1"](1,1,"SAVED"))}var u=["*"],m=function(){function e(e){this.translate=e,this.navigatioList=[],this.haveSave=!1,this.clickEmit=new i.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.clickEmitHandler=function(e){this.clickEmit.emit(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.c))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["navigation-list"]],inputs:{navigatioList:"navigatioList",category:"category",activeSn:"activeSn",haveSave:"haveSave"},outputs:{clickEmit:"clickEmit"},ngContentSelectors:u,decls:5,vars:4,consts:[["class","table-title",4,"ngIf"],[1,"knowledge-nav","text-ellipsis"],["class","knowledge-nav-item",4,"ngFor","ngForOf"],["class","info",4,"ngIf"],["style","margin: 0 12px",3,"textContent",4,"ngIf"],[1,"table-title"],[1,"knowledge-nav-item"],[4,"ngIf"],[1,"text-ellipsis","nav-item-width",3,"title","click"],["class","split-line-top",4,"ngIf"],[1,"split-line-top"],[1,"info"],[1,"table-content"],[2,"margin","0 12px",3,"textContent"]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275template"](0,a,2,1,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,s,2,1,"span",2),i["\u0275\u0275template"](3,d,3,0,"span",3),i["\u0275\u0275template"](4,p,2,3,"span",4),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("ngIf","table"===t.category),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.navigatioList),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","table"===t.category),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.haveSave))},directives:[r.n,r.m],pipes:[o.b],styles:[".table-title[_ngcontent-%COMP%]{margin-top:-5px;margin-bottom:-5px;font-size:18px;font-weight:700}.knowledge-nav[_ngcontent-%COMP%], .table-title[_ngcontent-%COMP%]{margin-left:10px;max-width:calc(100% - 485px)}.knowledge-nav[_ngcontent-%COMP%]{color:#aaa;font-size:14px;line-height:24px}.knowledge-nav[_ngcontent-%COMP%]   .nav-item-width[_ngcontent-%COMP%]{max-width:112px;position:relative;top:2px;display:inline-block}.knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   .split-line-top[_ngcontent-%COMP%]{position:relative;top:-6px}.knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#aaa;font-size:14px;-webkit-text-decoration:navy;text-decoration:navy}.knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 6px}.knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   .active-nav[_ngcontent-%COMP%]{color:#676a6c}.knowledge-nav[_ngcontent-%COMP%]   .knowledge-nav-item[_ngcontent-%COMP%]   .nav-not-allowed[_ngcontent-%COMP%]{text-decoration:none!important;cursor:not-allowed!important}.knowledge-nav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{position:relative;display:inline-block;width:500px;height:24px}.knowledge-nav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .table-content[_ngcontent-%COMP%], .knowledge-nav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   article-edit-info[_ngcontent-%COMP%], .knowledge-nav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;left:0;top:-10px}.text-ellipsis[_ngcontent-%COMP%]{word-break:break-all;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),e}()}}]);